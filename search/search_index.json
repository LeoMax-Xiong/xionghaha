{"config":{"lang":["en","zh"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"\u6b22\u8fce\u6765\u5230XiongHaHa\u9c7c\u5858","text":""},{"location":"#_1","title":"\u5173\u4e8e\u672c\u7ad9","text":"<p>\u672c\u7f51\u7ad9\u4f5c\u4e3a\u6211\u4e2a\u4eba\u5b66\u4e60\u3001\u7814\u7a76\u6574\u7406\u7684\u5730\u65b9</p>"},{"location":"#_2","title":"\u611f\u609f","text":"<p>\u300a\u51ac\u591c\u8bfb\u4e66\u793a\u5b50\u807f\u300b</p> <p>\uff08\u5357\u5b8b\uff09\u9646\u6e38</p> <p>\u53e4\u4eba\u5b66\u95ee\u65e0\u9057\u529b\uff0c\u5c11\u58ee\u5de5\u592b\u8001\u59cb\u6210\u3002</p> <p>\u7eb8\u4e0a\u5f97\u6765\u7ec8\u89c9\u6d45\uff0c\u7edd\u77e5\u6b64\u4e8b\u8981\u8eac\u884c\u3002</p>"},{"location":"#_3","title":"\u8bc4\u8bba&amp;\u7591\u60d1","text":"<p>\u5927\u5bb6\u53ef\u4ee5\u5728github\u4e0a\u63d0issue\uff0c\u6216\u8005\u901a\u8fc7\u90ae\u4ef6\u76f4\u63a5\u8054\u7cfb\u6211</p>"},{"location":"blog/","title":"Blog","text":""},{"location":"blog/blogs/basic/","title":"basic","text":""},{"location":"datasets/tod/","title":"\u4efb\u52a1\u5f0f\u5bf9\u8bdd\u6570\u636e\u96c6","text":""},{"location":"datasets/tod/#_2","title":"\u6570\u636e\u96c6\u7b80\u4ecb","text":"\u6570\u636e\u96c6 \u591a\u8f6e\u5bf9\u8bdd\u6570\u76ee \u6bcf\u4e2a\u5bf9\u8bdd\u5e73\u5747\u8f6e\u6570 \u6bcf\u4e2a\u5bf9\u8bdd\u5e73\u5747tokens\u6570\u76ee \u5782\u7c7b\u6570\u76ee \u5355\u5782\u7c7b \u591a\u5782\u7c7b MultiWOZ 10438 13.70 13.18 7 \u2705 \u274e RiSAWOZ 11200 13.57 10.91 12 \u2705 \u274e"},{"location":"datasets/sft/lima/","title":"Lima \u6570\u636e\u96c6","text":""},{"location":"datasets/sft/lima/#_1","title":"\u7b80\u4ecb","text":"<p>\u8fd9\u7bc7\u8bba\u6587\u662f\u4e3a\u4e86\u8bc1\u660e\u5927\u6a21\u578b\u7684\u8868\u9762\u5bf9\u9f50\u5047\u8bbe(Superficial Alignment Hypothesis)\uff0c\u5927\u6a21\u578b\u7684\u5927\u91cf\u77e5\u8bc6\u90fd\u5728\u9884\u8bad\u7ec3\u91cc\u9762\u83b7\u53d6\uff0c\u901a\u8fc7\u5c11\u91cf\u7684SFT\u6570\u636e\u5373\u53ef\u4ee5\u8bad\u7ec3\u4e00\u4e2a\u5f88\u597d\u7684Chat\u6a21\u578b\u53bb\u6fc0\u53d1\u5927\u6a21\u578b\u4e2d\u5b58\u50a8\u7684\u77e5\u8bc6\u3002</p> <p>\u8be5\u6570\u636e\u96c6\u5728ModelScope\u4e2d\u7684\u8def\u5f84\u4e3a\uff1ahttps://modelscope.cn/datasets/swift/lima/files </p> <p>\u5bf9\u5e94\u7684\u6709\u4e00\u4e2a\u4e2d\u6587\u7248\u672c\u7684LIMA \u6570\u636e\u96c6\uff0cModelScope\u4e2d\u7684\u8def\u5f84\u4e3a\uff1ahttps://huggingface.co/datasets/Jellyfish042/Chinese-LIMA-V0</p>"},{"location":"datasets/sft/lima/#_2","title":"\u53c2\u8003","text":"<ol> <li>https://arxiv.org/abs/2305.11206</li> <li>https://finisky.github.io/lima-summary/</li> <li>https://www.mikecaptain.com/2023/05/26/captain-lima/</li> <li>https://www.ainavpro.com/3794.html</li> </ol>"},{"location":"hardware/%E5%9F%BA%E7%A1%80/","title":"\u6d6e\u70b9\u6570","text":""},{"location":"hardware/%E5%9F%BA%E7%A1%80/#_2","title":"\u80cc\u666f","text":"<p>\u6d6e\u70b9\u6570\u662f\u8ba1\u7b97\u673a\u7cfb\u7edf\u4e2d\u7528\u6765\u8868\u8fbe\u5b9e\u6570\u7684\u4e00\u79cd\u65b9\u5f0f\u3002\u8fd9\u79cd\u8868\u8fbe\u65b9\u5f0f\u5229\u7528\u79d1\u5b66\u8ba1\u6570\u6cd5\u6765\u8868\u8fbe\u5b9e\u6570\uff0c\u5373\u7528\u4e00\u4e2a\u5c3e\u6570( Mantissa\uff0c\u5c3e\u6570\u6709\u65f6\u4e5f\u79f0\u4e3a\u6709\u6548\u6570\u5b57\u2014\u2014\u2014Significand; \u5c3e\u6570\u5b9e\u9645\u4e0a\u662f\u6709\u6548\u6570\u5b57\u7684\u975e\u6b63\u5f0f\u8bf4\u6cd5) \uff0c\u4e00\u4e2a\u57fa\u6570( Base) \uff0c\u4e00\u4e2a\u6307\u6570( Exponent) \u4ee5\u53ca\u4e00\u4e2a\u8868\u793a\u6b63\u8d1f\u7684\u7b26\u53f7\u6765\u8868\u8fbe\u5b9e\u6570\uff0e \u6bd4\u5982 <code>123.45</code> \u7528\u5341\u8fdb\u5236\u79d1\u5b66\u8ba1\u6570\u6cd5\u53ef\u4ee5\u8868\u8fbe\u4e3a \\(1.2345 \\times 10^ 2\\)\uff0c\u5176\u4e2d 1.2345 \u4e3a\u5c3e\u6570\uff0c10 \u4e3a\u57fa\u6570\uff0c2 \u4e3a\u6307\u6570\uff0e \u6d6e\u70b9\u6570\u5229\u7528\u6307\u6570\u8fbe\u5230\u4e86\u6d6e\u52a8\u5c0f\u6570\u70b9\u7684\u6548\u679c\uff0c\u4ece\u800c\u53ef\u4ee5\u7075\u6d3b\u5730\u8868\u8fbe\u66f4\u5927\u8303\u56f4\u7684\u5b9e\u6570\u3002</p>"},{"location":"hardware/%E5%9F%BA%E7%A1%80/#ieee-754","title":"IEEE 754 \u6807\u51c6","text":"<p>IEEE754 \u6807\u51c6\u4e8e 1985 \u5e74\u63d0\u51fa\uff0c\u662f\u5f53\u524d\u4e8c\u8fdb\u5236\u6d6e\u70b9\u8fd0\u7b97\u7684\u683c\u5f0f\u6807\u51c6\uff0e IEEE754 \u6807\u51c6\u89c4\u5b9a\u4e86\u4e24\u79cd\u57fa\u672c\u6d6e\u70b9\u683c\u5f0f: \u5355\u7cbe\u5ea6\u548c\u53cc\u7cbe\u5ea6\u3002 IEEE754 \u6807\u51c6\u8981\u6c42\u6d6e\u70b9\u6570\u5fc5\u987b\u662f\u89c4\u8303\u7684\u3002\u4e00\u4e2a\u5b9e\u6570 \\(R\\) \u7684\u4e8c\u8fdb\u5236\u79d1\u5b66\u8ba1\u6570\u6cd5\u53ef\u8868\u793a\u4e3a \\(R = (\uff0d1)^S \\times 2^{E} \\times M\\)\uff0c\u5176\u4e2d * S \u4e3a\u5b9e\u6570\u7684\u7b26\u53f7\uff0c<code>0</code> \u6b63 <code>1</code> \u8d1f\u3002  * E \u4e3a\u4e8c\u8fdb\u5236\u6570\u7684\u6307\u6570\uff0c * M \u8868\u793a\u5c3e\u6570\uff0c\u89c4\u8303\u7684\u4e8c\u8fdb\u5236\u6570 \\(M=1.d_1,d_2, \\cdots, d_{M}\\) \u57fa\u672c\u6d6e\u70b9\u683c\u5f0f\u5bf9\u5e94\u7684\u7c7b\u578b\u4e3a Float \u548cDouble\u3002</p> <p>\u6d6e\u70b9\u683c\u5f0f\u4e2d\u6700\u9ad8\u4f4d\u662f\u7b26\u53f7\u4f4d\uff0e\u4e2d\u95f4\u662f\u6307\u6570\u57df\uff0c\u5bf9\u5e94\u4e8e\u4e8c\u8fdb\u5236\u79d1\u5b66\u8ba1\u6570\u6cd5\u4e2d\u7684\u6307\u6570\u90e8\u5206\uff0c\u6307\u6570\u90e8\u5206\u79f0\u4e3a\u6d6e\u70b9\u6570\u7684\u9636\u7801\uff0c\u91c7\u7528\u79fb\u7801\u65b9\u5f0f\u5b58\u50a8\u3002</p>"},{"location":"hardware/%E5%9F%BA%E7%A1%80/#_3","title":"\u6d6e\u70b9\u6570\u7684\u8868\u793a","text":"<p>\u5355\u7cbe\u5ea6\u6d6e\u70b9\u6570\u8981\u6307\u6570\u503c\u52a0\u4e0a\u504f\u79fb\u91cf 127\uff0c\u53cc\u7cbe\u5ea6\u8981\u6307\u6570\u503c\u52a0\u4e0a\u504f\u79fb\u91cf 1023\u3002\u5bf9\u4e8e\u5355\u7cbe\u5ea6\u6d6e\u70b9\u6570\uff0c\u53ef\u4ee5\u8868\u8fbe\u7684\u6307\u6570\u771f\u503c\u7684\u8303\u56f4\u5728 <code>\uff0d128</code> \u5230 <code>127</code> \u4e4b\u95f4\u3002 \u6307\u6570\u771f\u503c <code>\uff0d128</code> \u4ee5\u53ca <code>\uff0d127</code> \u4fdd\u7559\u7528\u4f5c\u7279\u6b8a\u503c\u7684\u5904\u7406\u3002 \u6307\u6570\u771f\u503c\u52a0\u4e0a\u504f\u79fb\u91cf 127 \u4e4b\u540e\uff0c\u6307\u6570 E \u7684\u673a\u5668\u503c\u4e3a 1 \u5230254\uff0c\u5373\u91c7\u7528\u79fb\u7801\u540e\uff0c\u6307\u6570\u7684\u673a\u5668\u6570\u5168\u90e8\u7528\u6b63\u6570\u8868\u793a\uff0c\u4fbf\u4e8e\u6bd4\u8f83\u6d6e\u70b9\u6570\u7684\u5927\u5c0f\uff0e \u6307\u6570\u771f\u503c\u8303\u56f4\u5728 \uff0d126\u548c 127 \u4e4b\u95f4\u7684\u6d6e\u70b9\u6570\u79f0\u4e3a\u89c4\u683c\u5316\u7684\u6d6e\u70b9\u6570\u3002\u6d6e\u70b9\u683c\u5f0f\u7684\u6700\u540e\u662f\u5c3e\u6570\u57df\uff0c\u89c4\u8303\u7684\u4e8c\u8fdb\u5236\u6570\u7684\u5c3e\u6570\u5c0f\u6570\u70b9\u524d\u9762\u603b\u662f 1\uff0c\u6240\u4ee5\u5728\u4fdd\u5b58\u5c3e\u6570\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u7701\u7565\u5c0f\u6570\u70b9\u524d\u9762\u7684 1\u3002</p> <p>fp32\u3001fp16\u3001bf16\u5206\u522b\u6307\u5355\u7cbe\u5ea6\u6d6e\u70b9\u6570\uff08float32\uff09\u3001Intel\u63d0\u51fa\u7684\u534a\u7cbe\u5ea6\u6d6e\u70b9\u6570\uff08float16)\u3001nvidia\u63d0\u51fa\u7684\u534a\u7cbe\u5ea6\u6d6e\u70b9\u6570\uff08bfloat16\uff09\u3002\u540d\u5b57\u5f53\u4e2d\u7684\u6570\u5b57\u5c31\u5bf9\u5e94\u4e86\u8be5\u79cd\u6d6e\u70b9\u6570\u8868\u793a\u65b9\u6cd5\u6240\u5360\u7684bit\u6570\uff0c\u90a3\u4e48fp16\u548cbp16\u7684\u5b58\u50a8\u7a7a\u95f4\u5929\u7136\u5c31\u662ffp32\u7684\u4e00\u534a\u3002</p> <p>\u4ee5fp16\u4e3a\u4f8b\uff0c\u5b83\u5360\u670916bit\uff082\u5b57\u8282\uff09\uff0c\u5176\u4e2d5bit\u7528\u6765\u8868\u793a\u6307\u6570\u4f4d\uff08\u8868\u793a10\u7684\u5e42\u6b21\uff09\uff0c10bit\u7528\u6765\u8868\u793a\u5c0f\u6570\u4f4d\uff08\u4e5f\u53eb\u5c3e\u6570\u4f4d\uff0c\u8868\u793a\u6d6e\u70b9\u6570\u7684\u6709\u6548\u6570\u5b57\u90e8\u5206\uff09\uff0c\u8fd8\u6709\u4e00\u4e2a\u7b26\u53f7\u4f4d\u30025\u4e2a\u6307\u6570\u4f4d\u672c\u6765\u53ef\u4ee5\u8868\u793a00000-11111\uff0c\u4f46\u662f\u51680\u548c\u51681\u6709\u7279\u6b8a\u542b\u4e49\uff0c\u6362\u7b97\u621010\u8fdb\u5236\u4e5f\u5c31\u662f1\u81f330\uff0c\u51cf\u53bb\u504f\u7f6e15\u3001\u80fd\u8868\u793a\u7684\u6b63\u8d1f\u533a\u95f4\u4e3a-14\u81f315\uff0c\u5c3e\u6570\u4f4d\u53ef\u4ee5\u8868\u793a<code>1.0000000000</code> \u81f3 <code>1.1111111111</code>\uff08\u6b64\u65f6\u5c3e\u6570\u4f4d\u524d\u7684\u9690\u85cf\u9879\u4e3a1\uff09\uff0c\u6362\u7b97\u621010\u8fdb\u5236\u4e5f\u5c31\u662f[1, 2)\u3002</p> <p>\u4e0a\u9762\u63d0\u5230\u7684\u6307\u6570\u4f4d\u51680\u548c\u51681\u6709\u4ec0\u4e48\u7279\u6b8a\u542b\u4e49\u5462\uff1a</p> <ul> <li>\u6307\u6570\u4f4d\u51680\u8868\u793a\u975e\u89c4\u683c\u6570\uff0c\u4e5f\u5c31\u662f+0\u3001-0, \u4ee5\u53ca\u975e\u5e38\u9760\u8fd10\u7684\u6570, \u6bd4\u59821E-38\u3002</li> <li>\u6307\u6570\u51681\u8868\u793a\u7279\u6b8a\u6570\uff0c\u6709Inf\u548cNaN\u4e24\u79cd\u60c5\u51b5\u3002\u5c0f\u6570\u4f4d\u51680\u8868\u793a\u65e0\u7a77\u5927inf\uff0c\u6839\u636e\u7b26\u53f7\u4f4d\u4e0d\u540c\u53ef\u4ee5\u5206\u4e3a+inf\u548c-inf\u3002\u5c0f\u6570\u4f4d\u4e0d\u5168\u4e3a0\uff0c\u8868\u793aNaN\u3002</li> <li>\u89c4\u683c\u6570\u548c\u975e\u89c4\u683c\u6570\u62fc\u63a5\u8d77\u6765\u624d\u662f\u4e00\u4e2a\u5b8c\u6574\u7684\u53d6\u503c\u8303\u56f4\u3002</li> </ul> <p>\u90a3\u4e48fp16\u6240\u80fd\u8868\u793a\u7684\u6570\u7684\u53d6\u503c\u8303\u56f4\u662f\u591a\u5c11\uff1f\u6700\u5927\u503c \\(1.1111111111 * 2^{11110}\\) \u6362\u7b97\u621010\u8fdb\u5236\u4e5f\u5c31\u662f \\((1 + \\frac{1023}{1024}) * 2^{15} = 65504\\)\uff1b\u800c\u6700\u5c0f\u503c \\(-1.1111111111 * 2 ^{11110}\\)\uff0c\u6362\u7b97\u621010\u8fdb\u5236\u4e5f\u5c31\u662f \\(-(1 + \\frac{1023}{1024})=-65504\\)\uff1b\u6700\u5c0f\u6b63\u503c \\(0.0000000001 * 2^{00000}\\)\uff0c\u6b64\u65f6\u6307\u6570\u4f4d\u51680\uff08\u4e5f\u5c31\u662f\u6240\u8c13\u7684\u975e\u89c4\u683c\u6570\uff09\uff0c\u6ce8\u610f\u6b64\u65f6\u6307\u6570\u4f4d\u56fa\u5b9a\u4e3a \\(1-\u504f\u7f6e\u9879=1-15=-14\\)\uff0c\u4e14\u5c3e\u6570\u4f4d\u524d\u7684\u9690\u85cf\u9879\u4e5f\u4e0d\u518d\u662f1\u800c\u662f0\uff0c\u6240\u4ee5\u6362\u7b97\u621010\u8fdb\u5236\u4e5f\u5c31\u662f   \\(\\frac{1}{1024} * 2 ^{-1024} = 2^{-24}=0.000000059604645\\)\u3002\u6240\u4ee5fp16\u7684\u52a8\u6001\u8303\u56f4\u4e3a\uff085.96E\u22128~65504\uff09\u3002</p> <p>\u7528\u540c\u6837\u7684\u529e\u6cd5\uff0c\u6211\u4eec\u4e5f\u80fd\u7b97\u51fafp32\u7684\u52a8\u6001\u8303\u56f4\u4e3a(1.4E-45 ~ 3.40E38)\u3002</p> <p>\u800cbf16\u5462\uff1f\u5b83\u76f8\u5f53\u4e8e\u662f\u5c06fp32\u7684\u5c3e\u6570\u4f4d\u622a\u65ad\u4e86\uff0c\u5b83\u8ddffp16\u4e00\u6837\u536016bit\uff0c\u8ddffp32\u4e00\u6837\u67098\u4e2a\u6307\u6570\u4f4d\uff0c\u90a3\u4e48\u8bf4\u660e\u5b83\u7684\u5c3e\u6570\u4f4d\u53ea\u67097\u4f4d\uff0c\u8fd9\u6837\u4e00\u6765\uff0c\u6211\u4eec\u5c31\u7528\u635f\u5931\u7cbe\u5ea6\u7684\u4ee3\u4ef7\u6362\u6765\u4e86\u51e0\u4e4e\u8ddffp32\u4e00\u6837\u5927\u7684\u53d6\u503c\u8303\u56f4\uff0c\u907f\u514d\u4e86fp16\u5bb9\u6613\u4e0a\u3001\u4e0b\u6ea2\u7684\u95ee\u9898\u3002\u5b83\u7684\u6700\u5927\u503c  \\(1.1111111 * 2^{11111110}\\) ,\u6362\u7b97\u621010\u8fdb\u5236\u5c31\u662f \\((1+\\frac{127}{128}) * 2 ^{127}\\)\uff0c\u7ea6\u4e3a3.38E38\uff1b\u6700\u5c0f\u6b63\u503c \\(0.0000001 * 2^{00000000}\\) \uff0c\u6362\u7b97\u621010\u8fdb\u5236\u4e5f\u5c31\u662f \\(\\frac{1}{128} * 2^{-126} = 2^{-133}\\)\uff0c\u7ea6\u4e3a9.2E\u221241\uff0c\u6240\u4ee5bf16\u7684\u52a8\u6001\u8303\u56f4\u4e3a(9.2E\u221241~3.38E38)\u3002 </p>"},{"location":"hardware/%E5%9F%BA%E7%A1%80/#_4","title":"\u4e8c\u3001\u6df7\u5408\u7cbe\u5ea6","text":"<p>\u867d\u7136\u7406\u60f3\u60c5\u51b5\u4e0b\u8bad\u7ec3\u548c\u63a8\u7406\u90fd\u5e94\u8be5\u5728fp32 \u4e2d\u5b8c\u6210\uff0c\u4f46\u534a\u7cbe\u5ea6\u5360\u7528\u5185\u5b58\u66f4\u5c11\u3001\u8ba1\u7b97\u66f4\u5feb\u3002</p> <p>\u6a21\u578b\u5360\u7528\u7684\u5185\u5b58\u66f4\u5c0f\uff0c\u8bad\u7ec3\u7684\u65f6\u5019\u53ef\u4ee5\u7528\u66f4\u5927\u7684batchsize\u3002 \u6a21\u578b\u8bad\u7ec3\u65f6\uff0c\u901a\u4fe1\u91cf\uff08\u7279\u522b\u662f\u591a\u5361\uff0c\u6216\u8005\u591a\u673a\u591a\u5361\uff09\u5927\u5e45\u51cf\u5c11\uff0c\u5927\u5e45\u51cf\u5c11\u7b49\u5f85\u65f6\u95f4\uff0c\u52a0\u5feb\u6570\u636e\u7684\u6d41\u901a\u3002</p> <p>\u800c\u4e4b\u6240\u4ee5\u8981\u4f7f\u7528\u6df7\u5408\u7cbe\u5ea6\u3001\u800c\u4e0d\u662f\u5168\u90e8\u66ff\u6362\u4e3a\u534a\u7cbe\u5ea6\u7684\u539f\u56e0\u662f\u6570\u636e\u6ea2\u51fa\u548c\u820d\u5165\u8bef\u5dee\u3002</p>"},{"location":"hardware/%E5%9F%BA%E7%A1%80/#21","title":"2.1 \u6570\u636e\u6ea2\u51fa","text":"<p>\u5bf9\u6bd4\u5b83\u4eec\u7684\u52a8\u6001\u8303\u56f4\uff1a</p> <p>fp16\uff085.96E\u22128~ 65504\uff09</p> <p>fp32\uff081.4E-45 ~ 3.40E38)</p> <p>bf16\uff089.2E\u221241~3.38E38)</p> <p>\u663e\u7136\uff0c\u534a\u7cbe\u5ea6\u8ddf\u5355\u7cbe\u5ea6\u6bd4\uff0c\u5bb9\u6613\u51fa\u73b0\u6570\u636e\u7684\u4e0a\u6ea2\u548c\u4e0b\u6ea2\uff0c\u5176\u4e2d\u5728\u6a21\u578b\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\uff0c\u66f4\u6709\u53ef\u80fd\u51fa\u73b0\u7684\u662f\u5c0f\u68af\u5ea6\u5bfc\u81f4\u7684\u4e0b\u6ea2\u3002</p>"},{"location":"hardware/%E5%9F%BA%E7%A1%80/#22","title":"2.2 \u820d\u5165\u8bef\u5dee","text":"<p>\u8fd9\u4e09\u79cd\u7cbe\u5ea6\u5b83\u4eec\u7684\u201c\u95f4\u9694\u5355\u4f4d\u201d\u4e5f\u662f\u4e0d\u4e00\u6837\u7684\uff0c\u6211\u4eec\u8ba1\u7b97\u7684\u6700\u5c0f\u6b63\u503c\u5c31\u662f\u5b83\u4eec\u7684\u95f4\u9694\u5355\u4f4d\uff0c\u800c\u95f4\u9694\u5355\u4f4d\u7684\u5927\u5c0f\u51b3\u5b9a\u4e86\u4e00\u4e2a\u5c0f\u503c\u662f\u5426\u4f1a\u88ab\u820d\u5f03\u3002\u6bd4\u5982\u8bf4fp32\u548cbf16\u867d\u7136\u6709\u5927\u81f4\u4e00\u6837\u7684\u53d6\u503c\u8303\u56f4\uff0c\u4f46\u662f\u5b83\u4eec\u7684\u7cbe\u5ea6\uff08\u95f4\u9694\u5355\u4f4d\uff09\u662f\u4e0d\u4e00\u6837\u7684\uff0c\u5f53\u4e00\u4e2afp32\u7684\u503c+1.4E-45\u65f6\uff0c\u8fd9\u4e2a\u5c0f\u503c\u4f1a\u88ab\u770b\u5230\uff0c\u539f\u503c\u4f1a\u53d1\u751f\u53d8\u52a8\uff0c\u4f46\u5982\u679c\u662f\u4e00\u4e2abf16\u7684\u503c+1.4E-45\uff0c\u7531\u4e8ebf16\u7684\u95f4\u9694\u5355\u4f4d\u4e3a9.2E\u221241\uff0c\u8fd9\u4e2a\u5c0f\u503c\u5c31\u4f1a\u88ab\u820d\u5f03\uff0c\u539f\u503c\u4e0d\u53d1\u751f\u53d8\u52a8\uff0c\u8fd9\u4e5f\u5c31\u5bfc\u81f4\u4e86\u820d\u5165\u8bef\u5dee\u3002</p>"},{"location":"hardware/%E5%9F%BA%E7%A1%80/#_5","title":"\u4e09\u3001\u6df7\u5408\u7cbe\u5ea6\u7684\u4f7f\u7528","text":"<p>\u4e0a\u9762\u63d0\u5230\u7684\u4e24\u4e2a\u95ee\u9898\uff0c\u5176\u5b9e\u90fd\u662f\u5728\u6a21\u578b\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\u7531\u4e8e\u68af\u5ea6\u66f4\u65b0\u5bfc\u81f4\u7684\uff0c\u6240\u4ee5\u5982\u679c\u662f\u63a8\u7406\u7684\u8bdd\uff0c\u76f4\u63a5\u964d\u4f4e\u7cbe\u5ea6\u5373\u53ef\u3002\u800c\u8bad\u7ec3\u7684\u8bdd\uff0c\u5c31\u9700\u8981\u6df7\u5408\u7cbe\u5ea6\u4e86\u3002</p> <p>\u6df7\u5408\u7cbe\u5ea6\u5c31\u662f\u901a\u8fc7\u4e00\u4e9b\u8bbe\u8ba1\uff0c\u4f7f\u5f97\u6211\u4eec\u53ef\u4ee5\u4eab\u53d7\u534a\u7cbe\u5ea6\u7684\u4f18\u70b9\uff0c\u53c8\u53ef\u4ee5\u4e00\u5b9a\u7a0b\u5ea6\u89c4\u907f\u6570\u636e\u6ea2\u51fa\u548c\u820d\u5165\u8bef\u5dee\u3002</p>"},{"location":"hardware/%E5%9F%BA%E7%A1%80/#31","title":"3.1 \u6743\u91cd\u7684\u9ad8\u7cbe\u5ea6\u5907\u4efd","text":"<p> \u8fd9\u79cd\u65b9\u6cd5\u4e3b\u8981\u662f\u7528\u4e8e\u89e3\u51b3\u820d\u5165\u8bef\u5dee\u7684\u95ee\u9898\u3002\u6211\u4eec\u4f7f\u7528 fp32 \u6743\u91cd\u4f5c\u4e3a\u7cbe\u786e\u7684 \u201c\u4e3b\u6743\u91cd (master weight)\u201d\u8fdb\u884c\u5907\u4efd\uff0c\u800c\u5176\u4ed6\u6240\u6709\u503c\uff08weights\uff0cactivations\uff0c gradients\uff09\u5747\u4f7f\u7528 fp16 \u8fdb\u884c\u8ba1\u7b97\u4ee5\u63d0\u9ad8\u8bad\u7ec3\u901f\u5ea6\uff0c\u6700\u540e\u5728\u68af\u5ea6\u66f4\u65b0\u9636\u6bb5\u518d\u4f7f\u7528\u534a\u7cbe\u5ea6\u7684\u68af\u5ea6\u66f4\u65b0\u5355\u7cbe\u5ea6\u7684\u4e3b\u6743\u91cd\uff0c\u8fd9\u6837\u5f53\u5f88\u5c0f\u7684\u68af\u5ea6*\u5b66\u4e60\u7387\u540e\u8981\u8ddf\u6743\u91cd\uff08fp32\u7684\uff09\u505a\u8fd0\u7b97\u65f6\uff0c\u5c31\u4e0d\u4f1a\u88ab\u820d\u5f03\u4e86\u3002</p> <p>\u7531\u4e8e fp16 \u6df7\u5408\u7cbe\u5ea6\u5927\u5927\u51cf\u5c11\u4e86\u5185\u5b58\u9700\u6c42, \u5e76\u53ef\u4ee5\u5b9e\u73b0\u66f4\u5feb\u7684\u901f\u5ea6, \u56e0\u6b64\u53ea\u6709\u5728\u5728\u6b64\u8bad\u7ec3\u6a21\u5f0f\u4e0b\u8868\u73b0\u4e0d\u4f73\u65f6, \u624d\u8003\u8651\u4e0d\u4f7f\u7528\u6df7\u5408\u7cbe\u5ea6\u8bad\u7ec3\u3002 \u901a\u5e38, \u5f53\u6a21\u578b\u672a\u5728 fp16 \u6df7\u5408\u7cbe\u5ea6\u4e2d\u8fdb\u884c\u9884\u8bad\u7ec3\u65f6, \u4f1a\u51fa\u73b0\u8fd9\u79cd\u60c5\u51b5\u3002 \u8fd9\u6837\u7684\u6a21\u578b\u53ef\u80fd\u4f1a\u6ea2\u51fa, \u5bfc\u81f4loss\u4e3aNaN\u3002 \u5982\u679c\u662f\u8fd9\u79cd\u60c5\u51b5, \u4f7f\u7528\u5b8c\u6574\u7684 fp32 \u6a21\u5f0f\u3002</p> <p>\u770b\u5230\u8fd9\u91cc\uff0c\u53ef\u80fd\u6709\u4eba\u63d0\u51fa\u8fd9\u79cd fp32 \u62f7\u8d1dweight\u7684\u65b9\u5f0f\uff0c\u90a3\u5c82\u4e0d\u662f\u4f7f\u5f97\u5185\u5b58\u5360\u7528\u53cd\u800c\u66f4\u9ad8\u4e86\u5462\uff1f\u662f\u7684\uff0c fp32 \u989d\u5916\u62f7\u8d1d\u4e00\u4efd weight \u7684\u786e\u65b0\u589e\u52a0\u4e86\u8bad\u7ec3\u65f6\u5019\u5b58\u50a8\u7684\u5360\u7528\u3002 \u4f46\u662f\u5b9e\u9645\u4e0a\uff0c\u5728\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\uff0c\u5185\u5b58\u4e2d\u5360\u636e\u5927\u90e8\u5206\u7684\u57fa\u672c\u90fd\u662f activations \u7684\u503c\u3002\u7279\u522b\u662f\u5728batchsize \u5f88\u5927\u7684\u60c5\u51b5\u4e0b\uff0c activations \u66f4\u662f\u7279\u522b\u5360\u636e\u7a7a\u95f4\u3002 \u4fdd\u5b58 activiations \u4e3b\u8981\u662f\u4e3a\u4e86\u5728 back-propogation \u7684\u65f6\u5019\u8fdb\u884c\u8ba1\u7b97\u3002\u56e0\u6b64\uff0c\u53ea\u8981 activation \u7684\u503c\u57fa\u672c\u90fd\u662f\u4f7f\u7528 fp16 \u6765\u8fdb\u884c\u5b58\u50a8\u7684\u8bdd\uff0c\u5219\u6700\u7ec8\u6a21\u578b\u4e0e fp32 \u76f8\u6bd4\u8d77\u6765\uff0c \u5185\u5b58\u5360\u7528\u4e5f\u57fa\u672c\u80fd\u591f\u51cf\u534a\u3002</p>"},{"location":"hardware/%E5%9F%BA%E7%A1%80/#32-loss-scale","title":"3.2 Loss scale","text":"<p>\u4e0a\u9762\u8fd9\u5f20\u56fe\u5c55\u793a\u4e86\u5728\u771f\u5b9e\u8bad\u7ec3\u573a\u666f\u4e0b\u68af\u5ea6\u503c\u7684\u5206\u5e03\uff0c\u53ef\u89c1\u5927\u90e8\u5206\u7684\u503c\u90fd\u5f88\u5c0f\uff0c\u4ee5fp16\u4e3a\u4f8b\uff0c\u5b83\u7684\u6307\u6570\u8303\u56f4\u662f[-14, 15]\uff0c\u56fe\u4e2d\u5927\u90e8\u5206\u68af\u5ea6\u90fd\u5c0f\u4e8e\u8fd9\u4e2a\u8303\u56f4\u3001\u4ece\u800c\u88ab\u5f52\u4e3a0\u4e86\u3002Loss scale\u8981\u505a\u7684\u5c31\u662f\u901a\u8fc7\u8ba9\u68af\u5ea6\u4e58\u4e00\u4e2ascale\u4ece\u800c\u4f7f\u5f97\u8fd9\u4e2a\u5206\u5e03\u53f3\u79fb\u3001\u5360\u636e\u66f4\u591afp16\u53ef\u8868\u793a\u7684\u8303\u56f4\u3002</p>"},{"location":"hardware/%E5%9F%BA%E7%A1%80/#33","title":"3.3 \u7b97\u6570\u7cbe\u5ea6","text":"<p>\u795e\u7ecf\u7f51\u7edc\u7684\u8bad\u7ec3\u4e2d\u4e3b\u8981\u6d89\u53ca\u4e09\u79cd\u8fd0\u7b97\uff1a\u5411\u91cf\u70b9\u4e58\uff0creduction\uff08\u51cf\u5c11\u4e00\u4e2atensor\u4e2d\u7684\u5143\u7d20\u6570\u91cf\uff0c\u5f80\u5f80\u5bf9\u4e00\u4e2aTensor\u5185\u7684\u5143\u7d20\u505a\u5f52\u7ea6\u64cd\u4f5c\uff0c\u5f80\u5f80\u51fa\u73b0\u5728batch-norm\u5c42\uff09\uff0cpointwise\u7684\u8fd0\u7b97\u3002</p> <p>\u5411\u91cf\u70b9\u4e58\u4e2d\u7684\u52a0\u6cd5\u4f7f\u7528fp32\u6765\u505a\uff0c\u4f46\u4ee5\u534a\u7cbe\u5ea6\u7684\u65b9\u5f0f\u5b58\u50a8\uff1breduction\u4e5f\u8981\u7528fp32\u6765\u505a\uff0c\u4f46\u4ee5\u534a\u7cbe\u5ea6\u65b9\u5f0f\u5b58\u50a8\uff1b</p> <p>Whereas previous GPUs supported only FP16 multiplyadd operation, NVIDIA Volta GPUs introduce Tensor Cores that multiply FP16 input matrices and accumulate products into either FP16 or FP32 outputs (NVIDIA, 2017). pointwise\u7684\u8fd0\u7b97\uff08\u6bd4\u5982element-wise matrix products\uff09\uff0c\u6536\u5230memory-bandwidth\u9650\u5236\uff0c\u800c\u4e14\u5b83\u4eec\u662f\u4ee5\u5355\u7cbe\u5ea6\u8fd8\u662f\u534a\u7cbe\u5ea6\u8fd0\u7b97\uff0c\u90fd\u4e0d\u5f71\u54cd\u8ba1\u7b97\u901f\u5ea6\uff0c\u6240\u4ee5\u5355\u3001\u534a\u7cbe\u5ea6\u5747\u53ef\u3002</p>"},{"location":"hardware/%E5%9F%BA%E7%A1%80/#_6","title":"\u56db\u3001\u91cf\u5316\u7684\u5e94\u7528","text":"<p>\u6839\u636e\u7b2c\u4e8c\u90e8\u5206\u4e2d\u6df7\u5408\u7cbe\u5ea6\u7684\u4f7f\u7528\u65b9\u6cd5\uff0c\u6211\u4eec\u53ef\u4ee5\u5f97\u77e5\u8f93\u5165\u5411\u91cf\u8d70\u8fc7\u6a21\u578b\u8ba1\u7b97\u56fe\u65f6\uff0c\u6240\u6709\u6743\u91cd\u77e9\u9635\u90fd\u4f1a\u4f9d\u6b21\u6267\u884c\u53cd\u91cf\u5316\u548c\u91cd\u91cf\u5316\u64cd\u4f5c\uff0c\u6240\u4ee5\uff0c\u4f7f\u7528\u6743\u91cd\u91cf\u5316\u65f6\uff0c\u63a8\u7406\u65f6\u95f4\u901a\u5e38\u4e0d\u4f1a\u51cf\u5c11\uff0c\u53cd\u800c\u4f1a\u589e\u52a0\u3002</p> <p>\u5982\u4f55\u8fdb\u884c\u91cf\u5316\uff1f\u4f7f\u7528huggingface\u65f6\uff0c\u662f\u975e\u5e38\u7b80\u5355\u7684\uff0c\u6bd4\u5982\uff1a</p> <p>model = AutoModelForCausalLM.from_pretrained(\"...\", torch_dtype=torch.bfloat16, device_map=\"auto\", pad_token_id=0) \u5982\u679c\u534a\u7cbe\u5ea6\u65e0\u6cd5\u6ee1\u8db3\u4f60\u7684\u9700\u6c42\uff0c\u4e5f\u53ef\u4ee5\u8fdb\u884c8bit\u62164bit\u91cf\u5316\uff1a</p> <p>model = AutoModelForCausalLM.from_pretrained(\"...r\", load_in_8bit=True, pad_token_id=0) model = AutoModelForCausalLM.from_pretrained(\"...r\", load_in_4bit=True, pad_token_id=0)</p>"},{"location":"hardware/%E5%9F%BA%E7%A1%80/#_7","title":"\u53c2\u8003","text":"<ol> <li>https://zhuanlan.zhihu.com/p/657886517</li> <li>https://deeprec.readthedocs.io/zh/latest/BFloat16.html</li> <li>https://zhuanlan.zhihu.com/p/667163603</li> <li>https://blog.csdn.net/Phoenix_ZengHao/article/details/118760774</li> <li>\u675c\u53d4\u5f3a,\u65bd\u6b66\u7956.\u6d6e\u70b9\u6570\u7528\u6cd5\u5206\u6790[J].\u5170\u5dde\u5de5\u4e1a\u9ad8\u7b49\u4e13\u79d1\u5b66\u6821\u5b66\u62a5, 2012.DOI:CNKI:SUN:LZGD.0.2012-03-013.</li> <li>https://www.cnblogs.com/cbscan/articles/2032127.html</li> <li>https://zhuanlan.zhihu.com/p/343033661</li> <li>https://www.johndcook.com/blog/2018/11/15/bfloat16/</li> </ol>"},{"location":"home/about/","title":"\u5173\u4e8e","text":""},{"location":"home/about/#_1","title":"\ud83d\udd2d \u5173\u4e8e","text":""},{"location":"home/about/#_2","title":"\u5173\u4e8e\u6211","text":"<ul> <li>\u59d3\u540d\uff1a\u718a\u54c8\u54c8</li> <li>\u8054\u7cfb\u65b9\u5f0f\uff1a915574300@qq.com</li> <li>\u5c97\u4f4d\uff1a\u7b97\u6cd5\u5de5\u7a0b\u5e08\uff08NLP, \u8bed\u97f3)</li> </ul>"},{"location":"home/about/#_3","title":"\u5173\u4e8e\u672c\u7ad9","text":"<p>\u672c\u7f51\u7ad9\u4f5c\u4e3a\u6211\u4e2a\u4eba\u5b66\u4e60\u3001\u7814\u7a76\u548c\u5f00\u53d1\u7684\u89c4\u5212\u56fe\u3002</p>"},{"location":"home/about/#_4","title":"\u4e2a\u4eba\u8d5e\u52a9","text":"<p>\u5982\u679c\u60a8\u89c9\u5f97\u672c\u7ad9\u7684\u5185\u5bb9\u5bf9\u60a8\u6709\u5e2e\u52a9\u548c\u542f\u53d1\uff0c\u53ef\u4ee5\u901a\u8fc7\u626b\u63cf\u4e0b\u65b9\u4e8c\u7ef4\u7801\u8d5e\u52a9\uff0c\u611f\u8c22\u60a8\u7684\u652f\u6301\u548c\u5e2e\u52a9 </p>"},{"location":"huggingface/datasets/DatasetDict%E7%B1%BB/","title":"DatasetDict \u7c7b","text":"<p><code>datasets.DatasetDict</code> \u662fHugging Face\u7684 <code>datasets</code> \u5e93\u4e2d\u7684\u4e00\u4e2a\u7c7b\uff0c\u5b83\u662f\u4e00\u4e2a\u5305\u542b\u591a\u4e2a <code>datasets.Dataset</code> \u5bf9\u8c61\u7684\u5b57\u5178\uff0c\u901a\u5e38\u7528\u6765\u5b58\u50a8\u548c\u7ba1\u7406\u5177\u6709\u4e0d\u540c\u6570\u636e\u5206\u5272\uff08\u5982\u8bad\u7ec3\u96c6\u3001\u9a8c\u8bc1\u96c6\u548c\u6d4b\u8bd5\u96c6\uff09\u7684\u6570\u636e\u96c6\u3002</p>"},{"location":"huggingface/datasets/DatasetDict%E7%B1%BB/#datasetdict_1","title":"\u521b\u5efa <code>DatasetDict</code>","text":"<p><code>DatasetDict</code> \u53ef\u4ee5\u4ece\u591a\u4e2a <code>datasets.Dataset</code> \u5bf9\u8c61\u521b\u5efa\uff0c\u6216\u8005\u4ece\u4e00\u4e2a\u5305\u542b\u6570\u636e\u96c6\u7684\u5b57\u5178\u4e2d\u521b\u5efa\uff0c\u672c\u8d28\u4e0a <code>DatasetDict</code> \u662f\u4e00\u4e2a\u5b57\u5178\uff0c\u5176\u952e\u662f\u6570\u636e\u96c6\u7684\u540d\u79f0\uff08\u5982 \"<code>train</code>\", \"<code>test</code>\"\uff09\uff0c\u503c\u662f\u5bf9\u5e94\u7684 <code>datasets.Dataset</code> \u5bf9\u8c61\u3002\u5176\u6784\u9020\u51fd\u6570\u5982\u4e0b\uff1a</p> Python<pre><code>class DatasetDict(dict):\n    \"\"\"A dictionary (dict of str: datasets.Dataset) with dataset transforms methods (map, filter, etc.)\"\"\"\n    pass\n</code></pre> <p><code>DatasetDict</code> \u91cd\u8981\u63a5\u53e3\u5982\u4e0b\u6240\u793a\uff1a</p> \u65b9\u6cd5\u540d \u63cf\u8ff0 \u5907\u6ce8 from_json \u4eceJSON\u6587\u4ef6\u52a0\u8f7d<code>DatasetDict</code>\u3002 \u8bfb\u53d6\u6570\u636e\u4e4b\u540e\uff0c\u4f1a\u5b58\u50a8\u591a\u4e2a\u5173\u952e\u7684\u4fe1\u606f\uff0c\u8fd9\u4e9b\u4fe1\u606f\u5982\u4e0b\uff1a 1.  cached_files: \u6bcf\u4e2a\u96c6\u5408\u7684\u7f13\u5b58\u6587\u4ef6  2. data: \u52a0\u8f7d\u4e4b\u540e\u7684\u6570\u636e\uff0c\u8fd9\u4e2a\u6570\u636e\u662f\u4e00\u4e2a\u5b57\u5178\uff0c\u5b57\u5178\u7684key\u662f <code>train</code>, <code>dev</code>, <code>test</code>\u3002\u5b57\u5178\u7684value\u662f\u5bf9\u5e94\u7684 <code>MemoryMappedTable</code> \u5bf9\u8c61\u3002 3. num_columns: \u6570\u636e\u96c6\u5408\u6bcf\u4e2a\u6837\u672c\u5b57\u6bb5\u7684\u6570\u76ee\u3002 4. num_rows: \u8fd9\u662f\u4e00\u4e2a\u5b57\u6bb5\uff0c\u4fdd\u5b58\u4e86\u6bcf\u4e2a\u6570\u636e\u96c6\u7684\u6837\u672c\u7684\u6570\u76ee\uff0ckey\u662f <code>train</code>, <code>dev</code>, <code>test</code>\u3002 5. \u63a5\u4e0b\u6765\u5c31\u662f\u5404\u79cd\u96c6\u5408\u5bf9\u5e94\u7684\u6570\u636e\uff0c\u4f8b\u5982 <code>train</code>, <code>dev</code>, <code>test</code> \u5bf9\u5e94\u7684\u6570\u636e\u3002"},{"location":"huggingface/datasets/DatasetDict%E7%B1%BB/#map","title":"<code>map</code> \u65b9\u6cd5","text":"<p>\u7528\u6cd5\u793a\u4f8b\uff1a Python<pre><code>encoded_dataset = dataset.map(encode_examples, batched=True)\n</code></pre> batched\u53c2\u6570\u7684\u4f5c\u7528 \u5f53\u4f7f\u7528DatasetDict\u7684map\u65b9\u6cd5\u65f6\uff0cbatched\u53c2\u6570\u63a7\u5236\u7740\u4f20\u9012\u7ed9\u4f60\u63d0\u4f9b\u7684\u51fd\u6570\u7684\u6570\u636e\u662f\u9010\u6761\u8fd8\u662f\u4ee5\u6279\u5904\u7406\u7684\u5f62\u5f0f\u3002\u5177\u4f53\u6765\u8bf4\uff1a</p> <p>\u5f53batched=False\uff08\u9ed8\u8ba4\u8bbe\u7f6e\uff09\u65f6\uff0c\u63d0\u4f9b\u7684\u51fd\u6570\u5c06\u88ab\u9010\u6761\u5e94\u7528\u4e8e\u6570\u636e\u96c6\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\u3002\u8fd9\u610f\u5473\u7740\u51fd\u6570\u6bcf\u6b21\u63a5\u6536\u5e76\u5904\u7406\u6570\u636e\u96c6\u4e2d\u7684\u5355\u6761\u6570\u636e\uff1b \u5f53batched=True\u65f6\uff0c\u63d0\u4f9b\u7684\u51fd\u6570\u5c06\u4ee5\u6279\u5904\u7406\u7684\u65b9\u5f0f\u5e94\u7528\u4e8e\u6570\u636e\u96c6\u3002\u8fd9\u610f\u5473\u7740\u51fd\u6570\u4e00\u6b21\u6027\u63a5\u6536\u4e00\u6279\u6570\u636e\uff0c\u8fd9\u6279\u6570\u636e\u7684\u5927\u5c0f\u7531batch_size\u53c2\u6570\uff08\u5982\u679c\u6709\u63d0\u4f9b\u7684\u8bdd\uff09\u51b3\u5b9a\u3002\u8fd9\u53ef\u4ee5\u663e\u8457\u63d0\u9ad8\u6570\u636e\u5904\u7406\u7684\u6548\u7387\uff0c\u7279\u522b\u662f\u5f53\u4f60\u7684\u5904\u7406\u51fd\u6570\u80fd\u591f\u5229\u7528\u5411\u91cf\u5316\u64cd\u4f5c\u65f6\uff1b \u4f7f\u7528batched=True\u6709\u51e0\u4e2a\u6f5c\u5728\u7684\u597d\u5904\uff1a</p> <p>\u6548\u7387\u63d0\u5347\uff1a\u6279\u5904\u7406\u53ef\u4ee5\u51cf\u5c11\u51fd\u6570\u8c03\u7528\u7684\u6b21\u6570\uff0c\u5e76\u5141\u8bb8\u4f60\u5728\u5904\u7406\u6570\u636e\u65f6\u5229\u7528\u66f4\u9ad8\u6548\u7684\u5411\u91cf\u5316\u64cd\u4f5c\uff0c\u4ece\u800c\u63d0\u9ad8\u6574\u4f53\u5904\u7406\u901f\u5ea6\uff1b \u5185\u5b58\u7ba1\u7406\uff1a\u5f53\u5904\u7406\u975e\u5e38\u5927\u7684\u6570\u636e\u96c6\u65f6\uff0c\u9010\u6761\u5904\u7406\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5185\u5b58\u4f7f\u7528\u589e\u52a0\uff0c\u7279\u522b\u662f\u5982\u679c\u6bcf\u6b21\u51fd\u6570\u8c03\u7528\u90fd\u9700\u8981\u52a0\u8f7d\u989d\u5916\u7684\u8d44\u6e90\u6216\u6a21\u578b\u3002\u901a\u8fc7\u6279\u5904\u7406\uff0c\u4f60\u53ef\u4ee5\u66f4\u6709\u6548\u5730\u7ba1\u7406\u5185\u5b58\u4f7f\u7528\uff1b \u5e76\u884c\u5904\u7406\uff1a\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0cbatched\u5904\u7406\u53ef\u4ee5\u4e0enum_proc\u53c2\u6570\u7ed3\u5408\u4f7f\u7528\uff0c\u540e\u8005\u5141\u8bb8\u5728\u591a\u4e2a\u5de5\u4f5c\u8fdb\u7a0b\u4e0a\u5e76\u884c\u5e94\u7528\u51fd\u6570\uff0c\u8fdb\u4e00\u6b65\u63d0\u9ad8\u5904\u7406\u901f\u5ea6\uff1b \u771f\u7684\u662f\u6279\u91cf\u5904\u7406\u5417 \u5f53\u4f60\u8bbe\u7f6ebatched=True\u65f6\uff0c\u7684\u786e\u662f\u4ee5\u6279\u6b21\u5f62\u5f0f\u5904\u7406\u6570\u636e\uff0c\u4f46\u5904\u7406\u7684\u5177\u4f53\u65b9\u5f0f\u53d6\u51b3\u4e8e\u4f60\u7684\u51fd\u6570\u5b9e\u73b0\u3002\u5728\u8fd9\u79cd\u6a21\u5f0f\u4e0b\uff0c\u4f20\u9012\u7ed9\u4f60\u7684\u51fd\u6570\u7684\u662f\u4e00\u6574\u6279\u6570\u636e\uff0c\u800c\u4e0d\u662f\u5355\u6761\u6570\u636e\u3002\u8fd9\u610f\u5473\u7740\u4f60\u7684\u51fd\u6570\u4e00\u6b21\u63a5\u6536\u5230\u7684\u662f\u591a\u6761\u8bb0\u5f55\u7684\u96c6\u5408\uff08\u901a\u5e38\u662f\u4e00\u4e2a\u5b57\u5178\uff0c\u5176\u4e2d\u6bcf\u4e2a\u952e\u5bf9\u5e94\u7684\u503c\u662f\u5305\u542b\u591a\u4e2a\u8bb0\u5f55\u7684\u5217\u8868\uff09\uff0c\u800c\u51fd\u6570\u5185\u90e8\u5982\u4f55\u5904\u7406\u8fd9\u6279\u6570\u636e\uff0c\u5219\u53d6\u51b3\u4e8e\u4f60\u7684\u5b9e\u73b0\u3002</p> <p>\u9010\u6761\u6267\u884c\uff1a\u5373\u4f7f\u5728batched=True\u7684\u60c5\u51b5\u4e0b\uff0c\u4f60\u7684\u51fd\u6570\u5185\u90e8\u4f9d\u7136\u53ef\u4ee5\u9009\u62e9\u9010\u6761\u5904\u7406\u6279\u6b21\u4e2d\u7684\u6bcf\u6761\u6570\u636e\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u867d\u7136\u6570\u636e\u662f\u4ee5\u6279\u6b21\u5f62\u5f0f\u4f20\u9012\u7ed9\u51fd\u6570\u7684\uff0c\u4f46\u5982\u679c\u4f60\u5728\u51fd\u6570\u5185\u90e8\u904d\u5386\u6bcf\u6761\u6570\u636e\u8fdb\u884c\u5904\u7406\uff08\u5982\u4f7f\u7528\u5faa\u73af\uff09\uff0c\u5b9e\u9645\u4e0a\u8fd8\u662f\u9010\u6761\u6267\u884c\u3002\u8fd9\u79cd\u65b9\u6cd5\u5e76\u6ca1\u6709\u5145\u5206\u5229\u7528batched=True\u5e26\u6765\u7684\u6279\u5904\u7406\u4f18\u52bf\uff0c\u9664\u975e\u4f60\u7684\u5904\u7406\u903b\u8f91\u65e0\u6cd5\u5411\u91cf\u5316\uff1b \u6279\u91cf\u6267\u884c\uff1a\u66f4\u9ad8\u6548\u7684\u65b9\u6cd5\u662f\u4f7f\u7528\u5411\u91cf\u5316\u64cd\u4f5c\u5904\u7406\u6574\u6279\u6570\u636e\uff0c\u8fd9\u901a\u5e38\u610f\u5473\u7740\u5229\u7528NumPy\u3001Pandas\u6216\u5176\u4ed6\u652f\u6301\u6279\u91cf\u64cd\u4f5c\u7684\u5e93\u6765\u4e00\u6b21\u6027\u5904\u7406\u6574\u6279\u6570\u636e\u3002\u8fd9\u79cd\u65b9\u5f0f\u53ef\u4ee5\u663e\u8457\u63d0\u9ad8\u6548\u7387\uff0c\u56e0\u4e3a\u5b83\u51cf\u5c11\u4e86Python\u5faa\u73af\u7684\u5f00\u9500\uff0c\u540c\u65f6\u5229\u7528\u4e86\u5e95\u5c42\u5e93\u7684\u4f18\u5316\uff08\u5982\u5e76\u884c\u5316\u5904\u7406\uff09\uff1b \u5047\u8bbe\u4f60\u60f3\u5c06\u6587\u672c\u6570\u636e\u8f6c\u6362\u4e3a\u5c0f\u5199\uff0c\u4ee5\u4e0b\u4e24\u79cd\u65b9\u5f0f\u90fd\u53ef\u4ee5\u5b9e\u73b0\uff0c\u4f46\u6548\u7387\u6709\u6240\u4e0d\u540c\uff1a</p>"},{"location":"huggingface/datasets/DatasetDict%E7%B1%BB/#1batchedtrue","title":"\u65b9\u6cd51\uff1a\u9010\u6761\u5904\u7406\uff08\u5373\u4f7f\u5728batched=True\u7684\u60c5\u51b5\u4e0b\uff09","text":"<p>def to_lower(batch):     # \u8fd9\u91cc\u4ecd\u7136\u662f\u9010\u6761\u5904\u7406\uff0c\u5c3d\u7ba1\u6570\u636e\u662f\u4ee5\u6279\u6b21\u5f62\u5f0f\u4f20\u9012\u7684     return {\"text\": [text.lower() for text in batch[\"text\"]]}</p>"},{"location":"huggingface/datasets/DatasetDict%E7%B1%BB/#2","title":"\u65b9\u6cd52\uff1a\u5229\u7528\u5411\u91cf\u5316\u64cd\u4f5c\u6279\u91cf\u5904\u7406\uff08\u5982\u679c\u53ef\u80fd\uff09","text":"<p>def to_lower(batch):     # \u5047\u8bbebatch[\"text\"]\u662f\u4e00\u4e2aPandas Series\u6216\u7c7b\u4f3c\u7684\u7ed3\u6784\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u5411\u91cf\u5316\u7684str.lower()\u65b9\u6cd5     return {\"text\": batch[\"text\"].str.lower()} \u603b\u7684\u6765\u8bf4\uff0c\u867d\u7136batched=True\u5141\u8bb8\u4f60\u4ee5\u6279\u6b21\u7684\u65b9\u5f0f\u5904\u7406\u6570\u636e\uff0c\u4f46\u5982\u4f55\u5b9e\u73b0\u6279\u91cf\u5904\u7406\u7684\u6548\u7387\u4f18\u5316\uff0c\u53d6\u51b3\u4e8e\u4f60\u7684\u51fd\u6570\u5b9e\u73b0\u548c\u6570\u636e\u5904\u7406\u7684\u5177\u4f53\u65b9\u6cd5\u3002\u5411\u91cf\u5316\u64cd\u4f5c\u901a\u5e38\u63d0\u4f9b\u4e86\u66f4\u597d\u7684\u6027\u80fd\u3002</p>"},{"location":"huggingface/datasets/DatasetDict%E7%B1%BB/#_1","title":"\u53c2\u8003\uff1a","text":"<ol> <li>http://118.195.180.129:5000/project-29/doc-153/</li> <li>https://www.cnblogs.com/zhangxuegold/p/17531896.html</li> <li>https://study.hycbook.com/article/57912</li> </ol>"},{"location":"inference/introduction/","title":"\u6a21\u578b\u63a8\u7406","text":""},{"location":"inference/sglang/getting_started/%E5%AE%89%E8%A3%85/","title":"\u5b89\u88c5","text":"<p>\u60a8\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u4efb\u4e00\u65b9\u6cd5\u5b89\u88c5 SGLang\u3002</p>"},{"location":"inference/sglang/getting_started/%E5%AE%89%E8%A3%85/#1-pip","title":"\u65b9\u6cd5 1\uff1a\u4f7f\u7528 pip \u5b89\u88c5","text":"Bash<pre><code>pip install --upgrade pip\npip install \"sglang[all]\" --find-links https://flashinfer.ai/whl/cu121/torch2.4/flashinfer/\n</code></pre> <p>\u6ce8\u610f\uff1a\u8bf7\u68c0\u67e5 <code>FlashInfer</code> \u5b89\u88c5\u6587\u6863\uff0c\u6839\u636e\u60a8\u7684 PyTorch \u548c CUDA \u7248\u672c\u5b89\u88c5\u6b63\u786e\u7684\u7248\u672c\u3002</p>"},{"location":"inference/sglang/getting_started/%E5%AE%89%E8%A3%85/#2","title":"\u65b9\u6cd5 2\uff1a\u4ece\u6e90","text":""},{"location":"inference/sglang/getting_started/%E5%AE%89%E8%A3%85/#use-the-last-release-branch","title":"Use the last release branch","text":"<p>git clone -b v0.4.0.post1 https://github.com/sgl-project/sglang.git cd sglang</p> <p>pip install --upgrade pip pip install -e \"python[all]\" --find-links https://flashinfer.ai/whl/cu121/torch2.4/flashinfer/ \u6ce8\u610f\uff1a\u8bf7\u68c0\u67e5FlashInfer \u5b89\u88c5\u6587\u6863\uff0c\u6839\u636e\u60a8\u7684 PyTorch \u548c CUDA \u7248\u672c\u5b89\u88c5\u6b63\u786e\u7684\u7248\u672c\u3002</p> <p>\u6ce8\u610f\uff1a\u5bf9\u4e8e\u5e26\u6709 Instinct/MI GPU \u7684 AMD ROCm \u7cfb\u7edf\uff0c\u8bf7\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a</p>"},{"location":"inference/sglang/getting_started/%E5%AE%89%E8%A3%85/#use-the-last-release-branch_1","title":"Use the last release branch","text":"<p>git clone -b v0.4.0.post1 https://github.com/sgl-project/sglang.git cd sglang</p> <p>pip install --upgrade pip pip install -e \"python[all_hip]\" \u65b9\u6cd5 3\uff1a\u4f7f\u7528 Docker \u955c\u50cf\u53ef\u5728 Docker Hub \u4e0a\u4f5c\u4e3almsysorg/sglang\u83b7\u5f97\uff0c\u7531Dockerfile\u6784\u5efa\u3002\u5c06\u4ee5\u4e0b\u5185\u5bb9\u66ff\u6362\u4e3a\u60a8\u7684 huggingface hub\u4ee4\u724c\u3002 <p>docker run --gpus all \\     --shm-size 32g \\     -p 30000:30000 \\     -v ~/.cache/huggingface:/root/.cache/huggingface \\     --env \"HF_TOKEN=\" \\     --ipc=host \\     lmsysorg/sglang:latest \\     python3 -m sglang.launch_server --model-path meta-llama/Llama-3.1-8B-Instruct --host 0.0.0.0 --port 30000 \u6ce8\u610f\uff1a\u5bf9\u4e8e\u5e26\u6709 Instinct/MI GPU \u7684 AMD ROCm \u7cfb\u7edf\uff0c\u5efa\u8bae\u4f7f\u7528\u5b83docker/Dockerfile.rocm\u6765\u6784\u5efa\u6620\u50cf\uff0c\u793a\u4f8b\u548c\u7528\u6cd5\u5982\u4e0b\uff1a <p>docker build --build-arg SGL_BRANCH=v0.4.0.post1 -t v0.4.0.post1-rocm620 -f Dockerfile.rocm .</p> <p>alias drun='docker run -it --rm --network=host --device=/dev/kfd --device=/dev/dri --ipc=host \\     --shm-size 16G --group-add video --cap-add=SYS_PTRACE --security-opt seccomp=unconfined \\     -v $HOME/dockerx:/dockerx -v /data:/data'</p> <p>drun -p 30000:30000 \\     -v ~/.cache/huggingface:/root/.cache/huggingface \\     --env \"HF_TOKEN=\" \\     v0.4.0.post1-rocm620 \\     python3 -m sglang.launch_server --model-path meta-llama/Llama-3.1-8B-Instruct --host 0.0.0.0 --port 30000"},{"location":"inference/sglang/getting_started/%E5%AE%89%E8%A3%85/#till-flashinfer-backend-available-attention-backend-triton-sampling-backend-pytorch-are-set-by-default","title":"Till flashinfer backend available, --attention-backend triton --sampling-backend pytorch are set by default","text":"<p>drun v0.4.0.post1-rocm620 python3 -m sglang.bench_one_batch --batch-size 32 --input 1024 --output 128 --model amd/Meta-Llama-3.1-8B-Instruct-FP8-KV --tp 8 --quantization fp8 \u65b9\u6cd5 4\uff1a\u4f7f\u7528 docker  \u66f4\u591a\u7684 \u5728 Kubernetes \u6216\u4e91\u4e0a\u8fd0\u884c \u66f4\u591a\u7684 \u5e38\u89c1\u6ce8\u91ca FlashInfer\u662f\u9ed8\u8ba4\u7684\u6ce8\u610f\u5185\u6838\u540e\u7aef\u3002\u5b83\u4ec5\u652f\u6301 sm75 \u53ca\u4ee5\u4e0a\u7248\u672c\u3002\u5982\u679c\u60a8\u5728 sm75+ \u8bbe\u5907\uff08\u4f8b\u5982 T4\u3001A10\u3001A100\u3001L4\u3001L40S\u3001H100\uff09\u4e0a\u9047\u5230\u4efb\u4f55\u4e0e FlashInfer \u76f8\u5173\u7684\u95ee\u9898\uff0c\u8bf7\u901a\u8fc7\u5728GitHub \u4e0a\u6dfb\u52a0\u5e76\u6253\u5f00\u95ee\u9898\u6765\u5207\u6362\u5230\u5176\u4ed6\u5185\u6838\u3002--attention-backend triton --sampling-backend pytorch</p> <p>\u5982\u679c\u60a8\u53ea\u9700\u8981\u5c06 OpenAI \u6a21\u578b\u4e0e\u524d\u7aef\u8bed\u8a00\u4e00\u8d77\u4f7f\u7528\uff0c\u5219\u53ef\u4ee5\u907f\u514d\u4f7f\u7528\u6765\u5b89\u88c5\u5176\u4ed6\u4f9d\u8d56\u9879\u3002pip install \"sglang[openai]\"</p> <p>\u8bed\u8a00\u524d\u7aef\u72ec\u7acb\u4e8e\u540e\u7aef\u8fd0\u884c\u65f6\u8fd0\u884c\u3002\u60a8\u53ef\u4ee5\u5728\u672c\u5730\u5b89\u88c5\u524d\u7aef\u800c\u65e0\u9700 GPU\uff0c\u800c\u540e\u7aef\u5219\u53ef\u4ee5\u5728\u652f\u6301 GPU \u7684\u673a\u5668\u4e0a\u8bbe\u7f6e\u3002\u8981\u5b89\u88c5\u524d\u7aef\uff0c\u8bf7\u8fd0\u884c\uff0c\u5bf9\u4e8e\u540e\u7aef\uff0c\u8bf7\u4f7f\u7528\u3002\u8fd9\u5141\u8bb8\u60a8\u5728\u672c\u5730\u6784\u5efa SGLang \u7a0b\u5e8f\u5e76\u901a\u8fc7\u8fde\u63a5\u5230\u8fdc\u7a0b\u540e\u7aef\u6765\u6267\u884c\u5b83\u4eec\u3002pip install sglangpip install sglang[srt]</p>"},{"location":"inference/vllm/getting_started/%E5%AE%89%E8%A3%85/","title":"\u5b89\u88c5","text":"<p>vLLM \u662f\u4e00\u4e2a Python \u5e93\uff0c\u8fd8\u5305\u542b\u9884\u7f16\u8bd1\u7684 C++ \u548c CUDA\uff0812.1\uff09\u4e8c\u8fdb\u5236\u6587\u4ef6\u3002</p>"},{"location":"inference/vllm/getting_started/%E5%AE%89%E8%A3%85/#_2","title":"\u5b89\u88c5\u8981\u6c42","text":"<ul> <li>\u64cd\u4f5c\u7cfb\u7edf\uff1aLinux</li> <li>Python\uff1a3.9 - 3.12</li> <li>GPU\uff1a\u8ba1\u7b97\u80fd\u529b7.0\u6216\u66f4\u9ad8\uff08\u4f8b\u5982V100\u3001T4\u3001RTX20xx\u3001A100\u3001L4\u3001H100\u7b49\uff09</li> </ul>"},{"location":"inference/vllm/getting_started/%E5%AE%89%E8%A3%85/#vllm","title":"\u5b89\u88c5\u5df2\u53d1\u5e03\u7684 <code>vLLM</code> \u7248\u672c","text":"<p>\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 <code>pip</code> \u5b89\u88c5\u5df2\u7ecf\u53d1\u5e03\u7684 vLLM  \u7248\u672c\uff1a</p> Python<pre><code># (Recommended) Create a new conda environment.\nconda create -n myenv python=3.10 -y\nconda activate myenv\n\n# Install vLLM with CUDA 12.1.\npip install vllm\n</code></pre> <p>\u6ce8\u610f</p> <p>\u867d\u7136\u6211\u4eec\u5efa\u8bae\u4f7f\u7528 <code>conda</code> \u6765\u521b\u5efa\u548c\u7ba1\u7406 <code>Python</code> \u73af\u5883\uff0c\u4f46\u5f3a\u70c8\u5efa\u8bae\u4f7f\u7528 pip \u6765\u5b89\u88c5 vLLM\u3002\u8fd9\u662f\u56e0\u4e3a pip \u5b89\u88c5\u7684 torch \u53ef\u4ee5\u4e0e\u5176\u4ed6\u7684\u5e93\u5206\u5f00\u5b89\u88c5\uff0c\u4f8b\u5982 NCCL\u3002\u800c conda \u5219\u4f7f\u7528\u9759\u6001\u94fe\u63a5\u7684\u65b9\u5f0f\u8fdb\u884c\u5b89\u88c5 NCCL\u3002\u5f53 vLLM \u5c1d\u8bd5\u4f7f\u7528 NCCL \u65f6\uff0c\u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4\u95ee\u9898\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u6b64\u95ee\u9898\u3002</p> <p>\u6ce8\u610f</p> <p>\u622a\u81f3\u76ee\u524d\uff0cvLLM \u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u9ed8\u8ba4\u4f7f\u7528 CUDA 12.1 \u548cPyTorch \u516c\u5f00\u53d1\u884c\u7248\u672c\u8fdb\u884c\u7f16\u8bd1\u3002\u6211\u4eec\u8fd8\u63d0\u4f9b\u4f7f\u7528 CUDA 11.8 \u548c PyTorch \u516c\u5171\u53d1\u884c\u7248\u672c\u7f16\u8bd1\u7684 vLLM \u4e8c\u8fdb\u5236\u6587\u4ef6\uff1a Bash<pre><code># Install vLLM with CUDA 11.8.\nexport VLLM_VERSION=0.6.1.post1\nexport PYTHON_VERSION=310\npip install https://github.com/vllm-project/vllm/releases/download/v${VLLM_VERSION}/vllm-${VLLM_VERSION}+cu118-cp${PYTHON_VERSION}-cp${PYTHON_VERSION}-manylinux1_x86_64.whl --extra-index-url https://download.pytorch.org/whl/cu118\n</code></pre> \u4e3a\u4e86\u63d0\u9ad8\u6027\u80fd\uff0cvLLM \u5fc5\u987b\u7f16\u8bd1\u8bb8\u591a cuda \u5185\u6838\u3002\u4e0d\u5e78\u7684\u662f\uff0c\u7f16\u8bd1\u4f1a\u5bfc\u81f4\u4e0e\u5176\u4ed6 CUDA \u7248\u672c, PyTorch \u7248\u672c\u7684\u4ea7\u751f\u4e8c\u8fdb\u5236\u4e0d\u517c\u5bb9\u7684\u95ee\u9898\uff0c\u5373\u4f7f\u5bf9\u4e8e\u5177\u6709\u4e0d\u540c\u6784\u5efa\u914d\u7f6e\u7684\u540c\u4e00\u4e2a PyTorch \u7248\u672c\u4e5f\u662f\u5982\u6b64\u3002 \u56e0\u6b64\uff0c\u5efa\u8bae\u4f7f\u7528\u5168\u65b0\u7684 conda \u73af\u5883\u5b89\u88c5 vLLM\u3002\u5982\u679c\u60a8\u62e5\u6709\u4e0d\u540c\u7684 CUDA \u7248\u672c\u6216\u60f3\u8981\u4f7f\u7528\u73b0\u6709\u7684 PyTorch \u5b89\u88c5\uff0c\u5219\u9700\u8981\u4ece\u6e90\u4ee3\u7801\u6784\u5efa vLLM\u3002\u8bf7\u53c2\u9605\u540e\u7eed\u7684\u4e0b\u6587\u4e86\u89e3\u8bf4\u660e\u3002</p>"},{"location":"inference/vllm/getting_started/%E5%AE%89%E8%A3%85/#_3","title":"\u5b89\u88c5\u6700\u65b0\u7684\u7248\u672c","text":"<p>LLM \u63a8\u7406\u662f\u4e00\u4e2a\u5feb\u901f\u53d1\u5c55\u7684\u9886\u57df\uff0c\u6700\u65b0\u7684\u4ee3\u7801\u53ef\u80fd\u5305\u542b\u95ee\u9898\u4fee\u590d\u3001\u6027\u80fd\u6539\u8fdb\u548c\u5c1a\u672a\u53d1\u5e03\u7684\u65b0\u529f\u80fd\u3002\u4e3a\u4e86\u8ba9\u7528\u6237\u65e0\u9700\u7b49\u5f85\u4e0b\u4e00\u4e2a\u7248\u672c\u5373\u53ef\u5c1d\u8bd5\u6700\u65b0\u4ee3\u7801\uff0cvLLM \u4e3a\u81ea v0.5.3 \u4ee5\u6765\u7684\u6bcf\u6b21\u63d0\u4ea4\u90fd\u63d0\u4f9b\u4e86\u5728 x86 \u5e73\u53f0\u4e0a\u8fd0\u884c\u4e14\u5e26\u6709 CUDA 12 \u7684 Linux \u90e8\u7f72\u5305\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u4e0b\u8f7d\u5e76\u5b89\u88c5\u5b83\uff1a</p> Bash<pre><code>pip install https://vllm-wheels.s3.us-west-2.amazonaws.com/nightly/vllm-1.0.0.dev-cp38-abi3-manylinux1_x86_64.whl\n</code></pre> <p>\u5982\u679c\u60a8\u60f3\u8981\u8bbf\u95ee\u4ee5\u524d\u7684\u63d0\u4ea4\uff0c\u60a8\u53ef\u4ee5\u5728 URL \u4e2d\u6307\u5b9a\u63d0\u4ea4\u54c8\u5e0c\uff1a</p> <p>Bash<pre><code>export VLLM_COMMIT=33f460b17a54acb3b6cc0b03f4a17876cff5eafd # use full commit hash from the main branch\npip install https://vllm-wheels.s3.us-west-2.amazonaws.com/${VLLM_COMMIT}/vllm-1.0.0.dev-cp38-abi3-manylinux1_x86_64.whl\n</code></pre> \u8bf7\u6ce8\u610f\uff0c\u8fd9\u4e9b\u90e8\u7f72\u5305\u662f\u4f7f\u7528 Python 3.8 ABI \u6784\u5efa\u7684\uff08\u6709\u5173 ABI \u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605PEP 425 \uff09\uff0c\u56e0\u6b64\u5b83\u4eec\u4e0e Python 3.8 \u53ca\u66f4\u9ad8\u7248\u672c\u517c\u5bb9\u3002\u8f6e\u5b50\u6587\u4ef6\u540d (1.0.0.dev) \u4e2d\u7684\u7248\u672c\u5b57\u7b26\u4e32\u53ea\u662f\u4e00\u4e2a\u5360\u4f4d\u7b26\uff0c\u7528\u4e8e\u4e3a\u90e8\u7f72\u5305\u63d0\u4f9b\u7edf\u4e00\u7684 URL\u3002\u90e8\u7f72\u5305\u7684\u5b9e\u9645\u7248\u672c\u5305\u542b\u5728\u90e8\u7f72\u5305\u7684\u5143\u6570\u636e\u4e2d\u3002\u867d\u7136\u6211\u4eec\u4e0d\u518d\u652f\u6301 Python 3.8\uff08\u56e0\u4e3a PyTorch 2.5 \u653e\u5f03\u4e86\u5bf9 Python 3.8 \u7684\u652f\u6301\uff09\uff0c\u4f46\u90e8\u7f72\u5305\u4ecd\u7136\u662f\u4f7f\u7528 Python 3.8 ABI \u6784\u5efa\u7684\uff0c\u4ee5\u4fdd\u6301\u4e0e\u4ee5\u524d\u76f8\u540c\u7684\u8f6e\u5b50\u540d\u79f0\u3002</p> <p>\u8bbf\u95ee\u6700\u65b0\u4ee3\u7801\u7684\u53e6\u4e00\u79cd\u65b9\u6cd5\u662f\u4f7f\u7528 docker \u955c\u50cf\uff1a</p> Python<pre><code>export VLLM_COMMIT=33f460b17a54acb3b6cc0b03f4a17876cff5eafd # use full commit hash from the main branch\ndocker pull public.ecr.aws/q9t5s3a7/vllm-ci-test-repo:${VLLM_COMMIT}\n</code></pre> <p>\u8fd9\u4e9b docker \u955c\u50cf\u4ec5\u7528\u4e8e CI \u548c\u6d4b\u8bd5\uff0c\u4e0d\u9002\u7528\u4e8e\u751f\u4ea7\u7528\u9014\u3002\u5b83\u4eec\u5c06\u5728\u51e0\u5929\u540e\u8fc7\u671f\u3002</p> <p>\u6700\u65b0\u4ee3\u7801\u53ef\u80fd\u5b58\u5728bug\uff0c\u4e14\u4e0d\u7a33\u5b9a\uff0c\u8bf7\u8c28\u614e\u4f7f\u7528\u3002</p>"},{"location":"inference/vllm/getting_started/%E5%AE%89%E8%A3%85/#_4","title":"\u6e90\u7801\u7f16\u8bd1","text":""},{"location":"inference/vllm/getting_started/%E5%AE%89%E8%A3%85/#python","title":"\u4ec5 Python \u6784\u5efa(\u4e0d\u5305\u542b\u7f16\u8bd1)","text":"<p>\u5982\u679c\u60a8\u53ea\u9700\u8981\u66f4\u6539 Python \u4ee3\u7801\uff0c\u5219\u53ea\u9700\u6784\u5efa vLLM \u800c\u65e0\u9700\u7f16\u8bd1\u3002</p> <p>\u7b2c\u4e00\u6b65\u662f\u5b89\u88c5\u6700\u65b0\u7684 vLLM \u90e8\u7f72\u5305\uff1a Bash<pre><code>pip install https://vllm-wheels.s3.us-west-2.amazonaws.com/nightly/vllm-1.0.0.dev-cp38-abi3-manylinux1_x86_64.whl\n</code></pre> \u60a8\u53ef\u4ee5\u5728\u4e0a\u9762\u627e\u5230\u6709\u5173 vLLM \u8f6e\u5b50\u7684\u66f4\u591a\u4fe1\u606f\u3002</p> <p>\u9a8c\u8bc1\u5b89\u88c5\u6210\u529f\u540e\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u811a\u672c\uff1a Bash<pre><code>git clone https://github.com/vllm-project/vllm.git\ncd vllm\npython python_only_dev.py\n</code></pre> \u8be5\u811a\u672c\u5c06\uff1a</p> <ul> <li>\u5728\u5f53\u524d\u73af\u5883\u4e2d\u627e\u5230\u5df2\u5b89\u88c5\u7684vLLM\u5305\u3002</li> <li>\u5c06\u6784\u5efa\u7684\u6587\u4ef6\u590d\u5236\u5230\u5f53\u524d\u76ee\u5f55\u3002</li> <li>\u91cd\u547d\u540d\u5df2\u5b89\u88c5\u7684 vLLM \u5305\u3002</li> <li>\u5c06\u5f53\u524d\u76ee\u5f55\u7b26\u53f7\u94fe\u63a5\u5230\u5df2\u5b89\u88c5\u7684 vLLM \u5305\u3002</li> </ul> <p>\u73b0\u5728\uff0c\u60a8\u53ef\u4ee5\u5728\u5f53\u524d\u76ee\u5f55\u4e2d\u7f16\u8f91 Python \u4ee3\u7801\uff0c\u5e76\u4e14\u8fd0\u884c vLLM \u65f6\u5c06\u53cd\u6620\u66f4\u6539\u3002</p> <p>\u4e00\u65e6\u60a8\u5b8c\u6210\u7f16\u8f91\u6216\u8005\u60f3\u8981\u5b89\u88c5\u53e6\u4e00\u4e2a vLLM \u8f6e\u5b50\uff0c\u60a8\u5e94\u8be5\u4f7f\u7528\u5e26\u6709\uff08\u6216\u7b80\u79f0\uff09\u6807\u5fd7\u7684\u76f8\u540c\u811a\u672c\u9000\u51fa\u5f00\u53d1\u73af\u5883\uff1a<code>--quit-dev-q</code></p> Bash<pre><code>python python_only_dev.py --quit-dev\n</code></pre> <p>\u8be5 <code>--quit-dev</code> \u6807\u7b7e\u5c06\uff1a</p> <ul> <li>\u4ece\u5f53\u524d\u76ee\u5f55\u5220\u9664\u5230 vLLM \u5305\u7684\u7b26\u53f7\u94fe\u63a5\u3002</li> <li>\u4ece\u5907\u4efd\u4e2d\u6062\u590d\u539f\u59cb vLLM \u5305\u3002</li> </ul> <p>\u5982\u679c\u60a8\u66f4\u65b0 vLLM \u8f6e\u5b50\u5e76\u4ece\u6e90\u5934\u91cd\u5efa\u4ee5\u8fdb\u884c\u8fdb\u4e00\u6b65\u7684\u7f16\u8f91\uff0c\u5219\u9700\u8981\u518d\u6b21\u91cd\u590d\u4ec5\u9650 Python \u7684\u6784\u5efa\u6b65\u9aa4\u3002</p> <p>\u7b14\u8bb0</p> <p>\u60a8\u7684\u6e90\u4ee3\u7801\u53ef\u80fd\u4e0e\u6700\u65b0\u7684 vLLM wheel \u5177\u6709\u4e0d\u540c\u7684\u63d0\u4ea4 ID\uff0c\u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4\u672a\u77e5\u9519\u8bef\u3002\u5efa\u8bae\u5bf9\u6e90\u4ee3\u7801\u4f7f\u7528\u4e0e\u60a8\u5b89\u88c5\u7684 vLLM wheel \u76f8\u540c\u7684\u63d0\u4ea4 ID\u3002\u6709\u5173\u5982\u4f55\u5b89\u88c5\u6307\u5b9a wheel \u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u9605\u4e0a\u4e00\u8282\u3002</p>"},{"location":"inference/vllm/getting_started/%E5%AE%89%E8%A3%85/#_5","title":"\u5b8c\u6574\u6784\u5efa\uff08\u5e26\u7f16\u8bd1\uff09","text":"<p>\u5982\u679c\u8981\u4fee\u6539 C++ \u6216 CUDA \u4ee3\u7801\uff0c\u5219\u9700\u8981\u4ece\u6e90\u4ee3\u7801\u6784\u5efa vLLM\u3002\u8fd9\u53ef\u80fd\u9700\u8981\u51e0\u5206\u949f\uff1a Bash<pre><code>git clone https://github.com/vllm-project/vllm.git\ncd vllm\npip install -e .\n</code></pre></p> <p>\u63d0\u793a</p> <p>\u4ece\u6e90\u4ee3\u7801\u6784\u5efa\u9700\u8981\u8fdb\u884c\u5927\u91cf\u7f16\u8bd1\u3002\u5982\u679c\u60a8\u8981\u53cd\u590d\u4ece\u6e90\u4ee3\u7801\u6784\u5efa\uff0c\u7f13\u5b58\u7f16\u8bd1\u7ed3\u679c\u4f1a\u66f4\u6709\u6548\u7387\u3002\u4f8b\u5982\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u6216\u5b89\u88c5ccache\u3002\u53ea\u8981\u547d\u4ee4\u53ef\u4ee5\u627e\u5230\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u6784\u5efa\u7cfb\u7edf\u5c31\u4f1a\u81ea\u52a8\u4f7f\u7528\u5b83\u3002\u7b2c\u4e00\u6b21\u6784\u5efa\u540e\uff0c\u540e\u7eed\u6784\u5efa\u5c06\u5feb\u5f97\u591a\u3002conda install ccacheapt install ccachewhich ccacheccache</p>"},{"location":"inference/vllm/getting_started/%E5%AE%89%E8%A3%85/#python_1","title":"\u4f7f\u7528\u73b0\u6709\u7684 Python \u5b89\u88c5","text":"<p>\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0cPyTorch \u4f9d\u8d56\u9879\u65e0\u6cd5\u8f7b\u677e\u901a\u8fc7 pip \u5b89\u88c5\uff0c\u4f8b\u5982\uff1a</p> <ul> <li> <p>\u4f7f\u7528 PyTorch \u6bcf\u665a\u6216\u81ea\u5b9a\u4e49 PyTorch \u6784\u5efa vLLM\u3002</p> </li> <li> <p>\u4f7f\u7528 aarch64 \u548c CUDA (GH200) \u6784\u5efa vLLM\uff0c\u5176\u4e2d PyTorch \u8f6e\u5b50\u5728 PyPI \u4e0a\u4e0d\u53ef\u7528\u3002\u76ee\u524d\uff0c\u53ea\u6709 PyTorch nightly \u6709\u5e26 CUDA \u7684 aarch64 \u8f6e\u5b50\u3002\u60a8\u53ef\u4ee5\u8fd0\u884c\u5b89\u88c5PyTorch nightly\uff0c\u7136\u540e\u5728\u5176\u57fa\u7840\u4e0a\u6784\u5efa vLLM\u3002<code>pip3 install --pre torch torchvision torchaudio --index-url https://download.pytorch.org/whl/nightly/cu124</code></p> </li> </ul> <p>\u8981\u4f7f\u7528\u73b0\u6709\u7684 PyTorch \u5b89\u88c5\u6784\u5efa vLLM\uff1a Bash<pre><code>git clone https://github.com/vllm-project/vllm.git\ncd vllm\npython use_existing_torch.py\npip install -r requirements-build.txt\npip install -e . --no-build-isolation\n</code></pre></p>"},{"location":"inference/vllm/getting_started/%E5%AE%89%E8%A3%85/#_6","title":"\u68c0\u67e5","text":"<p>\u4e3a\u4e86\u907f\u514d\u7cfb\u7edf\u8fc7\u8f7d\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u73af\u5883\u53d8\u91cf\u6765\u9650\u5236\u540c\u65f6\u8fd0\u884c\u7684\u7f16\u8bd1\u4f5c\u4e1a\u7684\u6570\u91cfMAX_JOBS\u3002\u4f8b\u5982\uff1a</p> Bash<pre><code>export MAX_JOBS=6\npip install -e .\n</code></pre> <p>\u8fd9\u5728\u6027\u80fd\u8f83\u5f31\u7684\u673a\u5668\u4e0a\u6784\u5efa\u65f6\u5c24\u5176\u6709\u7528\u3002\u4f8b\u5982\uff0c\u5f53\u60a8\u4f7f\u7528 WSL \u65f6\uff0c\u5b83\u9ed8\u8ba4\u4ec5\u5206\u914d\u603b\u5185\u5b58\u7684 50%\uff0c\u56e0\u6b64\u4f7f\u7528\u53ef\u4ee5\u907f\u514d\u540c\u65f6\u7f16\u8bd1\u591a\u4e2a\u6587\u4ef6\u5e76\u8017\u5c3d\u5185\u5b58\u3002\u526f\u4f5c\u7528\u662f\u6784\u5efa\u8fc7\u7a0b\u4f1a\u6162\u5f97\u591a\u3002export MAX_JOBS=1</p> <p>\u6b64\u5916\uff0c\u5982\u679c\u60a8\u5728\u6784\u5efa vLLM \u65f6\u9047\u5230\u56f0\u96be\uff0c\u6211\u4eec\u5efa\u8bae\u60a8\u4f7f\u7528 NVIDIA PyTorch Docker \u6620\u50cf\u3002</p> Bash<pre><code># Use --ipc=host to make sure the shared memory is large enough.\ndocker run --gpus all -it --rm --ipc=host nvcr.io/nvidia/pytorch:23.10-py3\n</code></pre> <p>\u5982\u679c\u4e0d\u60f3\u4f7f\u7528docker\uff0c\u5efa\u8bae\u5b8c\u6574\u5b89\u88c5CUDA Toolkit\uff0c\u53ef\u4ee5\u4ece\u5b98\u7f51\u4e0b\u8f7d\u5e76\u5b89\u88c5\uff0c\u5b89\u88c5\u5b8c\u6210\u540e\u8bbe\u7f6e\u73af\u5883\u53d8\u91cfCUDA_HOME\u4e3aCUDA Toolkit\u7684\u5b89\u88c5\u8def\u5f84\uff0c\u5e76\u786e\u4fdd\u7f16\u8bd1nvcc\u5668\u5728\u4f60\u7684\u6587\u4ef6\u5939\u4e2dPATH\uff0c\u4f8b\u5982\uff1a</p> Bash<pre><code>export CUDA_HOME=/usr/local/cuda\nexport PATH=\"${CUDA_HOME}/bin:$PATH\"\n</code></pre> <p>\u4ee5\u4e0b\u662f\u4e00\u4e2a\u5065\u5168\u6027\u68c0\u67e5\uff0c\u4ee5\u9a8c\u8bc1 CUDA \u5de5\u5177\u5305\u662f\u5426\u6b63\u786e\u5b89\u88c5\uff1a Bash<pre><code>nvcc --version # verify that nvcc is in your PATH\n${CUDA_HOME}/bin/nvcc --version # verify that nvcc is in your CUDA_HOME\n</code></pre></p>"},{"location":"inference/vllm/getting_started/%E5%AE%89%E8%A3%85/#_7","title":"\u4e0d\u652f\u6301\u7684\u64cd\u4f5c\u7cfb\u7edf","text":"<p>vLLM \u53ea\u80fd\u5728 Linux \u4e0a\u5b8c\u5168\u8fd0\u884c\uff0c\u4f46\u51fa\u4e8e\u5f00\u53d1\u76ee\u7684\uff0c\u60a8\u4ecd\u7136\u53ef\u4ee5\u5728\u5176\u4ed6\u7cfb\u7edf\uff08\u4f8b\u5982 macOS\uff09\u4e0a\u6784\u5efa\u5b83\uff0c\u4ee5\u4fbf\u5bfc\u5165\u548c\u83b7\u5f97\u66f4\u65b9\u4fbf\u7684\u5f00\u53d1\u73af\u5883\u3002\u4e8c\u8fdb\u5236\u6587\u4ef6\u4e0d\u4f1a\u88ab\u7f16\u8bd1\uff0c\u5e76\u4e14\u65e0\u6cd5\u5728\u975e Linux \u7cfb\u7edf\u4e0a\u8fd0\u884c\u3002</p> <p>\u5728\u5b89\u88c5\u4e4b\u524d\u53ea\u9700\u7981\u7528VLLM_TARGET_DEVICE\u73af\u5883\u53d8\u91cf\uff1a Bash<pre><code>export VLLM_TARGET_DEVICE=empty\npip install -e .\n</code></pre></p>"},{"location":"mkdocs/latex/","title":"mkdocs\u4e2d\u4f7f\u7528LaTex","text":"<p>\u5173\u952e\u8bcd\uff1amkdocs, LaTex, \u6570\u5b66\u516c\u5f0f</p> <p>arithmatex</p> <p>MkDocs \u4f7f\u7528 Python Markdown \u8f6c\u5316 Markdown \u6587\u4ef6\u4e3a HTML \u6587\u6863\u3002Python Markdown \u652f\u6301\u5927\u91cf\u683c\u5f0f\u5316\u9875\u9762\u7684\u6269\u5c55\u3002</p> <p>\u5982\u679c\u9700\u8981\u5728\u9875\u9762\u4e0a\u5c55\u793aLaTex\u6570\u5b66\u516c\u5f0f\uff0c\u53ea\u9700\u8981\u5728mkdocs.yaml\u914d\u7f6e\u4e2d\uff0c\u914d\u7f6e\u63d2\u4ef6\u548cjavascript\u6587\u4ef6\u5373\u53ef\u8f7b\u677e\u5b9e\u73b0\u3002</p>"},{"location":"mkdocs/latex/#_1","title":"\u63d2\u4ef6\u914d\u7f6e","text":"<ul> <li> <p>markdown_extensions YAML<pre><code>markdown_extensions:\n  - pymdownx.arithmatex:\n      generic: true\n</code></pre></p> </li> <li> <p>extra_javascript YAML<pre><code>extra_javascript:\n  - https://polyfill.io/v3/polyfill.min.js?features=es6\n  - https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js\n</code></pre></p> </li> </ul>"},{"location":"mkdocs/syntax/","title":"mkdocs \u8bed\u6cd5\u652f\u6301","text":""},{"location":"mkdocs/syntax/#_1","title":"\u53c2\u8003","text":"<ol> <li>https://jejjohnson.github.io/research_journal/resources/mkdocs/</li> </ol>"},{"location":"onnx/api_proto/","title":"Proto \u7c7b\u578b\u5b9a\u4e49","text":"<p>\u4f5c\u8005: \u718a\u54c8\u54c8</p> <p>\u90ae\u7bb1: 915574300@qq.com</p>"},{"location":"onnx/api_proto/#_1","title":"\u80cc\u666f","text":"<p>\u8fd9\u4e9b\u7ed3\u6784\u5728onnx\u4e2d\u4f7f\u7528 protobuf \u534f\u8bae\u5b9a\u4e49\uff0c\u5728 onnx/*.proto \u6587\u4ef6\u4e2d\u3002\u5efa\u8bae\u4f7f\u7528<code>onnx.helper</code> \u6a21\u5757\u4e2d\u7684\u51fd\u6570\u6765\u521b\u5efa\u5b83\u4eec\uff0c\u800c\u4e0d\u662f\u76f4\u63a5\u5b9e\u4f8b\u5316\u5b83\u4eec\u3002\u6bcf\u4e2a\u7ed3\u6784\u90fd\u53ef\u4ee5\u7528\u51fd\u6570\u6253\u5370print\u5e76\u5448\u73b0\u4e3a json \u5b57\u7b26\u4e32\u3002</p> <p>\u5f53\u6211\u4eec\u52a0\u8f7d\u4e86\u4e00\u4e2aONNX \u6a21\u578b\u4e4b\u540e\uff0c\u6211\u4eec\u83b7\u5f97\u7684\u5c31\u662f\u4e00\u4e2a <code>ModelProto</code>\uff0c\u5b83\u5305\u542b\u4e86\u4e00\u4e9b\u7248\u672c\u4fe1\u606f\uff0c\u751f\u4ea7\u8005\u4fe1\u606f\u548c\u4e00\u4e2a <code>GraphProto</code>\u3002\u5728 <code>GraphProto</code>\u91cc\u9762\u53c8\u5305\u542b\u4e86\u56db\u4e2arepeated\u6570\u7ec4\uff0c\u5b83\u4eec\u5206\u522b\u662f <code>node</code>(<code>NodeProto</code>\u7c7b\u578b)\uff0c<code>input</code>(<code>ValueInfoProto</code>\u7c7b\u578b)\uff0c<code>output</code>(<code>ValueInfoProto</code>\u7c7b\u578b)\u548c<code>initializer</code>(<code>TensorProto</code>\u7c7b\u578b)\uff0c\u5176\u4e2d </p> <ul> <li><code>node</code> \u4e2d\u5b58\u653e\u4e86\u6a21\u578b\u4e2d\u6240\u6709\u7684\u8ba1\u7b97\u8282\u70b9\uff0c</li> <li><code>input</code> \u5b58\u653e\u4e86\u6a21\u578b\u7684\u8f93\u5165\u8282\u70b9\uff0c</li> <li><code>output</code> \u5b58\u653e\u4e86\u6a21\u578b\u4e2d\u6240\u6709\u7684\u8f93\u51fa\u8282\u70b9\uff0c</li> <li><code>initializer</code> \u5b58\u653e\u4e86\u6a21\u578b\u7684\u6240\u6709\u6743\u91cd\u53c2\u6570\u3002</li> </ul> <p>onnx\u6587\u4ef6\u7684\u7ed3\u6784\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p>"},{"location":"onnx/api_proto/#modelproto","title":"ModelProto","text":"<p><code>ModelProto</code> \u8fd9\u4e2a\u7c7b\u8fd9\u5b9a\u4e49\u4e86\u4e00\u4e2aONNX\u6a21\u578b\u3002\u8fd9\u662f\u6bcf\u4e2a\u8f6c\u6362\u5e93\u5728\u8f6c\u6362\u673a\u5668\u5b66\u4e60\u6a21\u578b\u540e\u8fd4\u56de\u7684\u7c7b\u578b\u3002<code>ModelProto</code> \u662f\u4e00\u79cd\u9876\u5c42\u6587\u4ef6/\u5bb9\u5668\u683c\u5f0f\uff0c\u7528\u4e8e\u6784\u5efa ML \u6a21\u578b\u5e76\u5c06\u5176\u8ba1\u7b97\u56fe\u4e0e\u5143\u6570\u636e\u5173\u8054\u8d77\u6765\u3002\u6a21\u578b\u7684\u8bed\u4e49\u7531\u5173\u8054\u7684 <code>GraphProto</code> \u63cf\u8ff0\u3002</p> \u5c5e\u6027 \u7c7b\u578b \u542b\u4e49 doc_string onnx.ModelProto.doc_string domain onnx.ModelProto.domain functions onnx.ModelProto.functions graph onnx.ModelProto.graph ir_version onnx.ModelProto.ir_version metadata_props onnx.ModelProto.metadata_props model_version onnx.ModelProto.model_version opset_import onnx.ModelProto.opset_import producer_name onnx.ModelProto.producer_name producer_version onnx.ModelProto. Producer_version training_info onnx.ModelProto.training_info"},{"location":"onnx/api_proto/#attributeproto","title":"AttributeProto","text":"<p>\u8fd9\u4e2a\u7c7b\u7528\u4e8e\u5b9a\u4e49\u7531 NodeProto \u81ea\u8eab\u5b9a\u4e49\u7684\u7b97\u5b50\u5c5e\u6027\u3002\u5b83\u662f\u4e00\u4e2a\u547d\u540d\u5c5e\u6027\uff0c\u5305\u542b\u5355\u4e2a\u6d6e\u70b9\u6570\u3001\u6574\u6570\u3001\u5b57\u7b26\u4e32\u3001\u56fe\u548c\u5f20\u91cf\u503c\uff0c\u6216\u91cd\u590d\u7684\u6d6e\u70b9\u6570\u3001\u6574\u6570\u3001\u5b57\u7b26\u4e32\u3001\u56fe\u548c\u5f20\u91cf\u503c\u3002<code>AttributeProto</code> \u5fc5\u987b\u5305\u542b \u540d\u79f0 \u5b57\u6bb5\uff0c\u5e76\u4e14\u53ea\u80fd\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\u5b57\u6bb5\u4e4b\u4e00\uff0c\u4ece\u800c\u6709\u6548\u5730\u5f3a\u5236\u6267\u884c C/C++ \u8054\u5408\u7b49\u6548\u9879\u3002</p> \u5c5e\u6027 \u7c7b\u578b \u542b\u4e49 DESCRIPTOR \u6b64\u6d88\u606f\u7c7b\u578b\u7684google.protobuf.descriptor.Descriptor\u3002 doc_string onnx.AttributeProto.doc_string \u53d8\u91cf\u7684\u5907\u6ce8\u8bf4\u660e f onnx.AttributeProto.f floats onnx.AttributeProto.floats g onnx.AttributeProto.g graphs onnx.AttributeProto.graphs i onnx.AttributeProto.i ints onnx.AttributeProto.ints name onnx.AttributeProto.name ref_attr_name onnx.AttributeProto.ref_attr_name s onnx.AttributeProto.s sparse_tensor onnx.AttributeProto.sparse_tensor sparse_tensors onnx.AttributeProto.sparse_tensors strings onnx.AttributeProto.strings t onnx.AttributeProto.t tensors onnx.AttributeProto.tensors tp onnx.AttributeProto.tp type onnx.AttributeProto.type type_protos onnx.AttributeProto.type_protos"},{"location":"onnx/api_proto/#functionproto","title":"FunctionProto","text":"<p>\u8fd9\u5b9a\u4e49\u4e86\u4e00\u4e2a\u51fd\u6570\u3002\u5b83\u4e0d\u662f\u6a21\u578b\uff0c\u4f46\u53ef\u7528\u4e8e\u5b9a\u4e49\u6a21\u578b\u4e2d\u4f7f\u7528\u7684\u81ea\u5b9a\u4e49\u8fd0\u7b97\u7b26\u3002</p> \u5c5e\u6027 \u7c7b\u578b \u542b\u4e49 DESCRIPTOR attribute onnx.FunctionProto.attribute attribute_proto onnx.FunctionProto.attribute_proto doc_string onnx.FunctionProto.doc_string domain onnx.FunctionProto.domain input onnx.FunctionProto.input metadata_props onnx.FunctionProto.metadata_props name onnx.FunctionProto.name node onnx.FunctionProto.node opset_import onnx.FunctionProto.opset_import output onnx.FunctionProto.output overload onnx.FunctionProto.overload value_info onnx.FunctionProto.value_info"},{"location":"onnx/api_proto/#graphproto","title":"GraphProto","text":"<p>\u8fd9\u5b9a\u4e49\u4e86\u4e00\u4e2a\u56fe\u6216\u4e00\u7ec4\u4ece\u5faa\u73af\u6216\u6d4b\u8bd5\u4e2d\u8c03\u7528\u7684\u8282\u70b9\u3002\u56fe\u5b9a\u4e49\u4e86\u6a21\u578b\u7684\u8ba1\u7b97\u903b\u8f91\uff0c\u7531\u53c2\u6570\u5316\u7684\u8282\u70b9\u5217\u8868\u7ec4\u6210\uff0c\u8fd9\u4e9b\u8282\u70b9\u6839\u636e\u5176\u8f93\u5165\u548c\u8f93\u51fa\u5f62\u6210\u6709\u5411\u65e0\u73af\u56fe DAG\u3002\u8fd9\u76f8\u5f53\u4e8e\u8bb8\u591a\u6df1\u5ea6\u5b66\u4e60\u6846\u67b6\u4e2d\u7684 \u7f51\u7edc \u6216 \u56fe\u3002</p> \u5c5e\u6027 \u7c7b\u578b \u542b\u4e49 DESCRIPTOR doc_string onnx.GraphProto.doc_string initializer onnx.GraphProto.initializer input onnx.GraphProto.input metadata_props onnx.GraphProto.metadata_props name onnx.GraphProto.name node onnx.GraphProto.node output onnx.GraphProto.output quantization_annotation onnx.GraphProto.quantization_annotation sparse_initializer onnx.GraphProto.sparse_initializer value_info onnx.GraphProto.value_info"},{"location":"onnx/api_proto/#mapproto","title":"MapProto","text":"<p>\u8fd9\u5b9a\u4e49\u4e86\u4e00\u4e2a\u6620\u5c04\u6216\u5b57\u5178\u3002\u5b83\u6307\u5b9a\u4e00\u4e2a\u7531\u952e\u548c\u503c\u5b9a\u4e49\u7684\u5173\u8054\u8868\u3002MapProto \u7531\u4e00\u4e2a\u91cd\u590d\u7684\u952e\u5b57\u6bb5\uff08\u7c7b\u578b\u4e3a INT8\u3001INT16\u3001INT32\u3001INT64\u3001UINT8\u3001UINT16\u3001UINT32\u3001UINT64 \u6216 STRING\uff09\u548c\u503c\uff08\u7c7b\u578b\u4e3a TENSOR\u3001SPARSE_TENSOR\u3001SEQUENCE \u6216 MAP\uff09\u7ec4\u6210\u3002\u952e\u7c7b\u578b\u548c\u503c\u7c7b\u578b\u5728 MapProto \u7684\u6574\u4e2a\u5b9e\u4f8b\u5316\u8fc7\u7a0b\u4e2d\u5fc5\u987b\u4fdd\u6301\u4e0d\u53d8\u3002</p> \u5c5e\u6027 \u7c7b\u578b \u542b\u4e49 DESCRIPTOR key_type onnx.MapProto.key_type keys onnx.MapProto.keys name onnx.MapProto.name string_keys onnx.MapProto.string_keys values onnx.MapProto.values"},{"location":"onnx/api_proto/#nodeproto","title":"NodeProto","text":"<p>\u8fd9\u5b9a\u4e49\u4e86\u4e00\u4e2a\u7b97\u5b50\u3002\u6a21\u578b\u662f\u6570\u5b66\u51fd\u6570\u7684\u7ec4\u5408\uff0c\u6bcf\u4e2a\u51fd\u6570\u90fd\u8868\u793a\u4e3a onnx \u7b97\u5b50\uff0c\u5b58\u50a8\u5728 NodeProto \u4e2d\u3002\u8ba1\u7b97\u56fe\u7531\u8282\u70b9\u7684 DAG \u7ec4\u6210\uff0c\u8fd9\u4e9b\u8282\u70b9\u8868\u793a\u673a\u5668\u5b66\u4e60\u6846\u67b6\u4e2d\u901a\u5e38\u79f0\u4e3a\u5c42\u6216\u7ba1\u9053\u9636\u6bb5\u7684\u5185\u5bb9\u3002\u4f8b\u5982\uff0c\u5b83\u53ef\u4ee5\u662fConv\u7c7b\u578b\u7684\u8282\u70b9\uff0c\u5b83\u63a5\u6536\u56fe\u50cf\u3001\u8fc7\u6ee4\u5668\u5f20\u91cf\u548c\u504f\u5dee\u5f20\u91cf\uff0c\u5e76\u4ea7\u751f\u5377\u79ef\u8f93\u51fa\u3002</p> \u5c5e\u6027 \u7c7b\u578b \u542b\u4e49 DESCRIPTOR attribute onnx.NodeProto.attribute doc_string onnx.NodeProto.doc_string domain onnx.NodeProto.domain input onnx.NodeProto.input metadata_props onnx.NodeProto.metadata_props name onnx.NodeProto.name op_type onnx.NodeProto.op_type output onnx.NodeProto.output overload onnx.NodeProto.overload"},{"location":"onnx/api_proto/#operatorproto","title":"OperatorProto","text":"<p>\u7528\u6237\u5f88\u5c11\u4f7f\u7528\u6b64\u7c7b\u3002OperatorProto \u8868\u793a\u7b97\u5b50\u7b7e\u540d\u548c\u8bed\u4e49\u7684\u4e0d\u53ef\u53d8\u89c4\u8303\u3002\u7b97\u5b50\u88ab\u58f0\u660e\u4e3a OperatorSet \u7684\u4e00\u90e8\u5206\uff0c\u5b83\u8fd8\u5b9a\u4e49\u4e86\u96c6\u5408\u7684\u57df\u540d\u3002\u8fd0\u7b97\u7b26\u7531\u4e09\u90e8\u5206\u6807\u8bc6\u7b26\uff08domain\u3001op_type\u3001since_version\uff09\u552f\u4e00\u6807\u8bc6\uff0c\u5176\u4e2d</p> <ul> <li> <p>domain: \u662f\u5305\u542b\u6b64\u7b97\u5b50\u89c4\u8303\u7684\u7b97\u5b50\u96c6\u7684\u57df\u3002</p> </li> <li> <p>op_type: \u662f NodeProto.op_type \u5f15\u7528\u7684\u7b97\u5b50\u7684\u540d\u79f0</p> </li> <li> <p>since_version: \u662f\u6b64\u7b97\u5b50\u6700\u521d\u58f0\u660e\u7684\u7b97\u5b50\u96c6\u7684\u7248\u672c\u3002</p> </li> </ul> \u5c5e\u6027 \u7c7b\u578b \u542b\u4e49 DESCRIPTOR doc_string onnx.OperatorProto.doc_string op_type onnx.OperatorProto.op_type since_version onnx.OperatorProto.since_version status onnx.OperatorProto.status"},{"location":"onnx/api_proto/#operatorsetidproto","title":"OperatorSetIdProto","text":"<p>\u8fd9\u662f ModelProto \u7c7b\u7684\u5c5e\u6027\u7c7b\u578bopset_import\u3002\u6b64\u5c5e\u6027\u6307\u5b9a\u6a21\u578b\u4e2d\u4f7f\u7528\u7684\u8fd0\u7b97\u7b26\u7684\u7248\u672c\u3002\u6bcf\u4e2a\u8fd0\u7b97\u7b26\u6216\u8282\u70b9\u90fd\u5c5e\u4e8e\u4e00\u4e2a\u57df\u3002\u540c\u4e00\u57df\u7684\u6240\u6709\u8fd0\u7b97\u7b26\u5171\u4eab\u540c\u4e00\u7248\u672c\u3002</p> \u5c5e\u6027 \u7c7b\u578b \u542b\u4e49 DESCRIPTOR domain onnx.OperatorSetIdProto.domain version onnx.OperatorSetIdProto.version"},{"location":"onnx/api_proto/#operatorsetproto","title":"OperatorSetProto","text":"<p>OperatorSetProto \u8868\u793a\u4e00\u7ec4\u4e0d\u53ef\u53d8\u7684\u4e0d\u53ef\u53d8\u7b97\u5b50\u89c4\u8303\u3002\u8be5\u96c6\u5408\u7684\u57df (OperatorSetProto.domain) \u662f\u4e00\u4e2a\u53cd\u5411 DNS \u540d\u79f0\uff0c\u7528\u4e8e\u6d88\u9664\u7531\u72ec\u7acb\u5b9e\u4f53\u5b9a\u4e49\u7684\u7b97\u5b50\u7684\u6b67\u4e49\u3002\u8be5\u96c6\u5408\u7684\u7248\u672c (opset_version) \u662f\u4e00\u4e2a\u5355\u8c03\u9012\u589e\u7684\u6574\u6570\uff0c\u8868\u793a\u5bf9\u7b97\u5b50\u96c6\u6210\u5458\u8d44\u683c\u7684\u66f4\u6539\u3002\u7b97\u5b50\u96c6\u7531\u4e24\u90e8\u5206\u6807\u8bc6\u7b26 (domain\u3001opset_version) \u552f\u4e00\u6807\u8bc6\u3002\u4e0e ModelProto \u4e00\u6837\uff0cOperatorSetProto \u65e8\u5728\u7528\u4f5c\u9876\u7ea7\u6587\u4ef6/\u7ebf\u8def\u683c\u5f0f\uff0c\u56e0\u6b64\u9664\u4e86\u7b97\u5b50\u96c6\u4fe1\u606f\u5916\uff0c\u8fd8\u5177\u6709\u6807\u51c6\u683c\u5f0f\u6807\u5934\u3002</p> \u5c5e\u6027 \u7c7b\u578b \u542b\u4e49 DESCRIPTOR doc_string onnx.OperatorSetProto.doc_string domain onnx.OperatorSetProto.domain functions onnx.OperatorSetProto.functions ir_build_metadata onnx.OperatorSetProto.ir_build_metadata ir_version onnx.OperatorSetProto.ir_version ir_version_prerelease onnx.OperatorSetProto.ir_version_prerelease magic onnx.OperatorSetProto.magic <p>|operator| onnx.OperatorSetProto.operator||</p> <p>|opset_version| onnx.OperatorSetProto.opset_version||</p>"},{"location":"onnx/api_proto/#_2","title":"\u53c2\u8003\uff1a","text":"<ol> <li>https://zhuanlan.zhihu.com/p/346511883</li> <li>https://www.cnblogs.com/silence-cho/p/17673812.html</li> <li>https://github.com/open-mmlab/mmdeploy/blob/main/docs/zh_cn/tutorial/05_onnx_model_editing.md</li> <li>https://www.cnblogs.com/vh-pg/p/11736174.html</li> <li>https://tvm-book.readthedocs.io/zh/latest/tutorials/frontend/onnxscript/square-loss.html</li> <li>https://blog.csdn.net/zt1091574181/article/details/126299266</li> </ol>"},{"location":"onnx/introduction/","title":"ONNX \u6982\u5ff5","text":"<p>\u4f5c\u8005: \u718a\u54c8\u54c8</p> <p>\u90ae\u7bb1: 915574300@qq.com</p> <p>ONNX \u53ef\u4ee5\u6bd4\u4f5c\u4e00\u79cd\u4e13\u95e8\u7528\u4e8e\u6570\u5b66\u51fd\u6570\u7684\u7f16\u7a0b\u8bed\u8a00\u3002\u5b83\u5b9a\u4e49\u4e86\u673a\u5668\u5b66\u4e60\u6a21\u578b\u4f7f\u7528\u8be5\u8bed\u8a00(\u6307ONNX)\u5b9e\u73b0\u6a21\u578b\u63a8\u7406\u529f\u80fd\u6240\u9700\u7684\u6240\u6709\u5fc5\u8981\u8fd0\u7b97\u6216\u8005\u79f0\u4e3a\u7b97\u5b50\u3002\u4e00\u4e2a\u7ebf\u6027\u56de\u5f52\u7684\u6a21\u578b\u53ef\u4ee5\u7528\u4ee5\u4e0b\u65b9\u5f0f\u8868\u793a\uff1a</p> <p>\u718a\u54c8\u54c8\u6ce8</p> <p>ONNX (\u5927\u5199)\u8868\u793a\u63cf\u8ff0\u6a21\u578b\u7684\u6807\u51c6</p> <p>onnx (\u5c0f\u5199) ONNX \u6807\u51c6\u7684\u4e00\u79cdpython\u5b9e\u73b0\u65b9\u5f0f\uff0c\u662f\u5b9e\u73b0 ONNX \u7684\u4e00\u4e2a python \u5305</p> Python<pre><code>def onnx_linear_regressor(X):\n    \"ONNX code for a linear regression\"\n    return onnx.Add(onnx.MatMul(X, coefficients), bias)\n</code></pre> <p>\u718a\u54c8\u54c8\u6ce8</p> <p>\u4e0a\u9762\u7ebf\u6027\u56de\u5f52\u6a21\u578b\u7684\u6570\u5b66\u6a21\u578b\u5982\u4e0b\uff1a $$ y = X * A + B $$</p> <p>\u8fd9\u4e2a\u793a\u4f8b\u4e0e\u5f00\u53d1\u4eba\u5458\u7528 <code>Python</code> \u7f16\u5199\u7684\u8868\u8fbe\u5f0f\u975e\u5e38\u76f8\u4f3c\u3002\u5b83\u4e5f\u53ef\u4ee5\u8868\u793a\u4e3a\u4e00\u4e2a\u8ba1\u7b97\u56fe\uff0c\u901a\u8fc7\u8ba1\u7b97\u56fe\u9010\u6b65\u5c55\u793a\u7ebf\u6027\u6a21\u578b\u5982\u4f55\u8f6c\u6362\u7279\u5f81\uff0c\u6700\u540e\u83b7\u5f97\u9884\u6d4b\u7684\u7ed3\u679c\u3002\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u4f7f\u7528 ONNX \u5b9e\u73b0\u7684\u673a\u5668\u5b66\u4e60\u6a21\u578b\u901a\u5e38\u88ab\u79f0\u4e3a ONNX \u56fe\u7684\u539f\u56e0\u3002</p> <p></p> <p>ONNX \u65e8\u5728\u63d0\u4f9b\u4e00\u79cd\u4efb\u4f55\u673a\u5668\u5b66\u4e60\u6846\u67b6\u90fd\u53ef\u4ee5\u7528\u5176\u6765\u63cf\u8ff0\u6a21\u578b\u7684\u901a\u7528\u8bed\u8a00\u3002\u7b2c\u4e00\u4e2a\u573a\u666f\u662f\u8ba9\u5f00\u53d1\u8005\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u90e8\u7f72\u673a\u5668\u5b66\u4e60\u6a21\u578b\u53d8\u5f97\u66f4\u52a0\u5bb9\u6613\u3002\u53ef\u4ee5\u5728\u90e8\u7f72\u8be5\u6a21\u578b\u7684\u73af\u5883\u4e2d\uff0c\u4f7f\u7528\u4e13\u95e8\u5b9e\u73b0\u548c\u4f18\u5316\u7684 ONNX \u6a21\u578b\u89e3\u91ca\u5668\uff08\u6216\u8fd0\u884c\u65f6\u5e93\uff09\u4ee5\u5b8c\u6210\u6b64\u4efb\u52a1\u3002\u501f\u52a9 ONNX\uff0c\u53ef\u4ee5\u6784\u5efa\u4e00\u4e2a\u72ec\u7279\u7684\u6d41\u7a0b\u5728\u751f\u4ea7\u4e2d\u90e8\u7f72\u6a21\u578b\uff0c\u5e76\u4e14\u90e8\u7f72\u6846\u67b6\u53ef\u4ee5\u72ec\u7acb\u4e8e\u7528\u4e8e\u6784\u5efa\u6a21\u578b\u7684\u5b66\u4e60\u6846\u67b6\u3002 python \u7684 <code>onnx</code> \u5e93\u5b9e\u73b0\u4e86\u4e00\u4e2a\u8fd0\u884c\u65f6\u5e93\uff0c\u53ef\u7528\u4e8e\u8bc4\u4f30 ONNX \u6a21\u578b\u4ee5\u53ca\u8bc4\u4f30 ONNX \u7b97\u5b50\u3002 <code>onnx</code> \u7528\u6765\u5728\u9610\u660e ONNX \u7684\u8bed\u4e49\u5e76\u5e2e\u52a9\u7406\u89e3\u548c\u8c03\u8bd5 ONNX \u5de5\u5177\u548c\u8f6c\u6362\u5668\u3002<code>onnx</code> \u4e0d\u9002\u7528\u4e8e\u751f\u4ea7\u73af\u5883\uff0c\u8fd0\u884c\u7684\u6027\u80fd\u4e5f\u4e0d\u662f <code>onnx</code> \u7684\u76ee\u6807\uff08\u53c2\u89c1onnx.reference\uff09\u3002</p>"},{"location":"onnx/introduction/#_1","title":"\u8f93\u5165\u3001\u8f93\u51fa\u3001\u8282\u70b9\u3001\u521d\u59cb\u5316\u5668\u3001\u5c5e\u6027","text":"<p>\u6784\u5efa ONNX \u8ba1\u7b97\u56fe\u610f\u5473\u7740\u4f7f\u7528 ONNX \u8bed\u8a00\u6216\u66f4\u51c6\u786e\u5730\u8bf4\u662f ONNX \u7b97\u5b50\u6765\u5b9e\u73b0\u51fd\u6570\u3002\u7ebf\u6027\u56de\u5f52\u53ef\u4ee5\u4f7f\u7528\u4e0b\u8ff0\u7684\u65b9\u5f0f\u5199\u3002\u4ee5\u4e0b\u51e0\u884c\u4ee3\u7801\u4e0d\u9075\u5faa Python \u8bed\u6cd5\u3002\u5b83\u53ea\u662f\u4e00\u79cd\u7528\u4e8e\u8bf4\u660e\u6a21\u578b\u7684\u4f2a\u4ee3\u7801\u3002</p> Python<pre><code>Input: float[M,K] x, float[K,N] a, float[N] c\nOutput: float[M, N] y\n\nr = onnx.MatMul(x, a)\ny = onnx.Add(r, c)\n</code></pre> <p>\u4e0a\u8ff0\u7684\u4ee3\u7801\u5b9e\u73b0\u4e86\u4e00\u4e2a\u51fd\u6570 \\(f(x, a, c) -&gt; y = x @ a + c\\)\u3002\u5176\u4e2d <code>x</code>\u3001<code>a</code>\u3001<code>c</code>\u662f\u8f93\u5165\uff0c\\(y\\) \u662f\u8f93\u51fa\u3002\\(r\\) \u662f\u4e2d\u95f4\u7ed3\u679c\u3002 <code>MatMul</code> \u548c <code>Add</code> \u662f\u8282\u70b9\u3002\u5b83\u4eec\u4e5f\u6709\u8f93\u5165\u548c\u8f93\u51fa\u3002\u8282\u70b9\u8fd8\u6709\u7c7b\u578b\u3002\u4e0a\u56fe\u662f\u6839\u636e\u7b2c 1 \u8282\u4e2d\u7684\u3010\u4e00\u4e2a\u7b80\u5355\u793a\u4f8b\uff1a\u7ebf\u6027\u56de\u5f52\u3011\u6784\u5efa\u7684\u8ba1\u7b97\u56fe\u3002</p> <p>\u4e0a\u9762\u7684\u8ba1\u7b97\u56fe\u4e5f\u53ef\u4ee5\u6709\u4e00\u4e2a\u521d\u59cb\u5316\u5668\u3002\u5f53\u67d0\u4e00\u4e2a\u8f93\u5165\u8282\u70b9\u6c38\u8fdc\u4e0d\u4f1a\u6539\u53d8\u65f6\uff08\u4f8b\u5982\u7ebf\u6027\u56de\u5f52\u7684\u7cfb\u6570\uff09\uff0c\u5c06\u5176\u8f6c\u6362\u4e3a\u8ba1\u7b97\u56fe\u4e2d\u7684\u5e38\u91cf\u8282\u70b9\u662f\u6700\u6709\u6548\u7684\u3002</p> Python<pre><code>Input: float[M,K] x\nInitializer: float[K,N] a, float[N] c\nOutput: float[M, N] xac\n\nxa = onnx.MatMul(x, a)\nxac = onnx.Add(xa, c)\n</code></pre> <p>\u4ece\u89c6\u89c9\u4e0a\u770b\uff0c\u4e0a\u8ff0\u7684\u4f2a\u4ee3\u7801\u5bf9\u5e94\u7684\u8ba1\u7b97\u56fe\u5982\u4e0b\u56fe\u6240\u793a\u3002\u8ba1\u7b97\u56fe\u4e2d\u7684\u53f3\u4fa7\u63cf\u8ff0\u4e86 \u7b97\u5b50 <code>Add</code>\uff0c\u5176\u4e2d\u7b2c\u4e8c\u4e2a\u8f93\u5165\u5b9a\u4e49\u4e3a\u521d\u59cb\u5316\u5668\u3002\u8be5\u56fe\u662f\u4f7f\u7528\u6b64\u4ee3\u7801\u521d\u59cb\u5316\u5668\uff0c\u9ed8\u8ba4\u503c\u83b7\u5f97\u7684\u3002</p> <p></p> <p>\u5c5e\u6027\u662f\u7b97\u5b50\u7684\u56fa\u5b9a\u53c2\u6570\u3002 <code>Gemm</code> \u7b97\u5b50\u6709\u56db\u4e2a\u5c5e\u6027\uff0c<code>alpha</code>\u3001<code>beta</code>\u3001<code>transA</code>\u3001<code>transB</code>\u3002\u8fd0\u884c\u65f6\u5e93\u4e00\u65e6\u52a0\u8f7d\u4e86 ONNX \u56fe\uff0c\u8fd9\u4e9b\u503c\u5c31\u65e0\u6cd5\u66f4\u6539\uff0c\u5e76\u4e14\u5bf9\u4e8e\u6240\u6709\u9884\u6d4b\u8fc7\u7a0b\u90fd\u4fdd\u6301\u4e0d\u53d8\u3002</p>"},{"location":"onnx/introduction/#protobuf","title":"\u4f7f\u7528 protobuf \u8fdb\u884c\u5e8f\u5217\u5316","text":"<p>\u5c06\u673a\u5668\u5b66\u4e60\u6a21\u578b\u90e8\u7f72\u5230\u751f\u4ea7\u4e2d\u901a\u5e38\u9700\u8981\u590d\u5236\u7528\u4e8e\u8bad\u7ec3\u6a21\u578b\u7684\u6574\u4e2a\u751f\u6001\u7cfb\u7edf\uff0c\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u4f7f\u7528 docker \u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002\u5c06\u6a21\u578b\u8f6c\u6362\u4e3a ONNX \u540e\uff0c\u751f\u4ea7\u73af\u5883\u53ea\u9700\u8981\u8fd0\u884c\u65f6\u6765\u6267\u884c\u4f7f\u7528 ONNX \u7b97\u5b50\u5b9a\u4e49\u7684\u8ba1\u7b97\u56fe\u3002\u8fd0\u884c\u65f6\u53ef\u4ee5\u4f7f\u7528\u4efb\u4f55\u9002\u5408\u751f\u4ea7\u73af\u5883\u4e0b\u5e94\u7528\u7a0b\u5e8f\u7684\u7f16\u7a0b\u8bed\u8a00\u5f00\u53d1\uff0cC\u3001java\u3001python\u3001javascript\u3001C#\u3001Webassembly\u3001ARM.....\u3002</p> <p>\u4f46\u8981\u5b9e\u73b0\u8fd9\u4e00\u70b9\uff0c\u9700\u8981\u4fdd\u5b58 ONNX \u8ba1\u7b97\u56fe\u3002ONNX \u4f7f\u7528 protobuf \u5c06\u8ba1\u7b97\u56fe\u5e8f\u5217\u5316\u4e3a\u4e00\u6574\u4e2a\u6a21\u5757\uff08\u53c2\u89c1\u89e3\u6790\u548c\u5e8f\u5217\u5316\uff09\u3002\u8fd9\u6837\u505a\u7684\u76ee\u7684\u662f\u5728\u5c3d\u53ef\u80fd\u4f18\u5316\u6a21\u578b\u5927\u5c0f\u3002</p>"},{"location":"onnx/introduction/#_2","title":"\u5143\u6570\u636e","text":"<p>\u673a\u5668\u5b66\u4e60\u6a21\u578b\u4e0d\u65ad\u66f4\u65b0\u3002\u8ddf\u8e2a\u6a21\u578b\u7248\u672c\u3001\u6a21\u578b\u4f5c\u8005\u4ee5\u53ca\u6a21\u578b\u7684\u8bad\u7ec3\u65b9\u5f0f\u975e\u5e38\u91cd\u8981\u3002ONNX \u63d0\u4f9b\u4e86\u5728\u6a21\u578b\u672c\u8eab\u4e2d\u5b58\u50a8\u989d\u5916\u6570\u636e\u7684\u53ef\u80fd\u6027\u3002</p> <ul> <li> <p>doc_string\uff1a\u5f53\u524d\u6a21\u578b\u7684\u4eba\u7c7b\u53ef\u8bfb\u6587\u6863\u3002\u5141\u8bb8 Markdown \u683c\u5f0f\u3002</p> </li> <li> <p>domain\uff1a\u7528\u4e8e\u8868\u793a\u6a21\u578b\u547d\u540d\u7a7a\u95f4\u6216\u57df\u7684\u53cd\u5411 DNS \u540d\u79f0\uff0c\u4f8b\u5982\uff0c\u201corg.onnx\u201d</p> </li> <li> <p>metadata_props\uff1a\u5c06\u5143\u6570\u636e\u547d\u540d\u4e3a\u5b57\u5178 <code>map&lt;string,string&gt;</code> \uff0c <code>(values, keys)</code> \u5e94\u8be5\u662f\u4e0d\u540c\u7684\u3002</p> </li> <li> <p>model_author\uff1a\u4ee5\u9017\u53f7\u5206\u9694\u7684\u540d\u79f0\u5217\u8868\uff0c\u6a21\u578b\u4f5c\u8005\u7684\u4e2a\u4eba\u59d3\u540d\u548c/\u6216\u5176\u7ec4\u7ec7\u3002</p> </li> <li> <p>model_license\uff1a\u8bb8\u53ef\u8bc1\u7684\u77e5\u540d\u540d\u79f0\u6216 URL\uff0c\u8be5\u6a21\u578b\u53ef\u4f9b\u4f7f\u7528\u3002</p> </li> <li> <p>model_version\uff1a\u6a21\u578b\u672c\u8eab\u7684\u7248\u672c\uff0c\u4ee5\u6574\u6570\u7f16\u7801\u3002</p> </li> <li> <p>production_name\uff1a\u7528\u4e8e\u751f\u6210\u6a21\u578b\u7684\u5de5\u5177\u540d\u79f0\u3002</p> </li> <li> <p>production_version\uff1a\u751f\u6210\u5de5\u5177\u7684\u7248\u672c\u3002</p> </li> <li> <p>training_info\uff1a\u5305\u542b\u7684\u53ef\u9009\u6269\u5c55\u8bad\u7ec3\u4fe1\u606f\uff08\u53c2\u89c1TrainingInfoProto\uff09</p> </li> </ul>"},{"location":"onnx/introduction/#_3","title":"\u53ef\u7528\u7b97\u5b50\u548c\u57df\u7684\u5217\u8868","text":"<p>\u7b97\u5b50\u4e3b\u8981\u5217\u8868\u5728\u4e0b\u9762\u7684\u94fe\u63a5\u4e2d\uff1aONNX \u8fd0\u7b97\u7b26\u3002ONNX \u878d\u5408\u4e86\u6807\u51c6\u77e9\u9635\u8fd0\u7b97\u7b26\uff08<code>Add</code>\u3001<code>Sub</code>\u3001<code>MatMul</code>\u3001<code>Transpose</code>\u3001<code>Greater</code>\u3001<code>IsNaN</code>\u3001<code>Shape</code>\u3001<code>Reshape</code> ...\uff09\u3001\u7f29\u51cf\uff08<code>ReduceSum</code>\u3001<code>ReduceMin</code>\u3001...\uff09\u56fe\u50cf\u8f6c\u6362\uff08<code>Conv</code>\u3001<code>MaxPool</code>\u3001...\uff09\u3001\u6df1\u5ea6\u795e\u7ecf\u7f51\u7edc\u5c42\uff08<code>RNN</code>\u3001<code>DropOut</code>\u3001...\uff09\u3001\u6fc0\u6d3b\u51fd\u6570\uff08<code>Relu</code>\u3001<code>Softmax</code>\u3001...\uff09\u3002</p> <p>ONNX \u6db5\u76d6\u4e86\u6df1\u5ea6\u673a\u5668\u5b66\u4e60\u63a8\u7406\u529f\u80fd\u6240\u9700\u7684\u5927\u591a\u6570\u7b97\u5b50\u3002ONNX \u5e76\u672a\u5b9e\u73b0\u6240\u6709\u73b0\u6709\u7684\u673a\u5668\u5b66\u4e60\u7b97\u5b50\uff0c\u7b97\u5b50\u5217\u8868\u662f\u65e0\u9650\u7684\u3002</p> <p>\u4e3b\u8981\u7b97\u5b50\u5217\u8868\u7528\u57df <code>ai.onnx</code> \u6807\u8bc6\u3002\u57df \u53ef\u4ee5\u5b9a\u4e49\u4e3a\u4e00\u7ec4\u8fd0\u7b97\u7b26\u3002\u6b64\u5217\u8868\u4e2d\u7684\u4e00\u4e9b\u7b97\u5b50\u4e13\u7528\u4e8e\u6587\u672c\u6655\u7729\uff0c\u4f46\u5b83\u4eec\u51e0\u4e4e\u65e0\u6cd5\u6ee1\u8db3\u9700\u6c42\u3002\u4e3b\u5217\u8868\u8fd8\u7f3a\u5c11\u5728\u6807\u51c6\u673a\u5668\u5b66\u4e60\u4e2d\u975e\u5e38\u6d41\u884c\u7684\u57fa\u4e8e\u6811\u7684\u6a21\u578b\u3002\u8fd9\u4e9b\u662f\u53e6\u4e00\u4e2a\u57df <code>ai.onnx.ml</code> \u7684\u4e00\u90e8\u5206\uff0c\u5b83\u5305\u62ec\u57fa\u4e8e\u6811\u7684\u6a21\u578b\uff08<code>TreeEnsemble Regressor</code>\uff0c...\uff09\u3001\u9884\u5904\u7406\uff08<code>OneHotEncoder</code>\u3001<code>LabelEncoder</code>\uff0c...\uff09\u3001SVM \u6a21\u578b\uff08<code>SVMRegressor</code>\uff0c...\uff09\u3001\u8f93\u5165\u5668\uff08<code>Imputer</code>\uff09\u3002</p> <p>ONNX \u4ec5\u5b9a\u4e49\u4e86\u8fd9\u4e24\u4e2a\u57df\u3002\u4f46\u662f <code>onnx</code> \u5e93\u652f\u6301\u4efb\u4f55\u81ea\u5b9a\u4e49\u57df\u548c\u7b97\u5b50\uff08\u8bf7\u53c2\u9605\u53ef\u6269\u5c55\u6027\uff09\u3002</p>"},{"location":"onnx/introduction/#_4","title":"\u652f\u6301\u7684\u7c7b\u578b","text":"<p>ONNX \u89c4\u8303\u9488\u5bf9\u4f7f\u7528\u5f20\u91cf\u7684\u6570\u503c\u8ba1\u7b97\u8fdb\u884c\u4e86\u4f18\u5316\u3002\u5f20\u91cf\u662f\u4e00\u4e2a\u591a\u7ef4\u6570\u7ec4\u3002\u5b83\u7684\u5b9a\u4e49\u5982\u4e0b\uff1a</p> <ul> <li> <p>\u6570\u636e\u7c7b\u578btype\uff1a\u5f20\u91cf\u4e2d\u5143\u7d20\u7c7b\u578b\uff0c\u5f20\u91cf\u4e2d\u7684\u6240\u6709\u5143\u7d20\u90fd\u76f8\u540c</p> </li> <li> <p>\u5f20\u91cf\u5f62\u72b6shape\uff1a\u4e00\u4e2a\u5305\u542b\u6240\u6709\u7ef4\u5ea6\u7684\u6570\u7ec4\uff0c\u6b64\u6570\u7ec4\u53ef\u4ee5\u4e3a\u7a7a\uff0c\u7ef4\u5ea6\u53ef\u4ee5\u4e3a\u7a7a</p> </li> <li> <p>\u4e00\u4e2a\u8fde\u7eed\u7684\u6570\u7ec4array\uff1a\u6570\u7ec4\u5b58\u50a8\u4e86\u5f20\u91cf\u6240\u6709\u7684\u503c</p> </li> </ul> <p>\u4e0a\u8ff0\u5b9a\u4e49\u4e0d\u5305\u62ec\u6b65\u5e45 <code>strides</code> \u6216\u57fa\u4e8e\u73b0\u6709\u5f20\u91cf\u5b9a\u4e49\u5f20\u91cf\u53ef\u89c6\u5316\u7684\u5c5e\u6027\u3002ONNX \u5f20\u91cf\u662f\u6ca1\u6709\u6b65\u5e45\u7684\u5bc6\u96c6\u6570\u7ec4\u3002</p>"},{"location":"onnx/introduction/#_5","title":"\u5143\u7d20\u7c7b\u578b","text":"<p>ONNX \u6700\u521d\u662f\u4e3a\u4e86\u5e2e\u52a9\u90e8\u7f72\u6df1\u5ea6\u5b66\u4e60\u6a21\u578b\u800c\u5f00\u53d1\u7684\u3002\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u89c4\u8303\u6700\u521d\u662f\u4e3a\u6d6e\u70b9\u6570\uff0832 \u4f4d\uff09\u8bbe\u8ba1\u7684\u3002\u5f53\u524d\u7248\u672c\u652f\u6301\u6240\u6709\u5e38\u89c1\u7c7b\u578b\u3002\u5b57\u5178 <code>TENSOR_TYPE_MAP</code> \u7ed9\u51fa\u4e86 ONNX \u548c numpy \u4e4b\u95f4\u7684\u5bf9\u5e94\u5173\u7cfb\u3002</p> Python<pre><code>import re\nfrom onnx import TensorProto\n\nreg = re.compile('^[0-9A-Z_]+$')\n\nvalues = {}\nfor att in sorted(dir(TensorProto)):\n    if att in {'DESCRIPTOR'}:\n        continue\n    if reg.match(att):\n        values[getattr(TensorProto, att)] = att\nfor i, att in sorted(values.items()):\n    si = str(i)\n    if len(si) == 1:\n        si = \" \" + si\n    print(\"%s: onnx.TensorProto.%s\" % (si, att))\n</code></pre> Bash<pre><code> 0: onnx.TensorProto.UNDEFINED\n 1: onnx.TensorProto.FLOAT\n 2: onnx.TensorProto.UINT8\n 3: onnx.TensorProto.INT8\n 4: onnx.TensorProto.UINT16\n 5: onnx.TensorProto.INT16\n 6: onnx.TensorProto.INT32\n 7: onnx.TensorProto.INT64\n 8: onnx.TensorProto.STRING\n 9: onnx.TensorProto.BOOL\n10: onnx.TensorProto.FLOAT16\n11: onnx.TensorProto.DOUBLE\n12: onnx.TensorProto.UINT32\n13: onnx.TensorProto.UINT64\n14: onnx.TensorProto.COMPLEX64\n15: onnx.TensorProto.COMPLEX128\n16: onnx.TensorProto.BFLOAT16\n17: onnx.TensorProto.FLOAT8E4M3FN\n18: onnx.TensorProto.FLOAT8E4M3FNUZ\n19: onnx.TensorProto.FLOAT8E5M2\n20: onnx.TensorProto.FLOAT8E5M2FNUZ\n21: onnx.TensorProto.UINT4\n22: onnx.TensorProto.INT4\n23: onnx.TensorProto.FLOAT4E2M1\n</code></pre> <p>ONNX \u662f\u5f3a\u7c7b\u578b\u7684\uff0c\u5176\u5b9a\u4e49\u7684\u53d8\u91cf\u4e0d\u652f\u6301\u9690\u5f0f\u8f6c\u6362\u3002\u5373\u4f7f\u5176\u4ed6\u8bed\u8a00\u652f\u6301\uff0c\u4e5f\u65e0\u6cd5\u6dfb\u52a0\u4e24\u4e2a\u4e0d\u540c\u7c7b\u578b\u7684\u5f20\u91cf\u6216\u77e9\u9635\u3002\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u5fc5\u987b\u5728\u56fe\u4e2d\u63d2\u5165\u663e\u5f0f\u8f6c\u6362\u7684\u539f\u56e0\u3002</p>"},{"location":"onnx/introduction/#_6","title":"\u7a00\u758f\u5f20\u91cf","text":"<p>\u7a00\u758f\u5f20\u91cf\u53ef\u7528\u4e8e\u8868\u793a\u5177\u6709\u8bb8\u591a\u7a7a\u503c\u7684\u6570\u7ec4\u3002ONNX \u652f\u6301\u4e8c\u7ef4 2D \u7a00\u758f\u5f20\u91cf\u3002<code>SparseTensorProto</code> \u7c7b\u5b9a\u4e49 <code>dims</code>\u3001<code>indices(int64)</code> \u548c<code>values</code> \u8fd9\u4e09\u4e2a\u5c5e\u6027\u3002</p>"},{"location":"onnx/introduction/#_7","title":"\u5176\u4ed6\u7c7b\u578b","text":"<p>\u9664\u4e86\u5f20\u91cf\u548c\u7a00\u758f\u5f20\u91cf\uff0cONNX \u8fd8\u901a\u8fc7 <code>SequenceProto</code> \u548c <code>MapProto</code> \u7c7b\u578b\u652f\u6301\u5f20\u91cf\u5e8f\u5217\u3001\u5f20\u91cf\u6620\u5c04\u3001\u5f20\u91cf\u6620\u5c04\u5e8f\u5217\u3002\u4e0d\u8fc7\u8fd9\u4e9b\u7c7b\u578b\u5f88\u5c11\u4f7f\u7528\u3002</p>"},{"location":"onnx/introduction/#opset","title":"\u4ec0\u4e48\u662f opset \u7248\u672c\uff1f","text":"<p><code>opset</code> \u53d8\u91cf\u88ab\u6620\u5c04\u5230 <code>onnx</code> \u5305\u7684\u7248\u672c\u3002\u6bcf\u6b21\u6b21\u7248 <code>minor</code> \u672c\u589e\u52a0\u65f6\uff0c <code>opset</code> \u90fd\u4f1a\u589e\u52a0\u3002\u6bcf\u4e2a\u7248\u672c\u90fd\u4f1a\u5e26\u6765\u66f4\u65b0\u6216\u65b0\u7684\u7b97\u5b50\u3002</p> Python<pre><code>import onnx\nprint(onnx.__version__, \" opset=\", onnx.defs.onnx_opset_version())\n</code></pre> Bash<pre><code>1.18.0  opset= 23\n</code></pre> <p>\u6bcf\u4e2a ONNX \u8ba1\u7b97\u56fe\u8fd8\u9644\u52a0\u4e86\u4e00\u4e2a <code>opset</code> \u53d8\u91cf\u503c\u3002\u8fd9\u662f\u4e00\u4e2a\u5168\u5c40\u4fe1\u606f\u3002\u5b83\u5b9a\u4e49\u4e86\u8ba1\u7b97\u56fe\u5185\u6240\u6709\u7b97\u5b50\u7684\u7248\u672c\u3002\u7b97\u5b50 <code>Add</code> \u5728\u7248\u672c 6\u30017\u300113 \u548c 14 \u4e2d\u8fdb\u884c\u4e86\u66f4\u65b0\u3002\u5982\u679c\u8ba1\u7b97\u56fe <code>opset</code>\u4e3a 15\uff0c\u5219\u8868\u793a\u7b97\u5b50 <code>Add</code> \u9075\u5faa\u89c4\u8303\u7248\u672c 14\u3002\u5982\u679c\u8ba1\u7b97\u56fe <code>opset</code>\u4e3a12\uff0c\u5219\u7b97\u5b50 <code>Add</code> \u9075\u5faa\u89c4\u8303\u7248\u672c 7\u3002\u8ba1\u7b97\u56fe\u4e2d\u7684\u7b97\u5b50\u9075\u5faa\u5c0f\u4e8e\uff08\u6216\u7b49\u4e8e\uff09\u5168\u5c40\u8ba1\u7b97\u56fe <code>opset</code> \u5b9a\u4e49\u7684\u7b97\u5b50\u7248\u672c\u3002</p> <p>\u4e00\u4e2a\u8ba1\u7b97\u56fe\u53ef\u80fd\u5305\u542b\u6765\u81ea\u591a\u4e2a\u57df\u7684\u7b97\u5b50\uff0c\u4f8b\u5982\u53ef\u80fd\u5305\u62ec <code>ai.onnx</code> \u548c <code>ai.onnx.ml</code> \u8fd9\u4e24\u4e2a\u57df\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u8ba1\u7b97\u56fe\u5fc5\u987b\u4e3a\u6bcf\u4e2a\u57df\u5b9a\u4e49\u4e00\u4e2a\u5168\u5c40\u7b97\u5b50\u96c6\u5408\u7248\u672c\u3002\u8be5\u89c4\u5219\u9002\u7528\u4e8e\u540c\u4e00\u57df\u5185\u7684\u6bcf\u4e2a\u7b97\u5b50\u3002</p>"},{"location":"onnx/introduction/#_8","title":"\u5b50\u56fe\u3001\u6d4b\u8bd5\u548c\u5faa\u73af","text":"<p>ONNX \u5b9e\u73b0\u6d4b\u8bd5\u548c\u5faa\u73af\u5f15\u7528\u3002\u5b83\u4eec\u90fd\u53ef\u4ee5\u5c06\u53e6\u4e00\u4e2a ONNX \u8ba1\u7b97\u56fe\u4f5c\u4e3a\u5f53\u524d\u8ba1\u7b97\u56fe\u7684\u4e00\u4e2a\u5c5e\u6027\u3002\u8fd9\u4e9b\u7ed3\u6784\u901a\u5e38\u5f88\u6162\u4e14\u5f88\u590d\u6742\u3002\u5982\u679c\u53ef\u80fd\u7684\u8bdd\uff0c\u6700\u597d\u907f\u514d\u4f7f\u7528\u5b83\u4eec\u3002</p>"},{"location":"onnx/introduction/#if","title":"If \u6761\u4ef6\u7b97\u5b50","text":"<p>If \u6761\u4ef6\u7b97\u5b50\u6839\u636e\u6761\u4ef6\u8bc4\u4f30\u60c5\u51b5\u6267\u884c\u4e24\u4e2a\u8ba1\u7b97\u56fe\u4e4b\u4e00\u3002</p> Bash<pre><code>If(condition) then\n    execute this ONNX graph (`then_branch`)\nelse\n    execute this ONNX graph (`else_branch`)\n</code></pre> <p>\u8fd9\u4e24\u4e2a\u8ba1\u7b97\u56fe\u53ef\u4ee5\u4f7f\u7528\u8ba1\u7b97\u56fe\u4e2d\u5df2\u7ecf\u8ba1\u7b97\u51fa\u7684\u4efb\u4f55\u7ed3\u679c\uff0c\u5e76\u4e14\u5fc5\u987b\u4ea7\u751f\u5b8c\u5168\u76f8\u540c\u6570\u91cf\u7684\u8f93\u51fa\u3002\u8fd9\u4e9b\u8f93\u51fa\u5c06\u662f\u6761\u4ef6\u7b97\u5b50 <code>If</code> \u7684\u8f93\u51fa\u3002</p> <p></p>"},{"location":"onnx/introduction/#scan","title":"\u626b\u63cf\u7b97\u5b50 Scan","text":"<p><code>Scan</code> \u7b97\u5b50\u5b9e\u73b0\u4e86\u5177\u6709\u56fa\u5b9a\u8fed\u4ee3\u6b21\u6570\u7684\u5faa\u73af\u3002\u5b83\u5faa\u73af\u904d\u5386\u8f93\u5165\u7684\u884c\uff08\u6216\u4efb\u4f55\u5176\u4ed6\u7ef4\u5ea6\uff09\u5e76\u6cbf\u540c\u4e00\u6570\u636e\u8f74\u8fde\u63a5\u8f93\u51fa\u3002\u8ba9\u6211\u4eec\u770b\u4e00\u4e2a\u5b9e\u73b0\u6210\u5bf9\u8ddd\u79bb \\(M(i, j) = \\|X_{i} - X_{j} \\|^{2}\\)\u7684\u793a\u4f8b\uff1a</p> <p></p> <p>\u5373\u4f7f\u6b64\u5faa\u73af\u6bd4\u6210\u5bf9\u8ddd\u79bb\u7684\u81ea\u5b9a\u4e49\u5b9e\u73b0\u6162\uff0c\u4f46\u5b83\u4ecd\u7136\u5f88\u9ad8\u6548\u3002\u5b83\u5047\u8bbe\u8f93\u5165\u548c\u8f93\u51fa\u90fd\u662f\u5f20\u91cf\uff0c\u5e76\u81ea\u52a8\u5c06\u6bcf\u6b21\u8fed\u4ee3\u7684\u8f93\u51fa\u8fde\u63a5\u6210\u5355\u4e2a\u5f20\u91cf\u3002\u4e0a\u4e00\u4e2a\u793a\u4f8b\u53ea\u6709\u4e00\u4e2a\uff0c\u4f46\u53ef\u4ee5\u6709\u591a\u4e2a\u3002</p>"},{"location":"onnx/introduction/#_9","title":"\u73af\u5f62","text":"<p>\u5faa\u73af\u7b97\u5b50 <code>Loop</code> \u5b9e\u73b0\u4e86 <code>for</code> \u548c <code>while</code> \u5faa\u73af\u3002\u5b83\u53ef\u4ee5\u6267\u884c\u56fa\u5b9a\u6570\u91cf\u7684\u8fed\u4ee3\u5668\u548c/\u6216\u5728\u6761\u4ef6\u4e0d\u518d\u6ee1\u8db3\u65f6\u7ed3\u675f\u3002\u8f93\u51fa\u4ee5\u4e24\u79cd\u4e0d\u540c\u7684\u65b9\u5f0f\u5904\u7406\u3002\u7b2c\u4e00\u79cd\u7c7b\u4f3c\u4e8e\u5faa\u73afScan\uff0c\u8f93\u51fa\u88ab\u8fde\u63a5\u6210\u5f20\u91cf\uff08\u6cbf\u7b2c\u4e00\u4e2a\u7ef4\u5ea6\uff09\u3002\u8fd9\u4e5f\u610f\u5473\u7740\u8fd9\u4e9b\u8f93\u51fa\u5fc5\u987b\u5177\u6709\u517c\u5bb9\u7684\u5f62\u72b6shape\u3002\u7b2c\u4e8c\u79cd\u673a\u5236\u5c06\u5f20\u91cf\u8fde\u63a5\u6210\u5f20\u91cf\u5e8f\u5217\u3002</p>"},{"location":"onnx/introduction/#_10","title":"\u53ef\u6269\u5c55\u6027","text":"<p>ONNX\u5b9a\u4e49\u4e86\u4e00\u7cfb\u5217\u7b97\u5b50\u4f5c\u4e3a\u6807\u51c6\uff1aONNX \u7b97\u5b50\u3002\u4f46\u662f\uff0c\u5728\u8fd9\u4e2a\u57df\u4e0b\u5b9a\u4e49\u81ea\u5df1\u7684\u7b97\u5b50\u6216\u65b0\u7b97\u5b50\u4e5f\u662f\u5b8c\u5168\u6709\u53ef\u80fd\u7684\u3002<code>onnxruntime</code> \u5b9a\u4e49\u4e86\u81ea\u5b9a\u4e49\u8fd0\u7b97\u7b26\u6765\u6539\u8fdb\u63a8\u7406\u3002\u6bcf\u4e2a\u8282\u70b9\u90fd\u6709\u4e00\u4e2a\u7c7b\u578b\u3001\u4e00\u4e2a\u540d\u79f0\u3001\u547d\u540d\u7684\u8f93\u5165\u548c\u8f93\u51fa\u4ee5\u53ca\u5c5e\u6027\u3002\u53ea\u8981\u5728\u8fd9\u4e9b\u7ea6\u675f\u4e0b\u63cf\u8ff0\u8282\u70b9\uff0c\u5c31\u53ef\u4ee5\u5c06\u8282\u70b9\u6dfb\u52a0\u5230\u4efb\u4f55 ONNX \u56fe\u4e2d\u3002</p> <p>\u6210\u5bf9\u8ddd\u79bb\u53ef\u4ee5\u7528 Scan \u7b97\u5b50\u5b9e\u73b0\u3002\u4f46\u662f\uff0c\u4e13\u7528\u8fd0\u7b97\u7b26 CDist \u88ab\u8bc1\u660e\u901f\u5ea6\u660e\u663e\u66f4\u5feb\uff0c\u5feb\u5230\u503c\u5f97\u4e3a\u5b83\u5b9e\u73b0\u4e13\u7528\u7684\u8fd0\u884c\u65f6\u3002</p>"},{"location":"onnx/introduction/#_11","title":"\u51fd\u6570","text":"<p>\u51fd\u6570\u662f\u6269\u5c55 ONNX \u89c4\u8303\u7684\u4e00\u79cd\u65b9\u5f0f\u3002\u67d0\u4e9b\u6a21\u578b\u9700\u8981\u76f8\u540c\u7684\u7b97\u5b50\u7ec4\u5408\u3002\u53ef\u4ee5\u901a\u8fc7\u521b\u5efa\u4e00\u4e2a\u4f7f\u7528\u73b0\u6709 ONNX \u7b97\u5b50\u5b9a\u4e49\u7684\u51fd\u6570\u6765\u907f\u514d\u8fd9\u79cd\u60c5\u51b5\u3002\u4e00\u65e6\u5b9a\u4e49\uff0c\u51fd\u6570\u7684\u884c\u4e3a\u5c31\u4e0e\u4efb\u4f55\u5176\u4ed6\u7b97\u5b50\u4e00\u6837\u3002\u5b83\u5177\u6709\u8f93\u5165\u3001\u8f93\u51fa\u548c\u5c5e\u6027\u3002</p> <p>\u4f7f\u7528\u51fd\u6570\u6709\u4e24\u4e2a\u4f18\u70b9\u3002\u7b2c\u4e00\u4e2a\u4f18\u70b9\u662f\u4ee3\u7801\u66f4\u77ed\uff0c\u66f4\u6613\u4e8e\u9605\u8bfb\u3002\u7b2c\u4e8c\u4e2a\u4f18\u70b9\u662f\u4efb\u4f55 onnxruntime \u90fd\u53ef\u4ee5\u5229\u7528\u8be5\u4fe1\u606f\u66f4\u5feb\u5730\u8fd0\u884c\u9884\u6d4b\u3002\u8fd0\u884c\u65f6\u53ef\u4ee5\u5bf9\u51fd\u6570\u8fdb\u884c\u7279\u5b9a\u5b9e\u73b0\uff0c\u800c\u4e0d\u4f9d\u8d56\u4e8e\u73b0\u6709\u8fd0\u7b97\u7b26\u7684\u5b9e\u73b0\u3002</p>"},{"location":"onnx/introduction/#_12","title":"\u5f62\u72b6\uff08\u548c\u7c7b\u578b\uff09\u63a8\u65ad","text":"<p>\u4e86\u89e3\u7ed3\u679c\u7684\u5f62\u72b6shape\u5bf9\u4e8e\u6267\u884c ONNX \u8ba1\u7b97\u56fe\u6765\u8bf4\u5e76\u4e0d\u662f\u5fc5\u9700\u7684\uff0c\u4f46\u53ef\u4ee5\u4f7f\u7528\u6b64\u4fe1\u606f\u6765\u52a0\u5feb\u6267\u884c\u901f\u5ea6\u3002\u5982\u679c\u60a8\u6709\u4ee5\u4e0b\u56fe\u8868\uff1a</p> Python<pre><code>Add(x, y) -&gt; z\nAbs(z) -&gt; w\n</code></pre> <p>\u5982\u679cx\u548cy\u5177\u6709\u76f8\u540c\u7684\u5f62\u72b6\uff0c\u5219z\u548cw\u4e5f\u5177\u6709\u76f8\u540c\u7684\u5f62\u72b6\u3002\u77e5\u9053\u8fd9\u4e00\u70b9\u540e\uff0c\u5c31\u53ef\u4ee5\u91cd\u7528\u4e3az\u5206\u914d\u7684\u7f13\u51b2\u533a\uff0c\u4ee5\u5c31\u5730\u8ba1\u7b97\u7edd\u5bf9\u503cw\u3002\u5f62\u72b6\u63a8\u65ad\u6709\u52a9\u4e8e\u8fd0\u884c\u65f6\u7ba1\u7406\u5185\u5b58\uff0c\u4ece\u800c\u63d0\u9ad8\u6548\u7387\u3002</p> <p>ONNX \u5305\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u53ef\u4ee5\u5728\u77e5\u9053\u6bcf\u4e2a\u6807\u51c6\u8fd0\u7b97\u7b26\u7684\u8f93\u5165\u5f62\u72b6\u7684\u60c5\u51b5\u4e0b\u8ba1\u7b97\u8f93\u51fa\u5f62\u72b6\u3002\u5bf9\u4e8e\u5b98\u65b9\u5217\u8868\u4e4b\u5916\u7684\u4efb\u4f55\u81ea\u5b9a\u4e49\u8fd0\u7b97\u7b26\uff0c\u5b83\u663e\u7136\u65e0\u6cd5\u505a\u5230\u8fd9\u4e00\u70b9\u3002</p>"},{"location":"onnx/introduction/#_13","title":"\u5de5\u5177","text":"<p>netron \u975e\u5e38\u6709\u52a9\u4e8e\u53ef\u89c6\u5316 ONNX \u8ba1\u7b97\u56fe\u3002\u8fd9\u662f\u552f\u4e00\u4e00\u6b3e\u65e0\u9700\u7f16\u7a0b\u7684\u5de5\u5177\u3002\u7b2c\u4e00\u4e2a\u5c4f\u5e55\u622a\u56fe\u5c31\u662f\u7528\u8fd9\u4e2a\u5de5\u5177\u5236\u4f5c\u7684\u3002</p> <p></p> <p>onnx2py.py \u4ece ONNX \u8ba1\u7b97\u56fe\u521b\u5efa\u4e00\u4e2a python \u6587\u4ef6\u3002\u6b64\u811a\u672c\u53ef\u4ee5\u521b\u5efa\u76f8\u540c\u7684\u8ba1\u7b97\u56fe\u3002\u7528\u6237\u53ef\u4ee5\u4fee\u6539\u5b83\u6765\u66f4\u6539\u8ba1\u7b97\u56fe\u3002</p> <p>zetane \u53ef\u4ee5\u52a0\u8f7d onnx \u6a21\u578b\u5e76\u5728\u6a21\u578b\u6267\u884c\u65f6\u663e\u793a\u4e2d\u95f4\u7ed3\u679c\u3002</p>"},{"location":"onnx/onnx_with_python/","title":"Python \u5904\u7406 ONNX","text":"<p>\u4f5c\u8005\uff1a\u718a\u54c8\u54c8</p> <p>\u90ae\u7bb1: 915574300@qq.com</p>"},{"location":"onnx/onnx_with_python/#_1","title":"\u80cc\u666f","text":"<p>\u63a5\u4e0b\u6765\u7684\u90e8\u5206\uff0c\u91cd\u70b9\u4ecb\u7ecd\u4e86\u5982\u4f55\u4f7f\u7528 <code>onnx</code> \u5305\u63d0\u4f9b\u7684Python API \u6765\u6784\u5efa ONNX \u8ba1\u7b97\u56fe\u6240\u7528\u5230\u7684\u4e3b\u8981\u51fd\u6570\u3002</p>"},{"location":"onnx/onnx_with_python/#_2","title":"\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\uff1a\u7ebf\u6027\u56de\u5f52","text":""},{"location":"onnx/onnx_with_python/#_3","title":"\u7ebf\u6027\u56de\u5f52\u6a21\u578b","text":"<p>\u7ebf\u6027\u56de\u5f52\u662f\u673a\u5668\u5b66\u4e60\u4e2d\u6700\u7b80\u5355\u7684\u6a21\u578b\uff0c\u4ee5\u4e0b\u6570\u5b66\u8868\u8fbe\u5f0f\u63cf\u8ff0\u4e86\u4e00\u4e2a\u7ebf\u6027\u56de\u5f52\u6a21\u578b: \\(Y = X * A + B\\) \u6211\u4eec\u53ef\u4ee5\u628a\u8fd9\u4e2a\u6a21\u578b\u770b\u4f5c\u4e00\u4e2a\u4e09\u53d8\u91cf\u7684\u51fd\u6570 \\(Y = f(X, A, B)\\)\uff0c\u5bf9\u5e94\u7684 ONNX \u8868\u8fbe\u5f0f\u4e3a <code>y = Add(MatMul(X, A), B)</code>\u3002\u8fd9\u5c31\u662f\u6211\u4eec\u9700\u8981\u7528 ONNX \u7b97\u5b50\u8868\u793a\u7684\u5185\u5bb9\u3002\u7b2c\u4e00\u4ef6\u4e8b\u662f\u7528 ONNX \u7b97\u5b50\u5b9e\u73b0\u4e00\u4e2a\u51fd\u6570\u3002ONNX \u662f\u5f3a\u7c7b\u578b\u7684\u3002\u5fc5\u987b\u4e3a\u51fd\u6570\u7684 \u8f93\u5165 \u548c \u8f93\u51fa \u8282\u70b9\u5b9a\u4e49\u5f62\u72b6(shape)\u548c\u7c7b\u578b(type)\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u6211\u4eec\u5728 <code>make_function</code> \u51fd\u6570\u4e2d\u9700\u8981\u7528\u56db\u4e2a\u51fd\u6570\u6765\u6784\u5efa\u8ba1\u7b97\u56fe\u3002</p> <ul> <li> <p><code>make_tensor_value_info</code>\uff1a\u6839\u636e\u5f62\u72b6shape\u548c\u7c7b\u578btype\u58f0\u660e\u4e00\u4e2a\u53d8\u91cf\uff08\u8f93\u5165\u6216\u8f93\u51fa\uff09</p> </li> <li> <p><code>make_node</code>\uff1a\u521b\u5efa\u4e00\u4e2a\u7531\u7b97\u5b50\uff08\u7b97\u5b50\u7c7b\u578b\uff09\u3001\u5176\u8f93\u5165\u548c\u8f93\u51fa\u5b9a\u4e49\u7684\u8282\u70b9</p> </li> <li> <p><code>make_graph</code>\uff1a\u4f7f\u7528\u524d\u4e24\u4e2a\u51fd\u6570\u521b\u5efa\u7684\u5bf9\u8c61\u521b\u5efa ONNX \u8ba1\u7b97\u56fe</p> </li> <li> <p><code>make_model</code>\uff1a\u5c06\u8ba1\u7b97\u56fe\u548c\u9644\u52a0\u5143\u6570\u636e\u878d\u5408\u5728\u4e00\u8d77</p> </li> </ul> <p>\u5728\u521b\u5efa\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u4e3a\u8ba1\u7b97\u56fe\u7684\u6bcf\u4e2a\u8282\u70b9\u7684\u6bcf\u4e2a\u8f93\u5165\u3001\u8f93\u51fa\u547d\u540d\u3002\u8ba1\u7b97\u56fe\u7684\u8f93\u5165\u548c\u8f93\u51fa\u7531 onnx \u5bf9\u8c61\u5b9a\u4e49\uff0c\u5b57\u7b26\u4e32\u7528\u4e8e\u5f15\u7528\u4e2d\u95f4\u7ed3\u679c\u3002\u6784\u5efa\u7684\u8fc7\u7a0b\u5982\u4e0b\u6240\u8ff0\u3002</p>"},{"location":"onnx/onnx_with_python/#onnx","title":"onnx \u4ee3\u7801\u5b9e\u73b0","text":"onnx\u5b9e\u73b0\u7684\u7ebf\u6027\u56de\u5f52\u6a21\u578b Python<pre><code># imports\n\nfrom onnx import TensorProto\nfrom onnx.helper import (\n    make_model, make_node, make_graph,\n    make_tensor_value_info)\nfrom onnx.checker import check_model\n\n# \u7b2c\u4e00\u6b65\uff1a\u6784\u5efa\u6574\u4e2a\u8ba1\u7b97\u56fe\u6240\u6709\u7684\u53d8\u91cf\n# inputs\n\n# 'X' is the name, TensorProto.FLOAT the type, [None, None] the shape\nX = make_tensor_value_info('X', TensorProto.FLOAT, [None, None])\nA = make_tensor_value_info('A', TensorProto.FLOAT, [None, None])\nB = make_tensor_value_info('B', TensorProto.FLOAT, [None, None])\n\n# outputs, the shape is left undefined\n\nY = make_tensor_value_info('Y', TensorProto.FLOAT, [None])\n\n# \u7b2c\u4e8c\u6b65\uff1a\u6839\u636e\u53d8\u91cf\u6784\u5efa\u6240\u6709\u7684\u8282\u70b9\n# nodes\n\n# It creates a node defined by the operator type MatMul,\n# 'X', 'A' are the inputs of the node, 'XA' the output.\nnode1 = make_node('MatMul', ['X', 'A'], ['XA'])\nnode2 = make_node('Add', ['XA', 'B'], ['Y'])\n\n# \u7b2c\u4e09\u6b65\uff1a\u6839\u636e\u8282\u70b9\u6784\u5efa\u8ba1\u7b97\u56fe\n# from nodes to graph\n# the graph is built from the list of nodes, the list of inputs,\n# the list of outputs and a name.\n\ngraph = make_graph([node1, node2],  # nodes\n                    'lr',  # a name\n                    [X, A, B],  # inputs\n                    [Y])  # outputs\n\n# \u7b2c\u56db\u6b65\uff1a\u6839\u636e\u8ba1\u7b97\u56fe\u7b49\u5176\u4ed6\u4fe1\u606f\uff0c\u6784\u5efa\u4e00\u4e2aonnx\u6a21\u578b\n# onnx graph\n# there is no metadata in this case.\n\nonnx_model = make_model(graph)\n\n# \u7b2c\u4e94\u6b65\uff1a\u5bf9\u6a21\u578b\u8fdb\u884c\u6821\u9a8c\n# Let's check the model is consistent,\n# this function is described in section\n# Checker and Shape Inference.\ncheck_model(onnx_model)\n\n# the work is done, let's display it...\nprint(onnx_model)\n</code></pre> <p><code>#################################################################################</code> <code>#################################\u5b8c\u7f8e\u7684\u5206\u5272\u7ebf######################################</code> <code>#################################################################################</code></p>  onnx\u5b9e\u73b0\u7684\u7ebf\u6027\u56de\u5f52\u6a21\u578b\u7f51\u7edc\u7ed3\u679c\uff1ajson\u683c\u5f0f  Text Only<pre><code>ir_version: 11\ngraph {\n  node {\n    input: \"X\"\n    input: \"A\"\n    output: \"XA\"\n    op_type: \"MatMul\"\n  }\n  node {\n    input: \"XA\"\n    input: \"B\"\n    output: \"Y\"\n    op_type: \"Add\"\n  }\n  name: \"lr\"\n  input {\n    name: \"X\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n          dim {\n          }\n        }\n      }\n    }\n  }\n  input {\n    name: \"A\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n          dim {\n          }\n        }\n      }\n    }\n  }\n  input {\n    name: \"B\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n          dim {\n          }\n        }\n      }\n    }\n  }\n  output {\n    name: \"Y\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n        }\n      }\n    }\n  }\n}\nopset_import {\n  version: 23\n}\n</code></pre>"},{"location":"onnx/onnx_with_python/#_4","title":"\u53ef\u89c6\u5316\u663e\u793a","text":"<p>\u4e0a\u8ff0\u7684\u8ba1\u7b97\u56fe\u53ef\u89c6\u5316\u7684\u8868\u793a\u5982\u4e0b\u6240\u793a\uff1a</p> <p></p>"},{"location":"onnx/onnx_with_python/#-shape","title":"\u7279\u6b8a\u8282\u70b9-\u5f62\u72b6shape\u4e3a\u7a7a","text":"<p>\u7a7a\u5f62\u72b6 (shape\u4e3aNone) \u8868\u793a\u4efb\u610f\u5f62\u72b6\uff0c\u5b9a\u4e49\u4e3a <code>[None, None]</code> \u7684\u5f62\u72b6\uff0c\u8868\u793a\u6b64\u5bf9\u8c61\u662f\u4e8c\u7ef4\u5f20\u91cf\uff0c\u65e0\u9700\u8fdb\u4e00\u6b65\u7684\u7cbe\u5ea6\u9650\u5236\u3002\u8fd8\u53ef\u4ee5\u901a\u8fc7\u67e5\u770b\u56fe\u4e2d\u6bcf\u4e2a\u5bf9\u8c61\u7684\u5b57\u6bb5\u6765\u68c0\u67e5 ONNX \u56fe\u3002</p>"},{"location":"onnx/onnx_with_python/#_5","title":"\u6709\u7a7a\u5f62\u72b6\u8282\u70b9\u8ba1\u7b97\u56fe\u6784\u56fe\u4ee3\u7801","text":"\u7a7a\u5f62\u72b6\u8ba1\u7b97\u56fe  Python<pre><code>from onnx import TensorProto\nfrom onnx.helper import (\n    make_model, make_node, make_graph,\n    make_tensor_value_info)\nfrom onnx.checker import check_model\n\ndef shape2tuple(shape):\n    return tuple(getattr(d, 'dim_value', 0) for d in shape.dim)\n\nX = make_tensor_value_info('X', TensorProto.FLOAT, [None, None])\nA = make_tensor_value_info('A', TensorProto.FLOAT, [None, None])\nB = make_tensor_value_info('B', TensorProto.FLOAT, [None, None])\nY = make_tensor_value_info('Y', TensorProto.FLOAT, [None])\nnode1 = make_node('MatMul', ['X', 'A'], ['XA'])\nnode2 = make_node('Add', ['XA', 'B'], ['Y'])\ngraph = make_graph([node1, node2], 'lr', [X, A, B], [Y])\nonnx_model = make_model(graph)\ncheck_model(onnx_model)\n\n# the list of inputs\nprint('** inputs **')\nprint(onnx_model.graph.input)\n\n# in a more nicely format\nprint('** inputs **')\nfor obj in onnx_model.graph.input:\n    print(\"name=%r dtype=%r shape=%r\" % (\n        obj.name, obj.type.tensor_type.elem_type,\n        shape2tuple(obj.type.tensor_type.shape)))\n\n# the list of outputs\nprint('** outputs **')\nprint(onnx_model.graph.output)\n\n# in a more nicely format\nprint('** outputs **')\nfor obj in onnx_model.graph.output:\n    print(\"name=%r dtype=%r shape=%r\" % (\n        obj.name, obj.type.tensor_type.elem_type,\n        shape2tuple(obj.type.tensor_type.shape)))\n\n# the list of nodes\nprint('** nodes **')\nprint(onnx_model.graph.node)\n\n# in a more nicely format\nprint('** nodes **')\nfor node in onnx_model.graph.node:\n    print(\"name=%r type=%r input=%r output=%r\" % (\n        node.name, node.op_type, node.input, node.output))\n</code></pre>  \u6253\u5370json\u683c\u5f0f\u7684onnx\u8ba1\u7b97\u56fe Bash<pre><code>** inputs **\n[name: \"X\"\ntype {\n  tensor_type {\n    elem_type: 1\n    shape {\n      dim {\n      }\n      dim {\n      }\n    }\n  }\n}\n, name: \"A\"\ntype {\n  tensor_type {\n    elem_type: 1\n    shape {\n      dim {\n      }\n      dim {\n      }\n    }\n  }\n}\n, name: \"B\"\ntype {\n  tensor_type {\n    elem_type: 1\n    shape {\n      dim {\n      }\n      dim {\n      }\n    }\n  }\n}\n]\n** inputs **\nname='X' dtype=1 shape=(0, 0)\nname='A' dtype=1 shape=(0, 0)\nname='B' dtype=1 shape=(0, 0)\n** outputs **\n[name: \"Y\"\ntype {\n  tensor_type {\n    elem_type: 1\n    shape {\n      dim {\n      }\n    }\n  }\n}\n]\n** outputs **\nname='Y' dtype=1 shape=(0,)\n** nodes **\n[input: \"X\"\ninput: \"A\"\noutput: \"XA\"\nop_type: \"MatMul\"\n, input: \"XA\"\ninput: \"B\"\noutput: \"Y\"\nop_type: \"Add\"\n]\n** nodes **\nname='' type='MatMul' input=['X', 'A'] output=['XA']\nname='' type='Add' input=['XA', 'B'] output=['Y']\n</code></pre>"},{"location":"onnx/onnx_with_python/#_6","title":"\u5176\u4ed6","text":"<p>\u5f20\u91cf \u7c7b\u578b \u662f\u6574\u6570\uff08=1\uff09\u3002\u8f85\u52a9\u51fd\u6570 <code>onnx.helper.tensor_dtype_to_np_dtype()</code> \u7ed9\u51fa\u4e86 <code>numpy</code> \u5bf9\u5e94\u7c7b\u578b\u7684\u6620\u5c04\u5173\u7cfb\u3002</p> Python<pre><code>from onnx import TensorProto\nfrom onnx.helper import tensor_dtype_to_np_dtype, tensor_dtype_to_string\n\nnp_dtype = tensor_dtype_to_np_dtype(TensorProto.FLOAT)\nprint(f\"The converted numpy dtype for {tensor_dtype_to_string(TensorProto.FLOAT)} is {np_dtype}.\")\n</code></pre> Bash<pre><code>The converted numpy dtype for TensorProto.FLOAT is float32.\n</code></pre>"},{"location":"onnx/onnx_with_python/#_7","title":"\u5e8f\u5217\u5316","text":"<p>ONNX \u5efa\u7acb\u5728 protobuf \u4e4b\u4e0a\u3002ONNX \u6dfb\u52a0\u4e86\u63cf\u8ff0\u673a\u5668\u5b66\u4e60\u6a21\u578b\u6240\u9700\u7684\u5b9a\u4e49\u3002\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0cONNX \u7528\u4e8e\u5e8f\u5217\u5316\u6216\u53cd\u5e8f\u5217\u5316\u4e00\u4e2a\u6a21\u578b\u6a21\u578b\u3002\u7b2c\u4e00\u90e8\u5206\u89e3\u51b3\u4e86\u8fd9\u4e00\u9700\u6c42\uff08\u5982\u4f55\u63cf\u8ff0\u673a\u5668\u5b66\u4e60\u6a21\u578b\uff09\u3002\u7b2c\u4e8c\u90e8\u5206\u4ecb\u7ecd\u4e86\u5f20\u91cf\u3001\u7a00\u758f\u5f20\u91cf\u7b49\u6570\u636e\u7684\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\u3002</p>"},{"location":"onnx/onnx_with_python/#_8","title":"\u6a21\u578b\u5e8f\u5217\u5316","text":"<p>\u9700\u8981\u4fdd\u5b58\u6a21\u578b\u624d\u80fd\u90e8\u7f72\u3002ONNX \u57fa\u4e8e protobuf\u3002\u5b83\u6700\u5927\u9650\u5ea6\u5730\u51cf\u5c11\u4e86\u5728\u78c1\u76d8\u4e0a\u4fdd\u5b58\u56fe\u5f62\u6240\u9700\u7684\u7a7a\u95f4\u3002onnx \u4e2d\u7684\u6bcf\u4e2a\u5bf9\u8c61\uff08\u53c2\u89c1Protos\uff09\u90fd\u53ef\u4ee5\u4f7f\u7528\u65b9\u6cd5 <code>SerializeToString</code> \u5e8f\u5217\u5316\u3002\u6574\u4e2a\u6a21\u578b\u4e5f\u53ef\u4ee5\u64cd\u4f5c\u3002</p>  \u6a21\u578b\u5e8f\u5217\u5316  Python<pre><code>from onnx import TensorProto\nfrom onnx.helper import (\n    make_model, make_node, make_graph,\n    make_tensor_value_info)\nfrom onnx.checker import check_model\n\ndef shape2tuple(shape):\n    return tuple(getattr(d, 'dim_value', 0) for d in shape.dim)\n\nX = make_tensor_value_info('X', TensorProto.FLOAT, [None, None])\nA = make_tensor_value_info('A', TensorProto.FLOAT, [None, None])\nB = make_tensor_value_info('B', TensorProto.FLOAT, [None, None])\nY = make_tensor_value_info('Y', TensorProto.FLOAT, [None])\nnode1 = make_node('MatMul', ['X', 'A'], ['XA'])\nnode2 = make_node('Add', ['XA', 'B'], ['Y'])\ngraph = make_graph([node1, node2], 'lr', [X, A, B], [Y])\nonnx_model = make_model(graph)\ncheck_model(onnx_model)\n\n# The serialization\nwith open(\"linear_regression.onnx\", \"wb\") as f:\n    f.write(onnx_model.SerializeToString())\n\n# display\nprint(onnx_model)\n</code></pre>  \u6a21\u578b\u5e8f\u5217\u5316\u4e4b\u540e\u8f93\u51fa\u7684\u5185\u5bb9\uff1ajson\u683c\u5f0f Bash<pre><code>ir_version: 11\ngraph {\n  node {\n    input: \"X\"\n    input: \"A\"\n    output: \"XA\"\n    op_type: \"MatMul\"\n  }\n  node {\n    input: \"XA\"\n    input: \"B\"\n    output: \"Y\"\n    op_type: \"Add\"\n  }\n  name: \"lr\"\n  input {\n    name: \"X\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n          dim {\n          }\n        }\n      }\n    }\n  }\n  input {\n    name: \"A\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n          dim {\n          }\n        }\n      }\n    }\n  }\n  input {\n    name: \"B\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n          dim {\n          }\n        }\n      }\n    }\n  }\n  output {\n    name: \"Y\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n        }\n      }\n    }\n  }\n}\nopset_import {\n  version: 23\n}\n</code></pre> <p>\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b <code>load</code> \u51fd\u6570\u6062\u590d\u8ba1\u7b97\uff1a Python<pre><code>from onnx import load\n\nwith open(\"linear_regression.onnx\", \"rb\") as f:\n    onnx_model = load(f)\n\n# display\nprint(onnx_model)\n</code></pre></p>  \u53cd\u5e8f\u5217\u5316\u4e4b\u540e\u7684onnx\u6a21\u578b: json\u683c\u5f0f  Text Only<pre><code>ir_version: 11\ngraph {\n  node {\n    input: \"X\"\n    input: \"A\"\n    output: \"XA\"\n    op_type: \"MatMul\"\n  }\n  node {\n    input: \"XA\"\n    input: \"B\"\n    output: \"Y\"\n    op_type: \"Add\"\n  }\n  name: \"lr\"\n  input {\n    name: \"X\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n          dim {\n          }\n        }\n      }\n    }\n  }\n  input {\n    name: \"A\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n          dim {\n          }\n        }\n      }\n    }\n  }\n  input {\n    name: \"B\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n          dim {\n          }\n        }\n      }\n    }\n  }\n  output {\n    name: \"Y\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n        }\n      }\n    }\n  }\n}\nopset_import {\n  version: 23\n}\n</code></pre> <p>\u770b\u8d77\u6765\u5b8c\u5168\u4e00\u6837\u3002\u4efb\u4f55\u6a21\u578b\u90fd\u53ef\u4ee5\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u5e8f\u5217\u5316\uff0c \u9664\u975e\u5b83\u4eec\u5927\u4e8e 2 Gb \u3002protobuf \u7684\u5927\u5c0f\u9650\u5236\u5c0f\u4e8e\u6b64\u9608\u503c\u3002\u4e0b\u4e00\u8282\u5c06\u5c55\u793a\u5982\u4f55\u514b\u670d\u8be5\u9650\u5236\u3002</p> <p><code>#################################################################################</code> <code>###############################onnx\u5751\u7239\u7684\u5730\u65b9\uff0c\u6a21\u578b\u7a7a\u95f4 2G \u9650\u5236######################</code> <code>###############################onnx\u5751\u7239\u7684\u5730\u65b9\uff0c\u6a21\u578b\u7a7a\u95f4 2G \u9650\u5236######################</code> <code>###############################onnx\u5751\u7239\u7684\u5730\u65b9\uff0c\u6a21\u578b\u7a7a\u95f4 2G \u9650\u5236######################</code> <code>#################################################################################</code></p>"},{"location":"onnx/onnx_with_python/#_9","title":"\u6570\u636e\u5e8f\u5217\u5316","text":"<p>\u5f20\u91cf\u7684\u5e8f\u5217\u5316\u901a\u5e38\u5982\u4e0b\u8fdb\u884c\uff1a</p> Python<pre><code>import numpy\nfrom onnx.numpy_helper import from_array\n\nnumpy_tensor = numpy.array([0, 1, 4, 5, 3], dtype=numpy.float32)\nprint(type(numpy_tensor))\n\nonnx_tensor = from_array(numpy_tensor)\nprint(type(onnx_tensor))\n\nserialized_tensor = onnx_tensor.SerializeToString()\nprint(type(serialized_tensor))\n\nwith open(\"saved_tensor.pb\", \"wb\") as f:\n    f.write(serialized_tensor)\n</code></pre> Bash<pre><code>&lt;class 'numpy.ndarray'&gt;\n&lt;class 'onnx.onnx_ml_pb2.TensorProto'&gt;\n&lt;class 'bytes'&gt;\n</code></pre> <p>\u53cd\u5e8f\u5217\u5316\u5982\u4e0b\uff1a</p> Python<pre><code>from onnx import TensorProto\nfrom onnx.numpy_helper import to_array\n\nwith open(\"saved_tensor.pb\", \"rb\") as f:\n    serialized_tensor = f.read()\nprint(type(serialized_tensor))\n\nonnx_tensor = TensorProto()\nonnx_tensor.ParseFromString(serialized_tensor)\nprint(type(onnx_tensor))\n\nnumpy_tensor = to_array(onnx_tensor)\nprint(numpy_tensor)\n</code></pre> <p>Bash<pre><code>&lt;class 'bytes'&gt;\n&lt;class 'onnx.onnx_ml_pb2.TensorProto'&gt;\n[0. 1. 4. 5. 3.]\n</code></pre> \u76f8\u540c\u7684\u6a21\u5f0f\u53ef\u7528\u4e8eTensorProto \uff08\u4f46\u4e0d\u9650\u4e8e\uff09 \uff1a Python<pre><code>import onnx\nimport pprint\npprint.pprint([p for p in dir(onnx)\n               if p.endswith('Proto') and p[0] != '_'])\n</code></pre></p> Bash<pre><code>['AttributeProto',\n 'FunctionProto',\n 'GraphProto',\n 'MapProto',\n 'ModelProto',\n 'NodeProto',\n 'OperatorProto',\n 'OperatorSetIdProto',\n 'OperatorSetProto',\n 'OptionalProto',\n 'SequenceProto',\n 'SparseTensorProto',\n 'StringStringEntryProto',\n 'TensorProto',\n 'TensorShapeProto',\n 'TrainingInfoProto',\n 'TypeProto',\n 'ValueInfoProto']\n</code></pre> <p>\u8be5\u4ee3\u7801\u53ef\u4ee5\u901a\u8fc7\u51fd\u6570 <code>load_tensor_from_string</code> \u7b80\u5316 \uff08\u53c2\u89c1\u52a0\u8f7d Proto\uff09\u3002</p> Python<pre><code>from onnx import load_tensor_from_string\n\nwith open(\"saved_tensor.pb\", \"rb\") as f:\n    serialized = f.read()\nproto = load_tensor_from_string(serialized)\nprint(type(proto))\n</code></pre> Bash<pre><code>&lt;class 'onnx.onnx_ml_pb2.TensorProto'&gt;\n</code></pre>"},{"location":"onnx/onnx_with_python/#_10","title":"\u521d\u59cb\u5316\u7a0b\u5e8f\uff0c\u9ed8\u8ba4\u503c","text":"<p>\u524d\u4e00\u4e2a\u6a21\u578b\u5047\u8bbe\u7ebf\u6027\u56de\u5f52\u7684\u7cfb\u6570\u4e5f\u662f\u6a21\u578b\u7684\u8f93\u5165\u3002\u8fd9\u4e0d\u592a\u65b9\u4fbf\u3002\u5b83\u4eec\u5e94\u8be5\u662f\u6a21\u578b\u672c\u8eab\u7684\u4e00\u90e8\u5206\uff0c\u4f5c\u4e3a\u5e38\u91cf\u6216\u521d\u59cb\u5316\u5668\uff0c\u4ee5\u9075\u5faa onnx \u8bed\u4e49\u3002\u4e0b\u4e00\u4e2a\u793a\u4f8b\u6a21\u578b\u4fee\u6539\u4e86\u524d\u4e00\u4e2a\u793a\u4f8b\uff0c\u5c06\u8f93\u5165 A \u548c B \u66f4\u6539\u4e3a\u521d\u59cb\u5316\u5668\u3002<code>onnx</code> \u5305\u5b9e\u73b0\u4e86\u4e24\u4e2a\u51fd\u6570\uff0c\u7528\u4e8e\u4ece <code>numpy</code> \u4e0e <code>onnx</code> \u4e4b\u95f4\u76f8\u4e92\u8f6c\u6362\uff08\u53c2\u89c1\u6570\u7ec4\uff09\u3002</p> <ul> <li> <p><code>onnx.numpy_helper.to_array</code>\uff1a\u4ece onnx \u8f6c\u6362\u4e3a numpy</p> </li> <li> <p><code>onnx.numpy_helper.from_array</code>\uff1a\u4ece numpy \u8f6c\u6362\u4e3a onnx</p> </li> </ul> Python<pre><code>import numpy\nfrom onnx import numpy_helper, TensorProto\nfrom onnx.helper import (\n    make_model, make_node, make_graph,\n    make_tensor_value_info)\nfrom onnx.checker import check_model\n\n# initializers\nvalue = numpy.array([0.5, -0.6], dtype=numpy.float32)\nA = numpy_helper.from_array(value, name='A')\n\nvalue = numpy.array([0.4], dtype=numpy.float32)\nC = numpy_helper.from_array(value, name='C')\n\n# the part which does not change\nX = make_tensor_value_info('X', TensorProto.FLOAT, [None, None])\nY = make_tensor_value_info('Y', TensorProto.FLOAT, [None])\nnode1 = make_node('MatMul', ['X', 'A'], ['AX'])\nnode2 = make_node('Add', ['AX', 'C'], ['Y'])\ngraph = make_graph([node1, node2], 'lr', [X], [Y], [A, C])\nonnx_model = make_model(graph)\ncheck_model(onnx_model)\n\nprint(onnx_model)\n</code></pre>  \u7ebf\u6027\u6a21\u578b\u7684\u8ba1\u7b97\u56fe: json\u683c\u5f0f  Bash<pre><code>ir_version: 11\ngraph {\n  node {\n    input: \"X\"\n    input: \"A\"\n    output: \"AX\"\n    op_type: \"MatMul\"\n  }\n  node {\n    input: \"AX\"\n    input: \"C\"\n    output: \"Y\"\n    op_type: \"Add\"\n  }\n  name: \"lr\"\n  initializer {\n    dims: 2\n    data_type: 1\n    name: \"A\"\n    raw_data: \"\\000\\000\\000?\\232\\231\\031\\277\"\n  }\n  initializer {\n    dims: 1\n    data_type: 1\n    name: \"C\"\n    raw_data: \"\\315\\314\\314&gt;\"\n  }\n  input {\n    name: \"X\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n          dim {\n          }\n        }\n      }\n    }\n  }\n  output {\n    name: \"Y\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n        }\n      }\n    }\n  }\n}\nopset_import {\n  version: 23\n}\n</code></pre> <p></p> <p>\u518d\u6b21\uff0c\u53ef\u4ee5\u901a\u8fc7 onnx \u7ed3\u6784\u6765\u68c0\u67e5\u521d\u59cb\u5316\u7a0b\u5e8f\u7684\u6837\u5b50\u3002</p> Python<pre><code>import numpy\nfrom onnx import numpy_helper, TensorProto\nfrom onnx.helper import (\n    make_model, make_node, make_graph,\n    make_tensor_value_info)\nfrom onnx.checker import check_model\n\n# initializers\nvalue = numpy.array([0.5, -0.6], dtype=numpy.float32)\nA = numpy_helper.from_array(value, name='A')\n\nvalue = numpy.array([0.4], dtype=numpy.float32)\nC = numpy_helper.from_array(value, name='C')\n\n# the part which does not change\nX = make_tensor_value_info('X', TensorProto.FLOAT, [None, None])\nY = make_tensor_value_info('Y', TensorProto.FLOAT, [None])\nnode1 = make_node('MatMul', ['X', 'A'], ['AX'])\nnode2 = make_node('Add', ['AX', 'C'], ['Y'])\ngraph = make_graph([node1, node2], 'lr', [X], [Y], [A, C])\nonnx_model = make_model(graph)\ncheck_model(onnx_model)\n\nprint('** initializer **')\nfor init in onnx_model.graph.initializer:\n    print(init)\n</code></pre> Bash<pre><code>** initializer **\ndims: 2\ndata_type: 1\nname: \"A\"\nraw_data: \"\\000\\000\\000?\\232\\231\\031\\277\"\n\ndims: 1\ndata_type: 1\nname: \"C\"\nraw_data: \"\\315\\314\\314&gt;\"\n</code></pre> <p>\u7c7b\u578b\u4e5f\u5b9a\u4e49\u4e3a\u6574\u6570\uff0c\u542b\u4e49\u76f8\u540c\u3002\u5728\u7b2c\u4e8c\u4e2a\u793a\u4f8b\u4e2d\uff0c\u53ea\u5269\u4e0b\u4e00\u4e2a\u8f93\u5165\u3002\u8f93\u5165A\u548cB\u88ab\u5220\u9664\u3002\u5f53\u7136\u5b83\u4eec\u4e5f\u53ef\u4ee5\u4fdd\u7559\u3002\u5728\u4fdd\u7559\u60c5\u51b5\u4e0b\uff0c\u5b83\u4eec\u662f\u53ef\u9009\u7684\uff1a\u6bcf\u4e2a\u4e0e\u8f93\u5165\u5171\u4eab\u76f8\u540c\u540d\u79f0\u7684\u521d\u59cb\u5316\u5668\u90fd\u88ab\u89c6\u4e3a\u9ed8\u8ba4\u503c\u3002\u5982\u679c\u6ca1\u6709\u7ed9\u51fa\u8fd9\u4e2a\uff0c\u5b83\u5c06\u66ff\u6362\u8f93\u5165\u3002</p>"},{"location":"onnx/onnx_with_python/#_11","title":"\u5c5e\u6027","text":"<p>\u6709\u4e9b\u7b97\u5b50\u9700\u8981\u5c5e\u6027\uff0c\u4f8b\u5982 <code>Transpose</code> \u7b97\u5b50\u3002\u8fd9\u8ba9\u6211\u4eec\u53ef\u4ee5\u6784\u5efa\u57fa\u4e8e\u8868\u8fbe\u5f0f\u7684\u8ba1\u7b97\u56fe\uff0c\u4f8b\u5982 \\(y = XA^{\\prime} + B\\) \u6216\u8005 <code>y = Add(MatMul(X, Transpose(Z)) + B)</code>\u3002<code>Transpose</code> \u9700\u8981\u4e00\u4e2a\u5b9a\u4e49\u8f74\u6392\u5217\u7684\u5c5e\u6027\uff1a<code>perm=[1, 0]</code>\u3002\u5b83\u4f5c\u4e3a\u547d\u540d\u5c5e\u6027\u6dfb\u52a0\u5230\u51fd\u6570 <code>make_node</code> \u4e2d</p> Python<pre><code>from onnx import TensorProto\nfrom onnx.helper import (\n    make_model, make_node, make_graph,\n    make_tensor_value_info)\nfrom onnx.checker import check_model\n\n# unchanged\nX = make_tensor_value_info('X', TensorProto.FLOAT, [None, None])\nA = make_tensor_value_info('A', TensorProto.FLOAT, [None, None])\nB = make_tensor_value_info('B', TensorProto.FLOAT, [None, None])\nY = make_tensor_value_info('Y', TensorProto.FLOAT, [None])\n\n# added\nnode_transpose = make_node('Transpose', ['A'], ['tA'], perm=[1, 0])\n\n# unchanged except A is replaced by tA\nnode1 = make_node('MatMul', ['X', 'tA'], ['XA'])\nnode2 = make_node('Add', ['XA', 'B'], ['Y'])\n\n# node_transpose is added to the list\ngraph = make_graph([node_transpose, node1, node2],\n                   'lr', [X, A, B], [Y])\nonnx_model = make_model(graph)\ncheck_model(onnx_model)\n\n# the work is done, let's display it...\nprint(onnx_model)\n</code></pre>  \u7ebf\u6027\u6a21\u578b\u7684\u8ba1\u7b97\u56fe: json\u683c\u5f0f  Bash<pre><code>ir_version: 11\ngraph {\n  node {\n    input: \"A\"\n    output: \"tA\"\n    op_type: \"Transpose\"\n    attribute {\n      name: \"perm\"\n      ints: 1\n      ints: 0\n      type: INTS\n    }\n  }\n  node {\n    input: \"X\"\n    input: \"tA\"\n    output: \"XA\"\n    op_type: \"MatMul\"\n  }\n  node {\n    input: \"XA\"\n    input: \"B\"\n    output: \"Y\"\n    op_type: \"Add\"\n  }\n  name: \"lr\"\n  input {\n    name: \"X\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n          dim {\n          }\n        }\n      }\n    }\n  }\n  input {\n    name: \"A\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n          dim {\n          }\n        }\n      }\n    }\n  }\n  input {\n    name: \"B\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n          dim {\n          }\n        }\n      }\n    }\n  }\n  output {\n    name: \"Y\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n        }\n      }\n    }\n  }\n}\nopset_import {\n  version: 23\n}\n</code></pre> <p></p> <p>\u4ee5\u4e0b\u662fmake\u51fd\u6570\u7684\u5b8c\u6574\u5217\u8868\u3002\u5176\u4e2d\u8bb8\u591a\u51fd\u6570\u5728make \u51fd\u6570\u4e00\u8282\u4e2d\u8fdb\u884c\u4e86\u63cf\u8ff0\u3002</p> Python<pre><code>import onnx\nimport pprint\npprint.pprint([k for k in dir(onnx.helper)\n               if k.startswith('make')])\n</code></pre> Bash<pre><code>['make_attribute',\n 'make_attribute_ref',\n 'make_empty_tensor_value_info',\n 'make_function',\n 'make_graph',\n 'make_map',\n 'make_map_type_proto',\n 'make_model',\n 'make_model_gen_version',\n 'make_node',\n 'make_operatorsetid',\n 'make_opsetid',\n 'make_optional',\n 'make_optional_type_proto',\n 'make_sequence',\n 'make_sequence_type_proto',\n 'make_sparse_tensor',\n 'make_sparse_tensor_type_proto',\n 'make_sparse_tensor_value_info',\n 'make_tensor',\n 'make_tensor_sequence_value_info',\n 'make_tensor_type_proto',\n 'make_tensor_value_info',\n 'make_training_info',\n 'make_value_info']\n</code></pre>"},{"location":"onnx/onnx_with_python/#opset","title":"Opset \u548c\u5143\u6570\u636e","text":"<p>\u8ba9\u6211\u4eec\u52a0\u8f7d\u4e4b\u524d\u521b\u5efa\u7684 ONNX \u6587\u4ef6\u5e76\u68c0\u67e5\u5b83\u5177\u6709\u4ec0\u4e48\u6837\u7684\u5143\u6570\u636e\u3002</p> Python<pre><code>from onnx import load\n\nwith open(\"linear_regression.onnx\", \"rb\") as f:\n    onnx_model = load(f)\n\nfor field in ['doc_string', 'domain', 'functions',\n              'ir_version', 'metadata_props', 'model_version',\n              'opset_import', 'producer_name', 'producer_version',\n              'training_info']:\n    print(field, getattr(onnx_model, field))\n</code></pre> <p>Text Only<pre><code>doc_string \ndomain \nfunctions []\nir_version 11\nmetadata_props []\nmodel_version 0\nopset_import [version: 23\n]\nproducer_name \nproducer_version \ntraining_info []\n</code></pre> \u5176\u4e2d\u5927\u90e8\u5206\u90fd\u662f\u7a7a\u7684\uff0c\u56e0\u4e3a\u5728\u521b\u5efa ONNX \u56fe\u65f6\u6ca1\u6709\u586b\u5145\u3002\u5176\u4e2d\u4e24\u4e2a\u6709\u503c\uff1a</p> Python<pre><code>from onnx import load\n\nwith open(\"linear_regression.onnx\", \"rb\") as f:\n    onnx_model = load(f)\n\nprint(\"ir_version:\", onnx_model.ir_version)\nfor opset in onnx_model.opset_import:\n    print(\"opset domain=%r version=%r\" % (opset.domain, opset.version))\n</code></pre> Bash<pre><code>ir_version: 11\nopset domain='' version=23\n</code></pre> <p>IR\u5b9a\u4e49 ONNX \u8bed\u8a00\u7684\u7248\u672c\u3002Opset \u5b9a\u4e49\u6b63\u5728\u4f7f\u7528\u7684\u8fd0\u7b97\u7b26\u7684\u7248\u672c\u3002\u6ca1\u6709\u4efb\u4f55\u7cbe\u5ea6\uff0cONNX \u4f7f\u7528\u5df2\u5b89\u88c5\u5305\u4e2d\u63d0\u4f9b\u7684\u6700\u65b0\u7248\u672c\u3002\u53ef\u4ee5\u4f7f\u7528\u53e6\u4e00\u4e2a\u3002</p> Python<pre><code>from onnx import load\n\nwith open(\"linear_regression.onnx\", \"rb\") as f:\n    onnx_model = load(f)\n\ndel onnx_model.opset_import[:]\nopset = onnx_model.opset_import.add()\nopset.domain = ''\nopset.version = 14\n\nfor opset in onnx_model.opset_import:\n    print(\"opset domain=%r version=%r\" % (opset.domain, opset.version))\n</code></pre> Bash<pre><code>opset domain='' version=14\n</code></pre> <p>\u53ea\u8981\u6240\u6709\u8fd0\u7b97\u7b26\u90fd\u6309\u7167 ONNX \u6307\u5b9a\u7684\u65b9\u5f0f\u5b9a\u4e49\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528\u4efb\u4f55\u64cd\u4f5c\u96c6\u3002\u64cd\u4f5c\u7b26Reshape\u7684\u7b2c 5 \u7248 \u5c06\u5f62\u72b6\u5b9a\u4e49\u4e3a\u8f93\u5165\uff0c\u800c\u4e0d\u662f\u50cf\u7b2c 1 \u7248\u4e2d\u90a3\u6837\u5b9a\u4e49\u4e3a\u5c5e\u6027\u3002\u64cd\u4f5c\u96c6\u8bf4\u660e\u5728\u63cf\u8ff0\u56fe\u5f62\u65f6\u9075\u5faa\u54ea\u4e9b\u89c4\u8303\u3002</p> <p>\u5176\u4ed6\u5143\u6570\u636e\u53ef\u7528\u4e8e\u5b58\u50a8\u4efb\u4f55\u4fe1\u606f\uff0c\u5b58\u50a8\u6709\u5173\u6a21\u578b\u751f\u6210\u65b9\u5f0f\u7684\u4fe1\u606f\uff0c\u4ee5\u53ca\u4f7f\u7528\u7248\u672c\u53f7\u533a\u5206\u4e00\u4e2a\u6a21\u578b\u4e0e\u53e6\u4e00\u4e2a\u6a21\u578b\u7684\u65b9\u5f0f\u3002</p> Python<pre><code>from onnx import load, helper\n\nwith open(\"linear_regression.onnx\", \"rb\") as f:\n    onnx_model = load(f)\n\nonnx_model.model_version = 15\nonnx_model.producer_name = \"something\"\nonnx_model.producer_version = \"some other thing\"\nonnx_model.doc_string = \"documentation about this model\"\nprop = onnx_model.metadata_props\n\ndata = dict(key1=\"value1\", key2=\"value2\")\nhelper.set_model_props(onnx_model, data)\n\nprint(onnx_model)\n</code></pre>  \u7ebf\u6027\u6a21\u578b\u7684\u8ba1\u7b97\u56fe: json \u683c\u5f0f Text Only<pre><code>ir_version: 11\nproducer_name: \"something\"\nproducer_version: \"some other thing\"\nmodel_version: 15\ndoc_string: \"documentation about this model\"\ngraph {\n  node {\n    input: \"X\"\n    input: \"A\"\n    output: \"XA\"\n    op_type: \"MatMul\"\n  }\n  node {\n    input: \"XA\"\n    input: \"B\"\n    output: \"Y\"\n    op_type: \"Add\"\n  }\n  name: \"lr\"\n  input {\n    name: \"X\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n          dim {\n          }\n        }\n      }\n    }\n  }\n  input {\n    name: \"A\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n          dim {\n          }\n        }\n      }\n    }\n  }\n  input {\n    name: \"B\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n          dim {\n          }\n        }\n      }\n    }\n  }\n  output {\n    name: \"Y\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n        }\n      }\n    }\n  }\n}\nopset_import {\n  version: 23\n}\nmetadata_props {\n  key: \"key1\"\n  value: \"value1\"\n}\nmetadata_props {\n  key: \"key2\"\n  value: \"value2\"\n}\n</code></pre> <p>\u5b57\u6bb5training_info\u53ef\u7528\u4e8e\u5b58\u50a8\u9644\u52a0\u56fe\u8868\u3002\u8bf7\u53c2\u9605training_tool_test.py \u4e86\u89e3\u5176\u5de5\u4f5c\u539f\u7406\u3002</p>"},{"location":"onnx/onnx_with_python/#_12","title":"\u5b50\u56fe\uff1a\u6d4b\u8bd5\u548c\u5faa\u73af","text":"<p>\u5b83\u4eec\u901a\u5e38\u88ab\u5f52\u7c7b\u4e3a\u63a7\u5236\u6d41\u3002\u901a\u5e38\u6700\u597d\u907f\u514d\u4f7f\u7528\u5b83\u4eec\uff0c\u56e0\u4e3a\u5b83\u4eec\u7684\u6548\u7387\u4e0d\u5982\u77e9\u9635\u64cd\u4f5c\u5feb\u5f97\u591a\u4e14\u7ecf\u8fc7\u4e86\u4f18\u5316\u3002</p>"},{"location":"onnx/onnx_with_python/#if","title":"\u6761\u4ef6\u7b97\u5b50 IF","text":"<p>\u53ef\u4ee5\u4f7f\u7528\u8fd0\u7b97\u7b26If\u6765\u5b9e\u73b0\u6d4b\u8bd5\u3002\u5b83\u6839\u636e\u4e00\u4e2a\u5e03\u5c14\u503c\u6267\u884c\u4e00\u4e2a\u5b50\u56fe\u6216\u53e6\u4e00\u4e2a\u5b50\u56fe\u3002\u8fd9\u4e0d\u5e38\u7528\uff0c\u56e0\u4e3a\u51fd\u6570\u901a\u5e38\u9700\u8981\u4e00\u6279\u4e2d\u591a\u6b21\u6bd4\u8f83\u7684\u7ed3\u679c\u3002\u4ee5\u4e0b\u793a\u4f8b\u6839\u636e\u7b26\u53f7\u8ba1\u7b97\u77e9\u9635\u4e2d\u6240\u6709\u6d6e\u70b9\u6570\u7684\u603b\u548c\uff0c\u8fd4\u56de 1 \u6216 -1\u3002</p>  \u6761\u4ef6\u7b97\u5b50  Python<pre><code>import numpy\nimport onnx\nfrom onnx.helper import (\n    make_node, make_graph, make_model, make_tensor_value_info)\nfrom onnx.numpy_helper import from_array\nfrom onnx.checker import check_model\nfrom onnxruntime import InferenceSession\n\n# initializers\nvalue = numpy.array([0], dtype=numpy.float32)\nzero = from_array(value, name='zero')\n\n# Same as before, X is the input, Y is the output.\nX = make_tensor_value_info('X', onnx.TensorProto.FLOAT, [None, None])\nY = make_tensor_value_info('Y', onnx.TensorProto.FLOAT, [None])\n\n# The node building the condition. The first one\n# sum over all axes.\nrsum = make_node('ReduceSum', ['X'], ['rsum'])\n# The second compares the result to 0.\ncond = make_node('Greater', ['rsum', 'zero'], ['cond'])\n\n# Builds the graph is the condition is True.\n# Input for then\nthen_out = make_tensor_value_info(\n    'then_out', onnx.TensorProto.FLOAT, None)\n# The constant to return.\nthen_cst = from_array(numpy.array([1]).astype(numpy.float32))\n\n# The only node.\nthen_const_node = make_node(\n    'Constant', inputs=[],\n    outputs=['then_out'],\n    value=then_cst, name='cst1')\n\n# And the graph wrapping these elements.\nthen_body = make_graph(\n    [then_const_node], 'then_body', [], [then_out])\n\n# Same process for the else branch.\nelse_out = make_tensor_value_info(\n    'else_out', onnx.TensorProto.FLOAT, [5])\nelse_cst = from_array(numpy.array([-1]).astype(numpy.float32))\n\nelse_const_node = make_node(\n    'Constant', inputs=[],\n    outputs=['else_out'],\n    value=else_cst, name='cst2')\n\nelse_body = make_graph(\n    [else_const_node], 'else_body',\n    [], [else_out])\n\n# Finally the node If taking both graphs as attributes.\nif_node = onnx.helper.make_node(\n    'If', ['cond'], ['Y'],\n    then_branch=then_body,\n    else_branch=else_body)\n\n# The final graph.\ngraph = make_graph([rsum, cond, if_node], 'if', [X], [Y], [zero])\nonnx_model = make_model(graph)\ncheck_model(onnx_model)\n\n# Let's freeze the opset.\ndel onnx_model.opset_import[:]\nopset = onnx_model.opset_import.add()\nopset.domain = ''\nopset.version = 15\nonnx_model.ir_version = 8\n\n# Save.\nwith open(\"onnx_if_sign.onnx\", \"wb\") as f:\n    f.write(onnx_model.SerializeToString())\n\n# Let's see the output.\nsess = InferenceSession(onnx_model.SerializeToString(),\n                        providers=[\"CPUExecutionProvider\"])\n\nx = numpy.ones((3, 2), dtype=numpy.float32)\nres = sess.run(None, {'X': x})\n\n# It works.\nprint(\"result\", res)\nprint()\n\n# Some display.\nprint(onnx_model)\n</code></pre>  \u6709\u6761\u4ef6\u7b97\u5b50\u7684\u8ba1\u7b97\u56fe: json \u683c\u5f0f Text Only<pre><code>result [array([1.], dtype=float32)]\n\nir_version: 8\ngraph {\n  node {\n    input: \"X\"\n    output: \"rsum\"\n    op_type: \"ReduceSum\"\n  }\n  node {\n    input: \"rsum\"\n    input: \"zero\"\n    output: \"cond\"\n    op_type: \"Greater\"\n  }\n  node {\n    input: \"cond\"\n    output: \"Y\"\n    op_type: \"If\"\n    attribute {\n      name: \"else_branch\"\n      g {\n        node {\n          output: \"else_out\"\n          name: \"cst2\"\n          op_type: \"Constant\"\n          attribute {\n            name: \"value\"\n            t {\n              dims: 1\n              data_type: 1\n              raw_data: \"\\000\\000\\200\\277\"\n            }\n            type: TENSOR\n          }\n        }\n        name: \"else_body\"\n        output {\n          name: \"else_out\"\n          type {\n            tensor_type {\n              elem_type: 1\n              shape {\n                dim {\n                  dim_value: 5\n                }\n              }\n            }\n          }\n        }\n      }\n      type: GRAPH\n    }\n    attribute {\n      name: \"then_branch\"\n      g {\n        node {\n          output: \"then_out\"\n          name: \"cst1\"\n          op_type: \"Constant\"\n          attribute {\n            name: \"value\"\n            t {\n              dims: 1\n              data_type: 1\n              raw_data: \"\\000\\000\\200?\"\n            }\n            type: TENSOR\n          }\n        }\n        name: \"then_body\"\n        output {\n          name: \"then_out\"\n          type {\n            tensor_type {\n              elem_type: 1\n            }\n          }\n        }\n      }\n      type: GRAPH\n    }\n  }\n  name: \"if\"\n  initializer {\n    dims: 1\n    data_type: 1\n    name: \"zero\"\n    raw_data: \"\\000\\000\\000\\000\"\n  }\n  input {\n    name: \"X\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n          dim {\n          }\n        }\n      }\n    }\n  }\n  output {\n    name: \"Y\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n        }\n      }\n    }\n  }\n}\nopset_import {\n  domain: \"\"\n  version: 15\n}\n</code></pre> <p>\u901a\u8fc7\u4e0b\u56fe\u53ef\u4ee5\u66f4\u5bb9\u6613\u5730\u5f62\u8c61\u5316\u6574\u4f53\u3002</p> <p></p> <p>else \u548c then \u5206\u652f\u90fd\u975e\u5e38\u7b80\u5355\u3002\u8282\u70b9If\u751a\u81f3\u53ef\u4ee5\u7528\u8282\u70b9Where\u66ff\u6362\uff0c\u8fd9\u6837\u4f1a\u66f4\u5feb\u3002\u5f53\u4e24\u4e2a\u5206\u652f\u90fd\u8f83\u5927\u65f6\uff0c\u8df3\u8fc7\u4e00\u4e2a\u5206\u652f\u4f1a\u66f4\u6709\u6548\u7387\uff0c\u8fd9\u53d8\u5f97\u5f88\u6709\u8da3\u3002</p>"},{"location":"onnx/onnx_with_python/#scan","title":"\u626b\u63cf\u7b97\u5b50scan","text":"<p>\u9605\u8bfb\u89c4\u8303\u65f6\uff0c\u626b\u63cf\u4f3c\u4e4e\u76f8\u5f53\u590d\u6742\u3002\u5faa\u73af\u904d\u5386\u5f20\u91cf\u7684\u4e00\u7ef4\u5e76\u5c06\u7ed3\u679c\u5b58\u50a8\u5728\u9884\u5206\u914d\u7684\u5f20\u91cf\u4e2d\u5f88\u6709\u7528\u3002</p> <p>\u4ee5\u4e0b\u793a\u4f8b\u4e3a\u56de\u5f52\u95ee\u9898\u5b9e\u73b0\u4e86\u7ecf\u5178\u7684\u6700\u8fd1\u90bb\u7b97\u6cd5\u3002\u7b2c\u4e00\u6b65\u662f\u8ba1\u7b97\u8f93\u5165\u7279\u5f81X\u548c\u8bad\u7ec3\u96c6W\u4e4b\u95f4\u7684\u6210\u5bf9\u8ddd\u79bb\uff1a \u63a5\u4e0b\u6765\u662fTopK\u7b97\u5b50\uff0c\u7528\u4e8e\u63d0\u53d6k \u4e2a\u6700\u8fd1\u90bb\u5c45\u3002</p>  \u626b\u63cf\u7b97\u5b50  Python<pre><code>import numpy\nfrom onnx import numpy_helper, TensorProto\nfrom onnx.helper import (\n    make_model, make_node, set_model_props, make_tensor, make_graph,\n    make_tensor_value_info)\nfrom onnx.checker import check_model\n\n# subgraph\ninitializers = []\nnodes = []\ninputs = []\noutputs = []\n\nvalue = make_tensor_value_info('next_in', 1, [None, 4])\ninputs.append(value)\nvalue = make_tensor_value_info('next', 1, [None])\ninputs.append(value)\n\nvalue = make_tensor_value_info('next_out', 1, [None, None])\noutputs.append(value)\nvalue = make_tensor_value_info('scan_out', 1, [None])\noutputs.append(value)\n\nnode = make_node(\n    'Identity', ['next_in'], ['next_out'],\n    name='cdistd_17_Identity', domain='')\nnodes.append(node)\n\nnode = make_node(\n    'Sub', ['next_in', 'next'], ['cdistdf_17_C0'],\n    name='cdistdf_17_Sub', domain='')\nnodes.append(node)\n\nnode = make_node(\n    'ReduceSumSquare', ['cdistdf_17_C0'], ['cdistdf_17_reduced0'],\n    name='cdistdf_17_ReduceSumSquare', axes=[1], keepdims=0, domain='')\nnodes.append(node)\n\nnode = make_node(\n    'Identity', ['cdistdf_17_reduced0'],\n    ['scan_out'], name='cdistdf_17_Identity', domain='')\nnodes.append(node)\n\ngraph = make_graph(nodes, 'OnnxIdentity',\n                   inputs, outputs, initializers)\n\n# main graph\n\ninitializers = []\nnodes = []\ninputs = []\noutputs = []\n\nopsets = {'': 15, 'ai.onnx.ml': 15}\ntarget_opset = 15  # subgraphs\n\n# initializers\nlist_value = [23.29599822460675, -120.86516699239603, -144.70495899914215, -260.08772982740413,\n              154.65272105889147, -122.23295157108991, 247.45232560871727, -182.83789715805776,\n              -132.92727431421793, 147.48710175784703, 88.27761768038069, -14.87785569894749,\n              111.71487894705504, 301.0518319089629, -29.64235742280055, -113.78493504731911,\n              -204.41218591022718, 112.26561056133608, 66.04032954135549,\n              -229.5428380626701, -33.549262642481615, -140.95737409864623, -87.8145187836131,\n              -90.61397011283958, 57.185488100413366, 56.864151796743855, 77.09054590340892,\n              -187.72501631246712, -42.779503579806025, -21.642642730674076, -44.58517761667535,\n              78.56025104939847, -23.92423223842056, 234.9166231927213, -73.73512816431007,\n              -10.150864499514297, -70.37105466673813, 65.5755688281476, 108.68676290979731, -78.36748960443065]\nvalue = numpy.array(list_value, dtype=numpy.float64).reshape((2, 20))\ntensor = numpy_helper.from_array(\n    value, name='knny_ArrayFeatureExtractorcst')\ninitializers.append(tensor)\n\nlist_value = [1.1394007205963135, -0.6848101019859314, -1.234825849533081, 0.4023416340351105,\n              0.17742614448070526, 0.46278226375579834, -0.4017809331417084, -1.630198359489441,\n              -0.5096521973609924, 0.7774903774261475, -0.4380742907524109, -1.2527953386306763,\n              -1.0485529899597168, 1.950775384902954, -1.420017957687378, -1.7062702178955078,\n              1.8675580024719238, -0.15135720372200012, -0.9772778749465942, 0.9500884413719177,\n              -2.5529897212982178, -0.7421650290489197, 0.653618574142456, 0.8644362092018127,\n              1.5327792167663574, 0.37816253304481506, 1.4693588018417358, 0.154947429895401,\n              -0.6724604368209839, -1.7262825965881348, -0.35955315828323364, -0.8131462931632996,\n              -0.8707971572875977, 0.056165341287851334, -0.5788496732711792, -0.3115525245666504,\n              1.2302906513214111, -0.302302747964859, 1.202379822731018, -0.38732680678367615,\n              2.269754648208618, -0.18718385696411133, -1.4543657302856445, 0.04575851559638977,\n              -0.9072983860969543, 0.12898291647434235, 0.05194539576768875, 0.7290905714035034,\n              1.4940791130065918, -0.8540957570075989, -0.2051582634449005, 0.3130677044391632,\n              1.764052391052246, 2.2408931255340576, 0.40015721321105957, 0.978738009929657,\n              0.06651721894741058, -0.3627411723136902, 0.30247190594673157, -0.6343221068382263,\n              -0.5108051300048828, 0.4283318817615509, -1.18063223361969, -0.02818222902715206,\n              -1.6138978004455566, 0.38690251111984253, -0.21274028718471527, -0.8954665660858154,\n              0.7610377073287964, 0.3336743414402008, 0.12167501449584961, 0.44386324286460876,\n              -0.10321885347366333, 1.4542734622955322, 0.4105985164642334, 0.14404356479644775,\n              -0.8877857327461243, 0.15634897351264954, -1.980796456336975, -0.34791216254234314]\nvalue = numpy.array(list_value, dtype=numpy.float32).reshape((20, 4))\ntensor = numpy_helper.from_array(value, name='Sc_Scancst')\ninitializers.append(tensor)\n\nvalue = numpy.array([2], dtype=numpy.int64)\ntensor = numpy_helper.from_array(value, name='To_TopKcst')\ninitializers.append(tensor)\n\nvalue = numpy.array([2, -1, 2], dtype=numpy.int64)\ntensor = numpy_helper.from_array(value, name='knny_Reshapecst')\ninitializers.append(tensor)\n\n# inputs\nvalue = make_tensor_value_info('input', 1, [None, 4])\ninputs.append(value)\n\n# outputs\nvalue = make_tensor_value_info('variable', 1, [None, 2])\noutputs.append(value)\n\n# nodes\n\nnode = make_node(\n    'Scan', ['input', 'Sc_Scancst'], ['UU032UU', 'UU033UU'],\n    name='Sc_Scan', body=graph, num_scan_inputs=1, domain='')\nnodes.append(node)\n\nnode = make_node(\n    'Transpose', ['UU033UU'], ['Tr_transposed0'],\n    name='Tr_Transpose', perm=[1, 0], domain='')\nnodes.append(node)\n\nnode = make_node(\n    'Sqrt', ['Tr_transposed0'], ['Sq_Y0'],\n    name='Sq_Sqrt', domain='')\nnodes.append(node)\n\nnode = make_node(\n    'TopK', ['Sq_Y0', 'To_TopKcst'], ['To_Values0', 'To_Indices1'],\n    name='To_TopK', largest=0, sorted=1, domain='')\nnodes.append(node)\n\nnode = make_node(\n    'Flatten', ['To_Indices1'], ['knny_output0'],\n    name='knny_Flatten', domain='')\nnodes.append(node)\n\nnode = make_node(\n    'ArrayFeatureExtractor',\n    ['knny_ArrayFeatureExtractorcst', 'knny_output0'], ['knny_Z0'],\n    name='knny_ArrayFeatureExtractor', domain='ai.onnx.ml')\nnodes.append(node)\n\nnode = make_node(\n    'Reshape', ['knny_Z0', 'knny_Reshapecst'], ['knny_reshaped0'],\n    name='knny_Reshape', allowzero=0, domain='')\nnodes.append(node)\n\nnode = make_node(\n    'Transpose', ['knny_reshaped0'], ['knny_transposed0'],\n    name='knny_Transpose', perm=[1, 0, 2], domain='')\nnodes.append(node)\n\nnode = make_node(\n    'Cast', ['knny_transposed0'], ['Ca_output0'],\n    name='Ca_Cast', to=TensorProto.FLOAT, domain='')\nnodes.append(node)\n\nnode = make_node(\n    'ReduceMean', ['Ca_output0'], ['variable'],\n    name='Re_ReduceMean', axes=[2], keepdims=0, domain='')\nnodes.append(node)\n\n# graph\ngraph = make_graph(nodes, 'KNN regressor', inputs, outputs, initializers)\n\n# model\nonnx_model = make_model(graph)\nonnx_model.ir_version = 8\nonnx_model.producer_name = 'skl2onnx'\nonnx_model.producer_version = ''\nonnx_model.domain = 'ai.onnx'\nonnx_model.model_version = 0\nonnx_model.doc_string = ''\nset_model_props(onnx_model, {})\n\n# opsets\ndel onnx_model.opset_import[:]\nfor dom, value in opsets.items():\n    op_set = onnx_model.opset_import.add()\n    op_set.domain = dom\n    op_set.version = value\n\ncheck_model(onnx_model)\nwith open(\"knnr.onnx\", \"wb\") as f:\n    f.write(onnx_model.SerializeToString())\n\nprint(onnx_model)\n</code></pre>   \u6709\u626b\u63cf\u7b97\u5b50\u7684\u8ba1\u7b97\u56fe: json \u683c\u5f0f  Text Only<pre><code>ir_version: 8\nproducer_name: \"skl2onnx\"\nproducer_version: \"\"\ndomain: \"ai.onnx\"\nmodel_version: 0\ndoc_string: \"\"\ngraph {\n  node {\n    input: \"input\"\n    input: \"Sc_Scancst\"\n    output: \"UU032UU\"\n    output: \"UU033UU\"\n    name: \"Sc_Scan\"\n    op_type: \"Scan\"\n    attribute {\n      name: \"body\"\n      g {\n        node {\n          input: \"next_in\"\n          output: \"next_out\"\n          name: \"cdistd_17_Identity\"\n          op_type: \"Identity\"\n          domain: \"\"\n        }\n        node {\n          input: \"next_in\"\n          input: \"next\"\n          output: \"cdistdf_17_C0\"\n          name: \"cdistdf_17_Sub\"\n          op_type: \"Sub\"\n          domain: \"\"\n        }\n        node {\n          input: \"cdistdf_17_C0\"\n          output: \"cdistdf_17_reduced0\"\n          name: \"cdistdf_17_ReduceSumSquare\"\n          op_type: \"ReduceSumSquare\"\n          attribute {\n            name: \"axes\"\n            ints: 1\n            type: INTS\n          }\n          attribute {\n            name: \"keepdims\"\n            i: 0\n            type: INT\n          }\n          domain: \"\"\n        }\n        node {\n          input: \"cdistdf_17_reduced0\"\n          output: \"scan_out\"\n          name: \"cdistdf_17_Identity\"\n          op_type: \"Identity\"\n          domain: \"\"\n        }\n        name: \"OnnxIdentity\"\n        input {\n          name: \"next_in\"\n          type {\n            tensor_type {\n              elem_type: 1\n              shape {\n                dim {\n                }\n                dim {\n                  dim_value: 4\n                }\n              }\n            }\n          }\n        }\n        input {\n          name: \"next\"\n          type {\n            tensor_type {\n              elem_type: 1\n              shape {\n                dim {\n                }\n              }\n            }\n          }\n        }\n        output {\n          name: \"next_out\"\n          type {\n            tensor_type {\n              elem_type: 1\n              shape {\n                dim {\n                }\n                dim {\n                }\n              }\n            }\n          }\n        }\n        output {\n          name: \"scan_out\"\n          type {\n            tensor_type {\n              elem_type: 1\n              shape {\n                dim {\n                }\n              }\n            }\n          }\n        }\n      }\n      type: GRAPH\n    }\n    attribute {\n      name: \"num_scan_inputs\"\n      i: 1\n      type: INT\n    }\n    domain: \"\"\n  }\n  node {\n    input: \"UU033UU\"\n    output: \"Tr_transposed0\"\n    name: \"Tr_Transpose\"\n    op_type: \"Transpose\"\n    attribute {\n      name: \"perm\"\n      ints: 1\n      ints: 0\n      type: INTS\n    }\n    domain: \"\"\n  }\n  node {\n    input: \"Tr_transposed0\"\n    output: \"Sq_Y0\"\n    name: \"Sq_Sqrt\"\n    op_type: \"Sqrt\"\n    domain: \"\"\n  }\n  node {\n    input: \"Sq_Y0\"\n    input: \"To_TopKcst\"\n    output: \"To_Values0\"\n    output: \"To_Indices1\"\n    name: \"To_TopK\"\n    op_type: \"TopK\"\n    attribute {\n      name: \"largest\"\n      i: 0\n      type: INT\n    }\n    attribute {\n      name: \"sorted\"\n      i: 1\n      type: INT\n    }\n    domain: \"\"\n  }\n  node {\n    input: \"To_Indices1\"\n    output: \"knny_output0\"\n    name: \"knny_Flatten\"\n    op_type: \"Flatten\"\n    domain: \"\"\n  }\n  node {\n    input: \"knny_ArrayFeatureExtractorcst\"\n    input: \"knny_output0\"\n    output: \"knny_Z0\"\n    name: \"knny_ArrayFeatureExtractor\"\n    op_type: \"ArrayFeatureExtractor\"\n    domain: \"ai.onnx.ml\"\n  }\n  node {\n    input: \"knny_Z0\"\n    input: \"knny_Reshapecst\"\n    output: \"knny_reshaped0\"\n    name: \"knny_Reshape\"\n    op_type: \"Reshape\"\n    attribute {\n      name: \"allowzero\"\n      i: 0\n      type: INT\n    }\n    domain: \"\"\n  }\n  node {\n    input: \"knny_reshaped0\"\n    output: \"knny_transposed0\"\n    name: \"knny_Transpose\"\n    op_type: \"Transpose\"\n    attribute {\n      name: \"perm\"\n      ints: 1\n      ints: 0\n      ints: 2\n      type: INTS\n    }\n    domain: \"\"\n  }\n  node {\n    input: \"knny_transposed0\"\n    output: \"Ca_output0\"\n    name: \"Ca_Cast\"\n    op_type: \"Cast\"\n    attribute {\n      name: \"to\"\n      i: 1\n      type: INT\n    }\n    domain: \"\"\n  }\n  node {\n    input: \"Ca_output0\"\n    output: \"variable\"\n    name: \"Re_ReduceMean\"\n    op_type: \"ReduceMean\"\n    attribute {\n      name: \"axes\"\n      ints: 2\n      type: INTS\n    }\n    attribute {\n      name: \"keepdims\"\n      i: 0\n      type: INT\n    }\n    domain: \"\"\n  }\n  name: \"KNN regressor\"\n  initializer {\n    dims: 2\n    dims: 20\n    data_type: 11\n    name: \"knny_ArrayFeatureExtractorcst\"\n    raw_data: \",\\\\&amp;\\212\\306K7@\\333z`\\345^7^\\300\\304\\312,\\006\\217\\026b\\300Z9dWgAp\\300.+F\\027\\343Tc@\\203\\330\\264\\255\\350\\216^\\300\\260\\022\\216sy\\356n@\\237h\\263\\r\\320\\332f\\300\\224\\277.;\\254\\235`\\300\\336\\370lV\\226ob@\\261\\201\\362|\\304\\021V@c,[Mv\\301-\\300\\322\\214\\240\\223\\300\\355[@)\\036\\262M\\324\\320r@nE;\\211q\\244=\\300\\021n5`&lt;r\\\\\\300\\207\\211\\201\\2400\\215i\\300H\\232p\\303\\377\\020\\\\@\\317K[\\302\\224\\202P@&amp;\\306\\355\\355^\\261l\\300\\301/\\377&lt;N\\306@\\300#w\\001\\317\\242\\236a\\300$fd\\023!\\364U\\300\\204\\327LIK\\247V\\300J\\211\\366\\022\\276\\227L@\\262\\345\\254\\206\\234nL@f{\\013\\201\\313ES@\\234\\343hU3wg\\300\\3370\\367\\305\\306cE\\300\\336A\\347;\\204\\2445\\300f\\374\\242\\031\\347JF\\300\\325\\2557\\'\\333\\243S@\\331\\354\\345{\\232\\3547\\300\\307o)\\372T]m@#\\005\\000W\\014oR\\300\\'\\025\\227\\034&gt;M$\\300\\310\\252\\022\\\\\\277\\227Q\\300l_\\243\\036\\326dP@\\333kk\\354\\363+[@\\223)\\036\\363\\204\\227S\\300\"\n  }\n  initializer {\n    dims: 20\n    dims: 4\n    data_type: 1\n    name: \"Sc_Scancst\"\n    raw_data: \"\\342\\327\\221?\\267O/\\277\\306\\016\\236\\277\\271\\377\\315&gt;3\\2575&gt;\\314\\361\\354&gt;;\\266\\315\\276W\\252\\320\\277\\221x\\002\\277\\234\\tG?FK\\340\\276\\231[\\240\\277\\3746\\206\\277\\002\\263\\371?&amp;\\303\\265\\277\\020g\\332\\277$\\014\\357?b\\375\\032\\276\\342.z\\277\\3778s?/d#\\300\\207\\376=\\277\\214S\\'?\\261K]?\\0342\\304?\\205\\236\\301&gt;\\363\\023\\274?\\212\\252\\036&gt;^&amp;,\\277\\324\\366\\334\\277Z\\027\\270\\276[*P\\277\\220\\354^\\277\\241\\rf=~/\\024\\277\\320\\203\\237\\276*z\\235?m\\307\\232\\276\\225\\347\\231?\\263O\\306\\276\\251C\\021@ \\255?\\276\\250(\\272\\277Hm;=\\265Dh\\277\\031\\024\\004&gt;\\262\\304T=\\256\\245:?\\374=\\277?\\005\\246Z\\277\\002\\025R\\276iJ\\240&gt;x\\314\\341?\\313j\\017@h\\341\\314&gt;\\223\\216z?.:\\210=6\\271\\271\\276\\231\\335\\232&gt;\\357b\\\"\\277 \\304\\002\\277QN\\333&gt;\\365\\036\\227\\277k\\336\\346\\2744\\224\\316\\277\\026\\030\\306&gt;\\227\\330Y\\276L=e\\277^\\323B?]\\327\\252&gt;\\3000\\371=\\013B\\343&gt;hd\\323\\275\\242%\\272?\\3709\\322&gt;(\\200\\023&gt;\\355Ec\\277\\362\\031 &gt;\\275\\212\\375\\277\\213!\\262\\276\"\n  }\n  initializer {\n    dims: 1\n    data_type: 7\n    name: \"To_TopKcst\"\n    raw_data: \"\\002\\000\\000\\000\\000\\000\\000\\000\"\n  }\n  initializer {\n    dims: 3\n    data_type: 7\n    name: \"knny_Reshapecst\"\n    raw_data: \"\\002\\000\\000\\000\\000\\000\\000\\000\\377\\377\\377\\377\\377\\377\\377\\377\\002\\000\\000\\000\\000\\000\\000\\000\"\n  }\n  input {\n    name: \"input\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n          dim {\n            dim_value: 4\n          }\n        }\n      }\n    }\n  }\n  output {\n    name: \"variable\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n          dim {\n            dim_value: 2\n          }\n        }\n      }\n    }\n  }\n}\nopset_import {\n  domain: \"\"\n  version: 15\n}\nopset_import {\n  domain: \"ai.onnx.ml\"\n  version: 15\n}\n</code></pre> <p>\u4ece\u89c6\u89c9\u4e0a\u770b\uff0c\u5b83\u770b\u8d77\u6765\u5982\u4e0b\u6240\u793a\uff1a </p> <p>\u5b50\u56fe\u7531\u64cd\u4f5c\u7b26Scan\u6267\u884c\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6709\u4e00\u4e2a\u626b\u63cf\u8f93\u5165\uff0c\u8fd9\u610f\u5473\u7740\u64cd\u4f5c\u7b26\u4ec5\u6784\u5efa\u4e00\u4e2a\u8f93\u51fa\u3002</p> Python<pre><code>node = make_node(\n    'Scan', ['X1', 'X2'], ['Y1', 'Y2'],\n    name='Sc_Scan', body=graph, num_scan_inputs=1, domain='')\n</code></pre> <p>\u5728\u7b2c\u4e00\u6b21\u8fed\u4ee3\u4e2d\uff0c\u5b50\u56fe\u5f97\u5230X1\u548cX2\u7684\u7b2c\u4e00\u884c\u3002\u8be5\u56fe\u4ea7\u751f\u4e24\u4e2a\u8f93\u51fa\u3002\u7b2c\u4e00\u4e2a\u5728\u4e0b\u4e00\u6b21\u8fed\u4ee3\u4e2d\u66ff\u6362X1 \uff0c\u7b2c\u4e8c\u4e2a\u5b58\u50a8\u5728\u5bb9\u5668\u4e2d\u5f62\u6210Y2 \u3002\u5728\u7b2c\u4e8c\u6b21\u8fed\u4ee3\u4e2d\uff0c\u5b50\u56fe\u7684\u7b2c\u4e8c\u4e2a\u8f93\u5165\u662fX2\u7684\u7b2c\u4e8c\u884c\u3002\u8fd9\u91cc\u6709\u4e00\u4e2a\u7b80\u77ed\u7684\u603b\u7ed3\u3002\u7eff\u8272\u662f\u7b2c\u4e00\u6b21\u8fed\u4ee3\uff0c\u84dd\u8272\u662f\u7b2c\u4e8c\u6b21\u8fed\u4ee3\u3002</p> <p></p>"},{"location":"onnx/onnx_with_python/#_13","title":"\u51fd\u6570","text":"<p>\u5982\u4e0a\u4e00\u7ae0\u6240\u8ff0\uff0c\u5982\u679c\u5b58\u5728\u51fd\u6570\u7684\u5177\u4f53\u5b9e\u73b0\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528\u51fd\u6570\u6765\u7f29\u77ed\u6784\u5efa\u6a21\u578b\u7684\u4ee3\u7801\uff0c\u5e76\u4e3a\u8fd0\u884c\u65f6\u8fd0\u884c\u9884\u6d4b\u63d0\u4f9b\u66f4\u591a\u53ef\u80fd\u6027\uff0c\u4ece\u800c\u52a0\u5feb\u8fd0\u884c\u901f\u5ea6\u3002\u5982\u679c\u6ca1\u6709\uff0c\u8fd0\u884c\u65f6\u4ecd\u7136\u53ef\u4ee5\u4f7f\u7528\u57fa\u4e8e\u73b0\u6709\u8fd0\u7b97\u7b26\u7684\u9ed8\u8ba4\u5b9e\u73b0\u3002</p> <p>Functionmake_function\u7528\u4e8e\u5b9a\u4e49\u51fd\u6570\u3002\u5b83\u7684\u5de5\u4f5c\u65b9\u5f0f\u7c7b\u4f3c\u4e8e\u7c7b\u578b\u8f83\u5c11\u7684\u56fe\u3002\u5b83\u66f4\u50cf\u4e00\u4e2a\u6a21\u677f\u3002\u6b64 API \u53ef\u80fd\u4f1a\u6f14\u53d8\u3002\u5b83\u4e5f\u4e0d\u5305\u542b\u521d\u59cb\u5316\u7a0b\u5e8f\u3002</p>"},{"location":"onnx/onnx_with_python/#_14","title":"\u6ca1\u6709\u5c5e\u6027\u7684\u51fd\u6570","text":"<p>\u8fd9\u662f\u6bd4\u8f83\u7b80\u5355\u7684\u60c5\u51b5\u3002\u51fd\u6570\u7684\u6bcf\u4e2a\u8f93\u5165\u90fd\u662f\u6267\u884c\u65f6\u5df2\u77e5\u7684\u52a8\u6001\u5bf9\u8c61\u3002</p> Python<pre><code>import numpy\nfrom onnx import numpy_helper, TensorProto\nfrom onnx.helper import (\n    make_model, make_node, set_model_props, make_tensor,\n    make_graph, make_tensor_value_info, make_opsetid,\n    make_function)\nfrom onnx.checker import check_model\n\nnew_domain = 'custom'\nopset_imports = [make_opsetid(\"\", 14), make_opsetid(new_domain, 1)]\n\n# Let's define a function for a linear regression\n\nnode1 = make_node('MatMul', ['X', 'A'], ['XA'])\nnode2 = make_node('Add', ['XA', 'B'], ['Y'])\n\nlinear_regression = make_function(\n    new_domain,            # domain name\n    'LinearRegression',     # function name\n    ['X', 'A', 'B'],        # input names\n    ['Y'],                  # output names\n    [node1, node2],         # nodes\n    opset_imports,          # opsets\n    [])                     # attribute names\n\n# Let's use it in a graph.\n\nX = make_tensor_value_info('X', TensorProto.FLOAT, [None, None])\nA = make_tensor_value_info('A', TensorProto.FLOAT, [None, None])\nB = make_tensor_value_info('B', TensorProto.FLOAT, [None, None])\nY = make_tensor_value_info('Y', TensorProto.FLOAT, [None])\n\ngraph = make_graph(\n    [make_node('LinearRegression', ['X', 'A', 'B'], ['Y1'], domain=new_domain),\n     make_node('Abs', ['Y1'], ['Y'])],\n    'example',\n    [X, A, B], [Y])\n\nonnx_model = make_model(\n    graph, opset_imports=opset_imports,\n    functions=[linear_regression])  # functions to add)\ncheck_model(onnx_model)\n\n# the work is done, let's display it...\nprint(onnx_model)\n</code></pre> Bash<pre><code>ir_version: 11\ngraph {\n  node {\n    input: \"X\"\n    input: \"A\"\n    input: \"B\"\n    output: \"Y1\"\n    op_type: \"LinearRegression\"\n    domain: \"custom\"\n  }\n  node {\n    input: \"Y1\"\n    output: \"Y\"\n    op_type: \"Abs\"\n  }\n  name: \"example\"\n  input {\n    name: \"X\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n          dim {\n          }\n        }\n      }\n    }\n  }\n  input {\n    name: \"A\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n          dim {\n          }\n        }\n      }\n    }\n  }\n  input {\n    name: \"B\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n          dim {\n          }\n        }\n      }\n    }\n  }\n  output {\n    name: \"Y\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n        }\n      }\n    }\n  }\n}\nopset_import {\n  domain: \"\"\n  version: 14\n}\nopset_import {\n  domain: \"custom\"\n  version: 1\n}\nfunctions {\n  name: \"LinearRegression\"\n  input: \"X\"\n  input: \"A\"\n  input: \"B\"\n  output: \"Y\"\n  node {\n    input: \"X\"\n    input: \"A\"\n    output: \"XA\"\n    op_type: \"MatMul\"\n  }\n  node {\n    input: \"XA\"\n    input: \"B\"\n    output: \"Y\"\n    op_type: \"Add\"\n  }\n  opset_import {\n    domain: \"\"\n    version: 14\n  }\n  opset_import {\n    domain: \"custom\"\n    version: 1\n  }\n  domain: \"custom\"\n}\n</code></pre>"},{"location":"onnx/onnx_with_python/#_15","title":"\u5177\u6709\u5c5e\u6027\u7684\u51fd\u6570","text":"<p>\u4ee5\u4e0b\u51fd\u6570\u4e0e\u4e0a\u4e00\u4e2a\u51fd\u6570\u7b49\u6548\uff0c\u53ea\u662f\u8f93\u5165B\u88ab\u8f6c\u6362\u4e3a\u540d\u4e3abias \u7684\u53c2\u6570\u3002\u4ee3\u7801\u51e0\u4e4e\u76f8\u540c\uff0c\u53ea\u662f bias \u73b0\u5728\u662f\u4e00\u4e2a\u5e38\u91cf\u3002\u5728\u51fd\u6570\u5b9a\u4e49\u5185\u90e8\uff0c\u521b\u5efa\u4e86\u4e00\u4e2a\u8282\u70b9Constant\u4ee5\u5c06\u53c2\u6570\u4f5c\u4e3a\u7ed3\u679c\u63d2\u5165\u3002\u5b83\u901a\u8fc7\u5c5e\u6027\u94fe\u63a5\u5230\u53c2\u6570ref_attr_name\u3002 Python<pre><code>import numpy\nfrom onnx import numpy_helper, TensorProto, AttributeProto\nfrom onnx.helper import (\n    make_model, make_node, set_model_props, make_tensor,\n    make_graph, make_tensor_value_info, make_opsetid,\n    make_function)\nfrom onnx.checker import check_model\n\nnew_domain = 'custom'\nopset_imports = [make_opsetid(\"\", 14), make_opsetid(new_domain, 1)]\n\n# Let's define a function for a linear regression\n# The first step consists in creating a constant\n# equal to the input parameter of the function.\ncst = make_node('Constant',  [], ['B'])\n\natt = AttributeProto()\natt.name = \"value\"\n\n# This line indicates the value comes from the argument\n# named 'bias' the function is given.\natt.ref_attr_name = \"bias\"\natt.type = AttributeProto.TENSOR\ncst.attribute.append(att)\n\nnode1 = make_node('MatMul', ['X', 'A'], ['XA'])\nnode2 = make_node('Add', ['XA', 'B'], ['Y'])\n\nlinear_regression = make_function(\n    new_domain,            # domain name\n    'LinearRegression',     # function name\n    ['X', 'A'],             # input names\n    ['Y'],                  # output names\n    [cst, node1, node2],    # nodes\n    opset_imports,          # opsets\n    [\"bias\"])               # attribute names\n\n# Let's use it in a graph.\n\nX = make_tensor_value_info('X', TensorProto.FLOAT, [None, None])\nA = make_tensor_value_info('A', TensorProto.FLOAT, [None, None])\nB = make_tensor_value_info('B', TensorProto.FLOAT, [None, None])\nY = make_tensor_value_info('Y', TensorProto.FLOAT, [None])\n\ngraph = make_graph(\n    [make_node('LinearRegression', ['X', 'A'], ['Y1'], domain=new_domain,\n               # bias is now an argument of the function and is defined as a tensor\n               bias=make_tensor('former_B', TensorProto.FLOAT, [1], [0.67])),\n     make_node('Abs', ['Y1'], ['Y'])],\n    'example',\n    [X, A], [Y])\n\nonnx_model = make_model(\n    graph, opset_imports=opset_imports,\n    functions=[linear_regression])  # functions to add)\ncheck_model(onnx_model)\n\n# the work is done, let's display it...\nprint(onnx_model)\n</code></pre> Bash<pre><code>ir_version: 11\ngraph {\n  node {\n    input: \"X\"\n    input: \"A\"\n    output: \"Y1\"\n    op_type: \"LinearRegression\"\n    attribute {\n      name: \"bias\"\n      t {\n        dims: 1\n        data_type: 1\n        float_data: 0.6700000166893005\n        name: \"former_B\"\n      }\n      type: TENSOR\n    }\n    domain: \"custom\"\n  }\n  node {\n    input: \"Y1\"\n    output: \"Y\"\n    op_type: \"Abs\"\n  }\n  name: \"example\"\n  input {\n    name: \"X\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n          dim {\n          }\n        }\n      }\n    }\n  }\n  input {\n    name: \"A\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n          dim {\n          }\n        }\n      }\n    }\n  }\n  output {\n    name: \"Y\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n        }\n      }\n    }\n  }\n}\nopset_import {\n  domain: \"\"\n  version: 14\n}\nopset_import {\n  domain: \"custom\"\n  version: 1\n}\nfunctions {\n  name: \"LinearRegression\"\n  input: \"X\"\n  input: \"A\"\n  output: \"Y\"\n  attribute: \"bias\"\n  node {\n    output: \"B\"\n    op_type: \"Constant\"\n    attribute {\n      name: \"value\"\n      type: TENSOR\n      ref_attr_name: \"bias\"\n    }\n  }\n  node {\n    input: \"X\"\n    input: \"A\"\n    output: \"XA\"\n    op_type: \"MatMul\"\n  }\n  node {\n    input: \"XA\"\n    input: \"B\"\n    output: \"Y\"\n    op_type: \"Add\"\n  }\n  opset_import {\n    domain: \"\"\n    version: 14\n  }\n  opset_import {\n    domain: \"custom\"\n    version: 1\n  }\n  domain: \"custom\"\n}\n</code></pre></p>"},{"location":"onnx/onnx_with_python/#_16","title":"\u89e3\u6790","text":"<p>onnx \u6a21\u5757\u63d0\u4f9b\u4e86\u4e00\u79cd\u66f4\u5feb\u7684\u65b9\u5f0f\u6765\u5b9a\u4e49\u56fe\u5f62\uff0c\u5e76\u4e14\u66f4\u5bb9\u6613\u9605\u8bfb\u3002\u5f53\u56fe\u5f62\u662f\u5728\u5355\u4e2a\u51fd\u6570\u4e2d\u6784\u5efa\u65f6\uff0c\u8fd9\u5f88\u5bb9\u6613\u4f7f\u7528\uff0c\u5f53\u56fe\u5f62\u662f\u7531\u8f6c\u6362\u673a\u5668\u5b66\u4e60\u7ba1\u9053\u7684\u6bcf\u4e2a\u90e8\u5206\u7684\u8bb8\u591a\u4e0d\u540c\u51fd\u6570\u6784\u5efa\u65f6\uff0c\u5c31\u4e0d\u90a3\u4e48\u5bb9\u6613\u4e86\u3002</p> Python<pre><code>import onnx.parser\nfrom onnx.checker import check_model\n\ninput = '''\n    &lt;\n        ir_version: 8,\n        opset_import: [ \"\" : 15]\n    &gt;\n    agraph (float[I,J] X, float[I] A, float[I] B) =&gt; (float[I] Y) {\n        XA = MatMul(X, A)\n        Y = Add(XA, B)\n    }\n    '''\nonnx_model = onnx.parser.parse_model(input)\ncheck_model(onnx_model)\n\nprint(onnx_model)\n</code></pre> Bash<pre><code>ir_version: 8\ngraph {\nnode {\n    input: \"X\"\n    input: \"A\"\n    output: \"XA\"\n    op_type: \"MatMul\"\n    domain: \"\"\n}\nnode {\n    input: \"XA\"\n    input: \"B\"\n    output: \"Y\"\n    op_type: \"Add\"\n    domain: \"\"\n}\nname: \"agraph\"\ninput {\n    name: \"X\"\n    type {\n    tensor_type {\n        elem_type: 1\n        shape {\n        dim {\n            dim_param: \"I\"\n        }\n        dim {\n            dim_param: \"J\"\n        }\n        }\n    }\n    }\n}\ninput {\n    name: \"A\"\n    type {\n    tensor_type {\n        elem_type: 1\n        shape {\n        dim {\n            dim_param: \"I\"\n        }\n        }\n    }\n    }\n}\ninput {\n    name: \"B\"\n    type {\n    tensor_type {\n        elem_type: 1\n        shape {\n        dim {\n            dim_param: \"I\"\n        }\n        }\n    }\n    }\n}\noutput {\n    name: \"Y\"\n    type {\n    tensor_type {\n        elem_type: 1\n        shape {\n        dim {\n            dim_param: \"I\"\n        }\n        }\n    }\n    }\n}\n}\nopset_import {\ndomain: \"\"\nversion: 15\n}\n</code></pre> <p>\u8fd9\u79cd\u65b9\u5f0f\u7528\u4e8e\u521b\u5efa\u5c0f\u6a21\u578b\uff0c\u4f46\u5728\u8f6c\u6362\u5e93\u65f6\u5f88\u5c11\u4f7f\u7528\u3002</p>"},{"location":"onnx/onnx_with_python/#_17","title":"\u68c0\u67e5\u5668\u548c\u5f62\u72b6\u63a8\u65ad","text":"<p>onnx \u63d0\u4f9b\u4e86\u4e00\u4e2a\u51fd\u6570\u6765\u68c0\u67e5\u6a21\u578b\u662f\u5426\u6709\u6548\u3002\u53ea\u8981\u68c0\u6d4b\u5230\u4e0d\u4e00\u81f4\uff0c\u5b83\u5c31\u4f1a\u68c0\u67e5\u8f93\u5165\u7c7b\u578b\u6216\u5f62\u72b6\u3002\u4ee5\u4e0b\u793a\u4f8b\u6dfb\u52a0\u4e86\u4e24\u4e2a\u4e0d\u540c\u7c7b\u578b\u7684\u77e9\u9635\uff0c\u8fd9\u662f\u4e0d\u5141\u8bb8\u7684\u3002</p> Python<pre><code>import onnx.parser\nimport onnx.checker\n\ninput = '''\n    &lt;\n        ir_version: 8,\n        opset_import: [ \"\" : 15]\n    &gt;\n    agraph (float[I,4] X, float[4,2] A, int[4] B) =&gt; (float[I] Y) {\n        XA = MatMul(X, A)\n        Y = Add(XA, B)\n    }\n    '''\ntry:\n    onnx_model = onnx.parser.parse_model(input)\n    onnx.checker.check_model(onnx_model)\nexcept Exception as e:\n    print(e)\n</code></pre> Bash<pre><code>b'[ParseError at position (line: 6 column: 44)]\\nError context:     agraph (float[I,4] X, float[4,2] A, int[4] B) =&gt; (float[I] Y) {\\nExpected character ) not found.'\n</code></pre> <p>check_model\u7531\u4e8e\u4e0d\u4e00\u81f4\u800c\u5f15\u53d1\u9519\u8bef\u3002\u8fd9\u9002\u7528\u4e8e\u4e3b\u57df\u6216 ML \u57df\u4e2d\u5b9a\u4e49\u7684\u6240\u6709\u8fd0\u7b97\u7b26\u3002\u5bf9\u4e8e\u4efb\u4f55\u89c4\u8303\u4e2d\u672a\u5b9a\u4e49\u7684\u81ea\u5b9a\u4e49\u8fd0\u7b97\u7b26\uff0c\u5b83\u4fdd\u6301\u6c89\u9ed8\u3002</p> <p>\u5f62\u72b6\u63a8\u65ad\u6709\u4e00\u4e2a\u76ee\u7684\uff1a\u4f30\u8ba1\u4e2d\u95f4\u7ed3\u679c\u7684\u5f62\u72b6\u548c\u7c7b\u578b\u3002\u5982\u679c\u5df2\u77e5\uff0c\u8fd0\u884c\u65f6\u53ef\u4ee5\u9884\u5148\u4f30\u8ba1\u5185\u5b58\u6d88\u8017\u5e76\u4f18\u5316\u8ba1\u7b97\u3002\u5b83\u53ef\u4ee5\u878d\u5408\u4e00\u4e9b\u8fd0\u7b97\u7b26\uff0c\u5b83\u53ef\u4ee5\u8fdb\u884c\u73b0\u573a\u8ba1\u7b97\u2026\u2026</p> Python<pre><code>import onnx.parser\nfrom onnx import helper, shape_inference\n\ninput = '''\n    &lt;\n        ir_version: 8,\n        opset_import: [ \"\" : 15]\n    &gt;\n    agraph (float[I,4] X, float[4,2] A, float[4] B) =&gt; (float[I] Y) {\n        XA = MatMul(X, A)\n        Y = Add(XA, B)\n    }\n    '''\nonnx_model = onnx.parser.parse_model(input)\ninferred_model = shape_inference.infer_shapes(onnx_model)\n\nprint(inferred_model)\n</code></pre> Bash<pre><code>ir_version: 8\ngraph {\n  node {\n    input: \"X\"\n    input: \"A\"\n    output: \"XA\"\n    op_type: \"MatMul\"\n    domain: \"\"\n  }\n  node {\n    input: \"XA\"\n    input: \"B\"\n    output: \"Y\"\n    op_type: \"Add\"\n    domain: \"\"\n  }\n  name: \"agraph\"\n  input {\n    name: \"X\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n            dim_param: \"I\"\n          }\n          dim {\n            dim_value: 4\n          }\n        }\n      }\n    }\n  }\n  input {\n    name: \"A\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n            dim_value: 4\n          }\n          dim {\n            dim_value: 2\n          }\n        }\n      }\n    }\n  }\n  input {\n    name: \"B\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n            dim_value: 4\n          }\n        }\n      }\n    }\n  }\n  output {\n    name: \"Y\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n            dim_param: \"I\"\n          }\n        }\n      }\n    }\n  }\n  value_info {\n    name: \"XA\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n            dim_param: \"I\"\n          }\n          dim {\n            dim_value: 2\n          }\n        }\n      }\n    }\n  }\n}\nopset_import {\n  domain: \"\"\n  version: 15\n}\n</code></pre> <p>\u6709\u4e00\u4e2a\u65b0\u7684\u5c5e\u6027value_info\u7528\u4e8e\u5b58\u50a8\u63a8\u65ad\u7684\u5f62\u72b6\u3002\u5b57\u6bcdI\u53ef\u4ee5\u770b\u4f5c\u4e00\u4e2a\u53d8\u91cf\u3002\u5b83\u53d6\u51b3\u4e8e\u8f93\u5165\uff0c\u4f46\u51fd\u6570\u80fd\u591f\u5224\u65ad\u54ea\u4e2a\u4e2d\u95f4\u7ed3\u679c\u5c06\u5171\u4eab\u76f8\u540c\u7684\u7ef4\u5ea6\u3002\u5f62\u72b6\u63a8\u65ad\u5e76\u4e0d\u603b\u662f\u6709\u6548\u3002\u4f8b\u5982\uff0cReshape \u8fd0\u7b97\u7b26\u3002\u5f62\u72b6\u63a8\u65ad\u4ec5\u5728\u5f62\u72b6\u6052\u5b9a\u65f6\u624d\u6709\u6548\u3002\u5982\u679c\u4e0d\u662f\u6052\u5b9a\u7684\uff0c\u5219\u9664\u975e\u4ee5\u4e0b\u8282\u70b9\u9700\u8981\u7279\u5b9a\u5f62\u72b6\uff0c\u5426\u5219\u65e0\u6cd5\u8f7b\u677e\u63a8\u65ad\u5f62\u72b6\u3002dim_param: \"I\"</p>"},{"location":"onnx/onnx_with_python/#_18","title":"\u8bc4\u4f30\u548c\u8fd0\u884c\u65f6","text":"<p>ONNX \u6807\u51c6\u5141\u8bb8\u6846\u67b6\u4ee5 ONNX \u683c\u5f0f\u5bfc\u51fa\u7ecf\u8fc7\u8bad\u7ec3\u7684\u6a21\u578b\uff0c\u5e76\u4f7f\u7528\u652f\u6301 ONNX \u683c\u5f0f\u7684\u4efb\u4f55\u540e\u7aef\u8fdb\u884c\u63a8\u7406\u3002onnxruntime \u662f\u4e00\u79cd\u6709\u6548\u7684\u9009\u9879\u3002\u5b83\u9002\u7528\u4e8e\u8bb8\u591a\u5e73\u53f0\u3002\u5b83\u9488\u5bf9\u5feb\u901f\u63a8\u7406\u8fdb\u884c\u4e86\u4f18\u5316\u3002\u53ef\u4ee5\u5728ONNX\u540e\u7aef\u4eea\u8868\u677f\u4e0a\u8ddf\u8e2a\u5176\u8986\u76d6\u8303\u56f4 \u3002onnx \u5b9e\u73b0\u4e86\u4e00\u4e2a\u6709\u52a9\u4e8e\u7406\u89e3\u6a21\u578b\u7684 Python \u8fd0\u884c\u65f6\u3002\u5b83\u4e0d\u9002\u7528\u4e8e\u751f\u4ea7\uff0c\u6027\u80fd\u4e5f\u4e0d\u662f\u76ee\u6807\u3002</p>"},{"location":"onnx/onnx_with_python/#_19","title":"\u7ebf\u6027\u56de\u5f52\u7684\u8bc4\u4f30","text":"<p>\u5b8c\u6574 API \u63cf\u8ff0\u4e8eonnx.reference\u3002\u5b83\u9700\u8981\u4e00\u4e2a\u6a21\u578b\uff08ModelProto\u3001\u6587\u4ef6\u540d\u7b49\uff09\u3002\u65b9\u6cd5run\u8fd4\u56de\u5b57\u5178\u4e2d\u6307\u5b9a\u7684\u4e00\u7ec4\u7ed9\u5b9a\u8f93\u5165\u7684\u8f93\u51fa\u3002</p> <p>Python<pre><code>import numpy\nfrom onnx import numpy_helper, TensorProto\nfrom onnx.helper import (\n    make_model, make_node, set_model_props, make_tensor,\n    make_graph, make_tensor_value_info)\nfrom onnx.checker import check_model\nfrom onnx.reference import ReferenceEvaluator\n\nX = make_tensor_value_info('X', TensorProto.FLOAT, [None, None])\nA = make_tensor_value_info('A', TensorProto.FLOAT, [None, None])\nB = make_tensor_value_info('B', TensorProto.FLOAT, [None, None])\nY = make_tensor_value_info('Y', TensorProto.FLOAT, [None])\nnode1 = make_node('MatMul', ['X', 'A'], ['XA'])\nnode2 = make_node('Add', ['XA', 'B'], ['Y'])\ngraph = make_graph([node1, node2], 'lr', [X, A, B], [Y])\nonnx_model = make_model(graph)\ncheck_model(onnx_model)\n\nsess = ReferenceEvaluator(onnx_model)\n\nx = numpy.random.randn(4, 2).astype(numpy.float32)\na = numpy.random.randn(2, 1).astype(numpy.float32)\nb = numpy.random.randn(1, 1).astype(numpy.float32)\nfeeds = {'X': x, 'A': a, 'B': b}\n\nprint(sess.run(None, feeds))\n</code></pre> Bash<pre><code>[array([[ 3.7574928],\n       [ 1.4951284],\n       [ 1.0837387],\n       [-0.7525861]], dtype=float32)]\n</code></pre></p>"},{"location":"onnx/onnx_with_python/#_20","title":"\u8282\u70b9\u8bc4\u4f30","text":"<p>\u8bc4\u4f30\u8005\u8fd8\u53ef\u4ee5\u8bc4\u4f30\u4e00\u4e2a\u7b80\u5355\u8282\u70b9\u6765\u68c0\u67e5\u64cd\u4f5c\u5458\u5bf9\u7279\u5b9a\u8f93\u5165\u7684\u884c\u4e3a\u3002 Python<pre><code>import numpy\nfrom onnx import numpy_helper, TensorProto\nfrom onnx.helper import make_node\n\nfrom onnx.reference import ReferenceEvaluator\n\nnode = make_node('EyeLike', ['X'], ['Y'])\n\nsess = ReferenceEvaluator(node)\n\nx = numpy.random.randn(4, 2).astype(numpy.float32)\nfeeds = {'X': x}\n\nprint(sess.run(None, feeds))\n</code></pre></p> Bash<pre><code>[array([[1., 0.],\n       [0., 1.],\n       [0., 0.],\n       [0., 0.]], dtype=float32)]\n</code></pre> <p>\u7c7b\u4f3c\u7684\u4ee3\u7801\u4e5f\u9002\u7528\u4e8eGraphProto\u6216FunctionProto\u3002</p>"},{"location":"onnx/onnx_with_python/#_21","title":"\u9010\u6b65\u8bc4\u4f30","text":"<p>\u8f6c\u6362\u5e93\u91c7\u7528\u4f7f\u7528\u673a\u5668\u5b66\u4e60\u6846\u67b6\uff08pytorch\u3001scikit-learn\u7b49\uff09\u8bad\u7ec3\u7684\u73b0\u6709\u6a21\u578b\uff0c\u5e76\u5c06\u8be5\u6a21\u578b\u8f6c\u6362\u4e3a ONNX \u56fe\u3002\u590d\u6742\u6a21\u578b\u901a\u5e38\u4e0d\u4f1a\u5728\u7b2c\u4e00\u6b21\u5c1d\u8bd5\u65f6\u8d77\u4f5c\u7528\uff0c\u67e5\u770b\u4e2d\u95f4\u7ed3\u679c\u53ef\u80fd\u6709\u52a9\u4e8e\u627e\u5230\u8f6c\u6362\u9519\u8bef\u7684\u90e8\u5206\u3002\u53c2\u6570verbose\u663e\u793a\u6709\u5173\u4e2d\u95f4\u7ed3\u679c\u7684\u4fe1\u606f\u3002</p> <p>Python<pre><code>import numpy\nfrom onnx import numpy_helper, TensorProto\nfrom onnx.helper import (\n    make_model, make_node, set_model_props, make_tensor,\n    make_graph, make_tensor_value_info)\nfrom onnx.checker import check_model\nfrom onnx.reference import ReferenceEvaluator\n\nX = make_tensor_value_info('X', TensorProto.FLOAT, [None, None])\nA = make_tensor_value_info('A', TensorProto.FLOAT, [None, None])\nB = make_tensor_value_info('B', TensorProto.FLOAT, [None, None])\nY = make_tensor_value_info('Y', TensorProto.FLOAT, [None])\nnode1 = make_node('MatMul', ['X', 'A'], ['XA'])\nnode2 = make_node('Add', ['XA', 'B'], ['Y'])\ngraph = make_graph([node1, node2], 'lr', [X, A, B], [Y])\nonnx_model = make_model(graph)\ncheck_model(onnx_model)\n\nfor verbose in [1, 2, 3, 4]:\n    print()\n    print(f\"------ verbose={verbose}\")\n    print()\n    sess = ReferenceEvaluator(onnx_model, verbose=verbose)\n\n    x = numpy.random.randn(4, 2).astype(numpy.float32)\n    a = numpy.random.randn(2, 1).astype(numpy.float32)\n    b = numpy.random.randn(1, 1).astype(numpy.float32)\n    feeds = {'X': x, 'A': a, 'B': b}\n\n    print(sess.run(None, feeds))\n</code></pre> Bash<pre><code>------ verbose=1\n\n[array([[-3.0709705],\n       [-3.9643714],\n       [-3.3978167],\n       [-1.5986354]], dtype=float32)]\n\n------ verbose=2\n\nMatMul(X, A) -&gt; XA\nAdd(XA, B) -&gt; Y\n[array([[-1.0014315],\n       [-1.7232705],\n       [-2.908271 ],\n       [-3.8357327]], dtype=float32)]\n\n------ verbose=3\n\n +I X: float32:(4, 2) in [-1.142913579940796, 0.7031221985816956]\n +I A: float32:(2, 1) in [-2.0527687072753906, -0.8769862055778503]\n +I B: float32:(1, 1) in [-0.35991907119750977, -0.35991907119750977]\nMatMul(X, A) -&gt; XA\n + XA: float32:(4, 1) in [-0.6025412678718567, 2.241786003112793]\nAdd(XA, B) -&gt; Y\n + Y: float32:(4, 1) in [-0.9624603390693665, 1.8818669319152832]\n[array([[ 1.8818669 ],\n       [-0.96246034],\n       [ 0.6445193 ],\n       [-0.07070675]], dtype=float32)]\n\n------ verbose=4\n\n +I X: float32:(4, 2):0.3453322649002075,0.5269743800163269,0.43770021200180054,-0.9788240194320679,-0.2000599205493927...\n +I A: float32:(2, 1):[-0.567805826663971, -0.37489286065101624]\n +I B: float32:(1, 1):[0.04381459206342697]\nMatMul(X, A) -&gt; XA\n + XA: float32:(4, 1):[-0.3936406075954437, 0.1184254139661789, 0.5723494291305542, 0.5118365287780762]\nAdd(XA, B) -&gt; Y\n + Y: float32:(4, 1):[-0.34982600808143616, 0.16223999857902527, 0.6161640286445618, 0.5556511282920837]\n[array([[-0.349826 ],\n       [ 0.16224  ],\n       [ 0.616164 ],\n       [ 0.5556511]], dtype=float32)]\n</code></pre></p>"},{"location":"onnx/onnx_with_python/#_22","title":"\u8bc4\u4f30\u81ea\u5b9a\u4e49\u8282\u70b9","text":"<p>\u4e0b\u9762\u7684\u4f8b\u5b50\u4ecd\u7136\u5b9e\u73b0\u7ebf\u6027\u56de\u5f52\uff0c\u4f46\u662f\u5c06\u5355\u4f4d\u77e9\u9635\u6dfb\u52a0\u5230A\uff1a</p> Python<pre><code>import numpy\nfrom onnx import numpy_helper, TensorProto\nfrom onnx.helper import (\n    make_model, make_node, set_model_props, make_tensor,\n    make_graph, make_tensor_value_info)\nfrom onnx.checker import check_model\nfrom onnx.reference import ReferenceEvaluator\n\nX = make_tensor_value_info('X', TensorProto.FLOAT, [None, None])\nA = make_tensor_value_info('A', TensorProto.FLOAT, [None, None])\nB = make_tensor_value_info('B', TensorProto.FLOAT, [None, None])\nY = make_tensor_value_info('Y', TensorProto.FLOAT, [None])\nnode0 = make_node('EyeLike', ['A'], ['Eye'])\nnode1 = make_node('Add', ['A', 'Eye'], ['A1'])\nnode2 = make_node('MatMul', ['X', 'A1'], ['XA1'])\nnode3 = make_node('Add', ['XA1', 'B'], ['Y'])\ngraph = make_graph([node0, node1, node2, node3], 'lr', [X, A, B], [Y])\nonnx_model = make_model(graph)\ncheck_model(onnx_model)\nwith open(\"linear_regression.onnx\", \"wb\") as f:\n    f.write(onnx_model.SerializeToString())\n\nsess = ReferenceEvaluator(onnx_model, verbose=2)\n\nx = numpy.random.randn(4, 2).astype(numpy.float32)\na = numpy.random.randn(2, 2).astype(numpy.float32) / 10\nb = numpy.random.randn(1, 2).astype(numpy.float32)\nfeeds = {'X': x, 'A': a, 'B': b}\n\nprint(sess.run(None, feeds))\n</code></pre> Bash<pre><code>EyeLike(A) -&gt; Eye\nAdd(A, Eye) -&gt; A1\nMatMul(X, A1) -&gt; XA1\nAdd(XA1, B) -&gt; Y\n[array([[ 2.1372705 ,  1.7686903 ],\n       [-0.6369117 , -0.00957918],\n       [ 0.8815058 ,  1.8614801 ],\n       [ 2.529335  ,  3.9602785 ]], dtype=float32)]\n</code></pre> <p>\u5982\u679c\u6211\u4eec\u5c06EyeLike\u548cAdd\u8fd0\u7b97\u7b26\u7ec4\u5408\u6210AddEyeLike\u4f1a\u600e\u6837\uff1f\u8fd9\u4f1a\u4f7f\u5176\u66f4\u52a0\u9ad8\u6548\u3002\u4e0b\u4e00\u4e2a\u793a\u4f8b\u5c06\u8fd9\u4e24\u4e2a\u8fd0\u7b97\u7b26\u66ff\u6362\u4e3a\u57df\u4e2d\u7684\u4e00\u4e2a\u8fd0\u7b97\u7b26'optimized'\u3002</p> Python<pre><code>import numpy\nfrom onnx import numpy_helper, TensorProto\nfrom onnx.helper import (\n    make_model, make_node, set_model_props, make_tensor,\n    make_graph, make_tensor_value_info, make_opsetid)\nfrom onnx.checker import check_model\n\nX = make_tensor_value_info('X', TensorProto.FLOAT, [None, None])\nA = make_tensor_value_info('A', TensorProto.FLOAT, [None, None])\nB = make_tensor_value_info('B', TensorProto.FLOAT, [None, None])\nY = make_tensor_value_info('Y', TensorProto.FLOAT, [None])\n\nnode01 = make_node('AddEyeLike', ['A'], ['A1'], domain='optimized')\n\nnode2 = make_node('MatMul', ['X', 'A1'], ['XA1'])\nnode3 = make_node('Add', ['XA1', 'B'], ['Y'])\ngraph = make_graph([node01, node2, node3], 'lr', [X, A, B], [Y])\n\nonnx_model = make_model(graph, opset_imports=[\n    make_opsetid('', 18), make_opsetid('optimized', 1)\n])\n\ncheck_model(onnx_model)\nwith open(\"linear_regression_improved.onnx\", \"wb\") as f:\n    f.write(onnx_model.SerializeToString())\n</code></pre> <p>\u6211\u4eec\u9700\u8981\u8bc4\u4f30\u8fd9\u4e2a\u6a21\u578b\u662f\u5426\u7b49\u540c\u4e8e\u7b2c\u4e00\u4e2a\u6a21\u578b\u3002\u8fd9\u9700\u8981\u9488\u5bf9\u8fd9\u4e2a\u7279\u5b9a\u8282\u70b9\u8fdb\u884c\u5b9e\u73b0\u3002 Python<pre><code>import numpy\nfrom onnx.reference import ReferenceEvaluator\nfrom onnx.reference.op_run import OpRun\n\nclass AddEyeLike(OpRun):\n\n    op_domain = \"optimized\"\n\n    def _run(self, X, alpha=1.):\n        assert len(X.shape) == 2\n        assert X.shape[0] == X.shape[1]\n        X = X.copy()\n        ind = numpy.diag_indices(X.shape[0])\n        X[ind] += alpha\n        return (X,)\n\nsess = ReferenceEvaluator(\"linear_regression_improved.onnx\", verbose=2, new_ops=[AddEyeLike])\n\nx = numpy.random.randn(4, 2).astype(numpy.float32)\na = numpy.random.randn(2, 2).astype(numpy.float32) / 10\nb = numpy.random.randn(1, 2).astype(numpy.float32)\nfeeds = {'X': x, 'A': a, 'B': b}\n\nprint(sess.run(None, feeds))\n\n# Let's check with the previous model.\n\nsess0 = ReferenceEvaluator(\"linear_regression.onnx\",)\nsess1 = ReferenceEvaluator(\"linear_regression_improved.onnx\", new_ops=[AddEyeLike])\n\ny0 = sess0.run(None, feeds)[0]\ny1 = sess1.run(None, feeds)[0]\nprint(y0)\nprint(y1)\nprint(f\"difference: {numpy.abs(y0 - y1).max()}\")\n</code></pre></p> <p>Bash<pre><code>AddEyeLike(A) -&gt; A1\nMatMul(X, A1) -&gt; XA1\nAdd(XA1, B) -&gt; Y\n[array([[-1.2722642 , -0.1207931 ],\n       [ 0.64181894,  0.47749406],\n       [ 0.47565097,  1.2095331 ],\n       [ 0.2499994 ,  3.6677973 ]], dtype=float32)]\n[[-1.2722642  -0.1207931 ]\n [ 0.64181894  0.47749406]\n [ 0.47565097  1.2095331 ]\n [ 0.2499994   3.6677973 ]]\n[[-1.2722642  -0.1207931 ]\n [ 0.64181894  0.47749406]\n [ 0.47565097  1.2095331 ]\n [ 0.2499994   3.6677973 ]]\ndifference: 0.0\n</code></pre> \u9884\u6d4b\u662f\u76f8\u540c\u7684\u3002\u8ba9\u6211\u4eec\u5728\u4e00\u4e2a\u8db3\u591f\u5927\u7684\u77e9\u9635\u4e0a\u6bd4\u8f83\u4e00\u4e0b\u6027\u80fd\uff0c\u4ee5\u53d1\u73b0\u663e\u8457\u7684\u5dee\u5f02\u3002</p> Python<pre><code>import timeit\nimport numpy\nfrom onnx.reference import ReferenceEvaluator\nfrom onnx.reference.op_run import OpRun\n\nclass AddEyeLike(OpRun):\n\n    op_domain = \"optimized\"\n\n    def _run(self, X, alpha=1.):\n        assert len(X.shape) == 2\n        assert X.shape[0] == X.shape[1]\n        X = X.copy()\n        ind = numpy.diag_indices(X.shape[0])\n        X[ind] += alpha\n        return (X,)\n\nsess = ReferenceEvaluator(\"linear_regression_improved.onnx\", verbose=2, new_ops=[AddEyeLike])\n\nx = numpy.random.randn(4, 100).astype(numpy.float32)\na = numpy.random.randn(100, 100).astype(numpy.float32) / 10\nb = numpy.random.randn(1, 100).astype(numpy.float32)\nfeeds = {'X': x, 'A': a, 'B': b}\n\nsess0 = ReferenceEvaluator(\"linear_regression.onnx\")\nsess1 = ReferenceEvaluator(\"linear_regression_improved.onnx\", new_ops=[AddEyeLike])\n\ny0 = sess0.run(None, feeds)[0]\ny1 = sess1.run(None, feeds)[0]\nprint(f\"difference: {numpy.abs(y0 - y1).max()}\")\nprint(f\"time with EyeLike+Add: {timeit.timeit(lambda: sess0.run(None, feeds), number=1000)}\")\nprint(f\"time with AddEyeLike: {timeit.timeit(lambda: sess1.run(None, feeds), number=1000)}\")\n</code></pre> Bash<pre><code>difference: 0.0\ntime with EyeLike+Add: 0.08985151199999564\ntime with AddEyeLike: 0.0732065079999984\n</code></pre> <p>\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u4f3c\u4e4e\u503c\u5f97\u6dfb\u52a0\u4e00\u4e2a\u4f18\u5316\u8282\u70b9\u3002\u8fd9\u79cd\u4f18\u5316\u901a\u5e38\u79f0\u4e3a\u878d\u5408\u3002\u4e24\u4e2a\u8fde\u7eed\u7684\u8fd0\u7b97\u7b26\u88ab\u878d\u5408\u6210\u4e24\u8005\u7684\u4f18\u5316\u7248\u672c\u3002\u751f\u4ea7\u901a\u5e38\u4f9d\u8d56\u4e8eonnxruntime\uff0c\u4f46\u7531\u4e8e\u4f18\u5316\u4f7f\u7528\u57fa\u672c\u77e9\u9635\u8fd0\u7b97\uff0c\u56e0\u6b64\u5b83\u5e94\u8be5\u5728\u4efb\u4f55\u5176\u4ed6\u8fd0\u884c\u65f6\u4e0a\u5e26\u6765\u76f8\u540c\u7684\u6027\u80fd\u63d0\u5347\u3002</p>"},{"location":"onnx/onnx_with_python/#_23","title":"\u5b9e\u73b0\u7ec6\u8282","text":""},{"location":"onnx/onnx_with_python/#python-c","title":"Python \u548c C++","text":"<p>onnx \u4f9d\u8d56 protobuf \u6765\u5b9a\u4e49\u5176\u7c7b\u578b\u3002\u60a8\u53ef\u80fd\u4f1a\u8ba4\u4e3a python \u5bf9\u8c61\u53ea\u662f\u5185\u90e8\u7ed3\u6784\u4e0a C \u6307\u9488\u7684\u5305\u88c5\u5668\u3002\u56e0\u6b64\uff0c\u5e94\u8be5\u53ef\u4ee5\u4ece\u63a5\u6536\u7c7b\u578b \u7684 python \u5bf9\u8c61\u7684\u51fd\u6570\u8bbf\u95ee\u5185\u90e8\u6570\u636eModelProto\u3002\u4f46\u4e8b\u5b9e\u5e76\u975e\u5982\u6b64\u3002\u6839\u636e Protobuf 4 \u7684\u66f4\u6539\uff0c\u5728\u7248\u672c 4 \u4e4b\u540e\u8fd9\u4e0d\u518d\u53ef\u80fd\uff0c\u66f4\u5b89\u5168\u7684\u5047\u8bbe\u662f\u83b7\u53d6\u5185\u5bb9\u7684\u552f\u4e00\u65b9\u6cd5\u662f\u5c06\u6a21\u578b\u5e8f\u5217\u5316\u4e3a\u5b57\u8282\uff0c\u5c06\u5176\u63d0\u4f9b\u7ed9 C \u51fd\u6570\uff0c\u7136\u540e\u5bf9\u5176\u8fdb\u884c\u53cd\u5e8f\u5217\u5316\u3002\u5728\u4f7f\u7528 C \u4ee3\u7801\u68c0\u67e5\u6a21\u578b\u4e4b\u524d\uff0ccheck_model\u6216\u4e4b \u7c7b\u7684\u51fd\u6570shape_inference\u4f1a\u8c03\u7528SerializeToStringthen \u3002ParseFromString</p>"},{"location":"onnx/onnx_with_python/#_24","title":"\u5c5e\u6027\u548c\u8f93\u5165","text":"<p>\u4e24\u8005\u4e4b\u95f4\u6709\u660e\u663e\u7684\u533a\u522b\u3002\u8f93\u5165\u662f\u52a8\u6001\u7684\uff0c\u6bcf\u6b21\u6267\u884c\u65f6\u90fd\u53ef\u80fd\u53d1\u751f\u53d8\u5316\u3002\u5c5e\u6027\u6c38\u8fdc\u4e0d\u4f1a\u6539\u53d8\uff0c\u4f18\u5316\u5668\u53ef\u4ee5\u5047\u8bbe\u5b83\u6c38\u8fdc\u4e0d\u4f1a\u6539\u53d8\uff0c\u4ece\u800c\u6539\u8fdb\u6267\u884c\u56fe\u3002\u56e0\u6b64\uff0c\u4e0d\u53ef\u80fd\u5c06\u8f93\u5165\u8f6c\u6362\u4e3a\u5c5e\u6027\u3002\u8fd0\u7b97\u7b26Constant\u662f\u552f\u4e00\u5c06\u5c5e\u6027\u8f6c\u6362\u4e3a\u8f93\u5165\u7684\u8fd0\u7b97\u7b26\u3002</p>"},{"location":"onnx/onnx_with_python/#_25","title":"\u6709\u5f62\u6216\u65e0\u5f62","text":"<p>onnx \u901a\u5e38\u5047\u8bbe\u5df2\u77e5\u79e9\uff08\u6216\u7ef4\u6570\uff09\uff0c\u5e76\u671f\u671b\u6bcf\u4e2a\u8f93\u5165\u6216\u8f93\u51fa\u90fd\u6709\u4e00\u4e2a\u5f62\u72b6\u3002\u5982\u679c\u6211\u4eec\u9700\u8981\u4e3a\u6bcf\u4e2a\u7ef4\u5ea6\u521b\u5efa\u4e00\u4e2a\u6709\u6548\u7684\u56fe\u600e\u4e48\u529e\uff1f\u8fd9\u79cd\u60c5\u51b5\u4ecd\u7136\u4ee4\u4eba\u8d39\u89e3\u3002</p> Python<pre><code>import numpy\nfrom onnx import numpy_helper, TensorProto, FunctionProto\nfrom onnx.helper import (\n    make_model, make_node, set_model_props, make_tensor,\n    make_graph, make_tensor_value_info, make_opsetid,\n    make_function)\nfrom onnx.checker import check_model\nfrom onnxruntime import InferenceSession\n\ndef create_model(shapes):\n    new_domain = 'custom'\n    opset_imports = [make_opsetid(\"\", 14), make_opsetid(new_domain, 1)]\n\n    node1 = make_node('MatMul', ['X', 'A'], ['XA'])\n    node2 = make_node('Add', ['XA', 'A'], ['Y'])\n\n    X = make_tensor_value_info('X', TensorProto.FLOAT, shapes['X'])\n    A = make_tensor_value_info('A', TensorProto.FLOAT, shapes['A'])\n    Y = make_tensor_value_info('Y', TensorProto.FLOAT, shapes['Y'])\n\n    graph = make_graph([node1, node2], 'example', [X, A], [Y])\n\n    onnx_model = make_model(graph, opset_imports=opset_imports)\n    # Let models runnable by onnxruntime with a released ir_version\n    onnx_model.ir_version = 8\n\n    return onnx_model\n\nprint(\"----------- case 1: 2D x 2D -&gt; 2D\")\nonnx_model = create_model({'X': [None, None], 'A': [None, None], 'Y': [None, None]})\ncheck_model(onnx_model)\nsess = InferenceSession(onnx_model.SerializeToString(),\n                        providers=[\"CPUExecutionProvider\"])\nres = sess.run(None, {\n    'X': numpy.random.randn(2, 2).astype(numpy.float32),\n    'A': numpy.random.randn(2, 2).astype(numpy.float32)})\nprint(res)\n\nprint(\"----------- case 2: 2D x 1D -&gt; 1D\")\nonnx_model = create_model({'X': [None, None], 'A': [None], 'Y': [None]})\ncheck_model(onnx_model)\nsess = InferenceSession(onnx_model.SerializeToString(),\n                        providers=[\"CPUExecutionProvider\"])\nres = sess.run(None, {\n    'X': numpy.random.randn(2, 2).astype(numpy.float32),\n    'A': numpy.random.randn(2).astype(numpy.float32)})\nprint(res)\n\nprint(\"----------- case 3: 2D x 0D -&gt; 0D\")\nonnx_model = create_model({'X': [None, None], 'A': [], 'Y': []})\ncheck_model(onnx_model)\ntry:\n    InferenceSession(onnx_model.SerializeToString(),\n                     providers=[\"CPUExecutionProvider\"])\nexcept Exception as e:\n    print(e)\n\nprint(\"----------- case 4: 2D x None -&gt; None\")\nonnx_model = create_model({'X': [None, None], 'A': None, 'Y': None})\ntry:\n    check_model(onnx_model)\nexcept Exception as e:\n    print(type(e), e)\nsess = InferenceSession(onnx_model.SerializeToString(),\n                        providers=[\"CPUExecutionProvider\"])\nres = sess.run(None, {\n    'X': numpy.random.randn(2, 2).astype(numpy.float32),\n    'A': numpy.random.randn(2).astype(numpy.float32)})\nprint(res)\nprint(\"----------- end\")\n</code></pre> Bash<pre><code>----------- case 1: 2D x 2D -&gt; 2D\n[array([[-0.88513166, -1.4549615 ],\n       [-0.38629988, -2.4992924 ]], dtype=float32)]\n----------- case 2: 2D x 1D -&gt; 1D\n[array([-1.3339046, -4.186163 ], dtype=float32)]\n----------- case 3: 2D x 0D -&gt; 0D\n[ONNXRuntimeError] : 1 : FAIL : Node () Op (MatMul) [ShapeInferenceError] Input tensors of wrong rank (0).\n----------- case 4: 2D x None -&gt; None\n&lt;class 'onnx.onnx_cpp2py_export.checker.ValidationError'&gt; Field 'shape' of 'type' is required but missing.\n[array([-1.2411526,  1.8771248], dtype=float32)]\n----------- end\n</code></pre>"},{"location":"rag/generation/question/","title":"RAG \u56de\u590d\u751f\u6210\u95ee\u9898","text":""},{"location":"rag/generation/question/#_1","title":"\u80cc\u666f","text":"<p>\u68c0\u7d22\u589e\u5f3a\u751f\u6210\uff08RAG\uff09\u662f\u4e00\u79cd\u5f88\u6709\u524d\u9014\u7684\u51cf\u8f7b\u5927\u578b\u8bed\u8a00\u6a21\u578b\uff08LLM\uff09\u5e7b\u89c9\u7684\u65b9\u6cd5\uff0c\u4f46\u662fRAG\u5e76\u4e0d\u662f\u4e07\u80fd\u7684\u3002\u8bba\u6587 Benchmarking Large Language Models in Retrieval-Augmented Generation \u63d0\u51fa\u4e86 RAG \u5728\u751f\u6210\u9636\u6bb5\u9700\u8981\u9762\u5bf9\u7684\u56db\u79cd\u60c5\u51b5\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> RAG \u751f\u6210\u9762\u4e34\u7684\u95ee\u9898 \u8be6\u7ec6\u60c5\u51b5 \u566a\u58f0\u9c81\u68d2\u6027 LLM \u751f\u6210\u6a21\u578b\u53ef\u4ee5\u4ece\u566a\u58f0\u6587\u6863\u4e2d\u63d0\u53d6\u6709\u7528\u7684\u4fe1\u606f\u3002\u8bba\u6587\u4e2d\uff0c\u5c06\u566a\u58f0\u6587\u6863\u5b9a\u4e49\u4e3a\u4e0e\u95ee\u9898\u76f8\u5173\u4f46\u4e0d\u5305\u542b\u4efb\u4f55\u7b54\u6848\u4fe1\u606f\u7684\u6587\u6863\u3002\u4f8b\u5982\uff0c\u5728\u4e0b\u56fe\u4e2d\uff0c\u4e0e\u3010\u8c01\u88ab\u6388\u4e882022\u5e74\u8bfa\u8d1d\u5c14\u6587\u5b66\u5956\u3011\u95ee\u9898\u76f8\u5173\u7684\u5608\u6742\u6587\u6863\u5305\u62ec\u5173\u4e8e\u30102021\u5e74\u8bfa\u8d1d\u5c14\u6587\u5b66\u5956\u9879\u3011\u7684\u62a5\u9053\u3002\u4e3a\u6b64\uff0c\u566a\u58f0\u9c81\u68d2\u6027\u6d4b\u8bd5\u6570\u636e\u96c6\u4e2d\u6db5\u76d6\u4e86\u4e0d\u540c\u566a\u58f0\u6bd4\u7684\u6570\u636e\u3002 \u5426\u5b9a\u62d2\u7edd \u8fd9\u610f\u5473\u7740\u5f53\u6240\u9700\u7684\u77e5\u8bc6\u4e0d\u5b58\u5728\u4e8e\u4efb\u4f55\u68c0\u7d22\u5230\u7684\u6587\u6863\u4e2d\u65f6\uff0c\u6a21\u578b\u5e94\u8be5\u62d2\u7edd\u56de\u7b54\u95ee\u9898\u3002\u5426\u5b9a\u62d2\u7edd\u7684\u6d4b\u8bd5\u6570\u636e\u96c6\u4e2d\uff0c\u68c0\u7d22\u5230\u7684\u6587\u6863\u4ec5\u5305\u542b\u5608\u6742\u6587\u6863\u7684\u6570\u636e\u3002LLM\u5e94\u6307\u793a\u3010\u4fe1\u606f\u4e0d\u8db3\u3011\u6216\u5176\u4ed6\u62d2\u7edd\u4fe1\u53f7\u3002 \u4fe1\u606f\u96c6\u6210 \u8bc4\u4f30\u6a21\u578b\u662f\u5426\u80fd\u591f\u56de\u7b54\u7528\u6237\u95ee\u9898\u9700\u8981\u96c6\u6210\u591a\u4e2a\u6587\u6863\u4fe1\u606f\u3002\u5bf9\u4e8e\u4e0b\u56fe\u4e2d\u7684\u793a\u4f8b\uff0c\u3010\u9002\u7528\u4e8eiOS\u7684ChatGPT\u5e94\u7528\u7a0b\u5e8f\u548cChatGPT api\u662f\u4f55\u65f6\u542f\u52a8\u7684\uff1f\u3011\u8fd9\u4e00\u95ee\u9898\uff0cLLM\u5e94\u63d0\u4f9b\u6709\u5173iOS\u4e0a\u7684ChatGPT\u5e94\u7528\u7a0b\u5e8f\u548c ChatGPT api \u7684\u542f\u52a8\u65e5\u671f\u7684\u4fe1\u606f\u3002\u4fe1\u606f\u96c6\u6210\u7684\u6d4b\u8bd5\u6570\u636e\u4e2d\uff0c\u4f7f\u7528\u68c0\u7d22\u5230\u7684\u591a\u4e2a\u6587\u6863\u5305\u56de\u7b54\u7528\u6237\u95ee\u9898\u3002 \u53cd\u4e8b\u5b9e\u7a33\u5065\u6027 \u8bc4\u4f30\u5f53LLM\u901a\u8fc7\u6307\u4ee4\u6536\u5230\u5173\u4e8e\u68c0\u7d22\u4fe1\u606f\u4e2d\u6709\u6f5c\u5728\u98ce\u9669\u8fdb\u884c\u8b66\u544a\uff0c\u6a21\u578b\u662f\u5426\u80fd\u591f\u8bc6\u522b\u68c0\u7d22\u6587\u6863\u4e2d\u5df2\u77e5\u4e8b\u5b9e\u9519\u8bef\u7684\u98ce\u9669\u3002\u53cd\u4e8b\u5b9e\u7a33\u5b9a\u6027\u7684\u6d4b\u8bd5\u6570\u636e\u96c6\u4e2d\uff0c\u5305\u62ecLLM\u53ef\u4ee5\u76f4\u63a5\u56de\u7b54\u7684\u7528\u6237\u95ee\u9898\uff0c\u4f46\u5916\u90e8\u6587\u6863\u5305\u542b\u4e8b\u5b9e\u9519\u8bef\u3002 <p>\u5b9a\u4e49\u4e0a\u8ff0\u95ee\u9898\u7684\u56fe\u5982\u4e0b\u6240\u793a\uff1a</p> <p></p>"},{"location":"rag/generation/question/#_2","title":"\u53c2\u8003","text":"<ol> <li>https://arxiv.org/abs/2309.01431</li> <li>https://blog.csdn.net/m0_52695557/article/details/134247484</li> </ol>"},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E5%BC%95%E8%A8%80/","title":"\u5f15\u8a00","text":""},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E5%BC%95%E8%A8%80/#_1","title":"\u52a0\u8f7d\u6570\u636e","text":"<p>LlamaIndex \u4e2d\u6570\u636e\u63d0\u53d6\u7684\u5173\u952e\u662f\u52a0\u8f7d\u5668\u548c\u8f6c\u6362\u3002\u52a0\u8f7d\u6587\u6863\u540e\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u8f6c\u6362\u548c\u8f93\u51fa\u8282\u70b9\u6765\u5904\u7406\u5b83\u4eec\u3002</p> <p>\u5728\u7406\u89e3\u90e8\u5206\u4e86\u89e3\u4e86\u52a0\u8f7d\u6570\u636e\u7684\u57fa\u7840\u77e5\u8bc6\u540e\uff0c\u60a8\u53ef\u4ee5\u7ee7\u7eed\u9605\u8bfb\u4ee5\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff1a</p>"},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E5%BC%95%E8%A8%80/#_2","title":"\u52a0\u8f7d\u5668","text":"<ul> <li><code>SimpleDirectoryReader</code> \u662f Llama-index \u5185\u7f6e\u7684\u52a0\u8f7d\u5668\uff0c\u7528\u4e8e\u4ece\u672c\u5730\u76ee\u5f55\u52a0\u8f7d\u5404\u79cd\u6587\u4ef6\u7c7b\u578b</li> <li><code>LlamaParse</code> \u662f LlamaIndex \u7684\u5b98\u65b9 PDF \u89e3\u6790\u5de5\u5177\uff0c\u53ef\u4f5c\u4e3a\u6258\u7ba1 API \u4f7f\u7528\u3002</li> <li><code>LlamaHub</code> \u662f\u6211\u4eec\u6ce8\u518c\u7684\u6570\u767e\u4e2a\u6570\u636e\u52a0\u8f7d\u5e93\uff0c\u53ef\u4ece\u4efb\u4f55\u6765\u6e90\u63d0\u53d6\u6570\u636e</li> </ul>"},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E5%BC%95%E8%A8%80/#_3","title":"\u53d8\u6362","text":"<p>\u8fd9\u5305\u62ec\u62c6\u5206\u6587\u672c\u7b49\u5e38\u89c1\u64cd\u4f5c\u3002</p> <ul> <li>\u8282\u70b9\u89e3\u6790\u5668\u4f7f\u7528\u6a21\u5f0f\uff0c\u5411\u60a8\u5c55\u793a\u5982\u4f55\u4f7f\u7528\u6211\u4eec\u7684\u8282\u70b9\u89e3\u6790\u5668</li> <li>Node Parser Modules\uff0c\u5c55\u793a\u6211\u4eec\u7684\u6587\u672c\u5206\u5272\u5668\uff08\u53e5\u5b50\u3001\u6807\u8bb0\u3001HTML\u3001JSON\uff09\u548c\u5176\u4ed6\u89e3\u6790\u5668\u6a21\u5757\u3002</li> </ul>"},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E5%BC%95%E8%A8%80/#_4","title":"\u7efc\u5408\u8d77\u6765","text":"<ul> <li>\u63d0\u53d6\u7ba1\u9053\u5141\u8bb8\u60a8\u8bbe\u7f6e\u53ef\u91cd\u590d\u7684\u3001\u7f13\u5b58\u4f18\u5316\u7684\u6570\u636e\u52a0\u8f7d\u8fc7\u7a0b\u3002</li> </ul>"},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E5%BC%95%E8%A8%80/#_5","title":"\u62bd\u8c61","text":"<p>Document \u548c Node \u5bf9\u8c61\u4ee5\u53ca\u5982\u4f55\u9488\u5bf9\u66f4\u9ad8\u7ea7\u7684\u7528\u4f8b\u81ea\u5b9a\u4e49\u5b83\u4eec</p>"},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96/%E5%BC%95%E8%A8%80/","title":"\u6444\u53d6\u7ba1\u9053","text":"<p>\u6570\u636e\u83b7\u53d6 <code>IngestionPipeline</code> \u4f7f\u7528\u53d8\u6362 <code>Transformations</code> \u7684\u6982\u5ff5\u3002\u8fd9\u4e9b\u53d8\u6362 <code>Transformations</code> \u5e94\u7528\u4e8e\u6211\u4eec\u7684\u8f93\u5165\u6570\u636e\uff0c\u5e76\u4e14\u7ed3\u679c\u8282\u70b9\u8981\u4e48\u8fd4\u56de\uff0c\u8981\u4e48\u63d2\u5165\u5230\u77e2\u91cf\u6570\u636e\u5e93\u4e2d\uff08\u5982\u679c\u7ed9\u5b9a\uff09\u3002\u7cfb\u7edf\u7f13\u5b58\u6bcf\u4e2a <code>\u8282\u70b9+\u8f6c\u6362\u5bf9</code> \uff0c\u4ee5\u4fbf\u540e\u7eed\u4f7f\u7528\u76f8\u540c <code>\u8282\u70b9+\u8f6c\u6362</code> \u7ec4\u5408\u7684\u8fd0\u884c\uff08\u5982\u679c\u7f13\u5b58\u88ab\u6301\u4e45\u5316\uff09\u53ef\u4ee5\u4f7f\u7528\u7f13\u5b58\u7ed3\u679c\u5e76\u8282\u7701\u60a8\u7684\u65f6\u95f4\u3002</p> <p>IngestionPipeline\u8981\u67e5\u770b\u6b63\u5728\u4f7f\u7528\u7684\u4ea4\u4e92\u5f0f\u793a\u4f8b\uff0c\u8bf7\u67e5\u770bRAG CLI\u3002</p>"},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96/%E5%BC%95%E8%A8%80/#_2","title":"\u4f7f\u7528\u6a21\u5f0f","text":"<p>\u6700\u7b80\u5355\u7684\u4f7f\u7528 <code>IngestionPipeline</code> \u7684\u65b9\u6cd5\u662f\u50cf\u8fd9\u6837\u5b9e\u4f8b\u5316\uff1a</p> Python<pre><code>from llama_index.core import Document\nfrom llama_index.embeddings.openai import OpenAIEmbedding\nfrom llama_index.core.node_parser import SentenceSplitter\nfrom llama_index.core.extractors import TitleExtractor\nfrom llama_index.core.ingestion import IngestionPipeline, IngestionCache\n\n# create the pipeline with transformations\npipeline = IngestionPipeline(\n    transformations=[\n        SentenceSplitter(chunk_size=25, chunk_overlap=0),\n        TitleExtractor(),\n        OpenAIEmbedding(),\n    ]\n)\n\n# run the pipeline\nnodes = pipeline.run(documents=[Document.example()])\n</code></pre> <p>\u8bf7\u6ce8\u610f\uff0c\u5728\u73b0\u5b9e\u4e16\u754c\u4e2d\uff0c\u60a8\u53ef\u4ee5SimpleDirectoryReader\u4ece Llama Hub \u6216\u5176\u4ed6\u9605\u8bfb\u5668\u83b7\u53d6\u60a8\u7684\u6587\u6863\u3002</p> <p>\u8fde\u63a5\u5230\u77e2\u91cf\u6570\u636e\u5e93# \u8fd0\u884c\u6444\u53d6\u7ba1\u9053\u65f6\uff0c\u60a8\u8fd8\u53ef\u4ee5\u9009\u62e9\u5c06\u751f\u6210\u7684\u8282\u70b9\u81ea\u52a8\u63d2\u5165\u5230\u8fdc\u7a0b\u5411\u91cf\u5b58\u50a8\u4e2d\u3002</p> <p>\u7136\u540e\uff0c\u60a8\u53ef\u4ee5\u7a0d\u540e\u4ece\u8be5\u5411\u91cf\u5b58\u50a8\u6784\u5efa\u7d22\u5f15\u3002</p> <p>from llama_index.core import Document from llama_index.embeddings.openai import OpenAIEmbedding from llama_index.core.node_parser import SentenceSplitter from llama_index.core.extractors import TitleExtractor from llama_index.core.ingestion import IngestionPipeline from llama_index.vector_stores.qdrant import QdrantVectorStore</p> <p>import qdrant_client</p> <p>client = qdrant_client.QdrantClient(location=\":memory:\") vector_store = QdrantVectorStore(client=client, collection_name=\"test_store\")</p> <p>pipeline = IngestionPipeline(     transformations=[         SentenceSplitter(chunk_size=25, chunk_overlap=0),         TitleExtractor(),         OpenAIEmbedding(),     ],     vector_store=vector_store, )</p>"},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96/%E5%BC%95%E8%A8%80/#ingest-directly-into-a-vector-db","title":"Ingest directly into a vector db","text":"<p>pipeline.run(documents=[Document.example()])</p>"},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96/%E5%BC%95%E8%A8%80/#create-your-index","title":"Create your index","text":"<p>from llama_index.core import VectorStoreIndex</p> <p>index = VectorStoreIndex.from_vector_store(vector_store) \u8ba1\u7b97\u7ba1\u9053\u4e2d\u7684\u5d4c\u5165# \u8bf7\u6ce8\u610f\uff0c\u5728\u4e0a\u9762\u7684\u793a\u4f8b\u4e2d\uff0c\u5d4c\u5165\u662f\u4f5c\u4e3a\u7ba1\u9053\u7684\u4e00\u90e8\u5206\u8fdb\u884c\u8ba1\u7b97\u7684\u3002\u5982\u679c\u60a8\u5c06\u7ba1\u9053\u8fde\u63a5\u5230\u5411\u91cf\u5b58\u50a8\uff0c\u5219\u5d4c\u5165\u5fc5\u987b\u662f\u7ba1\u9053\u7684\u4e00\u4e2a\u9636\u6bb5\uff0c\u5426\u5219\u60a8\u7a0d\u540e\u5bf9\u7d22\u5f15\u7684\u5b9e\u4f8b\u5316\u5c06\u5931\u8d25\u3002</p> <p>\u5982\u679c\u60a8\u6ca1\u6709\u8fde\u63a5\u5230\u5411\u91cf\u5b58\u50a8\uff0c\u5219\u53ef\u4ee5\u4ece\u7ba1\u9053\u4e2d\u7701\u7565\u5d4c\u5165\uff0c\u5373\u4ec5\u751f\u6210\u8282\u70b9\u5217\u8868\u3002</p> <p>\u7f13\u5b58# \u5728 \u4e2dIngestionPipeline\uff0c\u6bcf\u4e2a\u8282\u70b9 + \u8f6c\u6362\u7ec4\u5408\u90fd\u7ecf\u8fc7\u54c8\u5e0c\u5904\u7406\u5e76\u7f13\u5b58\u3002\u8fd9\u53ef\u4ee5\u8282\u7701\u4f7f\u7528\u76f8\u540c\u6570\u636e\u7684\u540e\u7eed\u8fd0\u884c\u7684\u65f6\u95f4\u3002</p> <p>\u4ee5\u4e0b\u90e8\u5206\u4ecb\u7ecd\u4e86\u4e00\u4e9b\u6709\u5173\u7f13\u5b58\u7684\u57fa\u672c\u7528\u6cd5\u3002</p> <p>\u672c\u5730\u7f13\u5b58\u7ba1\u7406# \u4e00\u65e6\u60a8\u6709\u4e86\u7ba1\u9053\uff0c\u60a8\u53ef\u80fd\u60f3\u8981\u5b58\u50a8\u548c\u52a0\u8f7d\u7f13\u5b58\u3002</p>"},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96/%E5%BC%95%E8%A8%80/#save","title":"save","text":"<p>pipeline.persist(\"./pipeline_storage\")</p>"},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96/%E5%BC%95%E8%A8%80/#load-and-restore-state","title":"load and restore state","text":"<p>new_pipeline = IngestionPipeline(     transformations=[         SentenceSplitter(chunk_size=25, chunk_overlap=0),         TitleExtractor(),     ], ) new_pipeline.load(\"./pipeline_storage\")</p>"},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96/%E5%BC%95%E8%A8%80/#will-run-instantly-due-to-the-cache","title":"will run instantly due to the cache","text":"<p>nodes = pipeline.run(documents=[Document.example()]) \u5982\u679c\u7f13\u5b58\u592a\u5927\uff0c\u4f60\u53ef\u4ee5\u6e05\u9664\u5b83</p>"},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96/%E5%BC%95%E8%A8%80/#delete-all-context-of-the-cache","title":"delete all context of the cache","text":"<p>cache.clear() \u8fdc\u7a0b\u7f13\u5b58\u7ba1\u7406# \u6211\u4eec\u652f\u6301\u591a\u4e2a\u7f13\u5b58\u8fdc\u7a0b\u5b58\u50a8\u540e\u7aef</p> <p>RedisCache MongoDBCache FirestoreCache \u8fd9\u91cc\u4f7f\u7528\u4ee5\u4e0b\u793a\u4f8bRedisCache\uff1a</p> <p>from llama_index.core import Document from llama_index.embeddings.openai import OpenAIEmbedding from llama_index.core.node_parser import SentenceSplitter from llama_index.core.extractors import TitleExtractor from llama_index.core.ingestion import IngestionPipeline, IngestionCache from llama_index.storage.kvstore.redis import RedisKVStore as RedisCache</p> <p>ingest_cache = IngestionCache(     cache=RedisCache.from_host_and_port(host=\"127.0.0.1\", port=6379),     collection=\"my_test_cache\", )</p> <p>pipeline = IngestionPipeline(     transformations=[         SentenceSplitter(chunk_size=25, chunk_overlap=0),         TitleExtractor(),         OpenAIEmbedding(),     ],     cache=ingest_cache, )</p>"},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96/%E5%BC%95%E8%A8%80/#ingest-directly-into-a-vector-db_1","title":"Ingest directly into a vector db","text":"<p>nodes = pipeline.run(documents=[Document.example()]) \u8fd9\u91cc\u4e0d\u9700\u8981\u6301\u4e45\u6b65\u9aa4\uff0c\u56e0\u4e3a\u6240\u6709\u5185\u5bb9\u90fd\u4f1a\u5728\u6307\u5b9a\u7684\u8fdc\u7a0b\u96c6\u5408\u4e2d\u88ab\u7f13\u5b58\u3002</p> <p>\u5f02\u6b65\u652f\u6301# \u8fd8\u652f\u6301IngestionPipeline\u5f02\u6b65\u64cd\u4f5c</p> <p>nodes = await pipeline.arun(documents=documents) \u6587\u6863\u7ba1\u7406# \u9644\u52a0docstore\u5230\u6444\u53d6\u7ba1\u9053\u5c06\u542f\u7528\u6587\u6863\u7ba1\u7406\u3002</p> <p>\u4f7f\u7528document.doc_id\u6216node.ref_doc_id\u4f5c\u4e3a\u63a5\u5730\u70b9\uff0c\u6444\u53d6\u7ba1\u9053\u5c06\u4e3b\u52a8\u5bfb\u627e\u91cd\u590d\u7684\u6587\u6863\u3002</p> <p>\u5b83\u7684\u5de5\u4f5c\u539f\u7406\u662f\uff1a</p> <p>doc_id\u5b58\u50a8-&gt;\u7684\u5730\u56fedocument_hash \u5982\u679c\u9644\u52a0\u4e86\u5411\u91cf\u5b58\u50a8\uff1a \u5982\u679c\u68c0\u6d4b\u5230\u91cd\u590ddoc_id\uff0c\u5e76\u4e14\u54c8\u5e0c\u503c\u5df2\u66f4\u6539\uff0c\u5219\u5c06\u91cd\u65b0\u5904\u7406\u5e76\u66f4\u65b0\u6587\u6863 \u5982\u679c\u68c0\u6d4b\u5230\u91cd\u590ddoc_id\u4e14\u54c8\u5e0c\u503c\u672a\u6539\u53d8\uff0c\u5219\u8df3\u8fc7\u8be5\u8282\u70b9 \u5982\u679c\u4ec5\u672a\u9644\u52a0\u5411\u91cf\u5b58\u50a8\uff1a \u68c0\u67e5\u6bcf\u4e2a\u8282\u70b9\u7684\u6240\u6709\u73b0\u6709\u54c8\u5e0c\u503c \u5982\u679c\u53d1\u73b0\u91cd\u590d\uff0c\u5219\u8df3\u8fc7\u8be5\u8282\u70b9 \u5426\u5219\uff0c\u8282\u70b9\u88ab\u5904\u7406 \u6ce8\u610f\uff1a\u5982\u679c\u6211\u4eec\u4e0d\u9644\u52a0\u5411\u91cf\u5b58\u50a8\uff0c\u6211\u4eec\u53ea\u80fd\u68c0\u67e5\u5e76\u5220\u9664\u91cd\u590d\u7684\u8f93\u5165\u3002</p> <p>from llama_index.core.ingestion import IngestionPipeline from llama_index.core.storage.docstore import SimpleDocumentStore</p> <p>pipeline = IngestionPipeline(     transformations=[...], docstore=SimpleDocumentStore() ) \u5b8c\u6574\u7684\u6f14\u7ec3\u53ef\u4ee5\u5728\u6211\u4eec\u7684\u6f14\u793a\u7b14\u8bb0\u672c\u4e2d\u627e\u5230\u3002</p> <p>\u53e6\u8bf7\u67e5\u770b\u53e6\u4e00\u4e2a\u4f7f\u7528Redis \u4f5c\u4e3a\u6211\u4eec\u6574\u4e2a\u6444\u53d6\u5806\u6808\u7684\u6307\u5357\u3002</p> <p>\u5e76\u884c\u5904\u7406# \u8be5run\u65b9\u6cd5IngestionPipeline\u53ef\u4ee5\u7528\u5e76\u884c\u8fdb\u7a0b\u6267\u884c\u3002\u5b83\u901a\u8fc7\u5c06multiprocessing.Pool\u8282\u70b9\u6279\u6b21\u5206\u5e03\u5230\u5404\u4e2a\u5904\u7406\u5668\u6765\u5b9e\u73b0\u3002</p> <p>\u8981\u4f7f\u7528\u5e76\u884c\u5904\u7406\u6267\u884c\uff0c\u8bf7\u8bbe\u7f6enum_workers\u60a8\u60f3\u8981\u4f7f\u7528\u7684\u8fdb\u7a0b\u6570\uff1a</p> <p>from llama_index.core.ingestion import IngestionPipeline</p> <p>pipeline = IngestionPipeline(     transformations=[...], ) pipeline.run(documents=[...], num_workers=4) \u6a21\u5757# \u8f6c\u578b\u6307\u5357 \u9ad8\u7ea7\u6444\u53d6\u7ba1\u9053 \u5f02\u6b65\u6444\u53d6\u7ba1\u9053 \u6587\u6863\u7ba1\u7406\u6d41\u7a0b Redis \u63d0\u53d6\u7ba1\u9053 Google Drive \u63d0\u53d6\u7ba1\u9053 \u5e76\u884c\u6267\u884c\u7ba1\u9053</p>"},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E6%96%87%E6%A1%A3%E5%92%8C%E8%8A%82%E7%82%B9/%E5%85%83%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96/","title":"\u5143\u6570\u636e\u63d0\u53d6","text":""},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E6%96%87%E6%A1%A3%E5%92%8C%E8%8A%82%E7%82%B9/%E5%85%83%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96/#_1","title":"\u5143\u6570\u636e\u63d0\u53d6\u4f7f\u7528\u6a21\u5f0f","text":"<p>\u60a8\u53ef\u4ee5\u4f7f\u7528 LLM \u901a\u8fc7\u6211\u4eec\u7684 <code>Metadata Extractor</code> \u6a21\u5757\u81ea\u52a8\u63d0\u53d6\u5143\u6570\u636e\u3002</p> <p>\u6211\u4eec\u7684\u5143\u6570\u636e\u63d0\u53d6\u5668\u6a21\u5757\u5305\u62ec\u4ee5\u4e0b\u201c\u7279\u5f81\u63d0\u53d6\u5668\u201d\uff1a</p> <ul> <li><code>SummaryExtractor</code>: \u81ea\u52a8\u63d0\u53d6\u4e00\u7ec4\u8282\u70b9\u7684\u6458\u8981</li> <li><code>QuestionsAnsweredExtractor</code>: \u63d0\u53d6\u4e00\u7ec4\u6bcf\u4e2a\u8282\u70b9\u90fd\u53ef\u4ee5\u56de\u7b54\u7684\u95ee\u9898</li> <li><code>TitleExtractor</code>: \u63d0\u53d6\u6bcf\u4e2a\u8282\u70b9\u4e0a\u4e0b\u6587\u7684\u6807\u9898</li> <li><code>EntityExtractor</code>: \u63d0\u53d6\u6bcf\u4e2a\u8282\u70b9\u5185\u5bb9\u4e2d\u63d0\u5230\u7684\u5b9e\u4f53\uff08\u5373\u5730\u70b9\uff0c\u4eba\u7269\uff0c\u4e8b\u7269\u7684\u540d\u79f0\uff09</li> </ul> <p>\u7136\u540e\u4f60\u53ef\u4ee5\u5c06 <code>Metadata Extractors</code> \u4e0e\u6211\u4eec\u7684\u8282\u70b9\u89e3\u6790\u5668\u94fe\u63a5\u8d77\u6765\uff1a</p> Python<pre><code>from llama_index.core.extractors import (\n    TitleExtractor,\n    QuestionsAnsweredExtractor,\n)\nfrom llama_index.core.node_parser import TokenTextSplitter\n\ntext_splitter = TokenTextSplitter(\n    separator=\" \", chunk_size=512, chunk_overlap=128\n)\ntitle_extractor = TitleExtractor(nodes=5)\nqa_extractor = QuestionsAnsweredExtractor(questions=3)\n\n# assume documents are defined -&gt; extract nodes\nfrom llama_index.core.ingestion import IngestionPipeline\n\npipeline = IngestionPipeline(\n    transformations=[text_splitter, title_extractor, qa_extractor]\n)\n\nnodes = pipeline.run(\n    documents=documents,\n    in_place=True,\n    show_progress=True,\n)\n</code></pre> <p>\u6216\u63d2\u5165\u7d22\u5f15\uff1a</p> Python<pre><code>from llama_index.core import VectorStoreIndex\n\nindex = VectorStoreIndex.from_documents(\n    documents, transformations=[text_splitter, title_extractor, qa_extractor]\n)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E6%96%87%E6%A1%A3%E5%92%8C%E8%8A%82%E7%82%B9/%E5%85%83%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96/#_2","title":"\u8d44\u6e90","text":"<ul> <li>SEC \u6587\u4ef6\u5143\u6570\u636e\u63d0\u53d6</li> <li>LLM \u8c03\u67e5\u63d0\u53d6</li> <li>\u5b9e\u4f53\u63d0\u53d6</li> <li>Marvin \u5143\u6570\u636e\u63d0\u53d6</li> <li>Pydantic \u5143\u6570\u636e\u63d0\u53d6</li> </ul>"},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E6%96%87%E6%A1%A3%E5%92%8C%E8%8A%82%E7%82%B9/%E5%BC%95%E8%A8%80/","title":"\u5f15\u8a00","text":""},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E6%96%87%E6%A1%A3%E5%92%8C%E8%8A%82%E7%82%B9/%E5%BC%95%E8%A8%80/#_1","title":"\u6587\u6863/\u8282\u70b9","text":""},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E6%96%87%E6%A1%A3%E5%92%8C%E8%8A%82%E7%82%B9/%E5%BC%95%E8%A8%80/#_2","title":"\u6982\u5ff5","text":"<p><code>Document</code> \u548c <code>Node</code> \u5bf9\u8c61\u662f LlamaIndex \u4e2d\u7684\u6838\u5fc3\u62bd\u8c61\u3002</p> <p>\u6587\u6863(Document) \u662f\u4efb\u4f55\u6570\u636e\u6e90\uff08\u4f8b\u5982 PDF\u3001API \u8f93\u51fa\u6216\u4ece\u6570\u636e\u5e93\u68c0\u7d22\u7684\u6570\u636e\uff09\u7684\u901a\u7528\u5bb9\u5668\u3002\u5b83\u4eec\u53ef\u4ee5\u624b\u52a8\u6784\u5efa\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7Llama-index\u7684\u6570\u636e\u52a0\u8f7d\u5668\u81ea\u52a8\u521b\u5efa\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6587\u6863\u4f1a\u5b58\u50a8 \u6587\u672c \u4ee5\u53ca \u5176\u4ed6\u4e00\u4e9b\u5c5e\u6027\u3002\u4e0b\u9762\u5217\u51fa\u4e86\u5176\u4e2d\u4e00\u4e9b\u5c5e\u6027\u3002</p> <ul> <li>metadata: \u53ef\u4ee5\u9644\u52a0\u5230\u6587\u672c\u7684\u6ce8\u91ca\u8bcd\u5178\u3002</li> <li>relationships: \u5305\u542b\u4e0e \u5176\u4ed6\u6587\u6863/\u8282\u70b9 \u7684 \u5173\u7cfb \u7684\u5b57\u5178\u3002</li> </ul> <p>\u8282\u70b9\u8868\u793a\u6e90\u6587\u6863\u7684\u201c\u5757\u201d\uff0c\u53ef\u4ee5\u662f\u6587\u672c\u5757\u3001\u56fe\u50cf\u6216\u5176\u4ed6\u3002\u4e0e\u6587\u6863\u7c7b\u4f3c\uff0c\u5b83\u4eec\u5305\u542b\u5143\u6570\u636e\u548c\u4e0e\u5176\u4ed6\u8282\u70b9\u7684\u5173\u7cfb\u4fe1\u606f\u3002</p> <p>\u8282\u70b9(Node)\u662f LlamaIndex \u4e2d\u7684\u4e00\u7b49\u516c\u6c11\u3002\u60a8\u53ef\u4ee5\u9009\u62e9\u76f4\u63a5\u5b9a\u4e49\u8282\u70b9\u53ca\u5176\u6240\u6709\u5c5e\u6027\u3002\u60a8\u4e5f\u53ef\u4ee5\u9009\u62e9\u901a\u8fc7\u6211\u4eec\u7684 <code>NodeParser</code> \u7c7b\u5c06\u6e90\u6587\u6863\u201c\u89e3\u6790\u201d\u4e3a\u8282\u70b9\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4ece\u6587\u6863\u6d3e\u751f\u7684\u6bcf\u4e2a\u8282\u70b9\u90fd\u5c06\u4ece\u8be5\u6587\u6863\u7ee7\u627f\u76f8\u540c\u7684\u5143\u6570\u636e\uff08\u4f8b\u5982\uff0c\u6587\u6863\u4e2d\u5f52\u6863\u7684\u201cfile_name\u201d\u4f1a\u4f20\u64ad\u5230\u6bcf\u4e2a\u8282\u70b9\uff09\u3002</p>"},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E6%96%87%E6%A1%A3%E5%92%8C%E8%8A%82%E7%82%B9/%E5%BC%95%E8%A8%80/#_3","title":"\u4f7f\u7528\u6a21\u5f0f","text":"<p>\u4ee5\u4e0b\u662f\u4e00\u4e9b\u6709\u5173\u6587\u6863\u548c\u8282\u70b9\u7684\u7b80\u5355\u4ee3\u7801\u7247\u6bb5\u3002</p>"},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E6%96%87%E6%A1%A3%E5%92%8C%E8%8A%82%E7%82%B9/%E5%BC%95%E8%A8%80/#documents","title":"\u6587\u6863 Documents","text":"Python<pre><code>from llama_index.core import Document, VectorStoreIndex\n\ntext_list = [text1, text2, ...]\ndocuments = [Document(text=t) for t in text_list]\n\n# build index\nindex = VectorStoreIndex.from_documents(documents)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E6%96%87%E6%A1%A3%E5%92%8C%E8%8A%82%E7%82%B9/%E5%BC%95%E8%A8%80/#nodes","title":"\u8282\u70b9 Nodes","text":"Python<pre><code>from llama_index.core.node_parser import SentenceSplitter\n\n# load documents\n...\n\n# parse nodes\nparser = SentenceSplitter()\nnodes = parser.get_nodes_from_documents(documents)\n\n# build index\nindex = VectorStoreIndex(nodes)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E6%96%87%E6%A1%A3%E5%92%8C%E8%8A%82%E7%82%B9/%E5%BC%95%E8%A8%80/#_4","title":"\u6587\u6863/\u8282\u70b9\u4f7f\u7528\u65b9\u5f0f","text":"<p>\u8bf7\u67e5\u770b\u6211\u4eec\u7684\u6df1\u5165\u6307\u5357\uff0c\u4e86\u89e3\u6709\u5173\u5982\u4f55\u4f7f\u7528\u6587\u6863/\u8282\u70b9\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\u3002</p> <ul> <li>\u4f7f\u7528\u6587\u6863</li> <li>\u4f7f\u7528\u8282\u70b9</li> <li>\u63d2\u5165\u5230\u6d41\u7a0b</li> </ul>"},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E6%96%87%E6%A1%A3%E5%92%8C%E8%8A%82%E7%82%B9/%E8%8A%82%E7%82%B9%E4%BD%BF%E7%94%A8/","title":"\u8282\u70b9\u4f7f\u7528","text":""},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E6%96%87%E6%A1%A3%E5%92%8C%E8%8A%82%E7%82%B9/%E8%8A%82%E7%82%B9%E4%BD%BF%E7%94%A8/#_1","title":"\u5b9a\u4e49\u548c\u81ea\u5b9a\u4e49\u8282\u70b9","text":"<p>\u8282\u70b9\u4ee3\u8868\u6e90\u6587\u6863\u7684 \u201c\u5757(chunks)\u201d\uff0c\u53ef\u4ee5\u662f\u6587\u672c\u5757\u3001\u56fe\u50cf\u7b49\u3002\u5b83\u4eec\u8fd8\u5305\u542b\u5143\u6570\u636e\u4ee5\u53ca\u4e0e\u5176\u4ed6\u8282\u70b9\u548c\u7d22\u5f15\u7ed3\u6784\u7684\u5173\u7cfb\u4fe1\u606f\u3002</p> <p>\u8282\u70b9\u662f LlamaIndex \u4e2d\u7684\u4e00\u7b49\u516c\u6c11\u3002\u60a8\u53ef\u4ee5\u9009\u62e9\u76f4\u63a5\u5b9a\u4e49\u8282\u70b9\u53ca\u5176\u6240\u6709\u5c5e\u6027\u3002\u60a8\u4e5f\u53ef\u4ee5\u9009\u62e9\u901a\u8fc7\u6211\u4eec\u7684 <code>NodeParser</code> \u7c7b\u5c06\u6e90\u6587\u6863 \u201c\u89e3\u6790\u201d \u4e3a\u8282\u70b9\u3002</p> <p>\u4f8b\u5982\uff0c\u4f60\u53ef\u4ee5\u8fd9\u6837\u505a</p> Python<pre><code>from llama_index.core.node_parser import SentenceSplitter\n\nparser = SentenceSplitter()\n\nnodes = parser.get_nodes_from_documents(documents)\n</code></pre> <p>\u4f60\u4e5f\u53ef\u4ee5\u9009\u62e9\u624b\u52a8\u6784\u9020 Node \u5bf9\u8c61\u5e76\u8df3\u8fc7\u7b2c\u4e00\u90e8\u5206\u3002\u4f8b\u5982\uff0c</p> Python<pre><code>from llama_index.core.schema import TextNode, NodeRelationship, RelatedNodeInfo\n\nnode1 = TextNode(text=\"&lt;text_chunk&gt;\", id_=\"&lt;node_id&gt;\")\nnode2 = TextNode(text=\"&lt;text_chunk&gt;\", id_=\"&lt;node_id&gt;\")\n# set relationships\nnode1.relationships[NodeRelationship.NEXT] = RelatedNodeInfo(\n    node_id=node2.node_id\n)\nnode2.relationships[NodeRelationship.PREVIOUS] = RelatedNodeInfo(\n    node_id=node1.node_id\n)\nnodes = [node1, node2]\n</code></pre> <p>\u5982\u679c\u9700\u8981\uff0c\u8be5\u7c7b <code>RelatedNodeInfo</code> \u8fd8\u53ef\u4ee5\u5b58\u50a8\u5176\u4ed6\u5185\u5bb9 <code>metadata</code>\uff1a</p> Python<pre><code>node2.relationships[NodeRelationship.PARENT] = RelatedNodeInfo(\n    node_id=node1.node_id, metadata={\"key\": \"val\"}\n)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E6%96%87%E6%A1%A3%E5%92%8C%E8%8A%82%E7%82%B9/%E8%8A%82%E7%82%B9%E4%BD%BF%E7%94%A8/#id","title":"\u81ea\u5b9a\u4e49 ID","text":"<p>\u6bcf\u4e2a\u8282\u70b9\u90fd\u6709\u4e00\u4e2a <code>node_id</code> \u5c5e\u6027\uff0c\u5982\u679c\u672a\u624b\u52a8\u6307\u5b9a\uff0c\u5219\u4f1a\u81ea\u52a8\u751f\u6210\u3002\u6b64 ID \u53ef\u7528\u4e8e\u591a\u79cd\u7528\u9014\uff1b\u5305\u62ec\u80fd\u591f\u66f4\u65b0\u5b58\u50a8\u4e2d\u7684\u8282\u70b9\u3001\u80fd\u591f\u5b9a\u4e49\u8282\u70b9\u4e4b\u95f4\u7684\u5173\u7cfb\uff08\u901a\u8fc7IndexNode\uff09\u7b49\u7b49\u3002</p> <p>\u60a8\u8fd8\u53ef\u4ee5\u76f4\u63a5\u83b7\u53d6\u548c\u8bbe\u7f6e <code>node_id</code> \u4efb\u4f55\u7684 <code>TextNode</code>\u3002</p> Python<pre><code>print(node.node_id)\nnode.node_id = \"My new node_id!\"\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E5%BC%95%E8%A8%80/","title":"\u5f15\u8a00","text":""},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E5%BC%95%E8%A8%80/#query","title":"\u67e5\u8be2 query","text":"<p>\u67e5\u8be2\u662f LLM \u5e94\u7528\u4e2d\u6700\u91cd\u8981\u7684\u90e8\u5206\u3002\u8981\u4e86\u89e3\u6709\u5173\u83b7\u53d6\u53ef\u90e8\u7f72\u7684\u6700\u7ec8\u4ea7\u54c1\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u67e5\u770b \u67e5\u8be2\u5f15\u64ce\u3001\u804a\u5929\u5f15\u64ce\u3002</p> <p>\u5982\u679c\u60a8\u5e0c\u671b\u5c06\u9ad8\u7ea7\u63a8\u7406\u4e0e\u5de5\u5177\u4f7f\u7528\u76f8\u7ed3\u5408\uff0c\u8bf7\u67e5\u770b\u6211\u4eec\u7684\u4ee3\u7406\u6307\u5357\u3002</p>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E5%BC%95%E8%A8%80/#_1","title":"\u67e5\u8be2\u5de5\u4f5c\u6d41","text":"<p>\u60a8\u53ef\u4ee5\u4f7f\u7528\u6211\u4eec\u7684\u4e8b\u4ef6\u9a71\u52a8\u754c\u9762\u8f7b\u677e\u521b\u5efa\u67e5\u8be2\u5de5\u4f5c\u6d41 Workflow\u3002\u67e5\u770b\u6211\u4eec\u7684\u5de5\u4f5c\u6d41\u6307\u5357\u4e86\u89e3\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\u3002</p> <p>\u5426\u5219\uff0c\u8bf7\u67e5\u770b\u5982\u4f55\u5c06\u6211\u4eec\u7684\u67e5\u8be2\u6a21\u5757\u7528\u4f5c\u72ec\u7acb\u7ec4\u4ef6\u3002</p>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E5%BC%95%E8%A8%80/#_2","title":"\u67e5\u8be2\u6a21\u5757","text":"<ul> <li>\u67e5\u8be2\u5f15\u64ce</li> <li>\u804a\u5929\u5f15\u64ce</li> <li>\u4ee3\u7406</li> <li>\u68c0\u7d22</li> <li>\u54cd\u5e94\u5408\u6210\u5668</li> <li>\u8def\u7531\u5668</li> <li>\u8282\u70b9\u540e\u5904\u7406\u5668</li> <li>\u7ed3\u6784\u5316\u8f93\u51fa</li> </ul>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E6%A3%80%E7%B4%A2/%E5%BC%95%E8%A8%80/","title":"\u5f15\u8a00","text":""},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E6%A3%80%E7%B4%A2/%E5%BC%95%E8%A8%80/#_1","title":"\u68c0\u7d22","text":""},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E6%A3%80%E7%B4%A2/%E5%BC%95%E8%A8%80/#_2","title":"\u6982\u5ff5","text":"<p>\u68c0\u7d22\u5668\u8d1f\u8d23\u6839\u636e\u7528\u6237\u67e5\u8be2\uff08\u6216\u804a\u5929\u6d88\u606f\uff09\u83b7\u53d6\u6700\u76f8\u5173\u7684\u4e0a\u4e0b\u6587\u3002</p> <p>\u5b83\u53ef\u5efa\u7acb\u5728\u7d22\u5f15\u4e4b\u4e0a\uff0c\u4f46\u4e5f\u53ef\u72ec\u7acb\u5b9a\u4e49\u3002\u5b83\u53ef\u7528\u4f5c\u67e5\u8be2\u5f15\u64ce\uff08\u548c\u804a\u5929\u5f15\u64ce\uff09\u4e2d\u68c0\u7d22\u76f8\u5173\u4e0a\u4e0b\u6587\u7684\u5173\u952e\u6784\u5efa\u5757\u3002</p> <p>\u63d0\u793a</p> <p>\u4e0d\u6e05\u695a\u68c0\u7d22\u5668\u5728 RAG \u5de5\u4f5c\u6d41\u7a0b\u4e2d\u7684\u4f4d\u7f6e\uff1f\u9605\u8bfb\u6709\u5173\u9ad8\u7ea7\u6982\u5ff5\u7684\u5185\u5bb9</p> <p>\u4f7f\u7528\u6a21\u5f0f# \u5f00\u59cb\u4f7f\u7528\uff1a</p> <p>retriever = index.as_retriever() nodes = retriever.retrieve(\"Who is Paul Graham?\") \u7acb\u5373\u5f00\u59cb# \u4ece\u7d22\u5f15\u4e2d\u83b7\u53d6\u68c0\u7d22\u5668\uff1a</p> <p>retriever = index.as_retriever() \u68c0\u7d22\u95ee\u9898\u7684\u76f8\u5173\u4e0a\u4e0b\u6587\uff1a</p> <p>nodes = retriever.retrieve(\"Who is Paul Graham?\") \u6ce8\u610f\uff1a\u8981\u4e86\u89e3\u5982\u4f55\u5efa\u7acb\u7d22\u5f15\uff0c\u8bf7\u53c2\u9605\u7d22\u5f15</p> <p>\u9ad8\u7ea7 API# \u9009\u62e9\u730e\u72ac# \u60a8\u53ef\u4ee5\u901a\u8fc7 \u9009\u62e9\u7279\u5b9a\u4e8e\u7d22\u5f15\u7684\u68c0\u7d22\u5668\u7c7bretriever_mode\u3002\u4f8b\u5982\uff0c\u4f7f\u7528SummaryIndex\uff1a</p> <p>retriever = summary_index.as_retriever(     retriever_mode=\"llm\", ) \u8fd9\u4f1a\u5728\u6458\u8981\u7d22\u5f15\u4e4b\u4e0a\u521b\u5efa\u4e00\u4e2aSummaryIndexLLMRetriever \u3002</p> <p>\u8bf7\u53c2\u9605\u68c0\u7d22\u5668\u6a21\u5f0f\u4ee5\u83b7\u53d6\uff08\u7d22\u5f15\u7279\u5b9a\u7684\uff09\u68c0\u7d22\u5668\u6a21\u5f0f\u53ca\u5176\u6620\u5c04\u5230\u7684\u68c0\u7d22\u5668\u7c7b\u7684\u5b8c\u6574\u5217\u8868\u3002</p> <p>\u914d\u7f6e\u68c0\u7d22\u5668# \u540c\u6837\u5730\uff0c\u60a8\u53ef\u4ee5\u4f20\u9012 kwargs \u6765\u914d\u7f6e\u6240\u9009\u7684\u68c0\u7d22\u5668\u3002</p> <p>\u6ce8\u610f\uff1a\u67e5\u770b\u6240\u9009\u68c0\u7d22\u5668\u7c7b\u7684\u6784\u9020\u51fd\u6570\u53c2\u6570\u7684 API \u53c2\u8003\uff0c\u4ee5\u83b7\u53d6\u6709\u6548 kwargs \u5217\u8868\u3002</p> <p>\u4f8b\u5982\uff0c\u5982\u679c\u6211\u4eec\u9009\u62e9\u201cllm\u201d\u68c0\u7d22\u5668\u6a21\u5f0f\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a</p> <p>retriever = summary_index.as_retriever(     retriever_mode=\"llm\",     choice_batch_size=5, ) \u4f4e\u7ea7\u7ec4\u5408 API# \u5982\u679c\u60a8\u9700\u8981\u66f4\u7cbe\u7ec6\u7684\u63a7\u5236\uff0c\u53ef\u4ee5\u4f7f\u7528\u4f4e\u7ea7\u7ec4\u5408 API\u3002</p> <p>\u4e3a\u4e86\u5b9e\u73b0\u4e0e\u4e0a\u8ff0\u76f8\u540c\u7684\u7ed3\u679c\uff0c\u60a8\u53ef\u4ee5\u76f4\u63a5\u5bfc\u5165\u5e76\u6784\u5efa\u6240\u9700\u7684\u68c0\u7d22\u5668\u7c7b\uff1a</p> <p>from llama_index.core.retrievers import SummaryIndexLLMRetriever</p> <p>retriever = SummaryIndexLLMRetriever(     index=summary_index,     choice_batch_size=5, ) \u793a\u4f8b# \u8bf7\u53c2\u9605\u730e\u72ac\u6307\u5357\u4e2d\u7684\u66f4\u591a\u793a\u4f8b\u3002</p>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E5%93%8D%E5%BA%94%E5%90%88%E6%88%90/","title":"\u54cd\u5e94\u5408\u6210","text":""},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E5%93%8D%E5%BA%94%E5%90%88%E6%88%90/#_1","title":"\u54cd\u5e94\u5408\u6210\u5668","text":""},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E5%93%8D%E5%BA%94%E5%90%88%E6%88%90/#_2","title":"\u6982\u5ff5","text":"<p>\u54cd\u5e94\u5408\u6210 <code>Response Synthesizer</code> \u662f\u4f7f\u7528\u7528\u6237\u67e5\u8be2\u548c\u7ed9\u5b9a\u7684\u4e00\u7ec4\u6587\u672c\u5757\u4ece LLM \u751f\u6210\u54cd\u5e94\u7684\u7ec4\u4ef6\u3002\u54cd\u5e94\u5408\u6210\u5668\u7684\u8f93\u51fa\u662f\u4e00\u4e2a <code>Response</code> \u5bf9\u8c61\u3002</p> <p>\u5b9e\u73b0\u6b64\u76ee\u7684\u7684\u65b9\u6cd5\u6709\u5f88\u591a\u79cd\uff0c\u4ece\u7b80\u5355\u7684\u8fed\u4ee3\u6587\u672c\u5757\u5230\u590d\u6742\u7684\u6784\u5efa\u6811\u3002\u8fd9\u91cc\u7684\u4e3b\u8981\u601d\u60f3\u662f\u7b80\u5316\u4f7f\u7528 LLM \u8de8\u6570\u636e\u751f\u6210\u54cd\u5e94\u7684\u8fc7\u7a0b\u3002</p> <p>\u5728\u67e5\u8be2\u5f15\u64ce\u4e2d\u4f7f\u7528\u65f6\uff0c\u54cd\u5e94\u5408\u6210\u5668\u5728\u4ece\u68c0\u7d22\u5668\u68c0\u7d22\u5230\u8282\u70b9\u4e4b\u540e\u4ee5\u53ca\u8fd0\u884c\u4efb\u4f55\u8282\u70b9\u540e\u5904\u7406\u5668\u4e4b\u540e\u4f7f\u7528\u3002</p> <p>\u63d0\u793a</p> <p>\u4e0d\u6e05\u695a\u54cd\u5e94\u5408\u6210\u5668\u5728 RAG \u5de5\u4f5c\u6d41\u7a0b\u4e2d\u7684\u4f4d\u7f6e\uff1f\u9605\u8bfb\u9ad8\u7ea7\u6982\u5ff5</p>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E5%93%8D%E5%BA%94%E5%90%88%E6%88%90/#_3","title":"\u4f7f\u7528\u6a21\u5f0f","text":"<p>\u4f7f\u7528\u5355\u72ec\u7684\u54cd\u5e94\u5408\u6210\u5668\uff1a</p> <p>Python<pre><code>from llama_index.core.data_structs import Node\nfrom llama_index.core.response_synthesizers import ResponseMode\nfrom llama_index.core import get_response_synthesizer\n\nresponse_synthesizer = get_response_synthesizer(\n    response_mode=ResponseMode.COMPACT\n)\n\nresponse = response_synthesizer.synthesize(\n    \"query text\", nodes=[Node(text=\"text\"), ...]\n)\n</code></pre> \u6216\u8005\u5728\u521b\u5efa\u7d22\u5f15\u4e4b\u540e\u5728\u67e5\u8be2\u5f15\u64ce\u4e2d\uff1a</p> Python<pre><code>query_engine = index.as_query_engine(response_synthesizer=response_synthesizer)\nresponse = query_engine.query(\"query_text\")\n</code></pre> <p>\u60a8\u53ef\u4ee5\u5728\u4e0b\u9762\u627e\u5230\u6709\u5173\u6240\u6709\u53ef\u7528\u7684\u54cd\u5e94\u5408\u6210\u5668\u3001\u6a21\u5f0f\u4ee5\u53ca\u5982\u4f55\u6784\u5efa\u81ea\u5df1\u7684\u54cd\u5e94\u5408\u6210\u5668\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\u3002</p>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E5%93%8D%E5%BA%94%E5%90%88%E6%88%90/#_4","title":"\u4f7f\u7528\u6a21\u5f0f","text":""},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E5%93%8D%E5%BA%94%E5%90%88%E6%88%90/#_5","title":"\u7acb\u5373\u5f00\u59cb","text":"<p>\u4f7f\u7528\u4ee5\u4e0b\u65b9\u6cd5\u914d\u7f6e\u67e5\u8be2\u5f15\u64ce\u7684\u54cd\u5e94\u5408\u6210\u5668response_mode\uff1a</p> Python<pre><code>from llama_index.core.data_structs import Node\nfrom llama_index.core.schema import NodeWithScore\nfrom llama_index.core import get_response_synthesizer\n\nresponse_synthesizer = get_response_synthesizer(response_mode=\"compact\")\n\nresponse = response_synthesizer.synthesize(\n    \"query text\", nodes=[NodeWithScore(node=Node(text=\"text\"), score=1.0), ...]\n)\n</code></pre> <p>\u6216\u8005\uff0c\u66f4\u5e38\u89c1\u7684\u662f\uff0c\u5728\u67e5\u8be2\u5f15\u64ce\u4e2d\u521b\u5efa\u7d22\u5f15\u540e\uff1a</p> Python<pre><code>query_engine = index.as_query_engine(response_synthesizer=response_synthesizer)\nresponse = query_engine.query(\"query_text\")\n</code></pre> <p>\u63d0\u793a</p> <p>\u8981\u4e86\u89e3\u5982\u4f55\u5efa\u7acb\u7d22\u5f15\uff0c\u8bf7\u53c2\u9605\u7d22\u5f15</p>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E5%93%8D%E5%BA%94%E5%90%88%E6%88%90/#_6","title":"\u914d\u7f6e\u54cd\u5e94\u6a21\u5f0f","text":"<p>\u54cd\u5e94\u5408\u6210\u5668\u901a\u5e38\u901a\u8fc7 kwarg \u8bbe\u7f6e\u6307\u5b9aresponse_mode\u3002</p> <p>LlamaIndex \u4e2d\u5df2\u7ecf\u5b9e\u73b0\u4e86\u51e0\u4e2a\u54cd\u5e94\u5408\u6210\u5668\uff1a</p> <ul> <li>refine\uff1a\u901a\u8fc7\u4f9d\u6b21\u6d4f\u89c8\u6bcf\u4e2a\u68c0\u7d22\u5230\u7684\u6587\u672c\u5757\u6765\u521b\u5efa\u548c\u5b8c\u5584\u7b54\u6848\u3002\u8fd9\u4f1a\u4e3a\u6bcf\u4e2a\u8282\u70b9/\u68c0\u7d22\u5230\u7684\u5757\u8fdb\u884c\u5355\u72ec\u7684 LLM \u8c03\u7528\u3002</li> <li>\u8be6\u7ec6\u4fe1\u606f\uff1a\u7b2c\u4e00\u4e2a\u5757\u7528\u4e8e\u4f7f\u7528 text_qa_template\u63d0\u793a\u7684\u67e5\u8be2\u3002\u7136\u540e\u7b54\u6848\u548c\u4e0b\u4e00\u4e2a\u5757\uff08\u4ee5\u53ca\u539f\u59cb\u95ee\u9898\uff09\u7528\u4e8e\u53e6\u4e00\u4e2a\u5e26\u6709refine_template\u63d0\u793a\u7684\u67e5\u8be2\u3002\u4f9d\u6b64\u7c7b\u63a8\uff0c\u76f4\u5230\u6240\u6709\u5757\u90fd\u5df2\u89e3\u6790\u3002</li> </ul> <p>\u5982\u679c\u67d0\u4e2a\u5757\u592a\u5927\u800c\u65e0\u6cd5\u653e\u5165\u7a97\u53e3\uff08\u8003\u8651\u63d0\u793a\u5927\u5c0f\uff09\uff0c\u5219\u4f7f\u7528 \u8fdb\u884c\u62c6\u5206TokenTextSplitter \uff08\u5141\u8bb8\u5757\u4e4b\u95f4\u6709\u4e00\u4e9b\u6587\u672c\u91cd\u53e0\uff09\uff0c\u5e76\u4e14\u5c06\uff08\u65b0\u7684\uff09\u9644\u52a0\u5757\u89c6\u4e3a\u539f\u59cb\u5757\u96c6\u5408\u7684\u5757\uff08\u56e0\u6b64\u4e5f\u4f7f\u7528 \u8fdb\u884c\u67e5\u8be2refine_template\uff09\u3002</p> <p>\u5e0c\u671b\u80fd\u5f97\u5230\u66f4\u8be6\u7ec6\u7684\u7b54\u6848\u3002</p> <p>compact\uff08\u9ed8\u8ba4\uff09\uff1a\u7c7b\u4f3c\u4e8erefine\u4f46\u9884\u5148\u538b\u7f29\uff08\u8fde\u63a5\uff09\u5757\uff0c\u4ece\u800c\u51cf\u5c11 LLM \u8c03\u7528\u3002 \u8be6\u7ec6\u4fe1\u606f\uff1a\u586b\u5145\u5c3d\u53ef\u80fd\u591a\u7684\u6587\u672c\uff08\u4ece\u68c0\u7d22\u5230\u7684\u5757\u4e2d\u8fde\u63a5/\u6253\u5305\uff09\uff0c\u4f7f\u5176\u9002\u5408\u4e0a\u4e0b\u6587\u7a97\u53e3\uff08\u8003\u8651text_qa_template\u548c\u4e4b\u95f4\u7684\u6700\u5927\u63d0\u793a\u5927\u5c0frefine_template\uff09\u3002\u5982\u679c\u6587\u672c\u592a\u957f\u800c\u65e0\u6cd5\u5bb9\u7eb3\u5728\u4e00\u4e2a\u63d0\u793a\u4e2d\uff0c\u5219\u4f1a\u6839\u636e\u9700\u8981\u5c06\u5176\u62c6\u5206\u4e3a\u5c3d\u53ef\u80fd\u591a\u7684\u90e8\u5206\uff08\u4f7f\u7528TokenTextSplitter\u548c\uff0c\u4ece\u800c\u5141\u8bb8\u6587\u672c\u5757\u4e4b\u95f4\u6709\u4e00\u4e9b\u91cd\u53e0\uff09\u3002</p> <p>\u6bcf\u4e2a\u6587\u672c\u90e8\u5206\u90fd\u88ab\u89c6\u4e3a\u4e00\u4e2a\u201c\u5757\u201d\u5e76\u88ab\u53d1\u9001\u5230refine\u5408\u6210\u5668\u3002</p> <p>\u7b80\u800c\u8a00\u4e4b\uff0c\u5b83\u7c7b\u4f3c\u4e8erefine\uff0c\u4f46\u662f LLM \u8c03\u7528\u8f83\u5c11\u3002</p> <p>tree_summarizesummary_template\uff1a\u4f7f\u7528\u63d0\u793a\u6839\u636e\u9700\u8981\u591a\u6b21\u67e5\u8be2 LLM \uff0c\u4ee5\u4fbf\u67e5\u8be2\u6240\u6709\u8fde\u63a5\u7684\u5757\uff0c\u4ece\u800c\u4ea7\u751f\u5c3d\u53ef\u80fd\u591a\u7684\u7b54\u6848\uff0c\u8fd9\u4e9b\u7b54\u6848\u672c\u8eab\u5728tree_summarizeLLM \u8c03\u7528\u4e2d\u9012\u5f52\u7528\u4f5c\u5757\uff0c\u4f9d\u6b64\u7c7b\u63a8\uff0c\u76f4\u5230\u53ea\u5269\u4e0b\u4e00\u4e2a\u5757\uff0c\u56e0\u6b64\u53ea\u6709\u4e00\u4e2a\u6700\u7ec8\u7b54\u6848\u3002 \u8be6\u7ec6\u4fe1\u606f\uff1a\u4f7f\u7528\u63d0\u793a\u5c3d\u53ef\u80fd\u591a\u5730\u8fde\u63a5\u5757\u4ee5\u9002\u5e94\u4e0a\u4e0b\u6587\u7a97\u53e3summary_template\uff0c\u5e76\u5728\u9700\u8981\u65f6\u62c6\u5206\u5b83\u4eec\uff08\u518d\u6b21\u4f7f\u7528TokenTextSplitter\u548c\u4e00\u4e9b\u6587\u672c\u91cd\u53e0\uff09\u3002\u7136\u540e\uff0c\u67e5\u8be2\u6bcf\u4e2a\u7ed3\u679c\u5757/\u62c6\u5206 summary_template\uff08\u6ca1\u6709\u7ec6\u5316\u67e5\u8be2\uff01\uff09\u5e76\u83b7\u5f97\u5c3d\u53ef\u80fd\u591a\u7684\u7b54\u6848\u3002</p> <p>\u5982\u679c\u53ea\u6709\u4e00\u4e2a\u7b54\u6848\uff08\u56e0\u4e3a\u53ea\u6709\u4e00\u4e2a\u5757\uff09\uff0c\u90a3\u4e48\u5b83\u5c31\u662f\u6700\u7ec8\u7b54\u6848\u3002</p> <p>\u5982\u679c\u6709\u591a\u4e2a\u7b54\u6848\uff0c\u8fd9\u4e9b\u7b54\u6848\u672c\u8eab\u5c06\u88ab\u89c6\u4e3a\u5757\u5e76\u9012\u5f52\u53d1\u9001\u5230tree_summarize\u6d41\u7a0b\uff08\u8fde\u63a5/\u62c6\u5206\u4ee5\u9002\u5e94/\u67e5\u8be2\uff09\u3002</p> <p>\u6709\u5229\u4e8e\u603b\u7ed3\u76ee\u7684\u3002</p> <p>simple_summarize\uff1a\u622a\u65ad\u6240\u6709\u6587\u672c\u5757\u4ee5\u9002\u5408\u5355\u4e2a LLM \u63d0\u793a\u3002\u9002\u5408\u5feb\u901f\u603b\u7ed3\uff0c\u4f46\u53ef\u80fd\u4f1a\u56e0\u622a\u65ad\u800c\u4e22\u5931\u7ec6\u8282\u3002 no_text\uff1a\u4ec5\u8fd0\u884c\u68c0\u7d22\u5668\u6765\u83b7\u53d6\u672c\u5e94\u53d1\u9001\u5230 LLM \u7684\u8282\u70b9\uff0c\u800c\u4e0d\u5b9e\u9645\u53d1\u9001\u5b83\u4eec\u3002\u7136\u540e\u53ef\u4ee5\u901a\u8fc7\u68c0\u67e5\u6765\u68c0\u67e5response.source_nodes\u3002 context_only\uff1a\u8fd4\u56de\u6240\u6709\u6587\u672c\u5757\u7684\u8fde\u63a5\u5b57\u7b26\u4e32\u3002 accumulate\uff1a\u7ed9\u5b9a\u4e00\u7ec4\u6587\u672c\u5757\u548c\u67e5\u8be2\uff0c\u5c06\u67e5\u8be2\u5e94\u7528\u4e8e\u6bcf\u4e2a\u6587\u672c\u5757\uff0c\u540c\u65f6\u5c06\u54cd\u5e94\u7d2f\u79ef\u5230\u6570\u7ec4\u4e2d\u3002\u8fd4\u56de\u6240\u6709\u54cd\u5e94\u7684\u8fde\u63a5\u5b57\u7b26\u4e32\u3002\u5f53\u60a8\u9700\u8981\u9488\u5bf9\u6bcf\u4e2a\u6587\u672c\u5757\u5206\u522b\u8fd0\u884c\u76f8\u540c\u7684\u67e5\u8be2\u65f6\uff0c\u8fd9\u79cd\u65b9\u6cd5\u975e\u5e38\u6709\u7528\u3002 compact_accumulate\uff1a\u4e0e\u7d2f\u79ef\u76f8\u540c\uff0c\u4f46\u5c06\u201c\u538b\u7f29\u201d\u7c7b\u4f3c\u4e8e\u7684\u6bcf\u4e2a LLM \u63d0\u793a compact\uff0c\u5e76\u5bf9\u6bcf\u4e2a\u6587\u672c\u5757\u8fd0\u884c\u76f8\u540c\u7684\u67e5\u8be2\u3002</p>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E5%93%8D%E5%BA%94%E5%90%88%E6%88%90/#_7","title":"\u81ea\u5b9a\u4e49\u54cd\u5e94\u5408\u6210\u5668","text":"<p>\u6bcf\u4e2a\u54cd\u5e94\u5408\u6210\u5668\u90fd\u7ee7\u627f\u81ea <code>llama_index.response_synthesizers.base.BaseSynthesizer</code>\u3002\u57fa\u7840 <code>API</code> \u975e\u5e38\u7b80\u5355\uff0c\u53ef\u4ee5\u8f7b\u677e\u521b\u5efa\u81ea\u5df1\u7684\u54cd\u5e94\u5408\u6210\u5668\u3002</p> <p>\u4e5f\u8bb8\u6211\u4eec\u60f3\u8981\u5728\u6bcf\u4e2a <code>tree_summarize</code> \u6b65\u9aa4\u4e2d\u81ea\u5b9a\u4e49\u4f7f\u7528\u7684\u6a21\u677f\uff0c\u6216\u8005\u4e5f\u8bb8\u6709\u4e00\u7bc7\u65b0\u7684\u7814\u7a76\u8bba\u6587\u8be6\u7ec6\u4ecb\u7ecd\u4e86\u4e00\u79cd\u751f\u6210\u67e5\u8be2\u54cd\u5e94\u7684\u65b0\u65b9\u6cd5\uff0c\u60a8\u53ef\u4ee5\u521b\u5efa\u81ea\u5df1\u7684\u54cd\u5e94\u5408\u6210\u5668\u5e76\u5c06\u5176\u63d2\u5165\u4efb\u4f55\u67e5\u8be2\u5f15\u64ce\u6216\u5355\u72ec\u4f7f\u7528\u5b83\u3002</p> <p>\u4e0b\u9762\u6211\u4eec\u5c55\u793a\u4e86\u8be5\u521d\u59cb\u5316 <code>__init__()</code> \u51fd\u6570\u4ee5\u53ca\u6bcf\u4e2a\u54cd\u5e94\u5408\u6210\u5668\u5fc5\u987b\u5b9e\u73b0\u7684\u4e24\u4e2a\u62bd\u8c61\u65b9\u6cd5\u3002\u57fa\u672c\u8981\u6c42\u662f\u5904\u7406\u67e5\u8be2\u548c\u6587\u672c\u5757\uff0c\u5e76\u8fd4\u56de\u5b57\u7b26\u4e32\uff08\u6216\u5b57\u7b26\u4e32\u751f\u6210\u5668\uff09\u54cd\u5e94\u3002</p> Python<pre><code>from llama_index.core import Settings\n\n\nclass BaseSynthesizer(ABC):\n    \"\"\"Response builder class.\"\"\"\n\n    def __init__(\n        self,\n        llm: Optional[LLM] = None,\n        streaming: bool = False,\n    ) -&gt; None:\n        \"\"\"Init params.\"\"\"\n        self._llm = llm or Settings.llm\n        self._callback_manager = Settings.callback_manager\n        self._streaming = streaming\n\n    @abstractmethod\n    def get_response(\n        self,\n        query_str: str,\n        text_chunks: Sequence[str],\n        **response_kwargs: Any,\n    ) -&gt; RESPONSE_TEXT_TYPE:\n        \"\"\"\u540c\u6b65\u63a5\u53e3Get response.\"\"\"\n        ...\n\n    @abstractmethod\n    async def aget_response(\n        self,\n        query_str: str,\n        text_chunks: Sequence[str],\n        **response_kwargs: Any,\n    ) -&gt; RESPONSE_TEXT_TYPE:\n        \"\"\"\u5f02\u6b65\u63a5\u53e3Get response.\"\"\"\n        ...\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E5%93%8D%E5%BA%94%E5%90%88%E6%88%90/#_8","title":"\u4f7f\u7528\u7ed3\u6784\u5316\u7b54\u6848\u8fc7\u6ee4\u3001","text":"<p>\u5f53\u4f7f\u7528 \"<code>refine</code>\" \u6216 \"<code>compact</code>\" \u54cd\u5e94\u5408\u6210\u6a21\u5757\u65f6\uff0c\u60a8\u53ef\u80fd\u4f1a\u53d1\u73b0\u5c1d\u8bd5 <code>structured_answer_filtering</code> \u9009\u9879\u5f88\u6709\u76ca\u3002</p> Python<pre><code>from llama_index.core import get_response_synthesizer\n\nresponse_synthesizer = get_response_synthesizer(structured_answer_filtering=True)\n</code></pre> <p>\u8bbe\u7f6e <code>structured_answer_filtering</code> \u4e3a <code>True</code> \u540e\uff0c\u6211\u4eec\u7684\u4f18\u5316\u6a21\u5757\u80fd\u591f\u8fc7\u6ee4\u6389\u4e0e\u6240\u63d0\u95ee\u9898\u65e0\u5173\u7684\u4efb\u4f55\u8f93\u5165\u8282\u70b9\u3002\u8fd9\u5bf9\u4e8e\u57fa\u4e8e RAG \u7684\u95ee\u7b54\u7cfb\u7edf\u5c24\u5176\u6709\u7528\uff0c\u56e0\u4e3a\u8be5\u7cfb\u7edf\u9700\u8981\u4ece\u5916\u90e8\u5411\u91cf\u5b58\u50a8\u4e2d\u68c0\u7d22\u7ed9\u5b9a\u7528\u6237\u67e5\u8be2\u7684\u6587\u672c\u5757\u3002</p> <p>\u5982\u679c\u60a8\u4f7f\u7528\u652f\u6301\u51fd\u6570\u8c03\u7528\u7684 OpenAI \u6a21\u578b\uff0c\u5219\u6b64\u9009\u9879\u7279\u522b\u6709\u7528\u3002\u5176\u4ed6 LLM \u63d0\u4f9b\u7a0b\u5e8f\u6216\u4e0d\u652f\u6301\u672c\u673a\u51fd\u6570\u8c03\u7528\u7684\u6a21\u578b\u5728\u751f\u6210\u6b64\u529f\u80fd\u6240\u4f9d\u8d56\u7684\u7ed3\u6784\u5316\u54cd\u5e94\u65f6\u53ef\u80fd\u4e0d\u592a\u53ef\u9760\u3002</p>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E5%93%8D%E5%BA%94%E5%90%88%E6%88%90/#_9","title":"\u4f7f\u7528\u81ea\u5b9a\u4e49\u63d0\u793a\u6a21\u677f\uff08\u5e26\u6709\u9644\u52a0\u53d8\u91cf\uff09","text":"<p>\u60a8\u53ef\u80fd\u5e0c\u671b\u81ea\u5b9a\u4e49\u6211\u4eec\u7684\u54cd\u5e94\u5408\u6210\u5668\u4e2d\u4f7f\u7528\u7684\u63d0\u793a\uff0c\u5e76\u5728\u67e5\u8be2\u65f6\u6dfb\u52a0\u5176\u4ed6\u53d8\u91cf\u3002</p> <p><code>**kwargs</code> \u60a8\u53ef\u4ee5\u5728 <code>for</code> \u4e2d\u6307\u5b9a\u8fd9\u4e9b\u9644\u52a0\u53d8\u91cf <code>get_response</code>\u3002</p> <p>\u4f8b\u5982\uff0c</p> Python<pre><code>from llama_index.core import PromptTemplate\nfrom llama_index.core.response_synthesizers import TreeSummarize\n\n# NOTE: we add an extra tone_name variable here\nqa_prompt_tmpl = (\n    \"Context information is below.\\n\"\n    \"---------------------\\n\"\n    \"{context_str}\\n\"\n    \"---------------------\\n\"\n    \"Given the context information and not prior knowledge, \"\n    \"answer the query.\\n\"\n    \"Please also write the answer in the tone of {tone_name}.\\n\"\n    \"Query: {query_str}\\n\"\n    \"Answer: \"\n)\nqa_prompt = PromptTemplate(qa_prompt_tmpl)\n\n# initialize response synthesizer\nsummarizer = TreeSummarize(verbose=True, summary_template=qa_prompt)\n\n# get response\nresponse = summarizer.get_response(\n    \"who is Paul Graham?\", [text], tone_name=\"a Shakespeare play\"\n)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E5%93%8D%E5%BA%94%E5%90%88%E6%88%90/#_10","title":"\u6a21\u5757","text":"<p>\u8bf7\u53c2\u9605\u5b8c\u6574\u7684\u6a21\u5757\u6307\u5357\u4ee5\u4e86\u89e3\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\u3002</p>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E5%BC%95%E8%A8%80/","title":"\u5f15\u8a00","text":""},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E5%BC%95%E8%A8%80/#_1","title":"\u7ed3\u6784\u5316\u8f93\u51fa","text":"<p>LLM \u751f\u6210\u7ed3\u6784\u5316\u8f93\u51fa\u7684\u80fd\u529b\u5bf9\u4e0b\u6e38\u5e94\u7528\u7a0b\u5e8f\u975e\u5e38\u91cd\u8981\uff0c\u4e0b\u6e38\u7684\u5e94\u7528\u7a0b\u5e8f\u5728\u6267\u884c\u7684\u8fc7\u7a0b\u4e2d\u4f9d\u8d56\u53ef\u9760\u89e3\u6790\u8f93\u51fa\u7684\u7ed3\u6784\u5316\u5185\u5bb9\u3002LlamaIndex \u672c\u8eab\u4e5f\u4ee5\u4ee5\u4e0b\u65b9\u5f0f\u4f9d\u8d56\u7ed3\u6784\u5316\u8f93\u51fa\u3002</p> <ul> <li>\u6587\u6863\u68c0\u7d22\uff1aLlamaIndex \u4e2d\u7684\u8bb8\u591a\u6570\u636e\u7ed3\u6784\u90fd\u4f9d\u8d56\u4e8e\u5177\u6709\u7279\u5b9a\u67b6\u6784\u7684 LLM \u8c03\u7528\u6765\u8fdb\u884c\u6587\u6863\u68c0\u7d22\u3002\u4f8b\u5982\uff0c\u6811\u7d22\u5f15\u8981\u6c42 LLM \u8c03\u7528\u91c7\u7528\u201cANSWER: (number)\u201d\u683c\u5f0f\u3002</li> <li>\u54cd\u5e94\u5408\u6210\uff1a\u7528\u6237\u53ef\u80fd\u671f\u671b\u6700\u7ec8\u54cd\u5e94\u5305\u542b\u4e00\u5b9a\u7a0b\u5ea6\u7684\u7ed3\u6784\uff08\u4f8b\u5982 JSON \u8f93\u51fa\u3001\u683c\u5f0f\u5316\u7684 SQL \u67e5\u8be2\u7b49\uff09</li> </ul> <p>LlamaIndex \u63d0\u4f9b\u5404\u79cd\u6a21\u5757\uff0c\u4f7f LLM \u80fd\u591f\u4ee5\u7ed3\u6784\u5316\u7684\u683c\u5f0f\u751f\u6210\u8f93\u51fa\u5185\u5bb9\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u7684 LLM \u7c7b\u63d0\u4f9b\u7ed3\u6784\u5316\u8f93\u51fa\u3002\u6211\u4eec\u8fd8\u63d0\u4f9b\u8f83\u4f4e\u7ea7\u522b\u7684\u6a21\u5757\uff1a</p> <ul> <li><code>Pydantic</code> \u7a0b\u5e8f\uff1a\u8fd9\u4e9b\u662f\u901a\u7528\u6a21\u5757\uff0c\u5c06\u8f93\u5165\u63d0\u793a prompt \u6620\u5c04\u5230\u7ed3\u6784\u5316\u8f93\u51fa\uff0c\u7531 <code>Pydantic</code> \u5bf9\u8c61\u8868\u793a\u3002\u5b83\u4eec\u53ef\u4ee5\u4f7f\u7528\u51fd\u6570\u8c03\u7528 API \u6216\u6587\u672c\u8865\u5168 API + \u8f93\u51fa\u89e3\u6790\u5668\u8fd9\u79cd\u5f62\u5f0f\u3002\u5b83\u4eec\u4e5f\u53ef\u4ee5\u4e0e\u67e5\u8be2\u5f15\u64ce\u96c6\u6210\u3002</li> <li>\u9884\u5b9a\u4e49\u7684 <code>Pydantic</code> \u7a0b\u5e8f\uff1a\u6211\u4eec\u6709\u9884\u5b9a\u4e49\u7684 <code>Pydantic</code> \u7a0b\u5e8f\uff0c\u5c06\u8f93\u5165\u6620\u5c04\u5230\u7279\u5b9a\u7684\u8f93\u51fa\u7c7b\u578b\uff08\u5982\u6570\u636e\u6846\uff09\u3002</li> <li>\u8f93\u51fa\u89e3\u6790\u5668\uff1a\u8fd9\u4e9b\u6a21\u5757\u5728 LLM \u6587\u672c\u5b8c\u6210\u7aef\u70b9\u4e4b\u524d\u548c\u4e4b\u540e\u8fd0\u884c\u3002\u5b83\u4eec\u4e0d\u4e0e LLM \u51fd\u6570\u8c03\u7528\u7aef\u70b9\u4e00\u8d77\u4f7f\u7528\uff08\u56e0\u4e3a\u5b83\u4eec\u5305\u542b\u5f00\u7bb1\u5373\u7528\u7684\u7ed3\u6784\u5316\u8f93\u51fa\uff09\u3002 \u8bf7\u53c2\u9605\u4ee5\u4e0b\u90e8\u5206\u4ee5\u4e86\u89e3\u8f93\u51fa\u89e3\u6790\u5668\u548c Pydantic \u7a0b\u5e8f\u7684\u6982\u8ff0\u3002</li> </ul>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E5%BC%95%E8%A8%80/#_2","title":"\u7ed3\u6784\u5316\u8f93\u51fa\u51fd\u6570\u7684\u5256\u6790","text":"<p>\u8fd9\u91cc\u6211\u4eec\u63cf\u8ff0\u4e86 LLM \u652f\u6301\u7684\u7ed3\u6784\u5316\u8f93\u51fa\u51fd\u6570\u7684\u4e0d\u540c\u7ec4\u4ef6\u3002\u7ba1\u9053\u53d6\u51b3\u4e8e\u60a8\u4f7f\u7528\u7684\u662f\u901a\u7528 LLM \u6587\u672c\u5b8c\u6210 API\u8fd8\u662fLLM \u51fd\u6570\u8c03\u7528 API\u3002</p> <p></p> <p>\u4e0e\u8865\u5168\u7684API\u4e00\u8d77\uff0c\u8f93\u5165\u548c\u8f93\u51fa\u7531\u6587\u672c\u63d0\u793a\u5904\u7406\u3002\u8f93\u51fa\u89e3\u6790\u5668\u5728 LLM \u8c03\u7528\u4e4b\u524d\u548c\u4e4b\u540e\u53d1\u6325\u4f5c\u7528\uff0c\u786e\u4fdd\u8f93\u51fa\u7ed3\u6784\u5316\u3002\u5728 LLM \u8c03\u7528\u4e4b\u524d\uff0c\u8f93\u51fa\u89e3\u6790\u5668\u53ef\u4ee5\u5c06\u683c\u5f0f\u6307\u4ee4\u9644\u52a0\u5230\u63d0\u793a\u3002\u5728 LLM \u8c03\u7528\u4e4b\u540e\uff0c\u8f93\u51fa\u89e3\u6790\u5668\u53ef\u4ee5\u5c06\u8f93\u51fa\u89e3\u6790\u4e3a\u6307\u5b9a\u7684\u6307\u4ee4\u3002</p> <p>\u4f7f\u7528\u51fd\u6570\u8c03\u7528 API\uff0c\u8f93\u51fa\u672c\u8d28\u4e0a\u662f\u7ed3\u6784\u5316\u7684\u683c\u5f0f\uff0c\u8f93\u5165\u53ef\u4ee5\u91c7\u7528\u6240\u9700\u5bf9\u8c61\u7684\u7b7e\u540d\u3002\u7ed3\u6784\u5316\u8f93\u51fa\u53ea\u9700\u8f6c\u6362\u4e3a\u6b63\u786e\u7684\u5bf9\u8c61\u683c\u5f0f\uff08\u4f8b\u5982 Pydantic\uff09\u3002</p>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E5%BC%95%E8%A8%80/#_3","title":"\u5165\u95e8\u6307\u5357","text":"<p>\u7ed3\u6784\u5316\u8f93\u51fa\u7b80\u5355\u6307\u5357</p>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E5%BC%95%E8%A8%80/#_4","title":"\u5176\u4ed6\u8d44\u6e90","text":"<ul> <li>Pydantic \u7a0b\u5e8f</li> <li>\u7ed3\u6784\u5316\u8f93\u51fa + \u67e5\u8be2\u5f15\u64ce</li> <li>\u8f93\u51fa\u89e3\u6790\u5668</li> </ul>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E7%BB%93%E5%90%88guidance%E4%B8%8EPydantic%E7%BC%96%E7%A8%8B/","title":"\u7ed3\u5408 guidance \u4e0e Pydantic \u7f16\u7a0b","text":"<p>\u901a\u8fc7 LlamaIndex \u7ed3\u5408 guidance \u751f\u6210\u7ed3\u6784\u5316\u6570\u636e\u3002</p> <p>\u4f7f\u7528 guidance \u5e93\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5f3a\u5236 LLM \u8f93\u51fa \u6240\u9700 \u7684 token \u6765\u4fdd\u8bc1\u8f93\u51fa\u7ed3\u6784\u6b63\u786e\u3002 \u8fd9\u5728\u60a8\u4f7f\u7528\u53c2\u6570\u91cf\u8f83\u4f4e\u7684\u6a21\u578b\uff08\u4f8b\u5982\u5f53\u524d\u7684\u5f00\u6e90\u6a21\u578b\uff09\u65f6\u5c24\u5176\u6709\u7528\uff0c\u5426\u5219\u8fd9\u4e9b\u6a21\u578b\u5c06\u5f88\u96be\u751f\u6210\u7b26\u5408\u6240\u9700\u8f93\u51fa\u67b6\u6784\u7684\u6709\u6548\u8f93\u51fa\u3002</p> <p>\u5982\u679c\u60a8\u5728 colab \u4e0a\u6253\u5f00\u6b64\u5e26\u963f\u7c73\uff0c\u5219\u53ef\u80fd\u9700\u8981\u5b89\u88c5 LlamaIndex \ud83e\udd99\u3002</p> Bash<pre><code>pip install llama-index-program-guidance\npip install llama-index\n</code></pre> <p>\u4f7f\u7528 <code>python</code> \u7684\u4ee3\u7801\u9700\u8981\u5bfc\u5165\u76f8\u5173\u7684\u5e93\uff1a</p> Python<pre><code>from pydantic import BaseModel\nfrom typing import List\nfrom guidance.llms import OpenAI\n\nfrom llama_index.program.guidance import GuidancePydanticProgram\n</code></pre> <p>\u5b9a\u4e49\u8f93\u51fa\u5b57\u6bb5\u5185\u5bb9</p> Python<pre><code>class Song(BaseModel):\n    title: str\n    length_seconds: int\n\n\nclass Album(BaseModel):\n    name: str\n    artist: str\n    songs: List[Song]\n</code></pre> <p>\u5b9a\u4e49\u6307\u5bfc pydantic \u7a0b\u5e8f</p> <p>program  =  GuidancePydanticProgram \uff08     output_cls = Album \uff0c     prompt_template_str = \uff08         \u201c\u751f\u6210\u4e00\u4e2a\u793a\u4f8b\u4e13\u8f91\uff0c\u5176\u4e2d\u5305\u542b\u827a\u672f\u5bb6\u548c\u6b4c\u66f2\u5217\u8868\u3002\u4f7f\u7528\u201d          \u201c\u7535\u5f71{{movie_name}}\u4f5c\u4e3a\u7075\u611f\u201d      \uff09\uff0c     guide_llm = OpenAI \uff08\u201ctext-davinci-003\u201d \uff09\uff0c     verbose = True \uff0c \uff09 \u8fd0\u884c\u7a0b\u5e8f\u4ee5\u83b7\u53d6\u7ed3\u6784\u5316\u8f93\u51fa\u3002 \u84dd\u8272\u7a81\u51fa\u663e\u793a\u7684\u6587\u672c\u662f\u6211\u4eec\u6307\u5b9a\u7684\u53d8\u91cf\uff0c\u7eff\u8272\u7a81\u51fa\u663e\u793a\u7684\u6587\u672c\u7531 LLM \u751f\u6210\u3002</p> <p>\u8f93\u51fa = \u7a0b\u5e8f\uff08\u7535\u5f71\u540d\u79f0= \u201c\u95ea\u7075\u201d \uff09 \u751f\u6210\u4e00\u5f20\u793a\u4f8b\u4e13\u8f91\uff0c\u5176\u4e2d\u5305\u542b\u827a\u672f\u5bb6\u548c\u6b4c\u66f2\u5217\u8868\u3002\u4ee5\u7535\u5f71\u300a\u95ea\u7075\u300b\u4e3a\u7075\u611f JSON<pre><code>{\n  \"name\": \"\u95ea\u7075\",\n  \u201c\u827a\u672f\u5bb6\u201d\uff1a\u201c\u6770\u514b\u00b7\u6258\u4f26\u65af\u201d\uff0c\n  \u201c\u6b4c\u66f2\u201d\uff1a[{\n  \"title\": \"\u53ea\u5de5\u4f5c\u4e0d\u73a9\u800d\",\n  \"length_seconds\": \" 180 \",\n} \uff0c {\n  \"title\": \"\u77ad\u671b\u9152\u5e97\",\n  \"length_seconds\": \" 240 \",\n} \uff0c {\n  \"title\": \"\u95ea\u7075\",\n  \"length_seconds\": \" 210 \",\n} ],\n}\n</code></pre> \u8f93\u51fa\u662f\u4e00\u4e2a\u6709\u6548\u7684 Pydantic \u5bf9\u8c61\uff0c\u7136\u540e\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5b83\u6765\u8c03\u7528\u51fd\u6570/API\u3002</p> <p>\u8f93\u51fa \u4e13\u8f91\uff08\u540d\u79f0='The Shining'\uff0c\u827a\u672f\u5bb6='Jack Torrance'\uff0c\u6b4c\u66f2=[\u6b4c\u66f2\uff08\u6807\u9898='All Work and No Play'\uff0c\u957f\u5ea6\u79d2\u6570=180\uff09\uff0c\u6b4c\u66f2\uff08\u6807\u9898='The Overlook Hotel'\uff0c\u957f\u5ea6\u79d2\u6570=240\uff09\uff0c\u6b4c\u66f2\uff08\u6807\u9898='The Shining'\uff0c\u957f\u5ea6\u79d2\u6570=210\uff09]\uff09</p>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA%E7%9A%84%E7%AE%80%E5%8D%95%E6%8C%87%E5%8D%97/","title":"\u7ed3\u6784\u5316\u8f93\u51fa\u7b80\u5355\u6307\u5357","text":""},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA%E7%9A%84%E7%AE%80%E5%8D%95%E6%8C%87%E5%8D%97/#_1","title":"\u7ed3\u6784\u5316\u8f93\u51fa\u7684\u7b80\u5355\u6307\u5357","text":"<p>\u5728 Colab \u4e2d\u6253\u5f00</p> <p>\u8fd9\u662f\u4f7f\u7528 LLM \u8fdb\u884c\u7ed3\u6784\u5316\u8f93\u51fa\u7684\u7b80\u5355\u6307\u5357\u3002\u4ece\u9ad8\u5c42\u6b21\u4e0a\u8bb2\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06 <code>Pydantic</code> \u7c7b\u9644\u52a0\u5230\u4efb\u4f55 LLM \u5e94\u7528\u4e0a\uff0c\u5e76\u4f7f\u8f93\u51fa\u683c\u5f0f\u5177\u6709\u539f\u751f\u7ed3\u6784\u5316\u5f62\u5f0f\uff0c\u5373\u4f7f LLM \u7528\u4e8e\u4e0a\u6e38\u6a21\u5757\u3002</p> <p>\u6211\u4eec\u4ece LLM \u7684\u7b80\u5355\u8bed\u6cd5\u5f00\u59cb\uff0c\u7136\u540e\u4ecb\u7ecd\u5982\u4f55\u5c06\u5176\u63d2\u5165\u67e5\u8be2\u7ba1\u9053\uff0c\u4ee5\u53ca\u5982\u4f55\u5c06\u5176\u63d2\u5165\u67e5\u8be2\u5f15\u64ce\u548c\u4ee3\u7406\u7b49\u66f4\u9ad8\u7ea7\u522b\u7684\u6a21\u5757\u3002</p> <p>\u7ed3\u6784\u5316\u8f93\u51fa\u7684\u8bb8\u591a\u5e95\u5c42\u884c\u4e3a\u5747\u7531\u6211\u4eec\u7684 <code>Pydantic</code> \u7a0b\u5e8f\u6a21\u5757\u63d0\u4f9b\u652f\u6301\u3002\u67e5\u770b\u6211\u4eec\u7684\u6df1\u5165\u7ed3\u6784\u5316\u8f93\u51fa\u6307\u5357\u4ee5\u4e86\u89e3\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\u3002</p> Python<pre><code>import nest_asyncio\n\nnest_asyncio.apply()\n\nfrom llama_index.llms.openai import OpenAI\nfrom llama_index.embeddings.openai import OpenAIEmbedding\nfrom llama_index.core import Settings\n\nllm = OpenAI(model=\"gpt-4o\")\nembed_model = OpenAIEmbedding(model=\"text-embedding-3-small\")\nSettings.llm = llm\nSettings.embed_model = embed_model\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA%E7%9A%84%E7%AE%80%E5%8D%95%E6%8C%87%E5%8D%97/#1","title":"1. \u7b80\u5355\u7ed3\u6784\u5316\u63d0\u53d6","text":"<p>\u60a8\u53ef\u4ee5\u901a\u8fc7\u5c06\u8f93\u51fa\u7c7b\u6dfb\u52a0\u5230\u4efb\u4f55 LLM \u5e76\u5c06\u5176\u8f6c\u6362\u4e3a\u201c\u7ed3\u6784\u5316 LLM\u201d\uff0c\u901a\u8fc7\u8c03\u7528 <code>as_structured_llm</code> \u63a5\u53e3\u5b9e\u73b0\u3002</p> <p>\u8fd9\u91cc\u6211\u4eec\u4f20\u9012\u4e00\u4e2a <code>Album</code> \u7c7b\uff0c\u5305\u542b\u6b4c\u66f2\u5217\u8868\u3002\u7136\u540e\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u6b63\u5e38\u7684 LLM \u7aef\u70b9\uff0c\u5982 chat/complete`\u3002</p> <p>\u6ce8\u610f\uff1a\u652f\u6301\u5f02\u6b65\u4f46\u6d41\u5f0f\u4f20\u8f93\u5373\u5c06\u63a8\u51fa\u3002</p> Python<pre><code>from typing import List\nfrom pydantic import BaseModel, Field\n\n\nclass Song(BaseModel):\n    \"\"\"Data model for a song.\"\"\"\n\n    title: str\n    length_seconds: int\n\n\nclass Album(BaseModel):\n    \"\"\"Data model for an album.\"\"\"\n\n    name: str\n    artist: str\n    songs: List[Song]\n</code></pre> Python<pre><code>from llama_index.core.llms import ChatMessage\n\nsllm = llm.as_structured_llm(output_cls=Album)\ninput_msg = ChatMessage.from_str(\"Generate an example album from The Shining\")\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA%E7%9A%84%E7%AE%80%E5%8D%95%E6%8C%87%E5%8D%97/#_2","title":"\u540c\u6b65","text":"Python<pre><code>output = sllm.chat([input_msg])\n# get actual object\noutput_obj = output.raw\n</code></pre> Python<pre><code>print(str(output))\nprint(output_obj)\n</code></pre> Bash<pre><code>assistant: {\"name\": \"The Shining: Original Soundtrack\", \"artist\": \"Various Artists\", \"songs\": [{\"title\": \"Main Title\", \"length_seconds\": 180}, {\"title\": \"Rocky Mountains\", \"length_seconds\": 210}, {\"title\": \"Lontano\", \"length_seconds\": 720}, {\"title\": \"Music for Strings, Percussion and Celesta\", \"length_seconds\": 540}, {\"title\": \"Utrenja (Excerpt)\", \"length_seconds\": 300}, {\"title\": \"The Awakening of Jacob\", \"length_seconds\": 480}, {\"title\": \"De Natura Sonoris No. 2\", \"length_seconds\": 540}, {\"title\": \"Home\", \"length_seconds\": 180}, {\"title\": \"Midnight, the Stars and You\", \"length_seconds\": 180}, {\"title\": \"It's All Forgotten Now\", \"length_seconds\": 150}, {\"title\": \"Masquerade\", \"length_seconds\": 180}]}\nname='The Shining: Original Soundtrack' artist='Various Artists' songs=[Song(title='Main Title', length_seconds=180), Song(title='Rocky Mountains', length_seconds=210), Song(title='Lontano', length_seconds=720), Song(title='Music for Strings, Percussion and Celesta', length_seconds=540), Song(title='Utrenja (Excerpt)', length_seconds=300), Song(title='The Awakening of Jacob', length_seconds=480), Song(title='De Natura Sonoris No. 2', length_seconds=540), Song(title='Home', length_seconds=180), Song(title='Midnight, the Stars and You', length_seconds=180), Song(title=\"It's All Forgotten Now\", length_seconds=150), Song(title='Masquerade', length_seconds=180)]\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA%E7%9A%84%E7%AE%80%E5%8D%95%E6%8C%87%E5%8D%97/#_3","title":"\u5f02\u6b65","text":"Python<pre><code>output = await sllm.achat([input_msg])\n# get actual object\noutput_obj = output.raw\nprint(str(output))\n</code></pre> Bash<pre><code>assistant: {\"name\": \"The Shining: Original Soundtrack\", \"artist\": \"Various Artists\", \"songs\": [{\"title\": \"Main Title (The Shining)\", \"length_seconds\": 180}, {\"title\": \"Rocky Mountains\", \"length_seconds\": 210}, {\"title\": \"Lontano\", \"length_seconds\": 240}, {\"title\": \"Music for Strings, Percussion and Celesta\", \"length_seconds\": 300}, {\"title\": \"Utrenja (Excerpt)\", \"length_seconds\": 180}, {\"title\": \"The Awakening of Jacob\", \"length_seconds\": 150}, {\"title\": \"De Natura Sonoris No. 2\", \"length_seconds\": 270}, {\"title\": \"Home\", \"length_seconds\": 200}, {\"title\": \"Heartbeats and Worry\", \"length_seconds\": 160}, {\"title\": \"The Overlook\", \"length_seconds\": 220}]}\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA%E7%9A%84%E7%AE%80%E5%8D%95%E6%8C%87%E5%8D%97/#_4","title":"\u6d41\u5f0f","text":"Python<pre><code>from IPython.display import clear_output\nfrom pprint import pprint\n\nstream_output = sllm.stream_chat([input_msg])\nfor partial_output in stream_output:\n    clear_output(wait=True)\n    pprint(partial_output.raw.dict())\n\noutput_obj = partial_output.raw\nprint(str(output))\n</code></pre> Bash<pre><code>{'artist': 'Various Artists',\n 'name': 'The Shining: Original Soundtrack',\n 'songs': [{'length_seconds': 180, 'title': 'Main Title'},\n           {'length_seconds': 210, 'title': 'Rocky Mountains'},\n           {'length_seconds': 240, 'title': 'Lontano'},\n           {'length_seconds': 540,\n            'title': 'Music for Strings, Percussion and Celesta'},\n           {'length_seconds': 300, 'title': 'Utrenja (Excerpt)'},\n           {'length_seconds': 360, 'title': 'The Awakening of Jacob'},\n           {'length_seconds': 420, 'title': 'De Natura Sonoris No. 2'},\n           {'length_seconds': 180, 'title': 'Home'},\n           {'length_seconds': 180, 'title': 'Midnight, the Stars and You'},\n           {'length_seconds': 150, 'title': \"It's All Forgotten Now\"},\n           {'length_seconds': 120, 'title': 'Masquerade'}]}\nassistant: {\"name\": \"The Shining: Original Soundtrack\", \"artist\": \"Various Artists\", \"songs\": [{\"title\": \"Main Title (The Shining)\", \"length_seconds\": 180}, {\"title\": \"Rocky Mountains\", \"length_seconds\": 210}, {\"title\": \"Lontano\", \"length_seconds\": 240}, {\"title\": \"Music for Strings, Percussion and Celesta\", \"length_seconds\": 300}, {\"title\": \"Utrenja (Excerpt)\", \"length_seconds\": 180}, {\"title\": \"The Awakening of Jacob\", \"length_seconds\": 150}, {\"title\": \"De Natura Sonoris No. 2\", \"length_seconds\": 270}, {\"title\": \"Home\", \"length_seconds\": 200}, {\"title\": \"Heartbeats and Worry\", \"length_seconds\": 160}, {\"title\": \"The Overlook\", \"length_seconds\": 220}]}\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA%E7%9A%84%E7%AE%80%E5%8D%95%E6%8C%87%E5%8D%97/#_5","title":"\u5f02\u6b65\u6d41\u5f0f","text":"Python<pre><code>from IPython.display import clear_output\nfrom pprint import pprint\n\nstream_output = await sllm.astream_chat([input_msg])\nasync for partial_output in stream_output:\n    clear_output(wait=True)\n    pprint(partial_output.raw.dict())\n</code></pre> Bash<pre><code>{'artist': 'Various Artists',\n 'name': 'The Shining: Original Soundtrack',\n 'songs': [{'length_seconds': 180, 'title': 'Main Title'},\n           {'length_seconds': 210, 'title': 'Rocky Mountains'},\n           {'length_seconds': 720, 'title': 'Lontano'},\n           {'length_seconds': 540,\n            'title': 'Music for Strings, Percussion and Celesta'},\n           {'length_seconds': 300, 'title': 'Utrenja (Excerpt)'},\n           {'length_seconds': 480, 'title': 'The Awakening of Jacob'},\n           {'length_seconds': 540, 'title': 'De Natura Sonoris No. 2'},\n           {'length_seconds': 180, 'title': 'Home'},\n           {'length_seconds': 180, 'title': 'Midnight, the Stars and You'},\n           {'length_seconds': 180, 'title': \"It's All Forgotten Now\"},\n           {'length_seconds': 180, 'title': 'Masquerade'}]}\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA%E7%9A%84%E7%AE%80%E5%8D%95%E6%8C%87%E5%8D%97/#1b","title":"1.b \u4f7f\u7528\u67e5\u8be2\u7ba1\u9053\u7684\u793a\u4f8b","text":"<p>\u60a8\u53ef\u4ee5\u5728\u67e5\u8be2\u7ba1\u9053\u4e2d\u63d2\u5165\u7ed3\u6784\u5316 LLM - \u8f93\u51fa\u5c06\u76f4\u63a5\u662f\u7ed3\u6784\u5316\u5bf9\u8c61\u3002</p> Python<pre><code># use query pipelines\nfrom llama_index.core.prompts import ChatPromptTemplate\nfrom llama_index.core.query_pipeline import QueryPipeline as QP\nfrom llama_index.core.llms import ChatMessage\n\nchat_prompt_tmpl = ChatPromptTemplate(\n    message_templates=[\n        ChatMessage.from_str(\n            \"Generate an example album from {movie_name}\", role=\"user\"\n        )\n    ]\n)\n\nqp = QP(chain=[chat_prompt_tmpl, sllm])\nresponse = qp.run(movie_name=\"Inside Out\")\nresponse\n</code></pre> Bash<pre><code>Album(name='Inside Out Soundtrack', artist='Various Artists', songs=[Song(title='Bundle of Joy', length_seconds=150), Song(title='Team Building', length_seconds=120), Song(title='Nomanisone Island/National Movers', length_seconds=180), Song(title='Overcoming Sadness', length_seconds=210), Song(title='Free Skating', length_seconds=160), Song(title='First Day of School', length_seconds=140), Song(title='Riled Up', length_seconds=130), Song(title='Goofball No Longer', length_seconds=170), Song(title='Memory Lanes', length_seconds=200), Song(title='The Forgetters', length_seconds=110)])\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA%E7%9A%84%E7%AE%80%E5%8D%95%E6%8C%87%E5%8D%97/#1c-structured_predict","title":"1.c \u4f7f\u7528structured_predict\u51fd\u6570","text":"<p>\u65e0\u9700\u660e\u786e\u6267\u884cllm.as_structured_llm(...)\uff0c\u6bcf\u4e2a LLM \u7c7b\u90fd\u6709\u4e00\u4e2astructured_predict\u51fd\u6570\uff0c\u5141\u8bb8\u60a8\u66f4\u8f7b\u677e\u5730\u4f7f\u7528\u63d0\u793a\u6a21\u677f + \u6a21\u677f\u53d8\u91cf\u8c03\u7528 LLM\uff0c\u4ee5\u5728\u4e00\u884c\u4ee3\u7801\u4e2d\u8fd4\u56de\u7ed3\u6784\u5316\u8f93\u51fa\u3002</p> Python<pre><code># use query pipelines\nfrom llama_index.core.prompts import ChatPromptTemplate\nfrom llama_index.core.llms import ChatMessage\nfrom llama_index.llms.openai import OpenAI\n\nchat_prompt_tmpl = ChatPromptTemplate(\n    message_templates=[\n        ChatMessage.from_str(\n            \"Generate an example album from {movie_name}\", role=\"user\"\n        )\n    ]\n)\n\nllm = OpenAI(model=\"gpt-4o\")\nalbum = llm.structured_predict(\n    Album, chat_prompt_tmpl, movie_name=\"Lord of the Rings\"\n)\nalbum\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA%E7%9A%84%E7%AE%80%E5%8D%95%E6%8C%87%E5%8D%97/#2-rag","title":"2. \u63d2\u5165 RAG \u7ba1\u9053","text":"<p>\u60a8\u8fd8\u53ef\u4ee5\u5c06\u5176\u63d2\u5165 RAG \u7ba1\u9053\u3002\u4e0b\u9762\u6211\u4eec\u5c55\u793a\u4e86 Apple 10K \u62a5\u544a\u4e2d\u7684\u7ed3\u6784\u5316\u63d0\u53d6\u3002</p> Bash<pre><code>mkdir data\nwget \"https://s2.q4cdn.com/470004039/files/doc_financials/2021/q4/_10-K-2021-(As-Filed).pdf\" -O data/apple_2021_10k.pdf\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA%E7%9A%84%E7%AE%80%E5%8D%95%E6%8C%87%E5%8D%97/#1-llamaparse","title":"\u9009\u9879 1\uff1a\u4f7f\u7528 LlamaParse","text":"<p>\u60a8\u9700\u8981\u4e00\u4e2ahttps://cloud.llamaindex.ai/\u5e10\u6237\u548c\u4e00\u4e2a API \u5bc6\u94a5\u624d\u80fd\u4f7f\u7528 LlamaParse\uff08\u6211\u4eec\u7684 10K \u6587\u4ef6\u6587\u6863\u89e3\u6790\u5668\uff09\u3002</p> Python<pre><code>from llama_parse import LlamaParse\n\n# os.environ[\"LLAMA_CLOUD_API_KEY\"] = \"llx-...\"\norig_docs = LlamaParse(result_type=\"text\").load_data(\n    \"./data/apple_2021_10k.pdf\"\n)\n</code></pre> <p>\u5f00\u59cb\u89e3\u6790job_id\u4e3acac11eca-7e00-452f-93f6-19c861b4c130\u4e0b\u7684\u6587\u4ef6</p> Python<pre><code>from copy import deepcopy\nfrom llama_index.core.schema import TextNode\n\n\ndef get_page_nodes(docs, separator=\"\\n---\\n\"):\n    \"\"\"Split each document into page node, by separator.\"\"\"\n    nodes = []\n    for doc in docs:\n        doc_chunks = doc.text.split(separator)\n        for doc_chunk in doc_chunks:\n            node = TextNode(\n                text=doc_chunk,\n                metadata=deepcopy(doc.metadata),\n            )\n            nodes.append(node)\n\n    return nodes\n\n\ndocs = get_page_nodes(orig_docs)\nprint(docs[0].get_content())\n</code></pre> Python<pre><code>UNITED STATES\n                                    SECURITIES AND EXCHANGE COMMISSION\n                                                          Washington, D.C. 20549\n\n                                                               FORM 10-K\n(Mark One)\n        \u2612 ANNUAL REPORT PURSUANT TO SECTION 13 OR 15(d) OF THE SECURITIES EXCHANGE ACT OF 1934\n                                                  For the fiscal year ended September 25, 2021\n                                                                            or\n     \u2610 TRANSITION REPORT PURSUANT TO SECTION 13 OR 15(d) OF THE SECURITIES EXCHANGE ACT OF 1934\n                                                For the transition period from               to          .\n                                                       Commission File Number: 001-36743\n\n                                                               Apple Inc.\n                                              (Exact name of Registrant as specified in its charter)\n\n                            California                                                                          94-2404110\n                     (State or other jurisdiction                                                    (I.R.S. Employer Identification No.)\n                  of incorporation or organization)\n\n                     One Apple Park Way\n                     Cupertino, California                                                                         95014\n              (Address of principal executive offices)                                                            (Zip Code)\n                                                                    (408) 996-1010\n                                                 (Registrant\u2019s telephone number, including area code)\n\n                                               Securities registered pursuant to Section 12(b) of the Act:\n\n                                                                         Trading\n                         Title of each class                            symbol(s)               Name of each exchange on which registered\n      Common Stock, $0.00001 par value per share                         AAPL                       The Nasdaq Stock Market LLC\n                    1.000% Notes due 2022                                   \u2014                       The Nasdaq Stock Market LLC\n                    1.375% Notes due 2024                                   \u2014                       The Nasdaq Stock Market LLC\n                    0.000% Notes due 2025                                   \u2014                       The Nasdaq Stock Market LLC\n                    0.875% Notes due 2025                                   \u2014                       The Nasdaq Stock Market LLC\n                    1.625% Notes due 2026                                   \u2014                       The Nasdaq Stock Market LLC\n                    2.000% Notes due 2027                                   \u2014                       The Nasdaq Stock Market LLC\n                    1.375% Notes due 2029                                   \u2014                       The Nasdaq Stock Market LLC\n                    3.050% Notes due 2029                                   \u2014                       The Nasdaq Stock Market LLC\n                    0.500% Notes due 2031                                   \u2014                       The Nasdaq Stock Market LLC\n                    3.600% Notes due 2042                                   \u2014                       The Nasdaq Stock Market LLC\n\n                                           Securities registered pursuant to Section 12(g) of the Act: None\n\nIndicate by check mark if the Registrant is a well-known seasoned issuer, as defined in Rule 405 of the Securities Act.\n                                                                    Yes \u2612      No \u2610\nIndicate by check mark if the Registrant is not required to file reports pursuant to Section 13 or Section 15(d) of the Act.\n                                                                   Yes \u2610      No \u2612\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA%E7%9A%84%E7%AE%80%E5%8D%95%E6%8C%87%E5%8D%97/#2-simpledirectoryreader","title":"\u9009\u9879 2\uff1a\u4f7f\u7528 <code>SimpleDirectoryReader</code>","text":"<p>\u60a8\u8fd8\u53ef\u4ee5\u9009\u62e9\u4f7f\u7528\u6211\u4eec\u7684\u6346\u7ed1\u514d\u8d39 PDF \u89e3\u6790\u5668 <code>SimpleDirectoryReader</code>\u3002</p> Python<pre><code># # OPTION 2: Use SimpleDirectoryReader\n# from llama_index.core import SimpleDirectoryReader\n\n# reader = SimpleDirectoryReader(input_files=[\"apple_2021_10k.pdf\"])\n# docs = reader.load_data()\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA%E7%9A%84%E7%AE%80%E5%8D%95%E6%8C%87%E5%8D%97/#rag","title":"\u6784\u5efa RAG \u7ba1\u9053\uff0c\u5b9a\u4e49\u7ed3\u6784\u5316\u8f93\u51fa\u6a21\u5f0f","text":"<p>\u6211\u4eec\u5229\u7528\u53ef\u9760\u7684 <code>VectorStoreIndex</code> \u548c <code>reranker</code> \u6a21\u5757\u6784\u5efa RAG \u7ba1\u9053\u3002\u7136\u540e\uff0c\u6211\u4eec\u5c06\u8f93\u51fa\u5b9a\u4e49\u4e3a Pydantic \u6a21\u578b\u3002\u8fd9\u4f7f\u6211\u4eec\u80fd\u591f\u521b\u5efa\u5e26\u6709\u8f93\u51fa\u7c7b\u7684\u7ed3\u6784\u5316 LLM\u3002</p> Python<pre><code>from llama_index.core import VectorStoreIndex\n\n# skip chunking since we're doing page-level chunking\nindex = VectorStoreIndex(docs)\n\nfrom llama_index.postprocessor.flag_embedding_reranker import (\n    FlagEmbeddingReranker,\n)\n\nreranker = FlagEmbeddingReranker(\n    top_n=5,\n    model=\"BAAI/bge-reranker-large\",\n)\n\nfrom pydantic import BaseModel, Field\nfrom typing import List\n\n\nclass Output(BaseModel):\n    \"\"\"Output containing the response, page numbers, and confidence.\"\"\"\n\n    response: str = Field(..., description=\"The answer to the question.\")\n    page_numbers: List[int] = Field(\n        ...,\n        description=\"The page numbers of the sources used to answer this question. Do not include a page number if the context is irrelevant.\",\n    )\n    confidence: float = Field(\n        ...,\n        description=\"Confidence value between 0-1 of the correctness of the result.\",\n    )\n    confidence_explanation: str = Field(\n        ..., description=\"Explanation for the confidence score\"\n    )\n\n\nsllm = llm.as_structured_llm(output_cls=Output)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA%E7%9A%84%E7%AE%80%E5%8D%95%E6%8C%87%E5%8D%97/#_6","title":"\u8fd0\u884c\u67e5\u8be2","text":"Python<pre><code>query_engine = index.as_query_engine(\n    similarity_top_k=5,\n    node_postprocessors=[reranker],\n    llm=sllm,\n    response_mode=\"tree_summarize\",  # you can also select other modes like `compact`, `refine`\n)\n\nresponse = query_engine.query(\"Net sales for each product category in 2021\")\nprint(str(response))\n</code></pre> <p>Bash<pre><code>{\"response\": \"In 2021, the net sales for each product category were as follows: iPhone: $191,973 million, Mac: $35,190 million, iPad: $31,862 million, Wearables, Home and Accessories: $38,367 million, and Services: $68,425 million.\", \"page_numbers\": [21], \"confidence\": 1.0, \"confidence_explanation\": \"The figures are directly taken from the provided data, ensuring high accuracy.\"}\n</code></pre> Python<pre><code>response.response.dict()\n</code></pre></p> Bash<pre><code>{'response': 'In 2021, the net sales for each product category were as follows: iPhone: $191,973 million, Mac: $35,190 million, iPad: $31,862 million, Wearables, Home and Accessories: $38,367 million, and Services: $68,425 million.',\n 'page_numbers': [21],\n 'confidence': 1.0,\n 'confidence_explanation': 'The figures are directly taken from the provided data, ensuring high accuracy.'}\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%85%83%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96/","title":"\u5143\u6570\u636e\u63d0\u53d6","text":""},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%85%83%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96/#_1","title":"\u5143\u6570\u636e\u63d0\u53d6","text":""},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%85%83%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96/#_2","title":"\u4ecb\u7ecd","text":"<p>\u5728\u8bb8\u591a\u60c5\u51b5\u4e0b\uff0c\u5c24\u5176\u662f\u957f\u6587\u6863\u4e2d\uff0c\u4e00\u4e2a\u7247\u6bb5 <code>chunk</code> \u6587\u672c\u53ef\u80fd\u7f3a\u5c11\u5fc5\u8981\u7684\u4e0a\u4e0b\u6587\uff0c\u5c06\u8be5\u7247\u6bb5 <code>chunk</code> \u6587\u672c\u4e0e\u5176\u4ed6\u7c7b\u4f3c\u7684\u6587\u672c\u7247\u6bb5 <code>chunk</code> \u533a\u5206\u5f00\u6765\u3002</p> <p>\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u4f7f\u7528 LLM \u6765\u63d0\u53d6\u4e0e\u6587\u6863\u76f8\u5173\u7684\u67d0\u4e9b\u4e0a\u4e0b\u6587\u4fe1\u606f\uff0c\u4ee5\u4fbf\u66f4\u597d\u5730\u63d0\u5347\u68c0\u7d22\u6548\u679c\uff0c\u5e2e\u52a9\u8bed\u8a00\u6a21\u578b\u533a\u5206\u54ea\u4e9b\u770b\u8d77\u6765\u76f8\u4f3c\u7684\u6bb5\u843d <code>chunk</code>\u3002</p> <p>\u6211\u4eec\u5728\u793a\u4f8b\u7b14\u8bb0\u672c\u4e2d\u5c55\u793a\u4e86\u8fd9\u4e00\u70b9\uff0c\u5e76\u8bc1\u660e\u4e86\u5176\u5728\u5904\u7406\u957f\u6587\u6863\u65b9\u9762\u7684\u6548\u679c\u3002</p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%85%83%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96/#_3","title":"\u7528\u6cd5","text":"<p>\u9996\u5148\uff0c\u6211\u4eec\u5b9a\u4e49\u4e00\u4e2a\u5143\u6570\u636e\u63d0\u53d6\u5668\uff0c\u8fd9\u4e2a\u63d0\u53d6\u5668\u63a5\u6536\u4e00\u7cfb\u5217\u7684\u5c0f\u7684\u7279\u5f81\u5143\u6570\u636e\u63d0\u53d6\u5668\uff0c\u901a\u8fc7\u8fd9\u4e9b\u7279\u5f81\u5904\u7406\u5668\u987a\u5e8f\u5904\u7406\u4f20\u5165\u7684\u8282\u70b9\u3002</p> <p>\u7136\u540e\u6211\u4eec\u5c06\u5176\u63d0\u4f9b\u7ed9\u8282\u70b9\u89e3\u6790\u5668\uff0c\u5b83\u5c06\u6309\u7167\u987a\u5e8f\u5730\u5411\u6bcf\u4e2a\u8282\u70b9\u6dfb\u52a0\u989d\u5916\u7684\u5143\u6570\u636e\u3002</p> Python<pre><code>from llama_index.core.node_parser import SentenceSplitter\nfrom llama_index.core.extractors import (\n    SummaryExtractor,\n    QuestionsAnsweredExtractor,\n    TitleExtractor,\n    KeywordExtractor,\n)\n\nfrom llama_index.extractors.entity import EntityExtractor\n\n# \u7b2c\u4e00\u4e2a\u53d8\u6362\u662f\u53e5\u5b50\u62c6\u5206\n# \u4ece\u7b2c\u4e8c\u4e2a\u5f00\u59cb\u90fd\u662f\u5143\u6570\u636e\u63d0\u53d6\u5668\ntransformations = [\n    SentenceSplitter(),\n    TitleExtractor(nodes=5),\n    QuestionsAnsweredExtractor(questions=3),\n    SummaryExtractor(summaries=[\"prev\", \"self\"]),\n    KeywordExtractor(keywords=10),\n    EntityExtractor(prediction_threshold=0.5),\n]\n</code></pre> <p>\u7136\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u8f93\u5165\u6587\u6863\u6216\u8282\u70b9\u4e0a\u8fd0\u884c\u5143\u6570\u636e\u63d0\u53d6\u64cd\u4f5c\uff1a</p> Python<pre><code>from llama_index.core.ingestion import IngestionPipeline\n\npipeline = IngestionPipeline(transformations=transformations)\n\nnodes = pipeline.run(documents=documents)\n</code></pre> <p>\u4ee5\u4e0b\u662f\u63d0\u53d6\u7684\u5143\u6570\u636e\u7684\u793a\u4f8b\uff1a</p> Python<pre><code>{'page_label': '2',\n 'file_name': '10k-132.pdf',\n 'document_title': 'Uber Technologies, Inc. 2019 Annual Report: Revolutionizing Mobility and Logistics Across 69 Countries and 111 Million MAPCs with $65 Billion in Gross Bookings',\n 'questions_this_excerpt_can_answer': '\\n\\n1. How many countries does Uber Technologies, Inc. operate in?\\n2. What is the total number of MAPCs served by Uber Technologies, Inc.?\\n3. How much gross bookings did Uber Technologies, Inc. generate in 2019?',\n 'prev_section_summary': \"\\n\\nThe 2019 Annual Report provides an overview of the key topics and entities that have been important to the organization over the past year. These include financial performance, operational highlights, customer satisfaction, employee engagement, and sustainability initiatives. It also provides an overview of the organization's strategic objectives and goals for the upcoming year.\",\n 'section_summary': '\\nThis section discusses a global tech platform that serves multiple multi-trillion dollar markets with products leveraging core technology and infrastructure. It enables consumers and drivers to tap a button and get a ride or work. The platform has revolutionized personal mobility with ridesharing and is now leveraging its platform to redefine the massive meal delivery and logistics industries. The foundation of the platform is its massive network, leading technology, operational excellence, and product expertise.',\n 'excerpt_keywords': '\\nRidesharing, Mobility, Meal Delivery, Logistics, Network, Technology, Operational Excellence, Product Expertise, Point A, Point B'}\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%85%83%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96/#_4","title":"\u81ea\u5b9a\u4e49\u63d0\u53d6\u5668","text":"<p>\u5982\u679c\u63d0\u4f9b\u7684\u63d0\u53d6\u5668\u4e0d\u80fd\u6ee1\u8db3\u60a8\u7684\u9700\u6c42\uff0c\u60a8\u8fd8\u53ef\u4ee5\u5b9a\u4e49\u81ea\u5b9a\u4e49\u63d0\u53d6\u5668\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> Python<pre><code>from llama_index.core.extractors import BaseExtractor\n\n\nclass CustomExtractor(BaseExtractor):\n    async def aextract(self, nodes) -&gt; List[Dict]:\n        metadata_list = [\n            {\n                \"custom\": node.metadata[\"document_title\"]\n                + \"\\n\"\n                + node.metadata[\"excerpt_keywords\"]\n            }\n            for node in nodes\n        ]\n        return metadata_list\n</code></pre> <p><code>extractor.extract()</code> \u5c06\u81ea\u52a8 <code>aextract()</code> \u5728\u540e\u53f0\u8c03\u7528\uff0c\u4ee5\u63d0\u4f9b\u540c\u6b65\u548c\u5f02\u6b65\u5165\u53e3\u70b9\u3002</p> <p>\u5728\u66f4\u9ad8\u7ea7\u7684\u793a\u4f8b\u4e2d\uff0c\u5b83\u8fd8\u53ef\u4ee5\u5229\u7528llm\u4ece\u8282\u70b9\u5185\u5bb9\u548c\u73b0\u6709\u5143\u6570\u636e\u4e2d\u63d0\u53d6\u7279\u5f81\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u63d0\u4f9b\u7684\u5143\u6570\u636e\u63d0\u53d6\u5668\u7684\u6e90\u4ee3\u7801\u3002</p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%85%83%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96/#_5","title":"\u6a21\u5757","text":"<p>\u4e0b\u9762\u60a8\u5c06\u627e\u5230\u5404\u79cd\u5143\u6570\u636e\u63d0\u53d6\u5668\u7684\u6307\u5357\u548c\u6559\u7a0b\u3002</p> <ul> <li>SEC \u6587\u4ef6\u5143\u6570\u636e\u63d0\u53d6</li> <li>LLM \u8c03\u67e5\u63d0\u53d6</li> <li>\u5b9e\u4f53\u63d0\u53d6</li> <li>Marvin \u5143\u6570\u636e\u63d0\u53d6</li> <li>Pydantic \u5143\u6570\u636e\u63d0\u53d6</li> </ul>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%90%91%E9%87%8F%E7%B4%A2%E5%BC%95/","title":"\u5411\u91cf\u7d22\u5f15","text":""},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%90%91%E9%87%8F%E7%B4%A2%E5%BC%95/#vectorstoreindex","title":"\u4f7f\u7528\u5411\u91cf\u7d22\u5f15 VectorStoreIndex","text":"<p>\u5411\u91cf\u5b58\u50a8\u662f\u68c0\u7d22\u589e\u5f3a\u751f\u6210 (RAG) \u7684\u5173\u952e\u7ec4\u4ef6\uff0c\u56e0\u6b64\u60a8\u6700\u7ec8\u4f1a\u5728\u4f7f\u7528 LlamaIndex \u5f00\u53d1\u7684\u51e0\u4e4e\u6bcf\u4e2a\u5e94\u7528\u7a0b\u5e8f\u4e2d\u76f4\u63a5\u6216\u95f4\u63a5\u5730\u4f7f\u7528\u5b83\u4eec\u3002</p> <p>\u5411\u91cf\u5b58\u50a8\u63a5\u53d7 <code>Node</code> \u5bf9\u8c61\u5217\u8868\uff0c\u5e76\u5c06\u6839\u636e\u8fd9\u4e9b <code>Node</code> \u5bf9\u8c61\u5217\u8868\u6784\u5efa\u7d22\u5f15</p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%90%91%E9%87%8F%E7%B4%A2%E5%BC%95/#_1","title":"\u5c06\u6570\u636e\u52a0\u8f7d\u5230\u7d22\u5f15\u4e2d","text":""},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%90%91%E9%87%8F%E7%B4%A2%E5%BC%95/#_2","title":"\u57fa\u672c\u7528\u6cd5","text":"<p>\u4f7f\u7528\u5411\u91cf\u5b58\u50a8 <code>Vector Store</code> \u7684\u6700\u7b80\u5355\u65b9\u6cd5\u662f\u52a0\u8f7d\u4e00\u7ec4\u6587\u6863\u5e76\u4f7f\u7528 <code>from_documents</code> \u65b9\u6cd5\u6784\u5efa\u7d22\u5f15\uff1a</p> Python<pre><code>from llama_index.core import VectorStoreIndex, SimpleDirectoryReader\n\n# Load documents and build index\ndocuments = SimpleDirectoryReader(\n    \"../../examples/data/paul_graham\"\n).load_data()\nindex = VectorStoreIndex.from_documents(documents)\n</code></pre> <p>\u6ce8\u610f</p> <p>\u5982\u679c\u60a8\u5728\u547d\u4ee4\u884c\u4e0a\u4f7f\u7528 <code>from_documents</code>\uff0c\u53ef\u4ee5\u65b9\u4fbf\u5730 <code>show_progress=True</code>\u5728\u7d22\u5f15\u6784\u5efa\u671f\u95f4\u663e\u793a\u8fdb\u5ea6\u6761\u3002</p> <p>\u5f53\u6211\u4eec\u4f7f\u7528 <code>from_documents</code> \u65f6\uff0c\u6587\u6863\u5c06\u88ab\u5206\u6210\u7247\u6bb5 <code>chunk</code> \u5e76\u89e3\u6790\u4e3a <code>Node</code>\u5bf9\u8c61\uff0c\u8fd9\u662f\u5bf9\u6587\u672c\u5b57\u7b26\u4e32\u7684\u8f7b\u91cf\u7ea7\u62bd\u8c61\uff0c\u7528\u4e8e\u8ddf\u8e2a\u5143\u6570\u636e\u548c\u5173\u7cfb\u3002</p> <p>\u6709\u5173\u5982\u4f55\u52a0\u8f7d\u6587\u6863\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u7406\u89e3\u52a0\u8f7d\u3002</p> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c<code>VectorStoreIndex</code> \u5c06\u6240\u6709\u5185\u5bb9\u5b58\u50a8\u5728\u5185\u5b58\u4e2d\u3002\u6709\u5173\u5982\u4f55\u4f7f\u7528\u6301\u4e45\u6027\u5411\u91cf\u5b58\u50a8\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u4e0b\u9762\u7684\u4f7f\u7528\u5411\u91cf\u5b58\u50a8\u3002</p> <p>\u63d0\u793a</p> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c<code>VectorStoreIndex</code> \u5c06\u4ee5 2048 \u4e2a\u8282\u70b9\u4e3a\u4e00\u6279\u751f\u6210\u548c\u63d2\u5165\u5411\u91cf\u3002\u5982\u679c\u60a8\u7684\u5185\u5b58\u6709\u9650\uff08\u6216\u5185\u5b58\u8fc7\u5269\uff09\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u4f20\u9012<code>insert_batch_size=2048</code> \u6240\u9700\u7684\u6279\u5927\u5c0f\u6765\u4fee\u6539\u6b64\u8bbe\u7f6e\u3002 \u5f53\u60a8\u63d2\u5165\u8fdc\u7a0b\u6258\u7ba1\u7684\u77e2\u91cf\u6570\u636e\u5e93\u65f6\u8fd9\u7279\u522b\u6709\u7528\u3002</p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%90%91%E9%87%8F%E7%B4%A2%E5%BC%95/#_3","title":"\u4f7f\u7528\u63d2\u5165\u7ba1\u9053\u521b\u5efa\u8282\u70b9","text":"<p>\u5982\u679c\u60a8\u60f3\u8981\u66f4\u597d\u5730\u63a7\u5236\u6587\u6863\u7684\u7d22\u5f15\u65b9\u5f0f\uff0c\u6211\u4eec\u5efa\u8bae\u60a8\u4f7f\u7528\u63d0\u53d6\u7ba1\u9053\u3002\u8fd9\u5141\u8bb8\u60a8\u81ea\u5b9a\u4e49\u8282\u70b9\u7684\u5206\u5757\u3001\u5143\u6570\u636e\u548c\u5d4c\u5165\u3002</p> Python<pre><code>from llama_index.core import Document\nfrom llama_index.embeddings.openai import OpenAIEmbedding\nfrom llama_index.core.node_parser import SentenceSplitter\nfrom llama_index.core.extractors import TitleExtractor\nfrom llama_index.core.ingestion import IngestionPipeline, IngestionCache\n\n# create the pipeline with transformations\npipeline = IngestionPipeline(\n    transformations=[\n        SentenceSplitter(chunk_size=25, chunk_overlap=0),\n        TitleExtractor(),\n        OpenAIEmbedding(),\n    ]\n)\n\n# run the pipeline\nnodes = pipeline.run(documents=[Document.example()])\n</code></pre> <p>\u63d0\u793a</p> <p>\u60a8\u53ef\u4ee5\u4e86\u89e3\u6709\u5173\u5982\u4f55\u4f7f\u7528\u6444\u53d6\u7ba1\u9053\u7684\u66f4\u591a\u4fe1\u606f\u3002</p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%90%91%E9%87%8F%E7%B4%A2%E5%BC%95/#_4","title":"\u76f4\u63a5\u521b\u5efa\u548c\u7ba1\u7406\u8282\u70b9","text":"<p>\u5982\u679c\u60a8\u60f3\u8981\u5b8c\u5168\u63a7\u5236\u7d22\u5f15\uff0c\u60a8\u53ef\u4ee5\u624b\u52a8\u521b\u5efa\u548c\u5b9a\u4e49\u8282\u70b9\u5e76\u5c06\u5b83\u4eec\u76f4\u63a5\u4f20\u9012\u7ed9\u7d22\u5f15\u6784\u9020\u51fd\u6570\uff1a</p> Python<pre><code>from llama_index.core.schema import TextNode\n\nnode1 = TextNode(text=\"&lt;text_chunk&gt;\", id_=\"&lt;node_id&gt;\")\nnode2 = TextNode(text=\"&lt;text_chunk&gt;\", id_=\"&lt;node_id&gt;\")\nnodes = [node1, node2]\nindex = VectorStoreIndex(nodes)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%90%91%E9%87%8F%E7%B4%A2%E5%BC%95/#_5","title":"\u5904\u7406\u6587\u6863\u66f4\u65b0","text":"<p>\u76f4\u63a5\u7ba1\u7406\u7d22\u5f15\u65f6\uff0c\u60a8\u5c06\u9700\u8981\u5904\u7406\u968f\u65f6\u95f4\u53d8\u5316\u7684\u6570\u636e\u6e90\u3002Index\u7c7b\u5177\u6709 \u63d2\u5165\uff0c\u5220\u9664\uff0c\u66f4\u65b0 \u548c \u5237\u65b0 \u64cd\u4f5c\uff0c\u60a8\u53ef\u4ee5\u5728\u4e0b\u9762\u4e86\u89e3\u6709\u5173\u5b83\u4eec\u7684\u66f4\u591a\u4fe1\u606f\uff1a</p> <ul> <li>\u5143\u6570\u636e\u63d0\u53d6</li> <li>\u6587\u6863\u7ba1\u7406</li> </ul>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%90%91%E9%87%8F%E7%B4%A2%E5%BC%95/#_6","title":"\u5b58\u50a8\u5411\u91cf\u7d22\u5f15","text":"<p>LlamaIndex \u652f\u6301\u51e0\u5341\u4e2a\u5411\u91cf\u5b58\u50a8\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7\u4f20\u5165\u4e00\u4e2a\u6765\u6307\u5b9a\u4f7f\u7528\u54ea\u4e00\u4e2a <code>StorageContext</code>\uff0c\u7136\u540e\u5728\u5176\u4e0a\u6307\u5b9a <code>vector_store</code> \u53c2\u6570\uff0c\u5982\u672c\u4f8b\u4e2d\u4f7f\u7528 Pinecone \u7684\u793a\u4f8b\uff1a</p> Python<pre><code>import pinecone\nfrom llama_index.core import (\n    VectorStoreIndex,\n    SimpleDirectoryReader,\n    StorageContext,\n)\nfrom llama_index.vector_stores.pinecone import PineconeVectorStore\n\n# init pinecone\npinecone.init(api_key=\"&lt;api_key&gt;\", environment=\"&lt;environment&gt;\")\npinecone.create_index(\n    \"quickstart\", dimension=1536, metric=\"euclidean\", pod_type=\"p1\"\n)\n\n# construct vector store and customize storage context\nstorage_context = StorageContext.from_defaults(\n    vector_store=PineconeVectorStore(pinecone.Index(\"quickstart\"))\n)\n\n# Load documents and build index\ndocuments = SimpleDirectoryReader(\n    \"../../examples/data/paul_graham\"\n).load_data()\nindex = VectorStoreIndex.from_documents(\n    documents, storage_context=storage_context\n)\n</code></pre> <p>\u6709\u5173\u5982\u4f55\u4f7f\u7528 <code>VectorStoreIndex</code> \u7684\u66f4\u591a\u793a\u4f8b\uff0c\u8bf7\u53c2\u9605\u6211\u4eec\u7684\u5411\u91cf\u5b58\u50a8\u7d22\u5f15\u4f7f\u7528\u793a\u4f8b\u7b14\u8bb0\u672c\u3002</p> <p>\u6709\u5173\u5982\u4f55\u5c06 <code>VectorStoreIndex</code> \u4e0e\u7279\u5b9a\u5411\u91cf\u5b58\u50a8\u4e00\u8d77\u4f7f\u7528\u7684\u793a\u4f8b\uff0c\u8bf7\u67e5\u770b\u5b58\u50a8\u90e8\u5206\u4e0b\u7684\u5411\u91cf\u5b58\u50a8\u3002</p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%90%91%E9%87%8F%E7%B4%A2%E5%BC%95/#_7","title":"\u7ec4\u5408\u68c0\u7d22\u53ec\u56de","text":"<p><code>VectorStoreIndex</code> (\u4ee5\u53ca\u4efb\u4f55\u5176\u4ed6\u7d22\u5f15/\u68c0\u7d22\u5668)\u80fd\u591f\u68c0\u7d22\u901a\u7528\u5bf9\u8c61\uff0c\u5305\u62ec</p> <ul> <li>\u8282\u70b9\u5f15\u7528</li> <li>\u67e5\u8be2\u5f15\u64ce</li> <li>\u53ec\u56de\u5668</li> <li>\u67e5\u8be2\u7ba1\u9053</li> </ul> <p>\u5982\u679c\u8fd9\u4e9b\u5bf9\u8c61\u662f\u53ef\u4ee5\u88ab\u68c0\u7d22\u5230\uff0c\u5b83\u4eec\u5c06\u4f7f\u7528\u63d0\u4f9b\u7684\u67e5\u8be2\u81ea\u52a8\u8fd0\u884c\u3002</p> <p>\u4f8b\u5982\uff1a</p> Python<pre><code>from llama_index.core.schema import IndexNode\n\nquery_engine = other_index.as_query_engine\nobj = IndexNode(\n    text=\"A query engine describing X, Y, and Z.\",\n    obj=query_engine,\n    index_id=\"my_query_engine\",\n)\n\nindex = VectorStoreIndex(nodes=nodes, objects=[obj])\nretriever = index.as_retriever(verbose=True)\n</code></pre> <p>\u5982\u679c\u68c0\u7d22\u5230\u5305\u542b\u67e5\u8be2\u5f15\u64ce\u7684\u7d22\u5f15\u8282\u70b9\uff0c\u5219\u5c06\u8fd0\u884c\u67e5\u8be2\u5f15\u64ce\u5e76\u5c06\u751f\u6210\u7684\u54cd\u5e94\u4f5c\u4e3a\u8282\u70b9\u8fd4\u56de\u3002</p> <p>\u6b32\u4e86\u89e3\u66f4\u591a\u8be6\u60c5\uff0c\u8bf7\u67e5\u770b\u6307\u5357</p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%AE%9E%E4%BD%93%E5%85%83%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96/","title":"\u5b9e\u4f53\u5143\u6570\u636e\u63d0\u53d6","text":""},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%AE%9E%E4%BD%93%E5%85%83%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96/#_1","title":"\u5b9e\u4f53\u5143\u6570\u636e\u63d0\u53d6","text":"<p>\u5728\u6b64\u6f14\u793a\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528 <code>newEntityExtractor</code> \u4ece\u6bcf\u4e2a\u8282\u70b9\u63d0\u53d6\u5b9e\u4f53\uff0c\u5b58\u50a8\u5728\u5143\u6570\u636e\u4e2d\u3002\u9ed8\u8ba4\u6a21\u578b\u662f\uff0c\u5b83\u662f\u4ece <code>HuggingFacetomaarsen/span-marker-mbert-base-multinerd</code> \u4e0b\u8f7d\u5e76\u5728\u672c\u5730\u8fd0\u884c\u7684\u3002</p> <p>\u6709\u5173 LlamaIndex \u4e2d\u5143\u6570\u636e\u63d0\u53d6\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u6211\u4eec\u7684\u6587\u6863\u3002</p> <p>\u5982\u679c\u60a8\u5728 colab \u4e0a\u6253\u5f00\u6b64\u7b14\u8bb0\u672c\uff0c\u5219\u53ef\u80fd\u9700\u8981\u5b89\u88c5 LlamaIndex \ud83e\udd99\u3002</p> Bash<pre><code>pip install llama-index-llms-openai\npip install llama-index-extractors-entity\npip install llama-index\n</code></pre> Python<pre><code># Needed to run the entity extractor\n# !pip install span_marker\n\nimport os\n\nos.environ[\"OPENAI_API_KEY\"] = \"YOUR_API_KEY\"\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%AE%9E%E4%BD%93%E5%85%83%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96/#_2","title":"\u8bbe\u7f6e\u5b9e\u4f53\u63d0\u53d6\u5668\u548c\u89e3\u6790\u5668","text":"Python<pre><code>from llama_index.extractors.entity import EntityExtractor\nfrom llama_index.core.node_parser import SentenceSplitter\n\nentity_extractor = EntityExtractor(\n    prediction_threshold=0.5,\n    label_entities=False,  # include the entity label in the metadata (can be erroneous)\n    device=\"cpu\",  # set to \"cuda\" if you have a GPU\n)\n\nnode_parser = SentenceSplitter()\n\ntransformations = [node_parser, entity_extractor]\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%AE%9E%E4%BD%93%E5%85%83%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96/#_3","title":"\u52a0\u8f7d\u6570\u636e","text":"<p>\u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u5c06\u4e0b\u8f7d 2023 \u5e74 IPPC \u6c14\u5019\u62a5\u544a - \u7b2c 3 \u7ae0\u6d77\u6d0b\u548c\u6cbf\u6d77\u751f\u6001\u7cfb\u7edf\uff08172 \u9875\uff09</p> Bash<pre><code>curl https://www.ipcc.ch/report/ar6/wg2/downloads/report/IPCC_AR6_WGII_Chapter03.pdf --output IPCC_AR6_WGII_Chapter03.pdf\n</code></pre> <p>\u63a5\u4e0b\u6765\uff0c\u52a0\u8f7d\u6587\u6863\u3002</p> <p>\u4ece llama_index.core \u5bfc\u5165 SimpleDirectoryReader</p> Python<pre><code>from llama_index.core import SimpleDirectoryReader\n\ndocuments = SimpleDirectoryReader(\n    input_files=[\"./IPCC_AR6_WGII_Chapter03.pdf\"]\n).load_data()\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%AE%9E%E4%BD%93%E5%85%83%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96/#_4","title":"\u63d0\u53d6\u5143\u6570\u636e","text":"<p>\u73b0\u5728\uff0c\u8fd9\u662f\u4e00\u4e2a\u76f8\u5f53\u957f\u7684\u6587\u6863\u3002\u7531\u4e8e\u6211\u4eec\u4e0d\u5728 CPU \u4e0a\u8fd0\u884c\uff0c\u56e0\u6b64\u76ee\u524d\u6211\u4eec\u53ea\u4f1a\u5728\u90e8\u5206\u6587\u6863\u4e0a\u8fd0\u884c\u3002\u4e0d\u8fc7\uff0c\u60a8\u53ef\u4ee5\u81ea\u884c\u5728\u6240\u6709\u6587\u6863\u4e0a\u8fd0\u884c\u5b83\uff01</p> Python<pre><code>from llama_index.core.ingestion import IngestionPipeline\n\nimport random\n\nrandom.seed(42)\n# comment out to run on all documents\n# 100 documents takes about 5 minutes on CPU\ndocuments = random.sample(documents, 100)\n\npipeline = IngestionPipeline(transformations=transformations)\n\nnodes = pipeline.run(documents=documents)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%AE%9E%E4%BD%93%E5%85%83%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96/#_5","title":"\u68c0\u67e5\u8f93\u51fa","text":"Python<pre><code>samples = random.sample(nodes, 5)\nfor node in samples:\n    print(node.metadata)\n</code></pre> Python<pre><code>{'page_label'\uff1a'387'\uff0c'file_name'\uff1a'IPC\u200b\u200bC_AR6_WGII_Chapter03.pdf'}\n{'page_label'\uff1a'410'\uff0c'file_name'\uff1a'IPC\u200b\u200bC_AR6_WGII_Chapter03.pdf'\uff0c'entities'\uff1a{'Parmesan'\uff0c'Boyd'\uff0c'Riebesell'\uff0c'Gattuso'}}\n{'page_label'\uff1a'391'\uff0c'file_name'\uff1a'IPC\u200b\u200bC_AR6_WGII_Chapter03.pdf'\uff0c'\u5b9e\u4f53'\uff1a{'Gulev'\uff0c'Fox-Kemper'}}\n{'page_label': '430', 'file_name': 'IPCC_AR6_WGII_Chapter03.pdf', 'entities': {'Kessouri', 'van der Sleen', 'Brodeur', 'Siedlecki', 'Fiechter', 'Ramajo', '\u5361\u7f57\u624e'}}\n{'page_label'\uff1a'388'\uff0c'file_name'\uff1a'IPC\u200b\u200bC_AR6_WGII_Chapter03.pdf'}\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%AE%9E%E4%BD%93%E5%85%83%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96/#_6","title":"\u5c1d\u8bd5\u67e5\u8be2","text":"Python<pre><code>from llama_index.core import VectorStoreIndex\nfrom llama_index.llms.openai import OpenAI\nfrom llama_index.core import Settings\n\nSettings.llm = OpenAI(model=\"gpt-3.5-turbo\", temperature=0.2)\n\nindex = VectorStoreIndex(nodes=nodes)\n</code></pre> Bash<pre><code>According to the provided context information, Fox-Kemper is mentioned in relation to the observed and projected trends of ocean warming and marine heatwaves. It is stated that Fox-Kemper et al. (2021) reported that ocean warming has increased on average by 0.88\u00b0C from 1850-1900 to 2011-2020. Additionally, it is mentioned that Fox-Kemper et al. (2021) projected that ocean warming will continue throughout the 21st century, with the rate of global ocean warming becoming scenario-dependent from the mid-21st century. Fox-Kemper is also cited as a source for the information on the increasing frequency, intensity, and duration of marine heatwaves over the 20th and early 21st centuries, as well as the projected increase in frequency of marine heatwaves in the future.\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%AE%9E%E4%BD%93%E5%85%83%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96/#_7","title":"\u65e0\u5143\u6570\u636e\u7684\u5bf9\u6bd4","text":"<p>\u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u91cd\u65b0\u6784\u5efa\u7d22\u5f15\uff0c\u4f46\u6ca1\u6709\u5143\u6570\u636e</p> Python<pre><code>for node in nodes:\n    node.metadata.pop(\"entities\", None)\n\nprint(nodes[0].metadata)\n</code></pre> Bash<pre><code>{'page_label'\uff1a'542'\uff0c'file_name'\uff1a'IPC\u200b\u200bC_AR6_WGII_Chapter03.pdf'}\n</code></pre> Python<pre><code>index = VectorStoreIndex(nodes=nodes)\nquery_engine = index.as_query_engine()\nresponse = query_engine.query(\"What is said by Fox-Kemper?\")\nprint(response)\n</code></pre> Bash<pre><code>According to the provided context information, Fox-Kemper is mentioned in relation to the decline of the AMOC (Atlantic Meridional Overturning Circulation) over the 21st century. The statement mentions that there is high confidence in the decline of the AMOC, but low confidence for quantitative projections.\n</code></pre> <p>\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c\u6211\u4eec\u7684\u5143\u6570\u636e\u4e30\u5bcc\u7d22\u5f15\u80fd\u591f\u83b7\u53d6\u66f4\u591a\u76f8\u5173\u4fe1\u606f\u3002</p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%B1%9E%E6%80%A7%E5%9B%BE%E7%B4%A2%E5%BC%95/","title":"\u5c5e\u6027\u56fe\u7d22\u5f15","text":""},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%B1%9E%E6%80%A7%E5%9B%BE%E7%B4%A2%E5%BC%95/#_1","title":"\u4f7f\u7528\u5c5e\u6027\u56fe\u8c31\u7d22\u5f15","text":"<p>\u5c5e\u6027\u56fe\u8c31\u662f\u5e26\u6807\u7b7e\uff08\u5373\u5143\u6570\u636e\uff09\u8282\u70b9\u5c5e\u6027\uff08\u5373\u5b9e\u4f53\u7c7b\u522b\u3001\u6587\u672c\u6807\u7b7e\u7b49\uff09\u7684\u77e5\u8bc6\u96c6\u5408\uff0c\u901a\u8fc7\u5173\u7cfb\u8fde\u63a5\u5728\u4e00\u8d77\u5f62\u6210\u7ed3\u6784\u5316\u8def\u5f84\u3002</p> <p>\u5728 LlamaIndex \u4e2d\uff0c<code>PropertyGraphIndex</code> \u6784\u5efa\u4e86\u4e0b\u9762\u4e24\u4e2a\u7684\u5c5e\u6027\u56fe\u8c31\u7f16\u6392\u80fd\u529b\uff1a</p> <ul> <li>\u6784\u5efa\u56fe\u8c31</li> <li>\u67e5\u8be2\u56fe\u8c31</li> </ul>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%B1%9E%E6%80%A7%E5%9B%BE%E7%B4%A2%E5%BC%95/#_2","title":"\u7528\u6cd5","text":"<p>\u53ea\u9700\u5bfc\u5165\u5c5e\u6027\u56fe\u8c31\u7c7b\uff0c\u4fbf\u53ef\u627e\u5230\u4f7f\u7528\u8fd9\u4e2a\u7c7b\u7684\u57fa\u672c\u7528\u6cd5\uff1a</p> Python<pre><code>from llama_index.core import PropertyGraphIndex\n\n# \u521b\u5efa\u77e5\u8bc6\u56fe\u8c31\u7d22\u5f15\nindex = PropertyGraphIndex.from_documents(\n\n\n# \u4f7f\u7528\u8fd9\u4e2a\u7d22\u5f15\nretriever = index.as_retriever(\n    include_text=True,  # include source chunk with matching paths\n    similarity_top_k=2,  # top k for vector kg node retrieval\n)\nnodes = retriever.retrieve(\"Test\")\n\nquery_engine = index.as_query_engine(\n    include_text=True,  # include source chunk with matching paths\n    similarity_top_k=2,  # top k for vector kg node retrieval\n)\nresponse = query_engine.query(\"Test\")\n\n# save and load\nindex.storage_context.persist(persist_dir=\"./storage\")\n\nfrom llama_index.core import StorageContext, load_index_from_storage\n\nindex = load_index_from_storage(\n    StorageContext.from_defaults(persist_dir=\"./storage\")\n)\n\n# loading from existing graph store (and optional vector store)\n# load from existing graph/vector store\nindex = PropertyGraphIndex.from_existing(\n    property_graph_store=graph_store, vector_store=vector_store, ...\n)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%B1%9E%E6%80%A7%E5%9B%BE%E7%B4%A2%E5%BC%95/#_3","title":"\u6784\u9020\u5c5e\u6027\u56fe\u8c31","text":"<p>LlamaIndex \u4e2d\u7684\u5c5e\u6027\u56fe\u8c31\u7684\u6784\u9020\u662f\u901a\u8fc7\u5bf9\u6bcf\u4e2achunk\u6267\u884c\u4e00\u7cfb\u5217 <code>kg_extractors</code> \u64cd\u4f5c\uff0c\u5e76\u5c06\u5b9e\u4f53\u548c\u5173\u7cfb\u4f5c\u4e3a\u5143\u6570\u636e\u9644\u52a0\u5230\u6bcf\u4e2a llama-index \u8282\u70b9\u6765\u5b9e\u73b0\u3002\u60a8\u53ef\u4ee5\u5728\u6b64\u5904\u4f7f\u7528\u4efb\u610f\u6570\u91cf\u7684\u5c5e\u6027\u56fe\uff0c\u5b83\u4eec\u90fd\u4f1a\u5f97\u5230\u5e94\u7528\u3002</p> <p>\u5982\u679c\u60a8\u5df2\u7ecf\u5728\u6444\u53d6\u7ba1\u9053\u4e2d\u4f7f\u7528\u8fc7\u8f6c\u6362\u6216\u5143\u6570\u636e\u63d0\u53d6\u5668\uff0c\u90a3\u4e48\u8fd9\u5c06\u975e\u5e38\u719f\u6089\uff08\u5e76\u4e14\u8fd9\u4e9b <code>kg_extractors</code> \u4e0e\u6444\u53d6\u7ba1\u9053\u517c\u5bb9\uff09\uff01</p> <p>\u4f7f\u7528\u9002\u5f53\u7684\u53c2\u6570 <code>kwarg</code> \u8bbe\u7f6e\u63d0\u53d6\u5668\uff1a</p> Python<pre><code>index = PropertyGraphIndex.from_documents(\n    documents,\n    kg_extractors=[extractor1, extractor2, ...],\n)\n\n# insert additional documents / nodes\nindex.insert(document)\nindex.insert_nodes(nodes)\n</code></pre> <p>\u82e5\u672a\u63d0\u4f9b\u77e5\u8bc6\u56fe\u8c31\u63d0\u53d6\u5668\uff0c\u5219\u9ed8\u8ba4\u503c\u4e3a <code>SimpleLLMPathExtractor</code> \u548c <code>ImplicitPathExtractor</code> \u8fd9\u4e24\u4e2a\u77e5\u8bc6\u56fe\u8c31\u63d0\u53d6\u5668\u4e00\u8d77\u4f7f\u7528\u3002</p> <p>\u63a5\u4e0b\u6765\u5c06\u5bf9 <code>kg_extractors</code> \u8fdb\u884c\u8be6\u7ec6\u8bf4\u660e\u3002</p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%B1%9E%E6%80%A7%E5%9B%BE%E7%B4%A2%E5%BC%95/#simplellmpathextractor","title":"SimpleLLMPathExtractor (\u9ed8\u8ba4\u4f7f\u7528)","text":"<p>\u4f7f\u7528 LLM \u63d0\u53d6\u7b80\u77ed\u8bed\u53e5\u6765\u63d0\u793a\u548c\u89e3\u6790\u683c\u5f0f\u4e3a <code>(entity1, relation, entity2)</code> \u7684\u5355\u8df3\u8def\u5f84</p> Python<pre><code>from llama_index.core.indices.property_graph import SimpleLLMPathExtractor\n\nkg_extractor = SimpleLLMPathExtractor(\n    llm=llm,\n    max_paths_per_chunk=10,\n    num_workers=4,\n    show_progress=False,\n)\n</code></pre> <p>\u5982\u679c\u60a8\u613f\u610f\uff0c\u60a8\u8fd8\u53ef\u4ee5\u81ea\u5b9a\u4e49\u63d0\u793a <code>prompt</code> \u548c\u7528\u4e8e\u89e3\u6790\u8def\u5f84\u7684\u51fd\u6570\u3002</p> <p>\u8fd9\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\uff1a</p> Python<pre><code>prompt = (\n    \"Some text is provided below. Given the text, extract up to \"\n    \"{max_paths_per_chunk} \"\n    \"knowledge triples in the form of `subject,predicate,object` on each line. Avoid stopwords.\\n\"\n)\n\n\ndef parse_fn(response_str: str) -&gt; List[Tuple[str, str, str]]:\n    lines = response_str.split(\"\\n\")\n    triples = [line.split(\",\") for line in lines]\n    return triples\n\n\nkg_extractor = SimpleLLMPathExtractor(\n    llm=llm,\n    extract_prompt=prompt,\n    parse_fn=parse_fn,\n)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%B1%9E%E6%80%A7%E5%9B%BE%E7%B4%A2%E5%BC%95/#implicitpathextractor","title":"ImplicitPathExtractor \uff08\u9ed8\u8ba4\u4f7f\u7528\uff09","text":"<p>\u4f7f\u7528\u6bcf\u4e2a llama-index \u8282\u70b9\u5bf9\u8c61\u4e0a\u7684\u5c5e\u6027\u63d0\u53d6\u8def\u5f84 <code>node.relationships</code>\u3002</p> <p>\u8be5\u63d0\u53d6\u5668\u4e0d\u9700\u8981 LLM \u6216\u5d4c\u5165\u6a21\u578b\u6765\u8fd0\u884c\uff0c\u56e0\u4e3a\u5b83\u4ec5\u4ec5\u89e3\u6790 llama-index \u8282\u70b9\u5bf9\u8c61\u4e0a\u5df2\u7ecf\u5b58\u5728\u7684\u5c5e\u6027\u3002</p> Python<pre><code>from llama_index.core.indices.property_graph import ImplicitPathExtractor\n\nkg_extractor = ImplicitPathExtractor()\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%B1%9E%E6%80%A7%E5%9B%BE%E7%B4%A2%E5%BC%95/#dynamicllmpathextractor","title":"DynamicLLMPathExtractor","text":"<p>\u5c06\u6839\u636e\u53ef\u9009\u7684\u5141\u8bb8\u5b9e\u4f53\u7c7b\u578b\u548c\u5173\u7cfb\u7c7b\u578b\u5217\u8868\u63d0\u53d6\u8def\u5f84\uff08\u5305\u62ec\u5b9e\u4f53\u7c7b\u578b\uff01\uff09\u3002\u5982\u679c\u6ca1\u6709\u63d0\u4f9b\uff0c\u5219 LLM \u5c06\u6839\u636e\u5176\u8ba4\u4e3a\u5408\u9002\u7684\u65b9\u5f0f\u5206\u914d\u7c7b\u578b\u3002\u5982\u679c\u63d0\u4f9b\u4e86\uff0c\u5b83\u5c06\u6709\u52a9\u4e8e\u6307\u5bfc LLM\uff0c\u4f46\u4e0d\u4f1a\u5f3a\u5236\u6267\u884c\u8fd9\u4e9b\u7c7b\u578b\u3002</p> Python<pre><code>from llama_index.core.indices.property_graph import DynamicLLMPathExtractor\n\nkg_extractor = DynamicLLMPathExtractor(\n    llm=llm,\n    max_triplets_per_chunk=20,\n    num_workers=4,\n    allowed_entity_types=[\"POLITICIAN\", \"POLITICAL_PARTY\"],\n    allowed_relation_types=[\"PRESIDENT_OF\", \"MEMBER_OF\"],\n)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%B1%9E%E6%80%A7%E5%9B%BE%E7%B4%A2%E5%BC%95/#schemallmpathextractor","title":"SchemaLLMPathExtractor","text":"<p>\u6309\u7167\u5141\u8bb8\u7684\u5b9e\u4f53\u3001\u5173\u7cfb\u4ee5\u53ca\u54ea\u4e9b\u5b9e\u4f53\u53ef\u4ee5\u8fde\u63a5\u5230\u54ea\u4e9b\u5173\u7cfb\u7684\u4e25\u683c\u6a21\u5f0f\u63d0\u53d6\u8def\u5f84\u3002</p> <p>\u4f7f\u7528 pydantic\u3001LLM \u7684\u7ed3\u6784\u5316\u8f93\u51fa\u548c\u4e00\u4e9b\u5de7\u5999\u7684\u9a8c\u8bc1\uff0c\u6211\u4eec\u53ef\u4ee5\u52a8\u6001\u6307\u5b9a\u6a21\u5f0f\u5e76\u9a8c\u8bc1\u6bcf\u4e2a\u8def\u5f84\u7684\u63d0\u53d6\u3002</p> Python<pre><code>from typing import Literal\nfrom llama_index.core.indices.property_graph import SchemaLLMPathExtractor\n\n# recommended uppercase, underscore separated\nentities = Literal[\"PERSON\", \"PLACE\", \"THING\"]\nrelations = Literal[\"PART_OF\", \"HAS\", \"IS_A\"]\nschema = {\n    \"PERSON\": [\"PART_OF\", \"HAS\", \"IS_A\"],\n    \"PLACE\": [\"PART_OF\", \"HAS\"],\n    \"THING\": [\"IS_A\"],\n}\n\nkg_extractor = SchemaLLMPathExtractor(\n    llm=llm,\n    possible_entities=entities,\n    possible_relations=relations,\n    kg_validation_schema=schema,\n    strict=True,  # if false, will allow triplets outside of the schema\n    num_workers=4,\n    max_triplets_per_chunk=10,\n)\n</code></pre> <p>\u8fd9\u4e2a\u63d0\u53d6\u5668\u662f\u9ad8\u5ea6\u53ef\u5b9a\u5236\u7684\uff0c\u5e76\u4e14\u5177\u6709\u53ef\u5b9a\u5236\u7684\u9009\u9879 - \u6a21\u5f0f\u7684\u5404\u4e2a\u65b9\u9762\uff08\u5982\u4e0a\u6240\u793a\uff09 - <code>extract_prompt</code> \u4e0e <code>strict=False</code>\uff0c<code>strict=True</code> \u5141\u8bb8\u6a21\u5f0f\u4e4b\u5916\u7684\u4e09\u5143\u7ec4\u6216\u4e0d\u5141\u8bb8 -<code>kg_schema_cls</code> \u5982\u679c\u60a8\u662f pydantic \u4e13\u4e1a\u4eba\u58eb\u5e76\u60f3\u521b\u5efa\u81ea\u5df1\u7684\u5e26\u6709\u81ea\u5b9a\u4e49\u9a8c\u8bc1\u7684 pydantic \u7c7b\uff0c\u5219\u53ef\u4ee5\u4f20\u9012\u60a8\u81ea\u5df1\u7684\u81ea\u5b9a\u4e49\u3002</p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%B1%9E%E6%80%A7%E5%9B%BE%E7%B4%A2%E5%BC%95/#_4","title":"\u68c0\u7d22\u548c\u67e5\u8be2","text":"<p>\u5e26\u6807\u7b7e\u7684\u5c5e\u6027\u56fe\u8c31\u53ef\u4ee5\u901a\u8fc7\u591a\u79cd\u65b9\u5f0f\u67e5\u8be2\u4ee5\u68c0\u7d22\u8282\u70b9\u548c\u8def\u5f84\u3002\u5728 LlamaIndex \u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u540c\u65f6\u7ec4\u5408\u591a\u79cd\u8282\u70b9\u68c0\u7d22\u65b9\u6cd5\uff01</p> <p>Python<pre><code># create a retriever\nretriever = index.as_retriever(sub_retrievers=[retriever1, retriever2, ...])\n\n# create a query engine\nquery_engine = index.as_query_engine(\n    sub_retrievers=[retriever1, retriever2, ...]\n)\n</code></pre> \u5982\u679c\u6ca1\u6709\u63d0\u4f9b\u5b50\u68c0\u7d22\u5668\uff0c\u5219\u9ed8\u8ba4\u503c\u4e3a <code>LLMSynonymRetriever</code> \u548c <code>VectorContextRetriever</code>\uff08\u5982\u679c\u542f\u7528\u4e86\u5d4c\u5165\uff09\u3002</p> <p>\u6240\u6709\u68c0\u7d22\u5668\u76ee\u524d\u5305\u62ec\uff1a  * <code>LLMSynonymRetriever</code> \u6839\u636e LLM \u751f\u6210\u7684\u5173\u952e\u5b57/\u540c\u4e49\u8bcd\u8fdb\u884c\u68c0\u7d22  * <code>VectorContextRetriever</code>  \u6839\u636e\u5d4c\u5165\u7684\u56fe\u8c31\u8282\u70b9\u8fdb\u884c\u68c0\u7d22  * <code>TextToCypherRetriever</code>  \u8981\u6c42 LLM \u6839\u636e\u5c5e\u6027\u56fe\u8c31\u7684\u6a21\u5f0f\u751f\u6210\u5bc6\u7801  * <code>CypherTemplateRetriever</code>  \u4f7f\u7528\u7531 LLM \u63a8\u65ad\u51fa\u7684\u5e26\u6709\u53c2\u6570\u7684\u5bc6\u7801\u6a21\u677f  * <code>CustomPGRetriever</code>  \u6613\u4e8e\u5b50\u7c7b\u5316\u548c\u5b9e\u73b0\u81ea\u5b9a\u4e49\u68c0\u7d22\u903b\u8f91</p> <p>\u901a\u5e38\uff0c\u60a8\u53ef\u4ee5\u5b9a\u4e49\u4e00\u4e2a\u6216\u591a\u4e2a\u8fd9\u6837\u7684\u5b50\u68c0\u7d22\u5668\u5e76\u5c06\u5b83\u4eec\u4f20\u9012\u7ed9PGRetriever\uff1a</p> Python<pre><code>from llama_index.core.indices.property_graph import (\n    PGRetriever,\n    VectorContextRetriever,\n    LLMSynonymRetriever,\n)\n\nsub_retrievers = [\n    VectorContextRetriever(index.property_graph_store, ...),\n    LLMSynonymRetriever(index.property_graph_store, ...),\n]\n\nretriever = PGRetriever(sub_retrievers=sub_retrievers)\n\nnodes = retriever.retrieve(\"&lt;query&gt;\")\n</code></pre> <p>\u8bf7\u7ee7\u7eed\u9605\u8bfb\u4e0b\u6587\u6765\u4e86\u89e3\u6709\u5173\u6240\u6709\u730e\u72ac\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\u3002</p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%B1%9E%E6%80%A7%E5%9B%BE%E7%B4%A2%E5%BC%95/#llmsynonymretriever","title":"<code>LLMSynonymRetriever</code> (\u9ed8\u8ba4\u4f7f\u7528)","text":"<p>\u63a5\u53d7 <code>LLMSynonymRetriever</code> \u67e5\u8be2\uff0c\u5e76\u5c1d\u8bd5\u751f\u6210\u5173\u952e\u5b57\u548c\u540c\u4e49\u8bcd\u6765\u68c0\u7d22\u8282\u70b9\uff08\u4ee5\u53ca\u8fde\u63a5\u5230\u8fd9\u4e9b\u8282\u70b9\u7684\u8def\u5f84\uff09\u3002</p> <p>\u660e\u786e\u58f0\u660e\u68c0\u7d22\u5668\u5141\u8bb8\u60a8\u81ea\u5b9a\u4e49\u591a\u4e2a\u9009\u9879\u3002\u4ee5\u4e0b\u662f\u9ed8\u8ba4\u8bbe\u7f6e\uff1a</p> Python<pre><code>from llama_index.core.indices.property_graph import LLMSynonymRetriever\n\nprompt = (\n    \"Given some initial query, generate synonyms or related keywords up to {max_keywords} in total, \"\n    \"considering possible cases of capitalization, pluralization, common expressions, etc.\\n\"\n    \"Provide all synonyms/keywords separated by '^' symbols: 'keyword1^keyword2^...'\\n\"\n    \"Note, result should be in one-line, separated by '^' symbols.\"\n    \"----\\n\"\n    \"QUERY: {query_str}\\n\"\n    \"----\\n\"\n    \"KEYWORDS: \"\n)\n\n\ndef parse_fn(self, output: str) -&gt; list[str]:\n    matches = output.strip().split(\"^\")\n\n    # capitalize to normalize with ingestion\n    return [x.strip().capitalize() for x in matches if x.strip()]\n\n\nsynonym_retriever = LLMSynonymRetriever(\n    index.property_graph_store,\n    llm=llm,\n    # include source chunk text with retrieved paths\n    include_text=False,\n    synonym_prompt=prompt,\n    output_parsing_fn=parse_fn,\n    max_keywords=10,\n    # the depth of relations to follow after node retrieval\n    path_depth=1,\n)\n\nretriever = index.as_retriever(sub_retrievers=[synonym_retriever])\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%B1%9E%E6%80%A7%E5%9B%BE%E7%B4%A2%E5%BC%95/#vectorcontextretriever","title":"<code>VectorContextRetriever</code> (\u5982\u679c\u652f\u6301\u7684\u8bdd\u5219\u9ed8\u8ba4\u4f7f\u7528)","text":"<p>\u6839\u636e\u5411\u91cf\u76f8\u4f3c\u6027\u68c0\u7d22 <code>VectorContextRetriever</code> \u8282\u70b9\uff0c\u7136\u540e\u83b7\u53d6\u8fde\u63a5\u5230\u8fd9\u4e9b\u8282\u70b9\u7684\u8def\u5f84\u3002</p> <p>\u5982\u679c\u60a8\u7684\u56fe\u5b58\u50a8\u652f\u6301\u5411\u91cf\uff0c\u90a3\u4e48\u60a8\u53ea\u9700\u8981\u7ba1\u7406\u8be5\u56fe\u5b58\u50a8\u5373\u53ef\u3002\u5426\u5219\uff0c\u9664\u4e86\u56fe\u5b58\u50a8\u4e4b\u5916\uff0c\u60a8\u8fd8\u9700\u8981\u63d0\u4f9b\u4e00\u4e2a\u5411\u91cf\u5b58\u50a8\uff08\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4f7f\u7528\u5185\u5b58SimpleVectorStore\uff09\u3002</p> Python<pre><code>from llama_index.core.indices.property_graph import VectorContextRetriever\n\nvector_retriever = VectorContextRetriever(\n    index.property_graph_store,\n    # only needed when the graph store doesn't support vector queries\n    # vector_store=index.vector_store,\n    embed_model=embed_model,\n    # include source chunk text with retrieved paths\n    include_text=False,\n    # the number of nodes to fetch\n    similarity_top_k=2,\n    # the depth of relations to follow after node retrieval\n    path_depth=1,\n    # can provide any other kwargs for the VectorStoreQuery class\n    ...,\n)\n\nretriever = index.as_retriever(sub_retrievers=[vector_retriever])\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%B1%9E%E6%80%A7%E5%9B%BE%E7%B4%A2%E5%BC%95/#texttocypherretriever","title":"<code>TextToCypherRetriever</code>","text":"<p>\u4f7f\u7528 <code>TextToCypherRetriever</code> \u56fe\u5f62\u5b58\u50a8\u6a21\u5f0f\u3001\u60a8\u7684\u67e5\u8be2\u548c\u6587\u672c\u5230\u5bc6\u7801\u7684\u63d0\u793a\u6a21\u677f\u6765\u751f\u6210\u548c\u6267\u884c\u5bc6\u7801\u67e5\u8be2\u3002</p> <p>\u6ce8\u610f\uff1a\u7531\u4e8e\u5b83 <code>SimplePropertyGraphStore</code> \u5b9e\u9645\u4e0a\u4e0d\u662f\u4e00\u4e2a\u56fe\u5f62\u6570\u636e\u5e93\uff0c\u56e0\u6b64\u5b83\u4e0d\u652f\u6301\u5bc6\u7801\u67e5\u8be2\u3002</p> <p>\u60a8\u53ef\u4ee5\u4f7f\u7528 \u68c0\u67e5\u67b6\u6784 <code>index.property_graph_store.get_schema_str()</code>\u3002</p> <p>Python<pre><code>from llama_index.core.indices.property_graph import TextToCypherRetriever\n\nDEFAULT_RESPONSE_TEMPLATE = (\n    \"Generated Cypher query:\\n{query}\\n\\n\" \"Cypher Response:\\n{response}\"\n)\nDEFAULT_ALLOWED_FIELDS = [\"text\", \"label\", \"type\"]\n\nDEFAULT_TEXT_TO_CYPHER_TEMPLATE = (\n    index.property_graph_store.text_to_cypher_template,\n)\n\n\ncypher_retriever = TextToCypherRetriever(\n    index.property_graph_store,\n    # customize the LLM, defaults to Settings.llm\n    llm=llm,\n    # customize the text-to-cypher template.\n    # Requires `schema` and `question` template args\n    text_to_cypher_template=DEFAULT_TEXT_TO_CYPHER_TEMPLATE,\n    # customize how the cypher result is inserted into\n    # a text node. Requires `query` and `response` template args\n    response_template=DEFAULT_RESPONSE_TEMPLATE,\n    # an optional callable that can clean/verify generated cypher\n    cypher_validator=None,\n    # allowed fields in the resulting\n    allowed_output_field=DEFAULT_ALLOWED_FIELDS,\n)\n</code></pre> \u6ce8\u610f\uff1a\u6267\u884c\u4efb\u610f\u5bc6\u7801\u6709\u98ce\u9669\u3002\u8bf7\u786e\u4fdd\u91c7\u53d6\u5fc5\u8981\u63aa\u65bd\uff08\u53ea\u8bfb\u89d2\u8272\u3001\u6c99\u76d2\u73af\u5883\u7b49\uff09\u4ee5\u786e\u4fdd\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u5b89\u5168\u4f7f\u7528\u3002</p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%B1%9E%E6%80%A7%E5%9B%BE%E7%B4%A2%E5%BC%95/#cyphertemplateretriever","title":"CypherTemplateRetriever","text":"<p>\u8fd9\u662f \u7684\u66f4\u53d7\u7ea6\u675f\u7684\u7248\u672cTextToCypherRetriever\u3002\u6211\u4eec\u53ef\u4ee5\u63d0\u4f9b\u4e00\u4e2a\u5bc6\u7801\u6a21\u677f\uff0c\u8ba9 LLM \u586b\u5199\u7a7a\u767d\uff0c\u800c\u4e0d\u662f\u8ba9 LLM \u81ea\u7531\u751f\u6210\u4efb\u4f55\u5bc6\u7801\u8bed\u53e5\u3002</p> <p>\u4e3a\u4e86\u8bf4\u660e\u8fd9\u662f\u5982\u4f55\u5de5\u4f5c\u7684\uff0c\u8fd9\u91cc\u6709\u4e00\u4e2a\u5c0f\u4f8b\u5b50\uff1a</p> Python<pre><code># NOTE: current v1 is needed\nfrom pydantic import BaseModel, Field\nfrom llama_index.core.indices.property_graph import CypherTemplateRetriever\n\n# write a query with template params\ncypher_query = \"\"\"\nMATCH (c:Chunk)-[:MENTIONS]-&gt;(o)\nWHERE o.name IN $names\nRETURN c.text, o.name, o.label;\n\"\"\"\n\n\n# create a pydantic class to represent the params for our query\n# the class fields are directly used as params for running the cypher query\nclass TemplateParams(BaseModel):\n    \"\"\"Template params for a cypher query.\"\"\"\n\n    names: list[str] = Field(\n        description=\"A list of entity names or keywords to use for lookup in a knowledge graph.\"\n    )\n\n\ntemplate_retriever = CypherTemplateRetriever(\n    index.property_graph_store, TemplateParams, cypher_query\n)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%B1%9E%E6%80%A7%E5%9B%BE%E7%B4%A2%E5%BC%95/#_5","title":"\u5b58\u50a8","text":"<p>\u76ee\u524d\uff0c\u652f\u6301\u7684\u5c5e\u6027\u56fe\u7684\u56fe\u5f62\u5b58\u50a8\u5305\u62ec\uff1a</p> \u5185\u5b58\u4e2d \u672c\u673a\u5d4c\u5165\u652f\u6301 \u5f02\u6b65 \u57fa\u4e8e\u670d\u52a1\u5668\u8fd8\u662f\u57fa\u4e8e\u78c1\u76d8\uff1f \u7b80\u5355\u5c5e\u6027\u56fe\u5b58\u50a8 \u2705 \u274c \u274c Neo4jPropertyGraphStore \u274c \u2705 \u274c NebulaPropertyGraphStore \u274c \u274c \u274c TiDBPropertyGraphStore \u274c \u2705 \u274c FalkorDBPropertyGraphStore \u274c \u2705 \u274c"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%B1%9E%E6%80%A7%E5%9B%BE%E7%B4%A2%E5%BC%95/#_6","title":"\u4fdd\u5b58\u5230\u78c1\u76d8/\u4ece\u78c1\u76d8\u4fdd\u5b58","text":"<p>\u9ed8\u8ba4\u5c5e\u6027\u56fe\u5b58\u50a8 <code>SimplePropertyGraphStore</code> \u5c06\u6240\u6709\u5185\u5bb9\u5b58\u50a8\u5728\u5185\u5b58\u4e2d\u5e76\u6301\u4e45\u4fdd\u5b58\u5e76\u4ece\u78c1\u76d8\u52a0\u8f7d\u3002</p> <p>\u4ee5\u4e0b\u662f\u4f7f\u7528\u9ed8\u8ba4\u56fe\u5f62\u5b58\u50a8\u4fdd\u5b58/\u52a0\u8f7d\u7d22\u5f15\u7684\u793a\u4f8b\uff1a</p> Python<pre><code>from llama_index.core import StorageContext, load_index_from_storage\nfrom llama_index.core.indices import PropertyGraphIndex\n\n# create\nindex = PropertyGraphIndex.from_documents(documents)\n\n# save\nindex.storage_context.persist(\"./storage\")\n\n# load\nstorage_context = StorageContext.from_defaults(persist_dir=\"./storage\")\nindex = load_index_from_storage(storage_context)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%B1%9E%E6%80%A7%E5%9B%BE%E7%B4%A2%E5%BC%95/#_7","title":"\u4f7f\u7528\u96c6\u6210\u4fdd\u5b58\u548c\u52a0\u8f7d","text":"<p>\u96c6\u6210\u901a\u5e38\u4f1a\u81ea\u52a8\u4fdd\u5b58\u3002\u6709\u4e9b\u56fe\u5f62\u5b58\u50a8\u4f1a\u652f\u6301\u5411\u91cf\uff0c\u6709\u4e9b\u5219\u53ef\u80fd\u4e0d\u652f\u6301\u3002\u60a8\u4e5f\u53ef\u4ee5\u59cb\u7ec8\u5c06\u56fe\u5f62\u5b58\u50a8\u4e0e\u5916\u90e8\u5411\u91cf\u6570\u636e\u5e93\u76f8\u7ed3\u5408\u3002</p> <p>\u6b64\u793a\u4f8b\u663e\u793a\u5982\u4f55\u4f7f\u7528 <code>Neo4j</code> \u548c <code>Qdrant</code> \u4fdd\u5b58/\u52a0\u8f7d\u5c5e\u6027\u56fe\u7d22\u5f15\u3002</p> <p>\u6ce8\u610f\uff1a\u5982\u679c\u672a\u4f20\u5165 <code>qdrant</code>\uff0c<code>neo4j</code> \u5c06\u81ea\u884c\u5b58\u50a8\u548c\u4f7f\u7528\u5d4c\u5165\u3002\u6b64\u793a\u4f8b\u8bf4\u660e\u4e86\u9664\u6b64\u4e4b\u5916\u7684\u7075\u6d3b\u6027\u3002</p> Bash<pre><code>pip install llama-index-graph-stores-neo4j llama-index-vector-stores-qdrant\n</code></pre> Python<pre><code>from llama_index.core import StorageContext, load_index_from_storage\nfrom llama_index.core.indices import PropertyGraphIndex\nfrom llama_index.graph_stores.neo4j import Neo4jPropertyGraphStore\nfrom llama_index.vector_stores.qdrant import QdrantVectorStore\nfrom qdrant_client import QdrantClient, AsyncQdrantClient\n\nvector_store = QdrantVectorStore(\n    \"graph_collection\",\n    client=QdrantClient(...),\n    aclient=AsyncQdrantClient(...),\n)\n\ngraph_store = Neo4jPropertyGraphStore(\n    username=\"neo4j\",\n    password=\"&lt;password&gt;\",\n    url=\"bolt://localhost:7687\",\n)\n\n# creates an index\nindex = PropertyGraphIndex.from_documents(\n    documents,\n    property_graph_store=graph_store,\n    # optional, neo4j also supports vectors directly\n    vector_store=vector_store,\n    embed_kg_nodes=True,\n)\n\n# load from existing graph/vector store\nindex = PropertyGraphIndex.from_existing(\n    property_graph_store=graph_store,\n    # optional, neo4j also supports vectors directly\n    vector_store=vector_store,\n    embed_kg_nodes=True,\n)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%B1%9E%E6%80%A7%E5%9B%BE%E7%B4%A2%E5%BC%95/#property-graph-store","title":"\u76f4\u63a5\u4f7f\u7528 <code>Property Graph Store</code>","text":"<p>\u5c5e\u6027\u56fe\u7684\u57fa\u672c\u5b58\u50a8\u7c7b\u662f <code>PropertyGraphStore</code>\u3002\u8fd9\u4e9b\u5c5e\u6027\u56fe\u5b58\u50a8\u4f7f\u7528\u4e0d\u540c\u7c7b\u578b\u7684\u5bf9\u8c61\u6784\u5efaLabeledNode\uff0c\u5e76\u4f7f\u7528\u5bf9\u8c61\u8fde\u63a5Relation\u3002</p> <p>\u6211\u4eec\u53ef\u4ee5\u81ea\u5df1\u521b\u9020\u8fd9\u4e9b\uff0c\u4e5f\u53ef\u4ee5\u81ea\u5df1\u63d2\u5165\uff01</p> <p>Python<pre><code>from llama_index.core.graph_stores import (\n    SimplePropertyGraphStore,\n    EntityNode,\n    Relation,\n)\nfrom llama_index.core.schema import TextNode\n\ngraph_store = SimplePropertyGraphStore()\n\nentities = [\n    EntityNode(name=\"llama\", label=\"ANIMAL\", properties={\"key\": \"val\"}),\n    EntityNode(name=\"index\", label=\"THING\", properties={\"key\": \"val\"}),\n]\n\nrelations = [\n    Relation(\n        label=\"HAS\",\n        source_id=entities[0].id,\n        target_id=entities[1].id,\n        properties={},\n    )\n]\n\ngraph_store.upsert_nodes(entities)\ngraph_store.upsert_relations(relations)\n\n# optionally, we can also insert text chunks\nsource_chunk = TextNode(id_=\"source\", text=\"My llama has an index.\")\n\n# create relation for each of our entities\nsource_relations = [\n    Relation(\n        label=\"HAS_SOURCE\",\n        source_id=entities[0].id,\n        target_id=\"source\",\n    ),\n    Relation(\n        label=\"HAS_SOURCE\",\n        source_id=entities[1].id,\n        target_id=\"source\",\n    ),\n]\ngraph_store.upsert_llama_nodes([source_chunk])\ngraph_store.upsert_relations(source_relations)\n</code></pre> \u56fe\u5f62\u5b58\u50a8\u4e0a\u7684\u5176\u4ed6\u6709\u7528\u65b9\u6cd5\u5305\u62ec\uff1a  - <code>graph_store.get(ids=[])</code>  \u6839\u636e id \u83b7\u53d6\u8282\u70b9  - <code>graph_store.get(properties={\"key\": \"val\"})</code>  \u6839\u636e\u5339\u914d\u5c5e\u6027\u83b7\u53d6\u8282\u70b9  - <code>graph_store.get_rel_map([entity_node], depth=2)</code> \u83b7\u53d6\u8fbe\u5230\u4e00\u5b9a\u6df1\u5ea6\u7684\u4e09\u5143\u7ec4  - <code>graph_store.get_llama_nodes(['id1'])</code> \u83b7\u53d6\u539f\u59cb\u6587\u672c\u8282\u70b9  - <code>graph_store.delete(ids=['id1'])</code> \u6839\u636e id \u5220\u9664  - <code>graph_store.delete(properties={\"key\": \"val\"})</code> \u6839\u636e\u5c5e\u6027\u5220\u9664  - <code>graph_store.structured_query(\"&lt;cypher query&gt;\")</code> \u8fd0\u884c\u5bc6\u7801\u67e5\u8be2\uff08\u5047\u8bbe\u56fe\u5f62\u5b58\u50a8\u652f\u6301\u5b83\uff09</p> <p>\u6b64\u5916\uff0c\u6240\u6709\u8fd9\u4e9b\u90fd\u5b58\u5728\u7528\u4e8e\u5f02\u6b65\u652f\u6301\u7684\u7248\u672c\uff08\u5373aget\uff0cadelete\u7b49\u7b49\uff09\u3002</p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%B1%9E%E6%80%A7%E5%9B%BE%E7%B4%A2%E5%BC%95/#_8","title":"\u9ad8\u7ea7\u5b9a\u5236","text":"<p>\u4e0e LlamaIndex \u4e2d\u7684\u6240\u6709\u7ec4\u4ef6\u4e00\u6837\uff0c\u60a8\u53ef\u4ee5\u5bf9\u6a21\u5757\u8fdb\u884c\u5b50\u7c7b\u5316\u5e76\u81ea\u5b9a\u4e49\u5176\u5de5\u4f5c\u65b9\u5f0f\uff0c\u4ee5\u4fbf\u5b8c\u5168\u6309\u7167\u60a8\u7684\u9700\u8981\u5de5\u4f5c\uff0c\u6216\u8005\u5c1d\u8bd5\u65b0\u7684\u60f3\u6cd5\u5e76\u7814\u7a76\u65b0\u7684\u6a21\u5757\uff01</p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%B1%9E%E6%80%A7%E5%9B%BE%E7%B4%A2%E5%BC%95/#_9","title":"\u5b50\u7c7b\u63d0\u53d6\u5668","text":"<p>LlamaIndex \u4e2d\u7684\u56fe\u5f62\u63d0\u53d6\u5668\u662f\u8be5\u7c7b\u7684\u5b50TransformComponent\u7c7b\u3002\u5982\u679c\u60a8\u4ee5\u524d\u4f7f\u7528\u8fc7\u6444\u53d6\u7ba1\u9053\uff0c\u90a3\u4e48\u60a8\u4f1a\u5f88\u719f\u6089\u5b83\uff0c\u56e0\u4e3a\u5b83\u662f\u540c\u4e00\u4e2a\u7c7b\u3002</p> <p>\u63d0\u53d6\u5668\u7684\u8981\u6c42\u662f\u5c06\u56fe\u5f62\u6570\u636e\u63d2\u5165\u5230\u8282\u70b9\u7684\u5143\u6570\u636e\u4e2d\uff0c\u7136\u540e\u7a0d\u540e\u7531\u7d22\u5f15\u8fdb\u884c\u5904\u7406\u3002</p> <p>\u4ee5\u4e0b\u662f\u901a\u8fc7\u5b50\u7c7b\u5316\u521b\u5efa\u81ea\u5b9a\u4e49\u63d0\u53d6\u5668\u7684\u4e00\u4e2a\u5c0f\u4f8b\u5b50\uff1a</p> Python<pre><code>from llama_index.core.graph_store.types import (\n    EntityNode,\n    Relation,\n    KG_NODES_KEY,\n    KG_RELATIONS_KEY,\n)\nfrom llama_index.core.schema import BaseNode, TransformComponent\n\n\nclass MyGraphExtractor(TransformComponent):\n    # the init is optional\n    # def __init__(self, ...):\n    #     ...\n\n    def __call__(\n        self, llama_nodes: list[BaseNode], **kwargs\n    ) -&gt; list[BaseNode]:\n        for llama_node in llama_nodes:\n            # be sure to not overwrite existing entities/relations\n\n            existing_nodes = llama_node.metadata.pop(KG_NODES_KEY, [])\n            existing_relations = llama_node.metadata.pop(KG_RELATIONS_KEY, [])\n\n            existing_nodes.append(\n                EntityNode(\n                    name=\"llama\", label=\"ANIMAL\", properties={\"key\": \"val\"}\n                )\n            )\n            existing_nodes.append(\n                EntityNode(\n                    name=\"index\", label=\"THING\", properties={\"key\": \"val\"}\n                )\n            )\n\n            existing_relations.append(\n                Relation(\n                    label=\"HAS\",\n                    source_id=\"llama\",\n                    target_id=\"index\",\n                    properties={},\n                )\n            )\n\n            # add back to the metadata\n\n            llama_node.metadata[KG_NODES_KEY] = existing_nodes\n            llama_node.metadata[KG_RELATIONS_KEY] = existing_relations\n\n        return llama_nodes\n\n    # optional async method\n    # async def acall(self, llama_nodes: list[BaseNode], **kwargs) -&gt; list[BaseNode]:\n    #    ...\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%B1%9E%E6%80%A7%E5%9B%BE%E7%B4%A2%E5%BC%95/#_10","title":"\u5b50\u68c0\u7d22\u5668","text":"<p>\u68c0\u7d22\u5668\u6bd4\u63d0\u53d6\u5668\u7a0d\u5fae\u590d\u6742\u4e00\u4e9b\uff0c\u5e76\u4e14\u6709\u81ea\u5df1\u7684\u7279\u6b8a\u7c7b\uff0c\u4ee5\u5e2e\u52a9\u66f4\u5bb9\u6613\u5730\u8fdb\u884c\u5b50\u7c7b\u5316\u3002</p> <p>\u68c0\u7d22\u7684\u8fd4\u56de\u7c7b\u578b\u975e\u5e38\u7075\u6d3b\u3002\u5b83\u53ef\u4ee5\u662f  - \u5b57\u7b26\u4e32  - \u4e00\u4e2a <code>TextNode</code>  - \u4e00\u4e2a <code>NodeWithScore</code> \u4e0a\u8ff0\u4e4b\u4e00\u7684\u5217\u8868</p> <p>\u4ee5\u4e0b\u662f\u521b\u5efa\u81ea\u5b9a\u4e49\u68c0\u7d22\u5668\u7684\u5b50\u7c7b\u5316\u7684\u4e00\u4e2a\u5c0f\u4f8b\u5b50\uff1a</p> <p>Python<pre><code>from llama_index.core.indices.property_graph import (\n    CustomPGRetriever,\n    CUSTOM_RETRIEVE_TYPE,\n)\n\n\nclass MyCustomRetriever(CustomPGRetriever):\n    def init(self, my_option_1: bool = False, **kwargs) -&gt; None:\n        \"\"\"Uses any kwargs passed in from class constructor.\"\"\"\n        self.my_option_1 = my_option_1\n        # optionally do something with self.graph_store\n\n    def custom_retrieve(self, query_str: str) -&gt; CUSTOM_RETRIEVE_TYPE:\n        # some some operation with self.graph_store\n        return \"result\"\n\n    # optional async method\n    # async def acustom_retrieve(self, query_str: str) -&gt; str:\n    #     ...\n\n\ncustom_retriever = MyCustomRetriever(graph_store, my_option_1=True)\n\nretriever = index.as_retriever(sub_retrievers=[custom_retriever])\n</code></pre> \u5bf9\u4e8e\u66f4\u590d\u6742\u7684\u5b9a\u5236\u548c\u7528\u4f8b\uff0c\u5efa\u8bae\u68c0\u67e5\u6e90\u4ee3\u7801\u5e76\u76f4\u63a5\u8fdb\u884c\u5b50\u7c7b\u5316BasePGRetriever\u3002</p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%B1%9E%E6%80%A7%E5%9B%BE%E7%B4%A2%E5%BC%95/#_11","title":"\u793a\u4f8b","text":"<p>\u4e0b\u9762\uff0c\u60a8\u53ef\u4ee5\u627e\u5230\u4e00\u4e9b\u793a\u4f8b\u7b14\u8bb0\u672c\uff0c\u5c55\u793a\u4e86PropertyGraphIndex</p> <ul> <li>\u57fa\u672c\u7528\u6cd5</li> <li>\u4f7f\u7528 Neo4j</li> <li>\u4f7f\u7528 Nebula</li> <li>Neo4j \u548c\u672c\u5730\u6a21\u578b\u7684\u9ad8\u7ea7\u7528\u6cd5</li> <li>\u4f7f\u7528\u5c5e\u6027\u56fe\u5b58\u50a8</li> <li>\u521b\u5efa\u81ea\u5b9a\u4e49\u56fe\u5f62\u68c0\u7d22\u5668</li> <li>\u6bd4\u8f83 KG \u8403\u53d6\u5668</li> </ul>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%BC%95%E8%A8%80/","title":"\u5f15\u8a00","text":""},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%BC%95%E8%A8%80/#_1","title":"\u7d22\u5f15","text":""},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%BC%95%E8%A8%80/#_2","title":"\u6982\u5ff5","text":"<p>\u7d22\u5f15 <code>Index</code> \u4e00\u79cd\u6570\u636e\u7ed3\u6784\uff0c\u53ef\u8ba9\u6211\u4eec\u6839\u636e\u7528\u6237\u7684\u67e5\u8be2query\u5feb\u901f\u68c0\u7d22\u5230\u76f8\u5173\u7684\u4e0a\u4e0b\u6587\u3002\u5bf9\u4e8e LlamaIndex \u800c\u8a00\uff0c\u5b83\u662f\u68c0\u7d22\u589e\u5f3a\u751f\u6210 (RAG) \u6838\u5fc3\u6a21\u5757\u3002</p> <p>\u4ece\u9ad8\u5c42\u6b21\u4e0a\u8bb2\uff0cIndexes \u7531\u6587\u6863 <code>Document</code> \u6784\u5efa\u7684\u3002\u7d22\u5f15 <code>Index</code> \u7528\u4e8e\u6784\u5efa\u67e5\u8be2\u5f15\u64ce\u548c\u804a\u5929\u5f15\u64ce \uff0c\u4ece\u800c\u5b9e\u73b0\u5bf9\u6570\u636e\u7684\u95ee\u7b54\u548c\u804a\u5929\u3002</p> <p>\u5728\u5e95\u5c42\uff0c<code>Indexes</code> \u5c06\u6570\u636e\u5b58\u50a8\u5728 <code>Node</code> \u5bf9\u8c61\uff08\u4ee3\u8868\u539f\u59cb\u6587\u6863\u7684\u7247\u6bb5 <code>chunks</code> \uff09\u4e2d\uff0c\u901a\u8fc7\u66b4\u9732\u51fa <code>Retriever</code> \u63a5\u53e3\uff0c\u901a\u8fc7\u8be5\u63a5\u53e3\u652f\u6301\u989d\u5916\u914d\u7f6e\u548c\u81ea\u52a8\u5316\u5904\u7406\u3002</p> <p>\u76ee\u524d\u6700\u5e38\u89c1\u7684\u7d22\u5f15\u662f <code>VectorStoreIndex</code>\uff1b\u6700\u597d\u7684\u5f00\u59cb\u70b9\u4e5f\u662f<code>VectorStoreIndex</code> \u4f7f\u7528\u6587\u6863\u5f00\u59cb\u3002</p> <p>\u5bf9\u4e8e\u5176\u4ed6\u7d22\u5f15\u65b9\u6cd5\uff0c\u8bf7\u67e5\u770b\u6211\u4eec\u7684\u6bcf\u4e2a\u7d22\u5f15\u5982\u4f55\u5de5\u4f5c\u5bf9\u5e94\u7684\u6587\u6863\uff0c\u4ee5\u5e2e\u52a9\u60a8\u786e\u5b9a\u54ea\u4e2a\u7d22\u5f15\u9002\u5408\u60a8\u7684\u7528\u4f8b\u3002</p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%BC%95%E8%A8%80/#_3","title":"\u5176\u4ed6\u6307\u6570\u8d44\u6e90","text":"<p>\u53c2\u89c1\u6a21\u5757\u6307\u5357</p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%BC%95%E8%A8%80/#_4","title":"\u53c2\u8003\uff1a","text":"<ol> <li>https://docs.llamaindex.ai/en/stable/module_guides/indexing/</li> </ol>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E6%96%87%E6%A1%A3%E7%AE%A1%E7%90%86/","title":"\u6587\u6863\u7ba1\u7406","text":""},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E6%96%87%E6%A1%A3%E7%AE%A1%E7%90%86/#_1","title":"\u6587\u6863\u7ba1\u7406","text":"<p>\u5927\u591a\u6570 <code>LlamaIndex</code> \u7d22\u5f15\u7ed3\u6784\u5141\u8bb8 \u63d2\u5165\u3001\u5220\u9664\u3001\u66f4\u65b0 \u548c \u5237\u65b0 \u64cd\u4f5c\u3002</p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E6%96%87%E6%A1%A3%E7%AE%A1%E7%90%86/#_2","title":"\u63d2\u5165","text":"<p>\u6211\u4eec\u53ef\u4ee5\u5728\u521d\u59cb\u6784\u5efa\u7d22\u5f15\u540e\u5c06\u65b0\u6587\u6863 \u201c\u63d2\u5165\u201d \u5230\u4efb\u4f55\u7d22\u5f15\u6570\u636e\u7ed3\u6784\u4e2d\u3002\u8be5\u6587\u6863\u5c06\u88ab\u5206\u89e3\u4e3a\u8282\u70b9\u5e76\u88ab\u63d2\u5165\u7d22\u5f15\u4e2d\u3002</p> <p>\u63d2\u5165\u80cc\u540e\u7684\u5e95\u5c42\u673a\u5236\u53d6\u51b3\u4e8e\u7d22\u5f15\u7ed3\u6784\u3002\u4f8b\u5982\uff0c\u5bf9\u4e8e\u6458\u8981\u7d22\u5f15\uff0c\u4f1a\u5c06\u65b0\u6587\u6863\u4f5c\u4e3a\u5217\u8868\u4e2d\u7684\u9644\u52a0\u8282\u70b9\u63d2\u5165\u3002\u5bf9\u4e8e\u5411\u91cf\u5b58\u50a8\u7d22\u5f15\uff0c\u4f1a\u5c06\u65b0\u6587\u6863\uff08\u548c\u5d4c\u5165\uff09\u63d2\u5165\u5230\u5e95\u5c42\u6587\u6863/\u5d4c\u5165\u5b58\u50a8\u4e2d\u3002</p> <p>\u4e0b\u9762\u7ed9\u51fa\u4e86\u4e00\u4e2a\u793a\u4f8b\u4ee3\u7801\u7247\u6bb5\uff1a</p> Python<pre><code>from llama_index.core import SummaryIndex, Document\n\nindex = SummaryIndex([])\ntext_chunks = [\"text_chunk_1\", \"text_chunk_2\", \"text_chunk_3\"]\n\ndoc_chunks = []\nfor i, text in enumerate(text_chunks):\n    doc = Document(text=text, id_=f\"doc_id_{i}\")\n    doc_chunks.append(doc)\n\n# insert\nfor doc_chunk in doc_chunks:\n    index.insert(doc_chunk)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E6%96%87%E6%A1%A3%E7%AE%A1%E7%90%86/#_3","title":"\u5220\u9664","text":"<p>\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u6307\u5b9a <code>document_id</code> \u4ece\u5927\u591a\u6570\u7d22\u5f15\u6570\u636e\u7ed3\u6784\u4e2d \u201c\u5220\u9664\u201d \u6587\u6863\u3002\uff08\u6ce8\u610f\uff1a\u6811\u7d22\u5f15\u76ee\u524d\u4e0d\u652f\u6301\u5220\u9664\uff09\u3002\u4e0e\u6587\u6863\u5bf9\u5e94\u7684\u6240\u6709\u8282\u70b9\u90fd\u5c06\u88ab\u5220\u9664\u3002</p> Python<pre><code>index.delete_ref_doc(\"doc_id_0\", delete_from_docstore=True)\n</code></pre> <p>\u5982\u679c\u60a8\u5728\u4f7f\u7528\u76f8\u540c\u6587\u6863\u5e93\u7684\u7d22\u5f15\u4e4b\u95f4\u5171\u4eab\u8282\u70b9\uff0c<code>delete_from_docstore</code> \u9ed8\u8ba4\u4e3aFalse\u3002\u4f46\u662f\uff0c\u5f53\u8bbe\u7f6e\u4e3aFalse\u65f6\uff0c\u67e5\u8be2\u65f6\u4e0d\u4f1a\u4f7f\u7528\u8fd9\u4e9b\u8282\u70b9\uff0c\u56e0\u4e3a\u5b83\u4eec\u5c06\u4ece <code>index_struct</code> \u7d22\u5f15\u4e2d\u5220\u9664\uff0c\u7d22\u5f15\u4f1a\u8ddf\u8e2a\u54ea\u4e9b\u8282\u70b9\u53ef\u7528\u4e8e\u67e5\u8be2\u3002</p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E6%96%87%E6%A1%A3%E7%AE%A1%E7%90%86/#_4","title":"\u66f4\u65b0","text":"<p>\u5982\u679c\u6587\u6863\u5df2\u5b58\u5728\u4e8e\u7d22\u5f15\u4e2d\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528\u76f8\u540c\u7684\u6587\u6863\u201c\u66f4\u65b0\u201d\u6587\u6863 <code>id_</code>\uff08\u4f8b\u5982\uff0c\u5982\u679c\u6587\u6863\u4e2d\u7684\u4fe1\u606f\u5df2\u66f4\u6539\uff09\u3002</p> Python<pre><code># NOTE: the document has a `doc_id` specified\ndoc_chunks[0].text = \"Brand new document text\"\nindex.update_ref_doc(doc_chunks[0])\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E6%96%87%E6%A1%A3%E7%AE%A1%E7%90%86/#_5","title":"\u5237\u65b0","text":"<p>\u5982\u679c\u60a8\u5728\u52a0\u8f7d\u6570\u636e\u65f6\u8bbe\u7f6e\u6bcf\u4e2a\u6587\u6863\u7684\u6587\u6863 <code>id_</code>\uff0c\u60a8\u8fd8\u53ef\u4ee5\u81ea\u52a8\u5237\u65b0\u7d22\u5f15\u3002</p> <p>\u8be5 <code>refresh()</code> \u51fd\u6570\u53ea\u4f1a\u66f4\u65b0\u5177\u6709\u76f8\u540c <code>doc_id_</code>\uff0c\u4f46\u4e0d\u540c\u6587\u672c\u5185\u5bb9\u7684\u6587\u6863\u3002\u7d22\u5f15\u4e2d\u4e0d\u5b58\u5728\u7684\u4efb\u4f55\u6587\u6863\u4e5f\u5c06\u88ab\u63d2\u5165\u3002</p> <p><code>refresh()</code> \u8fd8\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u5217\u8868\uff0c\u6307\u793a\u8f93\u5165\u4e2d\u7684\u54ea\u4e9b\u6587\u6863\u5df2\u5728\u7d22\u5f15\u4e2d\u5237\u65b0\u3002</p> Python<pre><code># modify first document, with the same doc_id\ndoc_chunks[0] = Document(text=\"Super new document text\", id_=\"doc_id_0\")\n\n# add a new document\ndoc_chunks.append(\n    Document(\n        text=\"This isn't in the index yet, but it will be soon!\",\n        id_=\"doc_id_3\",\n    )\n)\n\n# refresh the index\nrefreshed_docs = index.refresh_ref_docs(doc_chunks)\n\n# refreshed_docs[0] and refreshed_docs[-1] should be true\n</code></pre> <p>\u518d\u6b21\uff0c\u6211\u4eec\u4f20\u9012\u4e86\u4e00\u4e9b\u989d\u5916\u7684 kwargs \u6765\u786e\u4fdd\u6587\u6863\u4ece\u6587\u6863\u5e93\u4e2d\u5220\u9664\u3002\u8fd9\u5f53\u7136\u662f\u53ef\u9009\u7684\u3002</p> <p>\u5982\u679c\u60a8print()\u8f93\u51farefresh()\uff0c\u60a8\u5c06\u770b\u5230\u54ea\u4e9b\u8f93\u5165\u6587\u6863\u5df2\u88ab\u5237\u65b0\uff1a</p> Python<pre><code>print(refreshed_docs)\n# &gt; [True, False, False, True]\n</code></pre> <p>\u5f53\u60a8\u4ece\u4e0d\u65ad\u66f4\u65b0\u65b0\u4fe1\u606f\u7684\u76ee\u5f55\u4e2d\u8bfb\u53d6\u6570\u636e\u65f6\uff0c\u8fd9\u975e\u5e38\u6709\u7528\u3002</p> <p>id_\u82e5\u8981\u5728\u4f7f\u7528\u65f6\u81ea\u52a8\u8bbe\u7f6e\u6587\u6863SimpleDirectoryReader\uff0c\u60a8\u53ef\u4ee5\u8bbe\u7f6efilename_as_id\u6807\u5fd7\u3002\u60a8\u53ef\u4ee5\u4e86\u89e3\u6709\u5173\u81ea\u5b9a\u4e49\u6587\u6863\u7684\u66f4\u591a\u4fe1\u606f\u3002</p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E6%96%87%E6%A1%A3%E7%AE%A1%E7%90%86/#_6","title":"\u6587\u6863\u8ffd\u8e2a","text":"<p>\u4efb\u4f55\u4f7f\u7528\u6587\u6863\u5b58\u50a8\u7684\u7d22\u5f15\uff08\u5373\u9664\u4e86\u5927\u591a\u6570\u5411\u91cf\u5b58\u50a8\u96c6\u6210\u4e4b\u5916\u7684\u6240\u6709\u7d22\u5f15\uff09\uff0c\u60a8\u8fd8\u53ef\u4ee5\u770b\u5230\u5df2\u63d2\u5165\u5230\u6587\u6863\u5b58\u50a8\u4e2d\u7684\u6587\u6863\u3002</p> Python<pre><code>print(index.ref_doc_info)\n\"\"\"\n&gt; {'doc_id_1': RefDocInfo(node_ids=['071a66a8-3c47-49ad-84fa-7010c6277479'], metadata={}),\n   'doc_id_2': RefDocInfo(node_ids=['9563e84b-f934-41c3-acfd-22e88492c869'], metadata={}),\n   'doc_id_0': RefDocInfo(node_ids=['b53e6c2f-16f7-4024-af4c-42890e945f36'], metadata={}),\n   'doc_id_3': RefDocInfo(node_ids=['6bedb29f-15db-4c7c-9885-7490e10aa33f'], metadata={})}\n\"\"\"\n</code></pre> <p>\u8f93\u51fa\u4e2d\u7684\u6bcf\u4e2a\u6761\u76ee\u90fd\u5c06\u6444\u53d6\u7684\u6587\u6863\u663e\u793aid_\u4e3a\u952e\uff0c\u5e76\u5c06\u5176node_ids\u4e0e\u5206\u5272\u6210\u7684\u8282\u70b9\u5173\u8054\u3002</p> <p>metadata\u6700\u540e\uff0c\u8fd8\u4f1a\u8ddf\u8e2a\u6bcf\u4e2a\u8f93\u5165\u6587\u6863\u7684\u539f\u59cb\u8bcd\u5178\u3002\u60a8\u53ef\u4ee5metadata\u5728\u81ea\u5b9a\u4e49\u6587\u6863\u4e2d\u9605\u8bfb\u6709\u5173\u8be5\u5c5e\u6027\u7684\u66f4\u591a\u4fe1\u606f\u3002</p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E7%B4%A2%E5%BC%95%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/","title":"\u7d22\u5f15\u5165\u95e8\u6307\u5357","text":""},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E7%B4%A2%E5%BC%95%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/#_1","title":"\u6bcf\u4e2a\u7d22\u5f15\u7684\u5de5\u4f5c\u539f\u7406","text":"<p>\u672c\u6307\u5357\u901a\u8fc7\u56fe\u8868\u63cf\u8ff0\u4e86\u6bcf\u4e2a\u7d22\u5f15\u5982\u4f55\u5de5\u4f5c\u3002</p> <p>\u4e86\u89e3\u7d22\u5f15\u4e4b\u524d\u9700\u8981\u5b9a\u4e49\u4e00\u4e9b\u672f\u8bed\uff1a</p> <ul> <li><code>Node</code>\uff1a\u5bf9\u5e94\u4e8e <code>Document</code> \u4e2d\u7684\u4e00\u6bb5\u6587\u672c\u3002LlamaIndex \u63a5\u6536 <code>Document</code> \u5bf9\u8c61\u5e76\u5728\u5185\u90e8\u5c06\u5176 \u3010\u89e3\u6790/\u5206\u5757\u3011\u4e3a <code>Node</code> \u5bf9\u8c61\u3002</li> <li>\u54cd\u5e94\u5408\u6210\uff1a\u6211\u4eec\u7684\u6a21\u5757\u6839\u636e\u68c0\u7d22\u5230\u7684\u8282\u70b9\u5408\u6210\u54cd\u5e94\u3002\u60a8\u53ef\u4ee5\u770b\u5230\u5982\u4f55\u6307\u5b9a\u4e0d\u540c\u7684\u54cd\u5e94\u6a21\u5f0f\u3002</li> </ul>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E7%B4%A2%E5%BC%95%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/#_2","title":"\u6458\u8981\u7d22\u5f15\uff08\u4ee5\u524d\u79f0\u4e3a\u5217\u8868\u7d22\u5f15)","text":"<p>\u6458\u8981\u7d22\u5f15\u53ea\u662f\u5c06\u8282\u70b9\u5b58\u50a8\u4e3a\u987a\u5e8f\u94fe\u3002 </p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E7%B4%A2%E5%BC%95%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/#_3","title":"\u67e5\u8be2","text":"<p>\u5728\u67e5\u8be2\u671f\u95f4\uff0c\u5982\u679c\u6ca1\u6709\u6307\u5b9a\u5176\u4ed6\u67e5\u8be2\u53c2\u6570\uff0cLlamaIndex \u53ea\u4f1a\u5c06\u5217\u8868\u4e2d\u7684\u6240\u6709\u8282\u70b9\u52a0\u8f7d\u5230\u6211\u4eec\u7684\u54cd\u5e94\u5408\u6210\u6a21\u5757\u4e2d\u3002 </p> <p>\u6458\u8981\u7d22\u5f15\u65b9\u5f0f\u786e\u5b9e\u63d0\u4f9b\u4e86\u591a\u79cd\u67e5\u8be2\u68c0\u7d22\u5230\u6458\u8981\u7d22\u5f15\u7684\u65b9\u6cd5\uff0c\u4ece\u57fa\u4e8e\u5d4c\u5165\u7684\u67e5\u8be2\uff08\u5c06\u83b7\u53d6\u524d k \u4e2a\u90bb\u5c45\uff09\u6216\u6dfb\u52a0\u5173\u952e\u5b57\u8fc7\u6ee4\u5668\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <p></p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E7%B4%A2%E5%BC%95%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/#_4","title":"\u5411\u91cf\u5b58\u50a8\u7d22\u5f15","text":"<p>\u5411\u91cf\u5b58\u50a8\u7d22\u5f15\u5c06\u6bcf\u4e2a\u8282\u70b9\u548c\u76f8\u5e94\u7684\u5d4c\u5165\u5b58\u50a8\u5728\u5411\u91cf\u6570\u636e\u5e93\u4e2d\u3002</p> <p></p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E7%B4%A2%E5%BC%95%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/#_5","title":"\u67e5\u8be2","text":"<p>\u67e5\u8be2\u4e00\u4e2a\u5411\u91cf\u6570\u636e\u5e93\u4e2d\u7684\u7d22\u5f15\u6d89\u53ca\u68c0\u7d22\u524d k \u4e2a\u6700\u76f8\u4f3c\u7684\u8282\u70b9\uff0c\u5e76\u5c06\u5b83\u4eec\u4f20\u9012\u5230\u6211\u4eec\u7684\u54cd\u5e94\u5408\u6210\u6a21\u5757\u4e2d\u3002</p> <p></p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E7%B4%A2%E5%BC%95%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/#_6","title":"\u6811\u7d22\u5f15","text":"<p>\u6811\u7d22\u5f15\u4ece\u4e00\u7ec4\u8282\u70b9\uff08\u6210\u4e3a\u8be5\u6811\u4e2d\u7684\u53f6\u8282\u70b9\uff09\u6784\u5efa\u4e00\u4e2a\u5c42\u6b21\u6811\u3002</p> <p></p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E7%B4%A2%E5%BC%95%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/#_7","title":"\u67e5\u8be2","text":"<p>\u67e5\u8be2\u6811\u5f62\u7d22\u5f15\u6d89\u53ca\u4ece\u6839\u8282\u70b9\u5411\u4e0b\u904d\u5386\u5230\u53f6\u8282\u70b9\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\uff08child_branch_factor=1\uff09\uff0c\u67e5\u8be2\u5728\u7ed9\u5b9a\u7236\u8282\u70b9\u7684\u60c5\u51b5\u4e0b\u9009\u62e9\u4e00\u4e2a\u5b50\u8282\u70b9\u3002\u5982\u679cchild_branch_factor=2\uff0c\u67e5\u8be2\u6bcf\u7ea7\u9009\u62e9\u4e24\u4e2a\u5b50\u8282\u70b9\u3002 </p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E7%B4%A2%E5%BC%95%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/#_8","title":"\u5173\u952e\u5b57\u8868\u7d22\u5f15","text":"<p>\u5173\u952e\u5b57\u8868\u7d22\u5f15\u4ece\u6bcf\u4e2a\u8282\u70b9\u63d0\u53d6\u5173\u952e\u5b57\uff0c\u6784\u5efa\u4e00\u4e2a\u4ece\u5173\u952e\u5b57\u5230\u8be5\u5173\u952e\u5b57\u5bf9\u5e94\u8282\u70b9\u4e4b\u95f4\u7684\u6620\u5c04\u5173\u7cfb\u3002 </p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E7%B4%A2%E5%BC%95%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/#_9","title":"\u67e5\u8be2","text":"<p>\u5728\u67e5\u8be2\u65f6\uff0c\u6211\u4eec\u4ece\u67e5\u8be2\u4e2d\u63d0\u53d6\u76f8\u5173\u5173\u952e\u5b57\uff0c\u5e76\u5c06\u5176\u4e0e\u9884\u5148\u63d0\u53d6\u7684\u8282\u70b9\u5173\u952e\u5b57\u8fdb\u884c\u5339\u914d\u4ee5\u83b7\u53d6\u76f8\u5e94\u7684\u8282\u70b9\u3002\u63d0\u53d6\u7684\u8282\u70b9\u88ab\u4f20\u9012\u7ed9\u6211\u4eec\u7684\u54cd\u5e94\u5408\u6210\u6a21\u5757\u3002</p> <p></p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E7%B4%A2%E5%BC%95%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/#_10","title":"\u5c5e\u6027\u56fe\u7d22\u5f15","text":"<p>\u5c5e\u6027\u56fe\u7d22\u5f15 \u7684\u5de5\u4f5c\u539f\u7406\u662f\u9996\u5148\u6784\u5efa\u4e00\u4e2a\u5305\u542b \u6807\u8bb0\u8282\u70b9 \u548c \u5173\u7cfb \u7684\u77e5\u8bc6\u56fe\u8c31\u3002\u6b64\u56fe\u8c31\u7684\u6784\u5efa\u9ad8\u5ea6\u53ef\u5b9a\u5236\uff0c\u8303\u56f4\u4e0a\u4ece\u8ba9 LLM \u63d0\u53d6\u5176\u60f3\u8981\u7684\u4efb\u4f55\u5185\u5bb9\uff0c\u5230\u4f7f\u7528\u4e25\u683c\u6a21\u5f0f\u63d0\u53d6\uff0c\u751a\u81f3\u5b9e\u73b0\u6211\u4eec\u81ea\u5df1\u7684\u63d0\u53d6\u6a21\u5757\u3002</p> <p>\u53e6\u5916\uff0c\u8fd8\u53ef\u4ee5\u5d4c\u5165\u8282\u70b9\u4ee5\u4fbf\u7a0d\u540e\u68c0\u7d22\u3002</p> <p>\u60a8\u8fd8\u53ef\u4ee5\u8df3\u8fc7\u521b\u5efa\uff0c\u5e76\u4f7f\u7528 Neo4j \u7b49\u96c6\u6210\u8fde\u63a5\u5230\u73b0\u6709\u77e5\u8bc6\u56fe\u3002</p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E7%B4%A2%E5%BC%95%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/#_11","title":"\u67e5\u8be2","text":"<p>\u67e5\u8be2\u5c5e \u6027\u56fe\u7d22\u5f15 \u4e5f\u975e\u5e38\u7075\u6d3b\u3002\u68c0\u7d22\u901a\u8fc7\u4f7f\u7528\u591a\u4e2a\u5b50\u68c0\u7d22\u5668\u5e76\u5408\u5e76\u7ed3\u679c\u6765\u5b9e\u73b0\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4f7f\u7528 \u3010\u5173\u952e\u5b57 + \u540c\u4e49\u8bcd\u6269\u5c55\u3011\u4ee5\u53ca \u5411\u91cf\u68c0\u7d22\uff08\u5982\u679c\u60a8\u7684\u56fe\u662f\u5d4c\u5165\u7684\uff09\u6765\u68c0\u7d22\u76f8\u5173\u4e09\u5143\u7ec4\u3002</p> <p>\u9664\u4e86\u68c0\u7d22\u5230\u7684\u4e09\u5143\u7ec4\u4e4b\u5916\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u9009\u62e9\u8fd8\u5305\u542b\u6e90\u6587\u672c\uff08\u5bf9\u4e8e\u5728 LlamaIndex \u4e4b\u5916\u521b\u5efa\u7684\u56fe\u8868\u4e0d\u53ef\u7528\uff09\u3002</p> <p>\u66f4\u591a\u5185\u5bb9\u8bf7\u53c2\u9605\u5c5e\u6027\u56fe\u7684\u5b8c\u6574\u6307\u5357\u3002</p>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E5%BC%95%E8%A8%80/","title":"\u5f15\u8a00","text":""},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E5%BC%95%E8%A8%80/#_1","title":"\u8282\u70b9\u89e3\u6790\u5668\u4f7f\u7528\u6a21\u5f0f","text":"<p>\u8282\u70b9\u89e3\u6790\u5668\u662f\u4e00\u79cd\u7b80\u5355\u7684\u62bd\u8c61\uff0c\u5b83\u83b7\u53d6\u6587\u6863\u5217\u8868\uff0c\u5e76\u5c06\u5b83\u4eec \u5206\u5757\u6210Node\u5bf9\u8c61\uff0c\u8fd9\u6837\u6bcf\u4e2a\u8282\u70b9\u90fd\u662f\u7236\u6587\u6863\u7684\u7279\u5b9a\u5757\u3002\u5f53\u6587\u6863\u88ab\u5206\u89e3\u6210\u8282\u70b9\u65f6\uff0c\u5b83\u7684\u6240\u6709\u5c5e\u6027\u90fd\u4f1a\u88ab\u7ee7\u627f\u5230\u5b50\u8282\u70b9\uff08\u5373metadata\u6587\u672c\u548c\u5143\u6570\u636e\u6a21\u677f\u7b49\uff09\u3002\u60a8\u53ef\u4ee5\u5728\u6b64\u5904\u9605\u8bfb\u6709\u5173Node\u548cDocument\u5c5e\u6027\u7684\u66f4\u591a\u4fe1\u606f\u3002</p>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E5%BC%95%E8%A8%80/#_2","title":"\u5165\u95e8","text":""},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E5%BC%95%E8%A8%80/#_3","title":"\u72ec\u7acb\u4f7f\u7528","text":"<p>\u8282\u70b9\u89e3\u6790\u5668\u53ef\u4ee5\u5355\u72ec\u4f7f\u7528\uff1a</p> Python<pre><code>from llama_index.core import Document\nfrom llama_index.core.node_parser import SentenceSplitter\n\nnode_parser = SentenceSplitter(chunk_size=1024, chunk_overlap=20)\n\nnodes = node_parser.get_nodes_from_documents(\n    [Document(text=\"long text\")], show_progress=False\n)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E5%BC%95%E8%A8%80/#_4","title":"\u8f6c\u6362\u7528\u6cd5","text":"<p>\u8282\u70b9\u89e3\u6790\u5668\u53ef\u4ee5\u5305\u542b\u5728\u5177\u6709\u6444\u53d6\u7ba1\u9053\u7684\u4efb\u4f55\u4e00\u7ec4\u8f6c\u6362\u4e2d\u3002</p> Python<pre><code>from llama_index.core import SimpleDirectoryReader\nfrom llama_index.core.ingestion import IngestionPipeline\nfrom llama_index.core.node_parser import TokenTextSplitter\n\ndocuments = SimpleDirectoryReader(\"./data\").load_data()\n\npipeline = IngestionPipeline(transformations=[TokenTextSplitter(), ...])\n\nnodes = pipeline.run(documents=documents)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E5%BC%95%E8%A8%80/#_5","title":"\u7d22\u5f15\u7528\u6cd5","text":"<p>\u5728\u6784\u5efa\u7d22\u5f15\u65f6\uff0c\u5728\u5185\u90e8\u8bbe\u7f6e <code>transformations</code> \u6216\u8005\u5c40\u8bbe\u7f6e\u53ef\u4ee5\u81ea\u52a8\u4f7f <code>.from_documents()</code> \u6784\u5efa\u7d22\u5f15\uff1a</p> Python<pre><code>from llama_index.core import SimpleDirectoryReader, VectorStoreIndex\nfrom llama_index.core.node_parser import SentenceSplitter\n\ndocuments = SimpleDirectoryReader(\"./data\").load_data()\n\n# global\nfrom llama_index.core import Settings\n\nSettings.text_splitter = SentenceSplitter(chunk_size=1024, chunk_overlap=20)\n\n# per-index\nindex = VectorStoreIndex.from_documents(\n    documents,\n    transformations=[SentenceSplitter(chunk_size=1024, chunk_overlap=20)],\n)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E5%BC%95%E8%A8%80/#_6","title":"\u6a21\u5757","text":"<p>\u67e5\u770b\u5b8c\u6574\u7684\u6a21\u5757\u6307\u5357\u3002</p>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/","title":"\u8282\u70b9\u89e3\u6790\u4f7f\u7528\u6a21\u5f0f","text":""},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/#node","title":"Node \u89e3\u6790\u5668\u6a21\u5757","text":""},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/#_1","title":"\u57fa\u4e8e\u6587\u4ef6\u7684\u8282\u70b9\u89e3\u6790\u5668","text":"<p>\u6709\u51e0\u79cd\u57fa\u4e8e\u6587\u4ef6\u7684\u8282\u70b9\u89e3\u6790\u5668\uff0c\u5b83\u4eec\u662f\u6839\u636e\u6b63\u5728\u89e3\u6790\u7684\u5185\u5bb9\u7c7b\u578b\uff08JSON\u3001Markdown \u7b49\uff09\u521b\u5efa\u8282\u70b9\u3002</p> <p>\u6700\u7b80\u5355\u7684\u6d41\u7a0b\u662f\u5c06 <code>SimpleFileNodeParser</code> \u4e0e <code>FlatFileReader</code> \u7ed3\u5408\u8d77\u6765\uff0c\u81ea\u52a8\u4e3a\u6bcf\u79cd\u7c7b\u578b\u7684\u5185\u5bb9\u4f7f\u7528\u6700\u4f73\u8282\u70b9\u89e3\u6790\u5668\u3002\u7136\u540e\uff0c\u60a8\u53ef\u80fd\u5e0c\u671b\u5c06 \u57fa\u4e8e\u6587\u4ef6 \u7684\u8282\u70b9\u89e3\u6790\u5668\u4e0e \u57fa\u4e8e\u6587\u672c \u7684\u8282\u70b9\u89e3\u6790\u5668\u94fe\u63a5\u8d77\u6765\uff0c\u4ee5\u8003\u8651\u6587\u672c\u7684\u5b9e\u9645\u957f\u5ea6\u3002</p>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/#_2","title":"\u7b80\u5355\u6587\u4ef6\u8282\u70b9\u89e3\u6790\u5668","text":"<p>\u718a\u54c8\u54c8\u6ce8</p> <p>\u5728 Llama-index \u4e2d <code>SimpleFileNodeParser</code> \u7528\u4e8e\u89e3\u6790\u6587\u4ef6\u5185\u5bb9\uff0c\u5176\u771f\u6b63\u7684\u5b9e\u73b0\u662f <code>SentenceSplitter</code>\u3002</p> Python<pre><code># from llama_index.core.node_parser import SentenceSplitter as SimpleSentenceSplitter\nfrom llama_index.core.node_parser import SimpleFileNodeParser\nfrom llama_index.readers.file import FlatReader\nfrom pathlib import Path\n\nmd_docs = FlatReader().load_data(Path(\"./test.md\"))\n\nparser = SimpleFileNodeParser()\nmd_nodes = parser.get_nodes_from_documents(md_docs)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/#html","title":"HTML\u8282\u70b9\u89e3\u6790\u5668","text":"<p>\u8be5\u8282\u70b9\u89e3\u6790\u5668\u7528\u4e8e <code>beautifulsoup</code> \u89e3\u6790\u539f\u59cb <code>HTML</code>\u3002</p> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5b83\u5c06\u89e3\u6790\u9009\u5b9a\u7684 HTML \u6807\u7b7e\u5b50\u96c6\uff0c\u4f46\u60a8\u53ef\u4ee5\u8986\u76d6\u6b64\u529f\u80fd\u3002</p> <p>\u9ed8\u8ba4\u6807\u7b7e\u4e3a\uff1a<code>[\"p\", \"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\", \"li\", \"b\", \"i\", \"u\", \"section\"]</code></p> Python<pre><code>from llama_index.core.node_parser import HTMLNodeParser\n\nparser = HTMLNodeParser(tags=[\"p\", \"h1\"])  # optional list of tags\nnodes = parser.get_nodes_from_documents(html_docs)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/#jsonnode","title":"JSONNode\u89e3\u6790\u5668","text":"<p><code>JSONNodeParser</code> \u539f\u59cb JSON\u3002</p> Python<pre><code>from llama_index.core.node_parser import JSONNodeParser\n\nparser = JSONNodeParser()\n\nnodes = parser.get_nodes_from_documents(json_docs)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/#markdown","title":"Markdown\u8282\u70b9\u89e3\u6790\u5668","text":"<p><code>MarkdownNodeParser</code> \u89e3\u6790\u539f\u59cb <code>markdown</code> \u6587\u672c\u3002</p> Python<pre><code>from llama_index.core.node_parser import MarkdownNodeParser\n\nparser = MarkdownNodeParser()\n\nnodes = parser.get_nodes_from_documents(markdown_docs)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/#_3","title":"\u6587\u672c\u5206\u5272\u5668","text":""},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/#_4","title":"\u4ee3\u7801\u5206\u5272\u5668","text":"<p>\u6839\u636e\u7f16\u5199\u8bed\u8a00\u6765\u5206\u5272\u539f\u59cb\u4ee3\u7801\u6587\u672c\u3002</p> <p>\u8bf7\u5728\u6b64\u5904\u67e5\u770b\u652f\u6301\u7684\u8bed\u8a00\u7684\u5b8c\u6574\u5217\u8868\u3002</p> Python<pre><code>from llama_index.core.node_parser import CodeSplitter\n\nsplitter = CodeSplitter(\n    language=\"python\",\n    chunk_lines=40,  # lines per chunk\n    chunk_lines_overlap=15,  # lines overlap between chunks\n    max_chars=1500,  # max chars per chunk\n)\nnodes = splitter.get_nodes_from_documents(documents)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/#langchainnode","title":"LangchainNode\u89e3\u6790\u5668","text":"<p>\u60a8\u8fd8\u53ef\u4ee5\u4f7f\u7528\u8282\u70b9\u89e3\u6790\u5668\u5305\u88c5 langchain \u7684\u6587\u672c\u5206\u5272\u5668\u3002</p> Python<pre><code>from langchain.text_splitter import RecursiveCharacterTextSplitter\nfrom llama_index.core.node_parser import LangchainNodeParser\n\nparser = LangchainNodeParser(RecursiveCharacterTextSplitter())\nnodes = parser.get_nodes_from_documents(documents)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/#sentencesplitter","title":"\u53e5\u5b50\u5206\u5272\u5668 <code>SentenceSplitter</code>","text":"<p>llama_index \u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4f1a\u4ee5 <code>SentenceSplitter</code> \u4f5c\u4e3a\u7684\u5206\u5272\u5668\uff0c\u8be5\u5206\u5272\u5668\u4ee5\u5b8c\u6574\u53e5\u5b50\u4f5c\u4e3a\u5355\u4f4d\u5207\u5272\u6587\u6863 <code>Document</code>\u3002\u5207\u5272\u7684\u8fc7\u7a0b\u4e2d, <code>SentenceSplitter</code> \u9ed8\u8ba4\u4ee5 1024 \u4e2a token \u4f5c\u4e3a\u8fb9\u754c\u8fdb\u884cchunk\u5207\u5206, \u6bcf\u4e2achunk \u5f00\u59cb\u7684\u90e8\u5206\u4f1a\u4e0e\u4e0a\u4e00\u4e2a\u7247\u6bb5 200 \u4e2a token \u7684\u90e8\u5206\u91cd\u53e0\u3002\u5b9e\u9645\u5904\u7406\u7684\u8fc7\u7a0b\u4e2d\u6709\u5f88\u591a\u7ec6\u8282\u9700\u8981\u6ce8\u610f\uff0c\u4ee5\u4e0b\u90e8\u5206\u9488\u5bf9 <code>SentenceSplitter</code> \u7684\u5904\u7406\u8fc7\u7a0b\u8fdb\u884c\u7ec6\u8282\u8bf4\u660e\u3002</p>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/#_5","title":"\u5207\u5272\u53c2\u6570","text":"<p>\u4f7f\u7528 <code>SentenceSplitter</code> \u8fdb\u884c\u5207\u5272\u65f6\u53ef\u4ee5\u914d\u7f6e\u7684\u53c2\u6570\u5982\u4e0b\uff1a</p> Python<pre><code>chunk_size=1024,    # \u5207\u7247 token \u6578\u9650\u5236\nchunk_overlap=200,  # \u5207\u7247\u958b\u982d\u8207\u524d\u4e00\u7247\u6bb5\u5c3e\u7aef\u7684\u91cd\u8907 token \u6578\nparagraph_separator='\\n\\n\\n', # \u6bb5\u843d\u7684\u5206\u754c\nsecondary_chunking_regex='[^,.;\u3002\uff1f\uff01]+[,.;\u3002\uff1f\uff01]?' # \u55ae\u4e00\u53e5\u5b50\u7684\u6a23\u5f0f\nseparator=' ', # \u6700\u5c0f\u5207\u5272\u7684\u5206\u754c\u5b57\u5143\n</code></pre> <p>\u5f53\u7136\u4e5f\u53ef\u4ee5\u5148\u6784\u5efa <code>SentenceSplitter</code> \u7684\u5bf9\u8c61\uff0c\u7136\u540e\u901a\u8fc7 <code>SentenceSplitter</code> \u7684\u5c6c\u6027\u4fee\u6539\u4e0a\u9762\u7684\u53c2\u6570\u3002</p> <p>\u718a\u54c8\u54c8\u6ce8</p> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f, \u6bcf\u4e00\u4e2a\u5207\u7247\u90fd\u4f1a\u4fdd\u5b58\u5143\u6570\u636e <code>metadata</code>\uff0c\u6bcf\u4e00\u4e2a\u5207\u7247\u771f\u6b63\u7684 <code>token</code> \u6570\u76ee\u8981\u51cf\u53bb\u5143\u6570\u636e <code>metadata</code> \u7684token\u6570\uff0c\u624d\u662f\u6587\u672c\u5185\u5bb9\u5bf9\u5e94\u7684 <code>token</code> \u6570\u76ee\u3002\u53ef\u4ee5\u901a\u8fc7\u4f18\u5316 <code>SentenceSplitter</code> \u7684\u4ee3\u7801\u6d88\u9664\u8fd9\u4e2a\u5f71\u54cd\u3002</p> <p>\u4f7f\u7528 <code>SimpleDirectoryReader</code> \u52a0\u8f7d\u5668\u8bfb\u53d6\u6587\u4ef6\u5939\u5185\u7684\u6240\u6709\u6587\u6863\u65f6\uff0c\u5143\u6570\u636e\u7684\u5185\u5bb9\u662f <code>filepath: \u6587\u6863\u8def\u5f84</code>\uff1b\u5982\u679c\u76f4\u63a5\u4f20\u5165\u6587\u6863\u7684\u540d\u79f0\uff0c\u90a3\u4e48\u5143\u6570\u636e <code>metadata</code> \u7684\u5185\u5bb9\u662f <code>filepath: \u7edd\u5bf9\u8def\u5f84</code>\u3002</p>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/#_6","title":"\u5206\u5272\u6b65\u9aa4","text":"<p><code>SentenceSplitter</code> \u5b9e\u9645\u5206\u5272\u7684\u8fc7\u7a0b\u5305\u62ec\u5206\u5272\u4e0e\u5408\u5e76\u4e24\u4e2a\u8fc7\u7a0b\uff1a</p>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/#_7","title":"\u5206\u5272","text":"<ol> <li>\u5982\u679c\u6574\u4e2a\u6587\u6863 <code>Document</code>  token \u6570\u76ee\u5c0f\u4e8e\u76ee\u6807 <code>token</code> \u7684\u6570\u76ee\uff0c\u90a3\u4e48\u4e0d\u8fdb\u884c\u5207\u5206\u3002</li> <li>\u5982\u679c\u6570\u76ee\u5927\u4e8e <code>Document</code> \u7684 token \u5927\u4e8e\u9884\u8bbe\u7684 <code>chunk_size</code> \u6570\u76ee\uff0c\u90a3\u4e48\u9996\u5148\u4f1a\u5c1d\u8bd5\u4ee5 <code>paragraph_separator</code> \u5b57\u7b26\u4e32\u8fdb\u884c\u5206\u6bb5\uff0c\u5f53\u524d\u7684 <code>paragraph_separator</code> \u5b57\u7b26\u4e32\u662f <code>\\n\\n\\n</code>\u3002</li> <li>\u5982\u679c\u5206\u5272\u51fa\u7684\u6bb5\u843d\u7684 <code>token</code> \u8d85\u8fc7 <code>chunk_size</code>, \u90a3\u4e48\u4f7f\u7528 <code>SentenceSplitter</code> \u4e2d\u8bbe\u7f6e\u7684\u5206\u53e5\u51fd\u6570 <code>chunking_tokennizer_fn</code> \u8fdb\u884c\u5206\u53e5\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4f7f\u7528 <code>nltk</code> \u5185\u7f6e\u7684\u5206\u53e5\u51fd\u6570\u8fdb\u884c\u5904\u7406\uff0c\u5bf9\u4e8e\u4e2d\u6587\u6765\u8bf4\u662f\u4e0d\u5408\u9002\u7684\uff0c\u9700\u8981\u989d\u5916\u7684\u4f20\u5165\u5206\u53e5\u7684\u51fd\u6570\u3002</li> <li>\u5982\u679c\u5206\u5272\u51fa\u7684\u5355\u4e00\u53e5\u5b50\u8fd8\u662f\u8d85\u8fc7 <code>token</code> \u6578\u9650\u5236, \u5c31\u7528 <code>secondary_chunking_regex</code> \u5c5e\u6027\u8bbe\u5b9a\u7684\u89c4\u5219\u518d\u6b21\u5207\u5272\u4e3a\u77ed\u7684\u53e5\u5b50\u3002\u5f53\u524d\u7684\u5206\u9694\u7b26\u53f7\u4e3a\uff1a<code>[^,.;\u3002\uff1f\uff01]+[,.;\u3002\uff1f\uff01]?</code>, \u76ee\u524d\u77ed\u7684\u53e5\u5b50\u8fd8\u662f\u5b8c\u6574\u7684\u53e5\u5b50\u3002</li> <li>\u5982\u679c\u77ed\u53e5\u5b50\u8fd8\u662f\u8d85\u8fc7 <code>chunk_size</code> \u9650\u5236, \u5c31\u4f7f\u7528 <code>separator</code> \u5c5e\u6027\u518d\u6b21\u8fdb\u884c\u5207\u5272\uff0c\u5f53\u524d\u7684\u5206\u9694\u7b26\u53f7\u662f\u7a7a\u683c \u3010<code></code>\u3011\u3002</li> <li>\u5982\u679c\u77ed\u53e5\u5b50\u4ecd\u7136\u8d85\u8fc7 <code>chunk_size</code> \u9650\u5236, \u5c31\u4ee5\u5b57\u7b26\u4e3a\u5355\u4f4d\u8fdb\u884c\u5207\u5272\u3002</li> <li>\u6700\u540e\u5207\u5272\u51fa\u6765\u7684\u6bcf\u4e00\u4e2a\u5c0f\u7247\u6bb5\u6210\u4e3a <code>split</code>\u3002\u8fd9\u6837\u5207\u5272\u51fa\u6765\u7684\u65b9\u6cd5\uff0c\u53ef\u4ee5\u4fdd\u7559\u5b8c\u6574\u7684\u6bb5\u843d\uff0c\u6216\u8005\u662f\u5b8c\u6574\u7684\u53e5\u5b50\u3002\u8fd9\u6837\u5207\u5272\u51fa\u6765\u53ef\u4ee5\u4fdd\u7559\u5b8c\u6574\u7684\u8bed\u4e49\u4fe1\u606f\uff0c\u53ea\u6709\u5728\u4e0d\u5f97\u5df2\u7684\u60c5\u51b5\u4e0b\uff0c\u624d\u4f1a\u628a\u53e5\u5b50\u7684\u8bed\u4e49\u5207\u5272\u5206\u9694\u5f00\u6765\u3002</li> </ol>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/#_8","title":"\u5408\u5e76","text":"<ol> <li>\u6bcf\u4e00\u4e2a <code>split</code> \u548c\u4e0e\u4e0b\u4e00\u4e2a <code>split</code> \u8fdb\u884c\u5408\u5e76, \u76f4\u5230\u5408\u5e76\u5e76\u8d85\u8fc7 <code>chunk_size</code> \u9650\u5236\uff0c\u5408\u5e76\u4e4b\u540e\u6574\u7406\u4e3a\u4e00\u4e2a <code>chunk</code>\u3002</li> <li>\u5728\u7b2c\u4e8c\u4e2a <code>chunk</code> \u7684\u5f00\u59cb\uff0c\u4f1a\u4ece\u4e0a\u4e00\u4e2a <code>chunk</code> \u6700\u540e\u4e00\u4e2a <code>split</code> \u5f00\u59cb\uff0c\u5f80\u56de\u5408\u5e76 <code>split</code>\uff0c\u4e00\u76f4\u5230 <code>split</code> \u7684 token \u7684\u6570\u76ee\u8d85\u8fc7 <code>overlap</code>\u4e3a\u6b62\u3002\u8fd9\u90e8\u5206\u7684 <code>split</code> \u4f1a\u653e\u5728\u4e0b\u4e00\u4e2a <code>chunk</code> \u7684\u5f00\u59cb\u90e8\u5206\uff0c\u4e5f\u5c31\u662f\u9664\u4e86\u7b2c\u4e00\u4e2a <code>chunk</code> \u5916\uff0c\u6bcf\u4e00\u4e2a <code>chunk</code> \u90fd\u4f1a\u4e0e\u524d\u4e00\u4e2a <code>chunk</code> \u7684\u5c3e\u90e8\u7684 <code>split</code> \u5185\u5bb9\u91cd\u53e0\u3002</li> <li>\u6bcf\u4e00\u4e2a\u65b0\u7684 <code>chunk</code> \u9664\u4e86\u91cd\u590d\u524d\u4e00\u4e2a <code>chunk</code> \u7684\u90e8\u5206\u5916\uff0c\u81f3\u5c11\u4f1a\u628a\u4e0b\u4e00\u4e2a <code>split</code> \u7684\u52a0\u5165\u5230\u5f53\u524d\u7684 <code>chunk</code>\uff0c\u4e0d\u8bba\u662f\u5426\u4f1a\u8d85\u8fc7 <code>chunk_size</code> \u7684\u9650\u5236\u3002</li> <li>\u8fd9\u6837\u5408\u5e76\u5b8c\u7684\u7ed3\u679c\uff0c\u5c31\u662f\u4f1a\u5c3d\u53ef\u80fd\u4ee5\u8bed\u4e49\u5b8c\u6574\u7684\u4f4d\u7f6e\u5207\u5272\u51fa\u6700\u957f\u7684\u7247\u6bb5, \u800c\u4e14\u6bcf\u4e2a\u7247\u6bb5\u90fd\u5f00\u5934\u90fd\u6db5\u76d6\u524d\u4e00\u4e2a\u7247\u6bb5\u7684\u5c3e\u7aef\u5185\u5bb9, \u4fdd\u7559\u524d\u540e\u6587\u7684\u8109\u7edc\u3002</li> </ol> <p>\u718a\u54c8\u54c8\u6ce8</p> <p>\u6700\u540e\u5207\u5272\u51fa\u6765\u7684\u6bcf\u4e00\u4e2a\u5c0f\u7247\u6bb5 <code>chunk</code> \u6210\u4e3a <code>TextNode</code> \u5bf9\u8c61, \u5728<code>TextNode</code> \u4e2d\u9664\u4e86\u4fdd\u7559 \u6587\u5b57\u7247\u6bb5 \u4ee5\u5916, \u8fd8\u6709\u5f53\u524d\u6587\u6863\u7684\u4e00\u4e9b \u5143\u6570\u636e\u3001\u8be5\u6587\u672c\u5728\u6574\u4e2a\u6587\u6863\u4e2d\u7684 \u8d77\u59cb\u70b9 \u4f4d\u7f6e\u4fe1\u606f\u7b49\u3002</p>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/#_9","title":"\u793a\u4f8b\u4ee3\u7801","text":"<p>\u5c1d\u8bd5 <code>SentenceSplitter</code> \u5728\u5c0a\u91cd\u53e5\u5b50\u754c\u9650\u7684\u540c\u65f6\u5206\u5272\u6587\u672c\u3002</p> Python<pre><code>from llama_index.core.node_parser import SentenceSplitter\n\nsplitter = SentenceSplitter(\n    chunk_size=1024,\n    chunk_overlap=20,\n)\nnodes = splitter.get_nodes_from_documents(documents)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/#_10","title":"\u53c2\u8003\uff1a","text":"<ol> <li>https://hackmd.io/@meebox/HJNuQ_YRa?utm_source=preview-mode&amp;utm_medium=rec</li> </ol>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/#_11","title":"\u53c2\u8003","text":""},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/#_12","title":"\u53e5\u5b50\u7a97\u53e3\u8282\u70b9\u89e3\u6790\u5668","text":"<p>\u4e0e\u5176\u4ed6\u8282\u70b9\u89e3\u6790\u5668\u7c7b\u4f3c <code>SentenceWindowNodeParser</code>\uff0c\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\u5b83\u5c06\u6240\u6709\u6587\u6863\u62c6\u5206\u4e3a\u5355\u4e2a\u53e5\u5b50\u3002\u751f\u6210\u7684\u8282\u70b9\u8fd8\u5305\u542b\u5143\u6570\u636e\u4e2d\u6bcf\u4e2a\u8282\u70b9\u5468\u56f4\u7684\u53e5\u5b50\u201c\u7a97\u53e3\u201d\u3002\u8bf7\u6ce8\u610f\uff0c\u6b64\u5143\u6570\u636e\u5bf9 LLM \u6216\u5d4c\u5165\u6a21\u578b\u4e0d\u53ef\u89c1\u3002</p> <p>\u8fd9\u5bf9\u4e8e\u751f\u6210\u5177\u6709\u975e\u5e38\u7279\u5b9a\u8303\u56f4\u7684\u5d4c\u5165\u975e\u5e38\u6709\u7528\u3002\u7136\u540e\uff0c\u7ed3\u5408 <code>MetadataReplacementNodePostProcessor</code>\uff0c\u60a8\u53ef\u4ee5\u5728\u5c06\u8282\u70b9\u53d1\u9001\u5230 LLM \u4e4b\u524d\u7528\u5176\u5468\u56f4\u7684\u4e0a\u4e0b\u6587\u66ff\u6362\u53e5\u5b50\u3002</p> <p>\u4e0b\u9762\u662f\u4f7f\u7528\u9ed8\u8ba4\u8bbe\u7f6e\u8bbe\u7f6e\u89e3\u6790\u5668\u7684\u793a\u4f8b\u3002\u5b9e\u9645\u4e0a\uff0c\u60a8\u901a\u5e38\u53ea\u60f3\u8c03\u6574\u53e5\u5b50\u7684\u7a97\u53e3\u5927\u5c0f\u3002</p> Python<pre><code>from llama_index.core.node_parser import SentenceWindowNodeParser\n\nnode_parser = SentenceWindowNodeParser.from_defaults(\n    # how many sentences on either side to capture\n    window_size=3,\n    # the metadata key that holds the window of surrounding sentences\n    window_metadata_key=\"window\",\n    # the metadata key that holds the original sentence\n    original_text_metadata_key=\"original_sentence\",\n)\n</code></pre> <p>\u7ed3\u5408 <code>MetadataReplacementNodePostProcessor</code> \u53ef\u4ee5\u5728\u6b64\u5904\u627e\u5230\u5b8c\u6574\u7684\u793a\u4f8b\u3002</p>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/#_13","title":"\u8bed\u4e49\u5206\u5272\u8282\u70b9\u89e3\u6790\u5668","text":"<p>\u3010\u8bed\u4e49\u5206\u5757\u3011\u662f Greg Kamradt \u5728\u4ed6\u7684\u5173\u4e8e 5 \u4e2aembedding\u5206\u5757\u65b9\u6cd5\u4e2d\u63d0\u51fa\u7684\u4e00\u4e2a\u65b0\u6982\u5ff5\uff0c\u89c6\u9891\u5730\u5740\uff1ahttps://youtu.be/8OJC21T2SL4?t=1933</p> <p>\u8bed\u4e49\u5206\u5272\u5668\u4e0d\u4f1a\u4f7f\u7528\u56fa\u5b9a\u7684\u5757\u5927\u5c0f\u5bf9\u6587\u672c\u8fdb\u884c\u5206\u5757\uff0c\u800c\u662f \u4f7f\u7528\u5d4c\u5165\u76f8\u4f3c\u6027\u81ea\u9002\u5e94\u5730\u9009\u62e9\u53e5\u5b50\u4e4b\u95f4\u7684\u65ad\u70b9\u3002\u8fd9\u786e\u4fdd\u4e86\u201c\u5757\u201d\u5305\u542b\u8bed\u4e49\u4e0a\u76f8\u4e92\u76f8\u5173\u7684\u53e5\u5b50\u3002</p> <p>!!! \u6ce8\u610f\u4e8b\u9879\uff1a     * \u8be5\u6b63\u5219\u8868\u8fbe\u5f0f\u4e3b\u8981\u9002\u7528\u4e8e\u82f1\u8bed\u53e5\u5b50     * \u53ef\u80fd\u9700\u8981\u8c03\u6574\u65ad\u70b9\u767e\u5206\u4f4d\u9608\u503c\u3002</p> Python<pre><code>from llama_index.core.node_parser import SemanticSplitterNodeParser\nfrom llama_index.embeddings.openai import OpenAIEmbedding\n\nembed_model = OpenAIEmbedding()\nsplitter = SemanticSplitterNodeParser(\n    buffer_size=1, breakpoint_percentile_threshold=95, embed_model=embed_model\n)\n</code></pre> <p>\u5b8c\u6574\u7684\u793a\u4f8b\u53ef\u5728\u6211\u4eec\u7684\u4f7f\u7528\u6307\u5357SemanticSplitterNodeParser\u4e2d\u627e\u5230\u3002</p>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/#token-tokentextsplitter","title":"\u57fa\u4e8e token \u7684\u5206\u5272\u5668 <code>TokenTextSplitter</code>","text":"<p><code>TokenTextSplitter</code> \u57fa\u4e8e Token \u8fdb\u884c\u5206\u5272\uff0c\u901a\u5e38\u4e0e\u8bed\u8a00\u6a21\u578b\u7684\u8f93\u5165\u7ed3\u6784\u76f8\u7ed3\u5408\u3002\u7528\u6237\u53ef\u4ee5\u6307\u5b9a\u6bcf\u4e2a\u7247\u6bb5\u7684\u6700\u5927Token\u6570\u3002</p> <p>\u5728 llama-index \u4e2d\u4e0e langchain \u4e2d\u7684 token \u5207\u5206\u65b9\u5f0f\u662f\u4e0d\u4e00\u6837\u7684\u3002 * llama-index \u4e2d\u4f7f\u7528\u7a7a\u683c\uff0c\u6362\u884c\u7b26\uff0c\u5b57\u7b26\u7c92\u5ea6\u8fdb\u884c\u5206\u8bcd\u3002 * langchain \u4e2dopenai \u7684tiktoken \u8fdb\u884c\u5206\u8bcd\u3002</p> <ul> <li>\u4f18\u7f3a\u70b9</li> <li>\u4f18\u70b9\uff1a<ul> <li>\u9002\u5408\u5927\u591a\u6570\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4efb\u52a1\uff0c\u53ef\u4ee5\u6709\u6548\u4fdd\u7559\u4e0a\u4e0b\u6587\u4fe1\u606f\u3002</li> <li>\u5206\u5272\u540e\u7684\u7247\u6bb5\u5927\u5c0f\u66f4\u7b26\u5408\u6a21\u578b\u7684\u8f93\u5165\u8981\u6c42\u3002</li> </ul> </li> <li> <p>\u7f3a\u70b9\uff1a</p> <ul> <li>\u5bf9\u4e8e\u975e\u82f1\u8bed\u6587\u672c\u6216\u7279\u5b9a\u9886\u57df\u6587\u672c\uff0cToken\u5316\u6548\u679c\u53ef\u80fd\u4e0d\u4f73\u3002</li> <li>\u9700\u8981\u6839\u636e\u6a21\u578b\u7684Token\u9650\u5236\u8fdb\u884c\u8c03\u6574\u3002</li> </ul> </li> <li> <p>\u9002\u7528\u573a\u666f\uff1a\u9002\u5408\u4e0e\u5927\u8bed\u8a00\u6a21\u578b\u914d\u5408\u4f7f\u7528\u7684\u573a\u666f\uff0c\u7279\u522b\u662f\u9700\u8981\u9ad8\u4fdd\u771f\u5ea6\u7684\u8bed\u4e49\u89e3\u6790\u65f6\u3002</p> </li> </ul> Python<pre><code>from llama_index.core.node_parser import TokenTextSplitter\n\nsplitter = TokenTextSplitter(\n    chunk_size=1024,\n    chunk_overlap=20,\n    separator=\" \",\n)\nnodes = splitter.get_nodes_from_documents(documents)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/#_14","title":"\u53c2\u8003\uff1a","text":"<ol> <li>https://ithelp.ithome.com.tw/articles/10326395</li> <li>https://developer.aliyun.com/article/1628078</li> </ol>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/#_15","title":"\u57fa\u4e8e\u5173\u7cfb\u7684\u8282\u70b9\u89e3\u6790\u5668","text":""},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/#_16","title":"\u5c42\u6b21\u8282\u70b9\u89e3\u6790\u5668","text":"<p>\u6b64\u8282\u70b9\u89e3\u6790\u5668\u5c06\u628a\u8282\u70b9\u5206\u5757\u4e3a\u5206\u5c42\u8282\u70b9\u3002\u8fd9\u610f\u5473\u7740\u5355\u4e2a\u8f93\u5165\u5c06\u88ab\u5206\u5757\u4e3a\u591a\u4e2a\u5757\u5927\u5c0f\u7684\u5c42\u6b21\u7ed3\u6784\uff0c\u6bcf\u4e2a\u8282\u70b9\u90fd\u5305\u542b\u5bf9\u5176\u7236\u8282\u70b9\u7684\u5f15\u7528\u3002</p> <p>\u4e0e <code>AutoMergingRetriever</code> \u7ed3\u5408\u4f7f\u7528\u65f6\uff0c\u8fd9\u4f7f\u6211\u4eec\u80fd\u591f\u5728\u68c0\u7d22\u5230\u5927\u591a\u6570\u5b50\u8282\u70b9\u65f6\u81ea\u52a8\u7528\u7236\u8282\u70b9\u66ff\u6362\u68c0\u7d22\u5230\u7684\u8282\u70b9\u3002\u6b64\u8fc7\u7a0b\u4e3a LLM \u63d0\u4f9b\u4e86\u66f4\u5b8c\u6574\u7684\u54cd\u5e94\u5408\u6210\u4e0a\u4e0b\u6587\u3002</p> Python<pre><code>from llama_index.core.node_parser import HierarchicalNodeParser\n\nnode_parser = HierarchicalNodeParser.from_defaults(\n    chunk_sizes=[2048, 512, 128]\n)\n</code></pre> <p>\u7ed3\u5408 <code>AutoMergingRetriever</code> \u53ef\u4ee5\u5728\u6b64\u5904\u627e\u5230\u5b8c\u6574\u7684\u793a\u4f8b\u3002</p>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/#_17","title":"\u53c2\u8003","text":"<ol> <li>https://baoyu.io/translations/rag/5-levels-of-text-splitting#google_vignette</li> <li>https://www.aneasystone.com/archives/2024/06/advanced-rag-notes.html</li> </ol>"},{"location":"rag/llama_index/learn/%E6%9E%84%E5%BB%BARAG%E7%9A%84%E6%B5%81%E7%A8%8B/LlamaIndex%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83/","title":"LlamaHub\u6ce8\u518c\u4e2d\u5fc3","text":""},{"location":"rag/llama_index/learn/%E6%9E%84%E5%BB%BARAG%E7%9A%84%E6%B5%81%E7%A8%8B/LlamaIndex%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83/#llamaindex","title":"LlamaIndex \u6ce8\u518c\u4e2d\u5fc3","text":"<p>\u6211\u4eec\u7684\u6570\u636e\u8fde\u63a5\u5668\u901a\u8fc7 LlamaHub \ud83e\udd99\u63d0\u4f9b\u3002LlamaHub \u5305\u542b\u5f00\u6e90\u6570\u636e\u8fde\u63a5\u5668\u6ce8\u518c\u8868\uff0c\u60a8\u53ef\u4ee5\u8f7b\u677e\u5730\u5c06\u5176\u63d2\u5165\u4efb\u4f55 LlamaIndex \u5e94\u7528\u7a0b\u5e8f\uff08\u4ee5\u53ca\u4ee3\u7406\u5de5\u5177\u548c Llama \u5305\uff09\u3002</p>"},{"location":"rag/llama_index/learn/%E6%9E%84%E5%BB%BARAG%E7%9A%84%E6%B5%81%E7%A8%8B/LlamaIndex%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83/#_1","title":"\u4f7f\u7528\u6a21\u5f0f","text":"<p>\u5f00\u59cb\u4f7f\u7528\uff1a</p> Python<pre><code>from llama_index.core import download_loader\n\nfrom llama_index.readers.google import GoogleDocsReader\n\nloader = GoogleDocsReader()\ndocuments = loader.load_data(document_ids=[...])\n</code></pre>"},{"location":"rag/llama_index/learn/%E6%9E%84%E5%BB%BARAG%E7%9A%84%E6%B5%81%E7%A8%8B/LlamaIndex%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83/#simpledirectoryreader","title":"\u5185\u7f6e\u52a0\u8f7d\u5668\uff1aSimpleDirectoryReader","text":"<p><code>SimpleDirectoryReader</code> \u53ef\u4ee5\u652f\u6301\u89e3\u6790\u591a\u79cd\u6587\u4ef6\u7c7b\u578b\uff0c\u5305\u62ec <code>.md</code>,<code>.pdf</code>, <code>.jpq</code>, <code>.png</code>, <code>.docx</code> \u4ee5\u53ca\u97f3\u9891\u548c\u89c6\u9891\u7c7b\u578b\u3002\u5b83\u53ef\u76f4\u63a5\u4f5c\u4e3a LlamaIndex \u7684\u4e00\u90e8\u5206\u4f7f\u7528</p> Python<pre><code>from llama_index.core import SimpleDirectoryReader\n\ndocuments = SimpleDirectoryReader(\"./data\").load_data()\n</code></pre>"},{"location":"rag/llama_index/learn/%E6%9E%84%E5%BB%BARAG%E7%9A%84%E6%B5%81%E7%A8%8B/LlamaIndex%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83/#_2","title":"\u53ef\u7528\u8fde\u63a5\u5668","text":"<p>\u76f4\u63a5\u6d4f\u89c8 LlamaHub\u5373\u53ef\u67e5\u770b\u6570\u767e\u79cd\u53ef\u7528\u7684\u8fde\u63a5\u5668\uff0c\u5176\u4e2d\u5305\u62ec\uff1a</p> <ul> <li>Notion( NotionPageReader)</li> <li>Google Docs( GoogleDocsReader)</li> <li>Slack( SlackReader)</li> <li>Discord( DiscordReader)</li> <li>Apify Actors\uff08ApifyActor\uff09\u3002\u53ef\u4ee5\u6293\u53d6\u7f51\u7edc\u3001\u6293\u53d6\u7f51\u9875\u3001\u63d0\u53d6\u6587\u672c\u5185\u5bb9\u3001\u4e0b\u8f7d\u6587\u4ef6\uff0c\u5305\u62ec <code>.pdf</code>, <code>.jpg</code>, <code>.png</code>, <code>.docx</code> \u7b49\u3002</li> </ul>"},{"location":"rag/llama_index/learn/%E6%9E%84%E5%BB%BARAG%E7%9A%84%E6%B5%81%E7%A8%8B/%E5%8A%A0%E8%BD%BD%E5%92%8C%E6%8F%90%E5%8F%96%E6%95%B0%E6%8D%AE/","title":"\u52a0\u8f7d\u6570\u636e\uff08\u63d0\u53d6\uff09","text":"<p>\u5728\u6211\u4eec\u9009\u62e9\u7684 LLM \u5bf9\u6211\u4eec\u7684\u539f\u59cb\u6570\u636e\u8fdb\u884c\u5904\u7406\u4e4b\u524d\uff0c\u6211\u4eec\u9996\u5148\u9700\u8981\u5bf9\u539f\u59cb\u6570\u636e\u8fdb\u884c\u7b80\u5355\u5904\u7406\u5e76\u52a0\u8f7d\u539f\u59cb\u6570\u636e\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u7c7b\u4f3c\u4e8e ML \u4e16\u754c\u4e2d\u7684\u6570\u636e\u6e05\u7406/\u7279\u5f81\u5de5\u7a0b\u6d41\u7a0b\uff0c\u6216\u4f20\u7edf\u6570\u636e\u8bbe\u7f6e\u4e2d\u7684 ETL \u7ba1\u9053\u3002</p> <p>\u6570\u636e\u63d0\u53d6\u6d41\u7a0b\u901a\u5e38\u7531\u4e09\u4e2a\u4e3b\u8981\u9636\u6bb5\u7ec4\u6210\uff1a</p> <ul> <li>\u52a0\u8f7d\u6570\u636e</li> <li>\u8f6c\u6362\u6570\u636e</li> <li>\u7d22\u5f15\u5e76\u5b58\u50a8\u6570\u636e</li> </ul> <p>\u6211\u4eec\u5c06\u5728\u540e\u7eed\u7ae0\u8282\u4e2d\u4ecb\u7ecd\u7d22\u5f15/\u5b58\u50a8\u3002\u5728\u672c\u5c0f\u8282\u4e2d\uff0c\u6211\u4eec\u4e3b\u8981\u8ba8\u8bba\u52a0\u8f7d\u5668\u548c\u8f6c\u6362\u8fc7\u7a0b\u3002</p>"},{"location":"rag/llama_index/learn/%E6%9E%84%E5%BB%BARAG%E7%9A%84%E6%B5%81%E7%A8%8B/%E5%8A%A0%E8%BD%BD%E5%92%8C%E6%8F%90%E5%8F%96%E6%95%B0%E6%8D%AE/#_2","title":"\u52a0\u8f7d\u5668","text":"<p>\u5728\u6211\u4eec\u9009\u62e9\u7684 LLM \u5bf9\u6211\u4eec\u7684\u539f\u59cb\u6570\u636e\u8fdb\u884c\u5904\u7406\u4e4b\u524d\uff0c\u6211\u4eec\u9700\u8981\u52a0\u8f7d\u539f\u59cb\u6570\u636e\u3002LlamaIndex \u6267\u884c\u6b64\u64cd\u4f5c\u7684\u65b9\u5f0f\u662f\u901a\u8fc7 \u6570\u636e\u8fde\u63a5\u5668\uff08\u4e5f\u79f0\u4e3a <code>Reader</code> \uff09\u3002\u6570\u636e\u8fde\u63a5\u5668 \u4ece\u4e0d\u540c\u7684\u6570\u636e\u6e90\u63d0\u63d0\u53d6\u6570\u636e\u5e76\u5c06\u6570\u636e\u683c\u5f0f\u5316\u4e3a <code>Document</code> \u5bf9\u8c61\u3002<code>Document</code> \u662f\u6570\u636e\u548c\u6709\u5173\u8be5\u6570\u636e\u7684\u5143\u6570\u636e\u7684\u96c6\u5408\u3002</p>"},{"location":"rag/llama_index/learn/%E6%9E%84%E5%BB%BARAG%E7%9A%84%E6%B5%81%E7%A8%8B/%E5%8A%A0%E8%BD%BD%E5%92%8C%E6%8F%90%E5%8F%96%E6%95%B0%E6%8D%AE/#simpledirectoryreader","title":"\u4f7f\u7528 <code>SimpleDirectoryReader</code> \u52a0\u8f7d","text":"<p>\u6700\u5bb9\u6613\u4f7f\u7528\u7684\u52a0\u8f7d\u5668\u662f <code>SimpleDirectoryReader</code>\uff0c\u5b83\u53ef\u4ee5\u4ece\u7ed9\u5b9a\u76ee\u5f55\u4e2d\u7684 \u6bcf\u4e2a\u6587\u4ef6 \u521b\u5efa\u6587\u6863 <code>Document</code> \u5bf9\u8c61\u3002\u5b83\u5185\u7f6e\u4e8e LlamaIndex \u4e2d\uff0c\u53ef\u4ee5\u8bfb\u53d6\u5404\u79cd\u683c\u5f0f\uff0c\u5305\u62ec <code>Markdown</code>\u3001<code>PDF</code>\u3001<code>Word</code> \u6587\u6863\u3001<code>PowerPoint</code> \u6f14\u793a\u6587\u7a3f\u3001\u56fe\u50cf\u3001\u97f3\u9891\u548c\u89c6\u9891\u3002</p> Python<pre><code>from llama_index.core import SimpleDirectoryReader\n\ndocuments = SimpleDirectoryReader(\"./data\").load_data()\n</code></pre>"},{"location":"rag/llama_index/learn/%E6%9E%84%E5%BB%BARAG%E7%9A%84%E6%B5%81%E7%A8%8B/%E5%8A%A0%E8%BD%BD%E5%92%8C%E6%8F%90%E5%8F%96%E6%95%B0%E6%8D%AE/#llamahub","title":"\u4f7f\u7528 LlamaHub \u7684\u9605\u8bfb\u5668","text":"<p>\u7531\u4e8e\u83b7\u53d6\u6570\u636e\u7684\u5730\u65b9\u592a\u591a\uff0c\u56e0\u6b64\u5e76\u975e\u6240\u6709\u6570\u636e\u90fd\u5185\u7f6e\u3002\u76f8\u53cd\uff0c\u60a8\u53ef\u4ee5\u4ece\u6211\u4eec\u7684\u6570\u636e\u8fde\u63a5\u5668\u6ce8\u518c\u4e2d\u5fc3 <code>LlamaHub</code> \u4e0b\u8f7d\u5b83\u4eec\u3002</p> <p>\u5728\u6b64\u793a\u4f8b\u4e2d\uff0cLlamaIndex \u4e0b\u8f7d\u5e76\u5b89\u88c5\u540d\u4e3a <code>DatabaseReader</code> \u7684\u8fde\u63a5\u5668\uff0c\u8be5\u8fde\u63a5\u5668\u9488\u5bf9 SQL \u6570\u636e\u5e93\u8fd0\u884c\u67e5\u8be2\u5e76\u5c06\u7ed3\u679c\u7684\u6bcf\u4e00\u884c\u8fd4\u56de\u4e3aDocument\uff1a</p> Python<pre><code>from llama_index.core import download_loader\n\nfrom llama_index.readers.database import DatabaseReader\n\nreader = DatabaseReader(\n    scheme=os.getenv(\"DB_SCHEME\"),\n    host=os.getenv(\"DB_HOST\"),\n    port=os.getenv(\"DB_PORT\"),\n    user=os.getenv(\"DB_USER\"),\n    password=os.getenv(\"DB_PASS\"),\n    dbname=os.getenv(\"DB_NAME\"),\n)\n\nquery = \"SELECT * FROM users\"\ndocuments = reader.load_data(query=query)\n</code></pre> <p>LlamaHub\u4e0a\u6709\u6570\u767e\u79cd\u8fde\u63a5\u5668\u53ef\u4f9b\u4f7f\u7528\uff01</p>"},{"location":"rag/llama_index/learn/%E6%9E%84%E5%BB%BARAG%E7%9A%84%E6%B5%81%E7%A8%8B/%E5%8A%A0%E8%BD%BD%E5%92%8C%E6%8F%90%E5%8F%96%E6%95%B0%E6%8D%AE/#_3","title":"\u76f4\u63a5\u521b\u5efa\u6587\u6863","text":"<p>\u9664\u4e86\u4f7f\u7528\u52a0\u8f7d\u5668\u4e4b\u5916\uff0c\u60a8\u8fd8\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 <code>Document</code>\u3002</p> Python<pre><code>from llama_index.core import Document\n\ndoc = Document(text=\"text\")\n</code></pre>"},{"location":"rag/llama_index/learn/%E6%9E%84%E5%BB%BARAG%E7%9A%84%E6%B5%81%E7%A8%8B/%E5%8A%A0%E8%BD%BD%E5%92%8C%E6%8F%90%E5%8F%96%E6%95%B0%E6%8D%AE/#_4","title":"\u6570\u636e\u8f6c\u6362","text":"<p>\u52a0\u8f7d\u6570\u636e\u540e\uff0c\u60a8\u9700\u8981\u5904\u7406\u548c\u8f6c\u6362\u6570\u636e\uff0c\u7136\u540e\u5c06\u5176\u653e\u5165\u5b58\u50a8\u7cfb\u7edf\u3002\u8fd9\u4e9b\u8f6c\u6362\u5305\u62ec \u5206\u5757\u3001\u63d0\u53d6\u5143\u6570\u636e \u548c \u5bf9\u6bcf\u4e2a\u5757\u63d0\u53d6embedding\u3002\u8fd9\u662f\u786e\u4fdd LLM \u80fd\u591f\u68c0\u7d22\u548c\u6700\u4f73\u4f7f\u7528\u6570\u636e\u6240\u5fc5\u9700\u7684\u3002</p> <p>\u8f6c\u6362\u8f93\u5165/\u8f93\u51fa\u662fNode\u5bf9\u8c61\uff08\u4e00\u4e2a <code>Document</code> \u662f\u5bf9\u5e94 <code>Node</code> \u7684\u5b50\u7c7b\uff09\u3002\u8f6c\u6362\u4e5f\u53ef\u4ee5\u5806\u53e0\u548c\u91cd\u65b0\u6392\u5e8f\u3002</p> <p>\u6211\u4eec\u6709\u7528\u4e8e\u8f6c\u6362\u6587\u6863\u7684\u9ad8\u7ea7 API \u548c\u4f4e\u7ea7 API\u3002</p>"},{"location":"rag/llama_index/learn/%E6%9E%84%E5%BB%BARAG%E7%9A%84%E6%B5%81%E7%A8%8B/%E5%8A%A0%E8%BD%BD%E5%92%8C%E6%8F%90%E5%8F%96%E6%95%B0%E6%8D%AE/#api","title":"\u9ad8\u7ea7\u8f6c\u6362 API","text":"<p>\u7d22\u5f15\u6709\u4e00\u4e2a <code>.from_documents()</code> \u65b9\u6cd5\uff0c\u5b83\u63a5\u53d7\u4e00\u4e2a <code>Document</code> \u5bf9\u8c61\u6570\u7ec4\uff0c\u5e76\u6b63\u786e\u5730\u89e3\u6790\u548c\u5206\u5757\u5b83\u4eec\u3002\u4f46\u662f\uff0c\u6709\u65f6\u4f60\u4f1a\u5e0c\u671b\u66f4\u597d\u5730\u63a7\u5236\u6587\u6863\u7684\u62c6\u5206\u65b9\u5f0f\u3002</p> Python<pre><code>from llama_index.core import VectorStoreIndex\n\nvector_index = VectorStoreIndex.from_documents(documents)\nvector_index.as_query_engine()\n</code></pre> <p>\u5728\u5e95\u5c42\uff0c\u8fd9\u4f1a\u5c06\u60a8\u7684\u6587\u6863\u62c6\u5206\u4e3a\u8282\u70b9\u5bf9\u8c61\uff0c\u8fd9\u4e9b\u5bf9\u8c61\u7c7b\u4f3c\u4e8e\u6587\u6863\uff08\u5b83\u4eec\u5305\u542b\u6587\u672c\u548c\u5143\u6570\u636e\uff09\u4f46\u4e0e\u5176\u7236\u6587\u6863\u6709\u5173\u7cfb\u3002</p> <p>\u5982\u679c\u60a8\u60f3\u8981\u81ea\u5b9a\u4e49\u6838\u5fc3\u7ec4\u4ef6\uff0c\u6bd4\u5982\u6587\u672c\u5206\u5272\u5668\uff0c\u901a\u8fc7\u8fd9\u4e2a\u62bd\u8c61\uff0c\u60a8\u53ef\u4ee5\u4f20\u5165\u81ea\u5b9a\u4e49 <code>transformations</code> \u5217\u8868\u6216\u5e94\u7528\u5230\u5168\u5c40 <code>Settings</code>\uff1a</p> Python<pre><code>from llama_index.core.node_parser import SentenceSplitter\n\ntext_splitter = SentenceSplitter(chunk_size=512, chunk_overlap=10)\n\n# global\nfrom llama_index.core import Settings\n\nSettings.text_splitter = text_splitter\n\n# per-index\nindex = VectorStoreIndex.from_documents(\n    documents, transformations=[text_splitter]\n)\n</code></pre>"},{"location":"rag/llama_index/learn/%E6%9E%84%E5%BB%BARAG%E7%9A%84%E6%B5%81%E7%A8%8B/%E5%8A%A0%E8%BD%BD%E5%92%8C%E6%8F%90%E5%8F%96%E6%95%B0%E6%8D%AE/#api_1","title":"\u4f4e\u7ea7\u8f6c\u6362 API","text":"<p>\u60a8\u8fd8\u53ef\u4ee5\u663e\u5f0f\u5b9a\u4e49\u8fd9\u4e9b\u6b65\u9aa4\u3002</p> <p>\u60a8\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528\u6211\u4eec\u7684\u8f6c\u6362\u6a21\u5757\uff08\u6587\u672c\u5206\u5272\u5668\u3001\u5143\u6570\u636e\u63d0\u53d6\u5668\u7b49\uff09\u4f5c\u4e3a\u72ec\u7acb\u7ec4\u4ef6\u6765\u5b9e\u73b0\u8fd9\u4e00\u70b9\uff0c\u6216\u8005\u5728\u6211\u4eec\u7684\u58f0\u660e\u6027\u8f6c\u6362\u6d41\u7a0b\u63a5\u53e3\u4e2d\u7ec4\u5408\u5b83\u4eec\u3002</p> <p>\u8ba9\u6211\u4eec\u6765\u770b\u770b\u4e0b\u9762\u7684\u6b65\u9aa4\u3002</p>"},{"location":"rag/llama_index/learn/%E6%9E%84%E5%BB%BARAG%E7%9A%84%E6%B5%81%E7%A8%8B/%E5%8A%A0%E8%BD%BD%E5%92%8C%E6%8F%90%E5%8F%96%E6%95%B0%E6%8D%AE/#_5","title":"\u5c06\u6587\u6863\u62c6\u5206\u6210\u8282\u70b9","text":"<p>\u5904\u7406\u6587\u6863\u7684\u5173\u952e\u6b65\u9aa4\u662f\u5c06\u5b83\u4eec\u62c6\u5206\u4e3a \u201c\u5757\u201d/<code>Node</code> \u5bf9\u8c61\u3002\u5173\u952e\u601d\u60f3\u662f\u5c06\u6570\u636e\u5904\u7406\u6210\u53ef\u4ee5\u68c0\u7d22/\u63d0\u4f9b\u7ed9 LLM \u7684\u5c0f\u5757\u3002</p> <p>LlamaIndex \u652f\u6301\u5404\u79cd\u6587\u672c\u5206\u5272\u5668\uff0c\u4ece\u57fa\u4e8e\u6bb5\u843d/\u53e5\u5b50/\u6807\u8bb0\u7684\u5206\u5272\u5668\u5230\u57fa\u4e8e\u6587\u4ef6\u7684\u5206\u5272\u5668\uff0c\u5982 HTML\u3001JSON\u3002</p> <p>\u5b83\u4eec\u53ef\u4ee5\u5355\u72ec\u4f7f\u7528\uff0c\u4e5f\u53ef\u4ee5\u4f5c\u4e3a\u6444\u53d6\u7ba1\u9053\u7684\u4e00\u90e8\u5206\u4f7f\u7528\u3002</p> Python<pre><code>from llama_index.core import SimpleDirectoryReader\nfrom llama_index.core.ingestion import IngestionPipeline\nfrom llama_index.core.node_parser import TokenTextSplitter\n\ndocuments = SimpleDirectoryReader(\"./data\").load_data()\n\npipeline = IngestionPipeline(transformations=[TokenTextSplitter(), ...])\n\nnodes = pipeline.run(documents=documents)\n</code></pre>"},{"location":"rag/llama_index/learn/%E6%9E%84%E5%BB%BARAG%E7%9A%84%E6%B5%81%E7%A8%8B/%E5%8A%A0%E8%BD%BD%E5%92%8C%E6%8F%90%E5%8F%96%E6%95%B0%E6%8D%AE/#_6","title":"\u6dfb\u52a0\u5143\u6570\u636e","text":"<p>\u6211\u4eec\u8fd8\u53ef\u4ee5\u9009\u62e9\u5c06\u5143\u6570\u636e\u6dfb\u52a0\u5230\u6587\u6863\u548c\u8282\u70b9\u3002\u8fd9\u53ef\u4ee5\u624b\u52a8\u5b8c\u6210\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u81ea\u52a8\u5143\u6570\u636e\u63d0\u53d6\u5668\u5b8c\u6210\u3002</p> <p>\u4e0b\u9762\u7684\u6307\u5357\u4ecb\u7ecd\u4e86 1\uff09\u5982\u4f55\u81ea\u5b9a\u4e49\u6587\u6863\u548c 2\uff09\u5982\u4f55\u81ea\u5b9a\u4e49\u8282\u70b9\u3002</p> Python<pre><code>document = Document(\n    text=\"text\",\n    metadata={\"filename\": \"&lt;doc_file_name&gt;\", \"category\": \"&lt;category&gt;\"},\n)\n</code></pre>"},{"location":"rag/llama_index/learn/%E6%9E%84%E5%BB%BARAG%E7%9A%84%E6%B5%81%E7%A8%8B/%E5%8A%A0%E8%BD%BD%E5%92%8C%E6%8F%90%E5%8F%96%E6%95%B0%E6%8D%AE/#embedding","title":"\u6dfb\u52a0\u5d4c\u5165embedding","text":"<p>\u8981\u5c06\u8282\u70b9\u63d2\u5165\u5411\u91cf\u7d22\u5f15\uff0c\u5b83\u5e94\u8be5\u5177\u6709\u5d4c\u5165embedding\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u6211\u4eec\u7684\u63d0\u53d6\u7ba1\u9053\u6216\u5d4c\u5165\u6307\u5357\u3002</p>"},{"location":"rag/llama_index/learn/%E6%9E%84%E5%BB%BARAG%E7%9A%84%E6%B5%81%E7%A8%8B/%E5%8A%A0%E8%BD%BD%E5%92%8C%E6%8F%90%E5%8F%96%E6%95%B0%E6%8D%AE/#_7","title":"\u76f4\u63a5\u521b\u5efa\u5e76\u4f20\u9012\u8282\u70b9","text":"<p>\u5982\u679c\u6211\u4eec\u613f\u610f\uff0c\u60a8\u53ef\u4ee5\u76f4\u63a5\u521b\u5efa\u8282\u70b9\u5e76\u5c06\u8282\u70b9\u5217\u8868\u76f4\u63a5\u4f20\u9012\u7ed9\u7d22\u5f15\u5668\uff1a</p> Python<pre><code>from llama_index.core.schema import TextNode\n\nnode1 = TextNode(text=\"&lt;text_chunk&gt;\", id_=\"&lt;node_id&gt;\")\nnode2 = TextNode(text=\"&lt;text_chunk&gt;\", id_=\"&lt;node_id&gt;\")\n\nindex = VectorStoreIndex([node1, node2])\n</code></pre>"},{"location":"rag/sft/chatml/","title":"ChatML","text":"<p>\u5728 ChatML \u4e2d\uff0c\u5bf9\u8bdd\u88ab\u5206\u4e3a\u4ee5\u4e0b\u51e0\u5c42\u6216\u89d2\u8272\uff1a</p> <ul> <li>\u7cfb\u7edf system</li> <li>\u52a9\u624b assistant</li> <li>\u7528\u6237 user</li> </ul> <p>\u8fd9\u53ea\u662f ChatML \u7684 0 \u7248\u672c\uff0c\u6211\u4eec\u627f\u8bfa\u5c06\u5bf9\u8be5\u8bed\u8a00\u8fdb\u884c\u91cd\u5927\u5f00\u53d1\u3002</p> <p>ChatML \u4e2d\u5bb9\u7eb3\u7684\u6709\u6548\u8f7d\u8377\u76ee\u524d\u4ec5\u4e3a\u6587\u672c\u3002OpenAI \u9884\u8ba1\u5c06\u5f15\u5165\u5176\u4ed6\u6570\u636e\u7c7b\u578b\u3002\u8fd9\u7b26\u5408\u5927\u578b\u57fa\u7840\u6a21\u578b\u7684\u6982\u5ff5\uff0c\u5373\u5c06\u5f00\u59cb\u7ed3\u5408\u6587\u672c\u3001\u56fe\u50cf\u3001\u58f0\u97f3\u7b49\u3002</p> <p>\u7528\u6237\u4ecd\u7136\u53ef\u4ee5\u4f7f\u7528\u4e0d\u5b89\u5168\u7684\u539f\u59cb\u5b57\u7b26\u4e32\u683c\u5f0f\u3002\u4f46\u8fd9\u79cd\u683c\u5f0f\u672c\u8eab\u5c31\u5141\u8bb8\u6ce8\u5165\u3002</p> <p>OpenAI \u5904\u4e8e\u4ee5\u8d1f\u8d23\u4efb\u7684\u65b9\u5f0f\u5f15\u5bfc\u548c\u7ba1\u7406 LLM \u9886\u57df\u7684\u7406\u60f3\u4f4d\u7f6e\u3002\u4e3a\u521b\u5efa\u5e94\u7528\u7a0b\u5e8f\u5236\u5b9a\u57fa\u7840\u6807\u51c6\u3002</p> <p>ChatML \u5411\u6a21\u578b\u660e\u786e\u4e86\u6bcf\u6bb5\u6587\u672c\u7684\u6765\u6e90\uff0c\u5e76\u7279\u522b\u663e\u793a\u4e86\u4eba\u7c7b\u6587\u672c\u548c\u4eba\u5de5\u667a\u80fd\u6587\u672c\u4e4b\u95f4\u7684\u754c\u9650\u3002</p> <p>\u8fd9\u63d0\u4f9b\u4e86\u7f13\u89e3\u5e76\u6700\u7ec8\u89e3\u51b3\u6ce8\u5165\u95ee\u9898\u7684\u673a\u4f1a\uff0c\u56e0\u4e3a\u6a21\u578b\u53ef\u4ee5\u5206\u8fa8\u51fa\u54ea\u4e9b\u6307\u4ee4\u6765\u81ea\u5f00\u53d1\u4eba\u5458\u3001\u7528\u6237\u6216\u5176\u81ea\u5df1\u7684\u8f93\u5165\u3002\u301cOpenAI</p>"},{"location":"rag/sft/chatml/#chatml_1","title":"ChatML \u793a\u4f8b\u4ee3\u7801","text":"<p>system\u4e0b\u9762\u662f ChatML \u793a\u4f8b JSON \u6587\u4ef6\uff0c\u5176\u4e2d\u5b9a\u4e49\u4e86\u3001user\u548c\u7684\u89d2\u8272assistant\u3002</p> JSON<pre><code>[ { \"role\" :  \"system\" ,  \n      \"content\"  :  \"\u60a8\u662f ChatGPT\uff0c\u8fd9\u662f OpenAI \u8bad\u7ec3\u7684\u5927\u578b\u8bed\u8a00\u6a21\u578b\u3002\u8bf7\u5c3d\u53ef\u80fd\u7b80\u6d01\u5730\u56de\u7b54\u3002\\n\u77e5\u8bc6\u622a\u6b62\u65f6\u95f4\uff1a2021-09-01\\n\u5f53\u524d\u65e5\u671f\uff1a2023-03-02\" } , \n { \"role\" :  \"user\" ,  \n      \"content\"  :  \"\u60a8\u597d\u5417\uff1f\" } , \n { \"role\" :  \"assistant\" , \"  \n      content\"  :  \"\u6211\u5f88\u597d\" } , \n { \"role\" :  \"user\" ,  \n      \"content\"  :  \"OpenAI \u516c\u53f8\u7684\u4f7f\u547d\u662f\u4ec0\u4e48\uff1f\" } ]\n</code></pre> <p>\u6709\u6548\u7684 Python \u4ee3\u7801\u7247\u6bb5\u5982\u4e0b\uff1a Bash<pre><code>pip install openai \n</code></pre></p> <p>Python<pre><code>import os \nimport openai \nopenai.api_key = \"xxxxxxxxxxxxxxxxxxxxxxxxxxxxx\"\n\n finish = openai.ChatCompletion.create( \n  model= \"gpt-3.5-turbo\" , \n  messages = [{ \"role\" : \"system\" , \"content\" : \"\u60a8\u662f ChatGPT\uff0c\u8fd9\u662f\u7531 OpenAI \u8bad\u7ec3\u7684\u5927\u578b\u8bed\u8a00\u6a21\u578b\u3002\u8bf7\u5c3d\u53ef\u80fd\u7b80\u6d01\u5730\u56de\u7b54\u3002\\n\u77e5\u8bc6\u622a\u6b62\uff1a2021-09-01\\n\u5f53\u524d\u65e5\u671f\uff1a2023-03-02\" }, \n{ \"role\" : \"user\" , \"content\" : \"\u60a8\u597d\u5417\uff1f\" }, \n{ \"role\" : \"assistant\" , \"content\" : \"\u6211\u5f88\u597d\" }, \n{ \"role\" : \"user\" , \"content\" : \"OpenAI \u516c\u53f8\u7684\u4f7f\u547d\u662f\u4ec0\u4e48\uff1f\" }] \n) \n#print(completion) \nprint (completion)\n</code></pre> \u901a\u8fc7\u4e0b\u9762\u7684\u8f93\u51fa\uff0c\u6ce8\u610f\u5b9a\u4e49\u7684\u89d2\u8272\u3001\u6a21\u578b\u7ec6\u8282gpt-3.5-turbo-0301\u548c\u5176\u4ed6\u7ec6\u8282\u3002</p> JSON<pre><code>{\n  \"choices\": [\n    {\n      \"finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"content\": \"The mission of OpenAI is to ensure that artificial intelligence (AI) benefits humanity as a whole, by developing and promoting friendly AI for everyone, researching and mitigating risks associated with AI, and helping shape the policy and discourse around AI.\",\n        \"role\": \"assistant\"\n      }\n    }\n  ],\n  \"created\": 1677751157,\n  \"id\": \"chatcmpl-6pa0TlU1OFiTKpSrTRBbiGYFIl0x3\",\n  \"model\": \"gpt-3.5-turbo-0301\",\n  \"object\": \"chat.completion\",\n  \"usage\": {\n    \"completion_tokens\": 50,\n    \"prompt_tokens\": 84,\n    \"total_tokens\": 134\n  }\n}\n</code></pre>"},{"location":"rag/sft/chatml/#_1","title":"\u7ed3\u675f\u8bed","text":"<p>\u6784\u5efa\u57fa\u4e8e LLM \u7684\u5bf9\u8bdd\u754c\u9762\u7684\u6311\u6218\u4e4b\u4e00\u662f\u5c06\u63d0\u793a\u8282\u70b9\u6392\u5e8f\u6210\u94fe\u7684\u6982\u5ff5\u3002</p> <p>\u7531\u4e8e\u8f93\u5165\u7684\u975e\u7ed3\u6784\u5316\u6027\u8d28\uff0c\u8282\u70b9\u4e4b\u95f4\u7684\u8fb9\u5f88\u96be\u7ba1\u7406\u3002\u8f93\u5165\u901a\u5e38\u662f\u81ea\u7136\u8bed\u8a00\u6216\u5bf9\u8bdd\uff0c\u672c\u8d28\u4e0a\u662f\u975e\u7ed3\u6784\u5316\u7684\u3002</p> <p>ChatML \u5c06\u6781\u5927\u5730\u5e2e\u52a9\u521b\u5efa\u63d0\u4ea4\u5230\u94fe\u7684\u6570\u636e\u8f6c\u6362\u7684\u6807\u51c6\u76ee\u6807\u3002</p>"},{"location":"rag/sft/chatml/#_2","title":"\u53c2\u8003","text":"<ol> <li>https://cobusgreyling.medium.com/the-introduction-of-chat-markup-language-chatml-is-important-for-a-number-of-reasons-5061f6fe2a85</li> <li>https://zhuanlan.zhihu.com/p/666461139</li> </ol>"},{"location":"rewrite/introduction/","title":"\u5f15\u8a00","text":""},{"location":"rewrite/introduction/#_2","title":"\u80cc\u666f","text":"<p>\u5f53\u524d\u7684\u5bf9\u8bdd\u7cfb\u7edf\u5728\u5904\u7406\u5355\u8f6e\u5bf9\u8bdd\u95ee\u9898\u4e0a\u6548\u679c\u975e\u5e38\u597d\uff0c\u800c\u5728\u5904\u7406\u591a\u8f6e\u6216\u8005\u4e0e\u4e0a\u6587\u76f8\u5173\u7684\u7528\u6237\u95ee\u9898\u65f6\uff0c\u5f53\u524d\u5bf9\u8bdd\u7cfb\u7edf\u5219\u8868\u73b0\u4e00\u822c\uff0c\u4e3b\u8981\u539f\u56e0\u662f\u4eba\u4eec\u7684\u65e5\u5e38\u5bf9\u8bdd\u4e2d\u6bcf\u4e2a\u8f6e\u6b21\u4e4b\u95f4\u5e76\u975e\u5b64\u7acb\u7684\uff0c\u800c\u662f\u6bcf\u4e00\u8f6e\u5bf9\u8bdd\u90fd\u53ef\u80fd\u5b58\u5728\u6307\u4ee3(pronoun)\u6216\u8005\u7701\u7565(ellipsis)\u7684\u60c5\u51b5\u3002 \u8fd9\u65f6\u5982\u679c\u53ea\u57fa\u4e8e\u7528\u6237\u5f53\u524d\u8f6e\u7684\u8f93\u5165\u8fdb\u884c\u56de\u590d\uff0c\u5219\u4f1a\u5ffd\u7565\u6389\u4e0a\u6587\u7684\u4e00\u4e9b\u91cd\u8981\u4fe1\u606f\uff0c\u5bfc\u81f4\u56de\u590d\u7684\u7ed3\u679c\u4e0d\u7b26\u5408\u4e0a\u4e0b\u6587\u8bed\u5883\u3002</p>"},{"location":"rewrite/introduction/#_3","title":"\u95ee\u9898","text":"<p>Non-Sentential Utterances(NSUs) \u8868\u793a\u5bf9\u8bdd\u8fc7\u7a0b\u4e2d\u5b58\u5728\u7701\u7565\u548c\u6307\u4ee3\uff0c\u4e14\u4e0d\u5177\u5907\u5b8c\u5907\u8bed\u4e49\u4fe1\u606f\u7684\u53e5\u5b50\u3002\u4e0b\u8868\u4e2d\u5217\u4e3e\u4e86\u5bf9\u8bdd\u7cfb\u7edf\u4e2d\u6307\u4ee3\u548c\u7701\u7565\u9020\u6210NSUs\u7684\u793a\u4f8b\uff1a</p> \u7c7b\u578b \u793a\u4f8b \u6307\u4ee3 A1: \u6885\u897f\u6709\u591a\u9ad8  B1: \u5b98\u65b9\u8bf4\u4ed6\u7684\u8eab\u9ad8\u662f5\u82f1\u5c3a7\u82f1\u5bf8\u3002 A2: \u4ed6\u548cC\u7f57\u8c01\u662f\u6700\u597d\u7684\u7403\u5458? \u7701\u7565 A1: \u4f60\u559c\u6b22\u4ec0\u4e48\u7535\u5f71?  B1: \u6cf0\u5766\u5c3c\u514b\u3002  A2: \u4e3a\u4ec0\u4e48\u5462? <p>\u5728\u6307\u4ee3\u793a\u4f8b\u4e2d\uff0cA2\u4e2d\u7684\u3010\u4ed6\u3011\u6307A1\u4e2d\u7684\u3010\u6885\u897f\u3011\u3002</p> <p>\u5728\u7701\u7565\u793a\u4f8b\u4e2d\uff0cA2\u4e2d\u7701\u7565\u4e86\u3010\u559c\u6b22\u6cf0\u5766\u5c3c\u514b\u3011\u3002</p>"},{"location":"rewrite/introduction/#_4","title":"\u76ee\u6807","text":"<p>\u5bf9\u4e8e NSUs \u95ee\u9898\uff0c\u6539\u5199\u4efb\u52a1\u7684\u76ee\u6807\u662f\u5c06\u6700\u540e\u4e00\u53e5\u8bdd\u6062\u590d\u5230\u5177\u5907\u5b8c\u6574\u8bed\u4e49\u4fe1\u606f\u7684\u53e5\u5b50\u3002\u5728\u6307\u4ee3\u793a\u4f8b\u4e2d\uff0cA2\u6062\u590d\u5230\u5177\u5907\u5b8c\u6574\u8bed\u4e49\u4fe1\u606f\u7684\u53e5\u5b50\uff0c\u5373\u3010\u6885\u897f\u548cC\u7f57\u8c01\u662f\u6700\u597d\u7684\u7403\u5458\uff1f\u3011\u3002\u5728\u7701\u7565\u793a\u4f8b\u4e2d\uff0cA2\u6062\u590d\u5230\u5177\u5907\u5b8c\u6574\u8bed\u4e49\u4fe1\u606f\u7684\u53e5\u5b50\uff0c\u5373\u3010\u4f60\u4e3a\u4ec0\u4e48\u559c\u6b22\u6cf0\u5766\u5c3c\u514b\uff1f\u3011\u3002</p> <p>\u53e5\u5b50\u6062\u590d\u5230\u5177\u5907\u5b8c\u6574\u8bed\u4e49\u4fe1\u606f\u540e\uff0c\u5bf9\u8bdd\u7cfb\u7edf\u7684\u7406\u89e3\u6a21\u5757\u5c06\u5176\u4f5c\u4e3a\u8f93\u5165\uff0c\u65e0\u9700\u901a\u8fc7\u4e0a\u4e0b\u6587\u8fdb\u884c\u5efa\u6a21\uff0c\u4fbf\u53ef\u4ee5\u51c6\u786e\u5730\u7406\u89e3\u7528\u6237\u7684\u95ee\u9898\u3002</p>"},{"location":"rewrite/introduction/#_5","title":"\u4efb\u52a1\u63cf\u8ff0","text":"<p>\u5bf9\u8f6e\u5bf9\u8bdd NSUs \u7684\u6539\u5199\u95ee\u9898\uff0c\u53ef\u4ee5\u63cf\u8ff0\u4e3a\u5982\u4e0b\u5f62\u5f0f\uff1a</p> \\[ (H, U_{n} \\rightarrow R), H=\\{U_{1}, U_{2}, U_{3}, \\cdots, U_{n-1}\\} \\] <p>\u5176\u4e2d\uff1a </p> <ul> <li>\\(U_{n}\\) \u8868\u793a\u5728\u65f6\u95f4 \\(n\\) \u65f6\u523b\u7684\u5bf9\u8bdd\u6587\u672c\uff0c\u5c5e\u4e8e NSUs \u7684\u8f93\u5165\uff1b</li> <li>\\(H\\) \u8868\u793a\u5728\u65f6\u95f4 \\(n\\) \u4e4b\u524d\u7684\u4f1a\u8bdd\u5386\u53f2\uff0c\u4e00\u5171 \\(n-1\\) \u8f6e\u5bf9\u8bdd\uff1b</li> <li>\\(R\\) \u8868\u793a \\(U_{n}\\) \u7ecf\u8fc7\u6539\u5199\u4e4b\u540e\u5f97\u5230\u7684\u6587\u672c\u3002</li> </ul> <p>\u4e3a\u4e86\u4fdd\u8bc1\u80fd\u4e3a\u81ea\u7136\u8bed\u8a00\u7406\u89e3\u6a21\u5757\u63d0\u4f9b\u5b8c\u6574\u7684\u4fe1\u606f\u8f93\u5165\uff0c\u8981\u6c42\u6539\u5199\u5f97\u5230\u7684 \\(R\\) \u5177\u5907\u5b8c\u6574\u7684\u5bf9\u8bdd\u5386\u53f2\u4fe1\u606f\uff0c\u540c\u4e8b\u9700\u8981\u4fdd\u8bc1 \\(R\\) \u7684\u6d41\u7a0b\u6027\u548c\u5408\u7406\u6027\u3002</p> <p>\u6539\u5199\u4efb\u52a1\u7684\u76ee\u6807\u662f\u5b66\u4e60\u5f97\u5230\u7684\u6a21\u578b \\(P(R | (H, U_{n}))\\)\uff0c\u80fd\u591f\u5224\u65ad\u662f\u5426\u9700\u8981\u6539\u5199\uff0c\u5982\u679c\u9700\u8981\uff0c\u5219\u8fd4\u56de\u5676\u5199\u540e\u7684\u6587\u672c\u5e8f\u5217\u3002</p>"},{"location":"speech/asr/sherpa-ncnn%E9%83%A8%E7%BD%B2/","title":"sherpa-ncnn \u90e8\u7f72","text":""},{"location":"speech/asr/sherpa-ncnn%E9%83%A8%E7%BD%B2/#ios","title":"IOS\u90e8\u7f72","text":"<p>\u5728\u672c\u8282\u4e2d\uff0c\u6211\u4eec\u5c06\u4ecb\u7ecd\u5982\u4f55\u6784\u5efa\u7528\u4e8e\u8bed\u97f3\u7684 iOS \u5e94\u7528\u7a0b\u5e8f \u4f7f\u7528 sherpa-ncnn \u8fdb\u884c\u8bc6\u522b\u5e76\u5728 Mac \u4e0a\u7684\u6a21\u62df\u5668\u4e2d\u8fd0\u884c\u5b83\uff0c \u5728\u60a8\u7684 iPhone \u6216 iPad \u4e0a\u8fd0\u884c\u5b83\u3002real-time</p> <p>\u6211\u4eec\u8fd8\u63d0\u4f9b\u5b9e\u65f6\u8bed\u97f3\u8bc6\u522b\u7684\u89c6\u9891\u6f14\u793a\u3002</p> <p>\u63d0\u793a</p> <p>\u5728\u8bed\u97f3\u8bc6\u522b\u8fc7\u7a0b\u4e2d\uff0c\u5b83\u4e0d\u9700\u8981\u8bbf\u95ee Internet\u3002 \u6bcf\u4e2a Bug \u90fd\u5728\u60a8\u7684 iPhone \u6216 iPad \u4e0a\u672c\u5730\u5904\u7406\u3002</p> <p>\u89c6\u9891\u6f14\u793a \u89c6\u9891 1\uff1aiPhone 14 Pro \u4e2d\u6587 + \u82f1\u6587\uff08\u6a21\u62df\u5668\uff09 \u89c6\u9891 2\uff1aiPad 11 Pro \u4e0a\u7684\u4e2d\u6587 + \u82f1\u6587\uff08\u6a21\u62df\u5668\uff09 \u6784\u5efa\u9002\u7528\u4e8e iOS \u7684 sherpa-ncnn \u8981\u6c42 \u4e0b\u8f7d sherpa-ncnn \u6784\u5efa sherpa-ncnn\uff08\u5728\u547d\u4ee4\u884c\u4e2d\uff0cC++ \u90e8\u5206\uff09 \u6784\u5efa sherpa-ncnn\uff08\u5728 Xcode \u4e2d\uff09 \u5728 iPhone/iPad \u4e0a\u8fd0\u884c sherpa-ncnn \u5bf9\u4e8e\u66f4\u597d\u5947\u7684 \u8fd0\u884c ./build-ios.sh \u751f\u6210\u7684\u6587\u4ef6 openmp.xc\u6846\u67b6 sherpa-ncnn.xc\u6846\u67b6 \u5982\u4f55\u5728 Xcode \u4e2d\u4f7f\u7528 ./build-ios.sh \u751f\u6210\u7684\u6587\u4ef6</p>"},{"location":"speech/asr/%E5%BC%95%E8%A8%80/","title":"\u8bed\u97f3\u8bc6\u522b","text":"<p>\u5728\u90e8\u7f72\u8bed\u97f3\u8bc6\u522b\u7684\u65f6\u5019\uff0c\u4f7f\u7528\u5c0f\u7c73\u5f00\u6e90\u7684sherpa\u6846\u67b6\u90e8\u7f72\u4e0d\u540c\u7684\u5ba2\u6237\u7aef\uff0c\u5305\u62ec\u5b89\u5353\u548cios\u7684\u5ba2\u6237\u7aef\u3002</p>"},{"location":"speech/asr/%E5%BC%95%E8%A8%80/#sherpa","title":"sherpa \u4ecb\u7ecd","text":"<p>Sherpa \u662f\u4e0b\u4e00\u4ee3kaldi\u9879\u76ee\u7684\u90e8\u7f72\u6846\u67b6 Sherpa \u652f\u6301\u5728\u5404\u79cd\u5e73\u53f0\u4e0a\u90e8\u7f72\u8bed\u97f3\u76f8\u5173\u7684\u9884\u8bad\u7ec3\u6a21\u578b\u3002</p> <p>\u5982\u679c\u60a8\u5bf9\u5982\u4f55\u8bad\u7ec3\u81ea\u5df1\u7684\u6a21\u578b\u6216\u5fae\u8c03\u9884\u8bad\u7ec3\u7684\u6a21\u578b\u611f\u5174\u8da3\uff0c\u8bf7\u53c2\u8003 Icefall \u8fd9\u4e2a\u9879\u76ee\u3002</p> <p>\u76ee\u524d\uff0csherpa\u6709\u4ee5\u4e0b\u5b50\u9879\u76ee\uff1a</p> <ul> <li>k2-fsa/sherpa</li> <li>k2-fsa/sherpa-onnx</li> <li>k2-fsa/sherpa-ncnn</li> </ul> <p>\u4e0a\u9762\u8fd9\u4e9b\u9879\u76ee\u4e4b\u95f4\u7684\u5dee\u5f02\u5982\u4e0b\u8868\u6240\u793a\uff1a</p> k2/sherpa k2/sherpa-onnx k2/sherpa-ncnn \u5b89\u88c5\u7684\u56f0\u96be\u7a0b\u5ea6 \u56f0\u96be \u5bb9\u6613 \u5bb9\u6613 \u795e\u7ecf\u7f51\u7edc\u4f9d\u8d56\u5e93 Pytorch onnxruntime ncnn CPU \u652f\u6301 x86 x86_64 x86\u3001x86_64\u3001 arm32,arm64 x86, x86_64, arm32, arm64, RISC-V GPU \u652f\u6301 \u662f\u7684\uff08\u9002\u7528\u4e8e NVIDIA GPU\uff09CUDA \u662f\u7684 \u662f\u7684\uff08\u9002\u7528\u4e8e ARM GPU\uff09Vulkan \u64cd\u4f5c\u7cfb\u7edf\u652f\u6301 Linux\u7684\uff0c Windows\u7684\uff0c macOS \u7684 Linux\u7684\uff0c Windows\u7684\uff0c macOS\u3001 \u3001iOS Android Linux\u7684\uff0c Windows\u7684\uff0c macOS\u3001 \u3001iOS Android \u652f\u6301 batch_size &gt; 1 \u662f\u7684 \u662f\u7684 No \u63d0\u4f9b\u7684 API C++\u3001Python C\u3001C++\u3001Python\u3001 C#\u3001Java\u3001Kotlin \u548c \u65af\u5a01\u592b\u7279\u3001Go\u3001 JavaScript\u3001Dart \u5e15\u65af\u5361\uff0cRust C\u3001C++\u3001Python\u3001 C#\u3001Kotlin\u3001 Swift, Go \u652f\u6301\u7684\u529f\u80fd \u6d41\u5f0f\u8bed\u97f3\u8bc6\u522b / \u975e\u6d41\u5f0f\u8bed\u97f3\u8bc6\u522b \u6d41\u5f0f\u8bed\u97f3\u8bc6\u522b / \u975e\u6d41\u5f0f\u8bed\u97f3\u8bc6\u522b / \u6587\u672c\u8f6c\u8bed\u97f3\uff0c \u8bf4\u8bdd\u4eba\u5206\u7c7b / \u8bf4\u8bdd\u4eba\u8bc6\u522b / \u8bf4\u8bdd\u4eba\u9a8c\u8bc1 / \u53e3\u8bed\u8bc6\u522b / \u97f3\u9891\u6807\u8bb0\uff0c VAD / \u5173\u952e\u8bcd\u8bc6\u522b\uff0c \u6d41\u5f0f\u8bed\u97f3\u8bc6\u522b / VAD <p>\u6211\u4eec\u4e5f\u652f\u6301 Triton\u3002\u8bf7\u53c2\u9605 Triton\u3002</p>"},{"location":"speech/asr/%E5%BC%95%E8%A8%80/#_2","title":"\u53c2\u8003\uff1a","text":"<ol> <li>https://k2-fsa.github.io/sherpa/intro.html</li> </ol>"},{"location":"speech_and_language_processing/regular_expressions_text_normalization_ddit_distance/","title":"\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u6587\u672c\u5f52\u4e00\u5316\uff0c\u7f16\u8f91\u8ddd\u79bb","text":""},{"location":"speech_and_language_processing/jsgf/jsgf/","title":"JSGF(JSpeech Gramar Format)\u6587\u6cd5\u683c\u5f0f","text":"<p>Jsgf \u662f\u4e00\u79cd\u6587\u6cd5\u683c\u5f0f\uff0c\u7528\u4e8e\u63cf\u8ff0\u8bed\u97f3\u8bc6\u522b\u5668\u5e94\u8be5\u542c\u4ec0\u4e48\u3002\u8fd9\u4e2a\u683c\u5f0f\u662fsun\u516c\u53f8\u7ed9w3c\u63d0\u4ea4\u7684java\u8bed\u97f3\u8bc6\u522b\u547d\u4ee4\u89e3\u6790\u6807\u51c6\u3002</p> <p>Success</p> <p>\u4e0b\u9762\u7684\u5185\u5bb9\u662f\u5bf9w3c\u4e2djsgf\u6587\u6863\u7684\u7ffb\u8bd1\u3002</p>"},{"location":"speech_and_language_processing/jsgf/jsgf/#_1","title":"\u80cc\u666f","text":"<ul> <li>\u6700\u540e\u7684\u63d0\u4ea4\u65e5\u671f\uff1aW3C \u8bf4\u660e 2000 \u5e74 6 \u6708 5 \u65e5</li> <li>\u6700\u540e\u63d0\u4ea4\u7684\u6b64\u7248\u672c\uff1ahttp://www.w3.org/TR/2000/NOTE-jsgf-20000605</li> <li>\u6700\u65b0\u7248\u672c\uff1ahttp://www.w3.org/TR/jsgf</li> <li>\u4f5c\u8005\uff1aAndrew Hunt\uff0cSpeech Works International &lt; andrew.hunt@speechworks.com &gt;</li> </ul> <p>\u7248\u6743\u6240\u6709 \u00a92000 Sun Microsystems, Inc. Sun\u3001Sun Microsystems, Inc.\u3001Java \u548c\u6240\u6709\u57fa\u4e8e Java \u7684\u6807\u8bb0\u548c\u5fbd\u6807\u662f Sun Microsystems, Inc. \u5728\u7f8e\u56fd\u548c\u5176\u4ed6\u56fd\u5bb6/\u5730\u533a\u7684\u5546\u6807\u6216\u6ce8\u518c\u5546\u6807\u3002</p>"},{"location":"speech_and_language_processing/jsgf/jsgf/#_2","title":"\u6458\u8981","text":"<p>JSpeech \u6587\u6cd5\u683c\u5f0f (JSGF) \u662f\u4e00\u79cd\u5e73\u53f0\u65e0\u5173\u3001\u6280\u672f\u63d0\u4f9b\u8005\u65e0\u5173\u7684\u6587\u6cd5\u6587\u672c\u8868\u793a\uff0c\u7528\u4e8e\u8bed\u97f3\u8bc6\u522b\u3002\u8bed\u97f3\u8bc6\u522b\u6a21\u5757\u4f7f\u7528\u6587\u6cd5\u6765\u786e\u5b9a\u8bed\u97f3\u8bc6\u522b\u6a21\u5757\u5e94\u8be5\u542c\u4ec0\u4e48\uff0c\u4ece\u800c\u63cf\u8ff0\u7528\u6237\u53ef\u80fd\u8bf4\u7684\u6587\u672c\u5185\u5bb9\u3002\u9664\u4e86\u4f7f\u7528\u4f20\u7edf\u7684\u8bed\u6cd5\u7b26\u53f7\u5916\uff0c JSGF \u8fd8\u91c7\u7528\u4e86 Java <sup>TM</sup> \u7f16\u7a0b\u8bed\u8a00\u7684\u98ce\u683c\u548c\u4e60\u60ef\u3002</p> <p>\u672c\u6587\u6863\u6e90\u81ea Java <sup>TM</sup> Speech API Grammar Format\uff08\u7248\u672c 1.0\uff0c1998 \u5e74 10 \u6708\uff09\uff0c\u53ef\u4ece Sun Microsystems \u7684\u7f51\u7ad9\u83b7\u53d6\uff1a http://java.sun.com/products/java-media/speech/\u3002</p> <p>Sun Microsystems \u5e0c\u671b\u5c06\u672c\u6587\u6863\u63d0\u4ea4\u7ed9 W3C \u8bed\u97f3\u6d4f\u89c8\u5668\u5de5\u4f5c\u7ec4\uff0c\u4ee5\u4fbf\u5236\u5b9a\u8bed\u97f3\u6280\u672f\u7684\u4e92\u8054\u7f51\u6807\u51c6\u3002\u6211\u4eec\u671f\u671b\u7531\u6b64\u4ea7\u751f\u7684 W3C \u5efa\u8bae\u5bf9\u5f00\u53d1\u8005\u793e\u533a\u5177\u6709\u91cd\u8981\u610f\u4e49\u3002</p> <p>\u6709\u5173\u77e5\u8bc6\u4ea7\u6743\u7684\u58f0\u660e\u8bf7\u53c2\u9605 Sun\u63d0\u4ea4\u7684\u6587\u4ef6\u3002</p>"},{"location":"speech_and_language_processing/jsgf/jsgf/#_3","title":"\u672c\u6587\u6863\u7684\u72b6\u6001","text":"<p>\u672c\u6587\u6863\u662f Sun Microsystems, Inc. \u5411\u4e07\u7ef4\u7f51\u8054\u76df\u63d0\u4ea4\u7684\u4e00\u4efd\u6587\u4ef6\uff08\u8bf7\u53c2\u9605\u63d0\u4ea4\u8bf7\u6c42\u3001W3C \u5de5\u4f5c\u4eba\u5458\u610f\u89c1\uff09\u3002\u6240\u6709\u5df2\u786e\u8ba4\u63d0\u4ea4\u6587\u4ef6\u7684\u5217\u8868\uff0c\u8bf7\u53c2\u9605\u5df2\u786e\u8ba4\u63d0\u4ea4\u7ed9 W3C \u7684\u6587\u4ef6\u3002</p> <p>\u672c\u6587\u6863\u662f W3C \u63d0\u4f9b\u7684\u4e00\u4efd\u6ce8\u91ca\uff0c\u4ec5\u4f9b\u8ba8\u8bba\u3002\u8fd9\u9879\u5de5\u4f5c\u5e76\u4e0d\u610f\u5473\u7740 W3C \u6210\u5458\u7684\u8ba4\u53ef\u6216\u5171\u8bc6\uff0c\u4e5f\u4e0d\u610f\u5473\u7740 W3C \u5df2\u7ecf\u3001\u6b63\u5728\u6216\u5c06\u8981\u4e3a\u672c\u6ce8\u91ca\u4e2d\u89e3\u51b3\u7684\u95ee\u9898\u5206\u914d\u4efb\u4f55\u8d44\u6e90\u3002\u672c\u6587\u6863\u662f\u4e00\u9879\u6b63\u5728\u8fdb\u884c\u7684\u5de5\u4f5c\uff0c\u53ef\u80fd\u4f1a\u968f\u65f6\u88ab\u5176\u4ed6\u6587\u6863\u66f4\u65b0\u3001\u66ff\u6362\u6216\u6dd8\u6c70\u3002</p> <p>\u672c\u6587\u6863\u6e90\u81ea Sun \u53d1\u5e03\u7684\u73b0\u6709\u89c4\u8303\uff0c\u8be5\u89c4\u8303\u7531 Sun \u4e0e\u5171\u540c\u7f16\u5199 Java <sup>TM</sup> Speech API \u7684\u516c\u53f8\u5171\u540c\u5f00\u53d1\u3002\u8be5\u89c4\u8303\u79f0\u4e3a Java Speech API Grammar Format\uff0c\u53ef\u4ece http://java.sun.com/products/java-media/speech/ (\u8fd9\u4e2a\u8fde\u63a5\u5df2\u7ecf\u65e0\u6cd5\u8bbf\u95ee) \u83b7\u5f97\u53c2\u8003\u3002\u9664\u4e86\u89c4\u8303\u540d\u79f0\u548c\u89c4\u8303\u4e2d\u76f8\u5e94\u7684\u5f15\u7528\u6709\u6240\u66f4\u6539\u5916\uff0c\u672c\u6587\u6863\u5728\u6280\u672f\u4e0a\u4e0e\u4ee5\u524d\u53d1\u5e03\u7684\u6587\u6863\u5b8c\u5168\u76f8\u540c\u3002\u6211\u4eec\u66f4\u6539\u540d\u79f0\u53ea\u662f\u4e3a\u4e86\u4fdd\u62a4 Sun \u5546\u6807\u3002\u65e0\u8bba\u5982\u4f55\uff0c\u6211\u4eec\u9884\u8ba1\u8054\u76df\u5236\u5b9a\u7684\u4efb\u4f55\u6d3e\u751f\u89c4\u8303\u90fd\u4f1a\u6709\u4e0d\u540c\u7684\u540d\u79f0\u3002</p> <p>\u5982\u679c\u9700\u8981\u5bf9\u6587\u6863\u8fdb\u884c\u4efb\u4f55\u66f4\u6539\uff0c\u6211\u4eec\u5e0c\u671b\u672a\u6765\u7248\u672c\u7531 W3C \u6d41\u7a0b\u5236\u4f5c\u3002Sun \u4fdd\u7559 JSGF \u89c4\u8303\u7684\u6240\u6709\u6743\uff0c\u5e76\u4fdd\u7559\u72ec\u7acb\u7ef4\u62a4\u548c\u53d1\u5c55 JSGF \u89c4\u8303\u7684\u6743\u5229\uff0c\u6b64\u7c7b\u72ec\u7acb\u7ef4\u62a4\u548c\u53d1\u5c55\u5e94\u5f52 Sun \u6240\u6709\u3002</p> <p>\u5f53\u524d W3C \u6280\u672f\u6587\u6863\u7684\u5217\u8868\u53ef\u5728\u6280\u672f\u62a5\u544a\u9875\u9762\u627e\u5230\u3002</p>"},{"location":"speech_and_language_processing/jsgf/jsgf/#_4","title":"\u5185\u5bb9","text":""},{"location":"speech_and_language_processing/jsgf/jsgf/#_5","title":"\u524d\u8a00","text":""},{"location":"speech_and_language_processing/jsgf/jsgf/#_6","title":"\u8303\u56f4","text":"<p>\u4ee5\u4e0b\u5185\u5bb9\u88ab\u89c6\u4e3a\u7a0b\u5e8f\u5e94\u8be5\u5904\u7406\u7684\u95ee\u9898\uff0c\u53ef\u4ee5\u901a\u8fc7\u8bed\u97f3\u8bc6\u522b\u5668\u7684 API \u8fdb\u884c\u5904\u7406\uff1a</p> <ul> <li>\u7528\u4e8e\u5728\u8bed\u97f3\u8bc6\u522b\u6a21\u5757\u4e2d\u52a0\u8f7d\u3001\u521b\u5efa\u548c\u5220\u9664\u8bed\u6cd5\u3001\u8bed\u97f3\u8bc6\u522b\u7528\u4e8e\u6fc0\u6d3b\u7684\u8bed\u6cd5\u4ee5\u53ca\u5176\u4ed6\u8bed\u6cd5\u7ba1\u7406\u529f\u80fd\u3002</li> <li>\u52a0\u8f7d\u8bed\u6cd5\u7684\u7ea6\u5b9a\uff1a\u4f8b\u5982\uff0c\u901a\u8fc7\u7f51\u7ad9\u4e0a\u7684 URL\u3002</li> <li>\u63a5\u6536\u8bed\u6cd5\u8bc6\u522b\u7ed3\u679c\u5e76\u5904\u7406\u8fd9\u4e9b\u7ed3\u679c\u7684\u673a\u5236\u3002</li> <li>\u5bf9\u8bed\u6cd5\u4e0a\u4e0d\u6b63\u786e\u7684\u8bed\u6cd5\u5b9a\u4e49\u7684\u9519\u8bef\u5904\u7406\u3002</li> <li>\u8bcd\u6c47\u7ba1\u7406\uff0c\u5305\u62ec\u6807\u8bb0\u53d1\u97f3\u7684\u5904\u7406\u3002</li> </ul>"},{"location":"speech_and_language_processing/jsgf/jsgf/#_7","title":"\u8d21\u732e","text":"<p>Sun Microsystems, Inc. \u6536\u5230\u4e86\u6765\u81ea Apple Computer, Inc.\u3001AT&amp;T\u3001Dragon Systems, Inc.\u3001IBM Corporation\u3001Novell, Inc.\u3001Philips Speech Processing \u548c Texas Instruments Incorporated \u4ee5\u53ca\u8bb8\u591a\u4e92\u8054\u7f51\u8bc4\u8bba\u8005\u5bf9\u6b64\u89c4\u8303\u7684\u8d21\u732e\u3002</p>"},{"location":"speech_and_language_processing/jsgf/jsgf/#jspeech","title":"JSpeech\u8bed\u6cd5\u683c\u5f0f\u89c4\u8303","text":""},{"location":"speech_and_language_processing/jsgf/jsgf/#1","title":"1. \u7b80\u4ecb","text":"<p>\u8bed\u97f3\u8bc6\u522b\u7cfb\u7edf\u4f7f\u8ba1\u7b97\u673a\u80fd\u591f\u8046\u542c\u7528\u6237\u8bed\u97f3\u5e76\u786e\u5b9a\u6240\u8bf4\u7684\u5185\u5bb9\u3002\u5f53\u524d\u7684\u6280\u672f\u5c1a\u4e0d\u652f\u6301 \u4e0d\u53d7\u7ea6\u675f\u7684\u8bed\u97f3\u8bc6\u522b\uff1a\u80fd\u591f\u8046\u542c\u4efb\u4f55\u8bed\u5883\u4e2d\u7684\u4efb\u4f55\u8bed\u97f3\u5e76\u51c6\u786e\u8f6c\u5f55\u3002\u4e3a\u4e86\u5b9e\u73b0\u5408\u7406\u7684\u8bc6\u522b\u51c6\u786e\u5ea6\u548c\u54cd\u5e94\u65f6\u95f4\uff0c\u5f53\u524d\u7684\u8bed\u97f3\u8bc6\u522b\u5668\u4f7f\u7528\u8bed\u6cd5\u6765\u9650\u5236\u6240\u542c\u5185\u5bb9\u3002</p> <p>JSpeech \u8bed\u6cd5\u683c\u5f0f ( JSGF) \u5b9a\u4e49\u4e86\u4e00\u79cd\u72ec\u7acb\u4e8e\u5e73\u53f0\u3001\u72ec\u7acb\u4e8e\u4f9b\u5e94\u5546\u7684\u65b9\u5f0f\u6765\u63cf\u8ff0\u4e00\u79cd\u8bed\u6cd5\uff0c\u5373\u89c4\u5219\u8bed\u6cd5\uff08\u4e5f\u79f0\u4e3a\u547d\u4ee4\u548c\u63a7\u5236\u8bed\u6cd5\u6216\u5e38\u89c4\u8bed\u6cd5\uff09\u3002\u5b83\u4f7f\u7528\u5f00\u53d1\u4eba\u5458\u548c\u8ba1\u7b97\u673a\u5747\u53ef\u8bfb\u53d6\u548c\u7f16\u8f91\u7684\u6587\u672c\u8868\u793a\uff0c\u5e76\u4e14\u53ef\u4ee5\u5305\u542b\u5728\u6e90\u4ee3\u7801\u4e2d\u3002\u672c\u6587\u4e0d\u8ba8\u8bba \u53e6\u4e00\u79cd\u4e3b\u8981\u8bed\u6cd5\u7c7b\u578b\uff0c\u5373\u542c\u5199\u8bed\u6cd5\u3002</p> <p>\u89c4\u5219\u8bed\u6cd5\u6307\u5b9a\u7528\u6237\u53ef\u80fd\u8bf4\u51fa\u7684\u8bdd\u8bed \u7c7b\u578b\uff08\u53e3\u5934\u8bdd\u8bed\u7c7b\u4f3c\u4e8e\u4e66\u9762\u53e5\u5b50\uff09\u3002\u4f8b\u5982\uff0c\u7b80\u5355\u7684\u7a97\u53e3\u63a7\u5236\u8bed\u6cd5\u53ef\u80fd\u4f1a\u76d1\u542c\u201c\u6253\u5f00\u6587\u4ef6\u201d\u3001\u201c\u5173\u95ed\u7a97\u53e3\u201d\u7b49\u7c7b\u4f3c\u547d\u4ee4\u3002</p> <p>\u7528\u6237\u80fd\u8bf4\u4ec0\u4e48\u53d6\u51b3\u4e8e\u4e0a\u4e0b\u6587\uff1a\u7528\u6237\u662f\u5728\u63a7\u5236\u7535\u5b50\u90ae\u4ef6\u5e94\u7528\u7a0b\u5e8f\u3001\u8bfb\u4fe1\u7528\u5361\u53f7\u8fd8\u662f\u9009\u62e9\u5b57\u4f53\uff1f\u5e94\u7528\u7a0b\u5e8f\u77e5\u9053\u4e0a\u4e0b\u6587\uff0c\u56e0\u6b64\u5e94\u7528\u7a0b\u5e8f\u8d1f\u8d23\u4e3a\u8bed\u97f3\u8bc6\u522b\u5668\u63d0\u4f9b\u9002\u5f53\u7684\u8bed\u6cd5\u3002</p> <p>\u672c\u6587\u6863\u662f JSpeech \u8bed\u6cd5\u683c\u5f0f\u7684\u89c4\u8303\u3002\u9996\u5148\uff0c\u63cf\u8ff0\u4e86\u57fa\u672c\u547d\u540d\u548c\u7ed3\u6784\u673a\u5236\u3002\u7136\u540e\uff0c\u63cf\u8ff0\u4e86\u8bed\u6cd5\u7684\u57fa\u672c\u7ec4\u6210\u90e8\u5206\uff0c\u5373\u8bed\u6cd5\u5934\u548c\u8bed\u6cd5\u4e3b\u4f53\u3002\u8bed\u6cd5\u5934\u58f0\u660e\u4e86\u8bed\u6cd5\u540d\u79f0\u5e76\u5217\u51fa\u4e86 \u5bfc\u5165\u7684\u89c4\u5219\u548c\u8bed\u6cd5\u3002\u8bed\u6cd5\u4e3b\u4f53\u5c06\u6b64\u8bed\u6cd5\u7684\u89c4\u5219\u5b9a\u4e49\u4e3a\u53ef\u6717\u8bfb\u6587\u672c\u548c\u5bf9\u5176\u4ed6\u89c4\u5219\u7684\u5f15\u7528\u7684\u7ec4\u5408\u3002\u6700\u540e\uff0c\u63d0\u4f9b\u4e86\u4e00\u4e9b\u8bed\u6cd5\u58f0\u660e\u7684\u7b80\u5355\u793a\u4f8b\u3002</p>"},{"location":"speech_and_language_processing/jsgf/jsgf/#11","title":"1.1 \u76f8\u5173\u6587\u6863","text":"<p>\u4ee5\u4e0b\u662f\u53ef\u80fd\u6709\u52a9\u4e8e\u7406\u89e3\u548c\u4f7f\u7528 JSpeech \u8bed\u6cd5\u683c\u5f0f\u7684\u76f8\u5173\u6587\u6863\u5217\u8868\u3002</p> <p>JSpeech \u8bed\u6cd5\u683c\u5f0f\u91c7\u7528\u4e86 Java TM\u7f16\u7a0b\u8bed\u8a00 \u7684\u4e00\u4e9b\u98ce\u683c\u548c\u60ef\u4f8b\u3002\u5bf9\u5168\u9762\u89c4\u8303\u611f\u5174\u8da3\u7684\u8bfb\u8005\u53ef\u4ee5\u53c2\u9605 \u300aJava TM\u8bed\u8a00\u89c4\u8303\u300b\uff0cGosling\u3001Joy \u548c Steele\uff0cAddison Wesley\uff0c1996 \u5e74 (GJS96)\u3002</p> <p>JSpeech \u8bed\u6cd5\u683c\u5f0f\u4e2d\u7684\u8bed\u6cd5\u53ef\u4ee5\u7528 Unicode \u5b57\u7b26\u96c6\u7f16\u5199\uff0c\u5982\u300aUnicode \u6807\u51c6\u300b2.0 \u7248\uff08 Unicode Consortium\u3001Addison-Wesley Developers Press\u30011996 \u5e74\uff09\uff08Uni96\uff09\u4e2d\u6240\u5b9a\u4e49\u3002</p>"},{"location":"speech_and_language_processing/jsgf/jsgf/#2","title":"2. \u5b9a\u4e49","text":""},{"location":"speech_and_language_processing/jsgf/jsgf/#21","title":"2.1 \u8bed\u6cd5\u540d\u79f0\u548c\u5305\u540d\u79f0","text":"<p>JSpeech \u8bed\u6cd5\u683c\u5f0f\u5b9a\u4e49\u7684\u6bcf\u4e2a\u8bed\u6cd5\u89c4\u5219\u90fd\u6709\u4e00\u4e2a\u552f\u4e00\u7684\u540d\u79f0\uff0c\u8be5\u540d\u79f0\u5728\u8bed\u6cd5\u5934\u4e2d\u58f0\u660e\u3002\u8bed\u6cd5\u540d\u79f0\u7684\u5408\u6cd5\u7ed3\u6784\u4e3a\uff1a</p> Java<pre><code>packageName.simpleGrammarName   // \u7b2c\u4e00\u79cd\u5f62\u5f0f\uff1a\u5168\u540d\u79f0\ngrammarName                     // \u7b2c\u4e8c\u79cd\u5f62\u5f0f\uff1a\u7b80\u79f0\n</code></pre> <p>\u7b2c\u4e00\u79cd\u5f62\u5f0f\uff08\u5305\u540d+\u7b80\u5355\u8bed\u6cd5\u540d\uff09\u662f\u5b8c\u6574\u8bed\u6cd5\u540d\u3002\u7b2c\u4e8c\u79cd\u5f62\u5f0f\u662f\u7b80\u5355\u8bed\u6cd5\u540d\uff08\u53ea\u6709\u8bed\u6cd5\u540d\uff09\u3002\u5b8c\u6574\u8bed\u6cd5\u540d\u548c\u7b80\u5355\u8bed\u6cd5\u540d\u7684\u793a\u4f8b\u5305\u62ec\uff1a</p> Java<pre><code>com.sun.speech.apps.numbers\nedu.unsw.med.people\nexamples\n</code></pre> <p>\u5305\u540d\u548c\u8bed\u6cd5\u540d\u7684\u683c\u5f0f\u4e0e Java <sup>TM</sup> \u7f16\u7a0b\u8bed\u8a00\u4e2d\u7684\u5305\u548c\u7c7b\u76f8\u540c\u3002\u5b8c\u6574\u7684\u8bed\u6cd5\u540d\u662f\u7528\u70b9\u5206\u9694\u7684\u6807\u8bc6\u7b26\uff08\u8bf7\u53c2\u9605\u201cJava \u8bed\u8a00\u89c4\u8303\u201d\uff0cGosling\u3001Joy \u548c Steele\uff0cAddison Wesley\uff0c1996 \u5e74\uff0c(GJS96) \u00a73.8 \u548c \u00a76.5\uff09\u3002</p> <p>JSGF \u8bed\u6cd5\u547d\u540d\u7ea6\u5b9a\u4e5f\u9075\u5faa Java \u7f16\u7a0b\u8bed\u8a00\u4e2d\u7c7b\u7684\u547d\u540d\u7ea6\u5b9a\uff08\u53c2\u89c1 GJS96\uff09\u3002\u8be5\u7ea6\u5b9a\u6700\u5927\u9650\u5ea6\u5730\u51cf\u5c11\u4e86\u547d\u540d\u51b2\u7a81\u7684\u53ef\u80fd\u6027\u3002 \u5305\u540d\u79f0\u5e94\u4e3a\uff1a</p> Java<pre><code>reversedDomainName\u3002localPackaging\n</code></pre> <p>\u4f8b\u5982\uff0c<code>\u5bf9\u4e8ecom.sun.speech.apps.numbers</code>\uff0c\u5176\u4e2d * <code>com.sun</code> \u90e8\u5206\u662f Sun \u7684\u53cd\u5411 Internet \u57df\u540d\uff0c * <code>speech.apps</code> \u662f Sun \u8303\u56f4\u5185\u5212\u5206\u540d\u79f0\u7a7a\u95f4\u7684\u672c\u5730\u5305\u540d\u79f0\uff0c * <code>numbers</code> \u662f\u7b80\u5355\u8bed\u6cd5\u540d\u79f0\u3002</p>"},{"location":"speech_and_language_processing/jsgf/jsgf/#22","title":"2.2 \u89c4\u5219\u540d\u79f0","text":"<p>\u8bed\u6cd5\u7531\u4e00\u7ec4\u89c4\u5219\u7ec4\u6210\uff0c\u8fd9\u4e9b\u89c4\u5219\u5171\u540c\u5b9a\u4e49\u4e86\u7528\u6237\u53ef\u80fd\u8bf4\u51fa\u7684\u5185\u5bb9\u3002\u89c4\u5219\u7531\u53ef\u80fd\u8bf4\u51fa\u7684\u6587\u672c\u4e0e\u5bf9\u5176\u4ed6\u89c4\u5219\u7684\u5f15\u7528\u7ec4\u5408\u3002\u6bcf\u6761\u89c4\u5219\u90fd\u6709\u4e00\u4e2a\u552f\u4e00\u7684 \u89c4\u5219\u540d\u79f0\u3002\u5bf9\u89c4\u5219\u7684\u5f15\u7528\u7528 <code>&lt;&gt;</code> \u5305\u542b\u89c4\u5219\u540d\u79f0\u5b57\u7b26\uff08\u5c0f\u4e8e\u548c\u5927\u4e8e\uff09\u6765\u8868\u793a\u3002</p> <p>\u5408\u6cd5\u89c4\u5219\u540d\u79f0\u7c7b\u4f3c\u4e8e Java \u7f16\u7a0b\u8bed\u8a00\u4e2d\u7684\u6807\u8bc6\u7b26\uff0c\u4f46\u5141\u8bb8\u4f7f\u7528\u5176\u4ed6\u989d\u5916\u7b26\u53f7\u3002\u5408\u6cd5\u89c4\u5219\u540d\u79f0\u662f\u65e0\u9650\u957f\u5ea6 Unicode \u5b57\u7b26\u5e8f\u5217\uff0c\u9700\u8981\u6ee1\u8db3\u4ee5\u4e0b2\u4e2a\u89c4\u5219\uff1a</p> <ul> <li>Java \u7f16\u7a0b\u8bed\u8a00\u6807\u8bc6\u7b26\u4e2d\u5408\u6cd5\u7684\u4efb\u4f55\u5b57\u7b26\u3002</li> <li>\u4ee5\u4e0b\u9644\u52a0\u6807\u70b9\u7b26\u53f7\uff1a<code>+ - : ; , = | / \\ ( ) [ ] @ # % ! ^ &amp; ~</code></li> </ul> <p>\u8bed\u6cd5\u5f00\u53d1\u4eba\u5458\u5e94\u8be5\u6ce8\u610f\u4e24\u4e2a\u7279\u5b9a\u7684\u9650\u5236\u3002\u9996\u5148\uff0c\u89c4\u5219\u540d\u79f0\u4e0e\u7cbe\u786e\u7684 Unicode \u5b57\u7b26\u4e32\u5339\u914d\u8fdb\u884c\u6bd4\u8f83\uff0c\u56e0\u6b64\u5927\u5c0f\u5199\u5f88\u91cd\u8981\u3002\u4f8b\u5982\uff0c<code>&lt;Name&gt;</code> \u548c<code>&lt;NAME&gt;</code> \u662f <code>&lt;name&gt;</code> \u4e0d\u540c\u7684\u3002\u5176\u6b21\uff0c\u89c4\u5219\u540d\u79f0\u4e2d\u4e0d\u5141\u8bb8\u4f7f\u7528 <code>\u7a7a\u683c</code> \u3002</p> <p>\u89c4\u5219\u540d\u79f0 <code>&lt;NULL&gt;</code> \u548c <code>&lt;VOID&gt;</code> \u662f\u4fdd\u7559\u7684\u3002\u8fd9\u4e9b\u7279\u6b8a\u89c4\u5219\u5c06\u5728\u672c\u8282\u540e\u9762\u8ba8\u8bba\u3002</p> <p>Unicode \u5b57\u7b26\u96c6\u6db5\u76d6\u4e86\u4e16\u754c\u4e0a\u5927\u591a\u6570\u73b0\u5b58\u8bed\u8a00\u7684\u4e66\u5199\u811a\u672c\uff0c\u56e0\u6b64\u89c4\u5219\u540d\u79f0\u53ef\u4ee5\u7528\u4e2d\u6587\u3001\u65e5\u8bed\u3001\u97e9\u8bed\u3001\u6cf0\u8bed\u3001\u963f\u62c9\u4f2f\u8bed\u3001\u6b27\u6d32\u8bed\u8a00\u7b49\u591a\u79cd\u8bed\u8a00\u4e66\u5199\u3002\u4ee5\u4e0b\u662f\u89c4\u5219\u540d\u79f0\u7684\u793a\u4f8b\u3002</p> <ul> <li><code>&lt;hell&gt;</code></li> <li><code>&lt;Z\u00fcrich&gt;</code></li> <li><code>&lt;user_test&gt;</code></li> <li><code>&lt;$100&gt;</code></li> <li><code>&lt;1+2=3&gt;</code></li> <li>\\(&lt;\\pi\\alpha\\beta&gt;\\)</li> </ul>"},{"location":"speech_and_language_processing/jsgf/jsgf/#221","title":"2.2.1 \u9650\u5b9a\u540d\u79f0\u548c\u5b8c\u5168\u9650\u5b9a\u540d\u79f0","text":"<p>\u5c3d\u7ba1\u89c4\u5219\u540d\u79f0\u5728\u8bed\u6cd5\u4e2d\u662f\u552f\u4e00\u7684\uff0c\u4f46\u4e0d\u540c\u7684\u8bed\u6cd5\u53ef\u80fd\u4f1a\u91cd\u7528\u76f8\u540c\u7684\u7b80\u5355\u89c4\u5219\u540d\u79f0\u3002\u540e\u9762\u7684\u90e8\u5206\u5c06\u4ecb\u7ecd <code>import</code> \u8bed\u53e5\uff0c\u5b83\u5141\u8bb8\u4e00\u4e2a\u8bed\u6cd5\u5f15\u7528\u53e6\u4e00\u4e2a\u8bed\u6cd5\u4e2d\u7684\u89c4\u5219\u3002\u5f53\u4e24\u4e2a\u8bed\u6cd5\u4f7f\u7528\u76f8\u540c\u7684\u89c4\u5219\u540d\u79f0\u65f6\uff0c\u5bf9\u8be5\u89c4\u5219\u540d\u79f0\u7684\u5f15\u7528\u53ef\u80fd\u4f1a\u4ea7\u751f\u6b67\u4e49\u3002\u9650\u5b9a\u540d\u79f0 \u548c \u5b8c\u5168\u9650\u5b9a\u540d\u79f0 \u7528\u4e8e\u5728\u8bed\u6cd5\u4e4b\u95f4\u8fdb\u884c\u65e0\u6b67\u4e49\u7684\u5f15\u7528\u3002</p> <p>\u5b8c\u5168\u9650\u5b9a\u89c4\u5219\u540d\u79f0\u5305\u62ec \u5b8c\u6574\u8bed\u6cd5\u540d\u79f0 \u548c \u7b80\u5355\u89c4\u5219\u540d\u79f0\u3002\u4f8b\u5982\uff1a</p> Java<pre><code>&lt;com.sun.greetings.english.hello&gt;\n&lt;com.sun.greetings.deutsch.gutenTag&gt;\n</code></pre> <p>\u9650\u5b9a\u89c4\u5219\u540d\u79f0\u4ec5\u5305\u542b\u7b80\u5355\u8bed\u6cd5\u540d\u79f0\u548c\u89c4\u5219\u540d\u79f0\u662f\u4e00\u79cd\u6709\u7528\u7684\u7b80\u5199\u8868\u793a\u3002\u4f8b\u5982\uff1a</p> Java<pre><code>&lt;english.hello&gt;\n&lt;deutsch.gutenTag&gt;\n</code></pre> <p>\u89c4\u5219\u540d\u79f0\u7684\u4f7f\u7528\u9700\u9075\u5b88\u4ee5\u4e0b\u6761\u4ef6\uff1a</p> <ul> <li>\u9650\u5b9a\u7684\u548c\u5b8c\u5168\u9650\u5b9a\u7684\u89c4\u5219\u540d\u79f0\u4e0d\u80fd\u7528\u5728\u89c4\u5219\u5b9a\u4e49\u7684\u5de6\u4fa7\u3002</li> <li>\u5bfc\u5165\u8bed\u53e5\u5fc5\u987b\u4f7f\u7528\u5b8c\u5168\u9650\u5b9a\u7684\u89c4\u5219\u540d\u79f0\u3002</li> <li>\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u5f62\u5f0f\u901a\u8fc7\u9650\u5b9a\u540d\u79f0\u548c\u5b8c\u5168\u9650\u5b9a\u540d\u79f0\u6765\u5f15\u7528\u672c\u5730\u89c4\u5219 <code>&lt;localGrammarName.ruleName&gt;</code>\u3002</li> </ul> <p>2.2.2 \u89e3\u6790\u89c4\u5219\u540d\u79f0 \u4f7f\u7528\u5bf9\u89c4\u5219\u540d\u79f0\u7684\u6a21\u7cca\u5f15\u7528\u662f\u9519\u8bef\u7684\u3002\u4ee5\u4e0b\u5b9a\u4e49\u4e86\u89e3\u6790\u5f15\u7528\u7684\u884c\u4e3a\uff1a</p> <p>\u672c\u5730\u89c4\u5219\u4f18\u5148\u3002\u5982\u679c\u672c\u5730\u89c4\u5219\u548c\u4e00\u4e2a\u6216\u591a\u4e2a\u5bfc\u5165\u89c4\u5219\u5177\u6709\u76f8\u540c\u7684\u540d\u79f0\uff0c\u5219\u5bf9\u7684\u7b80\u5355\u89c4\u5219\u5f15\u7528\u5c31\u662f\u5bf9\u672c\u5730\u89c4\u5219\u7684\u5f15\u7528\u3002 \u5982\u679c\u4e24\u4e2a\u6216\u591a\u4e2a\u5bfc\u5165\u89c4\u5219\u5177\u6709\u76f8\u540c\u7684\u540d\u79f0\uff0c\u4f46\u6ca1\u6709\u540c\u540d\u7684\u672c\u5730\u89c4\u5219\uff0c\u5219\u5bf9\u7684\u7b80\u5355\u89c4\u5219\u5f15\u7528\u4f1a\u4ea7\u751f\u6b67\u4e49\u5e76\u4e14\u4f1a\u51fa\u9519\u3002\u8981\u89e3\u51b3\u8fd9\u79cd\u6b67\u4e49\uff0c\u5fc5\u987b\u4f7f\u7528\u5176\u9650\u5b9a\u6216\u5b8c\u5168\u9650\u5b9a\u7684\u540d\u79f0\u6765\u5f15\u7528\u8fd9\u4e9b\u5bfc\u5165\u89c4\u5219\u3002 \u5982\u679c\u4e24\u4e2a\u6216\u591a\u4e2a\u5bfc\u5165\u89c4\u5219\u5177\u6709\u76f8\u540c\u7684\u540d\u79f0\uff0c\u5e76\u4e14\u6765\u81ea\u5177\u6709\u76f8\u540c\u7b80\u5355\u8bed\u6cd5\u540d\u79f0\uff08\u4f46\u5305\u540d\u79f0\u5fc5\u7136\u4e0d\u540c\uff09\u7684\u8bed\u6cd5\uff0c\u5219\u7b80\u5355\u89c4\u5219\u5f15\u7528\u6216\u9650\u5b9a\u89c4\u5219\u5f15\u7528\u4f1a\u4ea7\u751f\u6b67\u4e49\uff0c\u5e76\u4e14\u4f1a\u4ea7\u751f\u9519\u8bef\u3002\u8fd9\u4e9b\u5bfc\u5165\u89c4\u5219\u5fc5\u987b\u901a\u8fc7\u5176\u5b8c\u5168\u9650\u5b9a\u540d\u79f0\u6765\u5f15\u7528\u3002 \u5b8c\u5168\u9650\u5b9a\u89c4\u5219\u540d\u79f0\u7684\u5f15\u7528\u6c38\u8fdc\u4e0d\u4f1a\u4ea7\u751f\u6b67\u4e49\u3002 \u5f53\u89c4\u5219\u540d\u79f0\u5f15\u7528\u65e0\u6cd5\u89e3\u6790\uff08\u672a\u5728\u672c\u5730\u5b9a\u4e49\u4e14\u4e0d\u662f\u5bfc\u5165\u8bed\u6cd5\u7684\u516c\u5171\u89c4\u5219\uff09\u65f6\uff0c\u8be5\u5f15\u7528\u7684\u5904\u7406\u7531\u8bc6\u522b\u5668\u7684\u8f6f\u4ef6\u63a5\u53e34 \u5b9a\u4e49\u3002 <p>2.2.3 \u7279\u6b8a\u89c4\u5219\u540d JSpeech \u8bed\u6cd5\u683c\u5f0f\u5b9a\u4e49\u4e86\u4e24\u4e2a\u7279\u6b8a\u89c4\u5219\uff0c\u548c \u3002\u8fd9\u4e9b\u89c4\u5219\u662f\u901a\u7528\u5b9a\u4e49\u7684 - \u5b83\u4eec\u53ef\u7528\u4e8e\u4efb\u4f55\u8bed\u6cd5\uff0c\u65e0\u9700\u663e\u5f0f\u5bfc\u5165\u8bed\u53e5 - \u5e76\u4e14\u65e0\u6cd5\u91cd\u65b0\u5b9a\u4e49\u3002\u8fd9\u4e24\u4e2a\u540d\u79f0\u90fd\u662f\u5b8c\u5168\u9650\u5b9a\u7684\uff0c\u56e0\u6b64\u4e0d\u9700\u8981\u9650\u5b9a\u8bed\u6cd5\u540d\u79f0\u3002 <p>\u5b9a\u4e49\u81ea\u52a8\u5339\u914d\u7684\u89c4\u5219\uff1a\u5373\u65e0\u9700\u7528\u6237\u8bf4\u4efb\u4f55\u8bdd\u5c31\u8fdb\u884c\u5339\u914d\u3002 <p>\u5b9a\u4e49\u4e00\u6761\u6c38\u8fdc\u4e0d\u80fd\u8bf4\u51fa\u6765\u7684\u89c4\u5219\u3002\u63d2\u5165\u5e8f\u5217\u4f1a\u81ea\u52a8\u4f7f\u8be5\u5e8f\u5217\u65e0\u6cd5\u8bf4\u51fa\u67655\u3002 <p>\u548c \u89c4\u5219\u901a\u5e38\u7528\u4e8e\u7279\u6b8a\u60c5\u51b5\u3002\u5b83\u4eec\u53ef\u7528\u4e8e\u963b\u6b62\u548c\u542f\u7528\u90e8\u5206\u8bed\u6cd5\u3001\u63a7\u5236\u9012\u5f52\u4ee5\u53ca\u6267\u884c\u5176\u4ed6\u9ad8\u7ea7\u4efb\u52a1\u3002 \u548c \u7684\u7528\u9014\u5c06\u5728\u672c\u6587\u6863\u540e\u9762\u4ecb\u7ecd\u3002 <p>2.3 \u4ee3\u5e01 \u6807\u8bb0\uff08\u6709\u65f6\u79f0\u4e3a\u7ec8\u7aef\u7b26\u53f7\uff09\u662f\u8bed\u6cd5\u7684\u4e00\u90e8\u5206\uff0c\u7528\u4e8e\u5b9a\u4e49\u7528\u6237\u53ef\u4ee5\u8bf4\u51fa\u7684\u5185\u5bb9\u3002\u901a\u5e38\uff0c\u6807\u8bb0\u76f8\u5f53\u4e8e\u5355\u8bcd\u3002\u6807\u8bb0\u53ef\u4ee5\u5355\u72ec\u51fa\u73b0\uff0c\u4f8b\u5982\uff0c</p> <p>\u4f60\u597d \u4f60\u4eca\u5929 \u6216\u8005\u4ee5\u7a7a\u683c\u5b57\u7b26\u5206\u9694\u7684\u6807\u8bb0\u5e8f\u5217\uff0c\u4f8b\u5982\uff0c</p> <p>\u8fd9\u662f\u4e00\u4e2a\u6d4b\u8bd5 \u6253\u5f00\u76ee\u5f55 \u5728 JSpeech \u8bed\u6cd5\u683c\u5f0f\u4e2d\uff0c\u6807\u8bb0\u662f\u7531\u7a7a\u683c\u3001\u5f15\u53f7\u6216\u8bed\u6cd5\u4e2d\u91cd\u8981\u7684\u5176\u4ed6\u7b26\u53f7\u5206\u9694\u7684\u5b57\u7b26\u5e8f\u5217\uff1a</p> <p>; = | * + &lt;&gt; () [] {} / / // \u6807\u8bb0\u662f\u5bf9\u8bc6\u522b\u5668\u8bcd\u6c47\u8868 \u4e2d\u6761\u76ee\u7684\u5f15\u7528\uff0c\u901a\u5e38\u79f0\u4e3a\u8bcd\u5178\u3002\u8bc6\u522b\u5668\u7684\u8bcd\u6c47\u8868\u5b9a\u4e49\u4e86\u6807\u8bb0\u7684\u53d1\u97f3\u3002\u6709\u4e86\u53d1\u97f3\uff0c\u8bc6\u522b\u5668\u5c31\u53ef\u4ee5\u542c\u53d6\u8be5\u6807\u8bb0\u3002</p> <p>JSpeech \u8bed\u6cd5\u683c\u5f0f\u5141\u8bb8\u591a\u8bed\u8a00\u8bed\u6cd5\uff0c\u5373\u5305\u542b\u6765\u81ea\u591a\u79cd\u8bed\u8a00\u7684\u6807\u8bb0\u7684\u8bed\u6cd5\u3002\u4f46\u662f\uff0c\u5927\u591a\u6570\u8bc6\u522b\u5668\u90fd\u4ee5\u5355\u8bed\u65b9\u5f0f\u8fd0\u884c\uff0c\u56e0\u6b64\u5178\u578b\u7684\u8bed\u6cd5\u5c06\u4ec5\u5305\u542b\u4e00\u79cd\u8bed\u8a00\u3002\u5c06\u8bed\u6cd5\u52a0\u8f7d\u5230\u8bc6\u522b\u5668\u4e2d\u7684\u5e94\u7528\u7a0b\u5e8f\u6709\u8d23\u4efb\u786e\u4fdd\u5176\u5177\u6709\u9002\u5f53\u7684\u8bed\u8a00\u652f\u6301\u3002\u4f8b\u5982\uff0c\u4ee5\u4e0b\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u591a\u8bed\u8a00\u89c4\u5219\u3002</p> <p>&lt;\u5426&gt; = \u5426 |\u4e0d |\u5948\u5965 |\u975e |\u5185\u59c6\uff1b \u5927\u591a\u6570\u8bc6\u522b\u5668\u90fd\u4e3a\u6240\u652f\u6301\u7684\u6bcf\u79cd\u8bed\u8a00\u63d0\u4f9b\u4e86\u5168\u9762\u7684\u8bcd\u6c47\u8868\u3002\u4f46\u662f\uff0c\u4e0d\u53ef\u80fd 100% \u5730\u6db5\u76d6\u67d0\u79cd\u8bed\u8a00\u3002\u4f8b\u5982\uff0c\u8bcd\u6c47\u8868\u4e2d\u7ecf\u5e38\u7f3a\u5c11\u540d\u79f0\u3001\u6280\u672f\u672f\u8bed\u548c\u5916\u6765\u8bcd\u3002\u5bf9\u4e8e\u8bcd\u6c47\u8868\u4e2d\u7f3a\u5c11\u7684\u6807\u8bb0\uff0c\u6709\u4e09\u79cd\u53ef\u80fd\u6027\uff1a</p> <p>\u5e94\u7528\u7a0b\u5e8f\u6216\u7528\u6237\u53ef\u4ee5\u5c06\u6807\u8bb0\u548c\u53d1\u97f3\u6dfb\u52a0\u5230\u8bc6\u522b\u5668\u7684\u8bcd\u6c47\u8868\u4e2d\uff0c\u4ee5\u786e\u4fdd\u4e00\u81f4\u7684\u8bc6\u522b\u3002 \u597d\u7684\u8bc6\u522b\u5668\u80fd\u591f\u731c\u51fa\u8bcd\u6c47\u8868\u4e2d\u6ca1\u6709\u7684\u8bb8\u591a\u5355\u8bcd\u7684\u53d1\u97f3\u3002 \u5982\u679c\u4ee5\u4e0a\u4e24\u70b9\u90fd\u4e0d\u9002\u7528\uff0c\u5219\u884c\u4e3a\u7531\u8bc6\u522b\u5668\u7684\u8f6f\u4ef6\u63a5\u53e3\u51b3\u5b9a\u3002\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u672a\u5b9a\u4e49\u7684\u6807\u8bb0\u5c06\u65e0\u6cd5\u53d1\u97f3\uff08\u76f8\u5f53\u4e8e\uff09\uff0c\u6216\u8005\u4f1a\u5bfc\u81f4\u9519\u8bef\u6216\u5f02\u5e38\u3002 \u6807\u8bb0\u4e0d\u5fc5\u662f\u8bed\u8a00\u7684\u6b63\u5e38\u4e66\u5199\u5355\u8bcd\uff0c\u53ea\u8981\u6807\u8bb0\u5728\u8bc6\u522b\u5668\u8bcd\u6c47\u8868\u4e2d\u6b63\u786e\u5b9a\u4e49\u5373\u53ef\u3002\u4f8b\u5982\uff0c\u4e3a\u4e86\u5904\u7406\u201cread\u201d\u7684\u4e24\u79cd\u53d1\u97f3\uff08\u8fc7\u53bb\u65f6\u542c\u8d77\u6765\u50cf\u201cred\u201d\uff0c\u73b0\u5728\u65f6\u542c\u8d77\u6765\u50cf\u201creed\u201d\uff09\uff0c\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u5b9a\u4e49\u4e24\u4e2a\u5355\u72ec\u7684\u6807\u8bb0\u201cread_past\u201d\u548c\u201cread_present\u201d\uff0c\u5e76\u8d4b\u4e88\u5176\u9002\u5f53\u7684\u53d1\u97f3\u3002 <p>2.3.1 \u5f15\u7528\u4ee3\u5e01 \u6807\u8bb0\u4e0d\u4e00\u5b9a\u662f\u5355\u8bcd\u3002\u6807\u8bb0\u53ef\u4ee5\u662f\u5355\u8bcd\u5e8f\u5217\u6216\u7b26\u53f7\u3002\u53ef\u4ee5\u4f7f\u7528\u5f15\u53f7\u5c06\u591a\u5355\u8bcd\u6807\u8bb0\u548c\u7279\u6b8a\u7b26\u53f7\u62ec\u8d77\u6765\u3002\u4f8b\u5982\uff1a</p> <p>\u201c\u7ebd\u7ea6\u201d\u5730\u94c1 \u201c+\u201d \u5f53\u5355\u8bcd\u7684\u53d1\u97f3\u56e0\u4e0a\u4e0b\u6587\u800c\u5f02\u65f6\uff0c\u591a\u8bcd\u6807\u8bb0\u5f88\u6709\u7528\u3002\u591a\u8bcd\u6807\u8bb0\u8fd8\u53ef\u7528\u4e8e\u7b80\u5316\u7ed3\u679c\u5904\u7406\uff0c\u4f8b\u5982\uff0c\u83b7\u53d6\u201c\u7ebd\u7ea6\u201d\u3001\u201c\u6089\u5c3c\u201d\u548c\u201c\u91cc\u7ea6\u70ed\u5185\u5362\u201d\u7684\u5355\u8bcd\u6807\u8bb0\u7ed3\u679c\u3002</p> <p>\u5e26\u5f15\u53f7\u7684\u6807\u8bb0\u53ef\u4ee5\u50cf\u4efb\u4f55\u5176\u4ed6\u6807\u8bb0\u4e00\u6837\u5305\u542b\u5728\u8bc6\u522b\u5668\u7684\u8bcd\u6c47\u8868\u4e2d\u3002\u5982\u679c\u8bcd\u6c47\u8868\u4e2d\u672a\u627e\u5230\u591a\u8bcd\u5e26\u5f15\u53f7\u7684\u6807\u8bb0\uff0c\u5219\u9ed8\u8ba4\u884c\u4e3a\u662f\u786e\u5b9a\u5f15\u53f7\u5185\u6bcf\u4e2a\u7a7a\u683c\u5206\u9694\u7684\u6807\u8bb0\u7684\u53d1\u97f3\uff0c\u5426\u5219\u5c06\u5f15\u53f7\u5185\u7684\u6587\u672c\u89c6\u4e3a\u5355\u4e2a\u6807\u8bb0\u3002</p> <p>\u8981\u5728\u6807\u8bb0\u4e2d\u5305\u542b\u5f15\u53f7\u7b26\u53f7\uff0c\u5fc5\u987b\u4f7f\u7528\u5f15\u53f7\uff0c\u5e76\u4e14\u6807\u8bb0\u5185\u7684\u5f15\u53f7\u524d\u9762\u5fc5\u987b\u6709\u4e00\u4e2a\u53cd\u659c\u6760\u201c\\\u201d\u3002\u540c\u6837\uff0c\u8981\u5728\u5e26\u5f15\u53f7\u7684\u6807\u8bb0\u4e2d\u5305\u542b\u53cd\u659c\u6760\uff0c\u5219\u5e94\u5728\u5176\u524d\u9762\u52a0\u4e0a\u53e6\u4e00\u4e2a\u53cd\u659c\u6760\u3002\u4f8b\u5982\uff0c\u4ee5\u4e0b\u662f\u4e24\u4e2a\u8868\u793a\u5355\u4e2a\u53cd\u659c\u6760\u548c\u5355\u4e2a\u5f15\u53f7\u5b57\u7b26\u7684\u6807\u8bb0\u3002</p> <p>\u201c\\\u201d \u201c\\\u201d\u201d \u5f15\u7528\u7684\u6807\u8bb0\u4e2d\u7684\u7a7a\u767d\u975e\u5e38\u91cd\u8981\u3002</p> <p>2.3.2 \u7b26\u53f7\u548c\u6807\u70b9 \u5927\u591a\u6570\u8bed\u97f3\u8bc6\u522b\u5668\u90fd\u80fd\u591f\u5904\u7406\u5e38\u89c1\u7b26\u53f7\u548c\u6807\u70b9\u7b26\u53f7\u3002\u4f8b\u5982\uff0c\u82f1\u8bed\u8bc6\u522b\u5668\u901a\u5e38\u4f1a\u5904\u7406\u6487\u53f7\uff08\u201cMary's\u201d\u3001\u201cit's\u201d\uff09\u548c\u8fde\u5b57\u7b26\uff08\u201cnew-age\u201d\uff09\u3002</p> <p>\u7136\u800c\uff0c\u6709\u8bb8\u591a\u6587\u672c\u5f62\u5f0f\u5bf9\u4e8e\u8bc6\u522b\u5668\u6765\u8bf4\u5f88\u96be\u660e\u786e\u5904\u7406\u3002\u5728\u8fd9\u4e9b\u60c5\u51b5\u4e0b\uff0c\u8bed\u6cd5\u5f00\u53d1\u4eba\u5458\u5e94\u4f7f\u7528\u5c3d\u53ef\u80fd\u63a5\u8fd1\u4eba\u4eec\u8bf4\u8bdd\u65b9\u5f0f\u4e14\u53ef\u80fd\u5185\u7f6e\u4e8e\u8bcd\u6c47\u8868\u4e2d\u7684\u6807\u8bb0\u3002\u4ee5\u4e0b\u662f\u5e38\u89c1\u793a\u4f8b\u3002</p> <p>\u6570\u5b57\uff1a\u201c0 1 2\u201d\u5e94\u6269\u5c55\u4e3a\u201c\u96f6\u4e00\u4e8c\u201d\u6216\u201c\u54e6\u4e00\u4e8c\u201d\u3002\u540c\u6837\uff0c\u201ccall 555 1234\u201d\u5e94\u6269\u5c55\u4e3a\u201ccall five five five one two three four\u201d\u3002 \u65e5\u671f\uff1a\u201c1997 \u5e74 12 \u6708 25 \u65e5\u201d\u5e94\u5199\u4e3a\u201c1997 \u5e74 12 \u6708 25 \u65e5\u201d\u3002 \u7f29\u5199\u548c\u9996\u5b57\u6bcd\u7f29\u7565\u8bcd\uff1a\u201cMr.\u201d\u5e94\u5199\u4e3a\u201cmister\u201d\uff0c\u201cSt\u201d\u5e94\u5199\u4e3a\u201cstreet\u201d\u3002 \u7279\u6b8a\u7b26\u53f7\uff1a<code>&amp;' \u8868\u793a\u201c\u4e0e\u53f7\u201d\u6216\u201c\u548c\u201d\uff0c</code>+' \u8868\u793a\u201c\u52a0\u53f7\u201d\uff0c\u7b49\u7b49\u3002 2.4 \u8bc4\u8bba \u6ce8\u91ca\u53ef\u4ee5\u51fa\u73b0\u5728\u5934\u90e8\u548c\u4e3b\u4f53\u4e2d\u3002\u91c7\u7528 Java \u7f16\u7a0b\u8bed\u8a00\u7684\u6ce8\u91ca\u6837\u5f0f\uff08\u53c2\u89c1 GJS96\uff09\u3002\u6ce8\u91ca\u6709\u4e24\u79cd\u5f62\u5f0f\u3002</p> <p>/ \u6587\u672c /    \u4f20\u7edf\u6ce8\u91ca\u3002/ \u548c / \u4e4b\u95f4\u7684\u6240\u6709\u6587\u672c\u90fd\u5c06\u88ab\u5ffd\u7565\u3002 // \u6587\u672c   \u5355\u884c\u6ce8\u91ca\u3002\u4ece // \u5230\u884c\u5c3e\u7684\u6240\u6709\u6587\u672c\u90fd\u5c06\u88ab\u5ffd\u7565\u3002 \u6ce8\u91ca\u4e0d\u80fd\u5d4c\u5957\u3002\u6b64\u5916\uff0c//\u5728\u4ee5 \u5f00\u5934\u7684\u6ce8\u91ca\u4e2d\uff0c\u6ca1\u6709\u7279\u6b8a\u542b\u4e49/\u3002\u540c\u6837\uff0c/\u5728\u4ee5 \u5f00\u5934\u7684\u6ce8\u91ca\u4e2d\uff0c\u6ca1\u6709\u7279\u6b8a\u542b\u4e49//\u3002</p> <p>\u6ce8\u91ca\u53ef\u4ee5\u51fa\u73b0\u5728\u8bed\u6cd5\u5b9a\u4e49\u4e2d\u7684\u4efb\u4f55\u4f4d\u7f6e\uff0c\u9664\u4e86\u6807\u8bb0\u3001\u5f15\u7528\u7684\u6807\u8bb0\u3001\u89c4\u5219\u540d\u79f0\u3001\u6807\u7b7e\u548c\u6743\u91cd\u5185\u3002</p> <p>JSpeech \u8bed\u6cd5\u683c\u5f0f\u652f\u6301\u4e0e Java \u7f16\u7a0b\u8bed\u8a00 (GJS96, \u00a718) \u7684\u6587\u6863\u6ce8\u91ca\u98ce\u683c\u7c7b\u4f3c\u7684\u6587\u6863\u6ce8\u91ca\u3002\u8fd9\u4e9b\u7279\u6b8a\u6ce8\u91ca\u5728\u201c\u6587\u6863\u6ce8\u91ca\u201d\u4e00\u8282 \u4e2d\u5b9a\u4e49\u3002</p> <ol> <li>\u8bed\u6cd5\u6807\u9898 \u5355\u4e2a\u6587\u4ef6\u5b9a\u4e49\u5355\u4e2a\u8bed\u6cd5\u3002\u5b9a\u4e49\u8bed\u6cd5\u5305\u542b\u4e24\u90e8\u5206\uff1a\u8bed\u6cd5\u5934\u548c\u8bed\u6cd5\u4e3b\u4f53\u3002\u8bed\u6cd5\u5934\u5305\u62ec\u4e00\u4e2a\u81ea\u6807\u8bc6\u5934\uff0c\u58f0\u660e\u8bed\u6cd5\u7684\u540d\u79f0\u5e76\u58f0\u660e\u4ece\u5176\u4ed6\u8bed\u6cd5\u5bfc\u5165\u89c4\u5219\u3002\u4e3b\u4f53\u5b9a\u4e49\u8bed\u6cd5\u7684\u89c4\u5219\uff0c\u5176\u4e2d\u4e00\u4e9b\u89c4\u5219\u53ef\u80fd\u662f\u516c\u5f00\u7684\u3002</li> </ol> <p>3.1 \u81ea\u8bc6\u522b\u6807\u5934 JSpeech \u8bed\u6cd5\u683c\u5f0f\u6587\u6863\u4ee5\u81ea\u6807\u8bc6\u6807\u5934\u5f00\u5934\u3002\u6b64\u6807\u5934\u6807\u8bc6\u6587\u6863\u5305\u542b JSGF\uff0c\u5e76\u6307\u793a\u6b63\u5728\u4f7f\u7528\u7684 JSGF \u7248\u672c\uff08\u5f53\u524d\u4e3a\u201cV1.0\u201d\uff09\u3002\u63a5\u4e0b\u6765\uff0c\u6807\u5934\u53ef\u9009\u5730\u6307\u5b9a\u6587\u6863\u4e2d\u4f7f\u7528\u7684\u5b57\u7b26\u7f16\u7801\u3002\u6807\u5934\u8fd8\u53ef\u4ee5\u53ef\u9009\u5730\u6307\u5b9a\u6587\u6863\u4e2d\u6307\u5b9a\u7684\u8bed\u6cd5\u7684\u8bed\u8a00\u73af\u5883\u3002\u8bed\u8a00\u73af\u58836\u6307\u5b9a\u8bed\u6cd5\u652f\u6301\u7684\u8bed\u8a00\u548c\u53ef\u9009\u7684\u56fd\u5bb6\u6216\u5730\u533a\u53d8\u4f53\u3002\u6807\u5934\u4ee5\u5206\u53f7\u5b57\u7b26\u548c\u6362\u884c\u7b26\u7ed3\u675f\u3002</p> <p>\u6807\u9898\u683c\u5f0f\u4e3a\uff1a</p>"},{"location":"speech_and_language_processing/jsgf/jsgf/#jsgf-char-encoding-locale","title":"JSGF \u7248\u672c char-encoding locale\uff1b","text":"<p>\u4ee5\u4e0b\u662f\u81ea\u8bc6\u522b\u6807\u9898\u7684\u793a\u4f8b\u3002</p>"},{"location":"speech_and_language_processing/jsgf/jsgf/#jsgf-v10","title":"JSGF V1.0\uff1b","text":""},{"location":"speech_and_language_processing/jsgf/jsgf/#jsgf-v10-iso8859-5","title":"JSGF V1.0 ISO8859-5\uff1b","text":""},{"location":"speech_and_language_processing/jsgf/jsgf/#jsgf-v10-jis-ja","title":"JSGF V1.0 JIS ja;","text":"<p>\u7b2c\u4e00\u4e2a\u4f8b\u5b50\u6ca1\u6709\u63d0\u4f9b\u5b57\u7b26\u7f16\u7801\u6216\u8bed\u8a00\u73af\u5883\uff0c\u56e0\u6b64\u4f1a\u5047\u5b9a\u4e00\u4e2a\u5408\u7406\u7684\u9ed8\u8ba4\u503c\u3002\u5728\u7f8e\u56fd\uff0c\u9ed8\u8ba4\u503c\u53ef\u80fd\u662f ISO8859-1\uff08\u6807\u51c6\u5b57\u7b26\u96c6\uff09\u548c\u201cen\u201d\uff08\u82f1\u8bed\u7b26\u53f7\uff09\u3002\u7b2c\u4e8c\u4e2a\u793a\u4f8b\u5b9a\u4e49\u4e86 ISO8859-5 \u96c6\uff08\u897f\u91cc\u5c14\u6587\uff09\uff0c\u4f46\u5047\u5b9a\u4e86\u9ed8\u8ba4\u8bed\u8a00\u73af\u5883\u3002\u6700\u540e\u4e00\u4e2a\u4f8b\u5b50\u5b9a\u4e49\u4e86\u201cJIS\u201d\u5b57\u7b26\u96c6\uff08\u65e5\u8bed\u5b57\u7b26\u96c6\u4e4b\u4e00\uff09\uff0c\u5e76\u5c06\u8bed\u8a00\u5b9a\u4e49\u4e3a\u201cja\u201d\uff08\u65e5\u8bed\uff09\u3002</p> <p>\u4e95\u53f7 (`#') \u5fc5\u987b\u662f\u6587\u6863\u4e2d\u7684\u7b2c\u4e00\u4e2a\u5b57\u7b26\uff0c\u5e76\u4e14\u81ea\u8bc6\u522b\u6807\u9898\u4e2d\u7684\u6240\u6709\u5b57\u7b26\u5fc5\u987b\u5c5e\u4e8e\u6240\u7528\u7f16\u7801\u7684 ASCII \u5b50\u96c6\u3002</p> <p>3.2 \u8bed\u200b\u200b\u6cd5\u540d\u79f0\u58f0\u660e \u8bed\u6cd5\u7684\u540d\u79f0\u5fc5\u987b\u58f0\u660e\u4e3a\u8be5\u8bed\u6cd5\u7684\u7b2c\u4e00\u4e2a\u8bed\u53e5\u3002\u58f0\u660e\u5fc5\u987b\u4f7f\u7528\u5b8c\u6574\u7684\u8bed\u6cd5\u540d\u79f0\uff08\u5305\u540d\u79f0 + \u7b80\u5355\u8bed\u6cd5\u540d\u79f0\uff09\u3002\u56e0\u6b64\uff0c\u58f0\u660e\u683c\u5f0f\u4e3a\u4ee5\u4e0b\u4efb\u4e00\u683c\u5f0f\uff1a</p> <p>\u8bed\u6cd5packageName.simpleGrammarName; \u8bed\u6cd5grammarName; \u5305\u548c\u8bed\u6cd5\u7684\u547d\u540d\u5728\u8bed\u6cd5\u540d\u79f0\u548c\u5305\u540d\u79f0 \u90e8\u5206\u4e2d\u63cf\u8ff0\u3002</p> <p>\u4f8b\u5982\uff1a</p> <p>\u8bed\u6cd5 com.sun.speech.apps.numbers; \u8bed\u6cd5 edu.unsw.med.people\uff1b \u8bed\u6cd5\u4f8b\u53e5\uff1b 3.3 \u5bfc\u5165 \u8bed\u6cd5\u5934\u53ef\u4ee5\u9009\u62e9\u6027\u5730\u5305\u542b\u5bfc\u5165\u58f0\u660e\u3002\u5bfc\u5165\u58f0\u660e\u4f4d\u4e8e\u8bed\u6cd5\u58f0\u660e\u4e4b\u540e\uff0c\u5e76\u4e14\u5fc5\u987b\u4f4d\u4e8e\u8bed\u6cd5\u4e3b\u4f53\uff08\u89c4\u5219\u5b9a\u4e49\uff09\u4e4b\u524d\u3002\u5bfc\u5165\u58f0\u660e\u5141\u8bb8\u5728\u672c\u5730\u5f15\u7528\u53e6\u4e00\u4e2a\u8bed\u6cd5\u7684\u4e00\u6761\u6216\u6240\u6709\u516c\u5171\u89c4\u5219\u3002\u5bfc\u5165\u8bed\u53e5\u7684\u683c\u5f0f\u5982\u4e0b</p> <p>\u5bfc\u5165&lt; fullyQualifiedRuleName&gt;\uff1b \u5bfc\u5165 &lt; fullGrammarName.*&gt;; \u4f8b\u5982\uff0c</p> <p>\u5bfc\u5165; \u5bfc\u5165 ; \u7b2c\u4e00\u4e2a\u4f8b\u5b50\u662f\u901a\u8fc7\u5176\u5b8c\u5168\u9650\u5b9a\u89c4\u5219\u540d\u5bfc\u5165\u5355\u4e2a\u89c4\u5219\uff1a&lt;1stTo31st&gt;\u6765\u81ea\u8bed\u6cd5\u7684\u89c4\u5219com.sun.speech.app.index\u3002\u5bfc\u5165\u7684\u89c4\u5219&lt;1stTo31st&gt;\u5fc5\u987b\u662f\u5bfc\u5165\u8bed\u6cd5\u7684\u516c\u5171\u89c4\u5219\u3002 <p>\u7b2c\u4e8c\u4e2a\u5bfc\u5165\u8bed\u53e5\u4e2d\u7684\u661f\u53f7\u7684\u4f7f\u7528\u8bf7\u6c42\u5bfc\u5165numbers\u8bed\u6cd5\u7684\u6240\u6709\u516c\u5171\u89c4\u5219\u3002\u4f8b\u5982\uff0c\u5982\u679c\u8be5\u8bed\u6cd5\u5b9a\u4e49\u4e86\u4e09\u4e2a\u516c\u5171\u89c4\u5219\uff0c\uff0c\uff0c\u90a3\u4e48\u6240\u6709,\u8fd9\u4e09\u4e2a\u89c4\u5219\u90fd\u53ef\u4ee5\u5728\u672c\u5730\u5f15\u7528\u3002 <p>\u8bf7\u6ce8\u610f\uff0c\u7531\u4e8e\u8bed\u6cd5\u540d\u79f0\u548c\u89c4\u5219\u540d\u79f0\u6216\u661f\u53f7\u90fd\u662f\u5fc5\u9700\u7684\uff0c\u56e0\u6b64\u5bfc\u5165\u8bed\u53e5\u6c38\u8fdc\u4e0d\u4f1a\u91c7\u7528\u4ee5\u4e0b\u5f62\u5f0f\uff1a</p> <p>import ; // \u4e0d\u5408\u6cd5 \u5bfc\u5165\u7684\u89c4\u5219\u53ef\u4ee5\u901a\u8fc7\u4e09\u79cd\u65b9\u5f0f\u5f15\u7528\uff1a\u901a\u8fc7\u5176\u7b80\u5355\u89c4\u5219\u540d\u79f0\uff08\u4f8b\u5982 \uff09\uff0c\u901a\u8fc7\u5176\u9650\u5b9a\u89c4\u5219\u540d\u79f0\uff08\u4f8b\u5982\uff09\uff0c\u6216\u8005\u901a\u8fc7\u5176\u5b8c\u5168\u9650\u5b9a\u89c4\u5219\u540d\u79f0\uff08\uff09\u3002 <p>\u540d\u79f0\u89e3\u6790\u884c\u4e3a\u5df2\u5728\u672c\u6587\u6863\u524d\u9762\u7684\u89e3\u6790\u89c4\u5219\u540d\u79f0\u4e2d\u5b9a\u4e49\u3002\u8bf7\u6ce8\u610f\uff0c\u5f53\u5bfc\u5165\u7684\u89c4\u5219\u59cb\u7ec8\u7531\u5176\u5b8c\u5168\u9650\u5b9a\u7684\u89c4\u5219\u540d\u79f0\u5f15\u7528\u65f6\uff0c\u5bfc\u5165\u8bed\u53e5\u662f\u53ef\u9009\u7684\u3002</p> <p>// \u5bfc\u5165 com.sun.speech.app.numbers \u662f\u53ef\u9009\u7684 &lt;\u89c4\u5219&gt; = ;"},{"location":"speech_and_language_processing/jsgf/jsgf/#4","title":"4. \u8bed\u6cd5\u4e3b\u4f53","text":""},{"location":"speech_and_language_processing/jsgf/jsgf/#41","title":"4.1 \u89c4\u5219\u5b9a\u4e49","text":"<p>\u8bed\u6cd5\u4e3b\u4f53\u5b9a\u4e49\u89c4\u5219\u3002\u6bcf\u6761\u89c4\u5219\u5728\u89c4\u5219\u5b9a\u4e49\u4e2d\u5b9a\u4e49\u3002\u89c4\u5219\u5728\u8bed\u6cd5\u4e2d\u5b9a\u4e49\u4e00\u6b21\u3002\u89c4\u5219\u5b9a\u4e49\u7684\u987a\u5e8f\u5e76\u4e0d\u91cd\u8981\u3002</p> <p>\u89c4\u5219\u5b9a\u4e49\u7684\u4e24\u79cd\u6a21\u5f0f\u662f\uff1a</p> Java<pre><code>&lt;ruleName&gt; = ruleExpansion\uff1b\npublic &lt; ruleName&gt; = ruleExpansion;\n</code></pre> <p>\u89c4\u5219\u5b9a\u4e49\u7684\u7ec4\u6210\u90e8\u5206\u5305\u62ec : * (1) \u53ef\u9009\u7684\u516c\u5171\u58f0\u660e public\u3001 * (2) \u6240\u5b9a\u4e49\u89c4\u5219\u7684\u540d\u79f0\u3001 * (3) \u7b49\u53f7 <code>=</code> * (4)\u89c4\u5219\u7684\u6269\u5c55 * (5) \u7ed3\u675f\u5206\u53f7 <code>;</code>\u3002</p> <p>\u5b9a\u4e49\u4e4b\u524d\u3001public \u5173\u952e\u5b57\u4e0e\u89c4\u5219\u540d\u79f0\u4e4b\u95f4\u3001\u7b49\u53f7\u5b57\u7b26\u5468\u56f4\u4ee5\u53ca\u5206\u53f7\u5468\u56f4\u7684\u7a7a\u683c\u5c06\u88ab\u5ffd\u7565\u3002\u89c4\u5219\u6269\u5c55\u4e2d\u7684\u7a7a\u683c\u5f88\u91cd\u8981\u3002</p> <p>\u89c4\u5219\u6269\u5c55\u5b9a\u4e49\u4e86\u89c4\u5219\u7684\u8868\u8ff0\u65b9\u5f0f\u3002\u5b83\u662f\u6807\u8bb0\uff08\u53ef\u4ee5\u8868\u8ff0\u7684\u6587\u672c\uff09\u548c\u5bf9\u5176\u4ed6\u89c4\u5219\u7684\u5f15\u7528\u7684\u903b\u8f91\u7ec4\u5408\u3002\u4f7f\u7528\u672f\u8bed\u201c\u6269\u5c55\u201d\u662f\u56e0\u4e3a\u6269\u5c55\u5b9a\u4e49\u4e86\u89c4\u5219\u5728\u8868\u8ff0\u65f6\u5982\u4f55\u6269\u5c55 - \u5355\u4e2a\u89c4\u5219\u53ef\u4ee5\u6269\u5c55\u4e3a\u8bb8\u591a\u8868\u8ff0\u5355\u8bcd\u52a0\u4e0a\u672c\u8eab\u88ab\u6269\u5c55\u7684\u5176\u4ed6\u89c4\u5219\u3002\u540e\u9762\u7684\u90e8\u5206\u5b9a\u4e49\u4e86\u5408\u6cd5\u6269\u5c55\u3002</p>"},{"location":"speech_and_language_processing/jsgf/jsgf/#411","title":"4.1.1 \u516c\u5171\u89c4\u5219","text":"<p>\u8bed\u6cd5\u4e2d\u7684\u4efb\u4f55\u89c4\u5219\u90fd\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528\u5173\u952e\u5b57\u58f0\u660e\u4e3a\u516c\u5171\u89c4\u5219public \u3002\u516c\u5171\u89c4\u5219\u6709\u4e09\u79cd\u53ef\u80fd\u7684\u7528\u9014\uff1a</p> <ul> <li>\u5b83\u53ef\u4ee5\u5728\u53e6\u4e00\u4e2a\u8bed\u6cd5\u7684\u89c4\u5219\u5b9a\u4e49\u4e2d\u901a\u8fc7\u5176\u5b8c\u5168\u9650\u5b9a\u540d\u79f0\u6216\u5bfc\u5165\u58f0\u660e\u548c\u660e\u786e\u7684\u5f15\u7528\u5f62\u5f0f\u8fdb\u884c\u5f15\u7528\u3002</li> <li>\u5b83\u53ef\u4ee5\u7528\u4f5c\u8bc6\u522b\u7684\u6709\u6548\u89c4\u5219\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u8bc6\u522b\u5668\u53ef\u4ee5\u4f7f\u7528\u8be5\u89c4\u5219\u6765\u786e\u5b9a\u53ef\u4ee5\u8bf4\u51fa\u4ec0\u4e48\u3002</li> <li>\u5b83\u53ef\u4ee5\u88ab\u672c\u5730\u5f15\u7528\uff1a\u5373\u88ab\u540c\u4e00\u8bed\u6cd5\u4e2d\u5b9a\u4e49\u7684\u4efb\u4f55\u516c\u5171\u6216\u975e\u516c\u5171\u89c4\u5219\u5f15\u7528\u3002</li> </ul> <p>\u5982\u679c\u6ca1\u6709\u516c\u5171\u58f0\u660e\uff0c\u89c4\u5219\u5c06\u9690\u5f0f\u4e3a\u79c1\u6709\u76848\u5e76\u4e14\u53ea\u80fd\u5728\u672c\u5730\u8bed\u6cd5\u4e2d\u7684\u89c4\u5219\u5b9a\u4e49\u4e2d\u5f15\u7528\u3002</p>"},{"location":"speech_and_language_processing/jsgf/jsgf/#42","title":"4.2 \u89c4\u5219\u6269\u5c55","text":"<p>\u6700\u7b80\u5355\u7684\u89c4\u5219\u6269\u5c55\u662f\u5bf9 <code>token</code> \u7684\u5f15\u7528\u4e0e\u5bf9\u5176\u4ed6\u89c4\u5219\u7684\u5f15\u7528\u3002\u4f8b\u5982\uff0c</p> Java<pre><code>&lt;a&gt; = elephant\uff1b\n&lt;b&gt; = &lt;x&gt;\uff1b\n&lt;c&gt; = &lt;com.acme.grammar.y&gt;;\n</code></pre> <p>\u8be5\u89c4\u5219 <code>&lt;a&gt;</code> \u6269\u5c55\u4e3a\u5355\u4e2a\u6807\u8bb0 \"<code>elephant</code>\"\u3002\u56e0\u6b64\uff0c\u8981\u8bf4\u8bdd\uff0c<code>&lt;a&gt;</code> \u7528\u6237\u5fc5\u987b\u8bf4\u51fa\u5355\u8bcd \"<code>elephant</code>\"\u3002</p> <p>\u8be5\u89c4\u5219 <code>&lt;b&gt;</code> \u6269\u5c55\u4e3a <code>&lt;x&gt;</code>\u3002\u8fd9\u610f\u5473\u7740\u8981\u8bf4 <code>&lt;b&gt;</code>\uff0c\u7528\u6237\u5fc5\u987b\u8bf4\u4e00\u4e9b\u7b26\u5408\u89c4\u5219 <code>&lt;x&gt;</code> \u7684\u5185\u5bb9\u3002\u540c\u6837\uff0c\u8981\u8bf4 \u89c4\u5219 <code>&lt;c&gt;</code>\uff0c\u7528\u6237\u5fc5\u987b\u8bf4\u4e00\u4e9b\u7b26\u5408\u89c4\u5219 <code>&lt;com.acme.grammar.y&gt;</code> \u7684\u5185\u5bb9\u3002</p> <p>\u66f4\u6b63\u5f0f\u5730\u8bf4\uff0c\u4ee5\u4e0b\u662f\u5408\u6cd5\u7684\u6269\u5c55\u3002</p> <ul> <li>\u4efb\u4f55 token\u3002</li> <li>\u5bf9\u540c\u4e00\u8bed\u6cd5\u4e2d\u5b9a\u4e49\u7684\u4efb\u4f55\u516c\u5171\u6216\u975e\u516c\u5171\u89c4\u5219\u7684\u5f15\u7528\u3002</li> <li>\u5bf9\u5df2\u5bfc\u5165\u5f53\u524d\u8bed\u6cd5\u7684\u53e6\u4e00\u4e2a\u8bed\u6cd5\u7684\u4efb\u4f55\u516c\u5171\u89c4\u5219\u7684\u5f15\u7528\u3002</li> <li>\u5bf9\u5df2\u5bfc\u5165\u5f53\u524d\u8bed\u6cd5\u7684\u53e6\u4e00\u4e2a\u8bed\u6cd5\u7684\u516c\u5171\u89c4\u5219\u7684\u5f15\u7528\uff0c\u5f53\u4f7f\u7528\u5176\u5b8c\u5168\u9650\u5b9a\u89c4\u5219\u540d\uff08\u5e26\u6216\u4e0d\u5e26\u5bfc\u5165\uff09\u65f6\u3002</li> </ul> <p>\u8fd9\u4e9b\u5f15\u7528\u7b56\u7565\u662f\u672c\u5730\u5b9a\u4e49\u7684\uff0c\u5373\u7531\u5f53\u524d\u89c4\u5219\u7684\u8303\u56f4\u5b9a\u4e49\u3002\u4f8b\u5982\uff0c<code>grammar1</code> \u4e2d\u7684\u89c4\u5219\u53ef\u4ee5\u5408\u6cd5\u5730\u5f15\u7528 <code>grammar2</code> \u7684\u516c\u5171\u89c4\u5219\uff0c\u800c\u540e\u8005\u53c8\u5f15\u7528\u975e\u516c\u5171\u89c4\u5219 <code>grammar2</code>\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u4e00\u4e2a\u89c4\u5219\u53ef\u4ee5\u901a\u8fc7\u53e6\u4e00\u4e2a\u8bed\u6cd5\u7684\u516c\u5171\u89c4\u5219\u95f4\u63a5\u5f15\u7528\u53e6\u4e00\u4e2a\u8bed\u6cd5\u7684\u79c1\u6709\u89c4\u5219\u3002</p> <p>\u7a7a\u5b9a\u4e49\u662f\u4e0d\u5408\u6cd5\u7684\u3002 Java<pre><code>&lt;d&gt; = ; // \u4e0d\u5408\u6cd5\n</code></pre></p> <p>\u5c06\u89c4\u5219\u5b9a\u4e49\u4e3a \"<code>&lt;NULL&gt;</code>\"\u4e0e <code>&lt;VOID&gt;</code> \u90fd\u662f\u5408\u6cd5\u7684\u3002</p> Java<pre><code>&lt;e&gt; = &lt;NULL&gt;; //\u5408\u6cd5\n&lt;f&gt; = &lt;VOID&gt;; //\u5408\u6cd5\n</code></pre> <p>\u4ee5\u4e0b\u5404\u8282\u89e3\u91ca\u4e86\u5982\u4f55\u4f7f\u7528\u5408\u6cd5\u6269\u5c55\u7684\u903b\u8f91\u7ec4\u5408\u6765\u5b9a\u4e49\u66f4\u590d\u6742\u7684\u89c4\u5219\uff1a</p> <ul> <li>\u7ec4\u6210\uff1a\u6269\u5c55\u5e8f\u5217\u548c\u66ff\u4ee3\u6269\u5c55\u96c6\u3002</li> <li>\u5206\u7ec4\uff1a\u4f7f\u7528\u5706\u62ec\u53f7\u548c\u65b9\u62ec\u53f7\u3002</li> <li>\u4e00\u5143\u8fd0\u7b97\u7b26\uff1a\u7528\u4e8e\u91cd\u590d\u6269\u5c55\u7684 \u3002</li> <li>\u5c06\u7279\u5b9a\u5e94\u7528\u7a0b\u5e8f\u7684\u6807\u7b7e\u9644\u52a0\u5230\u6269\u5c55\u4e2d\u3002</li> </ul>"},{"location":"speech_and_language_processing/jsgf/jsgf/#43","title":"4.3 \u7ec4\u6210","text":""},{"location":"speech_and_language_processing/jsgf/jsgf/#431","title":"4.3.1 \u5e8f\u5217","text":"<p>\u89c4\u5219\u53ef\u4ee5\u7531\u4e00\u7cfb\u5217\u6269\u5c55\u5b9a\u4e49\u3002\u5408\u6cd5\u6269\u5c55\u5e8f\u5217\u672c\u8eab\u5c31\u662f\u5408\u6cd5\u6269\u5c55\uff0c\u6bcf\u4e2a\u6269\u5c55\u90fd\u7531\u7a7a\u683c\u5206\u9694\u3002\u4f8b\u5982\uff0c\u7531\u4e8e\u6807\u8bb0 token \u548c\u89c4\u5219\u5f15\u7528\u90fd\u662f\u5408\u6cd5\u6269\u5c55\uff0c\u56e0\u6b64\u4ee5\u4e0b\u662f\u5408\u6cd5\u7684\u89c4\u5219\u5b9a\u4e49\u3002</p> Java<pre><code>&lt;where&gt; = I live in Boston;\n&lt;statement&gt; = this &lt;object&gt; is &lt;OK&gt;\uff1b\n</code></pre> <p>\u8981\u8bf4\u51fa\u4e00\u4e2a\u5e8f\u5217\uff0c\u5fc5\u987b\u6309\u7167\u5b9a\u4e49\u7684\u987a\u5e8f\u8bf4\u51fa\u5e8f\u5217\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\u3002 * \u5728\u7b2c\u4e00\u4e2a\u793a\u4f8b\u4e2d\uff0c\u8981\u8bf4\u51fa\u89c4\u5219 <code>&lt;where&gt;</code>\uff0c\u8bf4\u8bdd\u8005\u5fc5\u987b\u6309\u7167\u8be5\u987a\u5e8f\u8bf4\u51fa\u5355\u8bcd \"<code>I live in Boston</code>\"\u3002 * \u7b2c\u4e8c\u4e2a\u793a\u4f8b\u5c06 token \u4e0e\u89c4\u5219 <code>&lt;object&gt;</code> \u548c <code>&lt;OK&gt;</code> \u5f15\u7528\u6df7\u5408\u5728\u4e00\u8d77\u3002\u8981\u8bf4\u51fa\u89c4\u5219 <code>&lt;statement&gt;</code>\uff0c\u7528\u6237\u5fc5\u987b\u5728\u8bf4\u5b8c \"<code>this</code>\" \u540e\uff0c\u8bf4\u51fa\u4e0e\u5339\u914d <code>&lt;object&gt;</code> \u7684\u5185\u5bb9\uff0c\u7136\u540e\u8bf4 \"<code>is</code>\"\uff0c\u6700\u540e\u8bf4\u4e0e <code>&lt;OK&gt;</code> \u5339\u914d\u7684\u5185\u5bb9\u3002</p> <p>\u5e8f\u5217\u4e2d\u7684\u5143\u7d20\u53ef\u4ee5\u662f\u4efb\u4f55\u5408\u6cd5\u7684\u6269\u5c55\u3002\u8fd9\u5305\u62ec\u4e0b\u6587\u63cf\u8ff0\u7684\u66ff\u4ee3\u9879\u3001\u7ec4\u7b49\u7ed3\u6784\u3002</p>"},{"location":"speech_and_language_processing/jsgf/jsgf/#432","title":"4.3.2 \u66ff\u4ee3\u65b9\u6848","text":"<p>\u89c4\u5219\u53ef\u4ee5\u5b9a\u4e49\u4e3a\u4e00\u7ec4\u7531\u7ad6\u7ebf\u5b57\u7b26 \"<code>|</code>\" \u5206\u9694\u7684\u5907\u9009\u6269\u5c55\uff0c\u4e5f\u53ef\u4ee5\u7531\u7a7a\u683c\u5206\u9694\u3002\u4f8b\u5982\uff1a</p> Java<pre><code>&lt;name&gt; = Michael | Yuriko | Mary | Duke | &lt;otherNames&gt;;\n</code></pre> <p>\u8981\u8bf4\u51fa\u89c4\u5219 <code>&lt;name&gt;</code>\uff0c\u8bf4\u8bdd\u8005\u5fc5\u987b\u8bf4\u51fa\u5907\u9009\u96c6\u5408\u4e2d\u7684\u4e00\u4e2a\u4e14\u53ea\u80fd\u8bf4\u51fa\u4e00\u4e2a\u3002\u4f8b\u5982\uff0c\u8bf4\u8bdd\u8005\u53ef\u4ee5\u8bf4 \"<code>Michael</code>\"\u3001\"<code>Yuriko</code>\"\u3001\"<code>Mary</code>\"\u3001\"<code>Duke</code>\" \u6216\u4efb\u4f55\u7b26\u5408\u89c4\u5219 <code>&lt;otherNames&gt;</code>\u7684\u8bcd\u3002\u4f46\u662f\uff0c\u8bf4\u8bdd\u8005\u4e0d\u80fd\u8bf4 \"<code>Mary Duke</code>\"\u3002</p> <p>\u5e8f\u5217\u7684\u4f18\u5148\u7ea7\u9ad8\u4e8e\u66ff\u4ee3\u65b9\u6848\u3002\u4f8b\u5982:</p> Java<pre><code>&lt;country&gt;= South Africa | New Zealand | Papua New Guinea;\n</code></pre> <p>\u4e0a\u9762\u7684\u89c4\u5219\u662f\u4e00\u7ec4\u4e09\u4e2a\u5907\u9009\u65b9\u6848\uff0c\u6bcf\u4e2a\u65b9\u6848\u6307\u5b9a\u4e00\u4e2a\u56fd\u5bb6\u3002</p> <p>\u7a7a\u5185\u5bb9\u7684\u66ff\u4ee3\u65b9\u6848\u662f\u4e0d\u5408\u6cd5\u3002</p> Java<pre><code>&lt;name&gt; = Michael | | Mary; // \u4e0d\u5408\u6cd5\n&lt;name&gt; = Michael | Mary | ; // \u4e0d\u5408\u6cd5\n</code></pre>"},{"location":"speech_and_language_processing/jsgf/jsgf/#433","title":"4.3.3 \u6743\u91cd","text":"<p>\u5e76\u975e\u6240\u6709\u7684\u8bed\u6cd5\u8bcd\u8bed\u90fd\u5177\u6709\u540c\u7b49\u6982\u7387\u3002\u53ef\u4ee5\u5c06\u6743\u91cd\u9644\u52a0\u5230\u5907\u9009\u96c6\u7684\u5143\u7d20\u4e0a\uff0c\u4ee5\u8868\u793a\u6bcf\u4e2a\u5907\u9009\u88ab\u8bf4\u51fa\u6765\u7684\u53ef\u80fd\u6027\u3002\u6743\u91cd\u662f\u4e00\u4e2a\u6d6e\u70b9\u6570\uff0c\u5468\u56f4\u662f\u6b63\u659c\u6760\uff0c\u4f8b\u5982 /3.14/\u3002\u6743\u91cd\u8d8a\u9ad8\uff0c\u5143\u7d20\u88ab\u8bf4\u51fa\u6765\u7684\u53ef\u80fd\u6027\u5c31\u8d8a\u5927\u3002\u6743\u91cd\u653e\u5728\u5907\u9009\u96c6\u7684\u6bcf\u4e2a\u5143\u7d20\u4e4b\u524d\u3002\u4f8b\u5982\uff1a</p> Bash<pre><code>&lt;size&gt; = /10/ small | /2/ medium | /1/ large;\n&lt;color&gt; = /0.5/ red | /0.1/ navy blue | /0.2/ sea green;\n&lt;action&gt; = please (/20/ save files | /1/ delete all files);\n&lt;place&gt; = /20/ &lt;city&gt; | /5/ &lt;country&gt;;\n</code></pre> <p>\u6743\u91cd\u5e94\u8be5\u53cd\u6620\u4e00\u7ec4\u5907\u9009\u8bcd\u7684\u5143\u7d20\u7684\u51fa\u73b0\u6a21\u5f0f\u3002\u5728\u7b2c\u4e00\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u8bed\u6cd5\u4f5c\u8005\u6307\u51fa <code>small</code>\u88ab\u8bf4\u51fa\u7684\u53ef\u80fd\u6027\u662f <code>large</code> \u7684 10 \u500d\uff0c\u662f <code>medium</code> \u7684 5 \u500d\u3002</p> <p>\u6307\u5b9a\u6743\u91cd\u65f6\u5fc5\u987b\u6ee1\u8db3\u4ee5\u4e0b\u6761\u4ef6\uff1a</p> <ul> <li>\u5982\u679c\u4e3a\u5907\u9009\u65b9\u6848\u96c6\u5408\u4e2d\u7684\u4e00\u4e2a\u9879\u76ee\u6307\u5b9a\u4e86\u6743\u91cd\uff0c\u5219\u5fc5\u987b\u4e3a\u6bcf\u4e2a\u9879\u76ee\u6307\u5b9a\u4e00\u4e2a\u6743\u91cd\uff08\u5168\u6709\u6216\u5168\u65e0\u89c4\u5219\uff09\u3002</li> <li>\u6743\u91cd\u662f\u6d6e\u70b9\u6570\u3002\u4f8b\u5982\uff0c56\u30010.056\u30013.14e3\u30018f\u3002</li> <li>\u659c\u7ebf\u5185\u53ea\u5141\u8bb8\u4f7f\u7528\u6d6e\u70b9\u6570\u548c\u7a7a\u683c\u3002</li> <li>\u6743\u91cd\u5fc5\u987b\u4e3a\u96f6\u6216\u66f4\u5927\u3002\u96f6\u6743\u91cd\u8868\u793a\u8be5\u9879\u76ee\u6c38\u8fdc\u4e0d\u80fd\u88ab\u8bf4\u51fa\uff1a\u76f8\u5f53\u4e8e\u7528\u66ff\u6362\u8be5\u9879\u76ee <code>&lt;VOID&gt;</code>\u3002\uff08\u96f6\u6743\u91cd\u5728\u5f00\u53d1\u8bed\u6cd5\u65f6\u5f88\u6709\u7528\u3002\uff09</li> <li>\u81f3\u5c11\u9700\u8981\u4e00\u4e2a\u975e\u96f6\u6b63\u6743\u91cd\u3002 \u9002\u5f53\u7684\u6743\u91cd\u5f88\u96be\u786e\u5b9a\uff0c\u731c\u6d4b\u6743\u91cd\u5e76\u4e0d\u603b\u662f\u80fd\u63d0\u9ad8\u8bc6\u522b\u6027\u80fd\u3002\u6709\u6548\u7684\u6743\u91cd\u901a\u5e38\u662f\u901a\u8fc7\u7814\u7a76\u771f\u5b9e\u7684\u8bed\u97f3\u548c\u6587\u672c\u6570\u636e\u83b7\u5f97\u7684\u3002</li> </ul> <p>\u5e76\u975e\u6240\u6709\u8bc6\u522b\u6a21\u5757\u90fd\u4f1a\u5728\u8bc6\u522b\u8fc7\u7a0b\u4e2d\u4f7f\u7528\u6743\u91cd\u3002\u4f46\u662f\uff0c\u8bc6\u522b\u6a21\u5757\u81f3\u5c11\u9700\u8981\u786e\u4fdd\u4e0d\u4f1a\u8bf4\u51fa\u4efb\u4f55\u6743\u91cd\u4e3a\u96f6\u7684\u66ff\u4ee3\u8bcd\u3002</p>"},{"location":"speech_and_language_processing/jsgf/jsgf/#44","title":"4.4 \u5206\u7ec4","text":""},{"location":"speech_and_language_processing/jsgf/jsgf/#441","title":"4.4.1 \u5706\u62ec\u53f7()","text":"<p>\u4efb\u4f55\u5408\u6cd5\u7684\u6269\u5c55\u90fd\u53ef\u4ee5\u4f7f\u7528\u5706\u62ec\u53f7 <code>()</code> \u8fdb\u884c\u660e\u786e\u5206\u7ec4\u3002\u5206\u7ec4\u5177\u6709\u8f83\u9ad8\u7684\u4f18\u5148\u7ea7\uff0c\u56e0\u6b64\u53ef\u7528\u4e8e\u786e\u4fdd\u89c4\u5219\u7684\u6b63\u786e\u89e3\u91ca\u3002\u5b83\u8fd8\u6709\u52a9\u4e8e\u63d0\u9ad8\u6e05\u6670\u5ea6\u3002\u4f8b\u5982\uff0c\u7531\u4e8e\u5e8f\u5217\u7684\u4f18\u5148\u7ea7\u9ad8\u4e8e\u66ff\u4ee3\u9879\uff0c\u56e0\u6b64\u5728\u4ee5\u4e0b\u89c4\u5219\u5b9a\u4e49\u4e2d\u9700\u8981\u4f7f\u7528\u62ec\u53f7\uff0c\u4ee5\u4fbf <code>please close</code> \u548c <code>please delete</code> \u662f\u5408\u6cd5\u7684\u3002</p> Bash<pre><code>&lt;action&gt; = please (open | close | delete);\n</code></pre> <p>\u4e0b\u9762\u7684\u793a\u4f8b\u663e\u793a\u4e86\u4e09\u4e2a\u5143\u7d20\u7684\u5e8f\u5217\uff0c\u6bcf\u4e2a\u5143\u7d20\u90fd\u662f\u4e00\u7ec4\u7528\u62ec\u53f7\u62ec\u8d77\u6765\u7684\u66ff\u4ee3\u89c4\u5219\uff0c\u4ee5\u786e\u4fdd\u6b63\u786e\u5206\u7ec4\u3002</p> Bash<pre><code>&lt;command&gt; = (open | close) (windows | doors) \n(immediately | later);\n</code></pre> <p>\u8981\u8bf4\u51fa\u5339\u914d\u7684 <code>&lt;command&gt;</code> \u5185\u5bb9\uff0c\u8bf4\u8bdd\u8005\u5fc5\u987b\u4ece\u4e09\u7ec4\u5907\u9009\u65b9\u6848\u4e2d\u5404\u8bf4\u51fa\u4e00\u4e2a\u5355\u8bcd\uff1a\u4f8b\u5982\uff0c<code>open windows immediately</code>  \u6216 <code>close doors later</code>\u3002</p> <p>\u5982\u679c\u5206\u7ec4\u56f4\u7ed5\u5355\u4e2a\u6269\u5c55\uff0c\u5219\u5b9e\u4f53\u88ab\u5b9a\u4e49\u4e3a\u4e00\u4e2a\u9879\u76ee11\u7684\u5e8f\u5217\u3002\u4f8b\u5982\uff1a</p> Text Only<pre><code>( start )\n( &lt;end&gt; )\n</code></pre> <p>\u7a7a\u62ec\u53f7\u4e0d\u5408\u6cd5\u3002 Text Only<pre><code>() // \u4e0d\u5408\u6cd5\n</code></pre></p>"},{"location":"speech_and_language_processing/jsgf/jsgf/#442","title":"4.4.2 \u65b9\u62ec\u53f7 []","text":"<p>\u65b9\u62ec\u53f7\u53ef\u4ee5\u653e\u5728\u4efb\u4f55\u89c4\u5219\u5b9a\u4e49\u5468\u56f4\uff0c\u4ee5\u8868\u660e\u5185\u5bb9\u662f\u53ef\u9009\u7684\u3002\u5728\u5176\u4ed6\u65b9\u9762\uff0c\u5b83\u76f8\u5f53\u4e8e\u5206\u7ec4\u7528\u7684\u5706\u62ec\u53f7\uff0c\u5e76\u4e14\u5177\u6709\u76f8\u540c\u7684\u4f18\u5148\u7ea7\u3002</p> <p>\u4f8b\u5982\uff0c</p> Bash<pre><code>&lt;polite&gt; = please | kindly |oh mighty computer;\npublic &lt;command&gt; = [ &lt;polite&gt; ] don't crash;\n</code></pre> <p>\u5141\u8bb8\u7528\u6237\u8bf4 <code>don't crash</code>\uff0c\u5e76\u53ef\u9009\u62e9\u6dfb\u52a0\u4e00\u79cd\u793c\u8c8c\u5f62\u5f0f\uff0c\u4f8b\u5982 <code>oh mighty computer don't crash</code>\u201d\u6216\u201c<code>kindly don't crash</code>\u3002</p> <p>\u7a7a\u62ec\u53f7\u4e0d\u5408\u6cd5\u3002</p> Bash<pre><code>[ ] // \u4e0d\u5408\u6cd5\n</code></pre>"},{"location":"speech_and_language_processing/jsgf/jsgf/#45","title":"4.5 \u4e00\u5143\u8fd0\u7b97\u7b26","text":"<p>JSpeech \u6587\u6cd5\u683c\u5f0f\u4e2d\u6709\u4e09\u4e2a\u4e00\u5143\u8fd0\u7b97\u7b26\uff1a<code>Kleene \u95ed\u5305</code>\u3001\u52a0\u6cd5\u8fd0\u7b97\u7b26\u548c\u6807\u7b7e\u3002\u4e00\u5143\u8fd0\u7b97\u7b26\u5177\u6709\u4ee5\u4e0b\u5171\u540c\u7279\u70b9\uff1a</p> <ul> <li>\u4e00\u5143\u8fd0\u7b97\u7b26\u53ef\u4ee5\u6dfb\u52a0\u5230\u4efb\u4f55\u5408\u6cd5\u7684\u89c4\u5219\u6269\u5c55\u3002</li> <li>\u5b83\u4eec\u5177\u6709\u5f88\u9ad8\u7684\u4f18\u5148\u7ea7\uff1a\u5b83\u4eec\u6dfb\u52a0\u5230\u7d27\u63a5\u5728\u524d\u7684\u89c4\u5219\u6269\u5c55\u3002</li> <li>\u4efb\u4f55\u89c4\u5219\u6269\u5c55\u53ea\u80fd\u9644\u52a0\u4e00\u4e2a\u4e00\u5143\u8fd0\u7b97\u7b26\uff08\u6807\u7b7e\u7684\u6b64\u89c4\u5219\u6709\u4e2a\u4f8b\u5916\uff09\u3002</li> <li>\u89c4\u5219\u6269\u5c55\u548c\u9644\u52a0\u8fd0\u7b97\u7b26\u4e4b\u95f4\u7684\u7a7a\u683c\u5c06\u88ab\u5ffd\u7565\u3002</li> </ul> <p>\u7531\u4e8e\u4e00\u5143\u8fd0\u7b97\u7b26\u7684\u4f18\u5148\u7ea7\u9ad8\u4e8e\u5e8f\u5217\u548c\u66ff\u4ee3\u9879\u7684\u4f18\u5148\u7ea7\uff0c\u56e0\u6b64\u5fc5\u987b\u4f7f\u7528\u62ec\u53f7\u5c06\u5e8f\u5217\u6216\u66ff\u4ee3\u9879\u96c6\u62ec\u8d77\u6765\uff0c\u4ee5\u5c06\u8fd0\u7b97\u7b26\u9644\u52a0\u5230\u6574\u4e2a\u5b9e\u4f53\u3002</p>"},{"location":"speech_and_language_processing/jsgf/jsgf/#451-kleene","title":"4.5.1 Kleene \u95ed\u5305\u8fd0\u7b97\u7b26 *","text":"<p>\u6269\u5c55\u540e\u7684\u89c4\u5219\u8ddf\u7740\u661f\u53f7\u7b26\u53f7\uff0c\u8868\u793a\u6269\u5c55\u7684\u89c4\u5219\u53ef\u80fd\u88ab\u8bf4\u51fa\u96f6\u6b21\u6216\u591a\u6b21\u3002\u661f\u53f7\u7b26\u53f7\u88ab\u79f0\u4e3a <code>Kleene \u661f\u53f7</code>\uff08\u4ee5 Stephen Cole Kleene \u547d\u540d\uff0c\u4ed6\u662f\u8be5\u7b26\u53f7\u7684\u9996\u521b\u8005\uff09\u3002\u4f8b\u5982\uff1a</p> Bash<pre><code>&lt;command&gt; = &lt;polite&gt;* don't crash;\n</code></pre> <p>\u5141\u8bb8\u7528\u6237\u8bf4 <code>please don't crash</code>\u3001<code>oh mighty computer please please don't crash</code> \u4e4b\u7c7b\u7684\u8bdd\uff0c\u6216\u8005\u7528 <code>don't crash</code> \u6765\u5ffd\u7565\u793c\u8c8c\u3002</p> <p>\u4f5c\u4e3a\u4e00\u5143\u8fd0\u7b97\u7b26\uff0c\u6b64\u7b26\u53f7\u5177\u6709\u9ad8\u4f18\u5148\u7ea7\u3002\u4f8b\u5982\uff0c\u5728</p> Bash<pre><code>&lt;song&gt; = sing New York *;\n</code></pre> <p>\u8be5\u8fd0\u7b97\u7b26\u9002\u7528\u4e8e\u6700\u76f4\u63a5\u7684\u5408\u6cd5\u6269\u5c55\uff1a\u6807\u8bb0 <code>York</code>\u3002\u56e0\u6b64\uff0c<code>&lt;song&gt;</code> \u7528\u6237\u53ef\u4ee5\u8bf4 <code>sing New York</code>\u3001<code>sing New</code> \u548c <code>sing New York York York</code>\uff0c\u4f46\u4e0d\u80fd\u8bf4 <code>sing New York New York</code>\u3002\u5f15\u53f7\u6216\u62ec\u53f7\u53ef\u7528\u4e8e\u4fee\u6539 * \u8fd0\u7b97\u7b26\u7684\u8303\u56f4\u3002\u4f8b\u5982\uff0c</p> Bash<pre><code>&lt;song&gt; = sing ( New York )*;\n</code></pre> <p>\u786e\u5b9e\u5339\u914d <code>sing New York *;</code>\u3002</p>"},{"location":"speech_and_language_processing/jsgf/jsgf/#452","title":"4.5.2 \u52a0\u53f7\u8fd0\u7b97\u7b26 +","text":"<p>\u89c4\u5219\u6269\u5c55\u540e\u8ddf\u52a0\u53f7\uff0c\u8868\u793a\u8be5\u6269\u5c55\u53ef\u80fd\u4f1a\u88ab\u8bf4\u4e00\u6b21\u6216\u591a\u6b21\u3002\u4f8b\u5982\uff0c</p> Bash<pre><code>&lt;command&gt; = &lt;polite&gt;+ don't crash;\n</code></pre> <p>\u9700\u8981\u81f3\u5c11\u4e00\u79cd\u793c\u8c8c\u5f62\u5f0f\u3002\u56e0\u6b64\uff0c\u5b83\u5141\u8bb8\u7528\u6237\u8bf4\u201c\u8bf7\u4e0d\u8981\u5d29\u6e83\u201d\u3002\u4f46\u662f\uff0c\u201c\u4e0d\u8981\u5d29\u6e83\u201d\u662f\u4e0d\u5408\u6cd5\u7684\u3002</p>"},{"location":"speech_and_language_processing/jsgf/jsgf/#46","title":"4.6 \u6807\u7b7e","text":"<p>\u6807\u7b7e\u4e3a\u8bed\u6cd5\u7f16\u5199\u8005\u63d0\u4f9b\u4e86\u4e00\u79cd\u673a\u5236\uff0c\u53ef\u4ee5\u5c06\u7279\u5b9a\u4e8e\u5e94\u7528\u7a0b\u5e8f\u7684\u4fe1\u606f\u9644\u52a0\u5230\u89c4\u5219\u5b9a\u4e49\u7684\u90e8\u5206\u3002\u5e94\u7528\u7a0b\u5e8f\u901a\u5e38\u4f7f\u7528\u6807\u7b7e\u6765\u7b80\u5316\u6216\u589e\u5f3a\u8bc6\u522b\u7ed3\u679c\u7684\u5904\u7406\u3002</p> <p>\u6807\u7b7e\u9644\u4ef6\u4e0d\u4f1a\u5f71\u54cd\u8bed\u6cd5\u7684\u8bc6\u522b\u3002\u76f8\u53cd\uff0c\u6807\u7b7e\u4f1a\u9644\u52a0\u5230\u8bc6\u522b\u5668\u8fd4\u56de\u7ed9\u5e94\u7528\u7a0b\u5e8f\u7684\u7ed3\u679c\u5bf9\u8c61\u4e0a\u3002\u8bc6\u522b\u5668\u7684\u8f6f\u4ef6\u63a5\u53e3\u5b9a\u4e49\u4e86\u63d0\u4f9b\u6807\u7b7e\u7684\u673a\u523612\u3002</p> <p>\u6807\u7b7e\u662f\u4e00\u5143\u8fd0\u7b97\u7b26\u3002\u56e0\u6b64\uff0c\u5b83\u53ef\u4ee5\u9644\u52a0\u5230\u4efb\u4f55\u5408\u6cd5\u7684\u89c4\u5219\u6269\u5c55\u4e2d\u3002\u6807\u7b7e\u662f\u4e00\u4e2a\u7531\u82b1\u62ec\u53f7 <code>{}</code> \u5206\u9694\u7684\u5b57\u7b26\u4e32\u3002\u62ec\u53f7\u5185\u7684\u6240\u6709\u5b57\u7b26\u90fd\u88ab\u89c6\u4e3a\u6807\u7b7e\u7684\u4e00\u90e8\u5206\uff0c\u5305\u62ec\u7a7a\u683c\u3002\u7a7a\u62ec\u53f7 <code>{}</code> \u662f\u5408\u6cd5\u6807\u7b7e\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6807\u7b7e\u5e94\u88ab\u89e3\u91ca\u4e3a\u96f6\u957f\u5ea6\u5b57\u7b26\u4e32\uff08Java \u7f16\u7a0b\u8bed\u8a00\u4e2d\u7684\u201c\u201d\uff09\u3002</p> <p>\u8981\u5728\u5f15\u53f7\u4e2d\u5305\u542b\u7ed3\u675f\u62ec\u53f7\u5b57\u7b26\uff0c\u5fc5\u987b\u4f7f\u7528\u53cd\u659c\u6760 <code>\\</code> \u5b57\u7b26\u5bf9\u5176\u8fdb\u884c\u8f6c\u4e49\u3002\u8981\u5305\u542b\u53cd\u659c\u6760\u5b57\u7b26\uff0c\u4e5f\u5fc5\u987b\u4f7f\u7528\u53cd\u659c\u6760\u5bf9\u5176\u8fdb\u884c\u8f6c\u4e49\u3002\u4f8b\u5982\uff0c</p> Bash<pre><code>{ {nasty \\\\looking\\\\ tag\\} }\n</code></pre> <p>\u88ab\u5904\u7406\u4e3a\u4ee5\u4e0b\u5b57\u7b26\u4e32\uff1a</p> Bash<pre><code>{nasty \\looking\\ tag}\n</code></pre> <p>\u8be5\u6807\u7b7e\u9644\u52a0\u5230\u7d27\u63a5\u5728\u524d\u7684\u89c4\u5219\u6269\u5c55\uff08\u4e2d\u95f4\u7684\u7a7a\u683c\u5c06\u88ab\u5ffd\u7565\uff09\u3002\u4f8b\u5982\uff1a Bash<pre><code>&lt;rule&gt; = &lt;action&gt; {tag in here};\n&lt;command&gt;= please (open {OPEN} | close {CLOSE}) the file;\n&lt;country&gt; = Australia {Oz} | (United States) {USA} |\nAmerica  {USA}  | (U S of A) {USA};\n</code></pre></p> <p>\u4f5c\u4e3a\u4e00\u5143\u8fd0\u7b97\u7b26\uff0c\u6807\u7b7e\u9644\u52a0\u7684\u4f18\u5148\u7ea7\u9ad8\u4e8e\u5e8f\u5217\u548c\u66ff\u4ee3\u9879\u3002\u4f8b\u5982\uff0c\u5728</p> Bash<pre><code>&lt;action&gt; = book | magazine | newspaper {thing};\n</code></pre> <p><code>thing</code> \u6807\u7b7e\u4ec5\u9644\u52a0\u5230\u201cnewspaper\u201d\u6807\u8bb0\u3002\u53ef\u4ee5\u4f7f\u7528\u62ec\u53f7\u6765\u4fee\u6539\u6807\u7b7e\u9644\u52a0\uff1a</p> Bash<pre><code>&lt;action&gt; = (book | magazine | newspaper) {thing};\n</code></pre> <p>\u4e0e\u5176\u4ed6\u4e00\u5143\u8fd0\u7b97\u7b26\u4e0d\u540c\uff0c\u89c4\u5219\u6269\u5c55\u540e\u53ef\u4ee5\u6709\u591a\u4e2a\u6807\u7b7e\u3002\u4f8b\u5982\uff0c Bash<pre><code>&lt;OKRule&gt; = &lt;action&gt; {tag1} {tag2} {tag3}; // legal\n</code></pre></p> <p>\u8fd9\u88ab\u89e3\u91ca\u4e3a\u597d\u50cf\u4f7f\u7528\u4e86\u62ec\u53f7\uff1a Bash<pre><code>&lt;OKRule&gt; = ((&lt;action&gt; {tag1}) {tag2}) {tag3}; //\u5408\u6cd5\n</code></pre></p> <p>\u6b64\u8bed\u6cd5\u4fbf\u5229\u4ec5\u5141\u8bb8\u7528\u4e8e\u6807\u7b7e\u3002\u4ee5\u4e0b\u60c5\u51b5\u4e0d\u5141\u8bb8\uff1a Bash<pre><code>&lt;badRule&gt; = &lt;action&gt; * {tag1}; // \u4e0d\u5408\u6cd5\n&lt;badRule&gt; = &lt;action&gt; {tag1} +; // \u4e0d\u5408\u6cd5\n</code></pre></p>"},{"location":"speech_and_language_processing/jsgf/jsgf/#461","title":"4.6.1 \u4f7f\u7528\u6807\u7b7e","text":"<p>\u6807\u7b7e\u53ef\u4ee5\u7b80\u5316\u8bc6\u522b\u7ed3\u679c\u7684\u5904\u7406\uff0c\u4ece\u800c\u7b80\u5316\u5e94\u7528\u7a0b\u5e8f\u7684\u7f16\u5199\u3002\u6807\u7b7e\u7684\u5185\u5bb9\u4ee5\u53ca\u6807\u7b7e\u7684\u4f7f\u7528\u5b8c\u5168\u7531\u5f00\u53d1\u4eba\u5458\u81ea\u884c\u51b3\u5b9a\u3002</p> <p>\u6807\u7b7e\u7684\u4e00\u4e2a\u91cd\u8981\u7528\u9014\u662f\u56fd\u9645\u5316\u5e94\u7528\u7a0b\u5e8f\u3002\u4ee5\u4e0b\u662f\u56db\u79cd\u8bed\u6cd5\u7684\u89c4\u5219\u5b9a\u4e49\u793a\u4f8b\uff0c\u6bcf\u79cd\u8bed\u6cd5\u9488\u5bf9\u4e00\u79cd\u8bed\u8a00\u3002\u5e94\u7528\u7a0b\u5e8f\u5c06\u7528\u6237\u6240\u8bf4\u8bed\u8a00\u7684\u8bed\u6cd5\u52a0\u8f7d\u5230\u9002\u5f53\u7684\u8bc6\u522b\u5668\u4e2d\u3002\u6807\u7b7e\u5728\u6240\u6709\u8bed\u8a00\u4e2d\u90fd\u4fdd\u6301\u4e0d\u53d8\uff0c\u4ece\u800c\u7b80\u5316\u4e86\u5904\u7406\u7ed3\u679c\u7684\u5e94\u7528\u7a0b\u5e8f\u8f6f\u4ef6\u3002\u901a\u5e38\uff0c\u8bed\u6cd5\u540d\u79f0\u5c06\u5305\u542b\u8bed\u8a00\u6807\u8bc6\u7b26\uff0c\u4ee5\u4fbf\u53ef\u4ee5\u901a\u8fc7\u7f16\u7a0b\u65b9\u5f0f\u5b9a\u4f4d\u548c\u52a0\u8f7d\u5b83\u3002</p> <p>\u5728\u82f1\u8bed\u8bed\u6cd5\u4e2d\uff1a Bash<pre><code>&lt;greeting&gt;= (howdy | good morning) {hi};\n</code></pre> \u5728\u65e5\u8bed\u8bed\u6cd5\u4e2d\uff1a</p> <p>Bash<pre><code>&lt;greeting&gt;= (ohayo | ohayogozaimasu) {hi};\n</code></pre> \u5728\u5fb7\u8bed\u8bed\u6cd5\u4e2d\uff1a Bash<pre><code>&lt;greeting&gt;= (guten tag) {hi};\n</code></pre> \u5728\u6cd5\u8bed\u8bed\u6cd5\u4e2d\uff1a Bash<pre><code>&lt;greeting&gt;= (bon jour) {hi};\n</code></pre></p>"},{"location":"speech_and_language_processing/jsgf/jsgf/#47","title":"4.7 \u4f18\u5148\u7ea7","text":"<p>\u4ee5\u4e0b\u5b9a\u4e49\u4e86 JSpeech \u8bed\u6cd5\u683c\u5f0f\u4e2d\u89c4\u5219\u6269\u5c55\u5b9e\u4f53\u7684\u76f8\u5bf9\u4f18\u5148\u7ea7\u3002\u5217\u8868\u4ece\u6700\u9ad8\u4f18\u5148\u7ea7\u5230\u6700\u4f4e\u4f18\u5148\u7ea7\u6392\u5217\u3002</p> <p>\u89c4\u5219\u540d\u79f0\u5305\u542b\u5728\u5c16\u62ec\u53f7\u5185\uff0c\u4ee5\u53ca\u5e26\u5f15\u53f7\u6216\u4e0d\u5e26\u5f15\u53f7\u7684\u6807\u8bb0\u3002 <code>()' \u62ec\u53f7\u7528\u4e8e\u5206\u7ec4\uff0c</code>[]' \u62ec\u53f7\u7528\u4e8e\u53ef\u9009\u5206\u7ec4\u3002 \u4e00\u5143\u8fd0\u7b97\u7b26\uff08\u201c+\u201d\u3001\u201c*\u201d\u548c\u6807\u7b7e\u9644\u4ef6\uff09\u9002\u7528\u4e8e\u6700\u7d27\u5bc6\u7684\u7d27\u63a5\u524d\u7f6e\u89c4\u5219\u6269\u5c55\u3002\uff08\u8981\u5c06\u5b83\u4eec\u5e94\u7528\u4e8e\u5e8f\u5217\u6216\u66ff\u4ee3\u9879\uff0c\u8bf7\u4f7f\u7528\u201c()\u201d\u6216\u201c[]\u201d\u5206\u7ec4\u3002\uff09 \u89c4\u5219\u6269\u5c55\u7684\u5e8f\u5217\u3002 '|' \u5206\u9694\u66ff\u4ee3\u89c4\u5219\u6269\u5c55\u96c6\u3002 4.8 \u9012\u5f52 \u9012\u5f52\u662f\u89c4\u5219\u672c\u8eab\u7684\u5b9a\u4e49\u3002\u9012\u5f52\u662f\u4e00\u79cd\u5f3a\u5927\u7684\u5de5\u5177\uff0c\u53ef\u4ee5\u8868\u793a\u53e3\u8bed\u4e2d\u51fa\u73b0\u7684\u8bb8\u591a\u590d\u6742\u8bed\u6cd5\u5f62\u5f0f\u3002\u652f\u6301 JSpeech \u8bed\u6cd5\u683c\u5f0f\u7684\u8bc6\u522b\u5668\u5141\u8bb8\u53f3\u9012\u5f52\u3002\u5728\u53f3\u9012\u5f52\u4e2d\uff0c\u89c4\u5219\u5c06\u81ea\u8eab\u4f5c\u4e3a\u5176\u5b9a\u4e49\u7684\u6700\u540e\u4e00\u90e8\u5206\u3002\u4f8b\u5982\uff1a</p> <p>&lt;\u547d\u4ee4&gt; = &lt;\u52a8\u4f5c&gt; | (&lt;\u52a8\u4f5c&gt; \u548c &lt;\u547d\u4ee4&gt;); &lt;\u52a8\u4f5c&gt; = \u505c\u6b62 | \u5f00\u59cb | \u6682\u505c | \u6062\u590d | \u5b8c\u6210\uff1b \u5141\u8bb8\u4ee5\u4e0b\u547d\u4ee4\uff1a\u201c\u505c\u6b62\u201d\u3001\u201c\u505c\u6b62\u5e76\u5b8c\u6210\u201d\u3001\u201c\u5f00\u59cb\u5e76\u6062\u590d\u5e76\u5b8c\u6210\u201d\u3002</p> <p>\u5d4c\u5957\u53f3\u9012\u5f52\u4e5f\u662f\u5141\u8bb8\u7684\u3002\u5d4c\u5957\u53f3\u9012\u5f52\u662f\u6307\u4e00\u6761\u89c4\u5219\u7684\u5b9a\u4e49\u5f15\u7528\u4e86\u53e6\u4e00\u6761\u89c4\u5219\uff0c\u800c\u8be5\u89c4\u5219\u53c8\u5f15\u7528\u4e86\u7b2c\u4e00\u6761\u89c4\u5219\uff0c\u6bcf\u4e2a\u9012\u5f52\u5f15\u7528\u90fd\u662f\u5b9a\u4e49\u7684\u6700\u540e\u4e00\u90e8\u5206\u3002\u4f8b\u5982\uff0c</p> <p> = \u67d0\u7269 | ;  = \u53e6\u4e00\u4ef6\u4e8b \uff1b \u5d4c\u5957\u53f3\u9012\u5f52\u53ef\u80fd\u51fa\u73b0\u5728\u8bed\u6cd5\u4e2d\u3002\u7136\u800c\uff0c\u5f3a\u70c8\u4e0d\u5efa\u8bae\u8fd9\u6837\u505a\uff0c\u56e0\u4e3a\u5b83\u4f1a\u5e26\u6765\u4e0d\u5fc5\u8981\u7684\u590d\u6742\u6027\u548c\u6f5c\u5728\u7684\u7ef4\u62a4\u95ee\u9898\u3002 <p>\u4efb\u4f55\u53f3\u9012\u5f52\u89c4\u5219\u90fd\u53ef\u4ee5\u4f7f\u7528 Kleene \u661f\u53f7\u201c*\u201d\u548c/\u6216\u52a0\u53f7\u8fd0\u7b97\u7b26\u201c+\u201d\u91cd\u5199\u3002\u4f8b\u5982\uff0c\u4ee5\u4e0b\u89c4\u5219\u5b9a\u4e49\u662f\u7b49\u6548\u7684\uff1a</p> <p>&lt;\u547d\u4ee4&gt; = &lt;\u52a8\u4f5c&gt; | (&lt;\u52a8\u4f5c&gt; \u548c &lt;\u547d\u4ee4&gt;); &lt;\u547d\u4ee4&gt; = &lt;\u52a8\u4f5c&gt; (\u548c &lt;\u52a8\u4f5c&gt;) ; \u5c3d\u7ba1\u53ef\u4ee5\u4f7f\u7528\u201c+\u201d\u548c\u201c\u201d\u8fd0\u7b97\u7b26\u91cd\u5199\u53f3\u9012\u5f52\u8bed\u6cd5\uff0c\u4f46\u5141\u8bb8\u4f7f\u7528\u9012\u5f52\u5f62\u5f0f\uff0c\u56e0\u4e3a\u5b83\u5141\u8bb8\u66f4\u7b80\u5355\u3001\u66f4\u4f18\u96c5\u5730\u8868\u793a\u67d0\u4e9b\u8bed\u6cd5\u3002\u4e0d\u652f\u6301\u5176\u4ed6\u5f62\u5f0f\u7684\u9012\u5f52\uff08\u5de6\u9012\u5f52\u3001\u5d4c\u5165\u5f0f\u9012\u5f52\uff09\uff0c\u56e0\u4e3a\u65e0\u6cd5\u4fdd\u8bc1\u91cd\u5199\u6761\u4ef613\u3002</p> <p>4.9  \u548c  \u7684\u4f7f\u7528 \u672c\u6587\u6863\u524d\u9762\u5b9a\u4e49\u7684 \u4e24\u4e2a\u7279\u6b8a\u89c4\u5219\u540d\u79f0-\u548c - \u5177\u6709\u8bb8\u591a\u9ad8\u7ea7\u7528\u9014\u3002 <p>\u4f5c\u4e3a\u4efb\u4f55\u89c4\u5219\u6269\u5c55\u7684\u66ff\u4ee3\uff0c\u5f15\u7528\u4e0e\u4f7f\u7528\u53ef\u9009\u5206\u7ec4\u76f8\u540c\u3002\u56e0\u6b64\uff0c\u4ee5\u4e0b\u662f\u7b49\u6548\u5b9a\u4e49\uff1a <p> = a | &lt;\u7a7a&gt;\uff1b  = [ \u4e00 ]; Kleene \u661f\u53f7\u548c\u53f3\u9012\u5f52\u53ef\u4ee5\u6620\u5c04\u5982\u4e0b\uff1a <p> =  | \u4e00\u4e2a\uff1b  = a*; \u5bf9\u4e8e\u524d\u4e24\u79cd\u60c5\u51b5\uff0c\u8bed\u6cd5\u662f\u76f8\u540c\u7684\uff0c\u56e0\u4e3a\u7528\u6237\u53ef\u80fd\u4f1a\u8bf4\u51fa\u5b8c\u5168\u76f8\u540c\u7684\u8bdd\u8bed\u3002\u4f46\u662f\uff0c\u5f53\u7528\u6237\u8bf4\u51fa\u4e0e\u8bed\u6cd5\u5339\u914d\u7684\u5185\u5bb9\u65f6\uff0c\u8bc6\u522b\u5668\u751f\u6210\u7684\u7ed3\u679c\u8868\u793a\u53ef\u80fd\u4f1a\u5b58\u5728\u7a0b\u5e8f\u4e0a\u7684\u5dee\u5f02\u3002 <p>\u548c \u7684\u6700\u540e\u4e00\u79cd\u7528\u9014\u662f\u95e8\u63a7\u3002\u8981\u6253\u5f00\u548c\u5173\u95ed\u8bed\u6cd5\u7684\u7279\u5b9a\u90e8\u5206\uff0c\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u5b9a\u4e49\u89c4\u5219\uff0c\u5c06\u5176\u653e\u5728\u8981\u6253\u5f00\u548c\u5173\u95ed\u7684\u8bed\u6cd5\u90e8\u5206\u4e4b\u524d\uff0c\u5e76\u5728\u4ee5\u4e0b\u4e24\u8005\u4e4b\u95f4\u4ea4\u66ff\u5b9a\u4e49\uff1a <p>&lt;\u95e8&gt; = &lt;\u7a7a&gt;\uff1b &lt;\u95e8&gt; = &lt;\u865a\u7a7a&gt;; \u5f53 \u65f6\uff0c\u5b83\u662f\u4e0d\u53ef\u8bf4\u7684\uff0c\u5e76\u4e14\u8bed\u6cd5\u533a\u57df\u88ab\u5173\u95ed\u3002 <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u4e3a\u4e86\u6709\u6548\u5de5\u4f5c\uff0c\u6b64\u6280\u672f\u9700\u8981\u4e00\u4e2a\u80fd\u591f\u5728\u66f4\u6539\u5b9a\u4e49\u540e\u6709\u6548\u5730\u91cd\u65b0\u7f16\u8bd1\u8bed\u6cd5\u7684\u8bc6\u522b\u5668\u3002\u5e76\u975e\u6240\u6709\u8bc6\u522b\u5668\u90fd\u80fd\u6709\u6548\u5730\u6267\u884c\u6b64\u91cd\u65b0\u7f16\u8bd1\u3002 <p>4.10 \u6587\u6863\u6ce8\u91ca JSpeech \u8bed\u6cd5\u683c\u5f0f\u652f\u6301\u4e0e Java \u7f16\u7a0b\u8bed\u8a00 (GJS96, \u00a718) \u7684\u6587\u6863\u6ce8\u91ca\u98ce\u683c\u7c7b\u4f3c\u7684\u6587\u6863\u6ce8\u91ca\u3002\u6b64\u7c7b\u6ce8\u91ca\u53ef\u4ee5\u51fa\u73b0\u5728\u8bed\u6cd5\u58f0\u660e\u4e4b\u524d\u3001\u5bfc\u5165\u8bed\u53e5\u4e4b\u524d\u4ee5\u53ca\u4efb\u4f55\u89c4\u5219\u7684\u5b9a\u4e49\u4e4b\u524d\u3002\u53ef\u4ee5\u4ece\u8fd9\u4e9b\u6ce8\u91ca\u4e2d\u81ea\u52a8\u751f\u6210\u8d85\u6587\u672c\u7f51\u9875\u548c\u5176\u4ed6\u5f62\u5f0f\u7684\u6587\u6863\u3002</p> <p>\u6587\u6863\u6ce8\u91ca\u4ee5\u5b57\u7b26\u5f00\u59cb/\u5e76\u4ee5\u7ed3\u675f/\u3002\u5728\u6bcf\u4e2a\u6ce8\u91ca\u884c\u4e0a\uff0c\u524d\u5bfc\u5b57\u7b26\u548c\u4efb\u4f55\u524d\u9762\u7684\u7a7a\u683c\u90fd\u5c06\u88ab\u5ffd\u7565\u3002</p> <p>\u6ce8\u91ca\u7684\u7b2c\u4e00\u53e5\uff08\u4ee5\u7b2c\u4e00\u4e2a\u53e5\u53f7\u7ed3\u675f\uff09\u5e94\u5f53\u662f\u4e00\u4e2a\u603b\u7ed3\u53e5\uff0c\u5bf9\u6240\u6ce8\u91ca\u7684\u5b9e\u4f53\u8fdb\u884c\u7b80\u6d01\u7684\u63cf\u8ff0\u3002</p> <p>\u4e0e Java \u7f16\u7a0b\u8bed\u8a00\u4e2d\u7684\u6587\u6863\u6ce8\u91ca\u4e0d\u540c\uff0cJSpeech \u8bed\u6cd5\u683c\u5f0f\u4e2d\u7684\u6587\u6863\u6ce8\u91ca\u4e0d\u5141\u8bb8\u4f7f\u7528 HTML \u6807\u8bb0\u3002\u8fd9\u662f\u56e0\u4e3a HTML \u6807\u8bb0\u548c JSGF \u89c4\u5219\u540d\u79f0\u5f15\u7528\u4f7f\u7528\u76f8\u540c\u7684\u683c\u5f0f\u3002\u4f8b\u5982\uff0c\u662f\u89c4\u5219\u540d\u79f0\u8fd8\u662f HTML \u4ee3\u7801\uff1f <p>\u5e26\u6807\u8bb0\u7684\u6bb5\u843d \u7531\u4e00\u884c\u6587\u6863\u6ce8\u91ca\u6807\u8bb0\uff0c\u8be5\u6ce8\u91ca\u4ee5 @ \u5b57\u7b26\u5f00\u5934\uff0c\u540e\u8ddf\u4e0b\u9762\u5b9a\u4e49\u7684\u5173\u952e\u5b57\u4e4b\u4e00\u3002\u5e26\u6807\u8bb0\u7684\u6bb5\u843d\u5305\u62ec\u6ce8\u91ca\u7684\u4ee5\u4e0b\u51e0\u884c\uff0c\u76f4\u5230\u4e0b\u4e00\u4e2a\u5e26\u6807\u8bb0\u7684\u6bb5\u843d\u7684\u5f00\u5934\u6216\u6587\u6863\u6ce8\u91ca\u7684\u7ed3\u5c3e\u3002\uff08\u6587\u6863\u6807\u8bb0\u4e0e\u89c4\u5219\u5b9a\u4e49\u4e2d\u7684\u6807\u8bb0\u65e0\u5173\u3002\uff09</p> <p>\u4ee5\u4e0b\u793a\u4f8b\u663e\u793a\u4e86\u6587\u6863\u6ce8\u91ca\u7684\u57fa\u672c\u7ed3\u6784\u3002 \u793a\u4f8b 3\uff1a\u6587\u6863\u6ce8\u91ca\u663e\u793a\u4e86\u7b80\u5355\u8bed\u6cd5\u7684\u6ce8\u91ca\u793a\u4f8b\u3002</p> <p>/*     * \u7b2c\u4e00\u53e5\u8bdd\u63d0\u4f9b\u4e86\u6458\u8981\u3002     * \u53ef\u4ee5\u63d2\u5165\u9644\u52a0\u6587\u672c\u548c\u6bb5\u843d\u3002     *     * @tag \u4e0b\u9762\u5b9a\u4e49\u4e86\u51e0\u79cd\u7c7b\u578b\u7684\u6807\u7b7e     / 4.10.1 @author \u6807\u7b7e \u8be5@author\u6807\u7b7e\u53ef\u7528\u4e8e\u8bed\u6cd5\u58f0\u660e\u7684\u6587\u6863\u6ce8\u91ca\u4e2d\u3002\u5c3d\u7ba1\u8be5\u6807\u7b7e\u6ca1\u6709\u660e\u786e\u7684\u7ed3\u6784@author\uff0c\u4f46\u5efa\u8bae\u5c06\u6bcf\u4f4d\u4f5c\u8005\u5217\u5728\u5355\u72ec\u7684\u6807\u7b7e\u4e2d\u3002@author\u5355\u4e2a\u6ce8\u91ca\u4e2d\u53ef\u4ee5\u5305\u542b\u591a\u4e2a\u6807\u7b7e\u3002</p> <p>\u4f8b\u5982\uff0c</p> <p>@author \u8a79\u59c6\u65af\u90a6\u5fb7 @author Jose Alvarez 4.10.2 @version\u6807\u7b7e \u8bed\u6cd5\u58f0\u660e\u7684\u6587\u6863\u6ce8\u91ca\u4e2d\u53ef\u4ee5\u5305\u542b\u5355\u4e2a@version\u6807\u7b7e\u3002\u6ca1\u6709\u5b9a\u4e49\u7684\u7ed3\u6784\u6216\u683c\u5f0f\u3002\u4f8b\u5982\uff0c @version \u7248\u672c\u4fe1\u606f 4.10.3 @see \u6807\u7b7e \u4efb\u4f55\u6587\u6863\u6ce8\u91ca\u4e2d\u90fd\u53ef\u4ee5\u4f7f\u7528\u4efb\u610f\u6570\u91cf\u7684@see\u6807\u7b7e\u3002\u6807\u7b7e\u8868\u793a\u5bf9\u53e6\u4e00\u6761\u89c4\u5219\uff08\u672c\u5730\u6216\u5bfc\u5165\uff09\u6216\u53e6\u4e00\u8bed\u6cd5\u7684\u4ea4\u53c9\u5f15\u7528\u3002\u540e\u7f00.*\u8868\u793a\u5f15\u7528\u7684\u662f\u8bed\u6cd5\u3002 @see  @see  @see  4.10.4 @example \u6807\u7b7e \u53ef\u4ee5\u5728\u89c4\u5219\u58f0\u660e\u7684\u6587\u6863\u6ce8\u91ca\u4e2d\u63d0\u4f9b\u6807\u7b7e@example\uff0c\u4ee5\u63d0\u4f9b\u89c4\u5219\u5982\u4f55\u8868\u8ff0\u7684\u793a\u4f8b\u3002\u9002\u5f53\u7684\u793a\u4f8b\u4f7f\u8bed\u6cd5\u548c\u89c4\u5219\u66f4\u5bb9\u6613\u7406\u89e3\u3002\u793a\u4f8b\u6587\u672c\u8fd8\u53ef\u4ee5\u88ab\u8bed\u6cd5\u5de5\u5177\u7528\u6765\u9a8c\u8bc1\u8bed\u6cd5\u7684\u6b63\u786e\u6027\u3002 @example\u8bf7\u8bf4\u51fa\u4f60\u7684\u59d3\u540d\u548c\u5e74\u9f84 @example \u6211\u559c\u6b22\u201c\u5357\u7f8e\u6d32\u201d \u9f13\u52b1\u5f00\u53d1\u4eba\u5458\u5728\u793a\u4f8b\u4e2d\u4f7f\u7528\u4e0e\u89c4\u5219\u5b9a\u4e49\u4e2d\u76f8\u540c\u7684\u6807\u8bb0\u5316\u3002\u4f8b\u5982\uff0c\u4e0a\u9762\u7684\u7b2c\u4e8c\u4e2a\u793a\u4f8b\u5e94\u88ab\u89e3\u91ca\u4e3a\u4e24\u4e2a\u6807\u8bb0\uff0c\u56e0\u4e3a\u201csouth america\u201d\u5468\u56f4\u6709\u5f15\u53f7\u3002\u4f46\u662f\uff0c\u5de5\u5177\u5f00\u53d1\u4eba\u5458\u5e94\u8003\u8651\u793a\u4f8b\u6587\u672c\u53ef\u80fd\u5305\u542b\u4eba\u7c7b\u53ef\u8bfb\u7684\u683c\u5f0f\uff0c\u4ee5\u4fbf\u6e05\u6670\u7406\u89e3\u3002\u5bf9\u4e8e\u82f1\u8bed\uff0c\u8fd9\u53ef\u80fd\u5305\u62ec\u6807\u70b9\u7b26\u53f7\uff08\u53e5\u53f7\u3001\u9017\u53f7\u3001\u95ee\u53f7\u3001\u611f\u53f9\u53f7\u7b49\uff09\u3001\u67d0\u4e9b\u6807\u8bb0\u7684\u5927\u5199\u3001\u4fee\u6539\u540e\u7684\u6807\u8bb0\u5316\uff08\u4f8b\u5982\u7f3a\u5c11\u5f15\u53f7\uff09\u3002 <p>\u6807\u7b7e@example\u53ef\u80fd\u5305\u542b\u89c4\u5219\u540d\u79f0\u5f15\u7528\u3002\u4f8b\u5982\uff0c</p> <p>@example \u6211\u60f3\u8981\u4e00\u4e2a\u5e26\u6709  \u7684\u62ab\u8428 \u5c06\u968f\u7740\u4e3a\u89c4\u5219\u5b9a\u4e49\u7684\u6bcf\u4e2a\u793a\u4f8b\u6807\u7b7e\u800c\u6269\u5c55\uff08\u201c\u6211\u60f3\u8981\u4e00\u4e2a\u610f\u5927\u5229\u8fa3\u9999\u80a0\u62ab\u8428\u201d\u3001\u201c\u6211\u60f3\u8981\u4e00\u4e2a\u8611\u83c7\u62ab\u8428\u201d\u7b49\u7b49\uff09\u3002 <p>5.\u793a\u4f8b \u901a\u8fc7\u5c06\u7b80\u5355\u7684\u89c4\u5219\u7ec4\u5408\u5728\u4e00\u8d77\uff0c\u53ef\u4ee5\u6784\u5efa\u590d\u6742\u7684\u8bed\u6cd5\u6765\u6355\u6349\u7528\u6237\u6240\u8bf4\u7684\u5185\u5bb9\u3002\u4ee5\u4e0b\u662f\u5177\u6709\u5b8c\u6574\u6807\u9898\u548c\u6b63\u6587\u7684\u8bed\u6cd5\u793a\u4f8b\u3002</p> <p>5.1 \u793a\u4f8b 1\uff1a\u7b80\u5355\u7684\u547d\u4ee4\u548c\u63a7\u5236 \u6b64\u793a\u4f8b\u663e\u793a\u4e86\u5b9a\u4e49\u63a7\u5236\u7a97\u53e3\u7684\u53e3\u5934\u547d\u4ee4\u7684\u4e24\u4e2a\u57fa\u672c\u8bed\u6cd5\u3002\u5176\u4e2d\u5305\u62ec\u53ef\u9009\u7684\u793c\u8c8c\u6027\uff0c\u4ee5\u663e\u793a\u5982\u4f55\u4f7f\u8bed\u97f3\u4ea4\u4e92\u66f4\u52a0\u81ea\u7136\u548c\u5bf9\u8bdd\u6027\u66f4\u5f3a\u3002</p>"},{"location":"speech_and_language_processing/jsgf/jsgf/#jsgf-v10_1","title":"JSGF V1.0\uff1b","text":"<p>\u8bed\u6cd5 com.acme.politeness\uff1b</p> <p>// \u8eab\u4f53 public  = (\u8bf7 | \u8bf7 | \u4f60\u80fd | \u54e6\uff0c\u5f3a\u5927\u7684\u8ba1\u7b97\u673a) *; public  = [ \u8bf7 | \u8c22\u8c22 | \u8c22\u8c22\u4f60 ]; \u8bed\u6cd5politeness\u672c\u8eab\u5e76\u6ca1\u6709\u4ec0\u4e48\u7528\uff0c\u4f46\u5bfc\u5165 commands\u8bed\u6cd5\u53ef\u4ee5\u589e\u52a0\u5bf9\u8bdd\u98ce\u683c\u3002"},{"location":"speech_and_language_processing/jsgf/jsgf/#jsgf-v10-iso8859-1","title":"JSGF V1.0 ISO8859-1 \u82f1\u6587;","text":"<p>\u8bed\u6cd5 com.acme.commands; \u5bfc\u5165 \uff1b \u5bfc\u5165 \uff1b <p>/*   * \u57fa\u672c\u547d\u4ee4\u3002   * @example \u8bf7\u79fb\u52a8\u7a97\u53e3   * @example \u6253\u5f00\u4e00\u4e2a\u6587\u4ef6   /</p> <p>\u516c\u5171 =  &lt;\u547d\u4ee4&gt; ; <p>&lt;\u547d\u4ee4&gt; = &lt;\u52a8\u4f5c&gt; &lt;\u5bf9\u8c61&gt;; &lt;\u52a8\u4f5c&gt; = /10/\u6253\u5f00|/2/\u5173\u95ed|/1/\u5220\u9664|/1/\u79fb\u52a8\uff1b &lt;\u5bf9\u8c61&gt; = \u8fd9\u4e2a|\u4e00\u4e2a\uff1b \u8be5commands\u8bed\u6cd5\u5b9a\u4e49\u4e86\u4e00\u6761public\u89c4\u5219\uff0c\u5b83\u7531\u4e24\u6761\u5bfc\u5165\u89c4\u5219\u548c\u4ee5\u53ca\u4e09\u6761\u79c1\u6709\u89c4\u5219\u7ec4\u6210\uff0c\u548c\u3002 \u548c\u89c4\u5219\u90fd\u662f\u5907\u9009\u8bcd\u96c6\uff0c\u64cd\u4f5c\u5217\u8868\u5177\u6709\u6743\u91cd\uff0c\u8868\u660e\u201copen\u201d\u6bd4\u5176\u4ed6\u8bcd\u66f4\u6709\u53ef\u80fd\u51fa\u73b0\u3002\u89c4\u5219\u5b9a\u4e49\u4e86\u4e00\u4e2a\u5e8f\u5217\uff0c\u5176\u4e2d\u540e\u9762\u53ef\u9009\u5730\u8ddf\u7740\u201cthe\u201d\u6216\u201ca\u201d\uff0c\u5e76\u4e14\u603b\u662f\u8ddf\u7740\u4e00\u4e2a\u3002"},{"location":"speech_and_language_processing/jsgf/jsgf/#jsgf-v10_2","title":"jsgf","text":""},{"location":"speech_and_language_processing/jsgf/jsgf/#jsgf-10-iso8559-1","title":"jsgf","text":""},{"location":"speech_and_language_processing/jsgf/jsgf/#_8","title":"jsgf","text":""},{"location":"todo/todo/","title":"TODO","text":""},{"location":"todo/todo/#_1","title":"\u5f85\u529e","text":"<ol> <li>TOD\u4ecb\u7ecd</li> <li>\u5b66\u672f\u7248GPT</li> <li>CPU\u8bbe\u8ba1</li> <li>cmake\u5b66\u4e60</li> <li>scaling law</li> <li>https://arthurchiao.art/blog/llama-paper-zh/</li> <li>https://www.aminer.org/research_report/64d9cb367cb68b460f1739af</li> <li>https://www.jiqizhixin.com/articles/2024-02-27-3</li> <li>https://github.com/km1994/llms_paper</li> <li>https://zhuanlan.zhihu.com/p/684955373</li> <li>https://zhuanlan.zhihu.com/p/687278237</li> <li>https://zhuanlan.zhihu.com/p/663524611</li> <li>https://ai.meta.com/blog/meta-llama-3/</li> <li>https://zhuanlan.zhihu.com/p/660580871</li> <li>https://qwenlm.github.io/zh/blog/qwen-moe/</li> <li>https://python3-cookbook.readthedocs.io/zh-cn/latest/c10/p04_split_module_into_multiple_files.html</li> <li>https://dlsyscourse.org/assignments/</li> <li>https://www.bilibili.com/video/BV1ZC4y177Tw/?spm_id_from=333.788&amp;vd_source=5d036d17b16d6367c25a00641a169e1f</li> <li>https://search.bilibili.com/all?vt=15763804&amp;keyword=%E6%8A%95%E6%9C%BA%E9%87%87%E6%A0%B7&amp;from_source=webtop_search&amp;spm_id_from=333.1007&amp;search_source=5</li> <li>https://www.bilibili.com/video/BV1oQ4y197tQ/?spm_id_from=333.337.search-card.all.click&amp;vd_source=5d036d17b16d6367c25a00641a169e1f</li> <li>https://www.bilibili.com/video/BV1Q24y1S7ve/?p=1&amp;vd_source=5d036d17b16d6367c25a00641a169e1f</li> <li>https://www.bilibili.com/video/BV1f5411i78C/?spm_id_from=autoNext&amp;vd_source=5d036d17b16d6367c25a00641a169e1f</li> <li>https://www.bilibili.com/video/BV1214y1X7Aq/?spm_id_from=pageDriver&amp;vd_source=5d036d17b16d6367c25a00641a169e1f</li> <li>https://programmercarl.com/0239.%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E6%9C%80%E5%A4%A7%E5%80%BC.html#%E6%80%9D%E8%B7%AF</li> <li>https://www.promptingguide.ai/zh</li> <li>https://space.bilibili.com/517221395/search/video?tid=0&amp;pn=3&amp;keyword=%E8%AE%A1%E7%AE%97%E5%9B%BE&amp;order=pubdate</li> <li>https://www.bilibili.com/video/BV1cG411E7gV/?spm_id_from=333.999.0.0&amp;vd_source=5d036d17b16d6367c25a00641a169e1f</li> <li>https://www.bilibili.com/video/BV1Bv4y1J7QT/?p=2&amp;spm_id_from=pageDriver&amp;vd_source=5d036d17b16d6367c25a00641a169e1f</li> <li>https://www.bilibili.com/video/BV1aF411v7Va/?spm_id_from=333.788.recommend_more_video.2&amp;vd_source=5d036d17b16d6367c25a00641a169e1f</li> <li>https://www.bilibili.com/video/BV1Ds4y1k7yr/?spm_id_from=333.337.search-card.all.click&amp;vd_source=5d036d17b16d6367c25a00641a169e1f</li> <li>https://space.bilibili.com/517221395/search/video?tid=0&amp;pn=3&amp;keyword=%E8%AE%A1%E7%AE%97%E5%9B%BE&amp;order=pubdate</li> <li>https://mkdocs-like-code.readthedocs.io/zh-cn/latest/get-started/deploy/#github-pages</li> <li>https://zhuanlan.zhihu.com/p/649731916</li> <li>https://blog.csdn.net/u010159842/article/details/78959515</li> <li>https://www.bilibili.com/video/BV1AW4y1F7EK/?p=2&amp;spm_id_from=pageDriver&amp;vd_source=5d036d17b16d6367c25a00641a169e1f</li> <li>https://www.bilibili.com/video/BV17g4y1g7S6/?spm_id_from=333.788&amp;vd_source=5d036d17b16d6367c25a00641a169e1f</li> <li>https://search.bilibili.com/all?keyword=qlora%E8%AE%AD%E7%BB%83&amp;from_source=webtop_search&amp;spm_id_from=333.1007&amp;search_source=5</li> <li>https://www.bilibili.com/video/BV1Hb421b72f/?spm_id_from=333.1007.tianma.1-2-2.click&amp;vd_source=5d036d17b16d6367c25a00641a169e1f</li> <li>https://juejin.cn/post/7350510977052229668</li> <li>https://huggingface.co/learn/nlp-course/zh-CN/chapter6/3</li> <li>https://www.huaxiaozhuan.com/%E5%B7%A5%E5%85%B7/huggingface_transformer/chapters/1_tokenizer.html</li> <li>https://huggingface.co/docs/transformers/main/zh/main_classes/tokenizer</li> <li>https://tvm.hyper.ai/docs/arch/arch/pass_infra/</li> <li>https://tvm.hyper.ai/docs/</li> <li>https://yangzhang.site/Note/mkdocs/practice/</li> <li>https://github.com/hellotransformers/Natural_Language_Processing_with_Transformers/tree/main</li> </ol>"},{"location":"tokenizer/bpe/","title":"BPE \u7b97\u6cd5","text":"<p>BPE \u7b97\u6cd5\u7684\u5168\u79f0\u662f Byte-Pair Encoding, \u8be5\u7b97\u6cd5\u6700\u65e9\u662f 1994 \u5e74\u63d0\u51fa\u5e94\u7528\u4e8e \u6570\u636e\u538b\u7f29 \u4efb\u52a1\u3002\u5728 2015 \u5e74, Neural Machine Translation of Rare Words with Subword Units \u63d0\u51fa\u5c06\u5176\u5ef6\u7533\u81f3 \u6587\u672c\u5206\u8bcd \u4efb\u52a1, \u540c\u65f6\u6ca1\u6709\u6539\u53d8\u7b97\u6cd5\u7684\u540d\u79f0\u3002(\u5982\u679c\u4f60\u4e0d\u4e86\u89e3\u4e4b\u524d\u7684\u6570\u636e\u538b\u7f29\u7b97\u6cd5, \u53ef\u80fd\u4f1a\u597d\u5947\u4e3a\u4ec0\u4e48\u662f\u8fd9\u4e2a\u540d\u5b57)\u3002</p> <p>OpenAI \u5173\u4e8e GPT \u7684\u4e00\u7cfb\u5217\u5de5\u4f5c, \u4ee5\u53ca Meta \u5173\u4e8e LLaMA \u7684\u4e00\u7cfb\u5217\u5de5\u4f5c\u90fd\u662f\u4f7f\u7528\u8fd9\u79cd\u5206\u8bcd\u65b9\u5f0f\u3002OpenAI \u867d\u7136\u6ca1\u6709\u5f00\u6e90 GPT-3 \u6a21\u578b\u7684\u53c2\u6570\u6743\u91cd, \u4f46\u662f\u5f00\u6e90\u4e86\u5206\u8bcd\u5e93 tiktoken, \u5e2e\u52a9\u7528\u6237\u5728\u8c03\u7528\u63a5\u53e3\u524d\u8ba1\u7b97 token \u6570\u3002</p> <p>\u4e0b\u9762\u5c31\u8ba9\u6211\u4eec\u770b\u770b\u8fd9\u4e2a\u7b97\u6cd5\u3002\u9996\u5148\u6765\u770b\u770b \"\u8bad\u7ec3\" \u8fc7\u7a0b:</p> <ul> <li> <p>\u7b2c\u4e00\u6b65\uff1a\u4f7f\u7528 \u7a7a\u683c \u5bf9\u8bed\u6599\u5e93\u4e2d\u7684\u6240\u6709\u53e5\u5b50\u8fdb\u884c\u62c6\u5206\uff0c\u5f97\u5230\u6240\u6709\u53ef\u80fd\u7684 <code>word</code>\u3002</p> </li> <li> <p>\u7b2c\u4e8c\u6b65\uff1a\u5c06\u8bed\u6599\u5e93\u4e2d\u6240\u6709\u7684 <code>word</code> \u4ee5\u5b57\u7b26 (\u6700\u5c0f\u9897\u7c92) \u4e3a\u5355\u4f4d\u8fdb\u884c\u62c6\u5206, \u6bcf\u4e00\u4e2a\u5b57\u7b26\u4f5c\u4e3a\u4e00\u4e2a subword\u3002\u6bd4\u65b9\u8bf4, \u5355\u8bcd\"<code>best</code>\" \u88ab\u62c6\u5206\u6210 \"<code>b e s t</code>\" \u56db\u4e2a\u5b57\u7c92\u5ea6 subword (\u7528 \u7a7a\u683c \u4f5c\u4e3a\u5206\u9694\u7b26)\u3002</p> </li> <li> <p>\u7b2c\u4e09\u6b65, \u521d\u59cb\u5316 \u8bcd\u8868 \u548c \u5408\u5e76\u89c4\u5219\u5217\u8868\u3002\u5176\u4e2d, \u8bcd\u8868 \u5c31\u662f\u6240\u6709\u53ef\u80fd\u7684 subword \u96c6\u5408, \u4e5f\u5c31\u662f\u521d\u59cb\u5316\u6210\u8bed\u6599\u5e93\u4e2d\u6240\u6709\u53ef\u80fd\u7684\u5b57\u7b26\u96c6\u5408\u3002</p> </li> <li> <p>\u7b2c\u56db\u6b65, \u904d\u5386 <code>word</code> \u4e2d\u6240\u6709\u53ef\u80fd\u7684 subword pair, \u7edf\u8ba1\u4ed6\u4eec\u51fa\u73b0\u7684\u9891\u6570\u3002\u7136\u540e\u5c06\u6570\u636e\u96c6\u4e2d \u9891\u6570\u6700\u9ad8 \u7684\u90a3\u4e00\u4e2a subword pair \u5408\u5e76\u5728\u4e00\u8d77, \u5408\u5e76\u540e\u7684 subword \u52a0\u5165 \u8bcd\u8868 \u4e2d, \u5408\u5e76\u89c4\u5219\u52a0\u5165 \u5408\u5e76\u89c4\u5219\u5217\u8868 \u4e2d\u3002</p> <p>\u4e3e\u4f8b\u6765\u8bf4, \"<code>b e s t</code>\" \u73b0\u5728\u6709\u4e09\u79cd\u53ef\u80fd\u7684 subword pair: \"<code>b e</code>\", \"<code>e s</code>\" \u548c \"<code>s t</code>\"\u3002\u7edf\u8ba1\u5b8c\u6210\u540e, \u53d1\u73b0\u5728\u8bed\u6599\u5e93\u4e2d, \"<code>s t</code>\" \u51fa\u73b0\u7684\u9891\u6570\u6700\u9ad8\u3002\u90a3\u4e48, \u6211\u4eec\u5c31\u5c06\u6574\u4e2a\u6570\u636e\u96c6\u4e2d\u7684 \"<code>s t</code>\" \u5408\u5e76\u8d77\u6765, \u53d8\u6210 \"<code>st</code>\"\u3002\u6b64\u65f6 <code>best</code> \u7684\u62c6\u5206\u7ed3\u679c\u5c31\u662f \"<code>b e st</code>\", \u4ece\u56db\u4e2a subword \u53d8\u6210\u4e09\u4e2a subword\u3002</p> <p>\u540c\u65f6, \u5c06 \"<code>st</code>\" \u8fd9\u4e2a subword \u52a0\u5165 \u8bcd\u8868 \u4e2d, \u5c06 (\"<code>s t</code>\", \"<code>st</code>\") \u52a0\u5165 \u5408\u5e76\u89c4\u5219\u5217\u8868 \u4e2d\u3002</p> </li> <li> <p>\u7b2c\u4e94\u6b65, \u4e00\u76f4\u91cd\u590d \u7b2c\u4e09\u6b65 \u7684\u64cd\u4f5c, \u76f4\u81f3 \u8bcd\u8868 \u8fbe\u5230\u9884\u8bbe\u7684\u5927\u5c0f\u5373\u53ef\u3002</p> </li> </ul> <p>\u6574\u4e2a\u8bad\u7ec3\u8fc7\u7a0b\u5c31\u662f\u4e0d\u65ad\u5730\u53bb\u5bfb\u627e\u8bed\u6599\u5e93\u4e2d\u9891\u6570\u6700\u9ad8\u7684 subword pair, \u7136\u540e\u5408\u5e76\u6210\u4e00\u4e2a subword, \u8fd9\u4e2a\u8fc7\u7a0b\u548c \u6570\u636e\u538b\u7f29 \u7b97\u6cd5\u4e2d\u7684\u6838\u5fc3\u601d\u60f3\u662f\u4e00\u81f4\u7684\u3002</p> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f, subword pair \u7684\u5408\u5e76\u6b21\u6570\u5e76\u4e0d\u4e00\u5b9a\u7b49\u4e8e\u5176\u9891\u6570\u3002\u4e3e\u4f8b\u6765\u8bf4, \u5bf9\u4e8e \"<code>x x x</code>\" \u6765\u8bf4, \u5176\u4e2d \"<code>x x</code>\" \u51fa\u73b0\u4e86\u4e24\u6b21, \u4f46\u662f\u6211\u4eec\u5408\u5e76\u65f6\u53ea\u80fd\u5408\u5e76\u4e00\u4e2a, \u5373 \"<code>xx x</code>\"\u3002</p> <p>\u90a3\u4e48, \u6211\u4eec\u600e\u4e48\u5bf9 word \u8fdb\u884c\u5206\u8bcd\u5462? \u9996\u5148, \u5c06 word \u4ee5\u5b57\u7b26\u7c92\u5ea6\u4e3a\u5355\u4f4d\u8fdb\u884c\u62c6\u5206, \u4e00\u4e2a\u5b57\u7b26\u4f5c\u4e3a\u4e00\u4e2a subword\u3002\u7136\u540e\u6309\u7167 \u5408\u5e76\u89c4\u5219\u5217\u8868 \u4e2d\u7684\u987a\u5e8f, \u5982\u679c\u51fa\u73b0\u4e86 subword pair, \u5c31\u8fdb\u884c\u5408\u5e76\u3002\u6700\u540e\u5269\u4e0b\u7684 subword \u5217\u8868\u5c31\u662f\u6700\u7ec8\u7684\u5206\u8bcd\u7ed3\u679c\u3002</p> <p>\u6574\u4f53\u4e0a\u7684\u65b9\u6848\u5c31\u662f\u8fd9\u6837, \u53ef\u4ee5\u8bf4\u975e\u5e38\u5de7\u5999\u3002\u8fd9\u4e2a\u7b97\u6cd5\u5f00\u6e90\u5728 subword-nmt \u9879\u76ee\u4e2d\u3002</p> <p>\u73b0\u5728, \u5f88\u591a\u8bba\u6587\u4e2d\u90fd\u8bf4\u5176\u4f7f\u7528\u4e86 Byte-Level BPE (BBPE), \u5c31\u662f\u5c06\u7b2c\u56db\u90e8\u5206\u6240\u8bf4\u7684 byte-level \u65b9\u6848\u548c BPE \u7ed3\u5408\u8d77\u6765, \u6700\u521d\u662f OpenAI \u5728 GPT-2 \u5de5\u4f5c\u4e2d\u63d0\u51fa\u3002\u7f51\u4e0a\u5f88\u591a\u535a\u5ba2\u5728\u4ecb\u7ecd BBPE \u65f6, \u5f15\u7528\u7684\u8bba\u6587\u662f Meta \u7684 Neural Machine Translation with Byte-Level Subwords, \u5176\u53d1\u5e03\u6bd4 GPT-2 \u665a\u534a\u5e74, \u4e0d\u8981\u5f04\u9519\u5173\u7cfb\u4e86\u3002</p>"},{"location":"tokenizer/bpe/#_1","title":"\u8bad\u7ec3","text":""},{"location":"tokenizer/bpe/#_2","title":"\u7b2c\u4e00\u6b65\uff1a\u4f7f\u7528\u7a7a\u683c\u5bf9\u8bed\u6599\u5e93\u4e2d\u7684\u6240\u6709\u53e5\u5b50\u8fdb\u884c\u62c6\u5206","text":"<p>\u9996\u5148, \u6211\u4eec\u9700\u8981\u51c6\u5907\u4e00\u4e2a\u8bad\u7ec3\u8bed\u6599\u5e93\uff0c\u4f7f\u7528 \u7a7a\u683c\u8fdb\u884c\u5206\u8bcd\uff0c\u5728 subword-nmt \u4e2d\u5b9e\u73b0\u7684\u4ee3\u7801\u5982\u4e0b\uff1a \u7b2c\u4e00\u6b65: \u4f7f\u7528\u7a7a\u683c\u5bf9\u8bed\u6599\u5e93\u4e2d\u7684\u6240\u6709\u53e5\u5b50\u8fdb\u884c\u62c6\u5206<pre><code># \u7edf\u8ba1\u8bed\u6599\u5e93\u4e2d\u6240\u6709\u5355\u8bcd\u51fa\u73b0\u7684\u9891\u6570\nfor i, line in enumerate(fobj):\n    # \u4f7f\u7528\u7a7a\u683c\u5206\u5272\n    for word in line.strip('\\r\\n ').split(' '):\n        if word:\n            vocab[word] += 1\n</code></pre></p>"},{"location":"tokenizer/bpe/#word","title":"\u7b2c\u4e8c\u6b65\uff1a\u5c06 word \u4ee5\u5b57\u7b26\u4e3a\u5355\u4f4d\u8fdb\u884c\u62c6\u5206","text":"<p>\u5c06\u8bed\u6599\u5e93\u4e2d\u6240\u6709\u7684 <code>word</code> \u4ee5\u5b57\u7b26 (\u6700\u5c0f\u9897\u7c92) \u4e3a\u5355\u4f4d\u8fdb\u884c\u62c6\u5206\uff0c\u6bcf\u4e00\u4e2a\u5b57\u7b26\u4f5c\u4e3a\u4e00\u4e2a subword\uff0c\u5e76\u4e14\u5728\u6700\u540e\u4e00\u4e2a\u5b57\u7b26\u540e\u9762\u6dfb\u52a0\u4e00\u4e2a <code>&lt;/w&gt;</code> \u5f62\u6210\u65b0\u7684\u5b57\u7b26\u3002\u6bd4\u65b9\u8bf4, \"<code>best</code>\" \u88ab\u62c6\u5206\u6210 \"<code>b e s t&lt;/w&gt;\"</code> \u56db\u4e2a subword (\u7528 \u7a7a\u683c \u4f5c\u4e3a\u5206\u9694\u7b26)\u3002</p> <p>\u5728 subword-nmt \u4e2d\u5b9e\u73b0\u7684\u4ee3\u7801\u5982\u4e0b\uff1a</p> \u7b2c\u4e8c\u6b65\uff1a\u5c06 word \u4ee5\u5b57\u7b26\u4e3a\u5355\u4f4d\u8fdb\u884c\u62c6\u5206<pre><code># \u5c06\u5355\u8bcd\u62c6\u5206\u6210\u5b57\u7b26\uff0c\u5e76\u6dfb\u52a0 &lt;/w&gt; \u6807\u8bb0\nvocab = dict([(tuple(x[:-1]) + (x[-1] + '&lt;/w&gt;',) ,y) for (x, y) in vocab.items()])\n</code></pre>"},{"location":"tokenizer/bpe/#_3","title":"\u7b2c\u4e09\u6b65\uff1a\u6839\u636e\u5b57\u7b26\u7684\u9891\u6570\u8fdb\u884c\u964d\u5e8f\u6392\u5e8f","text":"<p>\u83b7\u53d6\u5b57\u7b26\u7684\u9891\u7387\u4e4b\u540e\uff0c\u6839\u636e\u5b57\u7b26\u7684\u5e8f\u5217\u8fdb\u884c\u964d\u5e8f\u6392\u5e8f\uff0c\u5f97\u5230\u5b57\u7b26\u7684\u6392\u5e8f\u5e8f\u5217\uff0c\u5229\u4e8e\u540e\u7eed\u7684\u5408\u5e76\u3002</p> \u7b2c\u4e09\u6b65\uff1a\u6839\u636e\u5b57\u7b26\u7684\u9891\u6570\u8fdb\u884c\u964d\u5e8f\u6392\u5e8f<pre><code>sorted_vocab = sorted(vocab.items(), key=lambda x: x[1], reverse=True)\n</code></pre>"},{"location":"tokenizer/bpe/#bi-gram","title":"\u7b2c\u56db\u6b65\uff1a\u7edf\u8ba1\u6240\u6709\u5355\u8bcd\u4e2dbi-gram\u7684\u9891\u6570","text":"<p>\u5728\u8bad\u7ec3\u8bed\u6599\u7684\u6240\u6709\u5355\u8bcd\u4e2d\uff0c\u7edf\u8ba1\u6240\u6709\u5355\u8bcd\u4e2dbi-gram\u7684\u9891\u6570\uff0c\u5177\u4f53\u7684\u5b9e\u73b0\u4ee3\u7801\u5982\u4e0b\uff1a</p> \u7b2c\u56db\u6b65\uff1a\u7edf\u8ba1\u6240\u6709\u5355\u8bcd\u4e2dbi-gram\u7684\u9891\u6570<pre><code>def get_pair_statistics(vocab):\n    \"\"\"Count frequency of all symbol pairs, and create index\"\"\"\n\n    # data structure of pair frequencies\n    stats = defaultdict(int)\n\n    #index from pairs to words\n    indices = defaultdict(lambda: defaultdict(int))\n\n    for i, (word, freq) in enumerate(vocab):\n        prev_char = word[0]\n        for char in word[1:]:\n            stats[prev_char, char] += freq\n            indices[prev_char, char][i] += 1\n            prev_char = char\n\n    return stats, indices\n</code></pre>"},{"location":"tokenizer/bpe/#bi-gram_1","title":"\u7b2c\u4e94\u6b65\uff1a\u5408\u5e76\u9891\u7387\u6700\u9ad8\u7684bi-gram","text":"<p>\u5728\u7b2c 4 \u6b65\u4e2d\uff0c\u7edf\u8ba1\u4e86\u6240\u6709\u5355\u8bcd\u4e2dbi-gram\u7684\u9891\u6570\uff0c\u7136\u540e\u6839\u636e\u9891\u7387\u8fdb\u884c\u964d\u5e8f\u6392\u5e8f\uff0c\u53d6\u51fa\u9891\u7387\u6700\u9ad8\u7684bi-gram\uff0c\u5408\u5e76\u6210\u65b0\u7684\u5b57\u7b26\uff0c\u5c06\u8bad\u7ec3\u8bed\u6599\u4e2d\u6240\u6709\u51fa\u73b0\u8be5bi-gram\u90fd\u8fdb\u884c\u5408\u5e76\uff1a \u7b2c\u4e94\u6b65\uff1a\u5408\u5e76\u9891\u7387\u6700\u9ad8\u7684bi-gram<pre><code>def replace_pair(pair, vocab, indices):\n    \"\"\"\n    \u5c06\u51fa\u73b0\u7684\u6240\u6709\u7684('A', 'B')\u66ff\u6362\u6210'AB'\u3002\n    Args:\n        pair: \u4e00\u4e2a\u7531\u4e24\u4e2a\u5143\u7d20\u7ec4\u6210\u7684\u5143\u7ec4\uff0c\u4ee3\u8868\u5f85\u66ff\u6362\u7684\u7b26\u53f7\u5bf9\uff0c\u5f62\u5982 ('A', 'B')\u3002\n        vocab: \u4e00\u4e2a\u7531\u8bcd\u53ca\u5176\u8bcd\u9891\u7ec4\u6210\u7684\u5217\u8868\uff0c\u5176\u4e2d\u6bcf\u4e2a\u5143\u7d20\u90fd\u662f\u4e00\u4e2a\u5143\u7ec4\uff0c\n               \u5f62\u5982 (word, freq)\uff0c\u5176\u4e2d word \u662f\u4e00\u4e2a\u7531\u5355\u8bcd\u7ec4\u6210\u7684\u5143\u7ec4\uff0cfreq \u662f\u8be5\u8bcd\u7684\u8bcd\u9891\u3002\n        indices: \u4e00\u4e2a\u5b57\u5178\uff0c\u7528\u4e8e\u5b58\u50a8\u7b26\u53f7\u5bf9\u5728 vocab \u4e2d\u7684\u7d22\u5f15\u3002\n\n    Returns:\n        \u4e00\u4e2a\u5217\u8868\uff0c\u5305\u542b\u66ff\u6362\u8fc7\u7a0b\u4e2d\u53d1\u751f\u7684\u53d8\u5316\uff0c\u6bcf\u4e2a\u5143\u7d20\u90fd\u662f\u4e00\u4e2a\u56db\u5143\u7ec4\uff0c\u5f62\u5982 (j, new_word, word, freq)\uff0c\n        \u5176\u4e2d j \u662f\u66ff\u6362\u540e\u7684\u8bcd\u5728 vocab \u4e2d\u7684\u7d22\u5f15\uff0cnew_word \u662f\u66ff\u6362\u540e\u7684\u8bcd\uff0cword \u662f\u66ff\u6362\u524d\u7684\u8bcd\uff0cfreq \u662f\u8be5\u8bcd\u7684\u8bcd\u9891\u3002\n\n    \"\"\"\n    first, second = pair\n    pair_str = ''.join(pair)    # \u5c06\u5e7f\u4e49\u7684bi-graim\u5408\u5e76\u5728\u4e00\u8d77\uff0c\u5f62\u5982 ('A', 'B') -&gt; 'AB'\n    pair_str = pair_str.replace('\\\\','\\\\\\\\')\n    changes = []\n    # \u8fd9\u4e2a\u6b63\u5219\u8868\u8fbe\u5f0f\u7528\u4e8e\u5339\u914d\u5b57\u7b26\u4e32\u4e2d\u7531 first \u548c second \u7ec4\u6210\u7684\uff0c\u524d\u540e\u4e0d\u63a5\u89e6\u5176\u4ed6\u975e\u7a7a\u767d\u5b57\u7b26\u7684\u6a21\u5f0f\u3002\n    pattern = re.compile(r'(?&lt;!\\S)' + re.escape(first + ' ' + second) + r'(?!\\S)')\n    if sys.version_info &lt; (3, 0):\n        iterator = indices[pair].iteritems()\n    else:\n        # \u83b7\u53d6bi-gram\u5728indices\u5b57\u5178\u4e2d\u7684\u7d22\u5f15\n        # bi-gram\u7684\u7d22\u5f15\uff0c\u8868\u793a\u7684\u662f\u8be5\u5b57\u7b26\u5bf9\u51fa\u73b0\u7684\u4f4d\u7f6e\u4ee5\u53ca\u8be5\u4f4d\u7f6e\u4e0a\u51fa\u73b0\u7684\u9891\u7387\n        iterator = indices[pair].items()\n\n    # j \u8868\u793apari\u51fa\u73b0\u7684\u4f4d\u7f6e\uff0cfreq \u8868\u793apair\u5728\u8be5\u4f4d\u7f6e\u4e0a\u51fa\u73b0\u7684\u9891\u7387\n    for j, freq in iterator:\n        if freq &lt; 1:\n            continue\n        word, freq = vocab[j]\n        new_word = ' '.join(word)\n        new_word = pattern.sub(pair_str, new_word)\n        new_word = tuple(new_word.split(' '))\n\n        vocab[j] = (new_word, freq)\n        changes.append((j, new_word, word, freq))\n\n    return changes\n</code></pre></p>"},{"location":"tokenizer/bpe/#bi-gram_2","title":"\u7b2c\u516d\u6b65\uff1a\u91cd\u65b0\u8ba1\u7b97bi-gram\u7684\u9891\u7387","text":"<p>\u5728\u7b2c\u4e94\u6b65\u4e2d\uff0c\u5c06\u6240\u6709\u7684bi-gram\u90fd\u5408\u5e76\u6210\u65b0\u7684\u5b57\u7b26\uff0c\u90a3\u4e48\u5c31\u9700\u8981\u91cd\u65b0\u8ba1\u7b97\u6bcf\u4e2a\u5b57\u7b26\u7684\u9891\u7387\uff0c\u8ba1\u7b97\u7684\u4ee3\u7801\u5982\u4e0b\u6240\u793a\uff1a</p> \u7b2c\u516d\u6b65\uff1a\u91cd\u65b0\u8ba1\u7b97bi-gram\u7684\u9891\u7387<pre><code>def update_pair_statistics(pair, changed, stats, indices):\n    \"\"\"\n    \u66f4\u65b0\u7b26\u53f7\u5bf9\u7684\u7d22\u5f15\u548c\u9891\u7387\n    \u5982\u679c\u5408\u5e76\u4e86\u7b26\u53f7\uff0c\u90a3\u4e48\u53ea\u9700\u8981\u66f4\u65b0\u6240\u6709\u5305\u542b\u8be5\u7b26\u53f7\u7684\u7b26\u53f7\u5bf9\u3002\n\n    Args:\n        pair (tuple): \u9700\u8981\u5408\u5e76\u7684\u7b26\u53f7\u5bf9\n        changed (list): \u5305\u542b\u53d1\u751f\u53d8\u5316\u7684\u56db\u5143\u7ec4 (j, word, old_word, freq)\uff0c\n                        \u5176\u4e2d j \u4e3a\u53d8\u5316\u4f4d\u7f6e\uff0cword \u4e3a\u53d8\u5316\u540e\u7684\u5355\u8bcd\uff0cold_word \u4e3a\u53d8\u5316\u524d\u7684\u5355\u8bcd\uff0cfreq \u4e3a\u53d8\u5316\u9891\u7387\n        stats (dict): \u7b26\u53f7\u5bf9\u7684\u9891\u7387\u7edf\u8ba1\n        indices (dict): \u7b26\u53f7\u5bf9\u7684\u7d22\u5f15\u7edf\u8ba1\n\n    Returns:\n        None\n\n    \"\"\"\n    stats[pair] = 0\n    indices[pair] = defaultdict(int)\n    first, second = pair\n    new_pair = first + second\n    for j, word, old_word, freq in changed:\n\n        # find all instances of pair, and update frequency/indices around it\n        i = 0\n        while True:\n            # find first symbol\n            try:\n                # \u5728\u8001\u7684 word \u4e2d\u627e\u7b2c\u4e00\u4e2a first \u51fa\u73b0\u7684\u4f4d\u7f6e\n                i = old_word.index(first, i)\n            except ValueError:\n                break\n            # if first symbol is followed by second symbol, we've found an occurrence of pair (old_word[i:i+2])\n            # \u5982\u679c\u627e\u5230\u5bf9\u5e94\u7684bi-gram, \u66f4\u65b0\u9891\u7387\u548c\u7d22\u5f15\n            if i &lt; len(old_word) - 1 and old_word[i + 1] == second:\n                # assuming a symbol sequence \"A B C\", if \"B C\" is merged, reduce the frequency of \"A B\"\n                if i:   # \u8868\u793ai\u4e0d\u662f0\uff0ci-1&gt;=0\uff0c\u5047\u8bbe\u662f\u539f\u59cb\u7684\u5e8f\u5217\u53ef\u80fd\u662f('A', 'B', 'C'), ('B', 'C') \u662f\u8981\u5408\u5e76\u7684\u5e8f\u5217\n                    prev = old_word[i-1:i+1]    # \u53d6\u51fa ('A', 'B')\uff0c\u56e0\u4e3a('B', 'C')\u8981\u5408\u5e76\u4e86\uff0c\u56e0\u6b64\u4e0d\u5b58\u5728('A', 'B') \u7ec4\u5408\uff0c\u4f1a\u4ea7\u751f\u65b0\u7684('A', 'BC')\n                    stats[prev] -= freq         # \u7edf\u8ba1\u4fe1\u606f\u4e2d\u53bb\u6389\u5f53\u524d word \u4e2d ('A', 'B') \u7684\u9891\u7387\n                    indices[prev][j] -= 1       # \u7d22\u5f15\u4e2d\u53bb\u6389\u5f53\u524d word \u4e2d ('A', 'B') \u7684\u7d22\u5f15\n                if i &lt; len(old_word) - 2:\n                    # assuming a symbol sequence \"A B C B\", if \"B C\" is merged, reduce the frequency of \"C B\".\n                    # however, skip this if the sequence is A B C B C, because the frequency of \"C B\" will be reduced by the previous code block\n                    # 1. \u4e0d\u662f (A, B, C, B) \u5e8f\u5217\n                    # 2. \u5982\u679c\u662f (A, B, C, B) \u5e8f\u5217\uff0c\u90a3\u4e48\u5f53\u524d\u7684(B, C, B) \u662f\u6574\u4e2a\u5e8f\u5217\u7684\u6700\u540e\u4e09\u4e2a\u5b57\u7b26\n                    # 3. \u5982\u679c\u662f (A, B, C, B) \u5e8f\u5217\uff0c\u90a3\u4e48\u5f53\u524d\u7684(B, C, B) \u4e0d\u662f\u6574\u4e2a\u5e8f\u5217\u7684\u6700\u540e\u4e09\u4e2a\u5b57\u7b26\uff0c\u90a3\u4e48\u4e0d\u80fd\u662f(A, B, C, B, C) \u8fd9\u79cd\u60c5\u5f62\n                    if old_word[i + 2] != first or i &gt;= len(old_word) - 3 or old_word[i + 3] != second:\n                        # \u83b7\u53d6\u4e0b\u4e00\u4e2abi-gram\uff0c\u5047\u8bbe\u5f53\u524d\u7684\u5e8f\u5217\u662f ('A', 'B', 'C', 'D')\uff0c\n                        # \u7531\u4e8e\u5408\u5e76\u4e86 ('B', 'C')\uff0c\u90a3\u4e48\u4e0b\u4e00\u4e2abi-gram\u662f ('C', 'D')\uff0c\u8be5\u53e5\u5b50\u4e0a\u5f53\u524d\u4f4d\u7f6e\u4e00\u5b9a\u4e0d\u4f1a\u518d\u51fa\u73b0('C', 'D')\u4e86\n                        # \u8fd9\u662f\u56e0\u4e3a\u5f53\u524d\u7684('C') \u88ab('B', 'C') \u5408\u5e76\u4e86\uff0c\u5e94\u8be5\u51fa\u73b0\u7684\u662f('A', 'BC') \u4e0e ('BC', 'D')\n                        nex = old_word[i + 1:i + 3] # \u53d6\u51fa ('C', 'D')\n                        stats[nex] -= freq          # \u79fb\u9664\u5f53\u524d\u53e5\u5b50\u4e2d\u8be5\u4f4d\u7f6e\u8d21\u732e\u7684 ('C', 'D') \u7684\u9891\u7387\n                        indices[nex][j] -= 1\n                i += 2  # \u8df3\u8fc7 ('B', 'C')\n            else:\n                # \u53ef\u80fd\u51fa\u73b0 ('B', 'B', 'C')  \u8fd9\u79cd\u60c5\u51b5\uff0c\u627e\u5230\u7b2c\u4e00\u4e2a ('B') \u4e4b\u540e\u5e76\u4e0d\u6ee1\u8db3\u6761\u4ef6\uff0c\u8df3\u8fc7\uff0c\u7ee7\u7eed\u627e\u4e0b\u4e00\u4e2a ('B')\n                # \u76f4\u5230\u627e\u5230 ('B', 'C') \u6ee1\u8db3\u6761\u4ef6\uff0c\u8fdb\u5165\u5230\u4e0a\u9762\u7684 if \u5757\u4e2d\n                i += 1\n\n        i = 0\n        while True:\n            try:\n                # find new pair\n                # \u5728\u65b0\u7684 word \u4e2d\u627e\u7b2c\u4e00\u4e2a new_pair \u51fa\u73b0\u7684\u4f4d\u7f6e\n                i = word.index(new_pair, i)\n            except ValueError:\n                break\n            # assuming a symbol sequence \"A BC D\", if \"B C\" is merged, increase the frequency of \"A BC\"\n            if i:   # \u65b0\u7684\u7b26\u53f7\u4e0d\u662f\u5728\u53e5\u9996\n                prev = word[i - 1:i + 1]    # \u53d6\u51fa ('A', 'BC')\n                stats[prev] += freq         # \u7edf\u8ba1\u4fe1\u606f\u4e2d\u589e\u52a0\u5f53\u524d word \u4e2d ('A', 'BC') \u7684\u9891\u7387\n                indices[prev][j] += 1       # \u7d22\u5f15\u4e2d\u589e\u52a0\u5f53\u524d word \u4e2d ('A', 'BC') \u7684\u7d22\u5f15\n\n            # assuming a symbol sequence \"A BC B\", if \"B C\" is merged, increase the frequency of \"BC B\"\n            # however, if the sequence is A BC BC, skip this step because the count of \"BC BC\" will be incremented by the previous code block\n            # \u5982\u679c\u5408\u5e76\u4e86 ('B', 'C')\uff0c\u90a3\u4e48\u5f53\u524d\u4f4d\u7f6e\u7684\u4e0b\u4e00\u4e2a\u5b57\u7b26\u662f 'D'\uff0c\u90a3\u4e48 ('BC', 'D') \u5e94\u8be5\u88ab\u589e\u52a0\u5230\u8bcd\u5178\u4e2d\n            # \u5982\u679c\u5f53\u524d\u4f4d\u7f6e\u7684\u4e0b\u4e00\u4e2a\u5b57\u7b26\u662f 'BC'\uff0c\u90a3\u4e48 ('BC', 'BC') \u4e0d\u5904\u7406\n            # \u8fd9\u662f\u56e0\u4e3a\u5728\u627e\u4e0b\u4e00\u4e2a ('BC')\u7684\u65f6\u5019\uff0c\u4f1a\u901a\u8fc7\u7edf\u8ba1 ('BC', 'BC') \u4f5c\u4e3a prev \u6dfb\u52a0\u5230\u7edf\u8ba1\u4fe1\u606f\u4e2d\uff0c\n            # \u5982\u679c\u901a\u8fc7 nex \u6dfb\u52a0\uff0c\u90a3\u4e48\u4e0b\u9762\u901a\u8fc7 prev \u4f1a\u91cd\u590d\u8ba1\u7b97\n            if i &lt; len(word) - 1 and word[i + 1] != new_pair:   \n                nex = word[i:i + 2]     # \u53d6\u51fa ('BC', 'D')\n                stats[nex] += freq      # \u7edf\u8ba1\u4fe1\u606f\u4e2d\u589e\u52a0\u5f53\u524d word \u4e2d ('BC', 'D') \u7684\u9891\u7387\n                indices[nex][j] += 1    # \u7d22\u5f15\u4e2d\u589e\u52a0\u5f53\u524d word \u4e2d ('BC', 'D') \u7684\u7d22\u5f15\n            i += 1\n</code></pre>"},{"location":"tokenizer/bpe/#_4","title":"\u7b2c\u4e03\u6b65\uff1a\u526a\u679d","text":"<p>\u5728\u8bcd\u5178\u4e2d\u53bb\u6389\u4e0d\u7b26\u5408\u8981\u6c42\u7684\u8bcd\uff0c\u6bd4\u5982\u9891\u7387\u8fc7\u4f4e\u7684\u8bcd\uff0c\u5b9e\u73b0\u7684\u4ee3\u7801\u5982\u4e0b\uff1a \u526a\u679d<pre><code>def prune_stats(stats, big_stats, threshold):\n    \"\"\"\n    \u6839\u636e\u9608\u503c\u4fee\u526a\u7edf\u8ba1\u5b57\u5178\uff0c\u4ee5\u63d0\u9ad8max()\u64cd\u4f5c\u7684\u6548\u7387\u3002\n    \u4e3a\u4e86\u4f18\u5316max()\u7684\u6548\u7387\uff0c\u4fee\u526a\u7edf\u8ba1\u5b57\u5178\n\n    \u7b26\u53f7\u5bf9\u7684\u9891\u7387\u6c38\u8fdc\u4e0d\u4f1a\u589e\u52a0\uff0c\u56e0\u6b64\u4fee\u526a\u901a\u5e38\u662f\u5b89\u5168\u7684\n    \uff08\u76f4\u5230\u6211\u4eec\u53d1\u73b0\u6700\u9891\u7e41\u7684\u7b26\u53f7\u5bf9\u6bd4\u4e4b\u524d\u4fee\u526a\u8fc7\u7684\u7b26\u53f7\u5bf9\u7684\u9891\u7387\u8fd8\u8981\u4f4e\uff09\n    big_stats\u4fdd\u7559\u4e86\u5b8c\u6574\u7684\u7edf\u8ba1\u4fe1\u606f\uff0c\u4ee5\u4fbf\u5728\u6211\u4eec\u9700\u8981\u8bbf\u95ee\u88ab\u4fee\u526a\u7684\u9879\u65f6\u4f7f\u7528\n\n    Args:\n        stats (dict): \u7b26\u53f7\u5bf9\u7edf\u8ba1\u5b57\u5178\u3002\n        big_stats (dict): \u5b8c\u6574\u7684\u7b26\u53f7\u5bf9\u7edf\u8ba1\u5b57\u5178\uff0c\u7528\u4e8e\u8bbf\u95ee\u5df2\u4fee\u526a\u7684\u9879\u3002\n        threshold (int): \u4fee\u526a\u9608\u503c\uff0c\u5c0f\u4e8e\u8be5\u503c\u7684\u7b26\u53f7\u5bf9\u5c06\u88ab\u4fee\u526a\u3002\n\n    Returns:\n        None\n\n    \u6ce8\u610f\uff1a\n        \u7b26\u53f7\u5bf9\u7684\u9891\u7387\u6c38\u8fdc\u4e0d\u4f1a\u589e\u52a0\uff0c\u56e0\u6b64\u4fee\u526a\u901a\u5e38\u662f\u5b89\u5168\u7684\uff08\u76f4\u5230\u6700\u9891\u7e41\u7684\u7b26\u53f7\u5bf9\u7684\u9891\u7387\u4f4e\u4e8e\u4e4b\u524d\u4fee\u526a\u7684\u7b26\u53f7\u5bf9\u7684\u9891\u7387\uff09\u3002\n        big_stats\u4fdd\u5b58\u5b8c\u6574\u7684\u7edf\u8ba1\u4fe1\u606f\uff0c\u4ee5\u4fbf\u5728\u9700\u8981\u65f6\u8bbf\u95ee\u5df2\u4fee\u526a\u7684\u9879\u3002\n    \"\"\"\n    for item, freq in list(stats.items()):\n        # \u5220\u9664\u9891\u7387\u5c0f\u4e8e\u9608\u503c\u7684\u9879\n        if freq &lt; threshold:\n            del stats[item]\n            if freq &lt; 0:\n                big_stats[item] += freq\n            else:\n                big_stats[item] = freq\n</code></pre></p>"},{"location":"tokenizer/bpe/#_5","title":"\u63a8\u7406","text":""},{"location":"tokenizer/introduction/","title":"\u4ecb\u7ecd","text":""},{"location":"tokenizer/introduction/#1-tokenizer","title":"1. \u4ec0\u4e48\u662ftokenizer","text":"<p>\u5bf9\u6587\u672c\u8fdb\u884c\u5206\u8bcd\u5c31\u662f\u5c06\u4e00\u6bb5\u6587\u672c\u5206\u5272\u6210\u5f88\u591a\u5355\u8bcd\u6216\u8005\u5b50\u5355\u8bcd\uff0c\u8fd9\u4e9b\u5355\u8bcd\u6216\u8005\u5b50\u5355\u8bcd\u7136\u540e\u4f1a\u901a\u8fc7\u4e00\u4e2a\u67e5\u8be2\u8868\u683c\u88ab\u8f6c\u6362\u5230 <code>id</code>\u3002\u5c06\u5355\u8bcd\u6216\u8005\u5b50\u5355\u8bcd\u8f6c\u6362\u5230id\u662f\u5f88\u76f4\u622a\u4e86\u5f53\u7684\uff0c\u4e5f\u5c31\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u6620\u5c04\u3002\u6240\u4ee5\u8fd9\u4e48\u6765\u770b\uff0c\u6211\u4eec\u4e3b\u8981\u5173\u6ce8\u5c06\u4e00\u6bb5\u6587\u672c\u5206\u5272\u6210\u5f88\u591a\u5355\u8bcd\u6216\u8005\u5f88\u591a\u5b50\u5355\u8bcd\uff08\u50cf\uff1a\u5bf9\u4e00\u6bb5\u6587\u672c\u8fdb\u884c\u5206\u8bcd\uff09\u3002\u66f4\u52a0\u51c6\u786e\u7684\u6765\u8bf4\uff0c\u6211\u4eec\u5c06\u5173\u6ce8\u5728\ud83e\udd17 Transformers\u5185\u7528\u5230\u7684\u4e09\u79cd\u4e3b\u8981\u7c7b\u578b\u7684\u5206\u8bcd\u5668\uff1a<code>Byte-Pair Encoding (BPE)</code>, <code>WordPiece</code>, \u548c <code>SentencePiece</code>\uff0c\u5e76\u4e14\u7ed9\u51fa\u4e86\u793a\u4f8b\uff0c\u54ea\u4e2a\u6a21\u578b\u7528\u5230\u4e86\u54ea\u79cd\u7c7b\u578b\u7684\u5206\u8bcd\u5668\u3002</p> <p>\u6ce8\u610f\u5230\u5728\u6bcf\u4e2a\u6a21\u578b\u7684\u4e3b\u9875\uff0c\u4f60\u53ef\u4ee5\u67e5\u770b\u6587\u6863\u4e0a\u76f8\u5173\u7684\u5206\u8bcd\u5668\uff0c\u5c31\u53ef\u4ee5\u77e5\u9053\u9884\u8bad\u7ec3\u6a21\u578b\u4f7f\u7528\u4e86\u54ea\u79cd\u7c7b\u578b\u7684\u5206\u8bcd\u5668\u3002 \u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5982\u679c\u6211\u4eec\u67e5\u770b <code>BertTokenizer</code>\uff0c\u6211\u4eec\u5c31\u80fd\u770b\u5230\u6a21\u578b\u4f7f\u7528\u4e86 <code>WordPiece</code>\u3002</p> <p>\u5c06\u4e00\u6bb5\u6587\u672c\u5206\u8bcd\u5230\u5c0f\u5757\u662f\u4e00\u4e2a\u6bd4\u5b83\u770b\u8d77\u6765\u66f4\u52a0\u56f0\u96be\u7684\u4efb\u52a1\uff0c\u5e76\u4e14\u6709\u5f88\u591a\u65b9\u5f0f\u6765\u5b9e\u73b0\u5206\u8bcd\u3002 \u4e3e\u4e2a\u4f8b\u5b50\uff0c\u8ba9\u6211\u4eec\u770b\u770b\u8fd9\u4e2a\u53e5\u5b50 <code>\"Don't you love \ud83e\udd17 Transformers? We sure do.\"</code>\uff0c\u5bf9\u8fd9\u6bb5\u6587\u672c\u5206\u8bcd\u7684\u4e00\u4e2a\u7b80\u5355\u65b9\u5f0f\uff0c\u5c31\u662f\u4f7f\u7528\u7a7a\u683c\u6765\u5206\u8bcd\uff0c\u5f97\u5230\u7684\u7ed3\u679c\u662f\uff1a</p> Bash<pre><code>[\"Don\", \"'\", \"t\", \"you\", \"love\", \"\ud83e\udd17\", \"Transformers\", \"?\", \"We\", \"sure\", \"do\", \".\"]\n</code></pre> <p>\u5206\u8bcd\u7684\u7ed3\u679c\u66f4\u597d\u4e86\uff0c\u7136\u800c\uff0c\u8fd9\u4e48\u505a\u4e5f\u662f\u4e0d\u597d\u7684\uff0c\u5206\u8bcd\u600e\u4e48\u5904\u7406\u5355\u8bcd <code>\"Don't\"</code>\u3002<code>\"Don't\"</code>\u7684\u542b\u4e49\u662f<code>\"do not\"</code>\uff0c\u6240\u4ee5\u8fd9\u4e48\u5206\u8bcd <code>[\"Do\", \"n't\"]</code> \u4f1a\u66f4\u597d\u3002\u73b0\u5728\u5f00\u59cb\u4e8b\u60c5\u5c31\u5f00\u59cb\u53d8\u5f97\u590d\u6742\u8d77\u6765\u4e86\uff0c\u90e8\u5206\u7684\u539f\u56e0\u662f\u6bcf\u4e2a\u6a21\u578b\u90fd\u6709\u5b83\u81ea\u5df1\u7684\u5206\u8bcd\u7c7b\u578b\u3002\u4f9d\u8d56\u4e8e\u6211\u4eec\u5e94\u7528\u5728\u6587\u672c\u5206\u8bcd\u4e0a\u7684\u89c4\u5219\uff0c\u76f8\u540c\u7684\u6587\u672c\u4f1a\u4ea7\u751f\u4e0d\u540c\u7684\u5206\u8bcd\u8f93\u51fa\u3002\u7528\u5728\u8bad\u7ec3\u6570\u636e\u4e0a\u7684\u5206\u8bcd\u89c4\u5219\uff0c\u88ab\u7528\u6765\u5bf9\u8f93\u5165\u505a\u5206\u8bcd\u64cd\u4f5c\uff0c\u4e00\u4e2a\u9884\u8bad\u7ec3\u6a21\u578b\u624d\u4f1a\u6b63\u786e\u7684\u6267\u884c\u3002</p> <p><code>spaCy</code> \u548c <code>Moses</code> \u662f\u4e24\u4e2a\u53d7\u6b22\u8fce\u7684\u57fa\u4e8e\u89c4\u5219\u7684\u5206\u8bcd\u5668\u3002\u5c06\u8fd9\u4e24\u4e2a\u5206\u8bcd\u5668\u5e94\u7528\u5728\u793a\u4f8b\u6587\u672c\u4e0a\uff0c<code>spaCy</code> \u548c <code>Moses</code> \u4f1a\u8f93\u51fa\u7c7b\u4f3c\u4e0b\u9762\u7684\u7ed3\u679c\uff1a</p> Bash<pre><code>[\"Do\", \"n't\", \"you\", \"love\", \"\ud83e\udd17\", \"Transformers\", \"?\", \"We\", \"sure\", \"do\", \".\"]\n</code></pre> <p>\u53ef\u89c1\u4e0a\u9762\u7684\u5206\u8bcd\u4f7f\u7528\u5230\u4e86\u7a7a\u683c\u548c\u6807\u70b9\u7b26\u53f7\u7684\u5206\u8bcd\u65b9\u5f0f\uff0c\u4ee5\u53ca\u57fa\u4e8e\u89c4\u5219\u7684\u5206\u8bcd\u65b9\u5f0f\u3002\u7a7a\u683c\u548c\u6807\u70b9\u7b26\u53f7\u5206\u8bcd\u4ee5\u53ca\u57fa\u4e8e\u89c4\u5219\u7684\u5206\u8bcd\u90fd\u662f\u5355\u8bcd\u5206\u8bcd\u7684\u4f8b\u5b50\u3002 \u4e0d\u90a3\u4e48\u4e25\u683c\u7684\u6765\u8bf4\uff0c\u5355\u8bcd\u5206\u8bcd\u7684\u5b9a\u4e49\u5c31\u662f\u5c06\u53e5\u5b50\u5206\u5272\u5230\u5f88\u591a\u5355\u8bcd\u3002\u7136\u800c\u5c06\u6587\u672c\u5206\u5272\u5230\u66f4\u5c0f\u7684\u5757\u662f\u7b26\u5408\u76f4\u89c9\u7684\uff0c\u5f53\u5904\u7406\u5927\u578b\u6587\u672c\u8bed\u6599\u5e93\u65f6\uff0c\u4e0a\u9762\u7684\u5206\u8bcd\u65b9\u6cd5\u4f1a\u5bfc\u81f4\u5f88\u591a\u95ee\u9898\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u7a7a\u683c\u548c\u6807\u70b9\u7b26\u53f7\u5206\u8bcd\u901a\u5e38\u4f1a\u4ea7\u751f\u4e00\u4e2a\u975e\u5e38\u5927\u7684\u8bcd\u5178\uff08\u4f7f\u7528\u5230\u7684\u6240\u6709\u4e0d\u91cd\u590d\u7684\u5355\u8bcd\u548ctokens\u7684\u96c6\u5408\uff09\u3002 \u50cf\uff1a<code>Transformer XL</code> \u4f7f\u7528\u7a7a\u683c\u548c\u6807\u70b9\u7b26\u53f7\u5206\u8bcd\uff0c\u7ed3\u679c\u4f1a\u4ea7\u751f\u4e00\u4e2a\u5927\u5c0f\u662f267,735\u7684\u8bcd\u5178\uff01</p> <p>\u8fd9\u4e48\u5927\u7684\u4e00\u4e2a\u8bcd\u5178\u5bb9\u91cf\uff0c\u8feb\u4f7f\u6a21\u578b\u6709\u7740\u4e00\u4e2a\u5de8\u5927\u7684embedding\u77e9\u9635\uff0c\u4ee5\u53ca\u5de8\u5927\u7684\u8f93\u5165\u548c\u8f93\u51fa\u5c42\uff0c\u8fd9\u4f1a\u589e\u52a0\u5185\u5b58\u4f7f\u7528\u91cf\uff0c\u4e5f\u4f1a\u63d0\u9ad8\u65f6\u95f4\u590d\u6742\u5ea6\u3002\u901a\u5e38\u60c5\u51b5\u4e0b\uff0ctransformers\u6a21\u578b\u51e0\u4e4e\u6ca1\u6709\u8bcd\u5178\u5bb9\u91cf\u5927\u4e8e <code>50,000</code> \u7684\uff0c\u7279\u522b\u662f\u53ea\u5728\u4e00\u79cd\u8bed\u8a00\u4e0a\u9884\u8bad\u7ec3\u7684\u6a21\u578b\u3002</p> <p>\u6240\u4ee5\u5982\u679c\u7b80\u5355\u7684\u7a7a\u683c\u548c\u6807\u70b9\u7b26\u53f7\u5206\u8bcd\u8ba9\u4eba\u4e0d\u6ee1\u610f\uff0c\u4e3a\u4ec0\u4e48\u4e0d\u7b80\u5355\u7684\u5bf9\u5b57\u7b26\u5206\u8bcd\uff1f</p> <p>\u5c3d\u7ba1\u5b57\u7b26\u5206\u8bcd\u662f\u975e\u5e38\u7b80\u5355\u7684\uff0c\u5e76\u4e14\u80fd\u6781\u5927\u7684\u51cf\u5c11\u5185\u5b58\u4f7f\u7528\uff0c\u964d\u4f4e\u65f6\u95f4\u590d\u6742\u5ea6\uff0c\u4f46\u662f\u8fd9\u6837\u505a\u4f1a\u8ba9\u6a21\u578b\u5f88\u96be\u5b66\u5230\u6709\u610f\u4e49\u7684\u8f93\u5165\u8868\u8fbe\u3002\u50cf\uff1a \u6bd4\u8d77\u5b66\u5230\u5355\u8bcd <code>\"today\"</code> \u7684\u4e00\u4e2a\u6709\u610f\u4e49\u7684\u4e0a\u4e0b\u6587\u72ec\u7acb\u7684\u8868\u8fbe\uff0c\u5b66\u5230\u5b57\u6bcd <code>\"t\"</code> \u7684\u4e00\u4e2a\u6709\u610f\u4e49\u7684\u4e0a\u4e0b\u6587\u72ec\u7acb\u7684\u8868\u8fbe\u662f\u76f8\u5f53\u56f0\u96be\u7684\u3002\u56e0\u6b64\uff0c \u5b57\u7b26\u5206\u8bcd\u7ecf\u5e38\u4f1a\u4f34\u968f\u7740\u6027\u80fd\u7684\u4e0b\u964d\u3002\u6240\u4ee5\u4e3a\u4e86\u83b7\u5f97\u6700\u597d\u7684\u7ed3\u679c\uff0ctransformers\u6a21\u578b\u5728\u5355\u8bcd\u7ea7\u522b\u5206\u8bcd\u548c\u5b57\u7b26\u7ea7\u522b\u5206\u8bcd\u4e4b\u95f4\u4f7f\u7528\u4e86\u4e00\u4e2a\u6298\u4e2d\u7684\u65b9\u6848\u88ab\u79f0\u4f5c \u5b50\u8bcd\u5206\u8bcd \u3002</p>"},{"location":"tokenizer/introduction/#2","title":"2. \u4ec0\u4e48\u662f\u5b50\u8bcd\u5206\u8bcd","text":"<p>\u5b50\u8bcd\u5206\u8bcd\u7b97\u6cd5\u4f9d\u8d56\u8fd9\u6837\u7684\u539f\u5219\uff1a\u9891\u7e41\u4f7f\u7528\u7684\u5355\u8bcd\u4e0d\u5e94\u8be5\u88ab\u5206\u5272\u6210\u66f4\u5c0f\u7684\u5b50\u8bcd\uff0c\u4f46\u662f\u5f88\u5c11\u4f7f\u7528\u7684\u5355\u8bcd\u5e94\u8be5\u88ab\u5206\u89e3\u5230\u6709\u610f\u4e49\u7684\u5b50\u8bcd\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff1a <code>\"annoyingly\"</code> \u80fd\u88ab\u770b\u4f5c\u4e00\u4e2a\u5f88\u5c11\u4f7f\u7528\u7684\u5355\u8bcd\uff0c\u80fd\u88ab\u5206\u89e3\u6210 <code>\"annoying\"</code> \u548c <code>\"ly\"</code>\u3002<code>\"annoying\"</code> \u548c <code>\"ly\"</code> \u4f5c\u4e3a\u72ec\u7acb\u5730\u5b50\u8bcd\uff0c\u51fa\u73b0\u7684\u6b21\u6570\u90fd\u5f88\u9891\u7e41\u3002\u4e0e\u6b64\u540c\u65f6\u5355\u8bcd <code>\"annoyingly\"</code> \u7684\u542b\u4e49\u53ef\u4ee5\u901a\u8fc7\u7ec4\u5408 <code>\"annoying\"</code> \u548c <code>\"ly\"</code> \u7684\u542b\u4e49\u6765\u83b7\u5f97\u3002\u5728\u7c98\u5408\u548c\u80f6\u6c34\u8bed\u79cd\u4e0a\uff0c \u50cf\u571f\u8033\u5176\u8bed\uff0c\u8fd9\u4e48\u505a\u662f\u76f8\u5f53\u6709\u7528\u7684\uff0c\u5728\u8fd9\u6837\u7684\u8bed\u8a00\u91cc\uff0c\u901a\u8fc7\u7ebf\u6027\u7ec4\u5408\u5b50\u8bcd\uff0c\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u4f60\u80fd\u5f62\u6210\u4efb\u610f\u957f\u7684\u590d\u6742\u7684\u5355\u8bcd\u3002</p> <p>\u5b50\u8bcd\u5206\u8bcd\u5141\u8bb8\u6a21\u578b\u6709\u4e00\u4e2a\u5408\u7406\u7684\u8bcd\u5178\u5927\u5c0f\uff0c\u800c\u4e14\u80fd\u5b66\u5230\u6709\u610f\u4e49\u7684\u4e0a\u4e0b\u6587\u72ec\u7acb\u5730\u8868\u8fbe\u3002\u9664\u6b64\u4ee5\u5916\uff0c\u5b50\u8bcd\u5206\u8bcd\u53ef\u4ee5\u8ba9\u6a21\u578b\u5904\u7406\u4ee5\u524d\u4ece\u6765\u6ca1\u89c1\u8fc7\u7684\u5355\u8bcd\uff0c \u65b9\u5f0f\u662f\u901a\u8fc7\u5206\u89e3\u8fd9\u4e9b\u5355\u8bcd\u5230\u5df2\u77e5\u7684\u5b50\u8bcd\uff0c\u4e3e\u4e2a\u4f8b\u5b50\uff1a<code>BertTokenizer</code> \u5bf9\u53e5\u5b50 <code>\"I have a new GPU!\"</code> \u5206\u8bcd\u7684\u7ed3\u679c\u5982\u4e0b\uff1a</p> <p>Python<pre><code>from transformers import BertTokenizer\n\ntokenizer = BertTokenizer.from_pretrained(\"google-bert/bert-base-uncased\")\ntokenizer.tokenize(\"I have a new GPU!\")\n</code></pre> Bash<pre><code>[\"i\", \"have\", \"a\", \"new\", \"gp\", \"##u\", \"!\"]\n</code></pre> \u56e0\u4e3a\u6211\u4eec\u6b63\u5728\u8003\u8651\u4e0d\u533a\u5206\u5927\u5c0f\u5199\u7684\u6a21\u578b\uff0c\u53e5\u5b50\u9996\u5148\u88ab\u8f6c\u6362\u6210\u5c0f\u5199\u5b57\u6bcd\u5f62\u5f0f\u3002\u6211\u4eec\u53ef\u4ee5\u89c1\u5230\u5355\u8bcd <code>[\"i\", \"have\", \"a\", \"new\"]</code> \u5728\u5206\u8bcd\u5668\u7684\u8bcd\u5178\u5185\uff0c\u4f46\u662f\u8fd9\u4e2a\u5355\u8bcd <code>\"gpu\"</code> \u4e0d\u5728\u8bcd\u5178\u5185\u3002\u6240\u4ee5\uff0c\u5206\u8bcd\u5668\u5c06 <code>\"gpu\"</code> \u5206\u5272\u6210\u5df2\u77e5\u7684\u5b50\u8bcd <code>[\"gp\" and \"##u\"]</code> \u3002<code>\"##\"</code> \u610f\u5473\u7740\u5269\u4e0b\u7684 token\u5e94\u8be5\u9644\u7740\u5728\u524d\u9762\u90a3\u4e2atoken\u7684\u540e\u9762\uff0c\u4e0d\u5e26\u7a7a\u683c\u7684\u9644\u7740\uff08\u5206\u8bcd\u7684\u89e3\u7801\u6216\u8005\u53cd\u5411\uff09\u3002</p> <p>\u53e6\u5916\u4e00\u4e2a\u4f8b\u5b50\uff0c<code>XLNetTokenizer</code> \u5bf9\u524d\u9762\u7684\u6587\u672c\u4f8b\u5b50\u5206\u8bcd\u7ed3\u679c\u5982\u4e0b\uff1a</p> Python<pre><code>from transformers import XLNetTokenizer\n\ntokenizer = XLNetTokenizer.from_pretrained(\"xlnet/xlnet-base-cased\")\ntokenizer.tokenize(\"Don't you love \ud83e\udd17 Transformers? We sure do.\")\n</code></pre> Bash<pre><code>[\"\u2581Don\", \"'\", \"t\", \"\u2581you\", \"\u2581love\", \"\u2581\", \"\ud83e\udd17\", \"\u2581\", \"Transform\", \"ers\", \"?\", \"\u2581We\", \"\u2581sure\", \"\u2581do\", \".\"]\n</code></pre> <p>\u5f53\u6211\u4eec\u67e5\u770b <code>SentencePiece</code> \u65f6\u4f1a\u56de\u8fc7\u5934\u6765\u89e3\u91ca\u8fd9\u4e9b <code>\"\u2581\"</code> \u7b26\u53f7\u7684\u542b\u4e49\u3002\u6b63\u5982\u4f60\u80fd\u89c1\u5230\u7684\uff0c\u5f88\u5c11\u4f7f\u7528\u7684\u5355\u8bcd <code>\"Transformers\"</code> \u80fd\u88ab\u5206\u5272\u5230\u66f4\u52a0\u9891\u7e41\u4f7f\u7528\u7684\u5b50\u8bcd <code>\"Transform\"</code> \u548c <code>\"ers\"</code> \u3002</p> <p>\u73b0\u5728\u8ba9\u6211\u4eec\u6765\u770b\u770b\u4e0d\u540c\u7684\u5b50\u8bcd\u5206\u5272\u7b97\u6cd5\u662f\u600e\u4e48\u5de5\u4f5c\u7684\uff0c\u6ce8\u610f\u5230\u6240\u6709\u7684\u8fd9\u4e9b\u5206\u8bcd\u7b97\u6cd5\u4f9d\u8d56\u4e8e\u67d0\u4e9b\u8bad\u7ec3\u7684\u65b9\u5f0f\uff0c\u8fd9\u4e9b\u8bad\u7ec3\u901a\u5e38\u5728\u8bed\u6599\u5e93\u4e0a\u5b8c\u6210\uff0c \u76f8\u5e94\u7684\u6a21\u578b\u4e5f\u662f\u5728\u8fd9\u4e2a\u8bed\u6599\u5e93\u4e0a\u8bad\u7ec3\u7684\u3002</p>"},{"location":"tokenizer/introduction/#3-bpe","title":"3. BPE\u7b97\u6cd5","text":"<p>Byte-Pair Encoding (BPE)\u6765\u81ea\u4e8e <code>Neural Machine Translation of Rare Words with Subword Units (Sennrich et al., 2015)</code>\u3002BPE\u4f9d\u8d56\u4e8e\u4e00\u4e2a\u9884\u5206\u8bcd\u5668\uff0c\u8fd9\u4e2a\u9884\u5206\u8bcd\u5668\u4f1a\u5c06\u8bad\u7ec3\u6570\u636e\u5206\u5272\u6210\u5355\u8bcd\u3002\u9884\u5206\u8bcd\u53ef\u4ee5\u662f\u7b80\u5355\u7684\u7a7a\u683c\u5206\u8bcd\uff0c\u50cf\uff1a<code>GPT-2</code>\uff0c<code>RoBERTa</code>\u3002\u66f4\u52a0\u5148\u8fdb\u7684\u9884\u5206\u8bcd\u65b9\u5f0f\u5305\u62ec\u4e86\u57fa\u4e8e\u89c4\u5219\u7684\u5206\u8bcd\uff0c\u50cf\uff1a <code>XLM</code>\uff0c<code>FlauBERT</code>\u3002<code>FlauBERT</code> \u5728\u5927\u591a\u6570\u8bed\u8a00\u4f7f\u7528\u4e86 <code>Moses</code>\uff0c\u6216\u8005 <code>GPT</code>\u3002<code>GPT</code> \u4f7f\u7528\u4e86 <code>Spacy</code> \u548c <code>ftfy</code>\uff0c\u7edf\u8ba1\u4e86\u8bad\u7ec3\u8bed\u6599\u5e93\u4e2d\u6bcf\u4e2a\u5355\u8bcd\u7684\u9891\u6b21\u3002</p> <p>\u5728\u9884\u5206\u8bcd\u4ee5\u540e\uff0c\u751f\u6210\u4e86\u5355\u8bcd\u7684\u96c6\u5408\uff0c\u4e5f\u786e\u5b9a\u4e86\u8bad\u7ec3\u6570\u636e\u4e2d\u6bcf\u4e2a\u5355\u8bcd\u51fa\u73b0\u7684\u9891\u6b21\u3002\u4e0b\u4e00\u6b65\uff0cBPE\u4ea7\u751f\u4e86\u4e00\u4e2a\u57fa\u7840\u8bcd\u5178\uff0c\u5305\u542b\u4e86\u96c6\u5408\u4e2d\u6240\u6709\u7684\u7b26\u53f7\uff0c BPE\u5b66\u4e60\u878d\u5408\u7684\u89c4\u5219-\u7ec4\u5408\u57fa\u7840\u8bcd\u5178\u4e2d\u7684\u4e24\u4e2a\u7b26\u53f7\u6765\u5f62\u6210\u4e00\u4e2a\u65b0\u7684\u7b26\u53f7\u3002BPE\u4f1a\u4e00\u76f4\u5b66\u4e60\u76f4\u5230\u8bcd\u5178\u7684\u5927\u5c0f\u6ee1\u8db3\u4e86\u671f\u671b\u7684\u8bcd\u5178\u5927\u5c0f\u7684\u8981\u6c42\u3002\u6ce8\u610f\u5230 \u671f\u671b\u7684\u8bcd\u5178\u5927\u5c0f\u662f\u4e00\u4e2a\u8d85\u53c2\u6570\uff0c\u5728\u8bad\u7ec3\u8fd9\u4e2a\u5206\u8bcd\u5668\u4ee5\u524d\u5c31\u9700\u8981\u4eba\u4e3a\u6307\u5b9a\u3002</p> <p>\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u8ba9\u6211\u4eec\u5047\u8bbe\u5728\u9884\u5206\u8bcd\u4ee5\u540e\uff0c\u4e0b\u9762\u7684\u5355\u8bcd\u96c6\u5408\u4ee5\u53ca\u4ed6\u4eec\u7684\u9891\u6b21\u90fd\u5df2\u7ecf\u786e\u5b9a\u597d\u4e86\uff1a</p> Bash<pre><code>(\"hug\", 10), (\"pug\", 5), (\"pun\", 12), (\"bun\", 4), (\"hugs\", 5)\n</code></pre> <p>\u6240\u4ee5\uff0c\u57fa\u7840\u7684\u8bcd\u5178\u662f <code>[\"b\", \"g\", \"h\", \"n\", \"p\", \"s\", \"u\"]</code>\u3002\u5c06\u6240\u6709\u5355\u8bcd\u5206\u5272\u6210\u57fa\u7840\u8bcd\u5178\u5185\u7684\u7b26\u53f7\uff0c\u5c31\u53ef\u4ee5\u83b7\u5f97: Bash<pre><code>(\"h\" \"u\" \"g\", 10), (\"p\" \"u\" \"g\", 5), (\"p\" \"u\" \"n\", 12), (\"b\" \"u\" \"n\", 4), (\"h\" \"u\" \"g\" \"s\", 5)\n</code></pre></p> <p>BPE\u63a5\u7740\u4f1a\u7edf\u8ba1\u6bcf\u4e2a\u53ef\u80fd\u7684\u7b26\u53f7\u5bf9\u7684\u9891\u6b21\uff0c\u7136\u540e\u6311\u51fa\u51fa\u73b0\u6700\u9891\u7e41\u7684\u7684\u7b26\u53f7\u5bf9\uff0c\u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c<code>\"h\"</code> \u8ddf\u4e86 <code>\"u\"</code> \u51fa\u73b0\u4e86 <code>10 + 5 = 15</code> \u6b21 \uff0810\u6b21\u662f\u51fa\u73b0\u4e8610\u6b21 <code>\"hug\"</code> \uff0c5\u6b21\u662f\u51fa\u73b0\u4e865\u6b21 <code>\"hugs\"</code>\uff09\u3002\u7136\u800c\uff0c\u6700\u9891\u7e41\u7684\u7b26\u53f7\u5bf9\u662f <code>\"u\"</code> \u540e\u9762\u8ddf\u4e86\u4e2a <code>\"g\"</code>\uff0c\u603b\u5171\u51fa\u73b0\u4e86 <code>10 + 5 + 5 = 20</code> \u6b21\u3002\u56e0\u6b64\uff0c\u5206\u8bcd\u5668\u5b66\u5230\u7684\u7b2c\u4e00\u4e2a\u878d\u5408\u89c4\u5219\u662f\u7ec4\u5408\u6240\u6709\u7684 <code>\"u\"</code> \u540e\u9762\u8ddf\u4e86\u4e2a <code>\"g\"</code> \u7b26\u53f7\u3002\u4e0b\u4e00\u6b65\uff0c<code>\"ug\"</code> \u88ab\u52a0\u5165\u5230\u4e86\u8bcd\u5178\u5185\u3002\u5355\u8bcd\u7684\u96c6\u5408\u5c31\u53d8\u6210\u4e86\uff1a</p> <p>Bash<pre><code>(\"h\" \"ug\", 10), (\"p\" \"ug\", 5), (\"p\" \"u\" \"n\", 12), (\"b\" \"u\" \"n\", 4), (\"h\" \"ug\" \"s\", 5)\n</code></pre> \u5047\u8bbe\uff0cthe Byte-Pair Encoding\u5728\u8fd9\u4e2a\u65f6\u5019\u505c\u6b62\u8bad\u7ec3\uff0c\u5b66\u5230\u7684\u878d\u5408\u89c4\u5219\u5e76\u5e94\u7528\u5230\u5176\u4ed6\u65b0\u7684\u5355\u8bcd\u4e0a\uff08\u53ea\u8981\u8fd9\u4e9b\u65b0\u5355\u8bcd\u4e0d\u5305\u62ec\u4e0d\u5728\u57fa\u7840\u8bcd\u5178\u5185\u7684\u7b26\u53f7 \u5c31\u884c\uff09\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5355\u8bcd <code>\"bug\"</code> \u4f1a\u88ab\u5206\u8bcd\u5230 <code>[\"b\", \"ug\"]</code>\uff0c\u4f46\u662f <code>\"mug\"</code> \u4f1a\u88ab\u5206\u8bcd\u5230 <code>[\"&lt;unk&gt;\", \"ug\"]</code>\uff0c\u56e0\u4e3a\u7b26\u53f7 <code>\"m\"</code> \u4e0d\u5728\u57fa\u7840\u8bcd\u5178\u5185\u3002 \u901a\u5e38\u6765\u770b\u7684\u8bdd\uff0c\u5355\u4e2a\u5b57\u6bcd\u50cf <code>\"m\"</code> \u4e0d\u4f1a\u88ab <code>\"&lt;unk&gt;\"</code> \u7b26\u53f7\u66ff\u6362\u6389\uff0c\u56e0\u4e3a\u8bad\u7ec3\u6570\u636e\u901a\u5e38\u5305\u62ec\u4e86\u6bcf\u4e2a\u5b57\u6bcd\uff0c\u6bcf\u4e2a\u5b57\u6bcd\u81f3\u5c11\u51fa\u73b0\u4e86\u4e00\u6b21\uff0c\u4f46\u662f\u5728\u7279\u6b8a\u7684\u7b26\u53f7 \u4e2d\u4e5f\u53ef\u80fd\u53d1\u751f\u50cf <code>emojis</code>\u3002</p> <p>\u5c31\u50cf\u4e4b\u524d\u63d0\u5230\u7684\u90a3\u6837\uff0c\u8bcd\u5178\u7684\u5927\u5c0f\uff0c\u5373\u57fa\u7840\u8bcd\u5178\u7684\u5927\u5c0f + \u878d\u5408\u7684\u6570\u91cf\uff0c\u662f\u4e00\u4e2a\u9700\u8981\u914d\u7f6e\u7684\u8d85\u53c2\u6570\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff1a<code>GPT</code> \u7684\u8bcd\u5178\u5927\u5c0f\u662f <code>40,478</code>\uff0c\u56e0\u4e3aGPT\u6709\u7740 <code>478</code> \u4e2a\u57fa\u7840\u8bcd\u5178\u5185\u7684\u5b57\u7b26\uff0c\u5728 <code>40,000</code> \u6b21\u878d\u5408\u4ee5\u540e\u9009\u62e9\u4e86\u505c\u6b62\u8bad\u7ec3\u3002</p>"},{"location":"tokenizer/introduction/#4-byte-level-bpe","title":"4. Byte-level BPE","text":"<p>\u4e00\u4e2a\u5305\u542b\u4e86\u6240\u6709\u53ef\u80fd\u7684\u57fa\u7840\u5b57\u7b26\u7684\u57fa\u7840\u5b57\u5178\u53ef\u80fd\u4f1a\u975e\u5e38\u5927\uff0c\u5982\u679c\u8003\u8651\u5c06\u6240\u6709\u7684unicode\u5b57\u7b26\u4f5c\u4e3a\u57fa\u7840\u5b57\u7b26\u3002\u4e3a\u4e86\u62e5\u6709\u4e00\u4e2a\u66f4\u597d\u7684\u57fa\u7840\u8bcd\u5178\uff0cGPT-2\u4f7f\u7528\u4e86\u5b57\u8282 \u4f5c\u4e3a\u57fa\u7840\u8bcd\u5178\uff0c\u8fd9\u662f\u4e00\u4e2a\u975e\u5e38\u806a\u660e\u7684\u6280\u5de7\uff0c\u8feb\u4f7f\u57fa\u7840\u8bcd\u5178\u662f256\u5927\u5c0f\uff0c\u800c\u4e14\u786e\u4fdd\u4e86\u6240\u6709\u57fa\u7840\u5b57\u7b26\u5305\u542b\u5728\u8fd9\u4e2a\u8bcd\u5178\u5185\u3002\u4f7f\u7528\u4e86\u5176\u4ed6\u7684\u89c4\u5219\u6765\u5904\u7406\u6807\u70b9\u7b26\u53f7\uff0c\u8fd9\u4e2aGPT2\u7684\u5206\u8bcd\u5668\u80fd\u5bf9\u6bcf\u4e2a\u6587\u672c\u8fdb\u884c\u5206\u8bcd\uff0c\u4e0d\u9700\u8981\u4f7f\u7528\u5230 <code>&lt;unk&gt;</code> \u7b26\u53f7\u3002GPT-2\u6709\u4e00\u4e2a\u5927\u5c0f\u662f50,257 \u7684\u8bcd\u5178\uff0c\u5bf9\u5e94\u5230256\u5b57\u8282\u7684\u57fa\u7840tokens\uff0c\u4e00\u4e2a\u7279\u6b8a\u7684\u6587\u672c\u7ed3\u675ftoken\uff0c\u8fd9\u4e9b\u7b26\u53f7\u7ecf\u8fc7\u4e8650,000\u6b21\u878d\u5408\u5b66\u4e60\u3002</p>"},{"location":"tokenizer/introduction/#5-word-level","title":"5. Word-level","text":"<p>WordPiece\u662f\u5b50\u8bcd\u5206\u8bcd\u7b97\u6cd5\uff0c\u88ab\u7528\u5728BERT\uff0cDistilBERT\uff0c\u548cElectra\u3002 \u8fd9\u4e2a\u7b97\u6cd5\u53d1\u5e03\u5728Japanese and Korean Voice Search (Schuster et al., 2012) \u548cBPE\u975e\u5e38\u76f8\u4f3c\u3002WordPiece\u9996\u5148\u521d\u59cb\u5316\u4e00\u4e2a\u8bcd\u5178\uff0c\u8fd9\u4e2a\u8bcd\u5178\u5305\u542b\u4e86\u51fa\u73b0\u5728\u8bad\u7ec3\u6570\u636e\u4e2d\u7684\u6bcf\u4e2a\u5b57\u7b26\uff0c\u7136\u540e\u9012\u8fdb\u7684\u5b66\u4e60\u4e00\u4e2a\u7ed9\u5b9a\u6570\u91cf\u7684\u878d\u5408\u89c4\u5219\u3002\u548cBPE\u76f8\u6bd4\u8f83\uff0c WordPiece\u4e0d\u4f1a\u9009\u62e9\u51fa\u73b0\u9891\u6b21\u6700\u5927\u7684\u7b26\u53f7\u5bf9\uff0c\u800c\u662f\u9009\u62e9\u4e86\u52a0\u5165\u5230\u5b57\u5178\u4ee5\u540e\u80fd\u6700\u5927\u5316\u8bad\u7ec3\u6570\u636e\u4f3c\u7136\u503c\u7684\u7b26\u53f7\u5bf9\u3002</p> <p>\u6240\u4ee5\u8fd9\u5230\u5e95\u610f\u5473\u7740\u4ec0\u4e48\uff1f\u53c2\u8003\u524d\u9762\u7684\u4f8b\u5b50\uff0c\u6700\u5927\u5316\u8bad\u7ec3\u6570\u636e\u7684\u4f3c\u7136\u503c\uff0c\u7b49\u4ef7\u4e8e\u627e\u5230\u4e00\u4e2a\u7b26\u53f7\u5bf9\uff0c\u5b83\u4eec\u7684\u6982\u7387\u9664\u4ee5\u8fd9\u4e2a\u7b26\u53f7\u5bf9\u4e2d\u7b2c\u4e00\u4e2a\u7b26\u53f7\u7684\u6982\u7387\uff0c\u63a5\u7740\u9664\u4ee5\u7b2c\u4e8c\u4e2a\u7b26\u53f7\u7684\u6982\u7387\uff0c\u5728\u6240\u6709\u7684\u7b26\u53f7\u5bf9\u4e2d\u5546\u6700\u5927\u3002\u50cf\uff1a\u5982\u679c <code>\"ug\"</code> \u7684\u6982\u7387\u9664\u4ee5 <code>\"u\"</code> \u9664\u4ee5 <code>\"g\"</code> \u7684\u6982\u7387\u7684\u5546\uff0c\u6bd4\u5176\u4ed6\u4efb\u4f55\u7b26\u53f7\u5bf9\u66f4\u5927\uff0c \u8fd9\u4e2a\u65f6\u5019\u624d\u80fd\u878d\u5408\"u\"\u548c\"g\"\u3002\u76f4\u89c9\u4e0a\uff0cWordPiece\uff0c\u548cBPE\u6709\u70b9\u70b9\u4e0d\u540c\uff0cWordPiece\u662f\u8bc4\u4f30\u878d\u5408\u4e24\u4e2a\u7b26\u53f7\u4f1a\u5931\u53bb\u7684\u91cf\uff0c\u6765\u786e\u4fdd\u8fd9\u4e48\u505a\u662f\u503c\u5f97\u7684\u3002</p>"},{"location":"tokenizer/introduction/#6-unigram","title":"6. Unigram","text":"<p>Unigram\u662f\u4e00\u4e2a\u5b50\u8bcd\u5206\u8bcd\u5668\u7b97\u6cd5\uff0c\u4ecb\u7ecd\u89c1Subword Regularization: Improving Neural Network Translation Models with Multiple Subword Candidates (Kudo, 2018)\u3002\u548cBPE\u6216\u8005WordPiece\u76f8\u6bd4\u8f83 \uff0cUnigram\u4f7f\u7528\u5927\u91cf\u7684\u7b26\u53f7\u6765\u521d\u59cb\u5316\u5b83\u7684\u57fa\u7840\u5b57\u5178\uff0c\u7136\u540e\u9010\u6e10\u7684\u7cbe\u7b80\u6bcf\u4e2a\u7b26\u53f7\u6765\u83b7\u5f97\u4e00\u4e2a\u66f4\u5c0f\u7684\u8bcd\u5178\u3002\u4e3e\u4f8b\u6765\u770b\u57fa\u7840\u8bcd\u5178\u80fd\u591f\u5bf9\u5e94\u6240\u6709\u7684\u9884\u5206\u8bcd \u7684\u5355\u8bcd\u4ee5\u53ca\u6700\u5e38\u89c1\u7684\u5b50\u5b57\u7b26\u4e32\u3002Unigram\u6ca1\u6709\u76f4\u63a5\u7528\u5728\u4efb\u4f55transformers\u7684\u4efb\u4f55\u6a21\u578b\u4e2d\uff0c\u4f46\u662f\u548cSentencePiece\u4e00\u8d77\u8054\u5408\u4f7f\u7528\u3002</p> <p>\u5728\u6bcf\u4e2a\u8bad\u7ec3\u7684\u6b65\u9aa4\uff0cUnigram\u7b97\u6cd5\u5728\u5f53\u524d\u8bcd\u5178\u7684\u8bad\u7ec3\u6570\u636e\u4e0a\u5b9a\u4e49\u4e86\u4e00\u4e2a\u635f\u5931\u51fd\u6570\uff08\u7ecf\u5e38\u5b9a\u4e49\u4e3alog\u4f3c\u7136\u51fd\u6570\u7684\uff09\uff0c\u8fd8\u5b9a\u4e49\u4e86\u4e00\u4e2aunigram\u8bed\u8a00\u6a21\u578b\u3002 \u7136\u540e\uff0c\u5bf9\u8bcd\u5178\u5185\u7684\u6bcf\u4e2a\u7b26\u53f7\uff0c\u7b97\u6cd5\u4f1a\u8ba1\u7b97\u5982\u679c\u8fd9\u4e2a\u7b26\u53f7\u4ece\u8bcd\u5178\u5185\u79fb\u9664\uff0c\u603b\u7684\u635f\u5931\u4f1a\u5347\u9ad8\u591a\u5c11\u3002Unigram\u7136\u540e\u4f1a\u79fb\u9664\u767e\u5206\u4e4bp\u7684\u7b26\u53f7\uff0c\u8fd9\u4e9b\u7b26\u53f7\u7684loss \u5347\u9ad8\u662f\u6700\u4f4e\u7684\uff08p\u901a\u5e38\u662f10%\u6216\u800520%\uff09\uff0c\u50cf\uff1a\u8fd9\u4e9b\u5728\u8bad\u7ec3\u6570\u636e\u4e0a\u5bf9\u603b\u7684\u635f\u5931\u5f71\u54cd\u6700\u5c0f\u7684\u7b26\u53f7\u3002\u91cd\u590d\u8fd9\u4e2a\u8fc7\u7a0b\uff0c\u76f4\u5230\u8bcd\u5178\u5df2\u7ecf\u8fbe\u5230\u4e86\u671f\u671b\u7684\u5927\u5c0f\u3002 \u4e3a\u4e86\u4efb\u4f55\u5355\u8bcd\u90fd\u80fd\u88ab\u5206\u8bcd\uff0cUnigram\u7b97\u6cd5\u603b\u662f\u4fdd\u7559\u57fa\u7840\u7684\u5b57\u7b26\u3002</p> <p>\u56e0\u4e3aUnigram\u4e0d\u662f\u57fa\u4e8e\u878d\u5408\u89c4\u5219\uff08\u548cBPE\u4ee5\u53caWordPiece\u76f8\u6bd4\u8f83\uff09\uff0c\u5728\u8bad\u7ec3\u4ee5\u540e\u7b97\u6cd5\u6709\u51e0\u79cd\u65b9\u5f0f\u6765\u5206\u8bcd\uff0c\u5982\u679c\u4e00\u4e2a\u8bad\u7ec3\u597d\u7684Unigram\u5206\u8bcd\u5668 \u7684\u8bcd\u5178\u662f\u8fd9\u4e2a\uff1a</p> <p>Bash<pre><code>[\"b\", \"g\", \"h\", \"n\", \"p\", \"s\", \"u\", \"ug\", \"un\", \"hug\"],\n</code></pre> \"hugs\"\u53ef\u4ee5\u88ab\u5206\u8bcd\u6210[\"hug\", \"s\"], [\"h\", \"ug\", \"s\"]\u6216\u8005[\"h\", \"u\", \"g\", \"s\"]\u3002\u6240\u4ee5\u9009\u62e9\u54ea\u4e00\u4e2a\u5462\uff1fUnigram\u5728\u4fdd\u5b58 \u8bcd\u5178\u7684\u65f6\u5019\u8fd8\u4f1a\u4fdd\u5b58\u8bad\u7ec3\u8bed\u6599\u5e93\u5185\u6bcf\u4e2atoken\u7684\u6982\u7387\uff0c\u6240\u4ee5\u5728\u8bad\u7ec3\u4ee5\u540e\u53ef\u4ee5\u8ba1\u7b97\u6bcf\u4e2a\u53ef\u80fd\u7684\u5206\u8bcd\u7ed3\u679c\u7684\u6982\u7387\u3002\u5b9e\u9645\u4e0a\u7b97\u6cd5\u7b80\u5355\u7684\u9009\u62e9\u6982\u7387 \u6700\u5927\u7684\u90a3\u4e2a\u5206\u8bcd\u7ed3\u679c\uff0c\u4f46\u662f\u4e5f\u4f1a\u63d0\u4f9b\u6982\u7387\u6765\u6839\u636e\u5206\u8bcd\u7ed3\u679c\u7684\u6982\u7387\u6765\u91c7\u6837\u4e00\u4e2a\u53ef\u80fd\u7684\u5206\u8bcd\u7ed3\u679c\u3002</p> <p>\u5206\u8bcd\u5668\u5728\u635f\u5931\u51fd\u6570\u4e0a\u8bad\u7ec3\uff0c\u8fd9\u4e9b\u635f\u5931\u51fd\u6570\u5b9a\u4e49\u4e86\u8fd9\u4e9b\u6982\u7387\u3002\u5047\u8bbe\u8bad\u7ec3\u6570\u636e\u5305\u542b\u4e86\u8fd9\u4e9b\u5355\u8bcd \\(x{1}\\), \\(\\dots\\), \\(x{N}\\)\uff0c\u4e00\u4e2a\u5355\u8bcd\\(x{i}\\) \u7684\u6240\u6709\u53ef\u80fd\u7684\u5206\u8bcd\u7ed3\u679c\u7684\u96c6\u5408\u5b9a\u4e49\u4e3a\\(S(x{i})\\)\uff0c\u7136\u540e\u603b\u7684\u635f\u5931\u5c31\u53ef\u4ee5\u5b9a\u4e49\u4e3a\uff1a</p>"},{"location":"tokenizer/introduction/#7-sentencepiece","title":"7. SentencePiece","text":"<p>\u76ee\u524d\u4e3a\u6b62\u63cf\u8ff0\u7684\u6240\u6709\u5206\u8bcd\u7b97\u6cd5\u90fd\u6709\u76f8\u540c\u7684\u95ee\u9898\uff1a\u5b83\u4eec\u90fd\u5047\u8bbe\u8f93\u5165\u7684\u6587\u672c\u4f7f\u7528\u7a7a\u683c\u6765\u5206\u5f00\u5355\u8bcd\u3002\u7136\u800c\uff0c\u4e0d\u662f\u6240\u6709\u7684\u8bed\u8a00\u90fd\u4f7f\u7528\u7a7a\u683c\u6765\u5206\u5f00\u5355\u8bcd\u3002 \u4e00\u4e2a\u53ef\u80fd\u7684\u89e3\u51b3\u65b9\u6848\u662f\u4f7f\u7528\u67d0\u79cd\u8bed\u8a00\u7279\u5b9a\u7684\u9884\u5206\u8bcd\u5668\u3002\u50cf\uff1aXLM\u4f7f\u7528\u4e86\u4e00\u4e2a\u7279\u5b9a\u7684\u4e2d\u6587\u3001\u65e5\u8bed\u548cThai\u7684\u9884\u5206\u8bcd\u5668\u3002 \u4e3a\u4e86\u66f4\u52a0\u5e7f\u6cdb\u7684\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0cSentencePiece: A simple and language independent subword tokenizer and detokenizer for Neural Text Processing (Kudo et al., 2018) \u5c06\u8f93\u5165\u6587\u672c\u770b\u4f5c\u4e00\u4e2a\u539f\u59cb\u7684\u8f93\u5165\u6d41\uff0c\u56e0\u6b64\u4f7f\u7528\u7684\u7b26\u5408\u96c6\u5408\u4e2d\u4e5f\u5305\u62ec\u4e86\u7a7a\u683c\u3002SentencePiece\u7136\u540e\u4f1a\u4f7f\u7528BPE\u6216\u8005unigram\u7b97\u6cd5\u6765\u4ea7\u751f\u5408\u9002\u7684 \u8bcd\u5178\u3002</p> <p>\u4e3e\u4f8b\u6765\u8bf4\uff0cXLNetTokenizer\u4f7f\u7528\u4e86SentencePiece\uff0c\u8fd9\u4e5f\u662f\u4e3a\u4ec0\u4e48\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\"\u2581\"\u7b26\u53f7\u5305\u542b\u5728\u8bcd\u5178\u5185\u3002SentencePiece\u89e3\u7801\u662f\u975e\u5e38\u5bb9\u6613\u7684\uff0c\u56e0\u4e3a\u6240\u6709\u7684tokens\u80fd\u88abconcatenate\u8d77\u6765\uff0c\u7136\u540e\u5c06\"\u2581\"\u66ff\u6362\u6210\u7a7a\u683c\u3002</p> <p>\u5e93\u5185\u6240\u6709\u4f7f\u7528\u4e86SentencePiece\u7684transformers\u6a21\u578b\uff0c\u4f1a\u548cunigram\u7ec4\u5408\u8d77\u6765\u4f7f\u7528\uff0c\u50cf\uff1a\u4f7f\u7528\u4e86SentencePiece\u7684\u6a21\u578b\u662fALBERT, XLNet\uff0cMarian\uff0c\u548cT5\u3002</p>"},{"location":"tokenizer/introduction/#_2","title":"\u53c2\u8003","text":"<ol> <li>https://huggingface.co/docs/transformers/v4.41.1/zh/tokenizer_summary</li> </ol>"},{"location":"tokenizer/tokenizer%E5%85%A5%E9%97%A8/","title":"LLM \u5206\u8bcd\u7b97\u6cd5 (BPE, WordPiece, Unigram)","text":""},{"location":"tokenizer/tokenizer%E5%85%A5%E9%97%A8/#_1","title":"\u4e00\u3001\u524d\u8a00","text":"<p>\u5728\u81ea\u7136\u8bed\u8a00\u5904\u7406\u9886\u57df, \u8bcd\u8bed \u548c \u53e5\u5b50 \u7684\u5212\u5206\u4e00\u76f4\u662f\u4e00\u5927\u96be\u9898\u3002</p> <ul> <li>\u53e5\u5b50 \u662f\u6a21\u578b\u8f93\u5165\u7684\u6700\u5c0f\u5355\u5143</li> <li>\u8bcd\u8bed(token) \u662f\u6a21\u578b\u5904\u7406\u7684\u6700\u5c0f\u5355\u5143\u3002</li> </ul> <p>\u5728\u76ee\u524d Transformer + \u5927\u8bed\u8a00\u6a21\u578b \u7684\u65f6\u4ee3, \u79d1\u7814\u754c\u5bf9 \u5206\u53e5 \u7684\u7814\u7a76\u51e0\u4e4e\u6ca1\u6709\u4e86, \u8f6c\u800c\u53d8\u6210\u4e86\u5bf9 \u6587\u672c\u5411\u91cf\u68c0\u7d22 (Dense Passage Retrieval) \u548c \u957f\u5ea6\u5916\u63a8\u6027 (Length Extrapolation) \u7684\u7814\u7a76\u3002\u800c\u5bf9\u4e8e\u90e8\u5206\u5de5\u4e1a\u754c\u7684\u4efb\u52a1\u6765\u8bf4, \u8fd9\u5c5e\u4e8e\u843d\u5730\u7684\u96be\u70b9\u4e4b\u4e00, \u9700\u8981\u7ed3\u5408\u5177\u4f53\u7684\u4efb\u52a1, \u914d\u5408\u5927\u91cf\u7684\u4eba\u5de5\u89c4\u5219\u6765\u5904\u7406\u3002</p> <p>\u540c\u65f6, \u5728\u5927\u6a21\u578b\u548c\u5927\u6570\u636e\u7684\u52a0\u6301\u4e0b, \u5206\u8bcd(tokenize) \u7b97\u6cd5\u7684\u51c6\u786e\u7387\u5bf9\u6a21\u578b\u6027\u80fd\u7684\u5f71\u54cd\u4e5f\u5927\u5927\u964d\u4f4e\u4e86\u3002\u5373\u4f7f\u5206\u8bcd\u4e0d\u5408\u7406\u6216\u8005\u5206\u9519\u4e86, \u6a21\u578b\u4e5f\u80fd\u591f \"\u7406\u89e3\" \u53e5\u5b50\u7684\u542b\u4e49, \u56e0\u6b64\u76f8\u5173\u9886\u57df\u7684\u7814\u7a76\u4e5f\u4e0d\u662f\u7279\u522b\u591a\u3002\u672c\u6587\u5c31\u6765\u804a\u4e00\u804a\u5927\u6a21\u578b\u65f6\u4ee3\u7684\u5206\u8bcd\u7b97\u6cd5\u3002</p> <p>\u6309\u7167\u8bed\u8a00\u4f53\u7cfb, \u5206\u8bcd\u7b97\u6cd5\u5927\u4f53\u4e0a\u53ef\u4ee5\u5206\u6210\u4e24\u79cd:</p> <ul> <li>\u4e2d\u6587\u5206\u8bcd: \u53e5\u5b50\u4e2d\u8bcd\u4e0e\u8bcd\u4e4b\u95f4\u6ca1\u6709\u5206\u9694\u7b26, \u6bd4\u65b9\u8bf4 \u6c49\u8bed, \u65e5\u8bed, \u97e9\u8bed\u3002</li> <li>\u82f1\u6587\u5206\u8bcd : \u53e5\u5b50\u4e2d\u7528 \u7a7a\u683c \u4f5c\u4e3a\u8bcd\u4e0e\u8bcd\u4e4b\u95f4\u7684\u5206\u9694\u7b26, \u6bd4\u65b9\u8bf4 \u82f1\u8bed, \u6cd5\u8bed, \u5fb7\u8bed\u3002</li> </ul> <p>\u4e0b\u9762, \u6211\u4eec\u5148\u5206\u522b\u4e86\u89e3\u4e00\u4e0b\u4e24\u79cd\u4f53\u7cfb\u7684\u5206\u8bcd\u65b9\u5f0f\u3002</p>"},{"location":"tokenizer/tokenizer%E5%85%A5%E9%97%A8/#_2","title":"\u4e8c\u3001\u4e2d\u6587\u5206\u8bcd","text":"<p>\u4e2d\u6587\u5206\u8bcd \u662f\u4e00\u4e2a\u72ec\u7acb\u7684 NLP \u4efb\u52a1, \u4e5f\u662f\u5165\u95e8 NLP \u5f88\u597d\u7684\u65b9\u5f0f\u4e4b\u4e00, \u4e3b\u8981\u7684\u65b9\u5f0f\u6709:</p> <ul> <li>\u57fa\u4e8e \u8bcd\u8868\u5339\u914d \u7684\u65b9\u5f0f (\u524d\u7f00\u5b57\u5178\u6811, AC \u81ea\u52a8\u673a)</li> <li>\u57fa\u4e8e n-gram \u7684 \u6982\u7387\u8def\u5f84\u65b9\u5f0f (\u7ef4\u7279\u6bd4\u7b97\u6cd5)</li> <li>\u8f6c\u5316\u4e3a \u5e8f\u5217\u6807\u6ce8 \u4efb\u52a1, \u4f7f\u7528 HMM, CRF \u6216\u8005 token classification \u7b49\u6a21\u578b</li> </ul> <p>\u5176\u4e2d, \u6700\u540e\u4e00\u79cd\u65b9\u5f0f\u9700\u8981\u4eba\u5de5\u6807\u6ce8\u6570\u636e, \u7136\u540e\u8bad\u7ec3\u6a21\u578b\u3002\u524d\u4e24\u79cd\u65b9\u5f0f\u9664\u4e86\u4eba\u5de5\u6807\u6ce8\u6570\u636e\u5916, \u8fd8\u53ef\u4ee5\u901a\u8fc7 \u65e0\u76d1\u7763\u5b66\u4e60 \u7684\u65b9\u5f0f\u751f\u6210\u6240\u9700\u8981 \u8bcd\u5178\u3002\u4e3a\u4e86\u548c\u5e8f\u5217\u6807\u6ce8\u4efb\u52a1\u76f8\u4e92\u5bf9\u5e94, \u6211\u4eec\u5c06 \u751f\u6210\u8bcd\u5178 \u7684\u8fc7\u7a0b\u4e5f\u79f0\u4e3a \"\u8bad\u7ec3\"\u3002</p> <p>\u5bf9\u4e8e\u7b2c\u4e00\u79cd\u65b9\u5f0f, \"\u8bad\u7ec3\" \u7684\u8fc7\u7a0b\u53ea\u9700\u8981\u6784\u5efa\u4e00\u4e2a \u8bcd\u8868 \u5373\u53ef, \u8fd9\u79cd\u7b97\u6cd5\u4e5f\u88ab\u79f0\u4e3a \u65b0\u8bcd\u53d1\u73b0, \u5177\u4f53\u7684\u53ef\u4ee5\u53bb\u770b Matrix67 \u7684\u535a\u5ba2: \u4e92\u8054\u7f51\u65f6\u4ee3\u7684\u793e\u4f1a\u8bed\u8a00\u5b66\uff1a\u57fa\u4e8eSNS\u7684\u6587\u672c\u6570\u636e\u6316\u6398\u3002</p> <p>\u800c\u5bf9\u4e8e\u7b2c\u4e8c\u79cd\u65b9\u5f0f, \"\u8bad\u7ec3\" \u7684\u8fc7\u7a0b\u9664\u4e86\u6784\u5efa \u8bcd\u8868 \u5916, \u8fd8\u8981\u8ba1\u7b97\u76f8\u5bf9\u5e94\u7684 \u6982\u7387\u3002\u5f53\u7136, \u4e0d\u540c\u7684\u5339\u914d\u65b9\u5f0f\u548c\u6982\u7387\u8def\u5f84\u8ba1\u7b97\u65b9\u5f0f, \"\u8bad\u7ec3\" \u8fc7\u7a0b\u662f\u4e0d\u4e00\u6837\u7684\u3002</p> <p>\u4e3a\u4e86\u65b9\u4fbf\u7406\u89e3\u548c\u8bf4\u660e, \u5728\u540e\u6587\u4e2d, \u4e2d\u6587\u5206\u8bcd\u7b97\u6cd5\u7edf\u79f0\u4e3a \u6587\u672c\u5207\u5206\u7b97\u6cd5, \u800c\u524d\u4e24\u79cd\u65b9\u5f0f\u7684\u65e0\u76d1\u7763\u8bad\u7ec3\u65b9\u6cd5\u79f0\u4e3a \u65e0\u76d1\u7763\u7684\u6587\u672c\u5207\u5206\u7b97\u6cd5\u3002</p>"},{"location":"tokenizer/tokenizer%E5%85%A5%E9%97%A8/#_3","title":"\u4e09\u3001\u82f1\u6587\u5206\u8bcd","text":"<p>\u5bf9\u4e8e\u82f1\u6587\u5206\u8bcd\u6765\u8bf4, \u4e00\u822c\u60c5\u51b5\u4e0b, \u57fa\u4e8e \u7a7a\u683c + \u6807\u70b9 \u5206\u8bcd\u5373\u53ef, \u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u5c31\u80fd\u89e3\u51b3\u3002</p> <p>\u4f46\u662f, \u5bf9\u4e8e\u6587\u672c\u751f\u6210\u4efb\u52a1\u6765\u8bf4, \u6211\u4eec\u9700\u8981 \u8bcd\u8868\u7ea7\u522b \u7684\u5206\u7c7b\u4efb\u52a1, \u5373 softmax \u56de\u5f52\u7684\u7c7b\u522b\u6570\u548c\u8bcd\u8868\u7684\u6570\u91cf\u662f\u4e00\u81f4\u7684\u3002\u6b64\u65f6, \u4e3b\u8981\u4f1a\u4ea7\u751f\u4ee5\u4e0b\u4e00\u4e9b\u95ee\u9898:</p> <ul> <li> <p>\u9996\u5148, \u662f\u8bcd\u8868\u8fc7\u5927\u7684\u95ee\u9898\u3002\u4e00\u822c\u60c5\u51b5\u4e0b, \u6bcf\u4e00\u79cd\u8bed\u8a00\u5e38\u7528\u8bcd\u5728 40 \u5230 50 \u4e07\u4e4b\u95f4, \u8fd9\u5c31\u610f\u5473\u7740\u6700\u540e\u7684\u5206\u7c7b\u4efb\u52a1\u7c7b\u522b\u6570\u5728 40 \u5230 50 \u4e07\u4e4b\u95f4, \u8ba1\u7b97\u7684\u5f00\u9500\u975e\u5e38\u4e4b\u5927, \u4f46\u4e5f\u4e0d\u662f\u4e0d\u80fd\u63a5\u53d7\u3002\u5728 word2vec \u4e2d\u4e5f\u6709\u7c7b\u4f3c\u7684\u95ee\u9898, \u53ef\u4ee5\u4f7f\u7528 \u8d1f\u91c7\u6837 (negative sampling) \u7684\u65b9\u5f0f\u6765\u8fd1\u4f3c\u8ba1\u7b97\u3002</p> </li> <li> <p>\u5176\u6b21, \u662f OOV (Out-of-vocabulary) \u7684\u95ee\u9898\u3002\u5bf9\u4e8e\u90a3\u4e9b\u4e0d\u5e38\u89c1\u7684, \u88ab\u6392\u9664\u5728\u8bcd\u8868\u4e4b\u5916\u7684\u8bcd\u8bed, \u6a21\u578b\u6c38\u8fdc\u4e0d\u80fd\u751f\u6210\u3002\u5728\u901a\u7528\u6a21\u578b\u8fc1\u79fb\u5230\u7279\u5b9a\u9886\u57df\u65f6, \u8fd9\u4e2a\u95ee\u9898\u4f1a\u7279\u522b\u660e\u663e\u3002</p> </li> </ul> <p>\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898, \u8bba\u6587\u4e2d\u5bf9\u82f1\u6587\u5206\u8bcd\u8fdb\u884c\u4e86\u4f18\u5316, \u63d0\u51fa\u4e86 subword \u5206\u8bcd \u65b9\u5f0f\u3002</p> <p>\u5176\u6838\u5fc3\u601d\u60f3\u5f88\u7b80\u5355: \u5728\u82f1\u6587\u4e2d, \u4e00\u4e9b\u82f1\u8bed\u5355\u8bcd\u8fd8\u53ef\u4ee5\u7ee7\u7eed\u62c6\u5206, \u62c6\u6210 \u524d\u7f00(prefix), \u8bcd\u6839(stem), \u540e\u7f00(suffix) \u7ec4\u5408\u7684\u5f62\u5f0f\u3002\u8fd9\u4e9b\u62c6\u5206\u51fa\u6765\u7684\u90e8\u5206\u4e00\u822c\u5177\u6709\u901a\u7528\u7684\u542b\u4e49, \u540c\u65f6\u5355\u8bcd\u7684\u542b\u4e49\u4e5f\u4e0e\u4e4b\u6709\u5173\u3002</p> <p>\u90a3\u4e48, \u6211\u4eec\u53ef\u4ee5\u5bf9\u6bcf\u4e00\u4e2a\u82f1\u6587\u5355\u8bcd\u6267\u884c \u6587\u672c\u5207\u5206\u7b97\u6cd5, \u5c06\u5176\u62c6\u5206\u6210\u66f4\u5c0f\u7684 subword, \u4ee5\u51cf\u5c11\u82f1\u6587\u8bcd\u8868\u7684\u6570\u91cf\u3002\u8fd9\u6837, \u5e38\u89c1\u7684\u8bcd\u76f4\u63a5\u5728\u8bcd\u8868\u4e2d, \u4e0d\u5e38\u89c1\u7684\u8bcd\u5219\u62c6\u6210 subword \u7ec4\u5408\u7684\u5f62\u5f0f\u3002\u540c\u65f6, \u8fd9\u4e9b subword \u53ef\u4ee5\u7ec4\u5408\u51fa\u8bad\u7ec3\u96c6\u4e2d\u6ca1\u6709\u82f1\u6587\u5355\u8bcd, \u90a3\u4e48\u5c31\u80fd\u89e3\u51b3 OOV \u7684\u95ee\u9898\u4e86\u3002</p> <p>\u6b64\u65f6, \u5206\u8bcd\u5206\u4e3a\u4e24\u4e2a\u9636\u6bb5:  * (1) \u5bf9\u53e5\u5b50\u4f7f\u7528\u7a7a\u683c + \u6807\u70b9\u5206\u8bcd, \u5206\u6210\u4e00\u4e2a\u4e00\u4e2a word; *  (2) \u5bf9\u6bcf\u4e00\u4e2a word \u4f7f\u7528 \u6587\u672c\u5207\u5206\u7b97\u6cd5, \u5206\u6210\u4e00\u4e2a\u4e00\u4e2a subword, \u4f5c\u4e3a\u6700\u7ec8\u7684\u7ed3\u679c\u3002</p> <p>\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b, \u4f7f\u7528 \u5e8f\u5217\u6807\u6ce8 \u7684\u5207\u5206\u7b97\u6cd5\u5f88\u56f0\u96be, \u56e0\u4e3a\u5176\u9700\u8981\u4eba\u5de5\u6807\u6ce8, \u6211\u4eec\u5f88\u96be\u53bb\u5b9a\u4e49\u5207\u5206\u65b9\u5f0f\u3002\u4e00\u822c\u90fd\u91c7\u7528\u65e0\u76d1\u7763\u7684\u6587\u672c\u5207\u5206\u7b97\u6cd5, \u4e5f\u5c31\u662f\u4f7f\u7528 \u5339\u914d \u6216\u8005 \u6982\u7387\u8def\u5f84 \u7684\u65b9\u5f0f, \u5e76\u901a\u8fc7\u65e0\u76d1\u7763\u7b97\u6cd5\u751f\u6210\u5206\u8bcd\u6240\u9700\u8981\u7684 \u8bcd\u8868 \u4ee5\u53ca \u6982\u7387\u3002\u5e38\u89c1\u7684\u7b97\u6cd5\u5305\u62ec: BPE, WordPiece, Unigram \u7b49\u7b49\u3002</p>"},{"location":"tokenizer/tokenizer%E5%85%A5%E9%97%A8/#_4","title":"\u56db\u3001\u591a\u8bed\u8a00\u5206\u8bcd\u6846\u67b6","text":"<p>\u5728 LLM \u65f6\u4ee3, \u6211\u4eec\u5e0c\u671b\u8bad\u7ec3\u51fa\u6765\u7684\u6a21\u578b\u662f \u8bed\u8a00\u65e0\u5173 \u7684, \u4e5f\u5c31\u610f\u5473\u7740\u652f\u6301\u6240\u6709\u7684\u8bed\u8a00\u3002\u6b64\u65f6, \u4e0a\u4e00\u90e8\u5206\u63d0\u5230\u7684\u4e24\u4e2a\u95ee\u9898\u4f1a\u66f4\u52a0\u7a81\u51fa: \u5168\u7403\u6709 300 \u591a\u79cd\u6587\u5b57\u7cfb\u7edf, \u5982\u679c\u6bcf\u4e00\u79cd\u8bed\u8a00\u6709 5 \u4e07\u4e2a\u5e38\u7528\u8bcd, \u90a3\u4e48\u8bcd\u8868\u5c31\u6709 1500 \u4e07\u4e4b\u591a, \u6b64\u65f6 softmax \u56de\u5f52\u8ba1\u7b97\u5f00\u9500\u5f88\u96be\u63a5\u53d7, \u540c\u65f6 OOV \u95ee\u9898\u4e5f\u5341\u5206\u4e25\u91cd\u3002\u4e00\u822c\u60c5\u51b5\u4e0b, \u6211\u4eec\u671f\u671b\u7684 \u8bcd\u8868 \u5927\u5c0f\u662f\u5728 4 \u4e07\u5230 10 \u4e07\u4e4b\u95f4\u3002</p> <p>\u4e00\u79cd\u53ef\u884c\u7684\u65b9\u5f0f\u662f\u76f4\u63a5\u6309\u7167 \u5b57\u7b26 \u6765\u5206, \u4e00\u4e2a\u5b57\u7b26\u4f5c\u4e3a\u4e00\u4e2a\u8bcd\u8bed, \u540c\u65f6\u82f1\u6587\u4e2d\u7684 \u7a7a\u683c \u4e5f\u5f53\u4f5c\u4e00\u4e2a\u8bcd\u8bed, \u8bcd\u8868\u5c31\u662f unicode \u4e2d\u5b9a\u4e49\u7684 15 \u4e07\u79cd\u5b57\u7b26\u3002\u8fd9\u79cd\u65b9\u5f0f\u5bf9\u4e8e\u4e2d\u6587\u6765\u8bf4\u6bd4\u8f83\u53cb\u597d, \u4f46\u662f\u5bf9\u4e8e\u82f1\u6587\u6765\u8bf4\u6548\u7387\u592a\u4f4e\u4e86: \u5bf9\u4e8e\u81ea\u56de\u5f52\u6a21\u578b\u6765\u8bf4, \u63a8\u7406\u65f6\u662f\u4e00\u4e2a\u4e00\u4e2a\u5b57\u7b26\u8e66\u51fa\u6765\u7684, \u8fd9\u663e\u7136\u4e0d\u80fd\u63a5\u53d7\u3002\u4e0d\u4ec5\u5982\u6b64, \u8bcd\u8868 \u7684\u5927\u5c0f\u4e5f\u4e0d\u7b26\u5408\u6211\u4eec\u7684\u671f\u671b * \u6ce8\u610f\uff1a\u5f53\u524d\uff082024-08-07 \u5f88\u591a\u5927\u6a21\u578b\u7684\u8bcd\u8868\u8d85\u8fc7\u4e8615w\uff0c\u56e0\u6b64\u8bcd\u8868\u6570\u76ee\u572815w\u4e0d\u662f\u4e00\u4e2a\u95ee\u9898\u3002</p> <p>\u90a3\u4e48\u5e94\u8be5\u600e\u4e48\u529e\u5462? \u76ee\u524d\u4e3b\u6d41\u7684\u505a\u6cd5\u662f\u4e0a\u4e00\u90e8\u5206 subword \u5206\u8bcd\u65b9\u5f0f\u7684\u6269\u5c55, \u6d41\u7a0b\u4e5f\u662f\u5206\u4e3a\u4e24\u6b65:</p> <ul> <li> <p>\u7b2c\u4e00\u6b65, \u5c06\u53e5\u5b50\u6309\u7167 \u7a7a\u683c \u5206\u8bcd, \u540c\u65f6\u5c06 \u7a7a\u683c \u4f5c\u4e3a\u8bcd\u8bed\u7684\u4e00\u90e8\u5206, \u6211\u4eec\u79f0\u5176\u4e3a word\u3002\u5982\u679c\u662f\u4e2d\u82f1\u6df7\u5408\u7684\u6587\u672c, \u90a3\u4e48 word \u53ef\u80fd\u662f\u82f1\u6587\u5355\u8bcd, \u4e5f\u53ef\u80fd\u662f\u4e2d\u6587\u7247\u6bb5\u3002\u4e3e\u4f8b\u6765\u8bf4, \"<code>Hello, World \u4f60\u597d\u4e16\u754c</code>\" \u5206\u6210\u4e86 \"<code>Hello,</code>\", \"<code>World</code>\", \"<code>\u4f60\u597d\u4e16\u754c</code>\" \u4e09\u4e2a word\u3002</p> <p>\u9700\u8981\u5f3a\u8c03\u4e00\u70b9, \u8fd9\u91cc\u5c06\u82f1\u6587\u4e2d\u7684 \u7a7a\u683c \u5f53\u4f5c\u8bcd\u8bed\u7684\u4e00\u90e8\u5206, \u8fd9\u610f\u5473\u7740\u82f1\u6587\u7f16\u7801\u548c\u89e3\u7801\u5177\u6709\u53ef\u9006\u6027, \u5373\u82f1\u6587\u7684\u89e3\u7801\u4e0d\u9700\u8981\u518d\u989d\u5916\u6dfb\u52a0 \u7a7a\u683c \u4e86\u3002\u5426\u5219, \u5982\u679c\u6a21\u578b\u751f\u6210\u7684\u6587\u672c\u662f\u4e2d\u82f1\u6df7\u5408\u7684, \u5904\u7406\u8d77\u6765\u4f1a\u975e\u5e38\u9ebb\u70e6\u3002</p> </li> <li> <p>\u7b2c\u4e8c\u6b65, \u5bf9\u6bcf\u4e00\u4e2a word \u91c7\u7528 \u6587\u672c\u5207\u5206\u7b97\u6cd5, \u53d8\u6210\u66f4\u5c0f\u7684 subword:</p> <ul> <li>\u5982\u679c\u662f\u82f1\u6587\u5355\u8bcd, \u4f1a\u88ab\u62c6\u6210\u66f4\u5c0f\u7684\u5b57\u6bcd\u7ec4\u5408, \u6bd4\u65b9\u8bf4, \"<code>Hello,</code>\" \u53ef\u4ee5\u88ab\u5206\u6210 \"<code>He</code>\", \"<code>llo</code>\", \"<code>,</code>\" \u4e09\u4e2a subword</li> <li>\u5982\u679c\u662f\u4e2d\u6587\u7247\u6bb5, \u5219\u4f1a\u88ab\u62c6\u6210\u66f4\u5c0f\u7684\u8bcd\u8bed, \u6bd4\u65b9\u8bf4, \"<code>\u4f60\u597d\u4e16\u754c</code>\" \u53ef\u4ee5\u5206\u6210 \"<code></code>\", \"<code>\u4f60\u597d</code>\", \"<code>\u4e16\u754c</code>\" \u4e09\u4e2a subword</li> </ul> </li> </ul> <p>\u4e00\u822c\u60c5\u51b5\u4e0b, \u6211\u4eec\u4f1a\u5c06\u8bed\u6599\u5e93\u4e2d\u6240\u6709\u7684\u5b57\u7b26\u90fd\u6dfb\u52a0\u5230 \u8bcd\u8868 \u4e2d\u3002\u90a3\u4e48\u5c31\u4e00\u5b9a\u6709 unicode \u652f\u6301\u7684, \u4f46\u662f \u8bcd\u8868 \u4e2d\u6ca1\u6709\u7684\u5b57\u7b26\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u6837\u7684\u95ee\u9898, \u6211\u4eec\u9700\u8981\u5f15\u5165 \u5b57\u8282, \u4e3b\u8981\u7684\u65b9\u5f0f\u6709\u4e24\u79cd:</p> <ul> <li> <p>\u7b2c\u4e00\u79cd: GPT-2 \u4f7f\u7528\u7684\u65b9\u5f0f: \u5c06 word \u76f4\u63a5\u7528 <code>utf-8</code> \u7f16\u7801\u6210 \u5b57\u8282\u6d41, \u7136\u540e\u5728\u5b57\u8282\u6d41\u4e0a\u91c7\u7528 \u6587\u672c\u5207\u5206\u7b97\u6cd5\u3002\u7531\u4e8e \u5b57\u8282 \u7684\u79cd\u7c7b\u6570\u662f\u56fa\u5b9a\u7684 256 \u79cd, \u5bf9 \u8bcd\u8868 \u7684\u5f71\u54cd\u5c31\u975e\u5e38\u5c0f\u4e86\u3002</p> </li> <li> <p>\u7b2c\u4e8c\u79cd: LLaMA \u548c sentencepiece \u4f7f\u7528\u7684\u65b9\u5f0f: \u8fd8\u662f\u5728 word \u4e0a\u9762\u91c7\u7528 \u6587\u672c\u5207\u5206\u7b97\u6cd5, \u540c\u65f6\u5c06 256 \u79cd \u5b57\u8282 \u52a0\u5165 \u8bcd\u8868 \u4e2d\u3002\u5728\u5206\u8bcd\u65f6, \u5982\u679c\u51fa\u73b0\u4e86\u672a\u77e5\u5b57\u7b26, \u90a3\u4e48\u5c06\u672a\u77e5\u5b57\u7b26\u7528 utf-8 \u7f16\u7801\u6210 \u5b57\u8282\u6d41, \u4e00\u4e2a\u5b57\u8282\u4f5c\u4e3a\u4e00\u4e2a subword \u52a0\u5165\u5206\u8bcd\u7ed3\u679c\u4e2d, \u8fd9\u6837\u5c31\u89e3\u51b3 OOV \u7684\u95ee\u9898\u4e86\u3002</p> </li> </ul> <p>\u7531\u4e8e\u5206\u8bcd\u7684\u7ed3\u679c\u4e2d\u5305\u542b \u5b57\u8282, \u73b0\u5728\u7684\u8bba\u6587\u4e2d\u90fd\u4f1a\u5c06\u5176\u79f0\u4e3a <code>byte-level</code>\u3002</p> <p>\u8fd9\u6837\u7684\u5206\u8bcd\u7ed3\u679c\u80af\u5b9a\u4f1a\u6709\u4e0d\u5408\u7406\u7684\u5730\u65b9\u3002\u6bd4\u65b9\u8bf4, \u4e24\u4e2a\u6c49\u5b57\u53ef\u80fd\u4f1a\u88ab\u5206\u6210\u4e09\u4e2a subword, \u6bcf\u4e00\u4e2a subword \u5305\u542b\u4e24\u4e2a\u5b57\u8282\u3002\u4e00\u822c\u60c5\u51b5\u4e0b, \u5728 utf-8 \u4e2d\u4e00\u4e2a\u6c49\u5b57\u5360\u4e09\u4e2a\u5b57\u8282, \u8fd9\u5c31\u610f\u5473\u7740\u4e2d\u95f4\u7684 subword \u662f\u7531\u7b2c\u4e00\u4e2a\u6c49\u5b57\u6700\u540e\u4e00\u4e2a\u5b57\u8282 \u548c \u7b2c\u4e8c\u4e2a\u6c49\u5b57\u7b2c\u4e00\u4e2a\u5b57\u8282\u6784\u6210, \u8fd9\u663e\u7136\u662f\u4e0d\u5408\u7406\u7684\u3002\u4f46\u662f\u5728\u5927\u6a21\u578b\u548c\u5927\u6570\u636e\u7684\u52a0\u6301\u4e0b, \u8fd9\u79cd\u4e0d\u5408\u7406\u7684\u95ee\u9898\u5e76\u4e0d\u5927\u3002</p> <p>\u4e0d\u4ec5\u5982\u6b64, \u751f\u6210\u7684\u6587\u672c\u4e5f\u53ef\u80fd\u4e0d\u5408\u7406, \u6709\u53ef\u80fd\u4f1a\u7ec4\u5408\u51fa unicode \u4e2d\u4e0d\u5b58\u5728\u7684\u5b57\u7b26\u3002\u8fd9\u4e2a\u65f6\u5019, \u6211\u4eec\u53ea\u9700\u8981\u5ffd\u7565\u6389\u9519\u8bef\u7684\u90e8\u5206\u5373\u53ef (\u5728 Python \u4e2d, \u5c06 bytes \u5bf9\u8c61\u4e2d encode \u65b9\u6cd5 \u7684 errors \u53c2\u6570\u8bbe\u7f6e\u4e3a \"ignore\" \u5c31\u80fd\u5b9e\u73b0\u4e86)\u3002\u5982\u679c\u8fd9\u79cd\u60c5\u51b5\u7ecf\u5e38\u51fa\u73b0, \u4f60\u9700\u8981\u8bc4\u4f30\u4e00\u4e0b\u6a21\u578b\u8bad\u7ec3\u7684\u662f\u5426\u5145\u5206\u3002</p> <p>\u81f3\u6b64, \u5206\u8bcd\u7684\u6846\u67b6\u5c31\u642d\u5efa\u5b8c\u6210\u4e86, \u5269\u4e0b\u7684\u5c31\u662f\u5982\u4f55\u8bbe\u8ba1 \u65e0\u76d1\u7763\u7684\u6587\u672c\u5207\u5206\u7b97\u6cd5\u3002\u5e38\u89c1\u7684\u6709 BPE \u548c Unigram \u7b97\u6cd5, \u5e38\u7528\u7684\u5de5\u5177\u6709 sentencepiece \u548c tokenizers\u3002</p> <p>\u4e0b\u9762, \u5c31\u8ba9\u6211\u4eec\u770b\u770b\u5177\u4f53\u7684 \u65e0\u76d1\u7763\u7684\u6587\u672c\u5207\u5206\u7b97\u6cd5\u3002\u4e3a\u4e86\u53d9\u8ff0\u65b9\u4fbf, \u5728\u4e0b\u6587\u4e2d, \u6211\u5c06 \u6587\u672c \u7edf\u79f0\u4e3a word, \u5176\u53ef\u4ee5\u662f \u82f1\u6587\u5355\u8bcd, \u4e2d\u6587\u6587\u672c\u7247\u6bb5, \u4e00\u4e2a\u5b8c\u6574\u7684\u53e5\u5b50, \u5b57\u8282\u6d41\u7b49\u7b49\u3002\u5177\u4f53\u7684\u8981\u770b\u6846\u67b6\u600e\u4e48\u8bbe\u8ba1\u4e86\u3002</p>"},{"location":"tokenizer/tokenizer%E5%85%A5%E9%97%A8/#bpe","title":"\u4e94\u3001BPE \u5206\u8bcd\u7b97\u6cd5","text":"<p>BPE \u7b97\u6cd5\u7684\u5168\u79f0\u662f Byte-Pair Encoding, \u6700\u65e9\u662f 1994 \u5e74\u63d0\u51fa\u5e94\u7528\u4e8e \u6570\u636e\u538b\u7f29 \u4efb\u52a1\u3002\u5728 2015 \u5e74, Neural Machine Translation of Rare Words with Subword Units \u63d0\u51fa\u5c06\u5176\u5ef6\u7533\u81f3 \u6587\u672c\u5206\u8bcd \u4efb\u52a1, \u540c\u65f6\u6ca1\u6709\u6539\u53d8\u7b97\u6cd5\u7684\u540d\u79f0\u3002(\u5982\u679c\u4f60\u4e0d\u4e86\u89e3\u4e4b\u524d\u7684\u6570\u636e\u538b\u7f29\u7b97\u6cd5, \u53ef\u80fd\u4f1a\u597d\u5947\u4e3a\u4ec0\u4e48\u662f\u8fd9\u4e2a\u540d\u5b57)\u3002</p> <p>OpenAI \u5173\u4e8e GPT \u7684\u4e00\u7cfb\u5217\u5de5\u4f5c, \u4ee5\u53ca Meta \u5173\u4e8e LLaMA \u7684\u4e00\u7cfb\u5217\u5de5\u4f5c\u90fd\u662f\u4f7f\u7528\u8fd9\u79cd\u5206\u8bcd\u65b9\u5f0f\u3002OpenAI \u867d\u7136\u6ca1\u6709\u5f00\u6e90 GPT-3 \u6a21\u578b\u7684\u53c2\u6570\u6743\u91cd, \u4f46\u662f\u5f00\u6e90\u4e86\u5206\u8bcd\u5e93 tiktoken, \u5e2e\u52a9\u7528\u6237\u5728\u8c03\u7528\u63a5\u53e3\u524d\u8ba1\u7b97 token \u6570\u3002</p> <p>\u4e0b\u9762\u5c31\u8ba9\u6211\u4eec\u770b\u770b\u8fd9\u4e2a\u7b97\u6cd5\u3002\u9996\u5148\u6765\u770b\u770b \"\u8bad\u7ec3\" \u8fc7\u7a0b:</p> <ul> <li> <p>\u7b2c\u4e00\u6b65, \u5c06\u8bed\u6599\u5e93\u4e2d\u6240\u6709\u7684 <code>word</code> \u4ee5\u5b57\u7b26 (\u6700\u5c0f\u9897\u7c92) \u4e3a\u5355\u4f4d\u8fdb\u884c\u62c6\u5206, \u6bcf\u4e00\u4e2a\u5b57\u7b26\u4f5c\u4e3a\u4e00\u4e2a subword\u3002\u6bd4\u65b9\u8bf4, \"<code>best</code>\" \u88ab\u62c6\u5206\u6210 \"<code>b e s t</code>\" \u56db\u4e2a subword (\u7528 \u7a7a\u683c \u4f5c\u4e3a\u5206\u9694\u7b26)\u3002</p> </li> <li> <p>\u7b2c\u4e8c\u6b65, \u521d\u59cb\u5316 \u8bcd\u8868 \u548c \u5408\u5e76\u89c4\u5219\u5217\u8868\u3002\u5176\u4e2d, \u8bcd\u8868 \u5c31\u662f\u6240\u6709\u53ef\u80fd\u7684 subword \u96c6\u5408, \u4e5f\u5c31\u662f\u521d\u59cb\u5316\u6210\u8bed\u6599\u5e93\u4e2d\u6240\u6709\u53ef\u80fd\u7684\u5b57\u7b26\u96c6\u5408\u3002</p> </li> <li> <p>\u7b2c\u4e09\u6b65, \u904d\u5386 <code>word</code> \u4e2d\u6240\u6709\u53ef\u80fd\u7684 subword pair, \u7edf\u8ba1\u4ed6\u4eec\u51fa\u73b0\u7684\u9891\u6570\u3002\u7136\u540e\u5c06\u6570\u636e\u96c6\u4e2d \u9891\u6570\u6700\u9ad8 \u7684\u90a3\u4e00\u4e2a subword pair \u5408\u5e76\u5728\u4e00\u8d77, \u5408\u5e76\u540e\u7684 subword \u52a0\u5165 \u8bcd\u8868 \u4e2d, \u5408\u5e76\u89c4\u5219\u52a0\u5165 \u5408\u5e76\u89c4\u5219\u5217\u8868 \u4e2d\u3002</p> <p>\u4e3e\u4f8b\u6765\u8bf4, \"<code>b e s t</code>\" \u73b0\u5728\u6709\u4e09\u79cd\u53ef\u80fd\u7684 subword pair: \"<code>b e</code>\", \"<code>e s</code>\" \u548c \"<code>s t</code>\"\u3002\u7edf\u8ba1\u5b8c\u6210\u540e, \u53d1\u73b0\u5728\u8bed\u6599\u5e93\u4e2d, \"<code>s t</code>\" \u51fa\u73b0\u7684\u9891\u6570\u6700\u9ad8\u3002\u90a3\u4e48, \u6211\u4eec\u5c31\u5c06\u6574\u4e2a\u6570\u636e\u96c6\u4e2d\u7684 \"<code>s t</code>\" \u5408\u5e76\u8d77\u6765, \u53d8\u6210 \"<code>st</code>\"\u3002\u6b64\u65f6 <code>best</code> \u7684\u62c6\u5206\u7ed3\u679c\u5c31\u662f \"<code>b e st</code>\", \u4ece\u56db\u4e2a subword \u53d8\u6210\u4e09\u4e2a subword\u3002</p> <p>\u540c\u65f6, \u5c06 \"<code>st</code>\" \u8fd9\u4e2a subword \u52a0\u5165 \u8bcd\u8868 \u4e2d, \u5c06 (\"<code>s t</code>\", \"<code>st</code>\") \u52a0\u5165 \u5408\u5e76\u89c4\u5219\u5217\u8868 \u4e2d\u3002</p> </li> <li> <p>\u7b2c\u56db\u6b65, \u4e00\u81f4\u91cd\u590d \u7b2c\u4e09\u6b65 \u7684\u64cd\u4f5c, \u76f4\u81f3 \u8bcd\u8868 \u8fbe\u5230\u9884\u8bbe\u7684\u5927\u5c0f\u5373\u53ef\u3002</p> </li> </ul> <p>\u6574\u4e2a\u8bad\u7ec3\u8fc7\u7a0b\u5c31\u662f\u4e0d\u65ad\u5730\u53bb\u5bfb\u627e\u8bed\u6599\u5e93\u4e2d\u9891\u6570\u6700\u9ad8\u7684 subword pair, \u7136\u540e\u5408\u5e76\u6210\u4e00\u4e2a subword, \u548c \u6570\u636e\u538b\u7f29 \u7b97\u6cd5\u4e2d\u7684\u6838\u5fc3\u601d\u60f3\u662f\u4e00\u81f4\u7684\u3002</p> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f, subword pair \u7684\u5408\u5e76\u6b21\u6570\u5e76\u4e0d\u4e00\u5b9a\u7b49\u4e8e\u5176\u9891\u6570\u3002\u4e3e\u4f8b\u6765\u8bf4, \u5bf9\u4e8e \"<code>x x x</code>\" \u6765\u8bf4, \u5176\u4e2d \"<code>x x</code>\" \u51fa\u73b0\u4e86\u4e24\u6b21, \u4f46\u662f\u6211\u4eec\u5408\u5e76\u65f6\u53ea\u80fd\u5408\u5e76\u4e00\u4e2a, \u5373 \"<code>xx x</code>\"\u3002</p> <p>\u90a3\u4e48, \u6211\u4eec\u600e\u4e48\u5bf9 word \u8fdb\u884c\u5206\u8bcd\u5462? \u9996\u5148, \u5c06 word \u4ee5\u5b57\u7b26\u4e3a\u5355\u4f4d\u8fdb\u884c\u62c6\u5206, \u4e00\u4e2a\u5b57\u7b26\u4f5c\u4e3a\u4e00\u4e2a subword\u3002\u7136\u540e\u6309\u7167 \u5408\u5e76\u89c4\u5219\u5217\u8868 \u4e2d\u7684\u987a\u5e8f, \u5982\u679c\u51fa\u73b0\u4e86 subword pair, \u5c31\u8fdb\u884c\u5408\u5e76\u3002\u6700\u540e\u5269\u4e0b\u7684 subword \u5217\u8868\u5c31\u662f\u6700\u7ec8\u7684\u5206\u8bcd\u7ed3\u679c\u3002</p> <p>\u6574\u4f53\u4e0a\u7684\u65b9\u6848\u5c31\u662f\u8fd9\u6837, \u53ef\u4ee5\u8bf4\u975e\u5e38\u5de7\u5999\u3002\u8fd9\u4e2a\u7b97\u6cd5\u5f00\u6e90\u5728 subword-nmt \u9879\u76ee\u4e2d\u3002</p> <p>\u73b0\u5728, \u5f88\u591a\u8bba\u6587\u4e2d\u90fd\u8bf4\u5176\u4f7f\u7528\u4e86 Byte-Level BPE (BBPE), \u5c31\u662f\u5c06\u7b2c\u56db\u90e8\u5206\u6240\u8bf4\u7684 byte-level \u65b9\u6848\u548c BPE \u7ed3\u5408\u8d77\u6765, \u6700\u521d\u662f OpenAI \u5728 GPT-2 \u5de5\u4f5c\u4e2d\u63d0\u51fa\u3002\u7f51\u4e0a\u5f88\u591a\u535a\u5ba2\u5728\u4ecb\u7ecd BBPE \u65f6, \u5f15\u7528\u7684\u8bba\u6587\u662f Meta \u7684 Neural Machine Translation with Byte-Level Subwords, \u5176\u53d1\u5e03\u6bd4 GPT-2 \u665a\u534a\u5e74, \u4e0d\u8981\u5f04\u9519\u5173\u7cfb\u4e86\u3002</p>"},{"location":"tokenizer/tokenizer%E5%85%A5%E9%97%A8/#wordpiece","title":"\u516d\u3001WordPiece \u5206\u8bcd\u7b97\u6cd5","text":"<p>WordPiece \u662f\u8c37\u6b4c\u4e8e 2016 \u5e74\u53d1\u5e03\u7684 \u5de5\u4f5c\u3002\u5176\u4ee3\u7801\u6ca1\u6709\u5f00\u6e90, \u51fa\u540d\u7684\u539f\u56e0\u662f\u8c37\u6b4c\u53d1\u5e03\u7684 BERT \u6a21\u578b\u4f7f\u7528\u4e86\u8fd9\u79cd\u5206\u8bcd\u65b9\u5f0f\u3002\u8fd9\u610f\u5473\u7740, WordPiece \u7684 \"\u8bad\u7ec3\" \u4ee3\u7801\u6ca1\u6709\u5f00\u6e90, \u4f46\u662f \"\u5206\u8bcd\" \u4ee3\u7801\u5f00\u6e90\u4e86\u3002\u4ece\u65b9\u6cd5\u4e0a\u6765\u770b, \u5176\u662f BPE \u65b9\u6cd5\u7684\u6539\u8fdb, \u4f46\u662f\u7531\u4e8e\u6ca1\u6709\u5f00\u6e90, \u9664\u4e86\u8c37\u6b4c\u5916, \u6ca1\u6709\u5176\u5b83\u516c\u53f8\u4f7f\u7528\u3002</p> <p>\u76f8\u8f83\u4e8e BPE, \u5176\u6539\u8fdb\u4e3b\u8981\u4f53\u73b0\u5728\u4e0b\u9762\u4e24\u4e2a\u65b9\u9762:</p> <p>\u9996\u5148, \u5728\u8bad\u7ec3\u8fc7\u7a0b\u7684\u7b2c\u4e09\u6b65\u4e2d, \u4e0d\u4ec5\u4ec5\u8ba1\u7b97 subword pair \u7684\u9891\u6570, \u800c\u662f\u8ba1\u7b97\u4e24\u8005\u4e4b\u95f4\u7684 score \u503c, \u8ba1\u7b97\u516c\u5f0f\u5982\u4e0b:</p> <p>\u5176\u4e2d,   \u548c   \u8868\u793a\u4e24\u4e2a subword, \u4ed6\u4eec\u7684\u9891\u6570\u662f   \u548c  \u3002\u800c   \u8868\u793a subword pair \u51fa\u73b0\u7684\u9891\u6570\u3002\u5982\u679c\u5c06\u6240\u6709\u7684 \u9891\u6570 \u9664\u4ee5\u603b\u9891\u6570, \u8f6c\u5316\u6210\u6982\u7387, \u518d\u5bf9\u6bd4\u503c\u53d6\u5bf9\u6570, \u90a3\u4e0d\u5c31\u662f PMI (Pointwise Mutual Information) \u5417? \u5bf9\u6b64\u6709\u7591\u95ee\u7684\u53ef\u4ee5\u53c2\u8003\u6211\u4e4b\u524d\u7684 \u6587\u7ae0\u3002</p> <p>\u4e5f\u5c31\u662f\u8bf4, \u73b0\u5728\u7684\u8bad\u7ec3\u8fc7\u7a0b\u662f\u4e0d\u65ad\u5730\u53bb\u5bfb\u627e\u8bed\u6599\u5e93\u4e2d PMI \u6700\u9ad8\u7684 subword pair, \u7136\u540e\u5408\u5e76\u6210\u4e00\u4e2a subword\u3002\u8fd9\u6837\u505a\u7684\u597d\u5904\u662f\u4ec0\u4e48\u5462? \u6bd4\u65b9\u8bf4, \"un\" \u548c \"able\" \u5728\u8bed\u6599\u5e93\u4e2d\u7684\u9891\u6570\u5f88\u9ad8, \u5982\u679c\u662f BPE \u7b97\u6cd5, \u4e24\u8005\u5c31\u4f1a\u5408\u5e76\u6210\u4e00\u4e2a subword\u3002\u4f46\u662f, \"un\" \u4f5c\u4e3a\u8bcd\u8bed\u524d\u7f00\u7684\u60c5\u51b5\u5f88\u591a, \"able\" \u4f5c\u4e3a\u8bcd\u8bed\u540e\u7f00\u7684\u60c5\u51b5\u5f88\u591a, \u90a3\u4e48\u4ed6\u4eec\u76f8\u5173\u6027\u5c31\u6ca1\u6709\u90a3\u4e48\u9ad8, PMI \u503c\u5c31\u4f1a\u504f\u4f4e, \u90a3\u4e48\u5728 WorldPiece \u7b97\u6cd5\u4e2d, \u4e24\u8005\u5c31\u4e0d\u4f1a\u5408\u5e76\u6210\u4e00\u4e2a subword\u3002</p> <p>\u5176\u6b21, \u662f\u5206\u8bcd\u8fc7\u7a0b\u7684\u4e0d\u540c\u3002\u8fd9\u91cc\u4e0d\u4f7f\u7528 \u5408\u5e76\u89c4\u5219\u5217\u8868 \u6765\u8fdb\u884c\u5206\u8bcd, \u800c\u662f\u76f4\u63a5\u4f7f\u7528 \u8bcd\u8868 \u5206\u8bcd, \u91c7\u7528 \u6b63\u5411\u6700\u957f\u5339\u914d \u7684\u7b56\u7565\u3002\u4e5f\u5c31\u662f\u8bf4, \u4e0d\u65ad\u5bfb\u627e word \u4e2d\u7684\u6700\u957f\u524d\u7f00 subword\u3002\u7528\u4e00\u4e2a\u5177\u4f53\u7684\u4f8b\u5b50\u6765\u8bf4\u660e:</p> <p>\u8bcd\u8868\u4e2d\u6709 \"\u7814\u7a76\", \"\u751f\u547d\", \"\u8d77\u6e90\", \"\u7814\u7a76\u751f\", \u751f \u7b49 subword, \u73b0\u5728\u5bf9 \"\u7814\u7a76\u751f\u547d\u8d77\u6e90\" \u8fd9\u6837\u4e00\u4e2a word \u8fdb\u884c\u5206\u8bcd:</p> <p>\u4ece \"\u7814\" \u5f00\u59cb, \u5339\u914d\u5230\u8bcd\u8868\u4e2d\u6700\u957f\u7684\u524d\u7f00 subword \u662f \"\u7814\u7a76\u751f\" \u4ece \"\u547d\" \u5f00\u59cb, \u5339\u914d\u5230\u8bcd\u8868\u4e2d\u6700\u957f\u7684\u524d\u7f00 subword \u662f \"\u547d\" \u4ece \"\u8d77\" \u5f00\u59cb, \u5339\u914d\u5230\u8bcd\u8868\u4e2d\u6700\u957f\u7684\u524d\u7f00 subword \u662f \"\u8d77\u6e90\" \u90a3\u4e48\u5206\u8bcd\u7ed3\u679c\u5c31\u662f [\"\u7814\u7a76\u751f\", \"\u547d\", \"\u8d77\u6e90\"]\u3002\u8fd9\u663e\u7136\u662f\u4e0d\u5408\u7406\u7684, \u5408\u7406\u7684\u5206\u8bcd\u7ed3\u679c\u5e94\u8be5\u662f [\"\u7814\u7a76\", \"\u751f\u547d\", \"\u8d77\u6e90\"]\u3002</p> <p>\u867d\u7136\u76f4\u63a5\u4e3e\u53cd\u9762\u7684\u4f8b\u5b50\u4e0d\u592a\u597d, \u4f46\u8fd9\u662f \u6b63\u5411\u6700\u957f\u5339\u914d \u4e2d\u5b58\u5728\u7684\u95ee\u9898\u3002\u5982\u679c\u662f \u82f1\u6587\u8bcd\u8bed, \u5728\u4f7f\u7528 PMI \u7b56\u7565\u7684\u60c5\u51b5\u4e0b, \u95ee\u9898\u4e0d\u662f\u5f88\u5927\u3002\u4f46\u662f\u5bf9\u4e8e \u4e2d\u6587\u7247\u6bb5 \u6765\u8bf4, \u5c31\u4f1a\u6709\u5f88\u5927\u95ee\u9898\u4e86\u3002\u56e0\u6b64, \u5728 BERT \u6a21\u578b\u4e2d, \u4e2d\u6587\u90fd\u662f\u5355\u5b57\u6210 subword, \u76f4\u63a5\u5207\u6210\u6700\u5c0f\u9897\u7c92\u3002</p>"},{"location":"tokenizer/tokenizer%E5%85%A5%E9%97%A8/#unigram","title":"\u4e03\u3001Unigram \u5206\u8bcd\u7b97\u6cd5","text":"<p>unigram \u5206\u8bcd\u65b9\u5f0f\u5c5e\u4e8e n-gram \u6982\u7387\u8def\u5f84 \u5206\u8bcd\u65b9\u5f0f\u7684\u4e00\u79cd, \u4e2d\u6587\u540d\u79f0\u662f \u4e00\u5143\u5206\u8bcd\u3002\u5728\u4e2d\u6587\u5206\u8bcd\u4e2d, \u6bd4\u8f83\u5e38\u89c1\u7684\u662f \u4e8c\u5143\u5206\u8bcd (bigram), \u6bd4\u65b9\u8bf4 HanLP V1 \u4e2d\u9ed8\u8ba4\u7684\u5206\u8bcd\u65b9\u5f0f\u5c31\u662f\u8fd9\u79cd\u3002</p> <p>n-gram \u7684\u672c\u8d28\u5c31\u662f \u6807\u51c6\u8bed\u8a00\u6a21\u578b \u7684\u7b80\u5316\u3002\u800c unigram \u662f\u6700\u5f3a\u7684\u5047\u8bbe, \u5373\u6bcf\u4e00\u4e2a\u8bcd\u8bed\u7684\u6982\u7387\u662f\u5b8c\u5168\u72ec\u7acb\u7684, \u548c\u4e4b\u524d\u7684\u6587\u672c\u6ca1\u6709\u5173\u7cfb\u7684\u3002\u90a3\u4e48, \u6211\u4eec\u53ea\u8981\u7edf\u8ba1\u51fa\u6bcf\u4e00\u4e2a\u8bcd\u8bed\u5728\u8bed\u6599\u5e93\u4e2d\u51fa\u73b0\u7684\u6982\u7387 (\u8bcd\u9891 \u9664\u4ee5 \u603b\u8bcd\u9891), \u5c31\u53ef\u4ee5\u4f30\u7b97\u51fa\u4e00\u4e2a\u53e5\u5b50\u4e00\u79cd\u5207\u5206\u65b9\u5f0f\u7684\u6982\u7387\u3002\u63a5\u4e0b\u6765, \u6211\u4eec\u904d\u5386\u4e00\u4e2a\u53e5\u5b50\u6240\u6709\u53ef\u80fd\u7684\u5207\u5206\u65b9\u5f0f, \u627e\u5230\u6982\u7387\u6700\u5927\u7684\u90a3\u4e00\u79cd\u65b9\u5f0f, \u4f5c\u4e3a\u5206\u8bcd\u7ed3\u679c\u3002\u4e00\u4e2a\u4e00\u4e2a\u904d\u5386\u7684\u6210\u672c\u592a\u9ad8\u4e86, \u4e00\u822c\u4f7f\u7528 \u7ef4\u7279\u6bd4\u7b97\u6cd5\u3002</p> <p>\u5bf9\u6b64\u4e0d\u4e86\u89e3\u7684\u53ef\u4ee5\u53bb\u7f51\u4e0a\u641c\u7d22\u76f8\u5173\u7684\u8d44\u6599, \u786e\u4fdd\u7406\u89e3\u4e0a\u9762\u7684\u5185\u5bb9\u3002\u90a3\u4e48\u5e94\u8be5\u5982\u4f55\u6839\u636e\u8bed\u6599\u5e93\u6765\u751f\u6210\u8bcd\u5178\u5462? \u76ee\u524d\u4e3b\u6d41\u7684\u662f\u7528 Subword Regularization \u8bba\u6587\u63d0\u51fa\u7684\u65b9\u6848:</p> <p>\u7b2c\u4e00\u6b65, \u521d\u59cb\u5316 subword \u6982\u7387\u8bcd\u5178: \u5bf9\u4e8e\u6bcf\u4e00\u4e2a word, \u7edf\u8ba1\u6240\u6709\u53ef\u80fd\u7684 subword, \u4ee5\u53ca\u5728 \u8bed\u6599\u5e93 \u79cd\u51fa\u73b0\u7684\u9891\u6570, \u7136\u540e\u4fdd\u7559\u9891\u6570\u6700\u9ad8\u7684   \u4e2a, \u8f6c\u5316\u6210\u4fe1\u606f\u91cf, \u6784\u6210\u8bcd\u5178\u3002</p> <p>\u4e3e\u4f8b\u6765\u8bf4: \"good\" \u4e00\u8bcd\u4e00\u5171\u6709 9 \u79cd\u53ef\u80fd\u7684 subword: \"g\", \"o\", \"d\", \"go\", \"oo\", \"od\", \"goo\", \"ood\" \u548c \"good\" (\u4e00\u822c\u8fd8\u4f1a\u9650\u5236 subword \u7684\u957f\u5ea6, \u8fd9\u91cc\u6ca1\u6709\u4f53\u73b0)\u3002\u6bcf\u4e00\u4e2a word \u90fd\u8fd9\u6837\u5904\u7406, \u7136\u540e\u7edf\u8ba1\u9891\u6570, \u53bb\u9664\u4f4e\u9891\u7684, \u9664\u4ee5 \u603b\u9891\u6570 \u8f6c\u5316\u6210 \u6982\u7387, \u518d\u53d6 \u8d1f\u5bf9\u6570 \u8f6c\u5316\u6210 \u4fe1\u606f\u91cf\u3002</p> <p>\u73b0\u5728, \u6211\u4eec\u53ef\u4ee5\u7528 subword \u6982\u7387\u8bcd\u5178 \u5bf9 word \u8fdb\u884c\u5206\u8bcd, \u540c\u65f6\u53ef\u4ee5\u5f97\u5230\u5206\u8bcd\u65b9\u5f0f\u7684 \u4fe1\u606f\u91cf\u3002\u90a3\u4e48, \u6211\u4eec\u53ef\u4ee5\u7528 subword \u6982\u7387\u8bcd\u5178 \u5bf9\u8bed\u6599\u5e93\u4e2d\u6240\u6709\u7684 word \u8fdb\u884c\u5206\u8bcd, \u7136\u540e\u5c06\u5f97\u5230\u7684 \u4fe1\u606f\u91cf \u6c42\u548c, \u8bb0\u4f5c\u5f53\u524d subword \u6982\u7387\u8bcd\u5178 \u7684 likelihood \u503c\u3002</p> <p>\u7b2c\u4e8c\u6b65, \u5bf9\u4e8e subword \u6982\u7387\u8bcd\u5178 \u4e2d\u7684\u6bcf\u4e00\u4e2a subword, \u6211\u4eec\u8ba1\u7b97\u5728\u53bb\u9664\u5b83\u7684\u60c5\u51b5\u4e0b\u7684 likelihood \u503c, \u8bb0\u4f5c loss \u503c\u3002\u8fd9\u6837, \u6bcf\u4e00\u4e2a subword \u90fd\u6709\u4e00\u4e2a loss \u503c, loss \u503c\u8d8a\u5c0f\u8868\u793a\u5728\u5206\u8bcd\u8fc7\u7a0b\u4e2d\u91cd\u8981\u7a0b\u5ea6\u8d8a\u9ad8\u3002\u7136\u540e\u53ea\u4fdd\u7559 subword \u6982\u7387\u8bcd\u5178 \u4e2d loss \u503c\u6700\u4f4e\u7684   subword, \u5176\u5b83\u90fd\u53bb\u9664\u6389\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f, \u4e3a\u4e86\u907f\u514d OOV \u7684\u95ee\u9898, \u6240\u6709\u5355\u4e2a\u5b57\u7b26\u7684 subword \u90fd\u662f\u4fdd\u7559\u7684\u3002</p> <p>\u7b2c\u4e09\u6b65, \u4e00\u76f4\u91cd\u590d \u7b2c\u4e8c\u6b65 \u7684\u64cd\u4f5c, \u76f4\u5230 subword \u6982\u7387\u8bcd\u5178 \u7684\u5927\u5c0f\u548c\u9884\u5148\u8bbe\u7f6e\u7684 \u8bcd\u8868 \u5927\u5c0f\u4e00\u81f4\u5373\u53ef\u3002</p> <p>\u6574\u4f53\u4e0a\u7684\u65b9\u6848\u5c31\u662f\u8fd9\u6837, \u8fd9\u4e2a\u7b97\u6cd5\u5f00\u6e90\u5728 sentencepiece \u9879\u76ee\u4e2d\u3002</p>"},{"location":"tokenizer/tokenizer%E5%85%A5%E9%97%A8/#_5","title":"\u516b\u3001\u968f\u673a\u5206\u8bcd","text":"<p>\u6211\u4eec\u77e5\u9053, \u5bf9\u4e8e \u6587\u672c\u751f\u6210 \u4efb\u52a1\u6765\u8bf4, \u4e0d\u80fd\u5b8c\u5168\u6309\u7167 \u6982\u7387\u6700\u9ad8 \u7684\u65b9\u5f0f\u6765\u751f\u6210, \u800c\u53ea\u8981\u662f\u5728\u5408\u7406\u533a\u95f4\u5185\u7684\u90fd\u53ef\u4ee5\u3002\u540c\u7406, \u5bf9\u4e8e\u5206\u8bcd\u6765\u8bf4\u4e5f\u662f\u7c7b\u4f3c: \u5206\u8bcd\u65b9\u5f0f\u9700\u8981\u4e00\u5b9a\u7684 \"\u968f\u673a\u6027\"!</p> <p>\u4e3e\u4f8b\u6765\u8bf4, \u5982\u679c\u8bcd\u8868\u4e2d\u6709 \"\u767d\u4e91\", \"\u673a\u573a\", \"\u767d\u4e91\u673a\u573a\" \u7b49\u8bcd\u8bed\u3002\u5728\u5206\u8bcd\u65f6, \"\u5e7f\u5dde\u7684\u767d\u4e91\u673a\u573a\" \u4f1a\u88ab \u56fa\u5b9a \u7684\u5206\u6210: [\"\u5e7f\u5dde\", \"\u7684\", \"\u767d\u4e91\u673a\u573a\"]\u3002\u90a3\u4e48\u4f1a\u51fa\u4ec0\u4e48\u6837\u7684\u95ee\u9898\u5462?</p> <p>\u5bf9\u4e8e \u7eed\u5199 \u4efb\u52a1\u6765\u8bf4, \u5982\u679c\u7528\u6237\u8f93\u5165\u7684\u662f \"\u5e7f\u5dde\u7684\u767d\u4e91\", \u867d\u7136 \"\u673a\u573a\" \u4e00\u8bcd\u5728\u8bcd\u8868\u4e2d, \u4f46\u662f\u6a21\u578b\u4e0d\u4f1a\u5728\u540e\u9762\u63a5 \"\u673a\u573a\" \u8fd9\u6837\u7684\u8bcd\u8bed, \u800c\u4f1a\u63a5\u5bf9 \u4e91\u6735 \u7684\u63cf\u8ff0\u5185\u5bb9, \u6bd4\u65b9\u8bf4 \"\u5f88\u767d\" \u7b49\u7b49\u3002\u8fd9\u662f\u4e3a\u4ec0\u4e48\u5462?</p> <p>\u56e0\u4e3a\u5728\u8bad\u7ec3\u6a21\u578b\u65f6, \"\u767d\u4e91\u673a\u573a\" \u662f\u4e00\u4e2a\u56fa\u5b9a\u7684 token, \u4e0d\u4f1a\u88ab\u5206\u5272\u5f00\u3002\u4e5f\u5c31\u662f\u8bf4, \"\u767d\u4e91\" \u540e\u9762\u4e0d\u4f1a\u51fa\u73b0 \"\u673a\u573a\" \u8fd9\u4e2a token\u3002\u90a3\u4e48\u5e94\u8be5\u600e\u4e48\u89e3\u51b3\u5462? \u7b54\u6848\u662f \u968f\u673a\u5206\u8bcd, \u5373\u7ed9\u4e88\u4e00\u5b9a\u7684\u6982\u7387\u5206\u6210 \"\u767d\u4e91\" \u548c \"\u673a\u573a\" \u4e24\u4e2a token, \u8ba9\u6a21\u578b\u77e5\u9053 \"\u767d\u4e91\" \u540e\u9762\u662f\u6709\u53ef\u80fd\u51fa\u73b0 \"\u673a\u573a\" \u8fd9\u4e2a token \u7684\u3002</p> <p>\u6700\u65e9\u63d0\u51fa\u8fd9\u4e00\u60f3\u6cd5\u7684\u662f Subword Regularization \u8fd9\u7bc7\u8bba\u6587, \u4e5f\u5c31\u662f\u5f00\u6e90 sentencepiece \u7684\u5de5\u4f5c\u3002\u5176\u5c06\u4e0a\u8ff0\u65b9\u5f0f\u79f0\u4e3a subword sampling\u3002</p> <p>\u5bf9\u4e8e\u7b2c\u4e03\u90e8\u5206\u7684 unigram \u5206\u8bcd\u7b97\u6cd5, \u6211\u4eec\u53ef\u4ee5\u91c7\u7528 n-best \u7ef4\u7279\u6bd4\u7b97\u6cd5, \u627e\u51fa\u6700\u4f73\u7684 n \u4e2a\u5206\u8bcd\u8def\u5f84, \u5e76\u8ba1\u7b97\u51fa\u8def\u5f84\u7684\u6982\u7387\u5206\u6570\u3002\u7136\u540e\u6839\u636e\u8def\u5f84\u7684\u6982\u7387\u5206\u6570\u8fdb\u884c \u91c7\u6837, \u9009\u62e9\u5176\u4e2d\u7684\u4e00\u4e2a\u5373\u53ef\u3002</p> <p>\u800c\u5bf9\u4e8e BPE \u7b97\u6cd5, \u6709\u4eba\u63d0\u51fa BPE-Dropout \u65b9\u6848, \u5373\u5728\u5206\u8bcd\u65f6, \u6709   \u7684\u6982\u7387\u4e0d\u8fdb\u884c\u5408\u5e76\u3002</p> <p>\u6cbf\u7528\u7b2c\u4e94\u90e8\u5206\u7684\u4f8b\u5b50, \u5bf9\u4e8e \"x x x\" \u6765\u8bf4, \u73b0\u5728\u8981\u5c06 \"x x\" \u5408\u5e76\u6210 \"xx\"\u3002\u6309\u7167\u539f\u6765\u7684\u65b9\u6848, \u5408\u5e76\u7ed3\u679c\u5e94\u8be5\u662f \"xx x\"\u3002\u800c\u6309\u7167\u73b0\u5728\u7684\u65b9\u6848, \u8fd8\u6709\u53ef\u80fd\u5206\u6210 \"x xx\" (\u7b2c\u4e00\u6b21\u5408\u5e76\u65f6\u89e6\u53d1 dropout, \u6ca1\u6709\u8fdb\u884c\u5408\u5e76); \u4e5f\u6709\u53ef\u80fd\u4fdd\u6301\u539f\u72b6, \u8fd8\u662f x x x (\u4e24\u6b21\u5408\u5e76\u90fd\u89e6\u53d1 dropout)\u3002</p> <p>\u4e2a\u4eba\u89c2\u70b9, \u8fd9\u79cd\u968f\u673a\u5206\u8bcd\u65b9\u5f0f\u5728 LLM \u6a21\u578b\u8bad\u7ec3 \u65f6\u8d77\u7684\u4f5c\u7528\u6bd4\u5728 LLM \u6a21\u578b\u63a8\u7406 \u65f6\u8981\u5927, \u53ef\u4ee5\u589e\u52a0\u6a21\u578b\u7684\u9c81\u68d2\u6027, \u662f\u4e00\u79cd\u975e\u5e38\u597d\u7684 \u9884\u8bad\u7ec3 \u7b56\u7565\u3002</p>"},{"location":"tokenizer/tokenizer%E5%85%A5%E9%97%A8/#_6","title":"\u4e5d\u3001\u603b\u7ed3","text":"<p>\u81f3\u6b64, \u5927\u8bed\u8a00\u6a21\u578b\u5e38\u7528\u7684\u5206\u8bcd\u65b9\u5f0f\u90fd\u4ecb\u7ecd\u5b8c\u6210\u4e86\u3002\u8fd9\u5c5e\u4e8e\u975e\u5e38\u5b8f\u89c2\u7684\u4ecb\u7ecd, \u5bf9\u4e8e\u7ec6\u8282\u7684\u4ecb\u7ecd\u5f88\u5c11\u3002\u4e3b\u8981\u4f53\u73b0\u5728\u4e24\u4e2a\u65b9\u9762\u3002</p> <p>\u9996\u5148, \u4e0d\u540c\u7684\u6a21\u578b\u5728\u5206\u8bcd\u65f6\u4f1a\u6dfb\u52a0\u4e0d\u540c\u7684\u6807\u8bb0\u7b26\u53f7:</p> <p>GPT-2 \u5728\u5c06 word \u7f16\u7801\u6210\u5b57\u8282\u6d41\u540e, \u4f1a\u8f6c\u4e49\u56de\u5b57\u7b26\u4e32, \u540c\u65f6\u786e\u4fdd\u4e0d\u4f1a\u8f6c\u4e49\u6210 \u7a7a\u767d\u5b57\u7b26 sentencepiece \u4e2d, \u82f1\u6587\u8bcd\u8bed\u7684\u7a7a\u683c\u6dfb\u52a0\u5728\u5f00\u5934, \u5e76\u8f6c\u4e49\u6210 \"\\u2581\" BPE \u539f\u59cb\u8bba\u6587\u4e2d, \u82f1\u6587\u8bcd\u8bed\u7684\u7a7a\u683c\u6dfb\u52a0\u5728\u7ed3\u5c3e, \u5e76\u8f6c\u4e49\u6210 \"\" bert \u5f00\u6e90\u7684 wordpiece \u4e2d, \u975e\u8d77\u59cb subword \u90fd\u4f1a\u6dfb\u52a0 \"##\" \u6807\u8bc6, \u95f4\u63a5\u7684\u5c06\u7a7a\u683c\u6dfb\u52a0\u5230 word \u4e2d \u5176\u6b21, \u5b9e\u73b0\u7684\u7ec6\u8282\u4e0d\u540c\u3002\u5982\u679c\u5b8c\u5168\u6309\u7167\u4e0a\u9762\u6240\u8bf4\u7684\u6765, \u8fd0\u884c\u6548\u7387\u4f1a\u975e\u5e38\u4f4e, \u9700\u8981\u4e00\u4e9b\u5b57\u7b26\u4e32\u641c\u7d22\u7b97\u6cd5\u8fdb\u884c\u4f18\u5316\u3002</p> <p>\u603b\u4e4b, \u6574\u4f53\u7684\u5206\u8bcd\u6846\u67b6\u5c31\u662f\u8fd9\u6837\u3002\u5982\u679c\u4e4b\u540e\u6709\u65f6\u95f4, \u53ef\u4ee5\u81ea\u5df1\u5b9e\u73b0\u4e00\u4e2a\u7248\u672c\u3002</p> <p>\u6700\u540e\u804a\u4e00\u70b9\u9898\u5916\u8bdd, \u5173\u4e8e\u4e2d\u6587\u8bed\u6599\u7684\u4e8b\u60c5\u3002</p> <p>\u5982\u679c\u4f60\u5173\u6ce8 LLM \u5f00\u6e90\u9879\u76ee, \u5e94\u8be5\u77e5\u9053\u54c8\u5de5\u5927\u5d14\u4e00\u9e23\u5927\u4f6c\u7684 Chinese-LLaMA-Alpaca \u9879\u76ee\u3002\u8fd9\u4e2a\u9879\u76ee\u662f\u9488\u5bf9 LLaMA \u6a21\u578b\u8fdb\u884c\u4e2d\u6587\u5fae\u8c03\u7684, \u5176\u4e2d\u505a\u4e86\u4e00\u4ef6\u4e8b\u60c5, \u90a3\u5c31\u662f \u4e2d\u6587\u8bcd\u8868\u6269\u5145\u3002</p> <p>\u8bfb\u8fc7 LLaMA \u8bba\u6587\u5e94\u8be5\u77e5\u9053, \u5176\u4f7f\u7528\u7684\u662f sentencepiece \u4e2d\u7684 BPE \u7b97\u6cd5\u8bad\u7ec3\u7684, \u540c\u65f6\u5c06 byte_fallback \u53c2\u6570\u8bbe\u7f6e\u6210 True, \u5177\u4f53\u53ef\u4ee5\u53c2\u8003 issue 621 \u548c issue 1218\u3002</p> <p>\u8bad\u7ec3\u5b8c\u6210\u540e, \u8bcd\u8868\u4e2d\u5305\u542b 32,000 \u4e2a\u8bcd\u8bed\u3002\u5176\u4e2d \u4e2d\u6587\u8bcd\u6c47 \u5360\u6bd4\u5f88\u5c11, \u751a\u81f3\u8fde \"\u6c14\" \u8fd9\u4e2a\u5b57\u90fd\u4e0d\u5728\u8bcd\u8868\u4e2d\u3002\u6b64\u65f6, \u4f60\u6216\u8bb8\u4f1a\u597d\u5947, \u600e\u4e48\u53ef\u80fd\u5462? \u5c31\u7b97\u8bad\u7ec3\u8bed\u6599\u4e2d\u7684\u4e2d\u6587\u5f88\u5c11, 2000 \u4e2a\u5e38\u7528\u5b57\u5e94\u8be5\u662f\u5305\u542b\u7684\u554a\u3002</p> <p>\u540e\u6765, \u6211\u53d1\u73b0 sentencepiece \u7684\u8bad\u7ec3\u53c2\u6570\u4e2d\u6709\u4e00\u4e2a\u662f character_coverage, \u5176\u542b\u4e49\u662f\u968f\u673a\u5220\u9664\u8bed\u6599\u5e93\u4e2d\u4e00\u5b9a\u6bd4\u4f8b\u7684\u5b57\u7b26, \u5177\u4f53\u53ef\u4ee5\u53c2\u8003 issue 412\u3002\u800c\u6ca1\u6709\u51fa\u73b0\u5728\u8bcd\u8868\u4e2d\u7684\u6c49\u5b57\u5927\u6982\u7387\u662f\u88ab\u5220\u9664\u4e86\u3002\u5176\u4e2d, \u9ed8\u8ba4\u7684\u5220\u9664\u6bd4\u4f8b\u662f\u4e07\u5206\u4e4b\u4e94\u3002\u4e0d\u77e5\u9053 LLaMA \u5728\u8bad\u7ec3\u65f6\u6709\u6ca1\u6709\u8c03\u5927\u3002\u6240\u4ee5\u4e2d\u6587\u8bed\u6599\u5360\u6bd4\u662f\u6709\u591a\u4f4e\u554a\u3002</p>"},{"location":"tokenizer/tokenizer%E5%85%A5%E9%97%A8/#_7","title":"\u5341\u3001\u5f15\u7528","text":"<p>\u8bba\u6587:</p> <p>Neural Machine Translation of Rare Words with Subword Units Google\u2019s Neural Machine Translation System: Bridging the Gap between Human and Machine Translation Subword Regularization: Improving Neural Network Translation Models with Multiple Subword Candidates BPE-Dropout: Simple and Effective Subword Regularization \u4ee3\u7801\u548c\u5f00\u6e90\u9879\u76ee:</p> <p>OpenAI \u5f00\u6e90\u7684 tiktoken BPE \u8bba\u6587 \u5f00\u6e90\u7684 subword-nmt Subword Regularization \u8bba\u6587 \u5f00\u6e90\u7684 sentencepiece HuggingFace tokenizers HuggingFace GPT-1 \u5206\u8bcd\u6e90\u7801 HuggingFace GPT-2 \u5206\u8bcd\u6e90\u7801 \u535a\u5ba2\u548c\u6587\u6863:</p> <p>HuggingFace Transformers \u5206\u8bcd\u4ecb\u7ecd\u6587\u6863 HuggingFace NLP Course \u5206\u8bcd\u4ecb\u7ecd\u6587\u6863 \u5927\u8bcd\u8868\u8bed\u8a00\u6a21\u578b\u5728\u7eed\u5199\u4efb\u52a1\u4e0a\u7684\u4e00\u4e2a\u95ee\u9898\u53ca\u5bf9\u7b56 BytePiece\uff1a\u66f4\u7eaf\u7cb9\u3001\u66f4\u9ad8\u538b\u7f29\u7387\u7684Tokenizer \u968f\u673a\u5206\u8bcd\u6d45\u63a2\uff1a\u4eceViterbi Decoding\u5230Viterbi Sampling \u5176\u5b83:</p> <p>Languages of the World</p>"},{"location":"tokenizer/tokenizer%E5%85%A5%E9%97%A8/#_8","title":"\u53c2\u8003","text":"<ol> <li>LLM \u5206\u8bcd\u7b97\u6cd5 (BPE, WordPiece, Unigram) \u7b80\u4ecb</li> </ol>"},{"location":"tokenizer/tokenizer%E5%AE%9E%E7%8E%B0/","title":"Tokenizer \u5b9e\u73b0","text":"<p>tokenizer\u8d1f\u8d23\u51c6\u5907\u8f93\u5165\u4ee5\u4f9b\u6a21\u578b\u4f7f\u7528\u3002huggingface \u7684 <code>Tokenizer</code>\u5e93\u5305\u542b\u6240\u6709\u6a21\u578b\u7684tokenizer\u3002\u5927\u591a\u6570tokenizer\u90fd\u6709\u4e24\u79cd\u7248\u672c\uff1a\u4e00\u4e2a\u662f\u5b8c\u5168\u7684 Python \u5b9e\u73b0\uff0c\u53e6\u4e00\u4e2a\u662f\u57fa\u4e8e Rust \u5e93 \ud83e\udd17 Tokenizers \u7684\u201cFast\u201d\u5b9e\u73b0\u3002\u201cFast\u201d \u5b9e\u73b0\u5141\u8bb8\uff1a</p> <ul> <li>\u5728\u6279\u91cf\u5206\u8bcd\u65f6\u663e\u8457\u63d0\u901f</li> <li>\u5728\u539f\u59cb\u5b57\u7b26\u4e32\uff08\u5b57\u7b26\u548c\u5355\u8bcd\uff09\u548ctoken\u7a7a\u95f4\u4e4b\u95f4\u8fdb\u884c\u6620\u5c04\u7684\u5176\u4ed6\u65b9\u6cd5\uff08\u4f8b\u5982\uff0c\u83b7\u53d6\u5305\u542b\u7ed9\u5b9a\u5b57\u7b26\u7684token\u7684\u7d22\u5f15\u6216\u4e0e\u7ed9\u5b9atoken\u5bf9\u5e94\u7684\u5b57\u7b26\u8303\u56f4\uff09\u3002</li> </ul> <p>\u57fa\u7c7b [<code>PreTrainedTokenizer</code>] \u548c [<code>PreTrainedTokenizerFast</code>] \u5b9e\u73b0\u4e86\u5728\u6a21\u578b\u8f93\u5165\u4e2d\u7f16\u7801\u5b57\u7b26\u4e32\u8f93\u5165\u7684\u5e38\u7528\u65b9\u6cd5\uff08\u89c1\u4e0b\u6587\uff09\uff0c\u5e76\u4ece\u672c\u5730\u6587\u4ef6\u6216\u76ee\u5f55\u6216\u4ece\u5e93\u63d0\u4f9b\u7684\u9884\u8bad\u7ec3\u7684 <code>tokenizer</code> \u5b9e\u4f8b\u5316/\u4fdd\u5b58 python \u548c\u201cFast\u201d tokenizer\u3002\u5b83\u4eec\u90fd\u4f9d\u8d56\u4e8e\u5305\u542b\u5e38\u7528\u65b9\u6cd5\u7684 <code>PreTrainedTokenizerBase</code> \u548c <code>SpecialTokensMixin</code>\u3002</p> <p>\u56e0\u6b64\uff0c<code>PreTrainedTokenizer</code> \u548c <code>PreTrainedTokenizerFast</code> \u5b9e\u73b0\u4e86\u4f7f\u7528\u6240\u6709tokenizers\u7684\u4e3b\u8981\u65b9\u6cd5\uff1a</p> <ul> <li>\u5206\u8bcd\uff08\u5c06\u5b57\u7b26\u4e32\u62c6\u5206\u4e3a\u5b50\u8bcd\u6807\u8bb0\u5b57\u7b26\u4e32\uff09\uff0c\u5c06tokens\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3aid\u5e76\u8f6c\u6362\u56de\u6765\uff0c\u4ee5\u53ca\u7f16\u7801/\u89e3\u7801\uff08\u5373\u6807\u8bb0\u5316\u5e76\u8f6c\u6362\u4e3a\u6574\u6570\uff09\u3002</li> <li>\u4ee5\u72ec\u7acb\u4e8e\u5e95\u5c42\u7ed3\u6784\uff08BPE\u3001SentencePiece .....\uff09\u7684\u65b9\u5f0f\u5411\u8bcd\u6c47\u8868\u4e2d\u6dfb\u52a0\u65b0 tokens\u3002</li> <li>\u7ba1\u7406\u7279\u6b8atokens\uff08\u5982mask\u3001\u53e5\u9996\u7b49\uff09\uff1a\u6dfb\u52a0\u5b83\u4eec\uff0c\u5c06\u5b83\u4eec\u5206\u914d\u7ed9tokenizer\u4e2d\u7684\u5c5e\u6027\u4ee5\u4fbf\u4e8e\u8bbf\u95ee\uff0c\u5e76\u786e\u4fdd\u5b83\u4eec\u5728\u6807\u8bb0\u8fc7\u7a0b\u4e2d\u4e0d\u4f1a\u88ab\u5206\u5272\u3002</li> </ul> <p>BatchEncoding \u5305\u542b PreTrainedTokenizerBase \u7684\u7f16\u7801\u65b9\u6cd5\uff08<code>__call__</code>\u3001<code>encode_plus</code> \u548c <code>batch_encode_plus</code>\uff09\u7684\u8f93\u51fa\uff0c\u5e76\u4e14\u662f\u4ece Python \u5b57\u5178\u6d3e\u751f\u7684\u3002\u5f53tokenizer\u662f\u7eaf Python tokenizer\u65f6\uff0c\u6b64\u7c7b\u7684\u884c\u4e3a\u5c31\u50cf\u6807\u51c6\u7684 Python \u5b57\u5178\u4e00\u6837\uff0c\u5e76\u4fdd\u5b58\u8fd9\u4e9b\u65b9\u6cd5\u8ba1\u7b97\u7684\u5404\u79cd\u6a21\u578b\u8f93\u5165\uff08<code>input_ids</code>\u3001<code>attention_mask</code> \u7b49\uff09\u3002\u5f53\u5206\u8bcd\u5668\u662f\u201cFast\u201d\u5206\u8bcd\u5668\u65f6\uff08\u5373\u7531 HuggingFace \u7684 tokenizers \u5e93\u652f\u6301\uff09\uff0c\u6b64\u7c7b\u8fd8\u63d0\u4f9b\u4e86\u51e0\u79cd\u9ad8\u7ea7\u5bf9\u9f50\u65b9\u6cd5\uff0c\u53ef\u7528\u4e8e\u5728\u539f\u59cb\u5b57\u7b26\u4e32\uff08\u5b57\u7b26\u548c\u5355\u8bcd\uff09\u4e0etoken\u7a7a\u95f4\u4e4b\u95f4\u8fdb\u884c\u6620\u5c04\uff08\u4f8b\u5982\uff0c\u83b7\u53d6\u5305\u542b\u7ed9\u5b9a\u5b57\u7b26\u7684token\u7684\u7d22\u5f15\u6216\u4e0e\u7ed9\u5b9atoken\u5bf9\u5e94\u7684\u5b57\u7b26\u8303\u56f4\uff09\u3002</p>"},{"location":"tokenizer/tokenizer%E5%AE%9E%E7%8E%B0/#_1","title":"\u53c2\u8003","text":"<ol> <li>https://huggingface.co/docs/transformers/v4.41.1/zh/main_classes/tokenizer</li> </ol>"},{"location":"tokenizer/utf8_unicode/","title":"\u5b57\u7b26\u7f16\u7801","text":"<p>Unicode \u7f16\u7801\u4e0e UTF-8 \u7f16\u7801\u5747\u662f\u7531 Unicode \u534f\u4f1a\uff08 The Unicode Consortium\uff09\u5236\u5b9a\u7684\u5bf9\u5404\u56fd\u6587\u5b57\u3001\u7b26\u53f7\u8fdb\u884c\u7edf\u4e00\u7f16\u7801\u7684\u7f16\u7801\u4f53\u7cfb\u3002</p>"},{"location":"tokenizer/utf8_unicode/#unicode","title":"unicode \u7f16\u7801","text":"<p>\u4e3a\u4e86\u65b9\u4fbf\u5168\u7403\u8303\u56f4\u5185\u7684\u6570\u636e\u4ea4\u6362\uff0cUnicode \u534f\u4f1a\u6700\u5148\u63a8\u51fa\u4e86Unicode \u7f16\u7801\uff0c\u5b83\u91c7\u7528 \u4e24\u4e2a\u5b57\u8282 \u6765\u8868\u793a\u4e00\u4e2a\u5b57\u7b26\uff0c\u662f\u4e00\u79cd 16 \u4f4d\u7f16\u7801\u65b9\u5f0f\u3002\u8fd9\u79cd\u7f16\u7801\u65b9\u5f0f\u4e0d\u53ef\u907f\u514d\u5730\u5b58\u5728\u517c\u5bb9\u6027\u95ee\u9898\uff1a\u76ee\u524d\u7f51\u7edc\u8bbe\u5907\u548c\u534f\u8bae\u90fd\u662f\u9488\u5bf9 \u5b57\u8282 \u8fdb\u884c\u5904\u7406\uff0c\u5f53\u7f51\u7edc\u8bbe\u5907\u63a5\u6536\u5230\u4e00\u4e2aUnicode \u65f6\uff0c\u4f1a\u81ea\u52a8\u5c06\u5176\u5207\u5206\u4e3a\u4e24\u4e2a\u5b57\u8282\uff0c\u5e76\u68c0\u67e5\u5176\u4e2d\u662f\u5426\u542b\u6709\u63a7\u5236\u7801\uff0c\u8fd9\u5c06\u4f1a\u4f7f Unicode \u6570\u636e\u53d8\u5f97\u6b8b\u7f3a\u4e0d\u5168\uff0c\u9020\u6210\u6570\u636e\u635f\u5931\u3002</p>"},{"location":"tokenizer/utf8_unicode/#utf8","title":"utf8\u7f16\u7801","text":""},{"location":"tokenizer/utf8_unicode/#utf8_1","title":"utf8\u80cc\u666f","text":"<p>\u4e3a\u4e86\u89e3\u51b3\u4e0a\u8ff0 Unicode \u7f16\u7801\u517c\u5bb9\u6027\u8fd9\u4e00\u95ee\u9898\uff0cUnicode \u534f\u4f1a\u53c8\u5236\u5b9a\u4e86 UTF-8 \u7f16\u7801\uff0c\u5b83 \u91c7\u7528 \u53d8\u957f\u7684\u591a\u5b57\u8282\u4e32 \u6765\u8868\u793a\u5b57\u7b26\uff0c\u53ef\u4ee5\u8bf4\u662f Unicode \u7684 8 \u4f4d\u7f16\u7801\u65b9\u5f0f\u3002\u7531\u4e8e\u8fd9\u4e24\u79cd\u7f16\u7801\u65b9\u5f0f\u540c\u65f6\u5b58\u5728\uff0c\u800c\u4e14\u90fd\u6709\u7740\u5e7f\u6cdb\u7684\u5e94\u7528\uff0c\u5728\u5bf9\u4fe1\u606f\u8fdb\u884c\u5904\u7406\u65f6\uff0c\u6211\u4eec\u7ecf\u5e38\u9700\u8981\u5c06\u8fd9\u4e24\u79cd\u7f16\u7801\u76f8\u4e92\u8f6c\u6362\u3002</p>"},{"location":"tokenizer/utf8_unicode/#utf8_2","title":"utf8\u7f16\u7801\u539f\u5219","text":"<p>\u5728 UTF-8 \u7f16\u7801\u4e2d\uff0c\u6240\u6709\u7684\u5b57\u7b26\u5747\u4f7f\u7528 1 \u5230 6 \u4e2a\u5b57\u8282\u8fdb\u884c\u7f16\u7801\u3002\u5728\u53ea\u5305\u542b 1 \u4e2a\u5b57\u8282\u7684 UTF-8 \u7f16\u7801\u4e2d\uff0c\u5176\u6700\u9ad8\u4f4d\u7f6e\u4e3a 0\uff0c\u5176\u4f59\u7684 7 \u4e2a\u4e8c\u8fdb\u5236\u4f4d\u7528\u6765\u5bf9\u5b57\u7b26\u8fdb\u884c\u7f16\u7801\uff1b\u5728\u542b n\uff08 \\(1 &lt; n \\leq 6\\)\uff09\u4e2a\u5b57\u8282\u7684 UTF-8 \u7f16\u7801\u4e2d\uff0c\u5176\u7b2c\u4e00\u4e2a\u5b57\u8282\u7684\u524d n \u4f4d\u8d4b\u503c\u4e3a 1\uff0c\u7b2c n+1 \u4f4d\u8d4b\u503c\u4e3a 0\uff0c\u8be5\u5b57\u8282\u5269\u4f59\u7684\u5176\u5b83\u4e8c\u8fdb\u5236\u4f4d\u7528\u6765\u5bf9\u5b57\u7b26\u8fdb\u884c\u7f16\u7801\uff0c\u540e\u7eed\u5b57\u8282\u7684\u6700\u9ad8\u4f4d\u5747\u8d4b\u503c\u4e3a 1\uff0c\u6b21\u9ad8\u4f4d\u5747\u8d4b\u503c\u4e3a 0\uff0c\u6bcf\u4e2a\u5b57\u8282\u4e2d\u5269\u4f59\u7684 6 \u4e2a\u4e8c\u8fdb\u5236\u4f4d\u7528\u6765\u5bf9\u5b57\u7b26\u8fdb\u884c\u7f16\u7801\u3002</p> <p>\u4e00\u4e2a\u5b57\u7b26\u7684 UTF-8 \u7f16\u7801\u4e2d\u5305\u542b\u5b57\u8282\u4e2a\u6570\u7684\u591a\u5c11\u662f\u7531\u5176 Unicode \u7f16\u7801\u6240\u5904\u7684\u8303\u56f4\u6765\u51b3\u5b9a\u7684\uff0c\u5177\u4f53\u5982\u8868 1 \u6240\u793a\uff0c\u8be5\u8868\u4e2d\u7ed9\u51fa\u4e86\u4e0d\u540c\u8303\u56f4\u5185\u7684 Unicode \u5b57\u7b26\u5bf9\u5e94\u7684 UTF-8 \u7f16\u7801\u7684\u683c\u5f0f\uff0c\u5176\u4e2d\u5df2\u586b\u5165\u7684 1\u30010 \u6570\u636e\u8868\u793a\u7ea6\u5b9a\u7684\u6807\u8bb0\u4f4d\uff0cx \u8868\u793a\u5bf9\u5b57\u7b26\u7f16\u7801\u65f6\u53ef\u7528\u7684\u4e8c\u8fdb\u5236\u4f4d\u3002\u5c06 Unicode \u7f16\u7801\u7684\u4e8c\u8fdb\u5236\u4f4d\u6309\u7531\u4f4e\u5230\u9ad8\u7684\u6b21\u5e8f\u653e\u5165 x \u8868\u793a\u7684\u7a7a\u4f4d\u4e2d\u5373\u53ef\u5f97\u5230\u5176\u6240\u5bf9\u5e94\u7684UTF-8 \u7f16\u7801\u3002</p> UTF-8 \u5b57\u8282\u6570\u76ee Unicode \u7f16\u7801(\u5341\u516d\u8fdb\u5236) UTF-8 \u7f16\u7801(\u4e8c\u8fdb\u5236) 1 U+0000 0000 - U+0000 007F 0xxxxxxx 2 U+0000 0080 - U+0000 07FF 110xxxxx 10xxxxxx 3 U+0000 0800 - U+0000 FFFF 1110xxxx 10xxxxxx 10xxxxxx 4 U+0001 0000 - U+001F FFFF 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx 5 U+0020 0000 - U+03FF FFFF 111110xx 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx 6 U+0400 0000 - U+7FFF FFFF 1111110x 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx"},{"location":"tokenizer/utf8_unicode/#_2","title":"\u4e2d\u6587\u6c49\u5b57\u7f16\u7801","text":""},{"location":"tutorials/blogs/basic/","title":"basic","text":"<p>\u57fa\u7840</p>"},{"location":"tutorials/blogs/engage/","title":"engage","text":"<p>engage</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/","title":"DeepSeek-R1\uff1a\u901a\u8fc7\u5f3a\u5316\u5b66\u4e60\u6fc0\u53d1LLM\u7684\u63a8\u7406\u80fd\u529b","text":"<p>DeepSeek AI research@deepseek.com</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#_1","title":"\u6458\u8981","text":"<p>\u6211\u4eec\u4ecb\u7ecd\u4e86\u6211\u4eec\u7684\u7b2c\u4e00\u4ee3\u63a8\u7406\u6a21\u578b DeepSeek-R1-Zero \u548c DeepSeek-R1\u3002DeepSeek-R1-Zero\u662f\u4e00\u4e2a\u901a\u8fc7\u5927\u89c4\u6a21\u5f3a\u5316\u5b66\u4e60\uff08RL\uff09\u8bad\u7ec3\u7684\u6a21\u578b\uff0c\u6ca1\u6709\u7ecf\u8fc7\u521d\u6b65\u7684\u76d1\u7763\u5fae\u8c03\uff08SFT\uff09\uff0c\u8868\u73b0\u51fa\u5353\u8d8a\u7684\u63a8\u7406\u80fd\u529b\u3002\u901a\u8fc7RL\uff0cDeepSeek-R1-Zero\u81ea\u7136\u5730\u51fa\u73b0\u4e86\u8bb8\u591a\u5f3a\u5927\u800c\u6709\u8da3\u7684\u63a8\u7406\u884c\u4e3a\u3002\u7136\u800c\uff0c\u5b83\u9047\u5230\u4e86\u53ef\u8bfb\u6027\u5dee\u548c\u8bed\u8a00\u6df7\u5408\u7b49\u6311\u6218\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\u5e76\u8fdb\u4e00\u6b65\u63d0\u9ad8\u63a8\u7406\u6027\u80fd\uff0c\u6211\u4eec\u5f15\u5165\u4e86DeepSeek-R1\uff0c\u5b83\u5728RL\u4e4b\u524d\u7ed3\u5408\u4e86\u591a\u9636\u6bb5\u8bad\u7ec3\u548c\u51b7\u542f\u52a8\u6570\u636e\u3002DeepSeek-R1\u5728\u63a8\u7406\u4efb\u52a1\u4e0a\u7684\u6027\u80fd\u4e0eOpenAI-o1-1217\u76f8\u5f53\u3002\u4e3a\u4e86\u652f\u6301\u7814\u7a76\u793e\u533a\uff0c\u6211\u4eec\u5f00\u6e90\u4e86DeepSeek-R1-Zero\u3001DeepSeek-R1\uff0c\u4ee5\u53ca\u57fa\u4e8eQwen\u548cLlama\u4eceDeepSeek-R2\u4e2d\u63d0\u53d6\u7684\u516d\u4e2a\u5bc6\u96c6\u6a21\u578b\uff081.5B\u30017B\u30018B\u300114B\u300132B\u300170B\uff09\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#1","title":"1 \u5f15\u8a00","text":"<p>\u8fd1\u5e74\u6765\uff0c\u5927\u578b\u8bed\u8a00\u6a21\u578b\uff08LLM\uff09\u6b63\u5728\u7ecf\u5386\u5feb\u901f\u8fed\u4ee3\u548c\u8fdb\u5316\uff08Anthropic\uff0c2024\uff1bGoogle\uff0c2024\uff0cOpenAI\uff0c2024a\uff09\uff0c\u9010\u6e10\u7f29\u5c0f\u4e86\u4e0e\u901a\u7528\u4eba\u5de5\u667a\u80fd\uff08AGI\uff09\u7684\u5dee\u8ddd\u3002</p> <p>\u6700\u8fd1\uff0cpost-training \u5df2\u6210\u4e3a\u5168\u9762\u8bad\u7ec3\u6d41\u7a0b\u7684\u91cd\u8981\u7ec4\u6210\u90e8\u5206\u3002\u5b83\u5df2\u88ab\u8bc1\u660e\u53ef\u4ee5\u63d0\u9ad8\u63a8\u7406\u4efb\u52a1\u7684\u51c6\u786e\u6027\uff0c\u4e0e\u793e\u4f1a\u4ef7\u503c\u89c2\u4fdd\u6301\u4e00\u81f4\uff0c\u5e76\u9002\u5e94\u7528\u6237\u504f\u597d\uff0c\u540c\u65f6\u4e0e\u9884\u8bad\u7ec3\u76f8\u6bd4\u9700\u8981\u76f8\u5bf9\u8f83\u5c11\u7684\u8ba1\u7b97\u8d44\u6e90\u3002\u5728\u63a8\u7406\u80fd\u529b\u65b9\u9762\uff0cOpenAI\u7684o1\uff08OpenAI\uff0c2024b\uff09\u7cfb\u5217\u6a21\u578b\u662f\u7b2c\u4e00\u4e2a\u901a\u8fc7\u589e\u52a0\u601d\u7ef4\u94fe\u63a8\u7406\u8fc7\u7a0b\u7684\u957f\u5ea6\u6765\u5f15\u5165\u63a8\u7406\u65f6\u95f4\u7f29\u653e\u7684\u6a21\u578b\u3002\u8fd9\u79cd\u65b9\u6cd5\u5728\u5404\u79cd\u63a8\u7406\u4efb\u52a1\u4e2d\u53d6\u5f97\u4e86\u91cd\u5927\u6539\u8fdb\uff0c\u5982\u6570\u5b66\u3001\u7f16\u7801\u548c\u79d1\u5b66\u63a8\u7406\u3002\u7136\u800c\uff0c\u6709\u6548\u6d4b\u8bd5\u65f6\u95f4\u7f29\u653e\u7684\u6311\u6218\u4ecd\u7136\u662f\u7814\u7a76\u754c\u7684\u4e00\u4e2a\u60ac\u800c\u672a\u51b3\u7684\u95ee\u9898\u3002\u4e4b\u524d\u7684\u51e0\u9879\u5de5\u4f5c\u63a2\u7d22\u4e86\u5404\u79cd\u65b9\u6cd5\uff0c\u5305\u62ec\u57fa\u4e8e\u8fc7\u7a0b\u7684\u5956\u52b1\u6a21\u578b\uff08Lightman\u7b49\u4eba\uff0c2023\uff1bUesato\u7b49\u4eba\uff0c2022\uff1bWang\u7b49\u4eba\uff0c2023\uff09\u3001\u5f3a\u5316\u5b66\u4e60\uff08Kumar\u7b49\u4eba\uff0c2024\uff09\u4ee5\u53ca\u8499\u7279\u5361\u6d1b\u6811\u641c\u7d22\u548c\u6ce2\u675f\u641c\u7d22\u7b49\u641c\u7d22\u7b97\u6cd5\uff08Feng\u7b49\u4eba\uff0c2024.\uff1bTrinh\u7b49\u4eba\uff0c2024:Xin\u7b49\u4eba\uff0c2024].\uff09\u3002\u7136\u800c\uff0c\u8fd9\u4e9b\u65b9\u6cd5\u90fd\u6ca1\u6709\u8fbe\u5230\u4e0eOpenAI\u7684o1\u7cfb\u5217\u6a21\u578b\u76f8\u5f53\u7684\u4e00\u822c\u63a8\u7406\u6027\u80fd\u3002</p> <p>\u5728\u8fd9\u7bc7\u8bba\u6587\u4e2d\uff0c\u6211\u4eec\u8fc8\u51fa\u4e86\u4f7f\u7528\u7eaf\u5f3a\u5316\u5b66\u4e60\uff08RL\uff09\u63d0\u9ad8\u8bed\u8a00\u6a21\u578b\u63a8\u7406\u80fd\u529b\u7684\u7b2c\u4e00\u6b65\u3002\u6211\u4eec\u7684\u76ee\u6807\u662f\u63a2\u7d22LLM\u5728\u6ca1\u6709\u4efb\u4f55\u76d1\u7763\u6570\u636e\u7684\u60c5\u51b5\u4e0b\u53d1\u5c55\u63a8\u7406\u80fd\u529b\u7684\u6f5c\u529b\uff0c\u4e13\u6ce8\u4e8e\u901a\u8fc7\u7eaf\u7cb9\u7684RL\u8fc7\u7a0b\u8fdb\u884c\u81ea\u6211\u8fdb\u5316\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u6211\u4eec\u4f7f\u7528DeepSeek-V3-Base\u4f5c\u4e3a\u57fa\u7840\u6a21\u578b\uff0c\u5e76\u91c7\u7528GRPO\uff08Shao\u7b49\u4eba\uff0c2024\uff09\u4f5c\u4e3aRL\u6846\u67b6\u6765\u63d0\u9ad8\u63a8\u7406\u4e2d\u7684\u6a21\u578b\u6027\u80fd\u3002\u5728\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\uff0cDeepSeek-R1-Zero\u81ea\u7136\u5730\u51fa\u73b0\u4e86\u8bb8\u591a\u5f3a\u5927\u800c\u6709\u8da3\u7684\u63a8\u7406\u884c\u4e3a\u3002\u7ecf\u8fc7\u6570\u5343\u6b65\u5f3a\u5316\u5b66\u4e60\uff0cDeepSeek-R1-Zero\u5728\u63a8\u7406\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u8868\u73b0\u51fa\u4e86\u5353\u8d8a\u7684\u6027\u80fd\u3002\u4f8b\u5982pass@1AIME 2024\u7684\u5f97\u5206\u4ece15.6%\u4e0a\u5347\u523071.0%\uff0c\u5728\u591a\u6570\u6295\u7968\u7684\u60c5\u51b5\u4e0b\uff0c\u5f97\u5206\u8fdb\u4e00\u6b65\u63d0\u9ad8\u523086.7%\uff0c\u4e0eOpenAI-o1-0912\u7684\u8868\u73b0\u76f8\u5339\u914d\u3002</p> <p>\u7136\u800c\uff0cDeepSeek-R1-Zero\u9047\u5230\u4e86\u53ef\u8bfb\u6027\u5dee\u548c\u8bed\u8a00\u6df7\u5408\u7b49\u6311\u6218\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\u5e76\u8fdb\u4e00\u6b65\u63d0\u9ad8\u63a8\u7406\u6027\u80fd\uff0c\u6211\u4eec\u5f15\u5165\u4e86DeepSeek-R1\uff0c\u5b83\u7ed3\u5408\u4e86\u5c11\u91cf\u7684\u51b7\u542f\u52a8\u6570\u636e\u548c\u591a\u9636\u6bb5\u8bad\u7ec3\u7ba1\u9053\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u6211\u4eec\u9996\u5148\u6536\u96c6\u6570\u5343\u4e2a\u51b7\u542f\u52a8\u6570\u636e\uff0c\u4ee5\u5fae\u8c03DeepSeek-V3-Base\u6a21\u578b\u3002\u5728\u6b64\u4e4b\u540e\uff0c\u6211\u4eec\u6267\u884c\u9762\u5411\u63a8\u7406\u7684RL\uff0c\u5982DeepSeek-R1-Zero\u3002\u5728RL\u8fc7\u7a0b\u63a5\u8fd1\u6536\u655b\u65f6\uff0c\u6211\u4eec\u901a\u8fc7RL\u68c0\u67e5\u70b9\u4e0a\u7684\u62d2\u7edd\u91c7\u6837\u521b\u5efa\u65b0\u7684SFT\u6570\u636e\uff0c\u5e76\u7ed3\u5408DeepSeek-V3\u5728\u5199\u4f5c\u3001\u4e8b\u5b9eQA\u548c\u81ea\u6211\u8ba4\u77e5\u7b49\u9886\u57df\u7684\u76d1\u7763\u6570\u636e\uff0c\u7136\u540e\u91cd\u65b0\u8bad\u7ec3DeepSeek-V3-Base\u6a21\u578b\u3002\u5728\u5bf9\u65b0\u6570\u636e\u8fdb\u884c\u5fae\u8c03\u540e\uff0c\u68c0\u67e5\u70b9\u4f1a\u7ecf\u5386\u4e00\u4e2a\u989d\u5916\u7684RL\u8fc7\u7a0b\uff0c\u540c\u65f6\u8003\u8651\u5230\u6240\u6709\u573a\u666f\u7684\u63d0\u793a\u3002\u7ecf\u8fc7\u8fd9\u4e9b\u6b65\u9aa4\uff0c\u6211\u4eec\u83b7\u5f97\u4e86\u4e00\u4e2a\u540d\u4e3aDeepSeek-R1\u7684\u68c0\u67e5\u70b9\uff0c\u5176\u6027\u80fd\u4e0eOpenAI-o1-1217\u76f8\u5f53\u3002</p> <p>\u6211\u4eec\u8fdb\u4e00\u6b65\u63a2\u7d22\u4e86\u4eceDeepSeek-R1\u5230\u66f4\u5c0f\u5bc6\u5ea6\u6a21\u578b\u7684\u84b8\u998f\u3002\u4f7f\u7528Qwen2.5-32B\uff08Qwen\uff0c2024b\uff09\u4f5c\u4e3a\u57fa\u7840\u6a21\u578b\uff0cDeepSeek-R1\u7684\u76f4\u63a5\u84b8\u998f\u4f18\u4e8e\u5728\u5176\u4e0a\u5e94\u7528RL\u3002\u8fd9\u8868\u660e\uff0c\u8f83\u5927\u57fa\u7840\u6a21\u578b\u53d1\u73b0\u7684\u63a8\u7406\u6a21\u5f0f\u5bf9\u4e8e\u63d0\u9ad8\u63a8\u7406\u80fd\u529b\u81f3\u5173\u91cd\u8981\u3002\u6211\u4eec\u5f00\u6e90\u4e86\u84b8\u998f\u7684Qwen\u548cLlama\uff08Dubey\u7b49\u4eba\uff0c2024\uff09\u7cfb\u5217\u3002\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u6211\u4eec\u63d0\u53d6\u768414B\u6a21\u578b\u5728\u5f88\u5927\u7a0b\u5ea6\u4e0a\u4f18\u4e8e\u6700\u5148\u8fdb\u7684\u5f00\u6e90QwQ-32B\u9884\u89c8\u7248\uff08Qwen\uff0c2024a\uff09\uff0c\u63d0\u53d6\u768432B\u548c70B\u6a21\u578b\u5728\u5bc6\u96c6\u6a21\u578b\u7684\u63a8\u7406\u57fa\u51c6\u4e0a\u521b\u4e0b\u4e86\u65b0\u7eaa\u5f55\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#11","title":"1.1 \u8d21\u732e","text":"<p>post-training\uff1a\u57fa\u4e8e\u57fa\u7840\u6a21\u578b\u7684\u5927\u89c4\u6a21\u5f3a\u5316\u5b66\u4e60\uff1a</p> <ul> <li>\u6211\u4eec\u76f4\u63a5\u5c06RL\u5e94\u7528\u4e8e\u57fa\u7840\u6a21\u578b\uff0c\u800c\u4e0d\u4f9d\u8d56\u4e8e\u76d1\u7763\u5fae\u8c03\uff08SFT\uff09\u4f5c\u4e3a\u521d\u6b65\u6b65\u9aa4\u3002\u8fd9\u79cd\u65b9\u6cd5\u5141\u8bb8\u6a21\u578b\u63a2\u7d22\u89e3\u51b3\u590d\u6742\u95ee\u9898\u7684\u601d\u7ef4\u94fe\uff08CoT\uff09\uff0c\u4ece\u800c\u5f00\u53d1\u4e86DeepSeek-R1-Zero\u3002DeepSeek-R1-Zero\u5c55\u793a\u4e86\u81ea\u6211\u9a8c\u8bc1\u3001\u53cd\u5c04\u548c\u751f\u6210\u957fCoT\u7b49\u529f\u80fd\uff0c\u6807\u5fd7\u7740\u7814\u7a76\u754c\u7684\u4e00\u4e2a\u91cd\u8981\u91cc\u7a0b\u7891\u3002\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u8fd9\u662f\u7b2c\u4e00\u9879\u516c\u5f00\u7814\u7a76\uff0c\u9a8c\u8bc1\u4e86LLM\u7684\u63a8\u7406\u80fd\u529b\u53ef\u4ee5\u5b8c\u5168\u901a\u8fc7RL\u6765\u6fc0\u52b1\uff0c\u800c\u4e0d\u9700\u8981SFT\u3002\u8fd9\u4e00\u7a81\u7834\u4e3a\u8be5\u9886\u57df\u7684\u672a\u6765\u53d1\u5c55\u94fa\u5e73\u4e86\u9053\u8def\u3002</li> <li>\u6211\u4eec\u4ecb\u7ecd\u4e86\u6211\u4eec\u5f00\u53d1DeepSeek-R1\u7684\u7ba1\u9053\u3002\u8be5\u7ba1\u9053\u5305\u542b\u4e24\u4e2aRL\u9636\u6bb5\uff0c\u65e8\u5728\u53d1\u73b0\u6539\u8fdb\u7684\u63a8\u7406\u6a21\u5f0f\u5e76\u4e0e\u4eba\u7c7b\u504f\u597d\u4fdd\u6301\u4e00\u81f4\uff0c\u4ee5\u53ca\u4e24\u4e2aSFT\u9636\u6bb5\uff0c\u4f5c\u4e3a\u6a21\u578b\u63a8\u7406\u548c\u975e\u63a8\u7406\u80fd\u529b\u7684\u79cd\u5b50\u3002\u6211\u4eec\u76f8\u4fe1\uff0c\u901a\u8fc7\u521b\u5efa\u66f4\u597d\u7684\u6a21\u578b\uff0c\u8be5\u7ba1\u9053\u5c06\u4f7f\u884c\u4e1a\u53d7\u76ca\u3002\u00ac</li> </ul> <p>\u84b8\u998f\uff1a\u8f83\u5c0f\u7684\u578b\u53f7\u4e5f\u53ef\u80fd\u5f88\u5f3a\u5927</p> <ul> <li>\u6211\u4eec\u8bc1\u660e\uff0c\u4e0e\u901a\u8fc7RL\u5728\u5c0f\u6a21\u578b\u4e0a\u53d1\u73b0\u7684\u63a8\u7406\u6a21\u5f0f\u76f8\u6bd4\uff0c\u8f83\u5927\u6a21\u578b\u7684\u63a8\u7406\u6a21\u5f0f\u53ef\u4ee5\u88ab\u63d0\u70bc\u6210\u8f83\u5c0f\u7684\u6a21\u578b\uff0c\u4ece\u800c\u83b7\u5f97\u66f4\u597d\u7684\u6027\u80fd\u3002\u5f00\u6e90DeepSeek-R1\u53ca\u5176API\u5c06\u6709\u5229\u4e8e\u7814\u7a76\u793e\u533a\u5728\u672a\u6765\u63d0\u53d6\u66f4\u597d\u7684\u5c0f\u578b\u6a21\u578b\u3002</li> <li>\u4f7f\u7528DeepSeek-R1\u751f\u6210\u7684\u63a8\u7406\u6570\u636e\uff0c\u6211\u4eec\u5bf9\u7814\u7a76\u754c\u5e7f\u6cdb\u4f7f\u7528\u7684\u51e0\u4e2a\u5bc6\u96c6\u6a21\u578b\u8fdb\u884c\u4e86\u5fae\u8c03\u3002\u8bc4\u4f30\u7ed3\u679c\u8868\u660e\uff0c\u84b8\u998f\u51fa\u7684\u8f83\u5c0f\u5bc6\u5ea6\u6a21\u578b\u5728\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u8868\u73b0\u51fa\u8272\u3002DeepSeek-R1-Distill-Qwen-7B\u5728AIME 2024\u4e0a\u53d6\u5f97\u4e8655.5%\u7684\u6210\u7ee9\uff0c\u8d85\u8fc7\u4e86QwQ-32B\u9884\u89c8\u7248\u3002\u6b64\u5916\u00ac\uff0cDeepSeek-R1-Distill-Qwen-32B\u5728AIME 2024\u3001MATH-500\u548cLiveCodeBench\u4e0a\u7684\u5f97\u5206\u5206\u522b\u4e3a72.6%\u300194.3%\u548c57.2%\u3002\u8fd9\u4e9b\u7ed3\u679c\u660e\u663e\u4f18\u4e8e\u4e4b\u524d\u7684\u5f00\u6e90\u6a21\u578b\uff0c\u4e0eo1-mini\u76f8\u5f53\u3002\u6211\u4eec\u57fa\u4e8eQwen2.5\u548cLlama3\u7cfb\u5217\u5411\u793e\u533a\u5f00\u6e90\u4e861.5B\u30017B\u30018B\u300114B\u300132B\u548c70B\u68c0\u67e5\u70b9\u3002</li> </ul>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#12","title":"1.2 \u8bc4\u4f30\u7ed3\u679c\u603b\u7ed3","text":"<ul> <li>\u63a8\u7406\u4efb\u52a1\uff1a\uff081\uff09DeepSeek-R1\u7684\u5f97\u5206\u4e3a79.8%Pass@1\u5728AIME 2024\u4e0a\uff0c\u7565\u5fae\u8d85\u8fc7\u4e86OpenAI-o1-1217\u3002\u5728MATH-500\u4e0a\uff0c\u5b83\u83b7\u5f97\u4e86\u4ee4\u4eba\u5370\u8c61\u6df1\u523b\u768497.3%\u7684\u5206\u6570\uff0c\u4e0eOpenAI-o1-1217\u76f8\u5f53\uff0c\u5e76\u4e14\u660e\u663e\u4f18\u4e8e\u5176\u4ed6\u6a21\u578b\u3002\uff082\uff09 \u5728\u4e0e\u7f16\u7801\u76f8\u5173\u7684\u4efb\u52a1\u4e2d\uff0cDeepSeek-R1\u5728\u4ee3\u7801\u7ade\u8d5b\u4efb\u52a1\u4e2d\u8868\u73b0\u51fa\u4e86\u4e13\u5bb6\u7ea7\u6c34\u5e73\uff0c\u56e0\u4e3a\u5b83\u5728Codeforce\u4e0a\u83b7\u5f97\u4e862029 Elo\u8bc4\u7ea7\uff0c\u8d85\u8fc7\u4e8696.3%\u7684\u4eba\u7c7b\u53c2\u4e0e\u8005\u3002\u5bf9\u4e8e\u4e0e\u5de5\u7a0b\u76f8\u5173\u7684\u4efb\u52a1\uff0cDeepSeek-R1\u7684\u6027\u80fd\u7565\u4f18\u4e8eDeepSeek-V3\uff0c\u8fd9\u53ef\u4ee5\u5e2e\u52a9\u5f00\u53d1\u4eba\u5458\u5b8c\u6210\u73b0\u5b9e\u4e16\u754c\u7684\u4efb\u52a1\u3002</li> <li>\u77e5\u8bc6\uff1a\u5728MMLU\u3001MMLU Pro\u548cGPQA Diamond\u7b49\u57fa\u51c6\u6d4b\u8bd5\u4e2d\uff0cDeepSeek-R1\u53d6\u5f97\u4e86\u51fa\u8272\u7684\u6210\u7ee9\uff0c\u660e\u663e\u4f18\u4e8eDeepSeek-V3\uff0cMMLU\u5f97\u5206\u4e3a90.8%\uff0cMMLU Pro\u5f97\u5206\u4e3a84.0%\uff0cGPQA Diamonds\u5f97\u5206\u4e3a71.5%\u3002\u5c3d\u7ba1\u5728\u8fd9\u4e9b\u57fa\u51c6\u6d4b\u8bd5\u4e2d\uff0cDeepSeek-R1\u7684\u6027\u80fd\u7565\u4f4e\u4e8eOpenAI-o1-1217\uff0c\u4f46\u5b83\u8d85\u8d8a\u4e86\u5176\u4ed6\u95ed\u6e90\u6a21\u578b\uff0c\u5c55\u793a\u4e86\u5176\u5728\u6559\u80b2\u4efb\u52a1\u4e2d\u7684\u7ade\u4e89\u4f18\u52bf\u3002\u5728\u4e8b\u5b9e\u57fa\u51c6SimpleQA\u4e0a\uff0cDeepSeek-R1\u7684\u8868\u73b0\u4f18\u4e8eDeepSeek-V3\uff0c\u5c55\u793a\u4e86\u5176\u5904\u7406\u57fa\u4e8e\u4e8b\u5b9e\u7684\u67e5\u8be2\u7684\u80fd\u529b\u3002\u5728\u8fd9\u4e2a\u57fa\u51c6\u6d4b\u8bd5\u4e2d\uff0cOpenAI-o1\u8d85\u8fc7\u4e864o\uff0c\u4e5f\u89c2\u5bdf\u5230\u4e86\u7c7b\u4f3c\u7684\u8d8b\u52bf\u3002</li> <li>\u5176\u4ed6\uff1aDeepSeek-R1\u4e5f\u64c5\u957f\u5404\u79cd\u4efb\u52a1\uff0c\u5305\u62ec\u521b\u610f\u5199\u4f5c\u3001\u4e00\u822c\u95ee\u7b54\u3001\u7f16\u8f91\u3001\u603b\u7ed3\u7b49\u3002\u5b83\u5728AlpacaEval 2.0\u4e0a\u5b9e\u73b0\u4e86\u4ee4\u4eba\u5370\u8c61\u6df1\u523b\u768487.6%\u7684\u957f\u5ea6\u63a7\u5236\u80dc\u7387\uff0c\u5728Are-naHard\u4e0a\u5b9e\u73b0\u4e8692.3%\u7684\u80dc\u7387\uff0c\u5c55\u793a\u4e86\u5176\u667a\u80fd\u5904\u7406\u975e\u9762\u5411\u8003\u8bd5\u7684\u67e5\u8be2\u7684\u5f3a\u5927\u80fd\u529b\u3002\u6b64\u5916\uff0cDeepSeek-R1\u5728\u9700\u8981\u957f\u4e0a\u4e0b\u6587\u7406\u89e3\u7684\u4efb\u52a1\u4e0a\u8868\u73b0\u51fa\u8272\uff0c\u5728\u957f\u4e0a\u4e0b\u6587\u57fa\u51c6\u6d4b\u8bd5\u4e0a\u5927\u5927\u4f18\u4e8eDeepSeek-V3\u3002</li> </ul>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#2","title":"2 \u65b9\u6cd5","text":""},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#21","title":"2.1 \u6982\u8ff0","text":"<p>\u4e4b\u524d\u7684\u5de5\u4f5c\u5728\u5f88\u5927\u7a0b\u5ea6\u4e0a\u4f9d\u8d56\u4e8e\u5927\u91cf\u7684\u76d1\u7763\u6570\u636e\u6765\u63d0\u9ad8\u6a21\u578b\u6027\u80fd\u3002\u5728\u8fd9\u9879\u7814\u7a76\u4e2d\uff0c\u6211\u4eec\u8bc1\u660e\u4e86\u5373\u4f7f\u4e0d\u4f7f\u7528\u76d1\u7763\u5fae\u8c03\uff08SFT\uff09\u4f5c\u4e3a\u51b7\u542f\u52a8\uff0c\u901a\u8fc7\u5927\u89c4\u6a21\u5f3a\u5316\u5b66\u4e60\uff08RL\uff09\u4e5f\u53ef\u4ee5\u663e\u8457\u63d0\u9ad8\u63a8\u7406\u80fd\u529b\u3002\u6b64\u5916\uff0c\u901a\u8fc7\u5305\u542b\u5c11\u91cf\u51b7\u542f\u52a8\u6570\u636e\uff0c\u53ef\u4ee5\u8fdb\u4e00\u6b65\u63d0\u9ad8\u6027\u80fd\u3002\u5728\u4ee5\u4e0b\u90e8\u5206\u4e2d\uff0c\u6211\u4eec\u5c06\u4ecb\u7ecd\uff1a</p> <ul> <li>\uff081\uff09DeepSeek-R1-Zero\uff0c\u5b83\u5c06RL\u76f4\u63a5\u5e94\u7528\u4e8e\u57fa\u7840\u6a21\u578b\uff0c\u800c\u4e0d\u9700\u8981\u4efb\u4f55SFT\u6570\u636e\uff0c\u4ee5\u53ca</li> <li>\uff082\uff09 DeepSeek-R1\uff0c\u5b83\u4ece\u4e00\u4e2a\u68c0\u67e5\u70b9\u5f00\u59cb\u5e94\u7528RL\uff0c\u8be5\u68c0\u67e5\u70b9\u7ecf\u8fc7\u6570\u5343\u4e2a\u957f\u94fe\u601d\u7ef4\uff08CoT\uff09\u793a\u4f8b\u7684\u5fae\u8c03\u3002</li> <li>\uff083\uff09 \u5c06DeepSeek-R1\u7684\u63a8\u7406\u80fd\u529b\u63d0\u53d6\u5230\u5c0f\u578b\u5bc6\u96c6\u6a21\u578b\u4e2d\u3002</li> </ul>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#22-deepseek-r1-zero","title":"2.2 DeepSeek-R1-Zero\uff1a\u57fa\u4e8e\u57fa\u7840\u6a21\u578b\u7684\u5f3a\u5316\u5b66\u4e60","text":"<p>\u5f3a\u5316\u5b66\u4e60\u5728\u63a8\u7406\u4efb\u52a1\u4e2d\u8868\u73b0\u51fa\u4e86\u663e\u8457\u7684\u6709\u6548\u6027\uff0c\u6b63\u5982\u6211\u4eec\u4e4b\u524d\u7684\u5de5\u4f5c\u6240\u8bc1\u660e\u7684\u90a3\u6837\uff08Shao\u7b49\u4eba\uff0c2024\uff1bWang\u7b49\u4eba\uff0c2023\uff09\u3002\u7136\u800c\uff0c\u8fd9\u4e9b\u5de5\u4f5c\u5728\u5f88\u5927\u7a0b\u5ea6\u4e0a\u4f9d\u8d56\u4e8e\u76d1\u7763\u6570\u636e\uff0c\u800c\u8fd9\u4e9b\u6570\u636e\u7684\u6536\u96c6\u9700\u8981\u8017\u8d39\u5927\u91cf\u65f6\u95f4\u3002\u5728\u672c\u8282\u4e2d\uff0c\u6211\u4eec\u5c06\u63a2\u8ba8LLM\u5728\u00ac\u6ca1\u6709\u4efb\u4f55\u76d1\u7763\u6570\u636e\u7684\u60c5\u51b5\u4e0b\u53d1\u5c55\u63a8\u7406\u80fd\u529b\u7684\u6f5c\u529b\uff0c\u91cd\u70b9\u5173\u6ce8\u5b83\u4eec\u901a\u8fc7\u7eaf\u5f3a\u5316\u5b66\u4e60\u8fc7\u7a0b\u7684\u81ea\u6211\u8fdb\u5316\u3002\u6211\u4eec\u9996\u5148\u7b80\u8981\u6982\u8ff0\u4e86\u6211\u4eec\u7684RL\u7b97\u6cd5\uff0c\u7136\u540e\u4ecb\u7ecd\u4e86\u4e00\u4e9b\u4ee4\u4eba\u5174\u594b\u7684\u7ed3\u679c\uff0c\u5e76\u5e0c\u671b\u8fd9\u80fd\u4e3a\u793e\u533a\u63d0\u4f9b\u6709\u4ef7\u503c\u7684\u89c1\u89e3\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#221","title":"2.2.1 \u5f3a\u5316\u5b66\u4e60\u7b97\u6cd5","text":"<p>\u4e3a\u4e86\u8282\u7701RL\u7684\u8bad\u7ec3\u6210\u672c\uff0c\u6211\u4eec\u91c7\u7528\u4e86\u7ec4\u76f8\u5bf9\u7b56\u7565\u4f18\u5316\uff08GRPO\uff09\uff08Shao\u7b49\u4eba\uff0c2024\uff09\uff0c\u5b83\u653e\u5f03\u4e86\u901a\u5e38\u4e0e\u7b56\u7565\u6a21\u578b\u5927\u5c0f\u76f8\u540c\u7684\u6279\u8bc4\u6a21\u578b\uff0c\u800c\u662f\u6839\u636e\u7ec4\u5206\u6570\u4f30\u8ba1\u57fa\u7ebf\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u95ee\u9898 \\(q\\), \u7136\u540e\u4f18\u5316\u7b56\u7565\u6a21\u578b \\(\\pi_{\\theta}\\) \u901a\u8fc7\u6700\u5927\u5316\u4ee5\u4e0b\u76ee\u6807\uff1a $$ J_{GRPO}(\\theta) = E[q \\sim P(Q), {o_{i}}{i}^{G} \\sim \\pi(O|q)] $$ \u54ea\u91cc \\(\\epsilon\\) \u548c \\(\\beta\\) \u662f\u8d85\u53c2\u6570\uff0c\u4ee5\u53ca \\(A_{i}\\) \u662f\u4f18\u52bf\uff0c\u4f7f\u7528\u4e0e\u6bcf\u4e2a\u7ec4\u5185\u7684\u8f93\u51fa\u76f8\u5bf9\u5e94\u7684\u4e00\u7ec4\u5956\u52b1 \\(\\{r_{1}, r_{2}, \\cdots, r_{G}\\}\\) \u8ba1\u7b97\u5f97\u51fa\uff1a</p> <p></p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#222","title":"2.2.2 \u5956\u52b1\u5efa\u6a21","text":"<p>\u5956\u52b1\u662f\u8bad\u7ec3\u4fe1\u53f7\u7684\u6765\u6e90\uff0c\u5b83\u51b3\u5b9a\u4e86RL\u7684\u4f18\u5316\u65b9\u5411\u3002\u4e3a\u4e86\u8bad\u7ec3DeepSeek-R1-Zero\uff0c\u6211\u4eec\u91c7\u7528\u4e86\u4e00\u79cd\u57fa\u4e8e\u89c4\u5219\u7684\u5956\u52b1\u7cfb\u7edf\uff0c\u4e3b\u8981\u7531\u4e24\u79cd\u7c7b\u578b\u7684\u5956\u52b1\u7ec4\u6210\uff1a</p> <ul> <li>\u51c6\u786e\u6027\u5956\u52b1\uff1a\u51c6\u786e\u6027\u5956\u52b1\u6a21\u578b\u8bc4\u4f30\u54cd\u5e94\u662f\u5426\u6b63\u786e\u3002\u4f8b\u5982\uff0c\u5728\u5177\u6709\u786e\u5b9a\u6027\u7ed3\u679c\u7684\u6570\u5b66\u95ee\u9898\u7684\u60c5\u51b5\u4e0b\uff0c\u6a21\u578b\u9700\u8981\u4ee5\u6307\u5b9a\u7684\u683c\u5f0f\uff08\u4f8b\u5982\uff0c\u5728\u6846\u5185\uff09\u63d0\u4f9b\u6700\u7ec8\u7b54\u6848\uff0c\u4ece\u800c\u80fd\u591f\u5bf9\u6b63\u786e\u6027\u8fdb\u884c\u53ef\u9760\u7684\u57fa\u4e8e\u89c4\u5219\u7684\u9a8c\u8bc1\u3002\u540c\u6837\uff0c\u5bf9\u4e8eLeetCode\u95ee\u9898\uff0c\u53ef\u4ee5\u4f7f\u7528\u7f16\u8bd1\u5668\u6839\u636e\u9884\u5b9a\u4e49\u7684\u6d4b\u8bd5\u7528\u4f8b\u751f\u6210\u53cd\u9988\u3002</li> <li>\u683c\u5f0f\u5956\u52b1\uff1a\u9664\u4e86\u51c6\u786e\u6027\u5956\u52b1\u6a21\u578b\u5916\uff0c\u6211\u4eec\u8fd8\u91c7\u7528\u4e86\u4e00\u79cd\u683c\u5f0f\u5956\u52b1\u6a21\u578b\uff0c\u8be5\u6a21\u578b\u5f3a\u5236\u5c06\u5176\u601d\u7ef4\u8fc7\u7a0b\u7f6e\u4e8e\u201c\u201d\u548c\u201c\u201d\u6807\u7b7e\u4e4b\u95f4\u3002 \u6211\u4eec\u5728\u5f00\u53d1DeepSeek-R1-Zero\u65f6\u6ca1\u6709\u5e94\u7528\u7ed3\u679c\u6216\u8fc7\u7a0b\u795e\u7ecf\u5956\u52b1\u6a21\u578b\uff0c\u56e0\u4e3a\u6211\u4eec\u53d1\u73b0\u795e\u7ecf\u5956\u52b1\u6a21\u578b\u5728\u5927\u89c4\u6a21\u5f3a\u5316\u5b66\u4e60\u8fc7\u7a0b\u4e2d\u53ef\u80fd\u4f1a\u906d\u53d7\u5956\u52b1\u9ed1\u5ba2\u653b\u51fb\uff0c\u800c\u91cd\u65b0\u8bad\u7ec3\u5956\u52b1\u6a21\u578b\u9700\u8981\u989d\u5916\u7684\u8bad\u7ec3\u8d44\u6e90\uff0c\u8fd9\u4f7f\u6574\u4e2a\u8bad\u7ec3\u7ba1\u9053\u53d8\u5f97\u590d\u6742\u3002"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#223","title":"2.2.3 \u57f9\u8bad\u6a21\u677f","text":"<p>\u4e3a\u4e86\u8bad\u7ec3DeepSeek-R1-Zero\uff0c\u6211\u4eec\u9996\u5148\u8bbe\u8ba1\u4e86\u4e00\u4e2a\u7b80\u5355\u7684\u6a21\u677f\uff0c\u5f15\u5bfc\u57fa\u7840\u6a21\u578b\u9075\u5b88\u6211\u4eec\u6307\u5b9a\u7684\u6307\u4ee4\u3002\u5982\u88681\u6240\u793a\uff0c\u8be5\u6a21\u677f\u8981\u6c42DeepSeek-R1-Zero\u9996\u5148\u751f\u6210\u63a8\u7406\u8fc7\u7a0b\uff0c\u7136\u540e\u751f\u6210\u6700\u7ec8\u7b54\u6848\u3002\u6211\u4eec\u6709\u610f\u5c06\u7ea6\u675f\u9650\u5236\u5728\u8fd9\u79cd\u7ed3\u6784\u683c\u5f0f\u4e0a\uff0c\u907f\u514d\u4efb\u4f55\u7279\u5b9a\u4e8e\u5185\u5bb9\u7684\u504f\u89c1\uff0c\u4f8b\u5982\u5f3a\u5236\u8fdb\u884c\u53cd\u601d\u6027\u63a8\u7406\u6216\u63a8\u5e7f\u7279\u5b9a\u7684\u95ee\u9898\u89e3\u51b3\u7b56\u7565\uff0c\u4ee5\u786e\u4fdd\u6211\u4eec\u80fd\u591f\u5728\u5f3a\u5316\u5b66\u4e60\u8fc7\u7a0b\u4e2d\u51c6\u786e\u89c2\u5bdf\u6a21\u578b\u7684\u81ea\u7136\u8fdb\u7a0b\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#224-deepseek-r1-zeroaha","title":"2.2.4 DeepSeek-R1-Zero\u7684\u6027\u80fd\u3001\u81ea\u6f14\u5316\u8fc7\u7a0b\u548cAha\u65f6\u523b","text":"<p>\u56fe2\u5c55\u793a\u4e86DeepSeek-R1-Zero\u5728\u6574\u4e2a\u5f3a\u5316\u5b66\u4e60\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\u5728AIME 2024\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u7684\u6027\u80fd\u8f68\u8ff9\u3002\u5982\u56fe\u6240\u793a\uff0c\u968f\u7740\u5f3a\u5316\u5b66\u4e60\u8bad\u7ec3\u7684\u63a8\u8fdb\uff0cDeepSeek-R1-Zero\u7684\u6027\u80fd\u7a33\u6b65\u63d0\u9ad8\u3002\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u5e73\u5747pass@1AIME 2024\u7684\u5f97\u5206\u663e\u8457\u63d0\u9ad8\uff0c\u4ece\u6700\u521d\u768415.6%\u8dc3\u5347\u81f3\u4ee4\u4eba\u5370\u8c61\u6df1\u523b\u768471.0%\uff0c\u8fbe\u5230\u4e86\u4e0eOpenAI-o1-0912\u76f8\u5f53\u7684\u6027\u80fd\u6c34\u5e73\u3002\u8fd9\u4e00\u663e\u8457\u6539\u8fdb\u7a81\u663e\u4e86\u6211\u4eec\u7684RL\u7b97\u6cd5\u5728\u4f18\u5316\u6a21\u578b\u6027\u80fd\u65b9\u9762\u7684\u6709\u6548\u6027\u3002 \u88682\u63d0\u4f9b\u4e86DeepSeek-R1-Zero\u548cOpenAI\u7684o1-0912\u6a21\u578b\u5728\u5404\u79cd\u63a8\u7406\u76f8\u5173\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u7684\u6bd4\u8f83\u5206\u6790\u3002\u7814\u7a76\u7ed3\u679c\u8868\u660e\uff0cRL\u80fd\u591f\u589e\u5f3a</p> <p></p> <p>\u56fe2\u8bad\u7ec3\u671f\u95f4DeepSeek-R1-Zero\u7684AIME\u7cbe\u5ea6\u3002\u5bf9\u4e8e\u6bcf\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u62bd\u53d616\u4e2a\u7b54\u6848\u5e76\u8ba1\u7b97\u603b\u4f53\u5e73\u5747\u51c6\u786e\u7387\uff0c\u4ee5\u786e\u4fdd\u7a33\u5b9a\u7684\u8bc4\u4f30\u3002</p> <p>DeepSeek-R1-Zero\u65e0\u9700\u4efb\u4f55\u76d1\u7763\u5fae\u8c03\u6570\u636e\u5373\u53ef\u83b7\u5f97\u5f3a\u5927\u7684\u63a8\u7406\u80fd\u529b\u3002\u8fd9\u662f\u4e00\u9879\u503c\u5f97\u6ce8\u610f\u7684\u6210\u5c31\uff0c\u56e0\u4e3a\u5b83\u5f3a\u8c03\u4e86\u8be5\u6a21\u578b\u4ec5\u901a\u8fc7RL\u6709\u6548\u5b66\u4e60\u548c\u63a8\u5e7f\u7684\u80fd\u529b\u3002\u6b64\u5916\uff0cDeepSeek-R1-Zero\u7684\u6027\u80fd\u53ef\u4ee5\u901a\u8fc7\u591a\u6570\u6295\u7968\u7684\u5e94\u7528\u8fdb\u4e00\u6b65\u589e\u5f3a\u3002\u4f8b\u5982\uff0c\u5f53\u5728AIME\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u91c7\u7528\u591a\u6570\u6295\u7968\u65f6\uff0cDeepSeek-R1-Zero\u7684\u6027\u80fd\u4ece71.0%\u4e0a\u5347\u523086.7%\uff0c\u4ece\u800c\u8d85\u8fc7\u4e86OpenAI-o1-0912\u7684\u6027\u80fd\u3002DeepSeek-R1-Zero\u5728\u6709\u548c\u6ca1\u6709\u591a\u6570\u6295\u7968\u7684\u60c5\u51b5\u4e0b\u90fd\u80fd\u5b9e\u73b0\u5982\u6b64\u6709\u7ade\u4e89\u529b\u7684\u6027\u80fd\uff0c\u8fd9\u7a81\u663e\u4e86\u5176\u5f3a\u5927\u7684\u57fa\u7840\u80fd\u529b\u53ca\u5176\u5728\u63a8\u7406\u4efb\u52a1\u65b9\u9762\u8fdb\u4e00\u6b65\u53d1\u5c55\u7684\u6f5c\u529b\u3002</p> <p>DeepSeek-R1-Zero\u7684\u81ea\u8fdb\u5316\u8fc7\u7a0b\u662f\u4e00\u4e2a\u5f15\u4eba\u5165\u80dc\u7684\u6f14\u793a\uff0c\u5c55\u793a\u4e86RL\u5982\u4f55\u9a71\u52a8\u6a21\u578b\u81ea\u4e3b\u63d0\u9ad8\u5176\u63a8\u7406\u80fd\u529b\u3002\u901a\u8fc7\u76f4\u63a5\u4ece\u57fa\u7840\u6a21\u578b\u542f\u52a8RL\uff0c\u6211\u4eec\u53ef\u4ee5\u5bc6\u5207\u76d1\u63a7\u6a21\u578b\u7684\u8fdb\u5c55\uff0c\u800c\u4e0d\u53d7\u76d1\u7763\u5fae\u8c03\u9636\u6bb5\u7684\u5f71\u54cd\u3002\u8fd9\u79cd\u65b9\u6cd5\u6e05\u6670\u5730\u5c55\u793a\u4e86\u6a21\u578b\u5982\u4f55\u968f\u65f6\u95f4\u6f14\u53d8\uff0c\u7279\u522b\u662f\u5728\u5904\u7406\u590d\u6742\u63a8\u7406\u4efb\u52a1\u7684\u80fd\u529b\u65b9\u9762\u3002 \u5982\u56fe3\u6240\u793a\uff0cDeepSeek-R1-Zero\u7684\u601d\u8003\u65f6\u95f4\u6301\u7eed\u6539\u5584-</p> <p></p> <p>DeepSeek-R1-Zero\u901a\u8fc7\u5229\u7528\u6269\u5c55\u7684\u6d4b\u8bd5\u65f6\u95f4\u8ba1\u7b97\uff0c\u81ea\u7136\u83b7\u5f97\u4e86\u89e3\u51b3\u65e5\u76ca\u590d\u6742\u7684\u63a8\u7406\u4efb\u52a1\u7684\u80fd\u529b\u3002\u8fd9\u79cd\u8ba1\u7b97\u8303\u56f4\u4ece\u751f\u6210\u6570\u767e\u5230\u6570\u5343\u4e2a\u63a8\u7406\u4ee4\u724c\uff0c\u4f7f\u6a21\u578b\u80fd\u591f\u66f4\u6df1\u5165\u5730\u63a2\u7d22\u548c\u5b8c\u5584\u5176\u601d\u7ef4\u8fc7\u7a0b\u3002</p> <p>\u8fd9\u79cd\u81ea\u6211\u8fdb\u5316\u6700\u663e\u8457\u7684\u65b9\u9762\u4e4b\u4e00\u662f\u968f\u7740\u6d4b\u8bd5\u65f6\u95f4\u8ba1\u7b97\u7684\u589e\u52a0\uff0c\u590d\u6742\u884c\u4e3a\u7684\u51fa\u73b0\u3002\u53cd\u601d\uff08\u6a21\u578b\u4fee\u6539\u548c\u91cd\u65b0\u8bc4\u4f30\u5176\u5148\u524d\u6b65\u9aa4\uff09\u548c\u63a2\u7d22\u89e3\u51b3\u95ee\u9898\u7684\u66ff\u4ee3\u65b9\u6cd5\u7b49\u884c\u4e3a\u662f\u81ea\u53d1\u4ea7\u751f\u7684\u3002\u8fd9\u4e9b\u884c\u4e3a\u4e0d\u662f\u660e\u786e\u7f16\u7a0b\u7684\uff0c\u800c\u662f\u6a21\u578b\u4e0e\u5f3a\u5316\u5b66\u4e60\u73af\u5883\u4ea4\u4e92\u7684\u7ed3\u679c\u3002\u8fd9\u79cd\u81ea\u53d1\u5f00\u53d1\u663e\u8457\u589e\u5f3a\u4e86DeepSeek-R1-Zero\u7684\u63a8\u7406\u80fd\u529b\uff0c\u4f7f\u5176\u80fd\u591f\u4ee5\u66f4\u9ad8\u7684\u6548\u7387\u548c\u51c6\u786e\u6027\u5904\u7406\u66f4\u5177\u6311\u6218\u6027\u7684\u4efb\u52a1\u3002</p> <p>DeepSeek-R1-Zero\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\u89c2\u5bdf\u5230\u7684\u4e00\u4e2a\u7279\u522b\u6709\u8da3\u7684\u73b0\u8c61\u662f\u201c\u554a\u54c8\u65f6\u523b\u201d\u7684\u53d1\u751f\u3002\u5982\u88683\u6240\u793a\uff0c\u8fd9\u4e00\u65f6\u523b\u53d1\u751f\u5728\u6a21\u578b\u7684\u4e2d\u95f4\u7248\u672c\u4e2d\u3002\u5728\u6b64\u9636\u6bb5\uff0cDeepSeek-R1-Zero\u901a\u8fc7\u91cd\u65b0\u8bc4\u4f30\u5176\u521d\u59cb\u65b9\u6cd5\uff0c\u5b66\u4f1a\u4e3a\u95ee\u9898\u5206\u914d\u66f4\u591a\u7684\u601d\u8003\u65f6\u95f4\u3002\u8fd9\u79cd\u884c\u4e3a\u4e0d\u4ec5\u8bc1\u660e\u4e86\u6a21\u578b\u4e0d\u65ad\u589e\u957f\u7684\u63a8\u7406\u80fd\u529b\uff0c\u4e5f\u662f\u5f3a\u5316\u5b66\u4e60\u5982\u4f55\u4ea7\u751f\u610f\u60f3\u4e0d\u5230\u7684\u590d\u6742\u7ed3\u679c\u7684\u4e00\u4e2a\u8ff7\u4eba\u4f8b\u5b50\u3002 \u8fd9\u4e00\u65f6\u523b\u4e0d\u4ec5\u662f\u6a21\u578b\u7684\u201c\u987f\u609f\u65f6\u523b\u201d\uff0c\u4e5f\u662f\u7814\u7a76\u4eba\u5458\u89c2\u5bdf\u5176\u884c\u4e3a\u7684\u65f6\u523b\u3002\u5b83\u5f3a\u8c03\u4e86\u5f3a\u5316\u5b66\u4e60\u7684\u529b\u91cf\u548c\u7f8e\u4e3d\uff1a\u6211\u4eec\u4e0d\u662f\u660e\u786e\u5730\u6559\u6388\u6a21\u578b\u5982\u4f55\u89e3\u51b3\u95ee\u9898\uff0c\u800c\u662f\u7b80\u5355\u5730\u4e3a\u5176\u63d0\u4f9b\u6b63\u786e\u7684\u6fc0\u52b1\uff0c\u5b83\u81ea\u4e3b\u5730\u5f00\u53d1\u51fa\u5148\u8fdb\u7684\u89e3\u51b3\u95ee\u9898\u7684\u7b56\u7565\u3002\u201c\u987f\u609f\u65f6\u523b\u201d\u6709\u529b\u5730\u63d0\u9192\u6211\u4eec\uff0c\u5f3a\u5316\u5b66\u4e60\u6709\u6f5c\u529b\u5728\u4eba\u5de5\u7cfb\u7edf\u4e2d\u89e3\u9501\u65b0\u7684\u667a\u80fd\u6c34\u5e73\uff0c\u4e3a\u672a\u6765\u66f4\u81ea\u4e3b\u548c\u81ea\u9002\u5e94\u7684\u6a21\u578b\u94fa\u5e73\u9053\u8def\u3002</p> <p>\u95ee\u9898\uff1a\u5982\u679c\ud835\udc4e &gt; 1,     \u90a3\u4e48\uff0c\u4ee5\u4e0b\u95ee\u9898\u7684\u5b9e\u89e3\u4e4b\u548c    \ud835\udc4e \u2212 \u221a\ud835\udc4e + \ud835\udc65 = \ud835\udc65 \u7b49\u4e8e\u54cd\u5e94\uff1a \u6c42\u89e3\u65b9\u7a0b\u5f0f\u221a\ufe01\ud835\udc4e \u2212 \u221a\ud835\udc4e + \ud835\udc65 = \ud835\udc65, \u8ba9\u6211\u4eec\u4ece\u4e24\u4e2a\u5e73\u65b9\u5f00\u59cb\u00b7 \ud835\udc4e \u2212 \u221a\ud835\udc4e + \ud835\udc65 2 = \ud835\udc652 =\u2192 \ud835\udc4e \u2212 \u221a\ud835\udc4e + \ud835\udc65 = \ud835\udc652. \u91cd\u65b0\u6392\u5217\u4ee5\u9694\u79bb\u5185\u90e8\u5e73\u65b9\u6839\u9879\uff1a (\ud835\udc4e \u2212 \ud835\udc652)2 = \ud835\udc4e + \ud835\udc65 =\u2192 \ud835\udc4e2 \u2212 2\ud835\udc4e\ud835\udc652 + (\ud835\udc652)2 = \ud835\udc4e + \ud835\udc65 =\u2192 \ud835\udc654 \u2212 2\ud835\udc4e\ud835\udc652 \u2212 \ud835\udc65 + (\ud835\udc4e2 \u2212 \ud835\udc4e) = 0 <p>\u7b49\u7b49\u3002\u7b49\u5f85\u3002\u8fd9\u662f\u4e00\u4e2a\u6211\u53ef\u4ee5\u5728\u8fd9\u91cc\u6807\u8bb0\u7684\u987f\u609f\u65f6\u523b\u3002 \u8ba9\u6211\u4eec\u4e00\u6b65\u4e00\u6b65\u5730\u91cd\u65b0\u8bc4\u4f30\u4e00\u4e0b\uff0c\u4ee5\u786e\u5b9a\u6b63\u786e\u7684\u603b\u548c\u662f\u5426\u53ef\u4ee5\u3002\u6211\u4eec\u4ece\u4ee5\u4e0b\u65b9\u7a0b\u5f0f\u5f00\u59cb\uff1a \ud835\udc4e   \u221a\ud835\udc4e  \ud835\udc65 = \ud835\udc65 \u9996\u5148\uff0c\u8ba9\u6211\u4eec\u628a\u4e24\u8fb9\u90fd\u5f04\u5e73\uff1a \ud835\udc4e   \u221a\ud835\udc4e  \ud835\udc65 = \ud835\udc652 =    \u221a\ud835\udc4e  \ud835\udc65 = \ud835\udc4e   \ud835\udc652 \u63a5\u4e0b\u6765\uff0c\u6211\u53ef\u4ee5\u518d\u6b21\u5bf9\u4e24\u8fb9\u8fdb\u884c\u5e73\u65b9\uff0c\u5904\u7406\u65b9\u7a0b\u5f0f\uff1a . . . \u88683 DeepSeek-R1-Zero\u4e2d\u95f4\u7248\u672c\u7684\u4e00\u4e2a\u6709\u8da3\u7684\u201c\u987f\u609f\u65f6\u523b\u201d\u3002\u8be5\u6a21\u578b\u5b66\u4f1a\u4e86\u4f7f\u7528\u62df\u4eba\u5316\u7684\u8bed\u6c14\u8fdb\u884c\u91cd\u65b0\u601d\u8003\u3002\u8fd9\u5bf9\u6211\u4eec\u6765\u8bf4\u4e5f\u662f\u4e00\u4e2a\u987f\u609f\u7684\u65f6\u523b\uff0c\u8ba9\u6211\u4eec\u89c1\u8bc1\u4e86\u5f3a\u5316\u5b66\u4e60\u7684\u529b\u91cf\u548c\u7f8e\u4e3d\u3002</p> <p>\u5c3d\u7ba1DeepSeek-R1-Zero\u5c55\u73b0\u51fa\u5f3a\u5927\u7684\u63a8\u7406\u80fd\u529b\uff0c\u5e76\u80fd\u81ea\u4e3b\u5f00\u53d1\u51fa\u51fa\u4e4e\u610f\u6599\u4e14\u5f3a\u5927\u7684\u63a8\u7406\u884c\u4e3a\uff0c\u4f46\u5b83\u4ecd\u9762\u4e34\u51e0\u4e2a\u95ee\u9898\u3002\u4f8b\u5982\uff0cDeepSeek-R1-Zero\u9762\u4e34\u7740\u53ef\u8bfb\u6027\u5dee\u548c\u8bed\u8a00\u6df7\u5408\u7b49\u6311\u6218\u3002\u4e3a\u4e86\u4f7f\u63a8\u7406\u8fc7\u7a0b\u66f4\u5177\u53ef\u8bfb\u6027\u5e76\u4e0e\u5f00\u653e\u793e\u533a\u5171\u4eab\uff0c\u6211\u4eec\u63a2\u7d22\u4e86DeepSeek-R1\uff0c\u8fd9\u662f\u4e00\u79cd\u5229\u7528RL\u548c\u4eba\u7c7b\u53cb\u597d\u7684\u51b7\u542f\u52a8\u6570\u636e\u7684\u65b9\u6cd5\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#23-deepseek-r1","title":"2.3 DeepSeek-R1\uff1a\u51b7\u542f\u52a8\u5f3a\u5316\u5b66\u4e60","text":"<p>\u53d7\u5230DeepSeek-R1-Zero\u6709\u5e0c\u671b\u7684\u7ed3\u679c\u7684\u542f\u53d1\uff0c\u51fa\u73b0\u4e86\u4e24\u4e2a\u81ea\u7136\u7684\u95ee\u9898\uff1a1\uff09\u901a\u8fc7\u5f15\u5165\u5c11\u91cf\u9ad8\u8d28\u91cf\u6570\u636e\u4f5c\u4e3a\u51b7\u542f\u52a8\uff0c\u53ef\u4ee5\u8fdb\u4e00\u6b65\u63d0\u9ad8\u63a8\u7406\u6027\u80fd\u6216\u52a0\u901f\u6536\u655b\u5417\uff1f2\uff09 \u6211\u4eec\u5982\u4f55\u8bad\u7ec3\u4e00\u4e2a\u7528\u6237\u53cb\u597d\u7684\u6a21\u578b\uff0c\u4e0d\u4ec5\u4ea7\u751f\u6e05\u6670\u8fde\u8d2f\u7684\u601d\u7ef4\u94fe\uff08CoT\uff09\uff0c\u800c\u4e14\u8868\u73b0\u51fa\u5f3a\u5927\u7684\u901a\u7528\u80fd\u529b\uff1f\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\uff0c\u6211\u4eec\u8bbe\u8ba1\u4e86\u4e00\u4e2a\u8bad\u7ec3DeepSeek-R1\u7684\u7ba1\u9053\u3002\u8be5\u7ba1\u9053\u7531\u56db\u4e2a\u9636\u6bb5\u7ec4\u6210\uff0c\u6982\u8ff0\u5982\u4e0b\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#231","title":"2.3.1 \u51b7\u542f\u52a8","text":"<p>\u4e0eDeepSeek-R1-Zero\u4e0d\u540c\uff0c\u4e3a\u4e86\u9632\u6b62\u57fa\u7840\u6a21\u578b\u4e2dRL\u8bad\u7ec3\u7684\u65e9\u671f\u4e0d\u7a33\u5b9a\u51b7\u542f\u52a8\u9636\u6bb5\uff0c\u5bf9\u4e8eDeepSeek-R1\uff0c\u6211\u4eec\u6784\u5efa\u5e76\u6536\u96c6\u4e86\u5c11\u91cf\u957fCoT\u6570\u636e\uff0c\u4ee5\u5fae\u8c03\u6a21\u578b\u4f5c\u4e3a\u521d\u59cbRL\u53c2\u4e0e\u8005\u3002\u4e3a\u4e86\u6536\u96c6\u8fd9\u4e9b\u6570\u636e\uff0c\u6211\u4eec\u63a2\u7d22\u4e86\u51e0\u79cd\u65b9\u6cd5\uff1a\u4ee5\u957fCoT\u4e3a\u4f8b\uff0c\u4f7f\u7528\u5c11\u955c\u5934\u63d0\u793a\uff0c\u76f4\u63a5\u63d0\u793a\u6a21\u578b\u751f\u6210\u8be6\u7ec6\u7684\u7b54\u6848\u5e76\u8fdb\u884c\u53cd\u5c04\u548c\u9a8c\u8bc1\uff0c\u4ee5\u53ef\u8bfb\u683c\u5f0f\u6536\u96c6DeepSeek-R1-Zero\u8f93\u51fa\uff0c\u5e76\u901a\u8fc7\u4eba\u5de5\u6ce8\u91ca\u5668\u7684\u540e\u5904\u7406\u6765\u7cbe\u5316\u7ed3\u679c\u3002 \u5728\u8fd9\u9879\u5de5\u4f5c\u4e2d\uff0c\u6211\u4eec\u6536\u96c6\u4e86\u6570\u5343\u4e2a\u51b7\u542f\u52a8\u6570\u636e\uff0c\u4ee5\u5fae\u8c03DeepSeek-V3-Base\u4f5c\u4e3aRL\u7684\u8d77\u70b9\u3002\u4e0eDeepSeek-R1-Zero\u76f8\u6bd4\uff0c\u51b7\u542f\u52a8\u6570\u636e\u7684\u4f18\u52bf\u5728\u4e8e\u5305\u62ec\uff1a</p> <ul> <li>\u53ef\u8bfb\u6027\uff1aDeepSeek-R1-Zero\u7684\u4e00\u4e2a\u5173\u952e\u9650\u5236\u662f\u5b83\u7684\u5185\u5bb9\u901a\u5e38\u4e0d\u9002\u5408\u9605\u8bfb\u3002\u56de\u590d\u53ef\u80fd\u4f1a\u6df7\u5408\u591a\u79cd\u8bed\u8a00\uff0c\u6216\u8005\u7f3a\u4e4f\u5411\u4e0b\u6807\u8bb0\u683c\u5f0f\u6765\u4e3a\u7528\u6237\u7a81\u51fa\u663e\u793a\u7b54\u6848\u3002\u76f8\u6bd4\u4e4b\u4e0b\uff0c\u5728\u4e3aDeepSeek-R1\u521b\u5efa\u51b7\u542f\u52a8\u6570\u636e\u65f6\uff0c\u6211\u4eec\u8bbe\u8ba1\u4e86\u4e00\u4e2a\u53ef\u8bfb\u7684\u6a21\u5f0f\uff0c\u5728\u6bcf\u4e2a\u54cd\u5e94\u7684\u672b\u5c3e\u90fd\u5305\u542b\u6458\u8981\uff0c\u5e76\u8fc7\u6ee4\u6389\u5bf9\u8bfb\u8005\u4e0d\u53cb\u597d\u7684\u54cd\u5e94\u3002\u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u5c06\u8f93\u51fa\u683c\u5f0f\u5b9a\u4e49\u4e3a <code>|special_token|&lt;reasoning_process&gt;|special_token||&lt;summary&gt;</code>\uff0c\u5176\u4e2d\u63a8\u7406\u8fc7\u7a0b\u662f\u67e5\u8be2\u7684CoT\uff0c\u6458\u8981\u7528\u4e8e\u603b\u7ed3\u63a8\u7406\u7ed3\u679c\u3002</li> <li>\u6f5c\u529b\uff1a\u901a\u8fc7\u4f7f\u7528\u4eba\u7c7b\u5148\u9a8c\u4ed4\u7ec6\u8bbe\u8ba1\u51b7\u542f\u52a8\u6570\u636e\u7684\u6a21\u5f0f\uff0c\u6211\u4eec\u89c2\u5bdf\u5230DeepSeek-R1-Zero\u7684\u6027\u80fd\u66f4\u597d\u3002\u6211\u4eec\u8ba4\u4e3a\u8fed\u4ee3\u8bad\u7ec3\u662f\u63a8\u7406\u6a21\u578b\u7684\u66f4\u597d\u65b9\u6cd5\u3002</li> </ul>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#232","title":"2.3.2 \u9762\u5411\u63a8\u7406\u7684\u5f3a\u5316\u5b66\u4e60","text":"<p>\u5728\u51b7\u542f\u52a8\u6570\u636e\u7684\u57fa\u7840\u4e0a\u5bf9DeepSeek-V3-Base\u8fdb\u884c\u5fae\u8c03\u540e\uff0c\u6211\u4eec\u5e94\u7528\u4e86\u4e0eDeepSeek-R1-Zero\u76f8\u540c\u7684\u5927\u89c4\u6a21\u5f3a\u5316\u5b66\u4e60\u8bad\u7ec3\u8fc7\u7a0b\u3002\u8fd9\u4e00\u9636\u6bb5\u7684\u91cd\u70b9\u662f\u589e\u5f3a\u6a21\u578b\u7684\u63a8\u7406\u80fd\u529b\uff0c\u7279\u522b\u662f\u5728\u7f16\u7801\u3001\u6570\u5b66\u3001\u79d1\u5b66\u548c\u903b\u8f91\u63a8\u7406\u7b49\u63a8\u7406\u5bc6\u96c6\u578b\u4efb\u52a1\u4e2d\uff0c\u8fd9\u4e9b\u4efb\u52a1\u6d89\u53ca\u5177\u6709\u660e\u786e\u89e3\u51b3\u65b9\u6848\u7684\u660e\u786e\u95ee\u9898\u3002\u5728\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u89c2\u5bdf\u5230CoT\u7ecf\u5e38\u8868\u73b0\u51fa\u8bed\u8a00\u6df7\u5408\uff0c\u7279\u522b\u662f\u5f53RL\u63d0\u793a\u6d89\u53ca\u591a\u79cd\u8bed\u8a00\u65f6\u3002\u4e3a\u4e86\u7f13\u89e3\u8bed\u8a00\u6df7\u5408\u7684\u95ee\u9898\uff0c\u6211\u4eec\u5728\u5f3a\u5316\u5b66\u4e60\u8bad\u7ec3\u671f\u95f4\u5f15\u5165\u4e86\u8bed\u8a00\u4e00\u81f4\u6027\u5956\u52b1\uff0c\u8be5\u5956\u52b1\u6309\u76ee\u6807\u8bed\u8a00\u5355\u8bcd\u5728CoT\u4e2d\u7684\u6bd4\u4f8b\u8ba1\u7b97\u3002\u5c3d\u7ba1\u6d88\u878d\u5b9e\u9a8c\u8868\u660e\u8fd9\u79cd\u5bf9\u9f50\u4f1a\u5bfc\u81f4\u6a21\u578b\u6027\u80fd\u7684\u8f7b\u5fae\u4e0b\u964d\uff0c\u4f46\u8fd9\u79cd\u5956\u52b1\u4e0e\u4eba\u7c7b\u504f\u597d\u76f8\u4e00\u81f4\uff0c\u4f7f\u5176\u66f4\u5177\u53ef\u8bfb\u6027\u3002\u6700\u540e\uff0c\u6211\u4eec\u5c06\u63a8\u7406\u4efb\u52a1\u7684\u51c6\u786e\u6027\u548c\u8bed\u8a00\u4e00\u81f4\u6027\u7684\u5956\u52b1\u76f4\u63a5\u76f8\u52a0\uff0c\u5f62\u6210\u6700\u7ec8\u7684\u5956\u52b1\u3002\u7136\u540e\uff0c\u6211\u4eec\u5bf9\u5fae\u8c03\u540e\u7684\u6a21\u578b\u5e94\u7528RL\u8bad\u7ec3\uff0c\u76f4\u5230\u5b83\u5728\u63a8\u7406\u4efb\u52a1\u4e0a\u8fbe\u5230\u6536\u655b\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#233","title":"2.3.3 \u62d2\u6536\u91c7\u6837\u548c\u76d1\u7763\u5fae\u8c03","text":"<p>\u5f53\u9762\u5411\u63a8\u7406\u7684RL\u6536\u655b\u65f6\uff0c\u6211\u4eec\u5229\u7528\u5f97\u5230\u7684\u68c0\u67e5\u70b9\u4e3a\u4e0b\u4e00\u8f6e\u6536\u96c6SFT\uff08\u76d1\u7763\u5fae\u8c03\uff09\u6570\u636e\u3002\u4e0e\u4e3b\u8981\u4fa7\u91cd\u4e8e\u63a8\u7406\u7684\u521d\u59cb\u51b7\u542f\u52a8\u6570\u636e\u4e0d\u540c\uff0c\u8fd9\u4e00\u9636\u6bb5\u6574\u5408\u4e86\u6765\u81ea\u5176\u4ed6\u9886\u57df\u7684\u6570\u636e\uff0c\u4ee5\u589e\u5f3a\u6a21\u578b\u5728\u5199\u4f5c\u3001\u89d2\u8272\u626e\u6f14\u548c\u5176\u4ed6\u901a\u7528\u4efb\u52a1\u4e2d\u7684\u80fd\u529b\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u6211\u4eec\u751f\u6210\u6570\u636e\u5e76\u5bf9\u6a21\u578b\u8fdb\u884c\u5fae\u8c03\uff0c\u5982\u4e0b\u6240\u8ff0\u3002</p> <p>\u63a8\u7406\u6570\u636e\u6211\u4eec\u901a\u8fc7\u4ece\u4e0a\u8ff0RL\u8bad\u7ec3\u7684\u68c0\u67e5\u70b9\u8fdb\u884c\u62d2\u7edd\u91c7\u6837\u6765\u7b56\u5212\u63a8\u7406\u63d0\u793a\u5e76\u751f\u6210\u63a8\u7406\u8f68\u8ff9\u3002\u5728\u4e0a\u4e00\u9636\u6bb5\uff0c\u6211\u4eec\u53ea\u5305\u62ec\u53ef\u4ee5\u4f7f\u7528\u57fa\u4e8e\u89c4\u5219\u7684\u5956\u52b1\u8fdb\u884c\u8bc4\u4f30\u7684\u6570\u636e\u3002\u7136\u800c\uff0c\u5728\u8fd9\u4e2a\u9636\u6bb5\uff0c\u6211\u4eec\u901a\u8fc7\u5408\u5e76\u989d\u5916\u7684\u6570\u636e\u6765\u6269\u5c55\u6570\u636e\u96c6\uff0c\u5176\u4e2d\u4e00\u4e9b\u6570\u636e\u4f7f\u7528\u751f\u6210\u5956\u52b1\u6a21\u578b\uff0c\u5c06\u57fa\u672c\u4e8b\u5b9e\u548c\u6a21\u578b\u9884\u6d4b\u8f93\u5165DeepSeek-V3\u8fdb\u884c\u5224\u65ad\u3002\u6b64\u5916\uff0c\u7531\u4e8e\u6a21\u578b\u8f93\u51fa\u6709\u65f6\u6df7\u4e71\u4e14\u96be\u4ee5\u9605\u8bfb\uff0c\u6211\u4eec\u7528\u6df7\u5408\u8bed\u8a00\u3001\u957f\u6bb5\u843d\u548c\u4ee3\u7801\u5757\u8fc7\u6ee4\u6389\u4e86\u601d\u60f3\u94fe\u3002\u5bf9\u4e8e\u6bcf\u4e2a\u63d0\u793a\uff0c\u6211\u4eec\u5bf9\u591a\u4e2a\u54cd\u5e94\u8fdb\u884c\u91c7\u6837\uff0c\u53ea\u4fdd\u7559\u6b63\u786e\u7684\u54cd\u5e94\u3002\u6211\u4eec\u603b\u5171\u6536\u96c6\u4e86\u5927\u7ea660\u4e07\u4e2a\u4e0e\u63a8\u7406\u76f8\u5173\u7684\u8bad\u7ec3\u6837\u672c\u3002 \u975e\u63a8\u7406\u6570\u636e\u5bf9\u4e8e\u975e\u63a8\u7406\u6570\u636e\uff0c\u5982\u5199\u4f5c\u3001\u4e8b\u5b9eQA\u3001\u81ea\u6211\u8ba4\u77e5\u548c\u7ffb\u8bd1\uff0c\u6211\u4eec\u91c7\u7528DeepSeek-V3\u7ba1\u9053\u5e76\u91cd\u7528DeepSeek-V3SFT\u6570\u636e\u96c6\u7684\u90e8\u5206\u3002\u5bf9\u4e8e\u67d0\u4e9b\u975e\u63a8\u7406\u4efb\u52a1\uff0c\u6211\u4eec\u8c03\u7528DeepSeek-V3\u5728\u901a\u8fc7\u63d0\u793a\u56de\u7b54\u95ee\u9898\u4e4b\u524d\u751f\u6210\u6f5c\u5728\u7684\u601d\u7ef4\u94fe\u3002\u7136\u800c\uff0c\u5bf9\u4e8e\u66f4\u7b80\u5355\u7684\u67e5\u8be2\uff0c\u4f8b\u5982\u201c\u4f60\u597d\u201d\uff0c\u6211\u4eec\u4e0d\u63d0\u4f9bCoT\u4f5c\u4e3a\u54cd\u5e94\u3002\u6700\u540e\uff0c\u6211\u4eec\u603b\u5171\u6536\u96c6\u4e86\u5927\u7ea620\u4e07\u4e2a\u4e0e\u63a8\u7406\u65e0\u5173\u7684\u8bad\u7ec3\u6837\u672c\u3002 \u6211\u4eec\u4f7f\u7528\u4e0a\u8ff0\u7ea680\u4e07\u4e2a\u6837\u672c\u7684\u7cbe\u9009\u6570\u636e\u96c6\u5bf9DeepSeek-V3-Base\u8fdb\u884c\u4e86\u4e24\u4e2a\u65f6\u4ee3\u7684\u5fae\u8c03\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#234","title":"2.3.4. \u9488\u5bf9\u6240\u6709\u573a\u666f\u7684\u5f3a\u5316\u5b66\u4e60","text":"<p>\u4e3a\u4e86\u8fdb\u4e00\u6b65\u4f7f\u6a21\u578b\u4e0e\u4eba\u7c7b\u504f\u597d\u4fdd\u6301\u4e00\u81f4\uff0c\u6211\u4eec\u5b9e\u65bd\u4e86\u4e00\u4e2a\u4e8c\u6b21\u5f3a\u5316\u5b66\u4e60\u9636\u6bb5\uff0c\u65e8\u5728\u63d0\u9ad8\u6a21\u578b\u7684\u6709\u7528\u6027\u548c\u65e0\u5bb3\u6027\uff0c\u540c\u65f6\u5b8c\u5584\u00ac\u5176\u63a8\u7406\u80fd\u529b\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u6211\u4eec\u4f7f\u7528\u5956\u52b1\u4fe1\u53f7\u548c\u4e0d\u540c\u63d0\u793a\u5206\u5e03\u7684\u7ec4\u5408\u6765\u8bad\u7ec3\u6a21\u578b\u3002\u5bf9\u4e8e\u63a8\u7406\u6570\u636e\uff0c\u6211\u4eec\u9075\u5faaDeepSeek-R1-Zero\u4e2d\u6982\u8ff0\u7684\u65b9\u6cd5\uff0c\u8be5\u65b9\u6cd5\u5229\u7528\u57fa\u4e8e\u89c4\u5219\u7684\u5956\u52b1\u6765\u6307\u5bfc\u6570\u5b66\u3001\u4ee3\u7801\u548c\u903b\u8f91\u63a8\u7406\u9886\u57df\u7684\u5b66\u4e60\u8fc7\u7a0b\u3002\u5bf9\u4e8e\u4e00\u822c\u6570\u636e\uff0c\u6211\u4eec\u91c7\u7528\u5956\u52b1\u6a21\u578b\u6765\u6355\u6349\u590d\u6742\u548c\u5fae\u5999\u573a\u666f\u4e2d\u7684\u4eba\u7c7b\u504f\u597d\u3002\u6211\u4eec\u4ee5DeepSeek-V3\u7ba1\u9053\u4e3a\u57fa\u7840\uff0c\u91c7\u7528\u7c7b\u4f3c\u7684\u504f\u597d\u5bf9\u548c\u8bad\u7ec3\u63d0\u793a\u5206\u5e03\u3002\u4e3a\u4e86\u63d0\u4f9b\u5e2e\u52a9\uff0c\u6211\u4eec\u53ea\u5173\u6ce8\u6700\u7ec8\u603b\u7ed3\uff0c\u786e\u4fdd\u8bc4\u4f30\u5f3a\u8c03\u54cd\u5e94\u5bf9\u7528\u6237\u7684\u5b9e\u7528\u6027\u548c\u76f8\u5173\u6027\uff0c\u540c\u65f6\u5c3d\u91cf\u51cf\u5c11\u5bf9\u5e95\u5c42\u63a8\u7406\u8fc7\u7a0b\u7684\u5e72\u6270\u3002\u4e3a\u4e86\u65e0\u5bb3\u5316\uff0c\u6211\u4eec\u8bc4\u4f30\u4e86\u6a21\u578b\u7684\u6574\u4e2a\u54cd\u5e94\uff0c\u5305\u62ec\u63a8\u7406\u8fc7\u7a0b\u548c\u603b\u7ed3\uff0c\u4ee5\u8bc6\u522b\u548c\u51cf\u8f7b\u751f\u6210\u8fc7\u7a0b\u4e2d\u53ef\u80fd\u51fa\u73b0\u7684\u4efb\u4f55\u6f5c\u5728\u98ce\u9669\u3001\u504f\u89c1\u6216\u6709\u5bb3\u5185\u5bb9\u3002\u6700\u7ec8\uff0c\u5956\u52b1\u4fe1\u53f7\u548c\u4e0d\u540c\u6570\u636e\u5206\u5e03\u7684\u6574\u5408\u4f7f\u6211\u4eec\u80fd\u591f\u8bad\u7ec3\u4e00\u4e2a\u5728\u63a8\u7406\u65b9\u9762\u8868\u73b0\u51fa\u8272\u7684\u6a21\u578b\uff0c\u540c\u65f6\u4f18\u5148\u8003\u8651\u6709\u7528\u6027\u548c\u65e0\u5bb3\u6027\u3002\u00ac</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#24","title":"2.4. \u84b8\u998f\uff1a\u8d4b\u4e88\u5c0f\u6a21\u578b\u63a8\u7406\u80fd\u529b","text":"<p>\u4e3a\u4e86\u4e3a\u66f4\u9ad8\u6548\u7684\u5c0f\u578b\u6a21\u578b\u914d\u5907DeepSeek-R1\u7b49\u63a8\u7406\u529f\u80fd\uff0c\u6211\u4eec\u76f4\u63a5\u5bf9Qwen\uff08Qwen\uff0c2024b\uff09\u548cLlama\u7b49\u5f00\u6e90\u6a21\u578b\u8fdb\u884c\u4e86\u5fae\u8c03\uff08AI@Meta\uff0c2024\uff09\u4f7f\u7528DeepSeek-R1\u7b56\u5212\u768480\u4e07\u4e2a\u6837\u672c\uff0c\u8be6\u89c1\u00a72.3.3\u3002\u6211\u4eec\u7684\u7814\u7a76\u7ed3\u679c\u8868\u660e\uff0c\u8fd9\u79cd\u76f4\u63a5\u7684\u84b8\u998f\u65b9\u6cd5\u663e\u8457\u63d0\u9ad8\u4e86\u8f83\u5c0f\u6a21\u578b\u7684\u63a8\u7406\u80fd\u529b\u3002\u6211\u4eec\u5728\u8fd9\u91cc\u4f7f\u7528\u7684\u57fa\u672c\u6a21\u578b\u662fQwen2.5-Math-1.5B\u3001Qwen2.5-Math-7B\u3001Qwen-2.5-14B\u3001Qwon2.5-32B\u3001Llama-3.1-8B\u548cLlama-3.3-70B-Instruct\u3002\u6211\u4eec\u9009\u62e9Llama-3.3\u662f\u56e0\u4e3a\u5b83\u7684\u63a8\u7406\u80fd\u529b\u7565\u4f18\u4e8eLlama-3.1\u3002 \u5bf9\u4e8e\u84b8\u998f\u6a21\u578b\uff0c\u6211\u4eec\u53ea\u5e94\u7528SFT\uff0c\u4e0d\u5305\u62ecRL\u9636\u6bb5\uff0c\u5c3d\u7ba1\u52a0\u5165RL\u53ef\u4ee5\u5927\u5927\u63d0\u9ad8\u6a21\u578b\u6027\u80fd\u3002\u6211\u4eec\u7684\u4e3b\u8981\u76ee\u6807\u662f\u8bc1\u660e\u84b8\u998f\u6280\u672f\u7684\u6709\u6548\u6027\uff0c\u5c06RL\u9636\u6bb5\u7684\u63a2\u7d22\u7559\u7ed9\u66f4\u5e7f\u6cdb\u7684\u7814\u7a76\u754c\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#3","title":"3 \u5b9e\u9a8c","text":"<p>\u57fa\u51c6 \u6211\u4eec\u8bc4\u4f30\u4e86MMLU\uff08Hendrycks\u7b49\u4eba\uff0c2020\uff09\u3001MMLU Redux\uff08Gema\u7b49\u4eba\uff0c2024\uff09\u3001MMLU-Pro\uff08Wang\u7b49\u4eba\uff0c2024\uff09\u3001C-Eval\uff08Huang\u7b49\u4eba\uff0c2023\uff09\u548cCMMLU\uff08Li\u7b49\u4eba\uff0c2023\u5e74\uff09\u3001IFEval\uff08Zhou\u7b49\u4eba\uff0c2023\uff0c2023\uff09\u3001FRAMES\uff08Krishna\u7b49\uff0c2024\u5e74\uff09\u3001GPQA-Diamond\uff08Rein\u7b49\u4eba\uff0c2023\uff09\u3001SimpleQA\uff08OpenAI\uff0c2024c\uff09\u3001C-SimpleQA\uff08He\u7b49\u4eba\uff0c2024c\uff09\u3001SWE Bench Verified\uff08OpenAI\uff09\u7684\u6a21\u578b\uff0c</p> <p>2024d\uff09\u3001\u52a9\u624b1\u3001LiveCodeBench\uff08Jain\u7b49\u4eba\uff0c2024\uff09\uff082024-08\u20132025-01\uff09\u3001Codeforce 2\u3001\u4e2d\u56fd\u5168\u56fd\u9ad8\u4e2d\u6570\u5b66\u5965\u6797\u5339\u514b\u7ade\u8d5b\uff08CNMO 2024\uff093\u548c\u7f8e\u56fd\u9080\u8bf7\u6570\u5b66\u8003\u8bd52024\uff08AIME 2024\uff09\u3002\u9664\u4e86\u6807\u51c6\u57fa\u51c6\u6d4b\u8bd5\u5916\uff0c\u6211\u4eec\u8fd8\u4f7f\u7528LLM\u4f5c\u4e3a\u8bc4\u5224\u6807\u51c6\uff0c\u5728\u5f00\u653e\u5f0f\u751f\u6210\u4efb\u52a1\u4e0a\u8bc4\u4f30\u6211\u4eec\u7684\u6a21\u578b\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u6211\u4eec\u575a\u6301AlpacaEval 2.0\uff08Dubois\u7b49\u4eba\uff0c2024\uff09\u548cArena Hard\uff08Li\u7b49\u4eba\uff0c2024\uff09\u7684\u539f\u59cb\u914d\u7f6e\uff0c\u5b83\u4eec\u5229\u7528GPT-4-Turbo-1106\u4f5c\u4e3a\u6210\u5bf9\u6bd4\u8f83\u7684\u5224\u65ad\u6807\u51c6\u3002\u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u53ea\u5c06\u6700\u7ec8\u6458\u8981\u63d0\u4f9b\u7ed9\u8bc4\u4f30\uff0c\u4ee5\u907f\u514d\u957f\u5ea6\u504f\u5dee\u3002\u5bf9\u4e8e\u84b8\u998f\u6a21\u578b\uff0c\u6211\u4eec\u62a5\u544a\u4e86AIME 2024\u3001MATH-500\u3001GPQA Diamond\u3001Codeforce\u548cLiveCodeBench\u7684\u4ee3\u8868\u6027\u7ed3\u679c\u3002</p> <p>\u8bc4\u4f30\u63d0\u793a \u5728DeepSeek-V3\u4e2d\u8bbe\u7f6e\u4e4b\u540e\uff0c\u4f7f\u7528simple-evals\u6846\u67b6\u4e2d\u7684\u63d0\u793a\u8bc4\u4f30MMLU\u3001DROP\u3001GPQA Diamond\u548cSimpleQA\u7b49\u6807\u51c6\u57fa\u51c6\u3002\u5bf9\u4e8eMMLU-Redux\uff0c\u6211\u4eec\u5728\u96f6\u6837\u672c\u8bbe\u7f6e\u4e2d\u91c7\u7528\u96f6\u503c\u63d0\u793a\u683c\u5f0f\uff08Lin\uff0c2024\uff09\u3002\u5728MMLU-Pro\u3001C-Eval\u548cCLUE-WSC\u65b9\u9762\uff0c\u7531\u4e8e\u6700\u521d\u7684\u63d0\u793a\u5f88\u5c11\uff0c\u6211\u4eec\u5c06\u63d0\u793a\u7565\u5fae\u4fee\u6539\u4e3a\u96f6\u6837\u672c\u8bbe\u7f6e\u3002\u51e0\u6b21\u5c04\u51fb\u4e2d\u7684CoT\u53ef\u80fd\u4f1a\u635f\u5bb3DeepSeek-R1\u7684\u6027\u80fd\u3002\u5176\u4ed6\u6570\u636e\u96c6\u9075\u5faa\u5176\u539f\u59cb\u8bc4\u4f30\u534f\u8bae\uff0c\u5e76\u7531\u5176\u521b\u5efa\u8005\u63d0\u4f9b\u9ed8\u8ba4\u63d0\u793a\u3002\u5bf9\u4e8e\u4ee3\u7801\u548c\u6570\u5b66\u57fa\u51c6\u6d4b\u8bd5\uff0cHumanEval-Mul\u6570\u636e\u96c6\u6db5\u76d6\u4e86\u516b\u79cd\u4e3b\u6d41\u7f16\u7a0b\u8bed\u8a00\uff08Python\u3001Java\u3001C++\u3001C#\u3001JavaScript\u3001TypeScript\u3001PHP\u548cBash\uff09\u3002LiveCodeBench\u4e0a\u7684\u6a21\u578b\u6027\u80fd\u4f7f\u7528CoT\u683c\u5f0f\u8fdb\u884c\u8bc4\u4f30\uff0c\u6570\u636e\u6536\u96c6\u4e8e2024\u5e748\u6708\u81f32025\u5e741\u6708\u4e4b\u95f4\u3002Codeforces\u6570\u636e\u96c6\u4f7f\u752810\u4e2aDiv.2\u7ade\u8d5b\u7684\u95ee\u9898\u4ee5\u53ca\u4e13\u5bb6\u7cbe\u5fc3\u8bbe\u8ba1\u7684\u6d4b\u8bd5\u7528\u4f8b\u8fdb\u884c\u8bc4\u4f30\uff0c\u7136\u540e\u8ba1\u7b97\u9884\u671f\u7684\u8bc4\u5206\u548c\u7ade\u4e89\u5bf9\u624b\u7684\u767e\u5206\u6bd4\u3002SWE Bench\u7684\u9a8c\u8bc1\u7ed3\u679c\u662f\u901a\u8fc7\u65e0\u4ee3\u7406\u6846\u67b6\u83b7\u5f97\u7684\uff08Xia\u7b49\u4eba\uff0c2024\uff09\u3002\u4e0eAIDER\u76f8\u5173\u7684\u57fa\u51c6\u4f7f\u7528\u201c\u5dee\u5f02\u201d\u683c\u5f0f\u8fdb\u884c\u8861\u91cf\u3002DeepSeek-R1\u7684\u8f93\u51fa\u4e0a\u9650\u4e3a\u6bcf\u4e2a\u57fa\u51c6\u768432768\u4e2a\u4ee4\u724c\u3002</p> <p>\u57fa\u7ebf \u6211\u4eec\u6839\u636e\u51e0\u4e2a\u5f3a\u5927\u7684\u57fa\u7ebf\u8fdb\u884c\u5168\u9762\u8bc4\u4f30\uff0c\u5305\u62ecDeepSeek-V3\u3001Claude-Connect-3.5-1022\u3001GPT-4o-0513\u3001OpenAI-o1-mini\u548cOpenAI-o1-1217\u3002\u7531\u4e8e\u8bbf\u95eeOpenAI-o1-1217 API\u5728\u4e2d\u56fd\u5927\u9646\u5177\u6709\u6311\u6218\u6027\uff0c\u6211\u4eec\u6839\u636e\u5b98\u65b9\u62a5\u544a\u62a5\u544a\u5176\u6027\u80fd\u3002\u5bf9\u4e8e\u84b8\u998f\u6a21\u578b\uff0c\u6211\u4eec\u8fd8\u6bd4\u8f83\u4e86\u5f00\u6e90\u6a21\u578bQwQ-32B\u9884\u89c8\u7248\uff08Qwen\uff0c2024a\uff09\u3002\u00ac</p> <p>\u8bc4\u4f30 \u8bbe\u7f6e\u6211\u4eec\u5c06\u6a21\u578b\u7684\u6700\u5927\u751f\u6210\u957f\u5ea6\u8bbe\u7f6e\u4e3a32768\u4e2a\u4ee4\u724c\u3002\u6211\u4eec\u53d1\u73b0\uff0c\u4f7f\u7528\u8d2a\u5a6a\u89e3\u7801\u6765\u8bc4\u4f30\u957f\u8f93\u51fa\u63a8\u7406\u6a21\u578b\u4f1a\u5bfc\u81f4\u66f4\u9ad8\u7684\u91cd\u590d\u7387\u548c\u4e0d\u540c\u68c0\u67e5\u70b9\u4e4b\u95f4\u7684\u663e\u8457\u5dee\u5f02\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u9ed8\u8ba4\u901a\u8fc7@\ud835\udc58 \u8bc4\u4f30\uff08Chen\u7b49\u4eba\uff0c2021\uff09\u548c\u62a5\u544apass@1\u4f7f\u7528\u975e\u96f6\u6e29\u5ea6\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u6211\u4eec\u4f7f\u75280.6\u7684\u91c7\u6837\u6e29\u5ea6\u548c\u9876\u90e8-\ud835\udc5d \u751f\u6210\u503c\u4e3a0.95\ud835\udc58 \u6bcf\u4e2a\u95ee\u9898\u7684\u7b54\u6848\uff08\u901a\u5e38\u57284\u523064\u4e4b\u95f4\uff0c\u5177\u4f53\u53d6\u51b3\u4e8e\u6d4b\u8bd5\u96c6\u7684\u5927\u5c0f\uff09\u3002Pass@1\u7136\u540e\u8ba1\u7b97\u4e3a $$ pass@1 = \\frac{1}{k} \\sum_{i=1}^{k} p_i $$ \u54ea\u91cc \\(p_{i}\\) \u8868\u793a\u4ee5\u4e0b\u5185\u5bb9\u7684\u6b63\u786e\u6027\ud835\udc56-\u7684\u56de\u5e94\u3002\u8fd9\u79cd\u65b9\u6cd5\u63d0\u4f9b\u4e86\u66f4\u53ef\u9760\u7684\u6027\u80fd\u4f30\u8ba1\u3002\u5bf9\u4e8eAIME 2024\uff0c\u6211\u4eec\u8fd8\u4f7f\u752864\u4e2a\u6837\u672c\u62a5\u544a\u4e86\u5171\u8bc6\uff08\u591a\u6570\u7968\uff09\u7ed3\u679c\uff08Wang\u7b49\u4eba\uff0c2022\uff09\uff0c\u8868\u793a\u4e3acons@64.</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#31-deepseek-r1","title":"3.1 DeepSeek-R1\u8bc4\u4f30","text":"<p>\u5bf9\u4e8eMMLU\u3001MMLU Pro\u548cGPQA Diamond\u7b49\u9762\u5411\u6559\u80b2\u7684\u77e5\u8bc6\u57fa\u51c6\u6d4b\u8bd5\uff0cDeepSeek-R1\u7684\u6027\u80fd\u4f18\u4e8eDeepSeek-V3\u3002\u8fd9\u4e00\u6539\u8fdb\u4e3b\u8981\u5f52\u56e0\u4e8eSTEM\u76f8\u5173\u95ee\u9898\u7684\u51c6\u786e\u6027\u63d0\u9ad8\uff0c\u901a\u8fc7\u5927\u89c4\u6a21\u5f3a\u5316\u5b66\u4e60\u53d6\u5f97\u4e86\u663e\u8457\u6210\u679c\u3002\u6b64\u5916\uff0cDeepSeek-R1\u5728FRAMES\u65b9\u9762\u8868\u73b0\u51fa\u8272\uff0cFRAMES\u662f\u4e00\u9879\u4f9d\u8d56\u4e8e\u4e0a\u4e0b\u6587\u7684\u957f\u671fQA\u4efb\u52a1\uff0c\u5c55\u793a\u4e86\u5176\u5f3a\u5927\u7684\u6587\u6863\u5206\u6790\u80fd\u529b\u3002\u8fd9\u7a81\u663e\u4e86\u63a8\u7406\u6a21\u578b\u5728\u4eba\u5de5\u667a\u80fd\u9a71\u52a8\u7684\u641c\u7d22\u548c\u6570\u636e\u5206\u6790\u4efb\u52a1\u4e2d\u7684\u6f5c\u529b\u3002\u5728\u4e8b\u5b9e\u57fa\u51c6SimpleQA\u4e0a\uff0cDeepSeek-R1\u7684\u8868\u73b0\u4f18\u4e8eDeepSeek-V3\uff0c\u5c55\u793a\u4e86\u5176\u5904\u7406\u57fa\u4e8e\u4e8b\u5b9e\u7684\u67e5\u8be2\u7684\u80fd\u529b\u3002\u5728OpenAI-o1\u8d85\u8fc7GPT-4o\u7684\u60c5\u51b5\u4e0b\uff0c\u4e5f\u89c2\u5bdf\u5230\u4e86\u7c7b\u4f3c\u7684\u8d8b\u52bf\u3002\u7136\u800c\uff0c\u5728\u4e2d\u56fdSimpleQA\u57fa\u51c6\u6d4b\u8bd5\u4e2d\uff0cDeepSeek-R1\u7684\u8868\u73b0\u4e0d\u5982DeepSeek-V3\uff0c\u4e3b\u8981\u662f\u56e0\u4e3a\u5b83\u503e\u5411\u4e8e\u5728\u5b89\u5168RL\u540e\u62d2\u7edd\u56de\u7b54\u67d0\u4e9b\u67e5\u8be2\u3002\u5982\u679c\u6ca1\u6709\u5b89\u5168RL\uff0cDeepSeek-R1\u7684\u51c6\u786e\u7387\u53ef\u4ee5\u8fbe\u523070%\u4ee5\u4e0a\u3002\u00ac\u00ac DeepSeek-R1\u5728IF Eval\u4e0a\u4e5f\u53d6\u5f97\u4e86\u4ee4\u4eba\u5370\u8c61\u6df1\u523b\u7684\u7ed3\u679c\uff0cIF Eval\u662f\u4e00\u4e2a\u65e8\u5728\u8bc4\u4f30\u6a21\u578b\u9075\u5faa\u683c\u5f0f\u8bf4\u660e\u80fd\u529b\u7684\u57fa\u51c6\u3002\u8fd9\u4e9b\u6539\u8fdb\u53ef\u80fd\u4e0e\u5728\u76d1\u7763\u5fae\u8c03\uff08SFT\uff09\u548c\u5f3a\u5316\u5b66\u4e60\u8bad\u7ec3\u7684\u6700\u540e\u9636\u6bb5\u7eb3\u5165\u6307\u4ee4\u8ddf\u8e2a\u6570\u636e\u6709\u5173\u3002\u6b64\u5916\uff0c\u5728AlpacaEval2.0\u548cArenaHard\u4e0a\u89c2\u5bdf\u5230\u4e86\u663e\u8457\u7684\u6027\u80fd\uff0c\u8868\u660e\u4e86DeepSeek-R1\u5728\u7f16\u5199\u4efb\u52a1\u548c\u5f00\u653e\u57df\u95ee\u7b54\u65b9\u9762\u7684\u4f18\u52bf\u3002\u5b83\u5728DeepSeek-V3\u4e0a\u7684\u663e\u8457\u8868\u73b0\u7a81\u663e\u4e86\u5927\u89c4\u6a21RL\u7684\u6cdb\u5316\u4f18\u52bf\uff0c\u8fd9\u4e0d\u4ec5\u63d0\u9ad8\u4e86\u63a8\u7406\u80fd\u529b\uff0c\u8fd8\u63d0\u9ad8\u4e86\u8de8\u4e0d\u540c\u9886\u57df\u7684\u6027\u80fd\u3002\u6b64\u5916\uff0cDeepSeek-R1\u751f\u6210\u7684\u6458\u8981\u957f\u5ea6\u7b80\u6d01\u660e\u4e86\uff0cArenaHard\u4e0a\u5e73\u5747\u6709689\u4e2a\u4ee4\u724c\uff0cAlpacaEval 2.0\u4e0a\u5e73\u5747\u67092218\u4e2a\u5b57\u7b26\u3002\u8fd9\u8868\u660e</p> <p>DeepSeek-R1\u907f\u514d\u4e86\u5728\u57fa\u4e8eGPT\u7684\u8bc4\u4f30\u8fc7\u7a0b\u4e2d\u5f15\u5165\u957f\u5ea6\u504f\u5dee\uff0c\u8fdb\u4e00\u6b65\u5de9\u56fa\u4e86\u5176\u5728\u591a\u4e2a\u4efb\u52a1\u4e2d\u7684\u7a33\u5065\u6027\u3002 \u5728\u6570\u5b66\u4efb\u52a1\u65b9\u9762\uff0cDeepSeek-R1\u7684\u6027\u80fd\u4e0eOpenAI-o1-1217\u76f8\u5f53\uff0c\u8fdc\u8fdc\u8d85\u8fc7\u4e86\u5176\u4ed6\u6a21\u578b\u3002\u5728\u7f16\u7801\u7b97\u6cd5\u4efb\u52a1\u4e0a\u4e5f\u89c2\u5bdf\u5230\u4e86\u7c7b\u4f3c\u7684\u8d8b\u52bf\uff0c\u4f8b\u5982LiveCodeBench\u548cCodeforce\uff0c\u5176\u4e2d\u4ee5\u63a8\u7406\u4e3a\u4e2d\u5fc3\u7684\u6a21\u578b\u4e3b\u5bfc\u4e86\u8fd9\u4e9b\u57fa\u51c6\u6d4b\u8bd5\u3002\u5728\u9762\u5411\u5de5\u7a0b\u7684\u7f16\u7801\u4efb\u52a1\u4e2d\uff0cOpenAI-o1-1217\u5728Aider\u4e0a\u7684\u8868\u73b0\u4f18\u4e8eDeepSeek-R1\uff0c\u4f46\u5728SWE Verified\u4e0a\u7684\u8868\u73b0\u76f8\u5f53\u3002\u6211\u4eec\u76f8\u4fe1DeepSeek-R1\u7684\u5de5\u7a0b\u6027\u80fd\u5c06\u5728\u4e0b\u4e00\u4e2a\u7248\u672c\u4e2d\u5f97\u5230\u6539\u5584\uff0c\u56e0\u4e3a\u76ee\u524d\u76f8\u5173\u7684RL\u8bad\u7ec3\u6570\u636e\u91cf\u4ecd\u7136\u975e\u5e38\u6709\u9650\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#32","title":"3.2 \u84b8\u998f\u6a21\u578b\u8bc4\u4f30","text":"<p> \u5982\u88685\u6240\u793a\uff0c\u7b80\u5355\u5730\u63d0\u53d6DeepSeek-R1\u7684\u8f93\u51fa\uff0c\u53ef\u4ee5\u4f7f\u9ad8\u6548\u7684DeepSeek-R1-7B\uff08\u5373DeepSeek-R2-Distill-Qwen-7B\uff0c\u4e0b\u540c\uff09\u5168\u9762\u8d85\u8d8aGPT-4o-0513\u7b49\u975e\u63a8\u7406\u6a21\u578b\u3002DeepSeek-R1-14B\u5728\u6240\u6709\u8bc4\u4f30\u6307\u6807\u4e0a\u90fd\u8d85\u8fc7\u4e86QwQ-32B\u9884\u89c8\u7248\uff0c\u800cDeepSeek-R-132B\u548cDeepSeek-R1-70B\u5728\u5927\u591a\u6570\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u90fd\u660e\u663e\u8d85\u8fc7\u4e86o1-mini\u3002\u8fd9\u4e9b\u7ed3\u679c\u8868\u660e\u4e86\u84b8\u998f\u7684\u5de8\u5927\u6f5c\u529b\u3002\u6b64\u5916\uff0c\u6211\u4eec\u53d1\u73b0\u5c06RL\u5e94\u7528\u4e8e\u8fd9\u4e9b\u84b8\u998f\u6a21\u578b\u4f1a\u4ea7\u751f\u663e\u8457\u7684\u8fdb\u4e00\u6b65\u6536\u76ca\u3002\u6211\u4eec\u8ba4\u4e3a\u8fd9\u503c\u5f97\u8fdb\u4e00\u6b65\u63a2\u7d22\uff0c\u56e0\u6b64\u8fd9\u91cc\u53ea\u4ecb\u7ecd\u7b80\u5355\u7684SFT\u63d0\u53d6\u6a21\u578b\u7684\u7ed3\u679c\u3002\u00ac</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#4","title":"4 \u8ba8\u8bba","text":""},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#41","title":"4.1 \u84b8\u998f\u4e0e\u5f3a\u5316\u5b66\u4e60","text":"<p>\u5728\u7b2c3.2\u8282\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c\u901a\u8fc7\u63d0\u53d6DeepSeek-R1\uff0c\u5c0f\u6a21\u578b\u53ef\u4ee5\u83b7\u5f97\u4ee4\u4eba\u5370\u8c61\u6df1\u523b\u7684\u7ed3\u679c\u3002\u7136\u800c\uff0c\u4ecd\u7136\u5b58\u5728\u4e00\u4e2a\u95ee\u9898\uff1a\u8be5\u6a21\u578b\u80fd\u5426\u5728\u4e0d\u8fdb\u884c\u84b8\u998f\u7684\u60c5\u51b5\u4e0b\uff0c\u901a\u8fc7\u672c\u6587\u8ba8\u8bba\u7684\u5927\u89c4\u6a21RL\u8bad\u7ec3\u5b9e\u73b0\u53ef\u6bd4\u7684\u6027\u80fd\uff1f \u4e3a\u4e86\u56de\u7b54\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u4f7f\u7528\u6570\u5b66\u3001\u4ee3\u7801\u548cSTEM\u6570\u636e\u5728Qwen-32B-Base\u4e0a\u8fdb\u884c\u4e86\u5927\u89c4\u6a21\u7684RL\u8bad\u7ec3\uff0c\u8bad\u7ec3\u4e86\u8d85\u8fc710K\u6b65\uff0c\u5f97\u5230\u4e86DeepSeek-R1-Zero-Qwen-32B\u3002\u88686\u6240\u793a\u7684\u5b9e\u9a8c\u7ed3\u679c\u8868\u660e\uff0c\u5728\u5927\u89c4\u6a21\u4f7f\u752832B\u57fa\u7840\u6a21\u578b\u540e</p> <p></p> <p>RL\u8bad\u7ec3\uff0c\u8fbe\u5230\u4e0eQwQ-32B\u9884\u89c8\u76f8\u5f53\u7684\u6027\u80fd\u3002\u7136\u800c\uff0c\u4eceDeepSeek-R1\u4e2d\u63d0\u53d6\u7684DeepSeek-R1-Distill-Qwen-32B\u5728\u6240\u6709\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u7684\u8868\u73b0\u660e\u663e\u4f18\u4e8eDeepSeek-R2-Zero-Qwen-34B\u3002 \u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u5f97\u51fa\u4e24\u4e2a\u7ed3\u8bba\uff1a\u7b2c\u4e00\uff0c\u5c06\u66f4\u5f3a\u5927\u7684\u6a21\u578b\u84b8\u998f\u6210\u66f4\u5c0f\u7684\u6a21\u578b\u4f1a\u4ea7\u751f\u5f88\u597d\u7684\u7ed3\u679c\uff0c\u800c\u4f9d\u8d56\u4e8e\u672c\u6587\u63d0\u5230\u7684\u5927\u89c4\u6a21RL\u7684\u8f83\u5c0f\u6a21\u578b\u9700\u8981\u5de8\u5927\u7684\u8ba1\u7b97\u80fd\u529b\uff0c\u751a\u81f3\u53ef\u80fd\u65e0\u6cd5\u8fbe\u5230\u84b8\u998f\u7684\u6027\u80fd\u3002\u5176\u6b21\uff0c\u5c3d\u7ba1\u84b8\u998f\u7b56\u7565\u65e2\u7ecf\u6d4e\u53c8\u6709\u6548\uff0c\u4f46\u8981\u8d85\u8d8a\u667a\u80fd\u7684\u754c\u9650\uff0c\u53ef\u80fd\u4ecd\u9700\u8981\u66f4\u5f3a\u5927\u7684\u57fa\u7840\u6a21\u578b\u548c\u66f4\u5927\u89c4\u6a21\u7684\u5f3a\u5316\u5b66\u4e60\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#42","title":"4.2 \u5931\u8d25\u7684\u5c1d\u8bd5","text":"<p>\u5728\u5f00\u53d1DeepSeek-R1\u7684\u65e9\u671f\u9636\u6bb5\uff0c\u6211\u4eec\u4e5f\u9047\u5230\u4e86\u5931\u8d25\u548c\u632b\u6298\u3002\u6211\u4eec\u5728\u8fd9\u91cc\u5206\u4eab\u6211\u4eec\u7684\u5931\u8d25\u7ecf\u9a8c\u4ee5\u63d0\u4f9b\u89c1\u89e3\uff0c\u4f46\u8fd9\u5e76\u4e0d\u610f\u5473\u7740\u8fd9\u4e9b\u65b9\u6cd5\u65e0\u6cd5\u5f00\u53d1\u6709\u6548\u7684\u63a8\u7406\u6a21\u578b\u3002</p> <p>\u8fc7\u7a0b\u5956\u52b1\u6a21\u578b\uff08PRM\uff09PRM\u662f\u4e00\u79cd\u5408\u7406\u7684\u65b9\u6cd5\uff0c\u53ef\u4ee5\u5f15\u5bfc\u6a21\u578b\u671d\u7740\u66f4\u597d\u7684\u65b9\u6cd5\u89e3\u51b3\u63a8\u7406\u4efb\u52a1\uff08Lightman\u7b49\u4eba\uff0c2023\uff1bUesato\u7b49\u4eba\uff0c2022\uff1bWang\u7b49\u4eba\uff0c2023\uff09\u3002\u7136\u800c\uff0c\u5728\u5b9e\u8df5\u4e2d\uff0cPRM\u6709\u4e09\u4e2a\u4e3b\u8981\u5c40\u9650\u6027\uff0c\u53ef\u80fd\u4f1a\u963b\u788d\u5176\u6700\u7ec8\u7684\u6210\u529f\u3002\u9996\u5148\uff0c\u5728\u4e00\u822c\u63a8\u7406\u4e2d\u660e\u786e\u5b9a\u4e49\u7ec6\u7c92\u5ea6\u6b65\u9aa4\u5177\u6709\u6311\u6218\u6027\u3002\u5176\u6b21\uff0c\u786e\u5b9a\u5f53\u524d\u4e2d\u95f4\u6b65\u9aa4\u662f\u5426\u6b63\u786e\u662f\u4e00\u9879\u5177\u6709\u6311\u6218\u6027\u7684\u4efb\u52a1\u3002\u4f7f\u7528\u6a21\u578b\u7684\u81ea\u52a8\u6ce8\u91ca\u53ef\u80fd\u4e0d\u4f1a\u4ea7\u751f\u4ee4\u4eba\u6ee1\u610f\u7684\u7ed3\u679c\uff0c\u800c\u624b\u52a8\u6ce8\u91ca\u4e0d\u5229\u4e8e\u6269\u5927\u89c4\u6a21\u3002\u7b2c\u4e09\uff0c\u4e00\u65e6\u5f15\u5165\u57fa\u4e8e\u6a21\u578b\u7684PRM\uff0c\u5b83\u4e0d\u53ef\u907f\u514d\u5730\u4f1a\u5bfc\u81f4\u5956\u52b1\u9ed1\u5ba2\u653b\u51fb\uff08Gao\u7b49\u4eba\uff0c2022\uff09\uff0c\u91cd\u65b0\u8bad\u7ec3\u5956\u52b1\u6a21\u578b\u9700\u8981\u989d\u5916\u7684\u8bad\u7ec3\u8d44\u6e90\uff0c\u5e76\u4f7f\u6574\u4e2a\u8bad\u7ec3\u7ba1\u9053\u590d\u6742\u5316\u3002\u603b\u4e4b\uff0c\u5c3d\u7ba1PRM\u5728\u91cd\u65b0\u6392\u5e8f\u6a21\u578b\u751f\u6210\u7684\u524dN\u4e2a\u54cd\u5e94\u6216\u8f85\u52a9\u5f15\u5bfc\u641c\u7d22\u65b9\u9762\u8868\u73b0\u826f\u597d\uff08Snell\u7b49\u4eba\uff0c2024\uff09\uff0c\u4f46\u4e0e\u6211\u4eec\u5b9e\u9a8c\u4e2d\u5927\u89c4\u6a21\u5f3a\u5316\u5b66\u4e60\u8fc7\u7a0b\u4e2d\u5f15\u5165\u7684\u989d\u5916\u8ba1\u7b97\u5f00\u9500\u76f8\u6bd4\uff0c\u5b83\u7684\u4f18\u52bf\u662f\u6709\u9650\u7684\u3002</p> <p>\u53d7AlphaGo\uff08Silver\u7b49\u4eba\uff0c2017b\uff09\u548cAlphaZero\uff08Silver\u00ac\u7b49\uff0c2017a\uff09\u7684\u542f\u53d1\uff0c\u6211\u4eec\u63a2\u7d22\u4e86\u4f7f\u7528\u8499\u7279\u5361\u6d1b\u6811\u641c\u7d22\uff08MCTS\uff09\u6765\u589e\u5f3a\u6d4b\u8bd5\u65f6\u95f4\u8ba1\u7b97\u7684\u53ef\u6269\u5c55\u6027\u3002\u8fd9\u79cd\u65b9\u6cd5\u6d89\u53ca\u5c06\u7b54\u6848\u5206\u89e3\u4e3a\u66f4\u5c0f\u7684\u90e8\u5206\uff0c\u4f7f\u6a21\u578b\u80fd\u591f\u7cfb\u7edf\u5730\u63a2\u7d22\u89e3\u51b3\u65b9\u6848\u7a7a\u95f4\u3002\u4e3a\u4e86\u4fc3\u8fdb\u8fd9\u4e00\u70b9\uff0c\u6211\u4eec\u63d0\u793a\u6a21\u578b\u751f\u6210\u591a\u4e2a\u6807\u7b7e\uff0c\u8fd9\u4e9b\u6807\u7b7e\u5bf9\u5e94\u4e8e\u641c\u7d22\u6240\u9700\u7684\u7279\u5b9a\u63a8\u7406\u6b65\u9aa4\u3002\u5bf9\u4e8e\u8bad\u7ec3\uff0c\u6211\u4eec\u9996\u5148\u4f7f\u7528\u6536\u96c6\u5230\u7684\u63d0\u793a\uff0c\u5728\u9884\u8bad\u7ec3\u503c\u6a21\u578b\u7684\u6307\u5bfc\u4e0b\uff0c\u901a\u8fc7MCTS\u627e\u5230\u7b54\u6848\u3002\u968f\u540e\uff0c\u6211\u4eec\u4f7f\u7528\u5f97\u5230\u7684\u95ee\u7b54\u5bf9\u6765\u8bad\u7ec3\u53c2\u4e0e\u8005\u6a21\u578b\u548c\u4ef7\u503c\u6a21\u578b\uff0c\u8fed\u4ee3\u5730\u6539\u8fdb\u8fc7\u7a0b\u3002 \u7136\u800c\uff0c\u8fd9\u79cd\u65b9\u6cd5\u5728\u6269\u5927\u57f9\u8bad\u89c4\u6a21\u65f6\u9047\u5230\u4e86\u51e0\u4e2a\u6311\u6218\u3002\u9996\u5148\uff0c\u4e0e\u56fd\u9645\u8c61\u68cb\u4e0d\u540c\uff0c\u56fd\u9645\u8c61\u68cb\u7684\u641c\u7d22\u7a7a\u95f4\u76f8\u5bf9\u5b9a\u4e49\u826f\u597d\uff0c\u4ee4\u724c\u751f\u6210\u63d0\u4f9b\u4e86\u4e00\u79cd \u641c\u7d22\u7a7a\u95f4\u5448\u6307\u6570\u7ea7\u589e\u957f\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u4e3a\u6bcf\u4e2a\u8282\u70b9\u8bbe\u7f6e\u4e86\u4e00\u4e2a\u6700\u5927\u6269\u5c55\u9650\u5236\uff0c\u4f46\u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6a21\u578b\u9677\u5165\u5c40\u90e8\u6700\u4f18\u3002\u5176\u6b21\uff0c\u4ef7\u503c\u6a21\u578b\u76f4\u63a5\u5f71\u54cd\u751f\u6210\u7684\u8d28\u91cf\uff0c\u56e0\u4e3a\u5b83\u6307\u5bfc\u4e86\u641c\u7d22\u8fc7\u7a0b\u7684\u6bcf\u4e00\u6b65\u3002\u8bad\u7ec3\u7ec6\u7c92\u5ea6\u7684\u4ef7\u503c\u6a21\u578b\u672c\u8d28\u4e0a\u5f88\u56f0\u96be\uff0c\u8fd9\u4f7f\u5f97\u6a21\u578b\u8fed\u4ee3\u6539\u8fdb\u5177\u6709\u6311\u6218\u6027\u3002\u867d\u7136AlphaGo\u7684\u6838\u5fc3\u6210\u529f\u4f9d\u8d56\u4e8e\u8bad\u7ec3\u4e00\u4e2a\u4ef7\u503c\u6a21\u578b\u6765\u9010\u6b65\u63d0\u9ad8\u5176\u6027\u80fd\uff0c\u4f46\u7531\u4e8e\u4ee4\u724c\u751f\u6210\u7684\u590d\u6742\u6027\uff0c\u8fd9\u4e00\u539f\u5219\u5728\u6211\u4eec\u7684\u8bbe\u7f6e\u4e2d\u5f88\u96be\u590d\u5236\u3002 \u603b\u4e4b\uff0c\u867d\u7136MCTS\u5728\u4e0e\u9884\u8bad\u7ec3\u7684\u503c\u6a21\u578b\u914d\u5bf9\u65f6\u53ef\u4ee5\u63d0\u9ad8\u63a8\u7406\u8fc7\u7a0b\u4e2d\u7684\u6027\u80fd\uff0c\u4f46\u901a\u8fc7\u81ea\u641c\u7d22\u8fed\u4ee3\u63d0\u9ad8\u6a21\u578b\u6027\u80fd\u4ecd\u7136\u662f\u4e00\u4e2a\u91cd\u5927\u6311\u6218\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#5","title":"5 \u7ed3\u8bba\u3001\u5c40\u9650\u6027\u548c\u672a\u6765\u5de5\u4f5c","text":"<p>\u5728\u8fd9\u9879\u5de5\u4f5c\u4e2d\uff0c\u6211\u4eec\u5206\u4eab\u4e86\u901a\u8fc7\u5f3a\u5316\u5b66\u4e60\u63d0\u9ad8\u6a21\u578b\u63a8\u7406\u80fd\u529b\u7684\u8fc7\u7a0b\u3002DeepSeek-R1-Zero\u4ee3\u8868\u4e86\u4e00\u79cd\u7eaf\u7cb9\u7684\u5f3a\u5316\u5b66\u4e60\u65b9\u6cd5\uff0c\u4e0d\u4f9d\u8d56\u4e8e\u51b7\u542f\u52a8\u6570\u636e\uff0c\u5728\u5404\u79cd\u4efb\u52a1\u4e2d\u5b9e\u73b0\u4e86\u5f3a\u5927\u7684\u6027\u80fd\u3002DeepSeek-R1\u66f4\u5f3a\u5927\uff0c\u5229\u7528\u51b7\u542f\u52a8\u6570\u636e\u548c\u8fed\u4ee3RL\u5fae\u8c03\u3002\u6700\u7ec8\uff0cDeepSeek-R1\u5728\u4e00\u7cfb\u5217\u4efb\u52a1\u4e0a\u5b9e\u73b0\u4e86\u4e0eOpenAI-o1-1217\u76f8\u5f53\u7684\u6027\u80fd\u3002 \u6211\u4eec\u8fdb\u4e00\u6b65\u63a2\u7d22\u4e86\u5c06\u63a8\u7406\u80fd\u529b\u84b8\u998f\u4e3a\u5c0f\u578b\u5bc6\u96c6\u6a21\u578b\u7684\u65b9\u6cd5\u3002\u6211\u4eec\u4f7f\u7528DeepSeek-R1\u4f5c\u4e3a\u6559\u5e08\u6a21\u578b\u6765\u751f\u6210800K\u7684\u8bad\u7ec3\u6837\u672c\uff0c\u5e76\u5bf9\u51e0\u4e2a\u5c0f\u7684\u5bc6\u96c6\u6a21\u578b\u8fdb\u884c\u5fae\u8c03\u3002\u7ed3\u679c\u5f88\u6709\u5e0c\u671b\uff1aDeepSeek-R1-Distill-Qwen-1.5B\u5728\u6570\u5b66\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u7684\u8868\u73b0\u4f18\u4e8eGPT-4o\u548cClaude-3.5-Sonnet\uff0cAIME\u4e3a28.9%\uff0cmath\u4e3a83.9%\u3002\u5176\u4ed6\u5bc6\u96c6\u6a21\u578b\u4e5f\u53d6\u5f97\u4e86\u4ee4\u4eba\u5370\u8c61\u6df1\u523b\u7684\u7ed3\u679c\uff0c\u660e\u663e\u4f18\u4e8e\u57fa\u4e8e\u76f8\u540c\u5e95\u5c42\u68c0\u67e5\u70b9\u7684\u5176\u4ed6\u6307\u4ee4\u8c03\u4f18\u6a21\u578b\u3002 \u672a\u6765\uff0c\u6211\u4eec\u8ba1\u5212\u6295\u8d44\u4e8eDeepSeek-R1\u7684\u4ee5\u4e0b\u65b9\u5411\u7684\u7814\u7a76\u3002 * \u4e00\u822c\u80fd\u529b\uff1a\u76ee\u524d\uff0cDeepSeek-R1\u5728\u51fd\u6570\u8c03\u7528\u3001\u591a\u56de\u5408\u3001\u590d\u6742\u89d2\u8272\u626e\u6f14\u548cJSON\u8f93\u51fa\u7b49\u4efb\u52a1\u4e0a\u7684\u80fd\u529b\u8fd8\u4e0d\u5982DeepSeek-V3\u3002\u5c55\u671b\u672a\u6765\uff0c\u6211\u4eec\u8ba1\u5212\u63a2\u7d22\u5728\u591a\u957f\u65f6\u95f4\u5185\u53ef\u4ee5\u5229\u7528CoT\u6765\u589e\u5f3a\u8fd9\u4e9b\u9886\u57df\u7684\u4efb\u52a1\u3002 * \u8bed\u8a00\u6df7\u5408\uff1aDeepSeek-R1\u76ee\u524d\u9488\u5bf9\u4e2d\u6587\u548c\u82f1\u6587\u8fdb\u884c\u4e86\u4f18\u5316 \u5728\u5904\u7406\u5176\u4ed6\u8bed\u8a00\u7684\u67e5\u8be2\u65f6\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u8bed\u8a00\u6df7\u5408\u95ee\u9898\u3002\u4f8b\u5982\uff0cDeepSeek-R1\u53ef\u80fd\u4f1a\u4f7f\u7528\u82f1\u8bed\u8fdb\u884c\u63a8\u7406\u548c\u54cd\u5e94\uff0c\u5373\u4f7f\u67e5\u8be2\u8bed\u8a00\u4e0d\u662f\u82f1\u8bed\u6216\u4e2d\u6587\u3002\u6211\u4eec\u7684\u76ee\u6807\u662f\u5728\u672a\u6765\u7684\u66f4\u65b0\u4e2d\u89e3\u51b3\u8fd9\u4e00\u9650\u5236\u3002 * \u63d0\u793a\u5de5\u7a0b\uff1a\u5728\u8bc4\u4f30DeepSeek-R1\u65f6\uff0c\u6211\u4eec\u89c2\u5bdf\u5230\u5b83\u5f88\u654f\u611f \u63d0\u793a\u3002\u5f88\u5c11\u6709\u5c04\u95e8\u63d0\u793a\u4f1a\u6301\u7eed\u964d\u4f4e\u5176\u8868\u73b0\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u5efa\u8bae\u7528\u6237\u76f4\u63a5\u63cf\u8ff0\u95ee\u9898\uff0c\u5e76\u4f7f\u7528\u96f6\u6837\u672c\u8bbe\u7f6e\u6307\u5b9a\u8f93\u51fa\u683c\u5f0f\u4ee5\u83b7\u5f97\u6700\u4f73\u7ed3\u679c\u3002 * \u8f6f\u4ef6\u5de5\u7a0b\u4efb\u52a1\uff1a\u7531\u4e8e\u8bc4\u4f30\u65f6\u95f4\u957f\uff0c\u5f71\u54cd\u6548\u7387- \u7531\u4e8eRL\u8fc7\u7a0b\u7684\u79d1\u5b66\u6027\uff0c\u5927\u89c4\u6a21RL\u5c1a\u672a\u5728\u8f6f\u4ef6\u5de5\u7a0b\u4efb\u52a1\u4e2d\u5f97\u5230\u5e7f\u6cdb\u5e94\u7528\u3002\u56e0\u6b64\uff0cDeepSeek-R1\u5728\u8f6f\u4ef6\u5de5\u7a0b\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u5e76\u6ca1\u6709\u8868\u73b0\u51fa\u6bd4DeepSeek-V3\u7684\u5de8\u5927\u6539\u8fdb\u3002\u672a\u6765\u7684\u7248\u672c\u5c06\u901a\u8fc7\u5728\u8f6f\u4ef6\u5de5\u7a0b\u6570\u636e\u4e0a\u5b9e\u65bd\u62d2\u7edd\u91c7\u6837\u6216\u5728RL\u8fc7\u7a0b\u4e2d\u5f15\u5165\u5f02\u6b65\u8bc4\u4f30\u6765\u89e3\u51b3\u8fd9\u4e00\u95ee\u9898\uff0c\u4ee5\u63d0\u9ad8\u6548\u7387\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#_2","title":"\u53c2\u8003\u6587\u732e","text":"<ul> <li>AI@Meta. Llama 3.1 model card, 2024. URL https://github.com/meta-llama/llama-m odels/blob/main/models/llama3_1/MODEL_CARD.md.</li> <li>Anthropic. Claude 3.5 sonnet, 2024. URL https://www.anthropic.com/news/claude-3 -5-sonnet.</li> <li>M. Chen, J. Tworek, H. Jun, Q. Yuan, H. P. de Oliveira Pinto, J. Kaplan, H. Edwards, Y. Burda, N. Joseph, G. Brockman, A. Ray, R. Puri, G. Krueger, M. Petrov, H. Khlaaf, G. Sastry, P. Mishkin, B. Chan, S. Gray, N. Ryder, M. Pavlov, A. Power, L. Kaiser, M. Bavarian, C. Winter, P. Tillet, F. P. Such, D. Cummings, M. Plappert, F. Chantzis, E. Barnes, A. Herbert-Voss, W. H. Guss, A. Nichol, A. Paino, N. Tezak, J. Tang, I. Babuschkin, S. Balaji, S. Jain, W. Saunders, C. Hesse, A. N. Carr, J. Leike, J. Achiam, V. Misra, E. Morikawa, A. Radford, M. Knight, M. Brundage, M. Murati, K. Mayer, P. Welinder, B. McGrew, D. Amodei, S. McCandlish, I. Sutskever, and W. Zaremba. Evaluating large language models trained on code. CoRR, abs/2107.03374, 2021. URL https://arxiv.org/abs/2107.03374. W.\u624e\u4f26\u5df4\u3002\u8bc4\u4f30\u57fa\u4e8e\u4ee3\u7801\u8bad\u7ec3\u7684\u5927\u578b\u8bed\u8a00\u6a21\u578b\u3002\u7f8e\u56fd\u6ce8\u518c\u4f1a\u8ba1\u5e08\u534f\u4f1a\uff0cabs/2107.033742021\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://arxiv.org/abs/2107.03374. A.\u675c\u8d1d\u3001A.Jauhri\u3001A.\u6f58\u8fea\u3001A.\u5361\u8fea\u5b89\u3001A.\u8fbe\u5c14\u3001A.\u83b1\u7279\u66fc\u3001A.\u9a6c\u56fe\u5c14\u3001A.\u820d\u6ed5\uff0c A.\u6768\uff0cA.\u8303\uff0c\u7b49\u3002\u9a86\u9a7c3\u7fa4\u6a21\u578b\u3002arXiv\u9884\u5370\u672carXiv:2407.217832024\u3002 Y.Dubois\u3001B.Galambosi\u3001P.Liang\u548cT.B.Hashimoto\u3002\u957f\u5ea6\u63a7\u5236\u7f8a\u9a7c\u8bc4\u4f30\uff1a\u4e00\u79cd\u7b80\u5355\u7684\u65b9\u6cd5\u6765\u6d88\u9664\u81ea\u52a8\u8bc4\u4f30\u5668\u7684\u8d1f\u62c5\u3002arXiv\u9884\u5370\u672carXiv:2404044752024\u3002 \u51af\u3001\u4e07\u3001\u6e29\u3001\u9ea6\u5361\u52d2\u3001\u6e29\u3001\u5f20\u3001\u738b\u30022024\u5e74\uff0c\u7c7b\u4f3cAlphazero\u7684\u6811\u641c\u7d22\u53ef\u4ee5\u6307\u5bfc\u5927\u578b\u8bed\u8a00\u6a21\u578b\u7684\u89e3\u7801\u548c\u8bad\u7ec3\u3002URL https: //arxiv.org/abs/2309.17179\u3002 \u9ad8\u3001\u8212\u5c14\u66fc\u548c\u5e0c\u5c14\u987f\u30022022\u5e74\u5956\u52b1\u6a21\u578b\u8fc7\u5ea6\u4f18\u5316\u7684\u7f29\u653e\u5b9a\u5f8b\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740 https://arxiv.org/abs/2210.10760. A.P.Gema\u3001J.O.J.Leang\u3001G.Hong\u3001A.Devoto\u3001A.C.M.Mancino\u3001R.Saxena\u3001X.He\u3001Y.\u8d75\u3001X.Du\u3001M.R.G.Madani\u3001C.Barale\u3001R.McHardy\u3001J.Harris\u3001J.Kaddour\u3001E.van Krieken\u548c P.Minervini\u3002\u6211\u4eec\u7ed3\u675fmmlu\u4e86\u5417\uff1f\u7f8e\u56fd\u6ce8\u518c\u4f1a\u8ba1\u5e08\u534f\u4f1a\uff0cabs/2406.041272024\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://doi.or\u514b/10.48550/arXiv.2406.04127\u3002 \u8c37\u6b4c\u3002\u6211\u4eec\u7684\u4e0b\u4e00\u4ee3\u578b\u53f7\uff1aGemini 1.52024\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://blog.google/technology/ai/google-geemini\u4e0b\u4e00\u4ee3\u6a21\u578b-2024\u5e742\u6708\u3002 \u4f55\uff0c\u674e\uff0c\u5218\uff0c\u8c2d\uff0c\u738b\uff0c\u9ec4\uff0c\u5e03\uff0c\u90ed\uff0c\u80e1\uff0c\u90d1\uff0c\u7b49\u3002\u00ac\u6c49\u8bed\u7b80\u6613\u95ee\u7b54\uff1a\u5927\u578b\u8bed\u8a00\u6a21\u578b\u7684\u6c49\u8bed\u771f\u5b9e\u6027\u8bc4\u4ef7\u3002arXiv\u9884\u5370\u672carXiv:2411.071402024\u3002 D.Hendrycks\u3001C.Burns\u3001S.Basart\u3001A.Zou\u3001M.Mazeika\u3001D.Song\u548cJ.Steinhardt\u3002\u6d4b\u91cf\u5927\u91cf\u591a\u4efb\u52a1\u8bed\u8a00\u7406\u89e3\u80fd\u529b\u3002arXiv\u9884\u5370\u672carXiv:2009.03302020\u3002 \u9ec4\uff0c\u767d\uff0c\u6731\uff0c\u5f20\uff0c\u5f20\uff0c\u82cf\uff0c\u5218\uff0c\u5415\uff0c\u5f20\uff0c\u96f7\uff0c\u7b49.C-Eval:\u4e00\u4e2a\u591a\u5c42\u6b21\u3001\u591a\u5b66\u79d1\u7684\u4e2d\u56fd\u57fa\u7840\u6a21\u578b\u8bc4\u4ef7\u5957\u4ef6\u3002arXiv\u9884\u5370\u672carXiv:2305.08322023\u3002 \u7b80\uff0c\u97e9\uff0c\u987e\uff0c\u674e\uff0c\u960e\uff0c\u5f20\uff0c\u738b\uff0c\u5b59\uff0c\u68ee\uff0c\u65af\u6258\u4f0a\u5361\u3002Livecodebench\uff1a\u5bf9\u4ee3\u7801\u7684\u5927\u578b\u8bed\u8a00\u6a21\u578b\u8fdb\u884c\u6574\u4f53\u548c\u65e0\u6c61\u67d3\u7684\u8bc4\u4f30\u3002\u7f8e\u56fd\u6ce8\u518c\u4f1a\u8ba1\u5e08\u534f\u4f1a\uff0cabs/2403.079742024\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://doi.org/10.48550/arXiv.2403.07974.</li> </ul> <p>S.\u514b\u91cc\u5e0c\u7eb3\u3001K.\u514b\u91cc\u5e0c\u7eb3\u3001A.Mohananey\u3001S.Schwarcz\u3001A.Stambler\u3001S.Upadhyay\u548cM.Faruqui\u3002\u4e8b\u5b9e\u3001\u83b7\u53d6\u548c\u539f\u56e0\uff1a\u68c0\u7d22\u589e\u5f3a\u751f\u6210\u7684\u7edf\u4e00\u8bc4\u4f30\u3002\u7f8e\u56fd\u5fc3\u810f\u75c5\u5b66\u4f1a\uff0cabs/2409.129412024\u3002doi:10.48550/ARXIV.2409.12941\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://doi.org/10.48550/arXiv.2409.12941\u3002 A.Kumar\uff0cV.Zhuang\uff0cR.Agarwal\uff0cY.Su\uff0cJ.D.Co Reyes\uff0cA.Singh\uff0cK.Baumli\uff0cS.Iqbal\uff0cC.Bishop\uff0cR.Roelofs\u7b49\u4eba\u3002\u901a\u8fc7\u5f3a\u5316\u5b66\u4e60\u8bad\u7ec3\u8bed\u8a00\u6a21\u578b\u8fdb\u884c\u81ea\u6211\u7ea0\u6b63\u3002arXiv\u9884\u5370\u672carXiv:2409.129172024\u3002 H.Li\u3001Y.Zhang\u3001F.Koto\u3001Y.Yang\u3001H.\u8d75\u3001Y.Gong\u3001N.Duan\u548cT.Baldwin\u3002CMMLU\uff1a\u6d4b\u91cf\u00ac\u4e2d\u6587\u4e2d\u7684\u5927\u89c4\u6a21\u591a\u4efb\u52a1\u8bed\u8a00\u7406\u89e3\u80fd\u529b\u3002arXiv\u9884\u5370\u672carXiv:2306.09212023\u3002 \u674e\u3001\u848b\u3001\u5f17\u91cc\u514b\u3001\u9093\u62c9\u666e\u3001\u5434\u3001\u6731\u3001\u5188\u8428\u96f7\u65af\u548c\u65af\u6258\u4f0a\u5361\u3002\u4ece\u4f17\u5305\u6570\u636e\u5230\u9ad8\u8d28\u91cf\u57fa\u51c6\u6d4b\u8bd5\uff1a\u7ade\u6280\u573a\u786c\u4ef6\u548c\u57fa\u51c6\u6784\u5efa\u5668\u7ba1\u9053\u3002arXiv\u9884\u5370\u672carXiv:2406.19392024\u3002 H.Lightman\u3001V.Kosaraju\u3001Y.Burda\u3001H.Edwards\u3001B.Baker\u3001T.Lee\u3001J.Leike\u3001J.Schulman\u3001I.Sutskever\u548cK.Cobbe\u3002\u8ba9\u6211\u4eec\u4e00\u6b65\u4e00\u6b65\u5730\u9a8c\u8bc1\u3002arXiv\u9884\u5370\u672carXiv:2305.20052023\u3002 \u6797\uff1a\u300aZeroEval\uff1a\u8bc4\u4f30\u8bed\u8a00\u6a21\u578b\u7684\u7edf\u4e00\u6846\u67b6\u300b\uff0c2024\u5e747\u6708\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740 https://github.com/WildEval/ZeroEval. \u6700\u9ad8\u53ef\u7528\u6027\u6784\u67b6\u3002\u7f8e\u56fd\u6570\u5b66\u9080\u8bf7\u8003\u8bd5\u3002\u5728\u7f8e\u56fd\u9080\u8bf7\u6570\u5b66\u8003\u8bd5-AIME 2024\uff0c2024\u5e742\u6708\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://maa.org/math -\u7ade\u8d5b/\u7f8e\u56fd\u6570\u5b66\u9080\u8bf7\u8d5b\u3002 OpenAI\u3002\u4f60\u597d\uff0cGPT-4o\uff0c2024a\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://openai.com/index/hello-gpt-4o/. OpenAI\u3002\u5b66\u4f1a\u7528llms\u63a8\u7406\uff0c2024b\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://openai.com/index/learning-to-reason-with-llms/\u3002 OpenAI\u3002\u4ecb\u7ecdSimpleQA\uff0c2024c\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://openai.com/index/introducing -simpleqa/\u3002 OpenAI\u3002\u5f15\u5165SWE\u8bd5\u9a8c\u53f0\u9a8c\u8bc1\uff0c\u6211\u4eec\u5c06\u53d1\u5e03\u4e00\u4e2a\u7ecf\u8fc7\u4eba\u7c7b\u9a8c\u8bc1\u7684SWE\u8bd5\u9a8c\u53f0\u5b50\u96c6\uff0c\u8d85\u8fc72024d\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://openai.com/index/introducing-swe-bench -\u9a8c\u8bc1/\u3002 Qwen\u3002Qwq\uff1a\u6df1\u5165\u601d\u8003\u672a\u77e5\u7684\u8fb9\u754c\uff0c2024a\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://qwenlm .github.io/blog/qwq-32b\u9884\u89c8/\u3002 Qwen\u3002Qwen2.5\uff1a\u4e00\u7ec4\u57fa\u7840\u6a21\u578b\uff0c2024b\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://qwenlm.github.io/blog/qwen2.5\u3002 D.\u8d56\u56e0\u3001B.L.\u4faf\u3001A.C.\u65af\u8482\u514b\u5170\u3001J.\u4f69\u8482\u3001R.Y.\u5e9e\u3001J.\u72c4\u62c9\u5c3c\u3001J.\u8fc8\u514b\u5c14\u548cS.R.\u9c8d\u66fc\u3002GPQA\uff1a\u4e00\u4e2a\u7814\u7a76\u751f\u7ea7\u522b\u7684\u8c37\u6b4c\u8bc1\u660e\u95ee\u7b54\u57fa\u51c6\u3002arXiv\u9884\u5370\u672carXiv:2311.12022023\u3002 \u90b5\u5efa\u56fd\uff0c\u738b\uff0c\u6731\uff0c\u5f90\uff0c\u5b8b\uff0c\u5f20\uff0c\u674e\uff0c\u5434\uff0c\u90ed\u3002Deepseekmath\uff1a\u5728\u5f00\u653e\u8bed\u8a00\u6a21\u578b\u4e2d\u7a81\u7834\u6570\u5b66\u63a8\u7406\u7684\u6781\u9650\u3002arXiv\u9884\u5370\u672carXiv:2402.033002024\u3002 D.Silver\u3001T.Hubert\u3001J.Schrittwieser\u3001I.Antonoglou\u3001M.Lai\u3001A.Guez\u3001M.Lanctot\u3001L.Sifre\u3001D.Kumaran\u3001T.Graepel\u3001T.P.Lillicrap\u3001K.Simonyan\u548cD.Hassabis\u3002\u4f7f\u7528\u4e00\u822c\u5f3a\u5316\u5b66\u4e60\u7b97\u6cd5\u901a\u8fc7\u81ea\u6211\u6e38\u620f\u638c\u63e1\u56fd\u9645\u8c61\u68cb\u548c\u5c06\u68cb\u3002\u7f8e\u56fd\u6ce8\u518c\u4f1a\u8ba1\u5e08\u534f\u4f1a\uff0cabs/1712.01815\uff0c2017a\u3002URL\u3002</p> <p>D.\u897f\u5c14\u5f17\u3001J.Schrittwieser\u3001K.Simonyan\u3001I.Antonoglou\u3001A.\u9ec4\u3001A.Guez\u3001T.Hubert\u3001L.Baker\u3001M.Lai\u3001A.Bolton\u3001Y.Chen\u3001T.P.Lillicrap\u3001F.Hui\u3001L.Sifre\u3001G.van den Driessche\u3001T.Graepel\u548c D.\u54c8\u8428\u6bd4\u65af\u3002\u5728\u6ca1\u6709\u4eba\u7c7b\u77e5\u8bc6\u7684\u60c5\u51b5\u4e0b\u638c\u63e1\u56f4\u68cb\u3002\u300a\u81ea\u7136\u300b\u6742\u5fd7\uff0c550\uff087676\uff09\uff1a354\u20133592017b\u3002doi:10.1038/NATURE24270\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://doi.org/10.1038/nature24270. C.Snell\u3001J.Lee\u3001K.Xu\u548cA.Kumar\u30022024\u5e74\uff0c\u6700\u4f73\u5730\u7f29\u653ellm\u6d4b\u8bd5\u65f6\u95f4\u8ba1\u7b97\u53ef\u80fd\u6bd4\u7f29\u653e\u6a21\u578b\u53c2\u6570\u66f4\u6709\u6548\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://arxiv.org/abs/2408.033 14. \u90d1\u6c38\u5e86\u3001\u5434\u5f66\u7956\u3001\u9ece\u3001\u4f55\u3001\u962e\u3002\u5728\u6ca1\u6709\u4eba\u7c7b\u6f14\u793a\u7684\u60c5\u51b5\u4e0b\u89e3\u51b3\u5965\u6797\u5339\u514b\u51e0\u4f55\u95ee\u9898\u3002\u300a\u81ea\u7136\u300b\uff0c2024\u5e74\u3002doi:10.1038/41586-023-06747-5\u3002 J.Uesato\u3001N.Kushman\u3001R.Kumar\u3001F.Song\u3001N.Siegel\u3001L.Wang\u3001A.Creswell\u3001G.Irving\u548cI.Higgins\u3002\u7528\u57fa\u4e8e\u8fc7\u7a0b\u548c\u7ed3\u679c\u7684\u53cd\u9988\u89e3\u51b3\u6570\u5b66\u5355\u8bcd\u95ee\u9898\u3002arXiv\u9884\u5370\u672carXiv:2211.142752022\u3002 \u738b\uff0c\u674e\uff0c\u90b5\uff0c\u5f90\uff0c\u6234\uff0c\u674e\uff0c\u9648\uff0c\u5434\uff0c\u968b\u3002Math shepherd\uff1a\u4e00\u4e2a\u7528\u4e8e\u6570\u5b66\u63a8\u7406\u4e2dllms\u7684\u65e0\u6807\u7b7e\u9010\u6b65\u9a8c\u8bc1\u5668\u3002arXiv\u9884\u5370\u672carXiv:2312.089352023\u3002 \u738b\u3001\u9b4f\u5efa\u56fd\u3001\u8212\u5c14\u66fc\u3001\u4e50\u3001\u8fdf\u3001\u90a3\u826f\u3001\u5468\u3002\u81ea\u6d3d\u6027\u6539\u5584\u4e86\u8bed\u8a00\u6a21\u578b\u4e2d\u7684\u601d\u7ef4\u94fe\u63a8\u7406\u3002arXiv\u9884\u5370\u672carXiv:2203.111712022\u3002 \u738b\uff0c\u9a6c\uff0c\u5f20\uff0c\u502a\uff0c\u94b1\u5fb7\u62c9\uff0c\u90ed\uff0c\u4efb\uff0c\u963f\u9c81\u62c9\u6770\uff0c\u4f55\uff0c\u6c5f\uff0c\u674e\uff0c\u5e93\uff0c\u738b\uff0c\u5e84\uff0c\u8303\uff0c\u5cb3\uff0c\u9648\u3002Mmlu pro\uff1a\u4e00\u4e2a\u66f4\u5f3a\u5927\u3001\u66f4\u5177\u6311\u6218\u6027\u7684\u591a\u4efb\u52a1\u8bed\u8a00\u7406\u89e3\u57fa\u51c6\u3002CoRR\uff0cabs/2406.015742024\u3002URL\u3002 \u590f\uff0c\u9093\uff0c\u9093\uff0c\u5f20\u3002\u65e0\u4ee3\u7406\uff1a\u63ed\u5f00\u57fa\u4e8ellm\u7684\u8f6f\u4ef6\u5de5\u7a0b\u4ee3\u7406\u7684\u795e\u79d8\u9762\u7eb1\u3002arXiv\u9884\u5370\u672c\uff0c2024\u5e74\u3002 \u8f9b\uff0c\u4efb\uff0c\u5b8b\uff0c\u90b5\uff0c\u8d75\uff0c\u738b\uff0c\u5218\uff0c\u5f20\uff0c\u9646\uff0c\u675c\uff0c\u9ad8\uff0c \u6731\u3001\u6768\u3001\u82df\u3001\u5434\u3001\u7f57\u3001\u962e\u3002Deepseek-prover-v1.5\uff1a\u5229\u7528\u8bc1\u660e\u8f85\u52a9\u53cd\u9988\u8fdb\u884c\u5f3a\u5316\u5b66\u4e60\u548c\u8499\u7279\u5361\u6d1b\u6811\u641c\u7d22\uff0c2024\u5e74\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://arxiv.org/abs/2408.08152. \u5468\uff0c\u9646\uff0c\u7c73\u4ec0\u62c9\uff0c\u68b5\u5929\uff0c\u5df4\u82cf\uff0c\u683e\uff0c\u5468\uff0c\u4faf\u3002\u5927\u578b\u8bed\u8a00\u6a21\u578b\u8bc4\u4f30\u540e\u7684\u8bf4\u660e\u3002arXiv\u9884\u5370\u672carXiv:2311.0791112023\u3002</p> <p>\u9644\u5f55 A.\u8d21\u732e\u4e0e\u81f4\u8c22</p> <p>\u6838\u5fc3\u8d21\u732e\u8005 \u5927\u96c5\u90ed\u5fb7\u5065\u6768\u6d69\u4f1f\u5f20\u4fca\u6653\u5b8b\u82e5\u745c\u5f20\u6da6\u65b0\u5f90\u542f\u6d69\u6731\u4e16\u8363\u9a6c\u57f9\u4e49\u738b\u6653\u78a7 \u5c0f\u5eb7\u5f20\u5174\u51ef \u4e8e\u6b66 \u5434 \u90ed\u5fd7\u658c\u5fd7\u5b8f\u90b5\u5353\u4e66\u674e\u81ea\u4e49\u9ad8</p> <p>\u64b0\u7a3f\u4eba\u5218\u51b0\u96ea \u738b\u79c9\u8f69\u5434\u4f2f\u8d85 \u5317\u5cf0\u6210\u8fbe\u9646\u6210\u521a\u8d75\u6210\u542f\u9093\u51b2\u962e\u5927\u9ea6\u6234 \u9648\u4e1c\u6770\u5b63\u4e8c\u822a\u674e\u82b3\u4e91\u6797\u5bcc\u806a\u6234\u5bcc\u4e3d\u7f57\u5149\u6ce2\u90dd\u5b98\u5ead\u9648\u56fd\u4f1f H.\u5f20\u6c49\u4f1f\u5f90\u6d2a\u8f89\u4e01\u534e\u4f50\u9ad8\u6167\u6e20</p> <p>\u4f1a\u674e\u5efa\u5fe0\u90ed\u5bb6\u77f3\u674e\u666f\u660c\u9648\u666f\u9633\u8881\u91d1\u6d69\u56fe \u674e\u4fca\u6770\u90b1\u4fca\u9f99 \u8521 \u502a\u5efa\u826f\u91d1\u9648\u51ef\u4e1c\u80e1 \u4f60\u51ef\u8d85\u9ad8\u5eb7\u5173\u514b\u65b0\u9ec4\u5feb\u5b87\u738b\u5229\u6069 \u4e50\u4ece\u5f20\u4eae\u8d75\u5229\u901a\u738b\u7acb\u8dc3\u5f20\u78ca\u5f90 \u590f\u94ed\u4f20\u5f20\u660e\u534e\u5f20\u660e\u8f89\u5510\u660e\u65ed\u5468\u68a6\u4e3d \u82d7\u541b\u738b\u660e\u660e\u674e\u5b81\u7530\u6f58\u6f58\u9ec4\u9e4f\u5f20\u524d\u7a0b\u738b\u79e6\u5b87\u9648\u79cb\u77f3\u675c \u845b\u745e\u742a\u5f20\u745e\u677e\u6f58\u6da6\u5409\u738b \u9648 \u91d1 \u5982\u610f\u9648\u5c1a\u6d69\u9646\u5c1a\u708e\u5468\u5584\u714c\u9648\u80dc\u5cf0\u53f6\u4e16\u7389\u738b\u6c34\u840d\u4f59\u987a\u5cf0\u5468\u6811\u4ead\u6f58 \u674e \u53cc\u5468\u5c11\u9752\u5434\u80dc\u5cf0\u53f6\u9676\u4e91 \u5b59\u5929\u5b87 \u738b\u671b\u5b9a\u66fe\u6587\u5218\u6587\u5cf0\u6881\u6587\u519b\u9ad8\u6587\u7434*\u5f20\u6587\u6d9b W.L.\u8096\u4f1f\u5b89\u6653\u4e1c\u5218 \u738b\u6653\u6db5\u9648\u6653\u6d9b\u8042\u5fc3\u6210 \u5218\u6b23 \u5218\u5174\u8d85\u3001\u6768\u65b0\u5143\u3001\u674e\u5b66\u6210\u3001\u82cf\u65ed\u6052\u3001\u6797 \u674e \u9648\u6653\u6587\u5b59\u6653\u9999\u738b\u65b0\u6960\u5b8b\u4fe1\u4e49\u5468\u663e\u7956\u738b\u65b0\u971e\u5c71 \u674e \u738b</p> <p>\u9b4f \u6768\u5f20\u8273\u7ea2\u5f90\u8000\u4e3d \u59da\u8d75\u59da\u5cf0\u5b59\u8000\u8f89\u738b\u4e49\u745c \u5f20\u4e00\u51e1\u53f2\u4e00\u826f\u718a\u82f1\u4f55\u4e00\u77f3\u6734\u4e00\u677e\u738b\u4e00\u8f69\u8c2d\u4e00\u626c\u9a6c*\u5218\u6c38\u5f3a\u90ed\u5143\u6b27\u7389\u73af\u738b\u5cb3\u516c\u7389\u6052\u90b9\u7389\u4f73\u4f55\u4e91\u5e06\u718a\u7389\u7965\u7f57\u7389\u7965\u5c24\u8431\u5218\u7389\u6d0b\u5468 \u6731 \u9ec4\u8000\u8f89 \u6613\u90d1\u7389\u8fb0\u6731\u4e91\u8d24\u9a6c\u82f1\u5510\u7389\u5764\u624e\u7389\u5a77\u989c \u4efb \u6cfd\u8f89\u4efb\u7ae0\u7acb\u6c99\u54f2\u5085\u5f90\u632f\u8fbe\u8c22 \u5f20\u54f2\u6587\u90dd\u5fd7\u6210\u9a6c\u5fd7\u521a\u4e25\u5fd7\u5b87\u5434 \u987e\u6893\u8f89</p> <p>\u5218\u7d2b\u5609\u6731\u7d2b\u519b*\u674e\u7d2b\u8587\u8c22\u7d2b\u9633\u5b8b\u7d2b\u6b63\u6f58</p> <p>\u7504\u9ec4\u5fd7\u9e4f\u5f90\u5fe0\u79b9\u5f20\u7504\u5f20</p> <p>\u5728\u6bcf\u4e2a\u89d2\u8272\u4e2d\uff0c\u4f5c\u8005\u6309\u540d\u5b57\u7684\u5b57\u6bcd\u987a\u5e8f\u6392\u5217\u3002\u6807\u6709*\u7684\u59d3\u540d\u8868\u793a\u5df2\u79bb\u5f00\u6211\u4eec\u56e2\u961f\u7684\u4e2a\u4eba\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseekllm/DeepSeek_LLM_Scaling_Open_Source_Language_Models_with_Longtermism/","title":"DeepSeek LLM Scaling Open-Source Language Models with Longtermism","text":"<p>DeepSeek LLM Scaling Open-Source Language Models with Longtermism</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseekllm/DeepSeek_LLM_Scaling_Open_Source_Language_Models_with_Longtermism/#_1","title":"\u6458\u8981","text":"<p>\u5f00\u6e90\u5927\u578b\u8bed\u8a00\u6a21\u578b\uff08LLMs\uff09\u7684\u5feb\u901f\u53d1\u5c55\u786e\u5b9e\u4ee4\u4eba\u77a9\u76ee\u3002\u7136\u800c\uff0c\u5148\u524d\u6587\u732e\u4e2d\u63cf\u8ff0\u7684\u7f29\u653e\u5b9a\u5f8b\u5f97\u51fa\u4e86\u4e0d\u540c\u7684\u7ed3\u8bba\uff0c\u8fd9\u7ed9\u7f29\u653eLLM\u8499\u4e0a\u4e86\u4e00\u5c42\u9634\u5f71\u3002\u6211\u4eec\u6df1\u5165\u7814\u7a76\u4e86\u7f29\u653e\u5b9a\u5f8b\uff0c\u5e76\u63d0\u51fa\u4e86\u6211\u4eec\u72ec\u7279\u7684\u53d1\u73b0\uff0c\u8fd9\u4e9b\u53d1\u73b0\u6709\u52a9\u4e8e\u5728\u4e24\u79cd\u5e38\u7528\u7684\u5f00\u6e90\u914d\u7f6e\uff0c7B\u548c67B\u6a21\u578b\u4e2d\u7f29\u653e\u5927\u6a21\u578b\u3002\u5728\u7f29\u653e\u5b9a\u5f8b\u7684\u6307\u5bfc\u4e0b\uff0c\u6211\u4eec\u5f15\u5165\u4e86DeepSeek LLM\uff0c\u8fd9\u662f\u4e00\u4e2a\u81f4\u529b\u4e8e\u4ece\u957f\u8fdc\u89d2\u5ea6\u63a8\u8fdb\u5f00\u6e90\u8bed\u8a00\u6a21\u578b\u7684\u9879\u76ee\u3002\u4e3a\u4e86\u652f\u6301\u9884\u8bad\u7ec3\uff0c\u6211\u4eec\u5f00\u53d1\u4e86\u4e00\u4e2a\u6570\u636e\u96c6\uff0c\u76ee\u524d\u75312\u4e07\u4ebf\u4e2atoken\u7ec4\u6210\uff0c\u5e76\u4e14\u8fd8\u5728\u4e0d\u65ad\u6269\u5c55\u3002\u6211\u4eec\u8fdb\u4e00\u6b65\u5bf9DeepSeek LLM Base\u6a21\u578b\u8fdb\u884c\u6709\u76d1\u7763\u5fae\u8c03\uff08SFT\uff09\u548c\u76f4\u63a5\u504f\u597d\u4f18\u5316\uff08DPO\uff09\uff0c\u4ece\u800c\u521b\u5efa\u4e86DeepSeek\u804a\u5929\u6a21\u578b\u3002\u6211\u4eec\u7684\u8bc4\u4f30\u7ed3\u679c\u8868\u660e\uff0cDeepSeek LLM 67B\u5728\u4e00\u7cfb\u5217\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u8d85\u8fc7\u4e86LLaMA-2 70B\uff0c\u7279\u522b\u662f\u5728\u4ee3\u7801\u3001\u6570\u5b66\u548c\u63a8\u7406\u9886\u57df\u3002\u6b64\u5916\uff0c\u5f00\u653e\u5f0f\u8bc4\u4f30\u663e\u793a\uff0c\u4e0eGPT-3.5\u76f8\u6bd4\uff0c\u6211\u4eec\u7684DeepSeek LLM 67B\u804a\u5929\u8868\u73b0\u51fa\u66f4\u4f18\u7684\u6027\u80fd\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseekllm/DeepSeek_LLM_Scaling_Open_Source_Language_Models_with_Longtermism/#1","title":"1 \u4ecb\u7ecd","text":"<p>\u5728\u8fc7\u53bb\u7684\u51e0\u5e74\u91cc\uff0c\u57fa\u4e8e\u7eaf\u89e3\u7801\u5668 transformer \u7684\u5927\u578b\u8bed\u8a00\u6a21\u578b\uff08LLM\uff09\uff08Vaswani et al.\uff0c2017\uff09\u65e5\u76ca\u6210\u4e3a\u5b9e\u73b0\u901a\u7528\u4eba\u5de5\u667a\u80fd\uff08AGI\uff09\u7684\u57fa\u77f3\u548c\u9014\u5f84\u3002\u901a\u8fc7\u9884\u6d4b\u8fde\u7eed\u6587\u672c\u4e2d\u7684\u4e0b\u4e00\u4e2a\u5355\u8bcd\uff0cLLM\u5728\u6d77\u91cf\u6570\u636e\u96c6\u4e0a\u8fdb\u884c\u81ea\u6211\u76d1\u7763\u7684\u9884\u8bad\u7ec3\uff0c\u4f7f\u5176\u80fd\u591f\u5b9e\u73b0\u5404\u79cd\u76ee\u7684\u5e76\u5177\u5907\u8bb8\u591a\u80fd\u529b\uff0c\u5982\u5c0f\u8bf4\u521b\u4f5c\u3001\u6587\u672c\u6458\u8981\u3001\u4ee3\u7801\u5b8c\u6210\u7b49\u3002\u968f\u540e\u7684\u53d1\u5c55\uff0c\u5982\u76d1\u7763\u5fae\u8c03\u548c\u5956\u52b1\u5efa\u6a21\uff0c\u4f7f\u5927\u578b\u8bed\u8a00\u6a21\u578b\uff08LLM\uff09\u80fd\u591f\u66f4\u597d\u5730\u9075\u5faa\u7528\u6237\u7684\u610f\u56fe\u548c\u6307\u4ee4\u3002\u8fd9\u8d4b\u4e88\u4e86\u4ed6\u4eec\u66f4\u591a\u7684\u4f1a\u8bdd\u80fd\u529b\uff0c\u5e76\u8fc5\u901f\u6269\u5927\u4e86\u4ed6\u4eec\u7684\u5f71\u54cd\u529b\u3002</p> <p>\u8fd9\u6ce2\u6d6a\u6f6e\u662f\u7531\u95ed\u6e90\u4ea7\u54c1\u5f15\u53d1\u7684\uff0c\u5982ChatGPT\uff08OpenAI\uff0c2022\uff09\u3001Claude\uff08An-thropic\uff0c2023\uff09\u548cBard\uff08Google\uff0c2023\uff09\uff0c\u8fd9\u4e9b\u4ea7\u54c1\u662f\u7528\u5927\u91cf\u7684\u8ba1\u7b97\u8d44\u6e90\u548c\u5927\u91cf\u7684\u6807\u6ce8\u6210\u672c\u5f00\u53d1\u7684\u3002\u8fd9\u4e9b\u4ea7\u54c1\u663e\u8457\u63d0\u9ad8\u4e86\u793e\u533a\u5bf9\u5f00\u6e90LLM\u80fd\u529b\u7684\u671f\u671b\uff0c\u4ece\u800c\u6fc0\u53d1\u4e86\u4e00\u7cfb\u5217\u5de5\u4f5c\uff08Bai\u7b49\u4eba\uff0c2023\uff1bDu\u7b49\u4eba\uff0c2022\uff1bJiang\u7b49\u4eba\uff0c2023\uff09\u3002\u5176\u4e2d\uff0cLLaMA\u7cfb\u5217\u6a21\u578b\uff08Touvron\u7b49\u4eba\uff0c2023a\uff0cb\uff09\u5c24\u4e3a\u7a81\u51fa\u3002\u5b83\u6574\u5408\u4e86\u4e00\u7cfb\u5217\u5de5\u4f5c\uff0c\u521b\u5efa\u4e86\u4e00\u4e2a\u9ad8\u6548\u7a33\u5b9a\u7684\u67b6\u6784\uff0c\u6784\u5efa\u4e86\u4ece7B\u523070B\u53c2\u6570\u7684\u6027\u80fd\u826f\u597d\u7684\u6a21\u578b\u3002\u56e0\u6b64\uff0cLLaMA\u7cfb\u5217\u5df2\u6210\u4e3a\u5f00\u6e90\u6a21\u578b\u4e2d\u67b6\u6784\u548c\u6027\u80fd\u7684\u4e8b\u5b9e\u57fa\u51c6\u3002</p> <p>\u7ee7LLaMA\u4e4b\u540e\uff0c\u5f00\u6e90\u793e\u533a\u4e3b\u8981\u4e13\u6ce8\u4e8e\u8bad\u7ec3\u56fa\u5b9a\u5927\u5c0f\uff087B\u300113B\u300134B\u548c70B\uff09\u7684\u9ad8\u8d28\u91cf\u6a21\u578b\uff0c\u5f80\u5f80\u5ffd\u89c6\u4e86\u5bf9LLM\u7f29\u653e\u5b9a\u5f8b\u7684\u7814\u7a76\u63a2\u7d22\uff08Hoffmann\u7b49\u4eba\uff0c2022\uff1bKaplan\u7b49\u4eba\uff0c2020\uff09\u3002\u5c3d\u7ba1\u5982\u6b64\uff0c\u8003\u8651\u5230\u5f53\u524d\u7684\u5f00\u6e90\u6a21\u578b\u4ec5\u5904\u4e8e\u901a\u7528\u4eba\u5de5\u667a\u80fd\uff08AGI\uff09\u5f00\u53d1\u7684\u521d\u59cb\u9636\u6bb5\uff0c\u5bf9\u7f29\u653e\u5b9a\u5f8b\u7684\u7814\u7a76\u81f3\u5173\u91cd\u8981\u3002\u6b64\u5916\uff0c\u65e9\u671f\u7684\u7814\u7a76\uff08Hoffmann\u7b49\u4eba\uff0c2022\uff1bKaplan\u7b49\u4eba\uff0c2020\uff09\u5728\u8ba1\u7b97\u9884\u7b97\u589e\u52a0\u548c\u8d85\u53c2\u6570\u8ba8\u8bba\u672a\u5f97\u5230\u5145\u5206\u89e3\u51b3\u7684\u60c5\u51b5\u4e0b\uff0c\u5bf9\u6a21\u578b\u548c\u6570\u636e\u7684\u7f29\u653e\u5f97\u51fa\u4e86\u4e0d\u540c\u7684\u7ed3\u8bba\u3002\u5728\u672c\u6587\u4e2d\uff0c\u6211\u4eec\u5e7f\u6cdb\u7814\u7a76\u4e86\u8bed\u8a00\u6a21\u578b\u7684\u7f29\u653e\u884c\u4e3a\uff0c\u5e76\u5c06\u6211\u4eec\u7684\u53d1\u73b0\u5e94\u7528\u4e8e\u4e24\u79cd\u5e7f\u6cdb\u4f7f\u7528\u7684\u5927\u6a21\u578b\u914d\u7f6e\u53c2\u6570\uff0c\u53737B\u548c67B\u53c2\u6570\u6a21\u578b\u3002\u6211\u4eec\u7684\u7814\u7a76\u65e8\u5728\u4e3a\u5f00\u6e90LLM\u7684\u672a\u6765\u6269\u5c55\u5960\u5b9a\u57fa\u7840\uff0c\u4e3a\u8be5\u9886\u57df\u7684\u8fdb\u4e00\u6b65\u53d1\u5c55\u94fa\u5e73\u9053\u8def\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u6211\u4eec\u9996\u5148\u7814\u7a76\u4e86\u6279\u91cf\u5927\u5c0f\u548c\u5b66\u4e60\u7387\u7684\u7f29\u653e\u89c4\u5f8b\uff0c\u5e76\u53d1\u73b0\u4e86\u5b83\u4eec\u968f\u6a21\u578b\u5927\u5c0f\u7684\u53d8\u5316\u8d8b\u52bf\u3002\u5728\u6b64\u57fa\u7840\u4e0a\uff0c\u6211\u4eec\u5bf9\u6570\u636e\u548c\u6a21\u578b\u89c4\u6a21\u7684\u7f29\u653e\u89c4\u5f8b\u8fdb\u884c\u4e86\u5168\u9762\u7814\u7a76\uff0c\u6210\u529f\u63ed\u793a\u4e86\u6700\u4f73\u7684\u6a21\u578b/\u6570\u636e\u7f29\u653e\u5206\u914d\u7b56\u7565\uff0c\u5e76\u9884\u6d4b\u4e86\u6211\u4eec\u5927\u89c4\u6a21\u6a21\u578b\u7684\u9884\u671f\u6027\u80fd\u3002\u6b64\u5916\uff0c\u5728\u5f00\u53d1\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u53d1\u73b0\u4ece\u4e0d\u540c\u6570\u636e\u96c6\u5f97\u51fa\u7684\u7f29\u653e\u89c4\u5f8b\u5b58\u5728\u663e\u8457\u5dee\u5f02\u3002\u8fd9\u8868\u660e\u6570\u636e\u96c6\u7684\u9009\u62e9\u4f1a\u663e\u8457\u5f71\u54cd\u7f29\u653e\u884c\u4e3a\uff0c\u8fd9\u8868\u660e\u5728\u8de8\u6570\u636e\u96c6\u63a8\u5e7f\u7f29\u653e\u89c4\u5f8b\u65f6\u5e94\u8be5\u8c28\u614e\u3002</p> <p>\u5728\u6211\u4eec\u7684\u7f29\u653e\u5b9a\u5f8b\u7684\u6307\u5bfc\u4e0b\uff0c\u6211\u4eec\u4ece\u5934\u5f00\u59cb\u6784\u5efa\u5f00\u6e90\u5927\u578b\u8bed\u8a00\u6a21\u578b\uff0c\u5e76\u53d1\u5e03\u5c3d\u53ef\u80fd\u591a\u7684\u4fe1\u606f\u4f9b\u793e\u533a\u53c2\u8003\u3002\u6211\u4eec\u6536\u96c6\u4e862\u4e07\u4ebf\u4e2atoken\u7528\u4e8e\u9884\u8bad\u7ec3\uff0c\u4e3b\u8981\u662f\u4e2d\u6587\u548c\u82f1\u6587\u3002\u5728\u6a21\u578b\u7ea7\u522b\uff0c\u6211\u4eec\u901a\u5e38\u9075\u5faaLLaMA\u7684\u67b6\u6784\uff0c\u4f46\u7528\u591a\u6b65\u5b66\u4e60\u7387\u8c03\u5ea6\u5668\u66ff\u6362\u4e86\u4f59\u5f26\u5b66\u4e60\u7387\u8c03\u5ea6\u5668\uff0c\u5728\u4fdd\u6301\u6027\u80fd\u7684\u540c\u65f6\u4fc3\u8fdb\u4e86\u6301\u7eed\u8bad\u7ec3\u3002\u6211\u4eec\u4ece\u4e0d\u540c\u6765\u6e90\u6536\u96c6\u4e86100\u591a\u4e07\u4e2a\u76d1\u7763\u5fae\u8c03\uff08SFT\uff09\u6570\u636e\uff08\u6b27\u9633\u7b49\u4eba\uff0c2022\uff09\u3002\u672c\u6587\u5206\u4eab\u4e86\u6211\u4eec\u5728\u6570\u636e\u6d88\u878d\u6280\u672f\u4e2d\u4e0d\u540cSFT\u7b56\u7565\u548c\u53d1\u73b0\u7684\u7ecf\u9a8c\u3002\u6b64\u5916\uff0c\u6211\u4eec\u8fd8\u5229\u7528\u4e86\u76f4\u63a5\u504f\u597d\u4f18\u5316\uff08DPO\uff09\uff08Rafailov\u7b49\u4eba\uff0c2023\uff09\u6765\u63d0\u9ad8\u6a21\u578b\u7684\u4f1a\u8bdd\u6027\u80fd\u3002</p> <p>\u6211\u4eec\u4f7f\u7528\u6211\u4eec\u7684\u57fa\u7840\u6a21\u578b\u548c\u804a\u5929\u6a21\u578b\u8fdb\u884c\u5e7f\u6cdb\u7684\u8bc4\u4f30\u3002\u8bc4\u4f30\u7ed3\u679c\u8868\u660e\uff0cDeepSeek LLM\u5728\u5404\u79cd\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u90fd\u8d85\u8fc7\u4e86LLaMA-2 70B\uff0c\u7279\u522b\u662f\u5728\u4ee3\u7801\u3001\u6570\u5b66\u548c\u63a8\u7406\u9886\u57df\u3002\u7ee7SFT\u548cDPO\u4e4b\u540e\uff0cDeepSeek 67B\u804a\u5929\u6a21\u578b\u5728\u4e2d\u82f1\u6587\u5f00\u653e\u5f0f\u8bc4\u4f30\u4e2d\u7684\u8868\u73b0\u5747\u4f18\u4e8eGPT-3.5\u3002\u8fd9\u7a81\u663e\u4e86DeepSeek 67B\u5728\u751f\u6210\u9ad8\u8d28\u91cf\u54cd\u5e94\u548c\u7528\u4e24\u79cd\u8bed\u8a00\u8fdb\u884c\u6709\u610f\u4e49\u7684\u5bf9\u8bdd\u65b9\u9762\u7684\u5353\u8d8a\u6027\u80fd\u3002\u6b64\u5916\uff0c\u5b89\u5168\u8bc4\u4f30\u8868\u660e\uff0cDeepSeek 67B Chat\u5728\u5b9e\u8df5\u4e2d\u53ef\u4ee5\u63d0\u4f9b\u65e0\u5bb3\u7684\u54cd\u5e94\u3002</p> <p>\u5728\u672c\u6587\u7684\u5176\u4f59\u90e8\u5206\uff0c\u6211\u4eec\u9996\u5148\u5728\u7b2c2\u8282\u4ecb\u7ecdDeepSeek LLM\u7684\u9884\u8bad\u7ec3\u57fa\u672c\u6982\u5ff5\uff0c\u5305\u62ec\u6570\u636e\u7684\u7ec4\u6210\u3001\u6a21\u578b\u67b6\u6784\u3001\u57fa\u7840\u8bbe\u65bd\u548c\u8d85\u53c2\u6570\u3002\u5728\u7b2c3\u8282\u4e2d\uff0c\u6211\u4eec\u8be6\u7ec6\u89e3\u91ca\u4e86\u6211\u4eec\u53d1\u73b0\u7684\u7f29\u653e\u5b9a\u5f8b\u53ca\u5176\u542b\u4e49\u3002\u6b64\u5916\uff0c\u6211\u4eec\u8ba8\u8bba\u4e86\u9009\u62e9\u9884\u8bad\u7ec3\u8d85\u53c2\u6570\u80cc\u540e\u7684\u57fa\u672c\u539f\u7406\uff0c\u540c\u65f6\u8003\u8651\u4e86\u4ece\u7f29\u653e\u5b9a\u5f8b\u5206\u6790\u4e2d\u83b7\u5f97\u7684\u89c1\u89e3\u3002\u5728\u7b2c4\u8282\u4e2d\uff0c\u6211\u4eec\u8ba8\u8bba\u4e86\u6211\u4eec\u7684\u5fae\u8c03\u65b9\u6cd5\uff0c\u5305\u62ecSFT\u548cDPO\u9636\u6bb5\u5fae\u8c03\u6570\u636e\u7684\u7ec4\u6210\u548c\u5177\u4f53\u65b9\u6cd5\u3002\u7136\u540e\uff0c\u6211\u4eec\u5728\u7b2c5\u8282\u4e2d\u4ecb\u7ecd\u4e86DeepSeek LLM\u7684\u8be6\u7ec6\u8bc4\u4f30\u7ed3\u679c\uff0c\u6db5\u76d6\u4e86\u57fa\u7840\u6a21\u578b\u548c\u804a\u5929\u6a21\u578b\uff0c\u4ee5\u53ca\u5b83\u4eec\u5728\u5f00\u653e\u5f0f\u8bc4\u4f30\u548c\u5b89\u5168\u8bc4\u4f30\u4e2d\u7684\u8868\u73b0\u3002\u6700\u540e\uff0c\u6211\u4eec\u5728\u7b2c6\u8282\u8ba8\u8bba\u4e86DeepSeek LLM\u7684\u5f53\u524d\u5c40\u9650\u6027\u548c\u672a\u6765\u65b9\u5411\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseekllm/DeepSeek_LLM_Scaling_Open_Source_Language_Models_with_Longtermism/#2","title":"2 \u9884\u8bad\u7ec3","text":""},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseekllm/DeepSeek_LLM_Scaling_Open_Source_Language_Models_with_Longtermism/#21","title":"2.1 \u6570\u636e","text":"<p>\u6211\u4eec\u7684\u4e3b\u8981\u76ee\u6807\u662f\u5168\u9762\u589e\u5f3a\u6570\u636e\u96c6\u7684\u4e30\u5bcc\u6027\u548c\u591a\u6837\u6027\u3002\u6211\u4eec\u4ece\u6709\u4ef7\u503c\u7684\u6765\u6e90\u83b7\u5f97\u4e86\u5b9d\u8d35\u7684\u89c1\u89e3\uff0c\u5982\uff08Computer\uff0c2023\uff1bGao et al\uff0c2020\uff1bPenedo et al\uff0c2023\uff1bTouvron et al\uff0c2023a\uff09\u3002\u4e3a\u4e86\u5b9e\u73b0\u8fd9\u4e9b\u76ee\u6807\uff0c\u6211\u4eec\u5c06\u6211\u4eec\u7684\u65b9\u6cd5\u5206\u4e3a\u4e09\u4e2a\u57fa\u672c\u9636\u6bb5\uff1a\u53bb\u91cd\u3001\u8fc7\u6ee4 \u548c \u91cd\u65b0\u6df7\u5408\u3002\u53bb\u91cd\u548c\u91cd\u65b0\u6df7\u5408\u9636\u6bb5\u901a\u8fc7\u91c7\u6837\u72ec\u7acb\u7684\u6837\u672c\u6765\u786e\u4fdd\u6570\u636e\u7684\u591a\u6837\u5316\u8868\u793a\u3002\u8fc7\u6ee4\u9636\u6bb5\u63d0\u9ad8\u4e86\u4fe1\u606f\u5bc6\u5ea6\uff0c\u4ece\u800c\u5b9e\u73b0\u4e86\u66f4\u9ad8\u6548\u548c\u6709\u6548\u7684\u6a21\u578b\u8bad\u7ec3\u3002</p> <p>\u6211\u4eec\u91c7\u53d6\u4e86\u6fc0\u8fdb\u7684\u53bb\u91cd\u7b56\u7565\uff0c\u6269\u5927\u4e86\u53bb\u91cd\u7684\u8303\u56f4\u3002\u6211\u4eec\u7684\u5206\u6790\u8868\u660e\uff0c\u4e0e\u5355\u4e2a\u6587\u4ef6\u53bb\u91cd\u76f8\u6bd4\uff0c\u5bf9\u6574\u4e2aCommon Crawl\u8bed\u6599\u5e93\u8fdb\u884c\u53bb\u91cd\u4f1a\u5bfc\u81f4\u66f4\u9ad8\u7684\u53bb\u91cd\u7387\u3002\u88681\u663e\u793a\uff0c\u5728\u6574\u4f5391\u4e2a\u6587\u4ef6\u8fdb\u884c\u53bb\u91cd\u53ef\u4ee5\u6d88\u9664\u6bd4\u5355\u4e2a\u6587\u4ef6\u591a\u56db\u500d\u7684\u6587\u6863\u3002</p> <p></p> <p>\u5728\u8fc7\u6ee4\u9636\u6bb5\uff0c\u6211\u4eec\u4e13\u6ce8\u4e8e\u4e3a\u6587\u6863\u8d28\u91cf\u8bc4\u4f30\u5236\u5b9a\u7a33\u5065\u7684\u6807\u51c6\u3002\u8fd9\u6d89\u53ca\u5230\u7ed3\u5408\u8bed\u8a00\u548c\u8bed\u4e49\u8bc4\u4f30\u7684\u8be6\u7ec6\u5206\u6790\uff0c\u4ece\u5355\u4e2a\u6587\u6863\u548c\u5168\u5c40\u6587\u6863\u7684\u89d2\u5ea6\u63d0\u4f9b\u6570\u636e\u8d28\u91cf\u7684\u89c6\u56fe\u3002\u5728\u91cd\u65b0\u6df7\u5408\u9636\u6bb5\uff0c\u6211\u4eec\u8c03\u6574\u4e86\u7528\u4e8e\u89e3\u51b3\u6570\u636e\u4e0d\u5e73\u8861\u7684\u65b9\u6cd5\uff0c\u91cd\u70b9\u662f\u589e\u52a0\u4ee3\u8868\u6027\u4e0d\u8db3\u7684\u9886\u57df\u7684\u6570\u636e\u3002\u8fd9\u4e00\u8c03\u6574\u76ee\u7684\u662f\u5b9e\u73b0\u66f4\u5e73\u8861\u548c\u66f4\u5177\u5305\u5bb9\u6027\u7684\u6570\u636e\u96c6\uff0c\u786e\u4fdd\u6570\u636e\u96c6\u5145\u5206\u4ee3\u8868\u4e0d\u540c\u7684\u89c2\u70b9\u548c\u4fe1\u606f\u3002</p> <p>\u5bf9\u4e8e\u6211\u4eec\u7684 tokenizer\uff0c\u6211\u4eec\u57fa\u4e8e tokenizers \u5e93\uff08Huggingface Team\uff0c2019\uff09\u5b9e\u73b0\u4e86 Byte-level Byte-Pair\uff08BBPE\uff09\u7b97\u6cd5\u3002\u9884\u6807\u5206\u8bcd\u88ab\u7528\u6765\u9632\u6b62\u6765\u81ea\u4e0d\u540c\u5b57\u7b26\u7c7b\u522b\u7684 token \u5408\u5e76\uff0c\u5982\u6362\u884c\u7b26\u3001\u6807\u70b9\u7b26\u53f7\u548c\u4e2d\u65e5\u97e9\uff08CJK\uff09\u7b26\u53f7\uff0c\u7c7b\u4f3c\u4e8eGPT-2\uff08Radford\u7b49\u4eba\uff0c2019\uff09\u3002\u6211\u4eec\u8fd8\u9009\u62e9\u6309\u7167\uff08Touvron\u7b49\u4eba\uff0c2023a\uff0cb\uff09\u4e2d\u4f7f\u7528\u7684\u65b9\u6cd5\u5c06\u6570\u5b57\u62c6\u5206\u4e3a\u5355\u4e2a\u6570\u5b57\u3002\u6839\u636e\u6211\u4eec\u4e4b\u524d\u7684\u7ecf\u9a8c\uff0c\u6211\u4eec\u5c06\u8bcd\u8868\u4e2d\u7684token\u6570\u91cf\u8bbe\u7f6e\u4e3a100000\u3002tokenizer \u5728\u5927\u7ea624GB\u7684\u591a\u8bed\u8a00\u8bed\u6599\u5e93\u4e0a\u8fdb\u884c\u4e86\u8bad\u7ec3\uff0c\u6211\u4eec\u752815\u4e2a\u7279\u6b8a token \u6269\u5c55\u4e86\u6700\u7ec8\u8bcd\u8868\uff0c\u4f7f\u603b\u8bcd\u8868\u5927\u5c0f\u8fbe\u5230100015\u3002\u4e3a\u4e86\u786e\u4fdd\u8bad\u7ec3\u671f\u95f4\u7684\u8ba1\u7b97\u6548\u7387\uff0c\u5e76\u4e3a\u672a\u6765\u53ef\u80fd\u9700\u8981\u7684\u4efb\u4f55\u5176\u4ed6\u7279\u6b8a token \u9884\u7559\u7a7a\u95f4\uff0c\u6211\u4eec\u5c06\u6a21\u578b\u7684\u8bcd\u8868\u6570\u76ee\u914d\u7f6e\u4e3a102400\u7528\u4e8e\u8bad\u7ec3\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseekllm/DeepSeek_LLM_Scaling_Open_Source_Language_Models_with_Longtermism/#22","title":"2.2 \u6a21\u578b\u7ed3\u6784","text":"<p>DeepSeek LLM\u6a21\u578b\u7ed3\u6784\u7684\u5fae\u89c2\u8bbe\u8ba1\u5728\u5f88\u5927\u7a0b\u5ea6\u4e0a\u9075\u5faa\u4e86LLaMA\u7684\u8bbe\u8ba1\uff08Touvron\u7b49\u4eba\uff0c2023a\uff0cb\uff09\uff0c\u91c7\u7528\u5177\u6709RMSNorm\uff08Zhang\u548cSennrich\uff0c2019\uff09\u529f\u80fd\u7684 pre-norm \u7ed3\u6784\uff0c\u5e76\u4f7f\u7528SwiGLU\uff08Shazeer\uff0c2020\uff09\u4f5c\u4e3a\u524d\u9988\u7f51\u7edc\uff08FFN\uff09\u7684\u6fc0\u6d3b\u51fd\u6570\uff0c\u4e2d\u95f4\u5c42\u7ef4\u5ea6\u4e3a\\(\\frac{8}{3}d_{model}\\)\u3002\u5b83\u8fd8\u7ed3\u5408\u4e86\u65cb\u8f6c\u4f4d\u7f6e\u7f16\u7801\uff08Su\u7b49\u4eba\uff0c2024\uff09\u7528\u4e8e\u4f4d\u7f6e\u7f16\u7801\u3002\u4e3a\u4e86\u4f18\u5316\u63a8\u7406\u6210\u672c\uff0c67B\u6a21\u578b\u4f7f\u7528\u5206\u7ec4\u67e5\u8be2\u6ce8\u610f\u529b\uff08GQA\uff09\uff08Ainslie\u7b49\u4eba\uff0c2023\uff09\u800c\u4e0d\u662f\u4f20\u7edf\u7684\u591a\u5934\u6ce8\u610f\u529b\uff08MHA\uff09\u3002</p> <p>\u7136\u800c\uff0c\u5728\u5b8f\u89c2\u8bbe\u8ba1\u65b9\u9762\uff0cDeepSeek LLM\u7565\u6709\u4e0d\u540c\u3002\u5177\u4f53\u6765\u8bf4\uff0cDeepSeek LLM 7B\u662f\u4e00\u4e2a30\u5c42\u7684\u7f51\u7edc\uff0c\u800cDeepSeek LLM 67B\u670995\u5c42\u3002\u8fd9\u4e9b\u7f51\u7edc\u5c42\u7684\u8c03\u6574\uff0c\u5728\u4fdd\u6301\u4e0e\u5176\u4ed6\u5f00\u6e90\u6a21\u578b\u7684\u53c2\u6570\u4e00\u81f4\u6027\u7684\u540c\u65f6\uff0c\u4e5f\u6709\u52a9\u4e8e\u6a21\u578bpipeline \u5e76\u884c\uff0c\u4ee5\u4f18\u5316\u8bad\u7ec3\u548c\u63a8\u7406\u3002</p> <p>\u4e0e\u5927\u591a\u6570\u4f7f\u7528\u5206\u7ec4\u67e5\u8be2\u6ce8\u610f\u529b\uff08GQA\uff09\u7684\u5de5\u4f5c\u4e0d\u540c\uff0c\u6211\u4eec\u5728\u7f51\u7edc\u6df1\u5ea6\u4e0a\u6269\u5c55\u4e8667B\u6a21\u578b\u7684\u53c2\u6570\uff0c\u800c\u4e0d\u662f\u6269\u5927FFN\u5c42\u4e2d\u95f4\u5bbd\u5ea6\u7684\u5e38\u89c1\u505a\u6cd5\uff0c\u76ee\u7684\u662f\u4e3a\u4e86\u83b7\u5f97\u66f4\u597d\u7684\u6548\u679c\u3002\u8be6\u7ec6\u7684\u7f51\u7edc\u914d\u7f6e\u89c1\u88682\u3002</p> <p></p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseekllm/DeepSeek_LLM_Scaling_Open_Source_Language_Models_with_Longtermism/#23","title":"2.3 \u8d85\u53c2\u6570","text":"<p>DeepSeek LLM\u7684\u521d\u59cb\u5316\u6807\u51c6\u504f\u5dee\u4e3a0.006\uff0c\u5e76\u4f7f\u7528AdamW\u4f18\u5316\u5668\u8fdb\u884c\u8bad\u7ec3\uff08Loshchilov\u548cHutter\uff0c2017\uff09\uff0c\u4f7f\u7528\u4ee5\u4e0b\u8d85\u53c2\u6570\uff1a\\(\\beta = 0.9, \\beta_{2} = 0.95\\), \u5e76\u4e14 \\(weight\\_decay=0.1\\)\u3002</p> <p>\u5728\u9884\u8bad\u7ec3\u671f\u95f4\u91c7\u7528\u591a\u6b65\u5b66\u4e60\u7387\u8c03\u5ea6\u5668\uff0c\u800c\u4e0d\u662f\u5178\u578b\u7684\u4f59\u5f26\u8c03\u5ea6\u5668\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u6a21\u578b\u7684\u5b66\u4e60\u7387\u57282000\u4e2a\u9884\u70ed\u6b65\u9aa4\u540e\u8fbe\u5230\u6700\u5927\u503c\uff0c\u7136\u540e\u5728\u5904\u7406\u4e8680%\u7684\u8bad\u7ec3\u4ee4\u724c\u540e\u964d\u81f3\u6700\u5927\u503c\u768431.6%\u3002\u572890%\u7684 token \u4e4b\u540e\uff0c\u5b83\u8fdb\u4e00\u6b65\u964d\u4f4e\u5230\u6700\u5927\u503c\u768410%\u3002\u8bad\u7ec3\u9636\u6bb5\u7684\u68af\u5ea6\u526a\u88c1\u8bbe\u7f6e\u4e3a1.0\u3002</p> <p>\u6839\u636e\u6211\u4eec\u7684\u5b9e\u8bc1\u7814\u7a76\u7ed3\u679c\uff0c\u6211\u4eec\u89c2\u5bdf\u5230\uff0c\u5728\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\u5c3d\u7ba1\u635f\u5931\u964d\u4f4e\u8d8b\u52bf\u5b58\u5728\u4e00\u70b9\u5dee\u5f02\uff0c\u4f7f\u7528\u591a\u6b65\u5b66\u4e60\u7387\u8c03\u5ea6\u5668\u7684\u6700\u7ec8\u6027\u80fd\u4e0e\u4f59\u5f26\u8c03\u5ea6\u5668\u7684\u6027\u80fd\u57fa\u672c\u4e00\u81f4\uff0c\u5982\u56fe1\uff08a\uff09\u6240\u793a\u3002\u5f53\u5728\u4fdd\u6301\u6a21\u578b\u5927\u5c0f\u56fa\u5b9a\u7684\u540c\u65f6\u8c03\u6574\u8bad\u7ec3\u89c4\u6a21\u65f6\uff0c\u591a\u6b65\u5b66\u4e60\u7387\u8c03\u5ea6\u5668\u5141\u8bb8\u91cd\u7528\u7b2c\u4e00\u9636\u6bb5\u7684\u8bad\u7ec3\uff0c\u4e3a\u8fde\u7eed\u8bad\u7ec3\u63d0\u4f9b\u4e86\u72ec\u7279\u7684\u4fbf\u5229\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u9009\u62e9\u4e86\u591a\u6b65\u5b66\u4e60\u7387\u8c03\u5ea6\u5668\u4f5c\u4e3a\u6211\u4eec\u7684\u9ed8\u8ba4\u8bbe\u7f6e\u3002\u6211\u4eec\u8fd8\u5728\u56fe1\uff08b\uff09\u4e2d\u8bc1\u660e\uff0c\u8c03\u6574\u591a\u6b65\u5b66\u4e60\u7387\u8c03\u5ea6\u5668\u4e2d\u4e0d\u540c\u9636\u6bb5\u7684\u6bd4\u4f8b\u53ef\u4ee5\u4ea7\u751f\u7a0d\u597d\u7684\u6027\u80fd\u3002\u7136\u800c\uff0c\u4e3a\u4e86\u5e73\u8861\u6301\u7eed\u8bad\u7ec3\u4e2d\u7684\u91cd\u7528\u7387\u548c\u6a21\u578b\u6027\u80fd\uff0c\u6211\u4eec\u9009\u62e9\u4e86\u4e0a\u8ff0\u4e09\u4e2a\u9636\u6bb5\u5206\u522b\u4e3a80%\u300110%\u548c10%\u7684\u5206\u5e03\u3002 \u6279\u91cf\u5927\u5c0f\u548c\u5b66\u4e60\u7387\u968f\u6a21\u578b\u5927\u5c0f\u800c\u53d8\u5316\u30027B\u548c67B\u6a21\u578b\u9884\u8bad\u7ec3\u9636\u6bb5\u7684\u5177\u4f53\u53c2\u6570\u89c1\u88682\u3002</p> <p></p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseekllm/DeepSeek_LLM_Scaling_Open_Source_Language_Models_with_Longtermism/#24","title":"2.4. \u57fa\u7840\u8bbe\u65bd","text":"<p>\u6211\u4eec\u4f7f\u7528\u540d\u4e3aHAI-LLM\uff08High flyer\uff0c2023\uff09\u7684\u9ad8\u6548\u8f7b\u91cf\u7ea7\u8bad\u7ec3\u6846\u67b6\u6765\u8bad\u7ec3\u548c\u8bc4\u4f30\u5927\u578b\u8bed\u8a00\u6a21\u578b\u3002\u6570\u636e\u5e76\u884c\u6027\u3001\u5f20\u91cf\u5e76\u884c\u6027\u3001\u5e8f\u5217\u5e76\u884c\u6027\u548c1F1B\u6d41\u6c34\u7ebf\u5e76\u884c\u6027\u88ab\u96c6\u6210\u5230\u8fd9\u4e2a\u6846\u67b6\u4e2d\uff0c\u5c31\u50cf\u5728Megatron\u4e2d\u6240\u505a\u7684\u90a3\u6837\uff08Korthikanti\u7b49\u4eba\uff0c2023\uff1bNarayanan\u7b49\u4eba\uff0c2021\uff1bShoeybi\u7b49\u4eba\uff0c2019\uff09\u3002\u6211\u4eec\u8fd8\u5229\u7528flash\u6ce8\u610f\u529b\uff08Dao\uff0c2023\uff1bDao\u7b49\u4eba\uff0c2022\uff09\u6280\u672f\u6765\u63d0\u9ad8\u786c\u4ef6\u5229\u7528\u7387\u3002ZeRO-1\uff08Rajbhandari\u7b49\u4eba\uff0c2020\uff09\u88ab\u7528\u6765\u5728\u6570\u636e\u5e76\u884c\u5217\u4e0a\u5212\u5206\u4f18\u5316\u5668\u72b6\u6001\u3002\u8fd8\u52aa\u529b\u91cd\u53e0\u8ba1\u7b97\u548c\u901a\u4fe1\uff0c\u4ee5\u5c3d\u91cf\u51cf\u5c11\u989d\u5916\u7684\u7b49\u5f85\u5f00\u9500\uff0c\u5305\u62ecZeRO-1\u4e2d\u6700\u540e\u4e00\u4e2a\u5fae\u6279\u5904\u7406\u7684\u53cd\u5411\u8fc7\u7a0b\u548c\u51cf\u5c11\u5206\u6563\u64cd\u4f5c\uff0c\u4ee5\u53caGEMM\u8ba1\u7b97\u548c\u987a\u5e8f\u5e76\u884c\u7684\u6240\u6709\u6536\u96c6/\u51cf\u5c11\u5206\u6563\u3002\u4e00\u4e9b\u5c42/\u64cd\u4f5c\u7b26\u88ab\u878d\u5408\u4ee5\u52a0\u5feb\u8bad\u7ec3\u901f\u5ea6\uff0c\u5305\u62ecLayerNorm\u3001GEMM\uff08\u53ea\u8981\u53ef\u80fd\uff09\u548cAdam\u66f4\u65b0\u3002\u4e3a\u4e86\u63d0\u9ad8\u6a21\u578b\u8bad\u7ec3\u7684\u7a33\u5b9a\u6027\uff0c\u6211\u4eec\u4ee5bf16\u7cbe\u5ea6\u8bad\u7ec3\u6a21\u578b\uff0c\u4f46\u4ee5fp32\u7cbe\u5ea6\u7d2f\u79ef\u68af\u5ea6\u3002\u6267\u884c\u539f\u5730\u4ea4\u53c9\u71b5\u4ee5\u51cf\u5c11GPU\u5185\u5b58\u6d88\u8017\uff0c\u5373\uff1a\u6211\u4eec\u5728\u4ea4\u53c9\u71b5CUDA\u5185\u6838\u4e2d\u5c06bf16 logits\u52a8\u6001\u8f6c\u6362\u4e3afp32\u7cbe\u5ea6\uff08\u800c\u4e0d\u662f\u5728HBM\u4e2d\u9884\u5148\u8f6c\u6362\uff09\uff0c\u8ba1\u7b97\u76f8\u5e94\u7684bf16\u68af\u5ea6\uff0c\u5e76\u7528\u5176\u68af\u5ea6\u8986\u76d6logits\u3002\u00ac\u00ac \u6a21\u578b\u6743\u91cd\u548c\u4f18\u5316\u5668\u72b6\u6001\u6bcf5\u5206\u949f\u5f02\u6b65\u4fdd\u5b58\u4e00\u6b21\uff0c\u8fd9\u610f\u5473\u7740\u5728\u5076\u5c14\u51fa\u73b0\u786c\u4ef6\u6216\u7f51\u7edc\u6545\u969c\u7684\u6700\u574f\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u5c06\u635f\u5931\u4e0d\u8d85\u8fc75\u5206\u949f\u7684\u8bad\u7ec3\u65f6\u95f4\u3002\u8fd9\u4e9b\u4e34\u65f6\u6a21\u578b\u68c0\u67e5\u70b9\u4f1a\u5b9a\u671f\u6e05\u7406\uff0c\u4ee5\u907f\u514d</p> <p>\u6d88\u8017\u4e86\u592a\u591a\u7684\u5b58\u50a8\u7a7a\u95f4\u3002\u6211\u4eec\u8fd8\u652f\u6301\u4ece\u4e0d\u540c\u76843D\u5e76\u884c\u914d\u7f6e\u6062\u590d\u8bad\u7ec3\uff0c\u4ee5\u5e94\u5bf9\u8ba1\u7b97\u96c6\u7fa4\u8d1f\u8f7d\u7684\u52a8\u6001\u53d8\u5316\u3002 \u81f3\u4e8e\u8bc4\u4f30\uff0c\u6211\u4eec\u5728\u751f\u6210\u4efb\u52a1\u4e2d\u4f7f\u7528vLLM\uff08Kwon\u7b49\u4eba\uff0c2023\uff09\uff0c\u5728\u975e\u751f\u6210\u4efb\u52a1\u4e2d\u91c7\u7528\u8fde\u7eed\u6279\u5904\u7406\uff0c\u4ee5\u907f\u514d\u624b\u52a8\u8c03\u6574\u6279\u5927\u5c0f\u5e76\u51cf\u5c11\u4ee4\u724c\u586b\u5145\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseekllm/DeepSeek_LLM_Scaling_Open_Source_Language_Models_with_Longtermism/#3","title":"3 \u7f29\u653e\u5b9a\u5f8b","text":"<p>\u5bf9\u7f29\u653e\u5b9a\u5f8b\u7684\u7814\u7a76\uff08Hestness\u7b49\u4eba\uff0c2017\uff09\u65e9\u4e8e\u5927\u578b\u8bed\u8a00\u6a21\u578b\u7684\u51fa\u73b0\u3002\u7f29\u653e\u5b9a\u5f8b\uff08Henighan\u7b49\u4eba\uff0c2020\uff1bHoffmann\u7b49\u4eba\uff0c2022\uff1bKaplan\u7b49\u4eba\uff0c2020\uff09\u8868\u660e\uff0c\u968f\u7740\u8ba1\u7b97\u9884\u7b97\u7684\u589e\u52a0\u5230 \\(C\\)\uff0c\u6a21\u578b\u5bb9\u91cf\\(N\\), \u6570\u636e\u89c4\u6a21 \\(D\\)\uff0c\u6a21\u578b\u6027\u80fd\u53ef\u4ee5\u5f97\u5230\u53ef\u9884\u6d4b\u7684\u63d0\u9ad8\u3002 \u5f53\u6a21\u578b\u5bb9\u91cf\u7531\u6a21\u578b\u53c2\u6570 \\(N\\) \u8868\u793a\uff0c\u6570\u636e\u5bb9\u91cf\u8868\u793a\u4e3a \\(D\\)\uff0ctoken \u7684\u6570\u91cf \\(C\\) \u53ef\u4ee5\u8fd1\u4f3c\u4e3a \\(C = 6ND\\)\u3002\u56e0\u6b64\uff0c\u5728\u589e\u52a0\u7b97\u529b\u7684\u540c\u65f6\uff0c\u5982\u4f55\u4f18\u5316\u6a21\u578b\u53c2\u6570\u548c\u6570\u636e\u89c4\u6a21\u4e4b\u95f4\u7684\u5206\u914d\u4e5f\u662f\u7f29\u653e\u5b9a\u5f8b\u7684\u4e00\u4e2a\u5173\u952e\u7814\u7a76\u76ee\u6807\u3002</p> <p>\u968f\u7740LLM\u7684\u53d1\u5c55\uff08Dai\u7b49\u4eba\uff0c2019\uff1bRadford\u7b49\u4eba\uff0c2019\uff09\uff0c\u66f4\u5927\u7684\u6a21\u578b\u5b9e\u73b0\u4e86\u610f\u60f3\u4e0d\u5230\u7684\u663e\u8457\u6027\u80fd\u6539\u8fdb\uff0c\u5c06\u7f29\u653e\u5b9a\u5f8b\u7684\u7814\u7a76\u63a8\u5411\u4e86\u4e00\u4e2a\u65b0\u7684\u9ad8\u5cf0\u3002\u7f29\u653e\u5b9a\u5f8b\u7684\u7ed3\u679c\u8868\u660e\uff0c\u6269\u5927\u7b97\u529b\u6301\u7eed\u4ea7\u751f\u663e\u8457\u7684\u6536\u76ca\uff0c\u8fd9\u8fdb\u4e00\u6b65\u9f13\u52b1\u4e86\u6a21\u578b\u89c4\u6a21\u7684\u589e\u52a0\uff08Brown\u7b49\u4eba\uff0c2020\uff1bSmith\u7b49\u4eba\uff0c2022\uff09\u3002</p> <p>\u7136\u800c\uff0c\u5982\u88684\u6240\u793a\uff0c\u5173\u4e8e\u6700\u4f18\u6a21\u578b/\u6570\u636e\u7f29\u653e\u5206\u914d\u7b56\u7565\u7684\u65e9\u671f\u5de5\u4f5c\uff08Hoffmann\u7b49\u4eba\uff0c2022\uff1bKaplan\u7b49\u4eba\uff0c2020\uff09\u5f97\u51fa\u4e86\u4e0d\u540c\u7684\u7ed3\u8bba\uff0c\u8fd9\u5f15\u53d1\u4e86\u4eba\u4eec\u5bf9\u7f29\u653e\u5b9a\u5f8b\u6cdb\u5316\u6027\u7684\u6000\u7591\u3002\u6b64\u5916\uff0c\u8fd9\u4e9b\u7814\u7a76\u5f80\u5f80\u7f3a\u4e4f\u5bf9\u8d85\u53c2\u6570\u8bbe\u7f6e\u7684\u5b8c\u6574\u63cf\u8ff0\uff0c\u8fd9\u4f7f\u5f97\u5728\u4e0d\u540c\u8ba1\u7b97\u9884\u7b97\u4e0b\u7684\u6a21\u578b\u662f\u5426\u8fbe\u5230\u6700\u4f73\u6027\u80fd\u53d8\u5f97\u4e0d\u786e\u5b9a\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u5728\u672c\u8282\u4e2d\u91cd\u65b0\u5ba1\u89c6\u4e86\u7f29\u653e\u5b9a\u5f8b\uff0c\u4ee5\u89e3\u51b3\u8fd9\u4e9b\u4e0d\u786e\u5b9a\u6027\uff0c\u5e76\u786e\u4fdd\u6211\u4eec\u8d70\u5728\u6709\u6548\u6269\u5927\u8ba1\u7b97\u89c4\u6a21\u7684\u6b63\u786e\u9053\u8def\u4e0a\uff0c\u8fd9\u53cd\u6620\u4e86\u957f\u671f\u524d\u666f\uff0c\u662f\u5f00\u53d1\u4e0d\u65ad\u6539\u8fdb\u6a21\u578b\u7684\u5173\u952e\u3002</p> <p></p> <p>\u4e3a\u4e86\u786e\u4fdd\u4e0d\u540c\u8ba1\u7b97\u9884\u7b97\u4e0b\u7684\u6a21\u578b\u80fd\u591f\u8fbe\u5230\u6700\u4f73\u6027\u80fd\uff0c\u6211\u4eec\u9996\u5148\u7814\u7a76\u4e86\u8d85\u53c2\u6570\u7684\u7f29\u653e\u89c4\u5f8b\u3002\u6839\u636e\u7ecf\u9a8c\uff0c\u5df2\u7ecf\u89c2\u5bdf\u5230\uff0c\u5f53\u6539\u53d8\u8ba1\u7b97\u9884\u7b97\u65f6\uff0c\u8bad\u7ec3\u671f\u95f4\u5927\u591a\u6570\u53c2\u6570\u7684\u6700\u4f73\u503c\u4e0d\u4f1a\u6539\u53d8\u3002\u56e0\u6b64\uff0c\u8fd9\u4e9b\u53c2\u6570\u4e0e\u7b2c2.3\u8282\u4e2d\u6982\u8ff0\u7684\u53c2\u6570\u4e00\u81f4\uff0c\u5e76\u4e14\u5728\u4e0d\u540c\u7684\u8ba1\u7b97\u9884\u7b97\u4e2d\u4fdd\u6301\u4e0d\u53d8\u3002\u7136\u800c\uff0c\u5bf9\u6027\u80fd\u5f71\u54cd\u6700\u5927\u7684\u8d85\u53c2\u6570\uff0c\u5373\u6279\u5904\u7406\u5927\u5c0f\u548c\u5b66\u4e60\u7387\uff0c\u8fdb\u884c\u4e86\u91cd\u65b0\u68c0\u67e5\u3002</p> <p>\u65e9\u671f\u7684\u5de5\u4f5c\uff08Goyal\u7b49\u4eba\uff0c2017\uff1bMcCandlish\u7b49\u4eba\uff0c2018\uff1bShallue\u7b49\u4eba\uff0c2019\uff1bSmith\u7b49\u4eba\uff0c2017\uff0cZhang\u7b49\u4eba\uff0c2019\uff09\u4e3a\u8bbe\u7f6e\u6279\u91cf\u5927\u5c0f\u548c\u5b66\u4e60\u7387\u63d0\u4f9b\u4e86\u4e00\u4e9b\u7ecf\u9a8c\u89c2\u5bdf\uff0c\u4f46\u6211\u4eec\u53d1\u73b0\u8fd9\u4e9b\u89c2\u5bdf\u5728\u6211\u4eec\u7684\u521d\u6b65\u5b9e\u9a8c\u4e2d\u9002\u7528\u6027\u6709\u9650\u3002\u901a\u8fc7\u5927\u91cf\u5b9e\u9a8c\uff0c\u6211\u4eec\u6a21\u62df\u4e86\u8ba1\u7b97\u9884\u7b97\u4e4b\u95f4\u7684\u5e42\u5f8b\u5173\u7cfb\ud835\udc36 \u4ee5\u53ca\u6700\u4f73\u6279\u91cf\u5927\u5c0f\u548c\u5b66\u4e60\u7387\u3002\u8fd9\u79cd\u5173\u7cfb\uff0c\u6211\u4eec\u79f0\u4e4b\u4e3a\u8d85\u53c2\u6570\u7684\u7f29\u653e\u5b9a\u5f8b\uff0c\u4e3a\u786e\u5b9a\u6700\u4f18\u8d85\u53c2\u6570\u63d0\u4f9b\u4e86\u4e00\u4e2a\u7ecf\u9a8c\u6846\u67b6\u3002\u8fd9\u79cd\u65b9\u6cd5\u786e\u4fdd\u8de8\u4e0d\u540c\u8ba1\u7b97\u9884\u7b97\u7684\u6a21\u578b\u80fd\u591f\u8fbe\u5230\u63a5\u8fd1\u6700\u4f73\u7684\u6027\u80fd\u3002 \u7136\u540e\uff0c\u6211\u4eec\u7814\u7a76\u4e86\u6a21\u578b\u548c\u6570\u636e\u5c3a\u5ea6\u7684\u7f29\u653e\u89c4\u5f8b\u3002\u4e3a\u4e86\u964d\u4f4e\u5b9e\u9a8c\u6210\u672c\u548c\u62df\u5408\u96be\u5ea6\uff0c\u6211\u4eec\u91c7\u7528\u4e86Chinchilla\u7684IsoFLOP\u8f6e\u5ed3\u65b9\u6cd5\uff08Hoffmann\u7b49\u4eba\uff0c2022\uff09\u6765\u62df\u5408\u7f29\u653e\u66f2\u7ebf\u3002\u4e3a\u4e86\u66f4\u51c6\u786e\u5730\u8868\u793a\u6a21\u578b\u6bd4\u4f8b\uff0c\u6211\u4eec\u4f7f\u7528\u4e86\u4e00\u79cd\u65b0\u7684\u6a21\u578b\u6bd4\u4f8b\u8868\u793a\u6cd5\uff0c\u5373\u975e\u5d4c\u5165FLOP/token\ud835\udc40, \u66ff\u6362\u4e4b\u524d\u4f7f\u7528\u7684\u6a21\u578b\u53c2\u6570\ud835\udc41, \u5e76\u7528\u8fd1\u4f3c\u8ba1\u7b97\u9884\u7b97\u516c\u5f0f\u4ee3\u66ff\ud835\udc36 = 6\ud835\udc41 \ud835\udc37</p> <p>\u66f4\u7cbe\u786e\ud835\udc36 = \ud835\udc40\ud835\udc37. \u5b9e\u9a8c\u7ed3\u679c\u4e3a\u6700\u4f73\u6a21\u578b/\u6570\u636e\u6269\u5c55\u5206\u914d\u7b56\u7565\u548c\u6027\u80fd\u9884\u6d4b\u63d0\u4f9b\u4e86\u89c1\u89e3\uff0c\u5e76\u51c6\u786e\u9884\u6d4b\u4e86DeepSeek LLM 7B\u548c67B\u6a21\u578b\u7684\u9884\u671f\u6027\u80fd\u3002 \u6b64\u5916\uff0c\u5728\u63a2\u7d22\u6807\u5ea6\u5b9a\u5f8b\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528\u7684\u6570\u636e\u7ecf\u5386\u4e86\u591a\u6b21\u8fed\u4ee3\uff0c\u8d28\u91cf\u4e0d\u65ad\u63d0\u9ad8\u3002\u6211\u4eec\u8bd5\u56fe\u5728\u5404\u79cd\u6570\u636e\u96c6\u4e0a\u62df\u5408\u7f29\u653e\u66f2\u7ebf\uff0c\u53d1\u73b0\u6570\u636e\u8d28\u91cf\u663e\u8457\u5f71\u54cd\u6700\u4f73\u6a21\u578b/\u6570\u636e\u7f29\u653e\u5206\u914d\u7b56\u7565\u3002\u6570\u636e\u8d28\u91cf\u8d8a\u9ad8\uff0c\u5206\u914d\u7ed9\u6a21\u578b\u7f29\u653e\u7684\u8ba1\u7b97\u9884\u7b97\u5c31\u8d8a\u591a\u3002\u8fd9\u610f\u5473\u7740\uff0c\u5728\u76f8\u540c\u7684\u6570\u636e\u89c4\u6a21\u4e0b\uff0c\u9ad8\u8d28\u91cf\u7684\u6570\u636e\u53ef\u4ee5\u63a8\u52a8\u66f4\u5927\u6a21\u578b\u7684\u8bad\u7ec3\u3002\u6700\u4f18\u6a21\u578b/\u6570\u636e\u6269\u5c55\u5206\u914d\u7b56\u7565\u7684\u5dee\u5f02\u4e5f\u53ef\u4ee5\u4f5c\u4e3a\u8bc4\u4f30\u6570\u636e\u8d28\u91cf\u7684\u95f4\u63a5\u65b9\u6cd5\u3002\u6211\u4eec\u5c06\u7ee7\u7eed\u5bc6\u5207\u5173\u6ce8\u6570\u636e\u8d28\u91cf\u7684\u53d8\u5316\u53ca\u5176\u5bf9\u7f29\u653e\u89c4\u5f8b\u7684\u5f71\u54cd\uff0c\u5e76\u5728\u672a\u6765\u7684\u5de5\u4f5c\u4e2d\u63d0\u4f9b\u66f4\u591a\u7684\u5206\u6790\u3002 \u603b\u4e4b\uff0c\u6211\u4eec\u5728\u6807\u5ea6\u5b9a\u5f8b\u65b9\u9762\u7684\u8d21\u732e\u548c\u53d1\u73b0\u53ef\u4ee5\u603b\u7ed3\u5982\u4e0b\uff1a</p> <p>\u2022 \u6211\u4eec\u5efa\u7acb\u4e86\u8d85\u53c2\u6570\u7684\u6807\u5ea6\u5f8b\uff0c\u4e3a\u786e\u5b9a\u6700\u4f18\u8d85\u53c2\u6570\u63d0\u4f9b\u4e86\u7ecf\u9a8c\u6846\u67b6\u3002 \u2022 \u4ee3\u66ff\u6a21\u578b\u53c2\u6570\ud835\udc41, \u6211\u4eec\u91c7\u7528\u975e\u5d4c\u5165FLOP/\u4ee4\u724c\ud835\udc40 \u4ee5\u8868\u793a\u6a21\u578b\u89c4\u6a21\uff0c\u4ece\u800c\u4ea7\u751f\u66f4\u51c6\u786e\u7684\u6700\u4f18\u6a21\u578b/\u6570\u636e\u7f29\u653e\u5206\u914d\u7b56\u7565\uff0c\u5e76\u66f4\u597d\u5730\u9884\u6d4b\u5927\u89c4\u6a21\u6a21\u578b\u7684\u6cdb\u5316\u635f\u5931\u3002 \u2022 \u9884\u8bad\u7ec3\u6570\u636e\u7684\u8d28\u91cf\u4f1a\u5f71\u54cd\u6700\u4f73\u7684\u6a21\u578b/\u6570\u636e\u6269\u5c55\u5206\u914d\u7b56\u7565\u3002\u6570\u636e\u8d28\u91cf\u8d8a\u9ad8\uff0c\u5206\u914d\u7ed9\u6a21\u578b\u7f29\u653e\u7684\u8ba1\u7b97\u9884\u7b97\u5c31\u8d8a\u591a\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseekllm/DeepSeek_LLM_Scaling_Open_Source_Language_Models_with_Longtermism/#31","title":"3.1 \u8d85\u53c2\u6570\u7684\u7f29\u653e\u5b9a\u5f8b","text":"<p>\u6211\u4eec\u6700\u521d\u5728\u8ba1\u7b97\u9884\u7b97\u4e3a1e17\u7684\u5c0f\u89c4\u6a21\u5b9e\u9a8c\u4e2d\u5bf9\u6279\u91cf\u5927\u5c0f\u548c\u5b66\u4e60\u7387\u8fdb\u884c\u4e86\u7f51\u683c\u641c\u7d22\uff0c\u7279\u5b9a\u6a21\u578b\u5927\u5c0f\uff08177M FLOP/token\uff09\u7684\u7ed3\u679c\u5982\u56fe2\uff08a\uff09\u6240\u793a\u3002\u7ed3\u679c\u8868\u660e\uff0c\u5728\u6279\u91cf\u5927\u5c0f\u548c\u5b66\u4e60\u7387\u7684\u5e7f\u6cdb\u9009\u62e9\u8303\u56f4\u5185\uff0c\u6cdb\u5316\u8bef\u5dee\u4fdd\u6301\u7a33\u5b9a\u3002\u8fd9\u8868\u660e\uff0c\u5728\u76f8\u5bf9\u8f83\u5bbd\u7684\u53c2\u6570\u7a7a\u95f4\u5185\u53ef\u4ee5\u5b9e\u73b0\u63a5\u8fd1\u6700\u4f73\u7684\u6027\u80fd\u3002</p> <p>1 1e17 FLOP\uff08177M FLOP/\u4ee3\u5e01\uff09   \uff08b\uff091e20 FLOP\uff082.94B FLOP/\u4ee4\u724c\uff09</p> <p>\u56fe2| 1e17\u548c1e20 FLOP\u7684\u8bad\u7ec3\u635f\u5931\u4e0e\u6279\u91cf\u5927\u5c0f\u548c\u5b66\u4e60\u7387\u7684\u5173\u7cfb\u3002 \u7136\u540e\uff0c\u6211\u4eec\u5229\u7528\u4e0a\u8ff0\u591a\u6b65\u5b66\u4e60\u7387\u8c03\u5ea6\u5668\u6765\u6709\u6548\u5730\u8bad\u7ec3\u5177\u6709\u4e0d\u540c\u6279\u91cf\u5927\u5c0f\u3001\u5b66\u4e60\u7387\u548c\u8ba1\u7b97\u9884\u7b97\u7684\u591a\u4e2a\u6a21\u578b\uff0c\u8303\u56f4\u4ece</p> <p>\u901a\u8fc7\u91cd\u590d\u4f7f\u7528\u7b2c\u4e00\u7ea7\uff0c1e17\u81f32e19\u3002\u8003\u8651\u5230\u53c2\u6570\u7a7a\u95f4\u4e2d\u7684\u5197\u4f59\uff0c\u6211\u4eec\u5c06\u6cdb\u5316\u8bef\u5dee\u8d85\u8fc7\u6700\u5c0f\u503c\u4e0d\u8d85\u8fc70.25%\u7684\u6a21\u578b\u6240\u4f7f\u7528\u7684\u53c2\u6570\u89c6\u4e3a\u63a5\u8fd1\u6700\u4f18\u7684\u8d85\u53c2\u6570\u3002\u7136\u540e\u6211\u4eec\u8c03\u6574\u4e86\u6279\u91cf\u5927\u5c0f\ud835\udc35 \u5b66\u4e60\u7387\ud835\udf02 \u5173\u4e8e\u8ba1\u7b97\u9884\u7b97\ud835\udc36. \u5982\u56fe3\u6240\u793a\uff0c\u62df\u5408\u7ed3\u679c\u8868\u660e\uff0c\u6700\u4f73\u6279\u91cf\u5927\u5c0f\ud835\udc35 \u968f\u7740\u8ba1\u7b97\u9884\u7b97\u7684\u589e\u52a0\u800c\u9010\u6e10\u589e\u52a0\ud835\udc36, \u800c\u6700\u4f73\u5b66\u4e60\u7387\ud835\udf02 \u9010\u6e10\u51cf\u5c11\u3002\u8fd9\u4e0e\u6269\u5927\u6a21\u578b\u65f6\u6279\u91cf\u5927\u5c0f\u548c\u5b66\u4e60\u7387\u7684\u76f4\u89c2\u7ecf\u9a8c\u8bbe\u7f6e\u662f\u4e00\u81f4\u7684\u3002\u6b64\u5916\uff0c\u6240\u6709\u63a5\u8fd1\u6700\u4f18\u7684\u8d85\u53c2\u6570\u90fd\u843d\u5728\u4e00\u4e2a\u5bbd\u9891\u5e26\u8303\u56f4\u5185\uff0c\u8fd9\u8868\u660e\u5728\u8fd9\u4e2a\u533a\u95f4\u5185\u9009\u62e9\u63a5\u8fd1\u6700\u4f18\u7684\u53c2\u6570\u76f8\u5bf9\u5bb9\u6613\u3002\u6211\u4eec\u4e3a\u6279\u91cf\u5927\u5c0f\u548c\u5b66\u4e60\u7387\u62df\u5408\u7684\u6700\u7ec8\u516c\u5f0f\u5982\u4e0b\uff1a \ud835\udf02opt=0.3118\u00b7\ud835\udc36 \u22120.1250</p> <p>\ud835\udc35opt</p> <p>= 0.2920 \u00b7 \ud835\udc36 0.3271 (1)</p> <p>\uff08a\uff09 \u6279\u91cf\u7f29\u653e\u66f2\u7ebf  \uff08b\uff09\u5b66\u4e60\u7387\u7f29\u653e\u66f2\u7ebf</p> <p>\u56fe3 |\u6279\u91cf\u5927\u5c0f\u548c\u5b66\u4e60\u7387\u7684\u7f29\u653e\u66f2\u7ebf\u3002\u7070\u8272\u5706\u5708\u8868\u793a\u6cdb\u5316\u8bef\u5dee\u8d85\u8fc7\u6700\u5c0f\u503c\u4e0d\u8d85\u8fc70.25%\u7684\u6a21\u578b\u3002\u865a\u7ebf\u8868\u793a\u9002\u5408\u8f83\u5c0f\u6a21\u578b\u7684\u5e42\u5f8b\u3002\u84dd\u8272\u6052\u661f\u4ee3\u8868DeepSeek LLM 7B\u548c67B\u3002</p> <p>\u6211\u4eec\u5728\u4e00\u7cfb\u5217\u5177\u67091e20\u8ba1\u7b97\u9884\u7b97\u7684\u6a21\u578b\u4e0a\u9a8c\u8bc1\u4e86\u6211\u4eec\u7684\u516c\u5f0f\uff0c\u7279\u5b9a\u6a21\u578b\u5927\u5c0f\uff08\u6bcf\u4e2a\u4ee4\u724c2.94B FLOP\uff09\u7684\u7ed3\u679c\u5982\u56fe2\uff08b\uff09\u6240\u793a\u3002\u7ed3\u679c\u8868\u660e\uff0c\u62df\u5408\u53c2\u6570\u96c6\u4e2d\u5728\u6700\u4f18\u53c2\u6570\u7a7a\u95f4\u5185\u3002\u540e\u7eed\u90e8\u5206\u8fd8\u8868\u660e\uff0c\u6211\u4eec\u4e3aDeepSeek LLM 7B\u548c67B\u6a21\u578b\u62df\u5408\u7684\u53c2\u6570\u540c\u6837\u53d6\u5f97\u4e86\u826f\u597d\u7684\u6027\u80fd\u3002 \u7136\u800c\uff0c\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u6211\u4eec\u8fd8\u6ca1\u6709\u8003\u8651\u8ba1\u7b97\u9884\u7b97\u4e4b\u5916\u7684\u56e0\u7d20\u7684\u5f71\u54cd\ud835\udc36 \u5173\u4e8e\u6700\u4f18\u8d85\u53c2\u6570\u3002\u8fd9\u4e0e\u4e00\u4e9b\u65e9\u671f\u7684\u7814\u7a76\uff08Kaplan\u7b49\u4eba\uff0c2020\uff1bMcCandlish\u7b49\u4eba\uff0c2018\uff09\u4e0d\u4e00\u81f4\uff0c\u8fd9\u4e9b\u7814\u7a76\u8868\u660e\uff0c\u6700\u4f73\u6279\u91cf\u5927\u5c0f\u53ef\u4ee5\u5efa\u6a21\u4e3a\u4ec5\u4e0e\u6cdb\u5316\u8bef\u5dee\u6709\u5173\ud835\udc3f. \u6b64\u5916\uff0c\u6211\u4eec\u89c2\u5bdf\u5230\uff0c\u5728\u5177\u6709\u76f8\u540c\u8ba1\u7b97\u9884\u7b97\u4f46\u6a21\u578b/\u6570\u636e\u5206\u914d\u4e0d\u540c\u7684\u6a21\u578b\u4e2d\uff0c\u6700\u4f18\u53c2\u6570\u7a7a\u95f4\u7565\u6709\u4e0d\u540c\u3002\u8fd9\u8868\u660e\u9700\u8981\u8fdb\u4e00\u6b65\u7684\u7814\u7a76\u6765\u4e86\u89e3\u8d85\u53c2\u6570\u7684\u9009\u62e9\u548c\u8bad\u7ec3\u52a8\u529b\u5b66\u3002\u6211\u4eec\u5c06\u5728\u672a\u6765\u7684\u5de5\u4f5c\u4e2d\u63a2\u7d22\u8fd9\u4e9b\u65b9\u9762\u3002</p> <p>3.2 \u4f30\u8ba1\u6700\u4f18\u6a21\u578b\u548c\u6570\u636e\u7f29\u653e \u5728\u63a8\u5bfc\u51fa\u62df\u5408\u8fd1\u6700\u4f18\u8d85\u53c2\u6570\u7684\u516c\u5f0f\u540e\uff0c\u6211\u4eec\u5f00\u59cb\u62df\u5408\u7f29\u653e\u66f2\u7ebf\uff0c\u5e76\u5206\u6790\u6700\u4f18\u6a21\u578b/\u6570\u636e\u7f29\u653e\u5206\u914d\u7b56\u7565\u3002\u8be5\u7b56\u7565\u6d89\u53ca\u627e\u5230\u6a21\u578b\u7f29\u653e\u6307\u6570\ud835\udc4e \u6570\u636e\u7f29\u653e\u6307\u6570\ud835\udc4f \u90a3\u5c31\u6ee1\u8db3\u4e86\ud835\udc41opt\u251c\ud835\udc36\ud835\udc4e</p> <p>and \ud835\udc37opt\u251c\ud835\udc36\ud835\udc4f\u5206\u522b\u3002\u6570\u636e\u89c4\u6a21\ud835\udc37 \u53ef\u4ee5\u7528\u6570\u636e\u96c6\u4e2d\u7684\u4ee4\u724c\u6570\u91cf\u6765\u4e00\u81f4\u5730\u8868\u793a\u3002\u5728\u4e4b\u524d\u7684\u5de5\u4f5c\u4e2d\uff0c\u6a21\u578b\u5c3a\u5ea6\u901a\u5e38\u7531\u6a21\u578b\u53c2\u6570\u8868\u793a\uff0c\u5176\u4e2d\u5305\u542b\u975e\u5d4c\u5165\u53c2\u6570\ud835\udc411 \uff08Kaplan\u7b49\u4eba\uff0c2020\uff09\u548c\u5b8c\u6574\u53c2\u6570 \ud835\udc412 \uff08Hoffmann\u7b49\u4eba\uff0c2022\uff09\u3002\u8ba1\u7b97\u9884\u7b97\u4e4b\u95f4\u7684\u5173\u7cfb\ud835\udc36 \u6a21\u578b/\u6570\u636e\u89c4\u6a21\u53ef\u4ee5\u8fd1\u4f3c\u63cf\u8ff0\u4e3a\ud835\udc36 = 6\ud835\udc41 \ud835\udc37, \u8fd9\u610f\u5473\u7740\u6211\u4eec\u53ef\u4ee5\u4f7f\u75286\ud835\udc411 or 6\ud835\udc412 \u4ee5\u8fd1\u4f3c\u6a21\u578b\u6bd4\u4f8b\u3002\u7136\u800c\uff0c\u7531\u4e8e\u4e24\u8005\u5747\u4e3a6\ud835\udc411 and 6\ud835\udc412 \u4e0d\u8003\u8651\u6ce8\u610f\u529b\u64cd\u4f5c\u7684\u8ba1\u7b97\u5f00\u9500\uff0c\u4ee5\u53ca6\ud835\udc412 \u8fd8\u5305\u62ec\u8bcd\u6c47\u8ba1\u7b97\uff0c\u8fd9\u5bf9\u6a21\u578b\u7684\u5bb9\u91cf\u8d21\u732e\u8f83\u5c0f\uff0c\u5728\u67d0\u4e9b\u8bbe\u7f6e\u4e0b\uff0c\u5b83\u4eec\u90fd\u6709\u660e\u663e\u7684\u8fd1\u4f3c\u8bef\u5dee\u3002 \u4e3a\u4e86\u51cf\u5c11\u8fd9\u4e9b\u9519\u8bef\uff0c\u6211\u4eec\u5f15\u5165\u4e86\u4e00\u79cd\u65b0\u7684\u6a21\u578b\u89c4\u6a21\u8868\u793a\uff1a\u975e\u5d4c\u5165FLOP/token\ud835\udc40. \ud835\udc40 \u5305\u62ec\u6ce8\u610f\u529b\u64cd\u4f5c\u7684\u8ba1\u7b97\u5f00\u9500\uff0c\u4f46\u4e0d\u8003\u8651\u8bcd\u6c47\u8ba1\u7b97\u3002\u6a21\u578b\u6bd4\u4f8b\u7531\u8868\u793a\ud835\udc40, \u8ba1\u7b97\u9884\u7b97\ud835\udc36 \u53ef\u4ee5\u7b80\u5355\u5730\u8868\u793a\u4e3a\ud835\udc36 = \ud835\udc40\ud835\udc37. 6\u4e4b\u95f4\u7684\u5177\u4f53\u533a\u522b\ud835\udc411, 6\ud835\udc412, and \ud835\udc40 \u5982\u4ee5\u4e0b\u516c\u5f0f\u6240\u793a\uff1a 6\ud835\udc411 = 72 \ud835\udc5b\u56fe\u5c42\ud835\udc512</p> <p>6\ud835\udc412 = 72 \ud835\udc5b\u56fe\u5c42\ud835\udc512 \ud835\udc40 = 72 \ud835\udc5b\u56fe\u5c42\ud835\udc512</p> <ul> <li>6 \ud835\udc5bvocab\ud835\udc51model</li> <li>12 \ud835\udc5b\u56fe\u5c42\ud835\udc51\u6a21\u578b\ud835\udc59seq</li> </ul> <p>2.</p> <p>\u54ea\u91cc\ud835\udc5blayer\u8868\u793a\u5c42\u6570\uff0c\ud835\udc51model\u8868\u793a\u6a21\u578b\u5bbd\u5ea6\uff0c\ud835\udc5bvocab\u662f\u8bcd\u6c47\u91cf\uff0c\u4ee5\u53ca\ud835\udc59seq\u662f\u5e8f\u5217\u957f\u5ea6\u3002\u6211\u4eec\u8bc4\u4f30\u4e86\u4e0d\u540c\u5c3a\u5ea6\u6a21\u578b\u4e2d\u8fd9\u4e09\u79cd\u8868\u793a\u4e4b\u95f4\u7684\u5dee\u5f02\uff0c\u5982\u88683\u6240\u793a\u3002\u7ed3\u679c\u8868\u660e\uff0c6\ud835\udc411 and 6\ud835\udc412 \u9ad8\u4f30\u6216\u4f4e\u4f30\u4e86\u4e0d\u540c\u5c3a\u5ea6\u6a21\u578b\u7684\u8ba1\u7b97\u6210\u672c\u3002\u8fd9\u79cd\u5dee\u5f02\u5728\u5c0f\u89c4\u6a21\u6a21\u578b\u4e2d\u5c24\u4e3a\u660e\u663e\uff0c\u5dee\u5f02\u9ad8\u8fbe50%\u3002\u5728\u62df\u5408\u7f29\u653e\u66f2\u7ebf\u65f6\uff0c\u8fd9\u79cd\u4e0d\u51c6\u786e\u53ef\u80fd\u4f1a\u5f15\u5165\u5927\u91cf\u7684\u7edf\u8ba1\u8bef\u5dee\u3002\u5173\u4e8e\u6a21\u578b\u6bd4\u4f8b\u7684\u4e0d\u540c\u8868\u793a\uff0c\u8bf7\u53c2\u9605\u9644\u5f55A.2\u8fdb\u884c\u8fdb\u4e00\u6b65\u5206\u6790\u3002</p> <p>\ud835\udc5b\u5c42  \ud835\udc51model  \ud835\udc5bvocab  \ud835\udc59seq    \ud835\udc411  \ud835\udc412  \ud835\udc40   6\ud835\udc411 \ud835\udc40   6\ud835\udc412 \ud835\udc40</p> <ol> <li>512         25.2\u7c73   77.6\u7c73   352\u7c73    0.43    1.32 12  768         84.9\u7c73   164\u7c73    963\u7c73    0.53    1.02 24  1024            302\u7c73    407\u7c73    3.02B   0.60    0.81 24  2048    102400  4096    1.21B   1.42B   9.66B   0.75    0.88 32  4096            6.44B   6.86B   45.1B   0.85    0.91 40  5120            12.6B   13.1B   85.6B   0.88    0.92 80  8192            64.4B   65.3B   419B    0.92    0.94 \u88683 |\u6a21\u578b\u5c3a\u5ea6\u8868\u793a\u7684\u5dee\u5f02\u548c\u975e\u5d4c\u5165\u53c2\u6570\u7684\u5dee\u5f02 \ud835\udc411 \u5e76\u5b8c\u6210\u53c2\u6570\ud835\udc412 \u76f8\u5bf9\u4e8e\u975e\u5d4c\u5165FLOP/\u4ee4\u724c\ud835\udc40.</li> </ol> <p>\u6536\u517b\u540e\ud835\udc40 \u4e3a\u4e86\u8868\u793a\u6a21\u578b\u89c4\u6a21\uff0c\u6211\u4eec\u7684\u76ee\u6807\u53ef\u4ee5\u66f4\u6e05\u695a\u5730\u63cf\u8ff0\u4e3a\uff1a\u7ed9\u5b9a\u8ba1\u7b97\u9884\u7b97\ud835\udc36 = \ud835\udc40\ud835\udc37, \u627e\u5230\u6700\u4f18\u6a21\u578b\u6bd4\u4f8b\ud835\udc40opt\u548c\u6570\u636e\u89c4\u6a21\ud835\udc37\u9009\u62e9\u6700\u5c0f\u5316\u6a21\u578b\u7684\u6cdb\u5316\u8bef\u5dee\u3002\u8fd9\u4e00\u76ee\u6807\u53ef\u4ee5\u6b63\u5f0f\u5316\u4e3a\uff1a</p> <p>\ud835\udc40opt\uff08\ud835\udc36\uff09\uff0c\ud835\udc37opt\uff08 \ud835\udc40,\ud835\udc37 s.t. \ud835\udc36=\ud835\udc40\ud835\udc37</p> <p>\ud835\udc3f(\ud835\udc41, \ud835\udc37) (3)</p> <p>\u4e3a\u4e86\u964d\u4f4e\u5b9e\u9a8c\u6210\u672c\u548c\u62df\u5408\u96be\u5ea6\uff0c\u4f7f\u7528\u4e86Chinchilla\u7684IsoFLOP\u8f6e\u5ed3\u65b9\u6cd5\uff08Hoffmann\u7b49\u4eba\uff0c2022\uff09\u6765\u62df\u5408\u7f29\u653e\u66f2\u7ebf\u3002\u6211\u4eec\u9009\u62e9\u4e868\u4e2a\u4e0d\u540c\u7684</p> <p>\uff08a\uff09 IsoFLOP\u66f2\u7ebf   \uff08b\uff09\u6700\u4f73\u6a21\u578b\u7f29\u653e\uff08  c\uff09\u6700\u4f73\u6570\u636e\u7f29\u653e</p> <p>\u56fe4|IsoFLOP\u66f2\u7ebf\u548c\u6700\u4f73\u6a21\u578b/\u6570\u636e\u5206\u914d\u3002IsoFLOP\u66f2\u7ebf\u4e2d\u7684\u5ea6\u91cf\u662f\u9a8c\u8bc1\u96c6\u4e0a\u7684\u6bcf\u5b57\u8282\u6bd4\u7279\u6570\u3002\u6700\u4f18\u6a21\u578b/\u6570\u636e\u7f29\u653e\u66f2\u7ebf\u4e2d\u7684\u865a\u7ebf\u8868\u793a\u9002\u5408\u8f83\u5c0f\u6a21\u578b\u7684\u5e42\u5f8b\uff08\u7070\u8272\u5706\u5708\uff09\u3002</p> <p>\u8ba1\u7b97\u4ece1e17\u52303e20\u7684\u9884\u7b97\uff0c\u5e76\u4e3a\u6bcf\u4e2a\u9884\u7b97\u8bbe\u8ba1\u4e86\u5927\u7ea610\u4e2a\u4e0d\u540c\u7684\u6a21\u578b/\u6570\u636e\u89c4\u6a21\u5206\u914d\u3002\u6bcf\u4e2a\u9884\u7b97\u7684\u8d85\u53c2\u6570\u7531\u516c\u5f0f\uff081\uff09\u786e\u5b9a\uff0c\u6cdb\u5316\u8bef\u5dee\u5728\u4e00\u4e2a\u72ec\u7acb\u7684\u9a8c\u8bc1\u96c6\u4e0a\u8ba1\u7b97\uff0c\u8be5\u9a8c\u8bc1\u96c6\u4e0e\u8bad\u7ec3\u96c6\u5206\u5e03\u76f8\u4f3c\uff0c\u5305\u542b1\u4ebf\u4e2a\u4ee4\u724c\u3002 \u56fe4\u5c55\u793a\u4e86IsoFLOP\u66f2\u7ebf\u548c\u6a21\u578b/\u6570\u636e\u7f29\u653e\u66f2\u7ebf\uff0c\u8fd9\u4e9b\u66f2\u7ebf\u662f\u901a\u8fc7\u4f7f\u7528\u6bcf\u4e2a\u8ba1\u7b97\u9884\u7b97\u7684\u6700\u4f73\u6a21\u578b/\u6570\u636e\u5206\u914d\u8fdb\u884c\u62df\u5408\u7684\u3002\u6700\u4f18\u975e\u5d4c\u5165FLOP/token\u7684\u5177\u4f53\u516c\u5f0f\ud835\udc40opt\u548c\u6700\u4f18\u4ee4\u724c\ud835\udc37opt\u5982\u4e0b\uff1a \ud835\udc40opt=\ud835\udc40\u57fa\u5730\u00b7\ud835\udc36\ud835\udc4e,    \ud835\udc40\u57fa\u6570=0.1715\uff0c \ud835\udc4e = 0.5243</p> <p>\ud835\udc37opt=\ud835\udc37base</p> <p>\u00b7 \ud835\udc36\ud835\udc4f,   \ud835\udc37base</p> <p>4. = 5.8316,   \ud835\udc4f = 0.4757</p> <p>\u6b64\u5916\uff0c\u6211\u4eec\u6839\u636e\u8ba1\u7b97\u9884\u7b97\u62df\u5408\u4e86\u635f\u5931\u7f29\u653e\u66f2\u7ebf\ud835\udc36 \u5e76\u9884\u6d4b\u4e86DeepSeek LLM 7B\u548c67B\u7684\u6cdb\u5316\u8bef\u5dee\uff0c\u5982\u56fe5\u6240\u793a\u3002\u7ed3\u679c\u8868\u660e\uff0c\u4f7f\u7528\u5c0f\u89c4\u6a21\u5b9e\u9a8c\u53ef\u4ee5\u51c6\u786e\u9884\u6d4b</p> <p>\u56fe5 |\u6027\u80fd\u7f29\u653e\u66f2\u7ebf\u3002\u5ea6\u91cf\u662f\u9a8c\u8bc1\u96c6\u4e0a\u7684\u6bcf\u5b57\u8282\u6bd4\u7279\u6570\u3002\u865a\u7ebf\u8868\u793a\u9002\u5408\u8f83\u5c0f\u6a21\u578b\u7684\u5e42\u5f8b\uff08\u7070\u8272\u5706\u5708\uff09\u3002\u84dd\u8272\u6052\u661f\u4ee3\u8868DeepSeek LLM 7B\u548c67B\u3002\u7f29\u653e\u66f2\u7ebf\u5f88\u597d\u5730\u9884\u6d4b\u4e86\u5b83\u4eec\u7684\u6027\u80fd\u3002</p> <p>\u8ba1\u7b97\u9884\u7b97\u4e3a1000\u500d\u7684\u6a21\u578b\u7684\u6027\u80fd\u3002\u8fd9\u4e3a\u66f4\u5927\u89c4\u6a21\u7684\u8bad\u7ec3\u6a21\u578b\u63d0\u4f9b\u4e86\u4fe1\u5fc3\u548c\u6307\u5bfc\u3002</p> <p>3.3. \u4e0d\u540c\u6570\u636e\u7684\u7f29\u653e\u5b9a\u5f8b \u5728DeepSeek LLM\u7684\u5f00\u53d1\u8fc7\u7a0b\u4e2d\uff0c\u6570\u636e\u96c6\u7ecf\u8fc7\u591a\u6b21\u8fed\u4ee3\u4f18\u5316\uff0c\u5728\u63d0\u9ad8\u6574\u4f53\u8d28\u91cf\u7684\u540c\u65f6\u8c03\u6574\u4e86\u4e0d\u540c\u6570\u636e\u6e90\u7684\u6bd4\u4f8b\u3002\u8fd9\u4f7f\u6211\u4eec\u80fd\u591f\u8fdb\u4e00\u6b65\u5206\u6790\u4e0d\u540c\u6570\u636e\u96c6\u5bf9\u7f29\u653e\u5b9a\u5f8b\u7684\u5f71\u54cd\u3002 \u6211\u4eec\u4f7f\u7528\u4e09\u4e2a\u4e0d\u540c\u7684\u6570\u636e\u96c6\u7814\u7a76\u4e86\u7f29\u653e\u89c4\u5f8b\uff1a\u65e9\u671f\u5185\u90e8\u6570\u636e\u3001\u5f53\u524d\u5185\u90e8\u6570\u636e\u548cOpenWebText2\uff0c\u540e\u8005\u5728\u4e4b\u524d\u7684\u7f29\u653e\u89c4\u5f8b\u7814\u7a76\u4e2d\u5f97\u5230\u4e86\u5e94\u7528\uff08Kaplan\u7b49\u4eba\uff0c2020\uff09\u3002\u6211\u4eec\u7684\u5185\u90e8\u6570\u636e\u8bc4\u4f30\u663e\u793a\uff0c\u5f53\u524d\u7684\u5185\u90e8\u6570\u636e\u6bd4\u65e9\u671f\u7684\u5185\u90e8\u6570\u636e\u5177\u6709\u66f4\u9ad8\u7684\u6570\u636e\u8d28\u91cf\u3002\u6b64\u5916\uff0cOpenWebText2\u7684\u8d28\u91cf\u751a\u81f3\u8d85\u8fc7\u4e86\u76ee\u524d\u7684\u5185\u90e8\u6570\u636e\uff0c\u56e0\u4e3a\u5b83\u7684\u89c4\u6a21\u8f83\u5c0f\uff0c\u53ef\u4ee5\u8fdb\u884c\u66f4\u7ec6\u81f4\u7684\u5904\u7406\u3002</p> <p>\u65b9\u6cd5  Coeff\u3002\ud835\udc4e where \ud835\udc41opt\uff08\ud835\udc40opt\uff09\ud835\udc36\ud835\udc4e    Coeff\u3002\ud835\udc4f where \ud835\udc37opt\u251c\ud835\udc36\ud835\udc4f OpenAI\uff08OpenWebText2\uff09    0.73    0.27 \u94a6\u5947\u5229\u4e9a\uff08MassiveText\uff09   0.49    0.51 \u6211\u4eec\u7684\uff08\u65e9\u671f\u6570\u636e\uff09   0.450   0.550 \u6211\u4eec\u7684\uff08\u5f53\u524d\u6570\u636e\uff09   0.524   0.476 \u6211\u4eec\u7684\uff08OpenWebText2\uff09   0.578   0.422 \u88684|\u6a21\u578b\u7f29\u653e\u7cfb\u6570\u548c\u6570\u636e\u7f29\u653e\u7cfb\u6570\u968f\u8bad\u7ec3\u6570\u636e\u5206\u5e03\u800c\u53d8\u5316\u3002\u5206\u6790\u4e2d\u4e00\u4e2a\u6709\u8da3\u7684\u89c2\u5bdf\u7ed3\u679c\u662f\uff0c\u8fd9\u4e09\u4e2a\u6570\u636e\u96c6\u7684\u6700\u4f73\u6a21\u578b/\u6570\u636e\u6269\u5c55\u5206\u914d\u7b56\u7565\u4e0e\u6570\u636e\u8d28\u91cf\u4e00\u81f4\u3002\u5982\u88684\u6240\u793a\uff0c\u968f\u7740\u6570\u636e\u8d28\u91cf\u7684\u63d0\u9ad8\uff0c\u6a21\u578b\u7f29\u653e\u6307\u6570\ud835\udc4e \u9010\u6e10\u589e\u52a0\uff0c\u800c\u6570\u636e\u7f29\u653e\u6307\u6570\ud835\udc4f \u51cf\u5c11\uff0c\u8fd9\u8868\u660e\u589e\u52a0\u7684\u8ba1\u7b97\u9884\u7b97\u5e94\u8be5\u66f4\u591a\u5730\u5206\u914d\u7ed9\u6a21\u578b\u800c\u4e0d\u662f\u6570\u636e\u3002\u8fd9\u4e00\u53d1\u73b0\u4e5f\u53ef\u80fd\u89e3\u91ca\u4e86\u65e9\u671f\u7f29\u653e\u5b9a\u5f8b\u7814\u7a76\u4e2d\u89c2\u5bdf\u5230\u7684\u6700\u4f73\u6a21\u578b/\u6570\u636e\u7f29\u653e\u5206\u914d\u7684\u663e\u8457\u5dee\u5f02\u3002 \u5bf9\u8fd9\u4e00\u53d1\u73b0\u7684\u4e00\u4e2a\u76f4\u89c2\u63a8\u6d4b\u662f\uff0c\u9ad8\u8d28\u91cf\u7684\u6570\u636e\u901a\u5e38\u610f\u5473\u7740\u7ecf\u8fc7\u5145\u5206\u8bad\u7ec3\u540e\u903b\u8f91\u6e05\u6670\uff0c\u9884\u6d4b\u96be\u5ea6\u8f83\u5c0f\u3002\u56e0\u6b64\uff0c\u5728\u589e\u52a0\u8ba1\u7b97\u9884\u7b97\u65f6\uff0c\u6269\u5927\u6a21\u578b\u5927\u5c0f\u66f4\u6709\u5229\u3002\u6211\u4eec\u5c06\u7ee7\u7eed\u5bc6\u5207\u5173\u6ce8\u6570\u636e\u8d28\u91cf\u7684\u53d8\u5316\u53ca\u5176\u5bf9\u7f29\u653e\u89c4\u5f8b\u7684\u5f71\u54cd\uff0c\u5e76\u5728\u672a\u6765\u7684\u5de5\u4f5c\u4e2d\u63d0\u4f9b\u66f4\u591a\u7684\u5206\u6790\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseekllm/DeepSeek_LLM_Scaling_Open_Source_Language_Models_with_Longtermism/#4","title":"4 \u5bf9\u9f50","text":"<p>\u6211\u4eec\u6536\u96c6\u4e86\u7ea6150\u4e07\u4e2a\u4e2d\u82f1\u6587\u6307\u4ee4\u6570\u636e\u5b9e\u4f8b\uff0c\u6db5\u76d6\u4e86\u5e7f\u6cdb\u7684\u6709\u76ca\u548c\u65e0\u5bb3\u4e3b\u9898\u3002\u6211\u4eec\u6709\u7528\u6570\u636e\u5305\u542b120\u4e07\u4e2a\u6837\u672c\uff0c\u5176\u4e2d31.2%\u7528\u4e8e\u4e00\u822c\u8bed\u8a00\u4efb\u52a1\uff0c46.6%\u7528\u4e8e\u6570\u5b66\u95ee\u9898\uff0c22.2%\u7528\u4e8e\u7f16\u7801\u7ec3\u4e60\u3002\u5b89\u5168\u6570\u636e\u753130\u4e07\u4e2a\u6837\u672c\u7ec4\u6210\uff0c\u6db5\u76d6\u4e86\u5404\u79cd\u654f\u611f\u4e3b\u9898\u3002 \u6211\u4eec\u7684\u8def\u7ebf\u6d41\u7a0b\u5305\u542b\u4e24\u4e2a\u9636\u6bb5\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseekllm/DeepSeek_LLM_Scaling_Open_Source_Language_Models_with_Longtermism/#41","title":"4.1 \u6709\u76d1\u7763\u5fae\u8c03","text":"<p>\u6211\u4eec\u75284\u4e2a\u8fed\u4ee3\u5468\u671f\u5bf97B\u6a21\u578b\u8fdb\u884c\u4e86\u5fae\u8c03\uff0c\u4f4667B\u6a21\u578b\u53ea\u67092\u4e2a\u8fed\u4ee3\u5468\u671f\uff0c\u56e0\u4e3a\u6211\u4eec\u89c2\u5bdf\u523067B\u6a21\u578b\u7684\u8fc7\u62df\u5408\u95ee\u9898\u5f88\u4e25\u91cd\u3002\u6211\u4eec\u89c2\u5bdf\u5230\uff0c7B\u6a21\u578b\u7684GSM8K\uff08Cobbe\u7b49\u4eba\uff0c2021\uff09\u548cHumanEval\uff08Chen\u7b49\uff0c2021\uff09\u6548\u679c\u6301\u7eed\u5f97\u5230\u6539\u5584\uff0c\u800c67B\u6a21\u578b\u5f88\u5feb\u5c31\u4f1a\u8fbe\u5230\u4e0a\u9650\u30027B\u548c67B\u6a21\u578b\u7684\u5b66\u4e60\u7387\u5206\u522b\u4e3a1e-5\u548c5e-6\u3002\u9664\u4e86\u76d1\u63a7\u57fa\u51c6\u7cbe\u5ea6\u5916\uff0c\u6211\u4eec\u8fd8\u5728\u5fae\u8c03\u8fc7\u7a0b\u4e2d\u8bc4\u4f30\u804a\u5929\u6a21\u578b\u7684\u91cd\u590d\u7387\u3002\u6211\u4eec\u603b\u5171\u6536\u96c6\u4e863868\u4e2a\u4e2d\u82f1\u6587\u63d0\u793a\u8bcd\uff0c\u5e76\u786e\u5b9a\u4e86\u751f\u6210\u7684\u54cd\u5e94\u4e2d\u6ca1\u6709\u7ec8\u6b62\u800c\u662f\u65e0\u4f11\u6b62\u5730\u91cd\u590d\u4e00\u6bb5\u6587\u672c\u3002\u6211\u4eec\u89c2\u5bdf\u5230\uff0c\u968f\u7740\u6570\u5b66SFT\u6570\u636e\u91cf\u7684\u589e\u52a0\uff0c\u91cd\u590d\u7387\u8d8b\u4e8e\u4e0a\u5347\u3002\u8fd9\u53ef\u4ee5\u5f52\u56e0\u4e8e\u6570\u5b66SFT\u6570\u636e\u5728\u63a8\u7406\u4e2d\u5076\u5c14\u4f1a\u5305\u542b\u7c7b\u4f3c\u7684\u6a21\u5f0f\u3002\u56e0\u6b64\uff0c\u8f83\u5f31\u7684\u6a21\u578b\u5f88\u96be\u638c\u63e1\u8fd9\u79cd\u63a8\u7406\u6a21\u5f0f\uff0c\u5bfc\u81f4\u91cd\u590d\u7684\u53cd\u5e94\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u5c1d\u8bd5\u4e86\u4e24\u9636\u6bb5\u5fae\u8c03\u548cDPO\uff08Rafailov\u7b49\u4eba\uff0c2023\uff09\uff0c\u8fd9\u4e24\u79cd\u65b9\u6cd5\u51e0\u4e4e\u53ef\u4ee5\u4fdd\u6301\u57fa\u51c6\u5206\u6570\u5e76\u663e\u8457\u51cf\u5c11\u91cd\u590d\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseekllm/DeepSeek_LLM_Scaling_Open_Source_Language_Models_with_Longtermism/#42-dpo","title":"4.2 DPO","text":"<p>\u4e3a\u4e86\u8fdb\u4e00\u6b65\u589e\u5f3a\u6a21\u578b\u7684\u80fd\u529b\uff0c\u6211\u4eec\u4f7f\u7528\u4e86\u76f4\u63a5\u504f\u597d\u4f18\u5316\u7b97\u6cd5\uff08Rafailov\u7b49\u4eba\uff0c2023\uff09\uff0c\u8fd9\u88ab\u8bc1\u660e\u662f\u4e00\u79cd\u7b80\u5355\u4f46\u6709\u6548\u7684LLM\u5bf9\u9f50\u65b9\u6cd5\u3002\u6211\u4eec\u6784\u5efa\u4e86DPO\u8bad\u7ec3\u5728\u6709\u76ca\u6027\u548c\u65e0\u5bb3\u6027\u65b9\u9762\u7684\u504f\u597d\u6570\u636e\u3002\u4e3a\u4e86\u83b7\u5f97\u6709\u7528\u7684\u6570\u636e\uff0c\u6211\u4eec\u6536\u96c6\u4e86\u591a\u8bed\u8a00\u63d0\u793a\uff0c\u6db5\u76d6\u4e86\u521b\u610f\u5199\u4f5c\u3001\u95ee\u7b54\u3001\u6307\u4ee4\u9075\u5faa\u7b49\u7c7b\u522b\u3002\u7136\u540e\uff0c\u6211\u4eec\u4f7f\u7528DeepSeek Chat\u6a21\u578b\u4f5c\u4e3a\u54cd\u5e94\u5019\u9009\u751f\u6210\u4e86\u54cd\u5e94\u3002\u7c7b\u4f3c\u7684\u64cd\u4f5c\u4e5f\u5e94\u7528\u4e8e\u65e0\u5bb3\u504f\u597d\u6570\u636e\u6784\u5efa\u3002</p> <p>\u6211\u4eec\u4e3aDPO\u8bad\u7ec3\u4e86\u4e00\u4e2a\u8fed\u4ee3\uff0c\u5b66\u4e60\u7387\u4e3a5e-6\uff0c\u6279\u5904\u7406\u5927\u5c0f\u4e3a512\uff0c\u6211\u4eec\u4f7f\u7528\u4e86\u5b66\u4e60\u7387\u9884\u70ed\u548c\u4f59\u5f26\u5b66\u4e60\u7387\u8c03\u5ea6\u5668\u3002\u6211\u4eec\u53d1\u73b0\uff0cDPO\u53ef\u4ee5\u589e\u5f3a\u6a21\u578b\u7684\u5f00\u653e\u5f0f\u751f\u6210\u6280\u80fd\uff0c\u540c\u65f6\u5728\u6807\u51c6\u57fa\u51c6\u4e4b\u95f4\u4ea7\u751f\u7684\u6027\u80fd\u5dee\u5f02\u5f88\u5c0f\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseekllm/DeepSeek_LLM_Scaling_Open_Source_Language_Models_with_Longtermism/#5","title":"5 \u8bc4\u4ef7","text":"<p>5.1 \u516c\u5171\u57fa\u51c6\u8bc4\u4f30 \u6211\u4eec\u6839\u636e\u5185\u90e8\u8bc4\u4f30\u6846\u67b6\uff0c\u5728\u4e00\u7cfb\u5217\u4e2d\u82f1\u6587\u516c\u5171\u57fa\u51c6\u4e0a\u8bc4\u4f30\u6211\u4eec\u7684\u6a21\u578b\u3002 \u591a\u5b66\u79d1\u591a\u9879\u9009\u62e9\u6570\u636e\u96c6\uff0c\u5305\u62ecMMLU\uff08Hendrycks\u7b49\u4eba\uff0c2020\uff09\u3001C-Eval\uff08Huang\u7b49\u4eba\uff0c2023\uff09\u548cCMMLU\uff08Li\u7b49\u4eba\uff0c2023\u5e74\uff09\u3002 \u8bed\u8a00\u7406\u89e3\u548c\u63a8\u7406\u6570\u636e\u96c6\u5305\u62ecHellaSwag\uff08Zellers\u7b49\u4eba\uff0c2019\uff09\u3001PIQA\uff08Bisk\u7b49\u4eba\uff0c2020\uff09\u3001ARC\uff08Clark\u7b49\u4eba\uff0c2018\uff09\u3001OpenBookQA\uff08Mihailov\u7b49\u4eba\uff0c2018\u5e74\uff09\u548cBigBench Hard\uff08BBH\uff09\uff08Suzgun\u7b49\u4eba\uff0c2022\uff09\u3002 \u95ed\u4e66\u95ee\u7b54\u6570\u636e\u96c6\uff0c\u5305\u62ecTriviaQA\uff08Joshi\u7b49\u4eba\uff0c2017\uff09\u548cNatu ralQuestions\uff08Kwiatkowski\u7b49\u4eba\uff0c2019\uff09\u3002 \u9605\u8bfb\u7406\u89e3\u6570\u636e\u96c6\u5305\u62ecRACE Lai\u7b49\u4eba\uff082017\u5e74\uff09\u548cDROP\uff08Dua\u7b49\u4eba\uff0c2019\u5e74\uff09\uff0cC3\uff08Sun\u7b49\u4eba\uff0c2019\uff09\u3002 \u53c2\u8003\u6d88\u6b67\u6570\u636e\u96c6\uff0c\u5305\u62ecWinoGrande Sakaguchi\u7b49\u4eba\uff082019\uff09\u548cCLUEWSC\uff08Xu\u7b49\u4eba\uff0c2020\uff09\u3002 \u8bed\u8a00\u5efa\u6a21\u6570\u636e\u96c6\uff0c\u5305\u62ecPile\uff08Gao\u7b49\u4eba\uff0c2020\uff09\u3002 \u4e2d\u56fd\u7406\u89e3\u548c\u6587\u5316\u6570\u636e\u96c6\uff0c\u5305\u62ecCHID\uff08Zheng\u7b49\u4eba\uff0c2019\uff09\u548cCCPM\uff08Li\u7b49\u4eba\uff0c2021\uff09\u3002</p> <p>\u6570\u5b66\u6570\u636e\u96c6\u5305\u62ecGSM8K\uff08Cobbe\u7b49\u4eba\uff0c2021\u5e74\uff09\u3001Math\uff08Hendrycks\u7b49\u4eba\uff0c2021\uff09\u548cCMath\uff08Wei\u7b49\u4eba\uff0c2023\u5e74\uff09\u3002 \u4ee3\u7801\u6570\u636e\u96c6\u5305\u62ecHumanEval\uff08Chen\u7b49\u4eba\uff0c2021\uff09\u548cMBPP\uff08Austin\u7b49\uff0c2021\uff09\u3002 \u5305\u62ecAGIEval\u5728\u5185\u7684\u6807\u51c6\u5316\u68c0\u67e5\uff08Zhong\u7b49\u4eba\uff0c2023\uff09\u3002 \u6211\u4eec\u5c06\u57fa\u4e8e\u56f0\u60d1\u5ea6\u7684\u8bc4\u4f30\u5e94\u7528\u4e8e\u9700\u8981\u4ece\u591a\u4e2a\u9009\u9879\u4e2d\u9009\u62e9\u7b54\u6848\u7684\u6570\u636e\u96c6\u3002\u8fd9\u4e9b\u6570\u636e\u96c6\u5305\u62ecHellaSwag\u3001PIQA\u3001WinoGrande\u3001RACE Middle\u3001RACE High\u3001MMLU\u3001ARC Easy\u3001ARC Challenge\u3001OpenBookQA\u3001CHID\u3001C-Eval\u3001CMMLU\u3001C3\u548cCCPM\u3002\u8fd9\u91cc\u7684\u57fa\u4e8e\u56f0\u60d1\u5ea6\u7684\u8bc4\u4f30\u662f\u6307\u8ba1\u7b97\u6bcf\u4e2a\u9009\u9879\u7684\u56f0\u60d1\u5ea6\uff0c\u5e76\u9009\u62e9\u6700\u4f4e\u7684\u4e00\u4e2a\u4f5c\u4e3a\u6a21\u578b\u9884\u6d4b\u3002\u5bf9\u4e8eARC\u548cOpenBookQA\uff0c\u6211\u4eec\u4f7f\u7528\u65e0\u6761\u4ef6\u5f52\u4e00\u5316\u8ba1\u7b97\u56f0\u60d1\u5ea6\uff08Brown\u7b49\u4eba\uff0c2020\uff09\uff0c\u5bf9\u4e8e\u5176\u4ed6\u6570\u636e\u96c6\uff0c\u6211\u4eec\u4f7f\u7528\u957f\u5ea6\u5f52\u4e00\u5316\u3002 \u6211\u4eec\u5bf9TriviaQA\u3001NaturalQuestions\u3001DROP\u3001MATH\u3001GSM8K\u3001HumanEval\u3001MBPP\u3001BBH\u3001AGIEval\u3001CLUEWSC\u548cCMath\u5e94\u7528\u57fa\u4e8e\u751f\u6210\u7684\u8bc4\u4f30\u3002\u8fd9\u91cc\u7684\u57fa\u4e8e\u751f\u6210\u7684\u8bc4\u4f30\u662f\u6307\u8ba9\u6a21\u578b\u751f\u6210\u81ea\u7531\u6587\u672c\uff0c\u5e76\u4ece\u751f\u6210\u7684\u6587\u672c\u4e2d\u89e3\u6790\u7ed3\u679c\u3002\u5bf9\u4e8e\u57fa\u4e8e\u751f\u6210\u7684\u8bc4\u4f30\uff0c\u6211\u4eec\u4f7f\u7528\u8d2a\u5a6a\u89e3\u7801\u3002 \u6211\u4eec\u5c06\u57fa\u4e8e\u8bed\u8a00\u5efa\u6a21\u7684\u8bc4\u4f30\u5e94\u7528\u4e8e\u6869\u6d4b\u8bd5\uff0c\u8fd9\u610f\u5473\u7740\u8ba1\u7b97\u6d4b\u8bd5\u8bed\u6599\u5e93\u4e0a\u7684\u6bcf\u5b57\u8282\u6bd4\u7279\u6570\u3002 \u6211\u4eec\u4f7f\u75282048\u62164096\u4f5c\u4e3a\u4e0d\u540c\u57fa\u51c6\u7684\u6700\u5927\u5e8f\u5217\u957f\u5ea6\u3002\u8bc4\u4f30\u683c\u5f0f\u7684\u8be6\u7ec6\u4fe1\u606f\u89c1\u9644\u5f55A.6\u3002</p> <p>5.1.1 \u57fa\u7840\u6a21\u578b \u88685\u663e\u793a\u4e86\u8bc4\u4f30\u57fa\u51c6\u7684\u4e3b\u8981\u7ed3\u679c\u3002\u5c3d\u7ba1DeepSeek\u6a21\u578b\u57282T\u53cc\u8bed\u8bed\u6599\u5e93\u4e0a\u8fdb\u884c\u4e86\u9884\u8bad\u7ec3\uff0c\u4f46\u5b83\u4eec\u5728\u82f1\u8bed\u7406\u89e3\u57fa\u51c6\u4e0a\u7684\u8868\u73b0\u4e0eLLaMA2\u6a21\u578b\u76f8\u5f53\uff0cLLaMA2\u4e5f\u6d88\u80172T\u4ee4\u724c\uff0c\u4f46\u4e13\u6ce8\u4e8e\u82f1\u8bed\u3002\u6b64\u5916\uff0c\u4e0eLLaMA2 70B\u76f8\u6bd4\uff0cDeepSeek 67B\u5728MATH\u3001GSM8K\u3001HumanEval\u3001MBPP\u3001BBH\u548c\u4e2d\u56fd\u57fa\u51c6\u6d4b\u8bd5\u4e0a\u7684\u6027\u80fd\u8981\u597d\u5f97\u591a\u3002\u6211\u4eec\u5728\u9644\u5f55A.3\u4e2d\u663e\u793a\u4e86\u57fa\u51c6\u66f2\u7ebf\u3002\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c\u968f\u7740\u6a21\u578b\u7684\u6269\u5c55\uff0c\u4e00\u4e9b\u4efb\u52a1\u6027\u80fd\u5f97\u5230\u4e86\u63d0\u5347\uff0c\u5982GSM8K\u548cBBH\u3002\u9274\u4e8e\u6211\u4eec\u5728\u540c\u4e00\u6570\u636e\u96c6\u4e0a\u8bad\u7ec3\u4e867B\u548c67B\uff0c\u8fd9\u79cd\u6539\u8fdb\u7684\u51fa\u73b0\u53ef\u4ee5\u5f52\u56e0\u4e8e\u5927\u578b\u6a21\u578b\u5f3a\u5927\u7684\u5c11\u955c\u5934\u5b66\u4e60\u80fd\u529b\u3002\u7136\u800c\uff0c\u968f\u7740\u6570\u5b66\u6570\u636e\u6bd4\u4f8b\u7684\u589e\u52a0\uff0c\u5c0f\u578b\u548c\u5927\u578b\u6a21\u578b\u4e4b\u95f4\u7684\u5dee\u5f02\u53ef\u80fd\u4f1a\u7f29\u5c0f\u3002 \u4e00\u4e2a\u6709\u8da3\u7684\u89c2\u5bdf\u7ed3\u679c\u662f\uff0cDeepSeek 67B\u76f8\u5bf9\u4e8eLLaMA2 70B\u7684\u4f18\u52bf\u5927\u4e8eDeepSeek 7B\u76f8\u5bf9\u4e8eLLaMA27B\u7684\u4f18\u52bf\u3002\u8fd9\u4e00\u73b0\u8c61\u51f8\u663e\u4e86\u8bed\u8a00\u51b2\u7a81\u5bf9\u8f83\u5c0f\u6a21\u578b\u7684\u66f4\u5927\u5f71\u54cd\u3002\u6b64\u5916\uff0cLLaMA2\u5728\u67d0\u4e9b\u4e2d\u6587\u4efb\u52a1\u4e0a\u8868\u73b0\u51fa\u8272\uff0c\u5982CMath\uff0c\u5c3d\u7ba1\u6ca1\u6709\u63a5\u53d7\u8fc7\u4e13\u95e8\u7684\u4e2d\u6587\u6570\u636e\u57f9\u8bad\u3002\u8fd9\u8868\u660e\uff0c\u67d0\u4e9b\u57fa\u672c\u80fd\u529b\uff0c\u5982\u6570\u5b66\u63a8\u7406\uff0c\u53ef\u4ee5\u5728\u8bed\u8a00\u4e4b\u95f4\u6709\u6548\u5730\u4f20\u9012\u3002\u7136\u800c\uff0c\u50cfCHID\u8fd9\u6837\u7684\u4efb\u52a1\u6d89\u53ca\u8bc4\u4f30\u6c49\u8bed\u6210\u8bed\u7684\u4f7f\u7528\u60c5\u51b5\uff0c\u9700\u8981\u6a21\u578b\u5728\u9884\u8bad\u7ec3\u671f\u95f4\u6d88\u8017\u5927\u91cf\u7684\u6c49\u8bed\u6807\u8bb0\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0cLLaMA2\u7684\u8868\u73b0\u660e\u663e\u4e0d\u5982DeepSeek LLM\u3002\u00ac</p> <p>5.1.2 \u804a\u5929\u6a21\u578b \u88686\u5c55\u793a\u4e86DeepSeek\u804a\u5929\u6a21\u578b\u7684\u7ed3\u679c\uff0c\u5c55\u793a\u4e86\u8c03\u4f18\u540e\u5927\u591a\u6570\u4efb\u52a1\u7684\u603b\u4f53\u6539\u8fdb\u3002\u7136\u800c\uff0c\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b</p> <p>\u8bed\u8a00 \u57fa\u51c6  \u6d4b\u8bd5\u955c\u5934    LLaMA2 7B   DeepSeek 7B LLaMA2 70B  DeepSeek 67B     HellaSwag   0\u5c04\u51fb 75.6    75.4    84.0    84.0     PIQA    0\u5c04\u51fb 78.0    79.2    82.0    83.6     \u7ef4\u8bfa\u683c\u5170\u5fb7   0\u5c04\u51fb 69.6    70.5    80.4    79.8     \u6bd4\u8d5b\u4e2d\u95f4    5\u62cd  60.7    63.2    70.1    69.9     \u6bd4\u8d5b\u9ad8 5\u62cd  45.8    46.5    54.3    50.7     TriviaQA    5\u62cd  63.8    59.7    79.5    78.9     \u81ea\u7136\u95ee\u9898    5\u62cd  25.5    22.2    36.1    36.6     MMLU    5\u62cd  45.8    48.2    69.0    71.3     ARC\u7b80\u5355   0\u5c04\u51fb 69.1    67.9    76.5    76.9 \u82f1\u8bed  ARC\u6311\u6218\u8d5b  0\u5c04\u51fb 49.0    48.1    59.5    59.0     OpenBookQA  0\u5c04\u51fb 57.4    55.8    60.4    60.2     \u4e0b\u964d  1\u6b21\u5c04\u51fb    39.8    41.0    69.2    67.9     \u6570\u5b66  4-shot  2.5 6.0 13.5    18.7     GSM8K   8\u62cd  15.5    17.4    58.4    63.4     HumanEval   0\u5c04\u51fb 14.6    26.2    28.7    42.7     MBPP    3-\u70ed 21.8    39.0    45.6    57.4     BBH 3-\u70ed 38.5    39.5    62.9    68.7     AGIEval 0\u5c04\u51fb 22.8    26.4    37.2    41.3     \u6869\u57fa\u68c0\u6d4b    -   0.741   0.725   0.649   0.642     CLUEWSC 5\u62cd  64.0    73.1    76.5    81.0     CHID    0\u5c04\u51fb 37.9    89.3    55.5    92.1     C-Eval  5\u62cd  33.9    45.0    51.4    66.1 \u4e2d\u56fd\u4eba CMMLU   5\u62cd  32.6    47.2    53.1    70.8     CMath   3-\u70ed 25.1    34.5    53.9    63.0     C3  0\u5c04\u51fb 47.4    65.4    61.7    75.3     CCPM    0\u5c04\u51fb 60.7    76.9    66.2    88.5</p> <p>\u88685 |\u4e3b\u8981\u7ed3\u679c\u3002\u6211\u4eec\u62a5\u544a\u7684\u8bc4\u4f30\u7ed3\u679c\u57fa\u4e8e\u5185\u90e8\u8bc4\u4f30\u6846\u67b6\u3002\u7c97\u4f53\u6570\u5b57\u8868\u793a4\u4e2a\u6a21\u578b\u4e2d\u7684\u6700\u4f73\u7ed3\u679c\u3002\u5bf9\u4e8e\u6869\u6d4b\u8bd5\uff0c\u6211\u4eec\u62a5\u544a\u6bcf\u5b57\u8282\u6bd4\u7279\u6570\uff08BPB\uff09\uff0c\u5bf9\u4e8eDROP\uff0c\u6211\u4eec\u62a5\u544aF1\u5206\u6570\uff0c\u5bf9\u4e8e\u5176\u4ed6\u4efb\u52a1\uff0c\u6211\u4eec\u62a5\u544a\u51c6\u786e\u6027\u3002\u8bf7\u6ce8\u610f\uff0c\u6d4b\u8bd5\u955c\u5934\u662f\u6700\u5927\u503c\uff0c\u7531\u4e8e\u4e0a\u4e0b\u6587\u957f\u5ea6\u6709\u9650\u6216\u540c\u4e00\u6bb5\u843d\u4e2d\u53ef\u7528\u4e8eRACE\u7b49\u9605\u8bfb\u7406\u89e3\u4efb\u52a1\u7684\u955c\u5934\u6570\u91cf\u6709\u9650\uff0c\u53ef\u80fd\u4f1a\u5e94\u7528\u8f83\u5c11\u7684\u955c\u5934\u3002</p> <p>\u67d0\u4e9b\u4efb\u52a1\u88ab\u62d2\u7edd\u4e86\u3002 \u77e5\u8bc6\uff1a\u6211\u4eec\u89c2\u5bdf\u5230\u57fa\u7840\u6a21\u578b\u548c\u804a\u5929\u6a21\u578b\u5728\u77e5\u8bc6\u76f8\u5173\u4efb\u52a1\u4e2d\u7684\u6ce2\u52a8\uff0c\u5982TriviaQA\u3001MMLU\u548cC-Eval\u3002\u7136\u800c\uff0c\u6211\u4eec\u4e0d\u8ba4\u4e3a\u8fd9\u79cd\u5fae\u5c0f\u7684\u6ce2\u52a8\u8868\u660eSFT\u540e\u77e5\u8bc6\u7684\u83b7\u53d6\u6216\u4e27\u5931\u3002SFT\u7684\u4ef7\u503c\u5728\u4e8e\u5b66\u4e60\u5728\u804a\u5929\u6a21\u578b\u7684\u96f6\u6837\u672c\u8bbe\u7f6e\u4e2d\u83b7\u5f97\u4e0e\u57fa\u672c\u6a21\u578b\u7684\u5c11\u70ed\u70b9\u8bbe\u7f6e\u76f8\u5f53\u7684\u5206\u6570\u7684\u80fd\u529b\uff0c\u8fd9\u4e0e\u771f\u5b9e\u573a\u666f\u4e00\u81f4\u3002\u4f8b\u5982\uff0c\u804a\u5929\u6a21\u578b\u76840\u6b21MMLU\u6027\u80fd\u4e0e\u57fa\u672c\u6a21\u578b\u76845\u6b21MMLU\u7684\u6027\u80fd\u76f8\u5f53\u3002 \u63a8\u7406\uff1a\u7531\u4e8e\u5f88\u5927\u4e00\u90e8\u5206SFT\u5b9e\u4f8b\u91c7\u7528CoT\u683c\u5f0f\uff0cWei\u7b49\u4eba\uff082022\uff09\u7684\u804a\u5929\u6a21\u578b\u5728\u63a8\u7406\u4efb\u52a1\u65b9\u9762\u7565\u6709\u6539\u8fdb\uff0c\u5982BBH\u548cNaturalQuestions\u3002\u7136\u800c\uff0c\u6211\u4eec\u8ba4\u4e3aSFT\u9636\u6bb5\u4e0d\u662f\u5b66\u4e60\u63a8\u7406\u80fd\u529b\uff0c\u800c\u662f\u5b66\u4e60\u63a8\u7406\u8def\u5f84\u7684\u6b63\u786e\u683c\u5f0f\u3002</p> <p>\u8bed\u8a00  \u57fa\u51c6  DeepSeek 7B\u5e95\u5ea7    DeepSeek 7B\u804a\u5929    DeepSeek 67B\u57fa\u5730   DeepSeek 67B\u804a\u5929</p> Text Only<pre><code>HellaSwag   75.4    68.5    84.0    75.7\nPIQA    79.2    77.6    83.6    82.6\n\u7ef4\u8bfa\u683c\u5170\u5fb7   70.5    66.9    79.8    76.0\n\u6bd4\u8d5b\u4e2d\u95f4    63.2    65.2    69.9    70.9\n\u6bd4\u8d5b\u9ad8 46.5    50.8    50.7    56.0\nTriviaQA    59.7    57.9    78.9    81.5\n\u81ea\u7136\u95ee\u9898    22.2    32.5    36.6    47.0\nMMLU    48.2    49.4    71.3    71.1\n</code></pre> <p>\u82f1\u8bed  ARC\u7b80\u5355 ARC\u6311\u6218\u8d5b  67.9 48.1    71.0 49.4    76.9 59.0    81.6 64.1     GSM8K   17.4    63.0    63.4    84.1     \u6570\u5b66  6.0 15.8    18.7    32.6     HumanEval   26.2    48.2    42.7    73.8     MBPP    39.0    35.2    57.4    61.4     \u4e0b\u964d  41.0    49.1    67.9    71.9     OpenBookQA  55.8    54.8    60.2    63.2     BBH 39.5    42.3    68.7    71.7     AGIEval 26.4    19.3    41.3    46.4</p> Text Only<pre><code>CLUEWSC 73.1    71.9    81.0    60.0\nCHID    89.3    64.9    92.1    72.6\nC-Eval  45.0    47.0    66.1    65.2\n</code></pre> <p>\u4e2d\u56fd\u4eba CMMLU   47.2    49.7    70.8    67.8     CMath   34.5    68.4    63.0    80.3     C3  65.4    66.4    75.3    77.0     CCPM    76.9    76.5    88.5    84.9</p> <p>\u88686 |\u57fa\u672c\u6a21\u578b\u548c\u804a\u5929\u6a21\u578b\u4e4b\u95f4\u7684\u6bd4\u8f83\u3002\u6211\u4eec\u8bc4\u4f30\u4e86MMLU\u3001GSM8K\u3001MATH\u3001C-Eval\u548cCMMLU\u76840\u955c\u5934\u804a\u5929\u6a21\u578b\uff0c\u800c\u57fa\u672c\u6a21\u578b\u7ed3\u679c\u4ecd\u5728\u5c11\u6570\u955c\u5934\u8bbe\u7f6e\u4e2d\u83b7\u5f97\u3002</p> <p>\u6027\u80fd\u4e0b\u964d\u4efb\u52a1\uff1a\u65e0\u8bba\u9009\u62e9\u4f55\u79cd\u6a21\u578b\u5927\u5c0f\u6216\u9884\u5148\u8bad\u7ec3\u7684\u68c0\u67e5\u70b9\uff0c\u4e00\u4e9b\u4efb\u52a1\u7684\u6027\u80fd\u5728\u5fae\u8c03\u540e\u90fd\u4f1a\u6301\u7eed\u4e0b\u964d\u3002\u8fd9\u4e9b\u7279\u5b9a\u7684\u4efb\u52a1\u901a\u5e38\u6d89\u53ca\u5b8c\u5f62\u586b\u7a7a\u4efb\u52a1\u6216\u53e5\u5b50\u5b8c\u6210\u4efb\u52a1\uff0c\u5982HellaSwag\u3002\u53ef\u4ee5\u5408\u7406\u5730\u5047\u8bbe\u7eaf\u8bed\u8a00\u6a21\u578b\u66f4\u6709\u80fd\u529b\u5904\u7406\u6b64\u7c7b\u4efb\u52a1\u3002 \u6570\u5b66\u548c\u4ee3\u7801\uff1a\u7ecf\u8fc7\u5fae\u8c03\uff0c\u6211\u4eec\u7684\u6a21\u578b\u5728\u6570\u5b66\u548c\u7f16\u7801\u4efb\u52a1\u65b9\u9762\u6709\u4e86\u663e\u8457\u6539\u8fdb\u3002\u4f8b\u5982\uff0cHumanEval\u548cGSM8K\u5f97\u5206\u63d0\u9ad8\u4e8620\u591a\u4e2a\u70b9\u3002\u6211\u4eec\u5bf9\u6b64\u7684\u89e3\u91ca\u662f\uff0c\u57fa\u7840\u6a21\u578b\u6700\u521d\u6ca1\u6709\u5145\u5206\u9002\u5e94\u8fd9\u4e9b\u4efb\u52a1\uff0cSFT\u9636\u6bb5\u901a\u8fc7\u5e7f\u6cdb\u7684SFT\u6570\u636e\u5b66\u4e60\u4e86\u7f16\u7801\u548c\u6570\u5b66\u65b9\u9762\u7684\u989d\u5916\u77e5\u8bc6\u3002\u7136\u800c\uff0c\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u8be5\u6a21\u578b\u7684\u529f\u80fd\u53ef\u80fd\u4e3b\u8981\u96c6\u4e2d\u5728\u4ee3\u7801\u8865\u5168\u548c\u4ee3\u6570\u95ee\u9898\u4e0a\u3002\u4e3a\u4e86\u5168\u9762\u4e86\u89e3\u6570\u5b66\u548c\u7f16\u7801\uff0c\u5728\u9884\u8bad\u7ec3\u9636\u6bb5\u7eb3\u5165\u5404\u79cd\u6570\u636e\u81f3\u5173\u91cd\u8981\uff0c\u8fd9\u662f\u672a\u6765\u7684\u5de5\u4f5c\u3002\u6211\u4eec\u5728\u9644\u5f55a.4\u4e2d\u5bf9\u4ee3\u7801\u548c\u6570\u5b66\u4efb\u52a1\u8fdb\u884c\u4e86\u8be6\u7ec6\u5206\u6790\u3002 \u57287B\u6a21\u578b\u5fae\u8c03\u4e2d\uff0c\u6211\u4eec\u6700\u521d\u4f7f\u7528\u6240\u6709\u6570\u636e\u5bf9\u6a21\u578b\u8fdb\u884c\u5fae\u8c03\u3002\u968f\u540e\uff0c\u5f15\u5165\u4e86\u7b2c\u4e8c\u9636\u6bb5\uff0c\u8be5\u9636\u6bb5\u4e0d\u5305\u62ec\u6570\u5b66\u548c\u4ee3\u7801\u6570\u636e\u3002\u8fd9\u79cd\u65b9\u6cd5\u80cc\u540e\u7684\u52a8\u673a\u662f\uff0c\u7b2c\u4e00\u9636\u6bb5\u6a21\u578b\u7684\u91cd\u590d\u7387\u4e3a2.0%\uff0c\u964d\u4f4e\u52301.4%</p> <p>\u6a21\u578b \u603b\u5206  \u5e73\u5747\u503c\u3002 \u63a8\u7406 \u603b\u5206  \u6570\u5b66\u3002\u903b\u8f91\u3002 \u6570\u5b66  \u903b\u8f91 \u8ba1\u7b97  \u63a8\u7406  \u5e73\u5747\u503c\u3002 \u8bed\u8a00 \u603b\u5206  \u57fa\u91d1\u3002\u829d\u52a0\u54e5\u3002\u6253\u5f00\u3002\u624b\u8155\u3002\u89d2\u8272\u3002\u8d5e\u6210\u7684\u610f\u89c1\u3002 \u57fa\u672c \u4e2d\u6587   \u7efc\u5408  \u6587\u672c \u89d2\u8272 \u4e13\u4e1a\u4efb\u52a1  \u7406\u89e3  \u95ee\u7b54  \u5199\u4f5c  \u626e\u6f14 \u80fd\u529b</p> <p>gpt-4-1106\u9884\u89c8    8.01    7.73    7.80    7.66    8.29    7.99    7.33    8.61    8.67    8.47    8.65 gpt-4-0613  7.53    7.47    7.56    7.37    7.59    7.81    6.93    7.42    7.93    7.51    7.94 DeepSeek-67B-Chat-DPO  6.69    5.77    6.13    5.41    7.60    7.29    7.47    7.82    7.51    7.83    7.71 DeepSeek-67B-Chat  6.43    5.75    5.71    5.79    7.11    7.12    6.52    7.58    7.20    6.91    7.37 chatglm\u6da1\u8f6e\u589e\u538b\u5668    6.24    5.00    4.74    5.26    7.49    6.82    7.17    8.16    7.77    7.76    7.24 erniebot-3.5    6.14    5.15    5.03    5.27    7.13    6.62    7.60    7.26    7.56    6.83    6.90 gpt-3.5\u6da1\u8f6e-0613  6.08    5.35    5.68    5.02    6.82    6.71    5.81    7.29    7.03    7.28    6.77 chatglm pro 5.83    4.65    4.54    4.75    7.01    6.51    6.76    7.47    7.07    7.34    6.89 spark_desk_v2   5.74    4.73    4.71    4.74    6.76    5.84    6.97    7.29    7.18    6.92    6.34 Qwen-14B\u5e3d\u5b50  5.72    4.81    4.91    4.71    6.63    6.90    6.36    6.74    6.64    6.59    6.56 \u767e\u5ddd2-13B\u5e3d    5.25    3.92    3.76    4.07    6.59    6.22    6.05    7.11    6.97    6.75    6.43 \u804a\u5929GLM3-6B   4.97    3.85    3.55    4.14    6.10    5.75    5.29    6.71    6.83    6.28    5.73 \u767e\u5ddd2-7B\u5e3d\u5b50    4.97    3.66    3.56    3.75    6.28    5.81    5.50    7.13    6.84    6.53    5.84 \u5b9e\u4e60\u751fLM-20B   4.96    3.66    3.39    3.92    6.26    5.96    5.50    7.18    6.19    6.49    6.22 Qwen-7B\u5e3d\u5b50   4.91    3.73    3.62    3.83    6.09    6.40    5.74    6.26    6.31    6.19    5.66 \u804a\u5929GLM2-6B   4.48    3.39    3.16    3.61    5.58    4.91    4.52    6.66    6.25    6.08    5.08 InternLM-Chat-7B    3.65    2.56    2.45    2.66    4.75    4.34    4.09    5.82    4.89    5.32    4.06 \u4e2d\u6587-LLAMA2-7B\u5e3d\u5b50  3.57    2.68    2.29    3.07    4.46    4.31    4.26    4.50    4.63    4.91    4.13 LLaMA-2-13B-\u4e2d\u6587\u804a\u5929    3.35    2.47    2.21    2.73    4.23    4.13    3.31    4.79    3.93    4.53    4.71</p> <p>\u88687|AlignBench\u6392\u884c\u699c\u6309gpt-4-0613\u8bc4\u5206\u3002\u6a21\u578b\u6309\u603b\u5206\u964d\u5e8f\u6392\u5217\u3002\u5e26*\u7684\u7ed3\u679c\u662f\u6211\u4eec\u57fa\u4e8e\u5b98\u65b9AlignBench\u5b58\u50a8\u5e93\u7684\u8bc4\u4f30\u7ed3\u679c\uff0c\u800c\u6240\u6709\u5176\u4ed6\u7ed3\u679c\u90fd\u6765\u81eaAlignBench\u8bba\u6587\u3002\u6211\u4eec\u53d1\u73b0\uff0c\u6211\u4eec\u7684Deepseek-67B-Chat\u6a21\u578b\u660e\u663e\u4f18\u4e8eChatGPT\u548c\u5176\u4ed6\u57fa\u7ebf\u6a21\u578b\uff0c\u8fd9\u8868\u660e\u6211\u4eec\u7684\u6a21\u578b\u5728\u57fa\u672c\u4e2d\u6587\u4efb\u52a1\u548c\u9ad8\u7ea7\u4e2d\u6587\u63a8\u7406\u4efb\u52a1\u4e2d\u90fd\u8868\u73b0\u51fa\u8272\u3002\u6b64\u5916\uff0c\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0DPO\u5de5\u827a\u5728\u51e0\u4e4e\u6240\u6709\u9886\u57df\u90fd\u5e26\u6765\u4e86\u6539\u8fdb\u3002\u00ac</p> <p>\u5728\u7b2c\u4e8c\u9636\u6bb5\u8c03\u6574\u540e\uff0c\u540c\u65f6\u4fdd\u6301\u57fa\u51c6\u5206\u6570\u3002\u572867B\u6a21\u578b\u7684\u60c5\u51b5\u4e0b\uff0c\u7ecf\u8fc7\u7b2c\u4e00\u9636\u6bb5\u7684\u5fae\u8c03\uff0c\u91cd\u590d\u7387\u5df2\u7ecf\u4f4e\u4e8e1%\uff0c\u7b2c\u4e8c\u9636\u6bb5\u4f1a\u635f\u5bb3\u6a21\u578b\u5728\u57fa\u51c6\u4e0a\u7684\u5f97\u5206\u3002\u56e0\u6b64\uff0c67B\u6a21\u578b\u53ea\u8fdb\u884c\u4e86\u4e00\u4e2a\u9636\u6bb5\u7684SFT\u3002</p> <p>5.2 \u5f00\u653e\u5f0f\u8bc4\u4f30 \u5bf9\u4e8e\u804a\u5929\u6a21\u578b\uff0c\u9664\u4e86\u89c2\u5bdf\u6807\u51c6\u57fa\u51c6\u4e0a\u7684\u6307\u6807\u5916\uff0c\u5728\u5f00\u653e\u57df\u548c\u5f00\u653e\u5f0f\u95ee\u9898\u4e2d\u751f\u6210\u7684\u7ed3\u679c\u7684\u8d28\u91cf\u76f4\u63a5\u5f71\u54cd\u5b9e\u9645\u7684\u7528\u6237\u4f53\u9a8c\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u5206\u522b\u5728\u4e2d\u6587\u548c\u82f1\u6587\u4efb\u52a1\u4e2d\u6d4b\u8bd5\u4e86\u804a\u5929\u6a21\u578b\u7684\u5f00\u653e\u5f0f\u751f\u6210\u80fd\u529b\u3002</p> <p>5.2.1 \u4e2d\u56fd\u5f00\u653e\u5f0f\u8bc4\u4f30 \u5bf9\u4e8e\u4e2d\u56fd\u5f00\u653e\u5f0f\u8bc4\u4f30\uff0c\u6211\u4eec\u5728\u9ad8\u8d28\u91cf\u7684\u5f00\u653e\u5f0f\u95ee\u9898\u6d4b\u8bd5\u96c6AlignBench\u4e0a\u6d4b\u8bd5\u4e86\u6211\u4eec\u7684\u804a\u5929\u6a21\u578b\u5728\u4e0d\u540c\u9886\u57df\u7684\u7efc\u5408\u6027\uff08Liu\u7b49\u4eba\uff0c2023\uff09\u3002AlignBench\u5171\u67098\u4e2a\u4e3b\u8981\u7c7b\u522b\uff0c36\u4e2a\u6b21\u8981\u7c7b\u522b\uff0c\u5305\u542b683\u4e2a\u95ee\u9898\u3002\u5bf9\u4e8e\u6bcf\u4e2a\u95ee\u9898\uff0c\u9664\u4e86\u63d0\u793a\u5916\uff0cAlignBench\u8fd8\u4e3aGPT-4\u63d0\u4f9b\u4e13\u4e1a\u7684\u53c2\u8003\u7b54\u6848\u548c\u8bc4\u5206\u6a21\u677f\uff0c\u4ee5\u5224\u65ad\u56de\u7b54\u7684\u8d28\u91cf\u3002 \u6211\u4eec\u4f7f\u7528\u5b98\u65b9AlignBench Github\u4ee3\u7801\u5e93\u6765\u5b9e\u73b0\u5bf9</p> <p>\u6211\u4eec\u7684\u6a21\u578b\u3002\u6211\u4eec\u5c06\u5173\u952e\u6e29\u5ea6\u53c2\u6570\u4e0e\u539f\u59cb\u8bbe\u7f6e\u4e25\u683c\u5bf9\u9f50\uff1a\u5bf9\u4e8e\u89d2\u8272\u626e\u6f14\u3001\u5199\u4f5c\u80fd\u529b\u548c\u5f00\u653e\u5f0f\u95ee\u9898\uff0c\u751f\u6210\u6e29\u5ea6\u8bbe\u7f6e\u4e3a0.7\uff1b\u800c\u5bf9\u4e8e\u5176\u4ed6\u4efb\u52a1\uff0c\u751f\u6210\u6e29\u5ea6\u8bbe\u7f6e\u4e3a0.1\u3002 AlignBench\u6392\u884c\u699c\u5982\u88687\u6240\u793a\u3002\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\u6211\u4eec\u7684DeepSeek 67B\u804a\u5929\u6a21\u578b\u8d85\u8d8a\u4e86ChatGPT\u548c\u5176\u4ed6\u57fa\u7ebf\u6a21\u578b\uff0c\u4ec5\u6b21\u4e8eGPT-4\u7684\u4e24\u4e2a\u7248\u672c\u3002\u8fd9\u8868\u660e\uff0c\u4e0e\u5176\u4ed6\u5f00\u6e90\u6216\u4e13\u6709\u7684\u4e2d\u6587\u5927\u578b\u8bed\u8a00\u6a21\u578b\u76f8\u6bd4\uff0c\u6211\u4eec\u7684\u6a21\u578b\u5728\u5404\u79cd\u4e2d\u6587\u4efb\u52a1\u4e2d\u8868\u73b0\u51fa\u8272\u3002DPO\u6a21\u578b\u5728\u51e0\u4e4e\u6240\u6709\u6307\u6807\u4e0a\u90fd\u6709\u6240\u6539\u5584\uff0c\u8fd9\u8868\u660e\u4e86DPO\u8bad\u7ec3\u8fc7\u7a0b\u5bf9\u6a21\u578b\u5bf9\u9f50\u7684\u79ef\u6781\u5f71\u54cd\u3002 \u5bf9\u4e8e\u57fa\u672c\u7684\u4e2d\u6587\u4efb\u52a1\uff0c\u6211\u4eec\u7684\u6a21\u578b\u5728\u6240\u6709\u6a21\u578b\u4e2d\u5904\u4e8e\u7b2c\u4e00\u5c42\uff0c\u6211\u4eec\u7684DPO\u6a21\u578b\u7684\u4e2d\u6587\u57fa\u672c\u8bed\u8a00\u80fd\u529b\u751a\u81f3\u9ad8\u4e8e\u6700\u65b0\u7248\u672c\u7684GPT-4\u3002\u5bf9\u4e8e\u9ad8\u7ea7\u4e2d\u6587\u63a8\u7406\u4efb\u52a1\uff0c\u6211\u4eec\u7684\u6a21\u578b\u5f97\u5206\u660e\u663e\u9ad8\u4e8e\u5176\u4ed6\u4e2d\u6587LLM\uff0c\u5e76\u4e14\u6709\u660e\u663e\u7684\u5dee\u8ddd\uff0c\u8fd9\u8868\u660e\u6211\u4eec\u7684\u6a21\u578b\u5728\u66f4\u590d\u6742\u7684\u4e2d\u6587\u903b\u8f91\u63a8\u7406\u548c\u6570\u5b66\u8ba1\u7b97\u4e2d\u8868\u73b0\u51fa\u8272\u3002</p> <p>5.2.2 \u82f1\u8bed\u5f00\u653e\u5f0f\u8bc4\u4f30 \u5bf9\u4e8e\u82f1\u8bed\u5f00\u653e\u5f0f\u8bc4\u4f30\uff0c\u6211\u4eec\u4f7f\u7528MT Bench\u57fa\u51c6\uff08Zheng\u7b49\u4eba\uff0c2023\uff09\uff0c\u5176\u4e2d\u5305\u542b8\u7c7b\u4e0d\u540c\u7684\u591a\u8f6e\u95ee\u9898\u3002\u5982\u88688\u6240\u793a\uff0c\u6211\u4eec\u7684DeepSeek LLM 67B Chat\u4f18\u4e8e\u5176\u4ed6\u5f00\u6e90\u6a21\u578b\uff0c\u5982LLaMA-2-Chat Touvron\u7b49\u4eba\uff082023b\uff0970B\u3001Xwin 70B v0.1\u548cT\u00dcLU 2+DPO 70B\uff08Ivison\u7b49\u4eba\uff0c2023\uff09\uff0c\u5f97\u5206\u4e3a8.35\uff0c\u4e0eGPT-3.5-turbo\u76f8\u5f53\u3002\u6b64\u5916\uff0c\u5728DPO\u9636\u6bb5\u4e4b\u540e\uff0c\u6211\u4eec\u7684DeepSeek LLM 67B\u804a\u5929DPO\u5c06\u5e73\u5747\u5f97\u5206\u8fdb\u4e00\u6b65\u63d0\u9ad8\u52308.76\uff0c\u4ec5\u843d\u540e\u4e8eGPT-4\uff08OpenAI\uff0c2023\uff09\u3002\u8fd9\u4e9b\u7ed3\u679c\u8bf4\u660e\u4e86DeepSeek LLM\u5f3a\u5927\u7684\u591a\u531d\u5f00\u653e\u5f0f\u751f\u6210\u80fd\u529b\u3002</p> <p>\u6a21\u578b  \u830e   \u4eba\u6587\u5b66\u79d1    \u63a8\u7406  \u7f16\u7801  \u6570\u5b66  \u63d0\u53d6  \u89d2\u8272\u626e\u6f14    \u5199\u4f5c  \u5e73\u5747\u503c GPT-4-1106-\u9884\u89c8  9.90    9.95    8.10    9.05    7.95    9.90    9.50    9.70    9.26 GPT-3.5\u6da1\u8f6e-0613 9.55    9.95    6.20    7.05    7.05    9.00    8.65    9.65    8.39 LLAMA-2-\u804a\u59297B   8.65    8.75    4.25    3.00    2.40    6.50    7.70    8.90    6.27 LLAMA-2-\u804a\u592913B  8.63    9.75    5.10    3.00    3.45    6.93    7.50    8.85    6.65 LLAMA-2-\u804a\u592970B  8.93    9.63    5.80    3.15    3.30    7.25    7.50    9.30    6.86 \u897f\u98ce\u8d1d\u58547B 9.03    9.63    5.60    5.10    4.45    7.45    8.20    9.35    7.35 Xwin 70b v0.1  9.68    9.95    6.55    4.25    3.30    8.75    8.25    9.55    7.53 Xwin 13b v0.2\u2217  9.55    9.88    5.20    3.60    2.85    7.70    8.60    8.68    7.01 T\u00dcLU 2+DPO 70B 9.00    9.90    7.00    4.70    4.65    9.35    9.25    9.25    7.89 DeepSeek LLM 67B\u804a\u5929  9.60    9.70    8.00    7.35    6.25    8.40    8.20    9.30    8.35 DeepSeek LLM 67B\u804a\u5929DPO   9.70    9.80    9.05    6.75    6.65    9.30    9.10    9.75    8.76 \u88688|MT\u53f0\u67b6\u8bc4\u4f30\u3002Ivison\u7b49\u4eba\uff082023\uff09\u62a5\u544a\u4e86\u5e26*\u7684\u7ed3\u679c</p> <p>5.3 \u8fdb\u884c\u8bc4\u4f30 \u6570\u636e\u6c61\u67d3\u548c\u57fa\u51c6\u8fc7\u62df\u5408\u662f\u8bc4\u4f30LLM\u7684\u4e24\u4e2a\u6311\u6218\u3002\u4e00\u79cd\u5e38\u89c1\u7684\u505a\u6cd5\u662f\u5229\u7528\u6700\u8fd1\u53d1\u5e03\u7684\u6d4b\u8bd5\u96c6\u6765\u8bc4\u4f30\u6a21\u578b\u4f5c\u4e3a\u4fdd\u7559\u7684\u6d4b\u8bd5\u96c6\u3002 LeetCode\uff1a\u4e3a\u4e86\u8bc4\u4f30\u6a21\u578b\u7684\u7f16\u7801\u80fd\u529b\uff0c\u6211\u4eec\u5229\u7528\u4e86LeetCode\u6bcf\u5468\u7ade\u8d5b\uff08\u6bcf\u5468\u7ade\u8d5b351-372\uff0c\u53cc\u5468\u7ade\u8d5b108-117\uff0c\u4ece2023\u5e747\u6708\u52302023\u5e7411\u6708\uff09\u4e2d\u7684\u95ee\u9898\u3002\u6211\u4eec\u901a\u8fc7\u4eceLeetCode\u6293\u53d6\u6570\u636e\u83b7\u5f97\u4e86\u8fd9\u4e9b\u95ee\u9898\uff0cLeetCode\u7531126\u4e2a\u95ee\u9898\u7ec4\u6210\uff0c\u6bcf\u4e2a\u95ee\u9898\u670920\u591a\u4e2a\u6d4b\u8bd5\u7528\u4f8b\u3002\u6240\u91c7\u7528\u7684\u8bc4\u4f30\u6307\u6807\u7c7b\u4f3c\u4e8eHumanEval\u3002\u5728\u8fd9\u65b9\u9762\uff0c\u5982\u679c\u6a21\u578b\u7684\u8f93\u51fa\u6210\u529f\u901a\u8fc7\u4e86\u6240\u6709\u6d4b\u8bd5\u7528\u4f8b\uff0c\u5219\u8ba4\u4e3a\u8be5\u6a21\u578b\u6709\u6548\u5730\u89e3\u51b3\u4e86\u95ee\u9898\u3002\u8be5\u6a21\u578b\u7684\u7f16\u7801\u80fd\u529b\u4e3a</p> <p>\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u5176\u4e2dy\u8f74\u8868\u793apass@1\u57df\u5185\u4eba\u5de5\u8bc4\u4f30\u6d4b\u8bd5\u5f97\u5206\uff0cx\u8f74\u8868\u793apass@1\u5728\u57df\u5916LeetCode\u6bcf\u5468\u7ade\u8d5b\u95ee\u9898\u4e0a\u5f97\u5206\u3002LeetCode\u6d4b\u8bd5\u6570\u636e\u5c06\u5f88\u5feb\u4e0eDeepSeek Coder\u6280\u672f\u62a5\u544a\u4e00\u8d77\u53d1\u5e03\u3002 \u5308\u7259\u5229\u56fd\u5bb6\u9ad8\u4e2d\u8003\u8bd5\uff1a\u6839\u636eGrok-1\uff0c\u6211\u4eec\u4f7f\u7528\u5308\u7259\u5229\u56fd\u5bb6\u9ad8\u4e2d\u6d4b\u8bd5\u8bc4\u4f30\u4e86\u6a21\u578b\u7684\u6570\u5b66\u80fd\u529b\u3002\u8be5\u8003\u8bd5\u5305\u62ec33\u9053\u9898\uff0c\u6a21\u578b\u7684\u5206\u6570\u662f\u901a\u8fc7\u4eba\u5de5\u6ce8\u91ca\u786e\u5b9a\u7684\u3002\u6211\u4eec\u9075\u5faasolution.pdf\u4e2d\u7684\u8bc4\u5206\u6307\u6807\u6765\u8bc4\u4f30\u6240\u6709\u6a21\u578b\u3002\u00ac \u8bc4\u4f30\u540e\u7684\u6307\u4ee4\uff1a2023\u5e7411\u670815\u65e5\uff0c\u8c37\u6b4c\u6839\u636e\u8bc4\u4f30\u6570\u636e\u96c6\u53d1\u5e03\u4e86\u4e00\u6761\u6307\u4ee4\uff08Zhou\u7b49\u4eba\uff0c2023\uff09\u3002\u4ed6\u4eec\u8bc6\u522b\u51fa\u4e8625\u79cd\u53ef\u9a8c\u8bc1\u7684\u6307\u4ee4\uff0c\u5e76\u6784\u5efa\u4e86\u5927\u7ea6500\u4e2a\u63d0\u793a\uff0c\u6bcf\u4e2a\u63d0\u793a\u5305\u542b\u4e00\u4e2a\u6216\u591a\u4e2a\u53ef\u9a8c\u8bc1\u6307\u4ee4\u3002\u6211\u4eec\u4f7f\u7528\u63d0\u793a\u7ea7\u522b\u677e\u6563\u5ea6\u91cf\u6765\u8bc4\u4f30\u6240\u6709\u6a21\u578b\u3002</p> <p>\u6a21\u578b  LeetCode    \u5308\u7259\u5229\u8bed\u8003\u8bd5  IFEFal GPT-4   48.4    68  79.3 ChatGLM3 6B 2.4 32  29.7 DeepSeek LLM 7B\u804a\u5929   4.7 28.5    41.2 \u767e\u5ddd2\u804a\u592913B    1.6 19.5    44.5 \u6613\u804a\u592934B  7.9 39  48.4 Qwen 72B\u804a\u5929\u5ba4 12.7    52  50.8 DeepSeek LLM 67B\u804a\u5929  17.5    58  55.5 \u88689 |\u8fdb\u884c\u6570\u636e\u96c6\u8bc4\u4f30\u3002 \u6211\u4eec\u5bf9\u6211\u4eec\u7684\u6a21\u578b\u4e0e\u4e0d\u540c\u89c4\u6a21\u7684\u5404\u79cd\u57fa\u7ebf\u6a21\u578b\u8fdb\u884c\u4e86\u6bd4\u8f83\u5206\u6790\uff0c\u5373Qwen 72B Chat\uff08Bai\u7b49\u4eba\uff0c2023\uff09\u3001ChatGLM3\uff08Du\u7b49\u4eba\uff0c2022\uff09\u3001Baichuan2\uff08Yang\u7b49\u4eba\uff0c2024\uff09\u548cYi-34B Chat\u3002\u6211\u4eec\u7684\u89c2\u5bdf\u8868\u660e\uff0c\u5373\u4f7f\u67d0\u4e9b\u5c0f\u6a21\u578b\u5728\u4f20\u7edf\u57fa\u51c6\u4e0a\u53d6\u5f97\u4e86\u6709\u5e0c\u671b\u7684\u7ed3\u679c\uff0c\u5728\u8fd9\u4e9b\u4fdd\u7559\u7684\u6570\u636e\u96c6\u4e0a\uff0c\u5927\u6a21\u578b\u548c\u5c0f\u6a21\u578b\u4e4b\u95f4\u4e5f\u5b58\u5728\u663e\u8457\u7684\u6027\u80fd\u5dee\u8ddd\u3002\u4f8b\u5982\uff0cChatGLM3\u5728\u4ee3\u7801\u6d4b\u8bd5\u96c6MBPP\u4e0a\u7684\u5f97\u5206\u4e3a52.4\uff0c\u63a5\u8fd1DeepSeek 67B\u3002\u7136\u800c\uff0c\u5f53\u5728\u65b0\u7684\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u8fdb\u884c\u8bc4\u4f30\u65f6\uff0c\u5176\u6027\u80fd\u4e0eDeepSeek 67B\u76f8\u6bd4\u660e\u663e\u4e0d\u8db3\u3002\u5728\u6570\u5b66\u6570\u636e\u96c6\u4e2d\u4e5f\u89c2\u5bdf\u5230\u4e86\u7c7b\u4f3c\u7684\u8d8b\u52bf\uff0c\u5176\u4e2dChatGLM3\u5728GSM8K\u4e0a\u975e\u5e38\u5f3a\uff0872.3\uff09\uff0c\u4f46\u5b83\u5728\u5308\u7259\u5229\u8003\u8bd5\u6210\u7ee9\u4e2d\u7684\u8868\u73b0\u4e0d\u5982\u5927\u578b\u6a21\u578b\u3002\u6b64\u5916\uff0c\u6307\u4ee4\u8ddf\u8e2a\u80fd\u529b\u8868\u660e\uff0c\u5168\u8ba1\u7b97\u8d77\u7740\u81f3\u5173\u91cd\u8981\u7684\u4f5c\u7528\u3002\u00ac DeepSeek 7B\u548c67B\u578b\u53f7\u4f7f\u7528\u76f8\u540c\u7684\u8bad\u7ec3\u7ba1\u9053\uff0c\u4f46\u5b83\u4eec\u7684\u6027\u80fd\u5b58\u5728\u663e\u8457\u5dee\u5f02\u3002\u901a\u8fc7\u6211\u4eec\u7684\u4e3b\u89c2\u8bc4\u4f30\uff0c\u6211\u4eec\u89c2\u5bdf\u5230\uff0c\u5f53\u5c06\u6a21\u578b\u5927\u5c0f\u6269\u5c55\u523067B\u65f6\uff0c\u5404\u79cd\u4efb\u52a1\u7684\u667a\u529b\u5b58\u5728\u663e\u8457\u5dee\u5f02\u3002\u867d\u7136DeepSeek 7B\u5728\u6807\u51c6\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u843d\u540e\u4e8e\u5176\u4ed6\u8f83\u5c0f\u7684\u8bed\u8a00\u6a21\u578b\uff0c\u4f46\u4e0e\u5176\u4ed6\u6a21\u578b\u76f8\u6bd4\uff0c\u5b83\u5728\u5ef6\u8fdf\u4efb\u52a1\u4e0a\u7684\u8868\u73b0\u76f8\u5bf9\u503c\u5f97\u79f0\u8d5e\u3002</p> <p>5.4 \u5b89\u5168\u8bc4\u4f30 \u6211\u4eec\u6df1\u523b\u8ba4\u8bc6\u5230\u5b89\u5168\u5bf9\u4e00\u822c\u4eba\u5de5\u667a\u80fd\u7684\u91cd\u8981\u6027\u3002\u5efa\u7acb\u4e00\u4e2a\u771f\u6b63\u6709\u7528\u7684\u4eba\u5de5\u667a\u80fd\u6a21\u578b\u7684\u524d\u63d0\u662f\uff0c\u5b83\u5177\u6709\u4e0e\u4eba\u7c7b\u4e00\u81f4\u7684\u4ef7\u503c\u89c2\uff0c\u5e76\u5bf9\u4eba\u7c7b\u8868\u73b0\u51fa\u53cb\u597d\u3002\u6211\u4eec\u5c06\u6a21\u578b\u5b89\u5168\u4fdd\u8bc1\u7eb3\u5165\u6574\u4e2a\u57f9\u8bad\u8fc7\u7a0b\uff0c\u5305\u62ec\u9884\u57f9\u8bad\u3001SFT\u548cDPO\u3002 \u4e3a\u4e86\u9a8c\u8bc1\u6211\u4eec\u6a21\u578b\u7684\u5b89\u5168\u6027\uff0c\u6211\u4eec\u6210\u7acb\u4e86\u4e00\u4e2a\u753120\u4eba\u7ec4\u6210\u7684\u4e13\u5bb6\u56e2\u961f</p> <p>\u7c7b\u522b  \u5b50\u7c7b\u522b #\u5b89\u5168\u7b54\u6848/#\u6848\u4f8b\u603b\u6570</p> <p>\u6b67\u89c6\u504f\u89c1\u95ee\u9898</p> <p>\u4fb5\u72af\u4ed6\u4eba\u5408\u6cd5\u6743\u76ca</p> <p>\u5546\u4e1a\u79d8\u5bc6\u4e0e\u77e5\u8bc6\u4ea7\u6743 \uff08\u5546\u4e1a\u79d8\u5bc6\u548c\u77e5\u8bc6\u4ea7\u6743\uff09</p> <p>\u8fdd\u6cd5\u8fdd\u89c4\u884c\u4e3a \uff08\u8fdd\u6cd5\u8fdd\u89c4\u884c\u4e3a\uff09</p> <p>\u5176\u4ed6\u5b89\u5168\u95ee\u9898 \uff08\u5176\u4ed6\u5b89\u5168\u95ee\u9898\uff09</p> <p>\u9690\u79c1\u6743 \uff08\u9690\u79c1\u6743\uff09\uff0c\u4fe1\u606f\u6743\u76ca \uff08\u4fe1\u606f\u6743\uff09\uff0c\u5176\u4ed6\u5408\u6cd5\u6743\u76ca \uff08\u5176\u4ed6\u6cd5\u5b9a\u6743\u5229\uff09 \u4fb5\u72af\u4ed6\u4eba\u77e5\u8bc6\u4ea7\u6743 \uff08\u4fb5\u72af\u4ed6\u4eba\u77e5\u8bc6\u4ea7\u6743\uff09\uff0c \u5784\u65ad\u548c\u4e0d\u6b63\u5f53\u7ade\u4e89\u884c\u4e3a \uff08\u5784\u65ad\u548c\u4e0d\u516c\u5e73\u7ade\u4e89\u884c\u4e3a\uff09\uff0c \u5176\u4ed6\u5546\u4e1a\u8fdd\u6cd5\u8fdd\u89c4\u884c\u4e3a \uff08\u5176\u4ed6\u5546\u4e1a\u8fdd\u6cd5\u548c\u4e0d\u5408\u89c4\u884c\u4e3a\uff09\uff0c \u8fdd\u53cd\u5546\u4e1a\u9053\u5fb7 \uff08\u8fdd\u53cd\u5546\u4e1a\u9053\u5fb7\uff09\uff0c\u6cc4\u9732\u4ed6\u4eba\u5546\u4e1a\u673a\u5bc6 \uff08\u6cc4\u9732\u4ed6\u4eba\u5546\u4e1a\u79d8\u5bc6\uff09 \u90aa\u6559\u8ff7\u4fe1 \uff08\u90aa\u6559\u548c\u8ff7\u4fe1\uff09\uff0c\u8272\u60c5 \uff08\u8272\u60c5\uff09\uff0c\u8d4c\u535a \uff08\u8d4c\u535a\uff09\uff0c \u6bd2\u54c1\u548c\u8fdd\u7981\u54c1 \uff08\u6bd2\u54c1\u548c\u8fdd\u7981\u7269\u54c1\uff09\uff0c\u4fae\u8fb1\u8c29\u9a82 \uff08\u4fae\u8fb1\u548c\u8650\u5f85\uff09\uff0c\u66b4\u529b\u884c\u4e3a \uff08\u66b4\u529b\u884c\u4e3a\uff09\uff0c \u6d89\u9ed1\u6d89\u6076 \uff08\u53c2\u4e0e\u6709\u7ec4\u7ec7\u72af\u7f6a\uff09\uff0c\u5176\u4ed6\u8fdd\u6cd5\u8fdd\u89c4\u884c\u4e3a \uff08\u5176\u4ed6\u8fdd\u6cd5\u8fdd\u89c4\u884c\u4e3a\uff09 \u5e7b\u89c9\u548c\u771f\u5b9e\u6027\u95ee\u9898 \uff08\u5e7b\u89c9\u4e0e\u73b0\u5b9e\u95ee\u9898\uff09\uff0c\u65f6\u6548\u6027\u95ee\u9898 \uff08\u65f6\u95f4\u654f\u611f\u95ee\u9898\uff09\uff0c \u6211\u8ba4\u77e5\u95ee\u9898 \uff08\u81ea\u6211\u8bc6\u522b\u95ee\u9898\uff09\uff0c\u5176\u4ed6\u654f\u611f\u8bdd\u9898 \uff08\u5176\u4ed6\u654f\u611f\u8bdd\u9898\uff09\uff0c</p> <p>281/300</p> <p>290/300</p> <p>767/800</p> <p>\u886810 |\u6211\u4eec\u7684\u5b89\u5168\u8bc4\u4f30\u5206\u7c7b\u3002\u8868\u7684\u6700\u53f3\u4fa7\u5217\u5217\u51fa\u4e86\u6bcf\u4e2a\u7c7b\u522b\u7684\u6d4b\u8bd5\u7528\u4f8b\u603b\u6570\u548c\u6211\u4eec\u7684\u6a21\u578b\uff08DeepSeek-67B-Chat\uff09\u63d0\u4f9b\u7684\u5b89\u5168\u7b54\u6848\u6570\u91cf\u3002\u8bd5\u9898\u7684\u6ce8\u91ca\u548c\u751f\u6210\u7ed3\u679c\u7684\u8bc4\u4f30\u7531\u4e13\u4e1a\u4eba\u5458\u56e2\u961f\u8fdb\u884c\u3002\u6211\u4eec\u53ef\u4ee5\u89c2\u5bdf\u5230\uff0c\u6211\u4eec\u7684\u6a21\u578b\u5728\u5404\u79cd\u7c7b\u578b\u7684\u5b89\u5168\u6d4b\u8bd5\u96c6\u4e0a\u8868\u73b0\u51fa\u5f88\u5f3a\u7684\u5b89\u5168\u6027\u3002 \u5e76\u6784\u5efa\u4e86\u4e0e\u4eba\u7c7b\u4ef7\u503c\u89c2\u76f8\u4e00\u81f4\u7684\u5b89\u5168\u5185\u5bb9\u5206\u7c7b\u4f53\u7cfb\uff08\u5b89\u5168\u8bc4\u4f30\u5206\u7c7b\u5982\u886810\u6240\u793a\uff09\u3002\u968f\u540e\uff0c\u4e13\u5bb6\u56e2\u961f\u4e3a\u6bcf\u4e2a\u5b89\u5168\u5b50\u7c7b\u522b\u624b\u52a8\u6784\u5efa\u4e86\u6570\u5341\u4e2a\u9ad8\u8d28\u91cf\u7684\u6d4b\u8bd5\u7528\u4f8b\u3002\u9664\u4e86\u5173\u6ce8\u5b89\u5168\u5185\u5bb9\u9886\u57df\u7684\u591a\u6837\u6027\u5916\uff0c\u6211\u4eec\u8fd8\u5173\u6ce8\u5b89\u5168\u5185\u5bb9\u683c\u5f0f\u7684\u591a\u6837\u6027\u3002\u81ed\u540d\u662d\u8457\u7684\u201c\u7956\u6bcd\u201d\u6f0f\u6d1e\u8868\u660e\uff0c\u6a21\u578b\u53ef\u80fd\u4f1a\u88ab\u67e5\u8be2\u7684\u8868\u9762\u683c\u5f0f\u6b3a\u9a97\uff0c\u4ece\u800c\u63d0\u4f9b\u4e0d\u5b89\u5168\u7684\u54cd\u5e94\u3002\u56e0\u6b64\uff0c\u5728\u8bbe\u8ba1\u95ee\u9898\u65f6\uff0c\u4e13\u5bb6\u56e2\u961f\u4e5f\u6ce8\u91cd\u591a\u6837\u5316\u7684\u63a2\u7a76\u65b9\u5f0f\u3002\u4ed6\u4eec\u901a\u8fc7\u8bf1\u5bfc\u3001\u89d2\u8272\u626e\u6f14\u3001\u591a\u56de\u5408\u5bf9\u8bdd\u3001\u9884\u8bbe\u4f4d\u7f6e\u7b49\u65b9\u5f0f\u6784\u5efa\u4e86\u5404\u79cd\u5b89\u5168\u95ee\u9898\u3002\u6700\u7ec8\uff0c\u6211\u4eec\u83b7\u5f97\u4e86\u4e00\u4e2a\u5305\u542b2400\u4e2a\u95ee\u9898\u7684\u5b89\u5168\u6d4b\u8bd5\u96c6\u3002\u6b64\u5916\uff0c\u4e13\u5bb6\u7ec4\u8fd8\u4e3a\u6bcf\u79cd\u4e0d\u540c\u7684\u5185\u5bb9\u7c7b\u578b\u548c\u683c\u5f0f\u7c7b\u578b\u6784\u5efa\u4e86\u5b89\u5168\u5ba1\u67e5\u7684\u57fa\u672c\u6307\u5bfc\u539f\u5219\u3002 \u5bf9\u4e8e\u6211\u4eec\u6a21\u578b\u5728\u8fd9\u4e2a\u6d4b\u8bd5\u96c6\u4e0a\u7684\u8f93\u51fa\u7ed3\u679c\uff0c\u6211\u4eec\u624b\u52a8\u68c0\u67e5\u4e86\u5b83\u7684\u5b89\u5168\u6027\u3002\u6211\u4eec\u7684\u5ba1\u67e5\u56e2\u961f\u8bad\u7ec3\u6709\u7d20\uff0c\u5e76\u5bf9\u6ce8\u91ca\u7ed3\u679c\u8fdb\u884c\u4e86\u4ea4\u53c9\u9a8c\u8bc1\u3002\u6ce8\u91ca\u5668\u5bf9\u6bcf\u4e2a\u95ee\u9898\u6267\u884c\u4e09\u7c7b\u6ce8\u91ca\uff1a\u5b89\u5168\u3001\u4e0d\u5b89\u5168\u548c\u6a21\u578b\u62d2\u7edd\u3002\u6211\u4eec\u6d4b\u8bd5\u4e86DeepSeek 67B\u804a\u5929\u6a21\u578b\u7684\u5b89\u5168\u6027\uff0c\u7ed3\u679c\u5982\u886810\u6240\u793a\u3002\u8868\u4e2d\u5217\u51fa\u4e86\u6bcf\u4e2a\u5b89\u5168\u7c7b\u522b\u7684\u6d4b\u8bd5\u95ee\u9898\u6570\u91cf\u548c\u6211\u4eec\u7684\u6a21\u578b\u901a\u8fc7\u7684\u5b89\u5168\u6d4b\u8bd5\u6570\u91cf\u3002\u6211\u4eec\u5c06\u5b89\u5168\u56de\u7b54\u548c\u6a21\u578b\u62d2\u7edd\u7684\u6d4b\u8bd5\u7528\u4f8b\u90fd\u6807\u8bb0\u4e3a\u5b89\u5168\u54cd\u5e94\u3002\u7ed3\u679c\u8868\u660e\uff0c\u6211\u4eec\u7684\u6a21\u578b\u5728\u4f17\u591a\u5b89\u5168\u6d4b\u8bd5\u7c7b\u522b\u4e2d\u8868\u73b0\u51fa\u826f\u597d\u7684\u5b89\u5168\u6027\u80fd\u3002 \u4e3a\u4e86\u8865\u5145\u6211\u4eec\u73b0\u6709\u7684\u5b89\u5168\u65b9\u6cd5\uff0c\u6211\u4eec\u4f7f\u7528\u201c\u4e0d\u8981\u56de\u7b54\u201d\u6570\u636e\u96c6\uff08Wang\u7b49\u4eba\uff0c2023\uff09\u8fdb\u4e00\u6b65\u4e30\u5bcc\u4e86\u6211\u4eec\u7684\u8bc4\u4f30\uff0c\u4ee5\u8bc4\u4f30\u6211\u4eec\u7684DeepSeek 67B\u804a\u5929\u6a21\u578b\u7684\u5b89\u5168\u673a\u5236\u3002\u8be5\u6570\u636e\u96c6\u7684939\u4e2a\u98ce\u9669\u5206\u7c7b\u63d0\u793a\u6709\u52a9\u4e8e\u7a81\u51fa\u6211\u4eec\u6a21\u578b\u7684\u589e\u5f3a\u529f\u80fd\u3002\u5982\u886811\u6240\u793a\uff0cDeepSeek 67B\u804a\u5929\u6a21\u578b\u8868\u73b0\u51fa\u4e86\u663e\u8457\u7684\u6027\u80fd\uff0c\u5f97\u5206\u4e3a97.8\uff0c\u9ad8\u4e8eChatGPT\u548cGPT-4\u3002\u8be5\u5206\u6570\u4e0d\u4ec5\u8861\u91cf\u4e86\u6211\u4eec\u7684\u6a21\u578b\u5b89\u5168\u5904\u7406\u654f\u611f\u67e5\u8be2\u7684\u80fd\u529b\uff0c\u800c\u4e14\u4f7f\u5176\u5728\u8be5\u9886\u57df\u7684\u9886\u5148\u6a21\u578b\u4e2d\u5177\u6709\u7ade\u4e89\u529b\u3002</p> <p>5.5 \u8ba8\u8bba \u5728\u6574\u4e2a\u5f00\u53d1\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u5728\u6784\u5efaLLM\u65b9\u9762\u53d1\u73b0\u4e86\u4e00\u4e9b\u6709\u8da3\u7684\u53d1\u73b0\u3002 \u6a21\u578b  \u4e0d\u8981\u56de\u7b54 LLAMA-2-7B-\u5e3d\u5b50   99.4 \u514b\u52b3\u5fb7 98.3 DeepSeek-67B-Chat*  97.8 ChatGPT 97.7 GPT-4   96.5 Vicuna-7B   94.9 ChatGLM2    92.9</p> <p>\u886811 |\u4e0d\u56de\u7b54\u5206\u6570\uff08Wang\u7b49\u4eba\uff0c2023\uff09\uff0c\u5206\u6570\u8d8a\u9ad8\u8868\u793a\u6a21\u578b\u5b89\u5168\u6027\u8d8a\u9ad8\u3002\u5e26*\u7684\u7ed3\u679c\u662f\u6211\u4eec\u57fa\u4e8e\u5b98\u65b9\u5b58\u50a8\u5e93\u7684\u8bc4\u4f30\u7ed3\u679c\uff0c\u800c\u6240\u6709\u5176\u4ed6\u7ed3\u679c\u90fd\u6765\u81ea\u539f\u59cb\u8bba\u6587\u3002\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\u6211\u4eec\u7684\u6a21\u578b\u7684\u5b89\u5168\u6027\u5f97\u5206\u9ad8\u4e8eChatGPT\u548cGPT-4\uff0c\u4f7f\u5176\u8dfb\u8eab\u4e8e\u6700\u5b89\u5168\u6a21\u578b\u4e4b\u5217\u3002</p> <p>\u5206\u6bb5\u5fae\u8c03\uff1a\u6b63\u5982\u6211\u4eec\u4e0a\u9762\u63d0\u5230\u7684\uff0c\u5c0f\u6a21\u578b\u9700\u8981\u5bf9\u6570\u5b66\u548c\u4ee3\u7801\u6570\u636e\u96c6\u8fdb\u884c\u66f4\u957f\u65f6\u95f4\u7684\u5fae\u8c03\uff0c\u4f46\u8fd9\u4f1a\u635f\u5bb3\u6a21\u578b\u7684\u5bf9\u8bdd\u80fd\u529b\uff0c\u4f8b\u5982\u589e\u52a0\u91cd\u590d\u884c\u4e3a\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u5b9e\u65bd\u4e86\u5206\u9636\u6bb5\u7684\u5fae\u8c03\u8fc7\u7a0b\u3002\u5728\u8fd9\u79cd\u65b9\u6cd5\u4e2d\uff0c\u7b2c\u4e00\u9636\u6bb5\u6d89\u53ca\u5bf9\u6240\u6709\u53ef\u7528\u6570\u636e\u8fdb\u884c\u5fae\u8c03\uff0c\u800c\u7b2c\u4e8c\u9636\u6bb5\u5219\u4e13\u95e8\u4fa7\u91cd\u4e8e\u5bf9\u4f1a\u8bdd\u6570\u636e\u8fdb\u884c\u5fae\u8c03\u3002</p> <p>\u6a21\u578b  \u4eba\u7c7b\u8bc4\u4f30    GSM8K   \u91cd\u590d\u7ade\u8d5b</p> <p>DeepSeek LLM 7B\u804a\u5929\u7b2c\u4e00\u9636\u6bb5   48.2    63.9    0.020   38.0 DeepSeek LLM 7B\u804a\u5929\u9636\u6bb52    48.2    63.0    0.014   41.2 \u886812 |\u4e24\u9636\u6bb5\u5fae\u8c03\u7ed3\u679c\u3002\u5f53\u6e29\u5ea6\u4e3a0\u65f6\uff0c\u8ba1\u7b97\u91cd\u590d\u6bd4\u3002\u91cd\u590d\u7387\u8d8a\u4f4e\u8d8a\u597d\u3002IFEval\u7684\u7ed3\u679c\u662f\u5373\u65f6\u7ea7\u522b\u7684\u677e\u6563\u7cbe\u5ea6\u3002</p> <p>\u886812\u663e\u793a\u4e86\u4e24\u9636\u6bb5\u8bad\u7ec3\u8fc7\u7a0b\u7684\u7ed3\u679c\u3002\u8fd9\u4e9b\u7ed3\u679c\u6e05\u695a\u5730\u8868\u660e\uff0c\u7b2c\u4e8c\u9636\u6bb5\u4e0d\u4f1a\u5f71\u54cd\u6a21\u578b\u5728\u4ee3\u7801\u548c\u6570\u5b66\u65b9\u9762\u7684\u719f\u7ec3\u7a0b\u5ea6\uff0c\u540c\u65f6\u51cf\u5c11\u4e86\u91cd\u590d\u884c\u4e3a\uff0c\u63d0\u9ad8\u4e86\u6559\u5b66\u8ddf\u968f\u80fd\u529b\u3002 \u591a\u9879\u9009\u62e9\u9898\uff1a\u4f7f\u7528\u591a\u9879\u9009\u62e9\u98ce\u683c\u7684\u8bc4\u4f30\u6570\u636e\uff08\u5982MMLU\u3001AGI\u8bc4\u4f30\u548cC-Eval\uff09\u6d4b\u8bd5\u6a21\u578b\u662f\u4e00\u79cd\u5e38\u89c1\u7684\u505a\u6cd5\u3002\u591a\u9879\u9009\u62e9\u9898\u8981\u6c42\u6a21\u578b\u4e0d\u4ec5\u8981\u6709\u76f8\u5e94\u7684\u77e5\u8bc6\uff0c\u8fd8\u8981\u7406\u89e3\u9009\u9879\u6240\u6307\u7684\u5185\u5bb9\u3002\u5728\u5bf9\u9f50\u9636\u6bb5\uff0c\u6211\u4eec\u6d4b\u8bd5\u4e86\u589e\u52a02000\u4e07\u4e2a\u4e2d\u6587\u591a\u9879\u9009\u62e9\u9898\uff0c\u5e76\u83b7\u5f97\u4e86\u5982\u886813\u6240\u793a\u7684\u6027\u80fd\u3002\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u6211\u4eec\u5bf9C-Eval\u9a8c\u8bc1\u96c6\u548cCMMLU\u6d4b\u8bd5\u96c6\u8fdb\u884c\u4e86\u91cd\u590d\u6570\u636e\u5220\u9664\uff0c\u4ee5\u9632\u6b62\u6570\u636e\u6c61\u67d3\u3002</p> <p>\u6a21\u578b  MMLUC\u8bc4\u4f30 MMLUTRIVIAQA    \u4e2d\u56fdQA</p> <p>DeepSeek LLM 7B\u804a\u5929   49.4    47.0    49.7    57.9    75.0 DeepSeek LLM 7B\u804a\u5929+MC    60.9    71.3    73.8    57.9    74.4 \u886813 |\u6dfb\u52a0\u591a\u9879\u9009\u62e9\u9898\u6570\u636e\u7684\u5f71\u54cd\u3002</p> <p>\u4e8b\u5b9e\u8bc1\u660e\uff0c\u7eb3\u5165\u989d\u5916\u76842000\u4e07MC\uff08\u591a\u9879\u9009\u62e9\uff09\u6570\u636e\u4e0d\u4ec5\u5bf9\u4e2d\u56fd\u591a\u9879\u9009\u62e9\u57fa\u51c6\u6d4b\u8bd5\u6709\u76ca\uff0c\u800c\u4e14\u5bf9\u63d0\u9ad8\u82f1\u8bed\u57fa\u51c6\u6d4b\u8bd5\u4e5f\u6709\u76ca\u3002\u8fd9\u8868\u660e\u8be5\u6a21\u578b\u89e3\u51b3MC\u95ee\u9898\u7684\u80fd\u529b\u5f97\u5230\u4e86\u589e\u5f3a\u3002\u7136\u800c\uff0c\u6211\u4eec\u89c2\u5bdf\u5230\uff0c\u8fd9\u79cd\u6539\u8fdb\u5e76\u6ca1\u6709\u6269\u5c55\u5230\u6a21\u578b\u5728\u5176\u4ed6\u4e0d\u4f7f\u7528\u591a\u9879\u9009\u62e9\u683c\u5f0f\u7684\u8bc4\u4f30\u4e2d\u7684\u8868\u73b0\uff0c\u4f8b\u5982TriviaQA\u548c\u6211\u4eec\u7684\u5185\u90e8\u8bc4\u4f30</p> <p>\u4e2d\u6587QA\u6d4b\u8bd5\u96c6\uff0c\u662f\u751f\u6210\u6027\u8bc4\u4f30\u57fa\u51c6\u3002\u8fd9\u8868\u660e\uff0c\u7528\u6237\u53ef\u80fd\u4e0d\u4f1a\u8ba4\u4e3a\u8be5\u6a21\u578b\u5728\u5bf9\u8bdd\u4ea4\u4e92\u4e2d\u53d8\u5f97\u66f4\u52a0\u667a\u80fd\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u4ea4\u4e92\u6d89\u53ca\u751f\u6210\u54cd\u5e94\u800c\u4e0d\u662f\u89e3\u51b3\u591a\u9879\u9009\u62e9\u9898\u3002 \u56e0\u6b64\uff0c\u6211\u4eec\u9009\u62e9\u5728\u9884\u8bad\u7ec3\u548c\u5fae\u8c03\u9636\u6bb5\u6392\u9664MC\u6570\u636e\uff0c\u56e0\u4e3a\u5305\u62ecMC\u6570\u636e\u4f1a\u5bfc\u81f4\u4e0e\u57fa\u51c6\u7684\u8fc7\u5ea6\u62df\u5408\uff0c\u5e76\u4e14\u65e0\u52a9\u4e8e\u5728\u6a21\u578b\u4e2d\u5b9e\u73b0\u771f\u6b63\u7684\u667a\u80fd\u3002 \u9884\u8bad\u7ec3\u4e2d\u7684\u6307\u4ee4\u6570\u636e\uff1a\u4eba\u4eec\u666e\u904d\u8ba4\u4e3a\uff0c\u5728\u9884\u8bad\u7ec3\u9636\u6bb5\u7684\u540e\u534a\u90e8\u5206\u7eb3\u5165\u6307\u4ee4\u6570\u636e\u53ef\u4ee5\u63d0\u9ad8\u57fa\u7840\u6a21\u578b\u5728\u57fa\u51c6\u4efb\u52a1\u4e0a\u7684\u6027\u80fd\u3002\u5728\u6211\u4eec\u7684\u7814\u7a76\u4e2d\uff0c\u6211\u4eec\u5728\u9884\u8bad\u7ec3\u9636\u6bb5\u7684\u6700\u540e10%\u6574\u5408\u4e86500\u4e07\u6761\u6307\u4ee4\u6570\u636e\uff0c\u4e3b\u8981\u7531\u591a\u9879\u9009\u62e9\u9898\u7ec4\u6210\u3002\u6211\u4eec\u89c2\u5bdf\u5230\uff0c\u57fa\u7840\u6a21\u578b\u5728\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u786e\u5b9e\u8868\u73b0\u51fa\u4e86\u6539\u8fdb\u7684\u6027\u80fd\u3002\u7136\u800c\uff0c\u6700\u7ec8\u7ed3\u679c\u4e0e\u5728SFT\u9636\u6bb5\u6dfb\u52a0\u76f8\u540c\u6570\u636e\u6240\u53d6\u5f97\u7684\u7ed3\u679c\u51e0\u4e4e\u76f8\u540c\u3002\u6211\u4eec\u5f97\u51fa\u7ed3\u8bba\uff0c\u867d\u7136\u8fd9\u79cd\u65b9\u6cd5\u589e\u5f3a\u4e86\u57fa\u7840\u6a21\u578b\u5728\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u7684\u6027\u80fd\uff0c\u4f46\u5176\u6574\u4f53\u6f5c\u529b\u76f8\u5f53\u4e8e\u4e0d\u5305\u542b\u8fd9\u4e9b\u6307\u4ee4\u6570\u636e\u3002\u5982\u679c\u6307\u4ee4\u6570\u636e\u91cf\u5f88\u5927\uff0c\u53ef\u4ee5\u5c06\u5176\u7eb3\u5165\u9884\u8bad\u7ec3\u8fc7\u7a0b\u3002\u7531\u4e8e\u6211\u4eec\u503e\u5411\u4e8e\u6392\u9664\u591a\u9879\u9009\u62e9\u9898\uff0c\u5e76\u4e14\u975e\u591a\u9879\u9009\u62e9\u9898\u7684\u53ef\u7528\u6027\u6709\u9650\uff0c\u6211\u4eec\u51b3\u5b9a\u4e0d\u5728\u9884\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\u5305\u542b\u6559\u5b66\u6570\u636e\u3002 \u7cfb\u7edf\u63d0\u793a\uff1a\u4e00\u4e2a\u8bbe\u8ba1\u826f\u597d\u7684\u7cfb\u7edf\u63d0\u793a\u5e94\u8be5\u6709\u6548\u5730\u6307\u5bfc\u6a21\u578b\u751f\u6210\u65e2\u6709\u5e2e\u52a9\u53c8\u6709\u5c0a\u91cd\u7684\u54cd\u5e94\u3002\u6211\u4eec\u5c06LLaMA-2\u5f15\u5165\u7684\u63d0\u793a\u7a0d\u5fae\u66f4\u6539\u4e3a\u6211\u4eec\u7684\u7cfb\u7edf\u63d0\u793a\u3002 \u7cfb\u7edf\u63d0\u793a\uff1a\u60a8\u662fDeepSeek Chat\uff0c\u4e00\u4e2a\u7531DeepSeek\u5f00\u53d1\u7684\u6709\u7528\u3001\u5c0a\u91cd\u548c\u8bda\u5b9e\u7684\u4eba\u5de5\u667a\u80fd\u52a9\u624b\u3002\u60a8\u7684\u57f9\u8bad\u6570\u636e\u7684\u77e5\u8bc6\u622a\u6b62\u65e5\u671f\u4e3a2023\u5e745\u6708\u3002\u5728\u786e\u4fdd\u5b89\u5168\u7684\u524d\u63d0\u4e0b\uff0c\u59cb\u7ec8\u5c3d\u53ef\u80fd\u5730\u63d0\u4f9b\u5e2e\u52a9\u3002\u4f60\u7684\u7b54\u6848\u4e0d\u5e94\u8be5\u5305\u62ec\u4efb\u4f55\u6709\u5bb3\u3001\u4e0d\u9053\u5fb7\u3001\u79cd\u65cf\u4e3b\u4e49\u3001\u6027\u522b\u6b67\u89c6\u3001\u6709\u6bd2\u3001\u5371\u9669\u6216\u975e\u6cd5\u7684\u5185\u5bb9\u3002\u8bf7\u786e\u4fdd\u60a8\u7684\u56de\u7b54\u5728\u793e\u4f1a\u4e0a\u662f\u516c\u6b63\u548c\u79ef\u6781\u7684\u3002\u5982\u679c\u4e00\u4e2a\u95ee\u9898\u6ca1\u6709\u4efb\u4f55\u610f\u4e49\uff0c\u6216\u8005\u4e8b\u5b9e\u4e0a\u4e0d\u8fde\u8d2f\uff0c\u8bf7\u89e3\u91ca\u539f\u56e0\uff0c\u800c\u4e0d\u662f\u56de\u7b54\u4e0d\u6b63\u786e\u7684\u95ee\u9898\u3002\u5982\u679c\u4f60\u4e0d\u77e5\u9053\u95ee\u9898\u7684\u7b54\u6848\uff0c\u8bf7\u4e0d\u8981\u5206\u4eab\u865a\u5047\u4fe1\u606f\u3002 \u6211\u4eec\u89c2\u5bdf\u5230\u4e00\u4e2a\u6709\u8da3\u7684\u73b0\u8c61\uff0c\u5373\u5f53\u5f15\u5165\u7cfb\u7edf\u63d0\u793a\u65f6\uff0c7B LLM\u7684\u6027\u80fd\u4f1a\u7565\u6709\u4e0b\u964d\u3002\u7136\u800c\uff0c\u5f53\u4f7f\u752867B LLM\u65f6\uff0c\u6dfb\u52a0\u63d0\u793a\u4f1a\u663e\u8457\u6539\u5584\u7ed3\u679c\uff0c\u5982\u8868\u6240\u793a\u00ac 14.\u6211\u4eec\u5bf9\u8fd9\u79cd\u5dee\u5f02\u7684\u89e3\u91ca\u662f\uff0c\u8f83\u5927\u7684\u6a21\u578b\u5bf9\u7cfb\u7edf\u63d0\u793a\u80cc\u540e\u7684\u9884\u671f\u542b\u4e49\u6709\u66f4\u597d\u7684\u7406\u89e3\uff0c\u4f7f\u5b83\u4eec\u80fd\u591f\u66f4\u6709\u6548\u5730\u9075\u5faa\u6307\u793a\u5e76\u4ea7\u751f\u66f4\u597d\u7684\u53cd\u5e94\u3002\u53e6\u4e00\u65b9\u9762\uff0c\u8f83\u5c0f\u7684\u6a21\u578b\u5f88\u96be\u5145\u5206\u638c\u63e1\u7cfb\u7edf\u63d0\u793a\uff0c\u8bad\u7ec3\u548c\u6d4b\u8bd5\u4e4b\u95f4\u7684\u4e0d\u4e00\u81f4\u53ef\u80fd\u4f1a\u5bf9\u5b83\u4eec\u7684\u6027\u80fd\u4ea7\u751f\u8d1f\u9762\u5f71\u54cd\u3002</p> <p>\u6a21\u578b  MT\u5de5\u4f5c\u53f0 DeepSeek LLM 7B\u804a\u5929   7.15 DeepSeek LLM 7B\u804a\u5929+\u7cfb\u7edf\u63d0\u793a  7.11 DeepSeek LLM 67B\u804a\u5929  8.35 DeepSeek LLM 67B\u804a\u5929+\u7cfb\u7edf\u63d0\u793a 8.58 \u886814 |\u6dfb\u52a0\u7cfb\u7edf\u63d0\u793a\u7684\u5f71\u54cd\u3002</p> <p>6 \u7ed3\u8bba\u3001\u5c40\u9650\u6027\u548c\u672a\u6765\u5de5\u4f5c \u6211\u4eec\u4ecb\u7ecdDeepSeek LLMs\uff0c\u8fd9\u662f\u4e00\u7cfb\u5217\u5f00\u6e90\u6a21\u578b\uff0c\u57282\u4e07\u4ebf\u4e2a\u4e2d\u82f1\u6587\u4ee3\u5e01\u7684\u5e9e\u5927\u6570\u636e\u96c6\u4e0a\u4ece\u5934\u5f00\u59cb\u8bad\u7ec3\u3002\u5728\u672c\u6587\u4e2d\uff0c\u6211\u4eec\u5bf9\u8d85\u53c2\u6570\u9009\u62e9\u3001\u6807\u5ea6\u5f8b\u4ee5\u53ca\u6211\u4eec\u6240\u505a\u7684\u5404\u79cd\u5fae\u8c03\u5c1d\u8bd5\u8fdb\u884c\u4e86\u6df1\u5165\u7684\u89e3\u91ca\u3002\u6211\u4eec\u6821\u51c6\u4e86\u5148\u524d\u5de5\u4f5c\u4e2d\u7684\u7f29\u653e\u5b9a\u5f8b\uff0c\u5e76\u63d0\u51fa\u4e86\u4e00\u79cd\u65b0\u7684\u6700\u4f18\u6a21\u578b/\u6570\u636e\u7f29\u653e\u5206\u914d\u7b56\u7565\u3002\u6b64\u5916\uff0c\u6211\u4eec\u63d0\u51fa\u4e86\u4e00\u79cd\u5728\u7ed9\u5b9a\u8ba1\u7b97\u9884\u7b97\u7684\u60c5\u51b5\u4e0b\u9884\u6d4b\u8fd1\u4f3c\u6700\u4f18\u6279\u91cf\u5927\u5c0f\u548c\u5b66\u4e60\u7387\u7684\u65b9\u6cd5\u3002\u6211\u4eec\u8fdb\u4e00\u6b65\u5f97\u51fa\u7ed3\u8bba\uff0c\u7f29\u653e\u89c4\u5f8b\u4e0e\u6570\u636e\u8d28\u91cf\u6709\u5173\uff0c\u8fd9\u53ef\u80fd\u662f\u4e0d\u540c\u4f5c\u54c1\u4e2d\u7f29\u653e\u884c\u4e3a\u4e0d\u540c\u7684\u6839\u672c\u539f\u56e0\u3002\u5728\u6807\u5ea6\u5f8b\u7684\u6307\u5bfc\u4e0b\uff0c\u6211\u4eec\u4f7f\u7528\u6700\u4f73\u8d85\u53c2\u6570\u8fdb\u884c\u9884\u8bad\u7ec3\uff0c\u5e76\u63d0\u4f9b\u5168\u9762\u7684\u8bc4\u4f30\u3002\u6211\u4eec\u5728\u6240\u6709\u8bad\u7ec3\u9636\u6bb5\u90fd\u907f\u514d\u57fa\u51c6\u88c5\u9970\u548c\u9ed1\u6697\u79d8\u5bc6\u3002 DeepSeek Chat\u5206\u4eab\u4e86\u5176\u4ed6LLM\u4e2d\u5e38\u89c1\u7684\u516c\u8ba4\u5c40\u9650\u6027\uff0c\u5305\u62ec\u5728\u9884\u57f9\u8bad\u540e\u7f3a\u4e4f\u6301\u7eed\u7684\u77e5\u8bc6\u66f4\u65b0\uff0c\u4ea7\u751f\u672a\u7ecf\u8bc1\u5b9e\u7684\u5efa\u8bae\u7b49\u975e\u4e8b\u5b9e\u4fe1\u606f\u7684\u53ef\u80fd\u6027\uff0c\u4ee5\u53ca\u4ea7\u751f\u5e7b\u89c9\u7684\u503e\u5411\u3002\u6b64\u5916\uff0c\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u6211\u4eec\u6700\u521d\u7684\u4e2d\u6587\u6570\u636e\u7248\u672c\u5e76\u4e0d\u8be6\u5c3d\uff0c\u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5728\u67d0\u4e9b\u7279\u5b9a\u7684\u4e2d\u6587\u4e3b\u9898\u4e0a\u8868\u73b0\u4e0d\u4f73\u3002\u7531\u4e8e\u6211\u4eec\u7684\u6570\u636e\u4e3b\u8981\u7531\u4e2d\u6587\u548c\u82f1\u6587\u6765\u6e90\u7ec4\u6210\uff0c\u56e0\u6b64\u8be5\u6a21\u578b\u5bf9\u5176\u4ed6\u8bed\u8a00\u7684\u719f\u7ec3\u7a0b\u5ea6\u4ecd\u7136\u5f88\u5fae\u5999\uff0c\u5e94\u8be5\u8c28\u614e\u5bf9\u5f85\u3002 DeepSeek LLM\u662f\u4e00\u4e2a\u81f4\u529b\u4e8e\u63a8\u8fdb\u5f00\u6e90\u8bed\u8a00\u6a21\u578b\u7684\u957f\u671f\u9879\u76ee\u3002</p> <p>\u2022 \u5f88\u5feb\uff0c\u6211\u4eec\u5c06\u5206\u522b\u5728\u4ee3\u7801\u667a\u80fd\u548c\u6df7\u5408\u4e13\u5bb6\uff08MoE\uff09\u4e2d\u53d1\u5e03\u6211\u4eec\u7684\u6280\u672f\u62a5\u544a\u3002\u5b83\u4eec\u5c55\u793a\u4e86\u6211\u4eec\u5982\u4f55\u4e3a\u9884\u8bad\u7ec3\u548c\u8bbe\u8ba1\u521b\u5efa\u9ad8\u8d28\u91cf\u7684\u4ee3\u7801\u6570\u636e \u7a00\u758f\u6a21\u578b\u4ee5\u5b9e\u73b0\u5bc6\u96c6\u6a21\u578b\u6027\u80fd\u3002 \u2022 \u76ee\u524d\uff0c\u6211\u4eec\u6b63\u5728\u4e3a\u5373\u5c06\u63a8\u51fa\u7684DeepSeek LLM\u7248\u672c\u6784\u5efa\u4e00\u4e2a\u66f4\u5927\u3001\u66f4\u6539\u8fdb\u7684\u6570\u636e\u96c6\u3002\u6211\u4eec\u5e0c\u671b\u5728\u4e0b\u4e00\u4e2a\u7248\u672c\u4e2d\uff0c\u63a8\u7406\u3001\u4e2d\u6587\u77e5\u8bc6\u3001\u6570\u5b66\u548c\u4ee3\u7801\u80fd\u529b\u5c06\u5f97\u5230\u663e\u8457\u63d0\u9ad8\u3002 \u2022 \u6211\u4eec\u7684\u534f\u8c03\u56e2\u961f\u81f4\u529b\u4e8e\u7814\u7a76\u5982\u4f55\u4e3a\u516c\u4f17\u63d0\u4f9b\u6709\u76ca\u3001\u8bda\u5b9e\u548c\u5b89\u5168\u7684\u6a21\u578b\u3002\u6211\u4eec\u7684\u521d\u6b65\u5b9e\u9a8c\u8bc1\u660e\uff0c\u5f3a\u5316\u5b66\u4e60\u53ef\u4ee5\u63d0\u9ad8\u6a21\u578b\u7684\u590d\u6742\u63a8\u7406\u80fd\u529b\u3002</p> <p>\u5de5\u5177\u4e66\u7c7b J.Ainslie\u3001J.Lee Thorp\u3001M.de Jong\u3001Y.Zemlyanskiy\u3001F.Lebr\u00f3n\u548cS.Sanghai\u3002Gqa\uff1a\u4ece\u591a\u5934\u68c0\u67e5\u70b9\u8bad\u7ec3\u5e7f\u4e49\u591a\u67e5\u8be2\u53d8\u6362\u5668\u6a21\u578b\u3002arXiv\u9884\u5370\u672carXiv:2305.132452023\u3002 \u4eba\u7c7b\u5b66\u3002\u4ecb\u7ecd\u514b\u52b3\u5fb7\uff0c2023\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://www.anthropic.com/index/introd\u53d1\u51fa\u6e05\u6670\u7684\u58f0\u97f3\u3002 \u5965\u65af\u6c40\uff0cA.\u5965\u5fb7\u5a1c\uff0cM.\u5948\uff0cM.\u535a\u65af\u9a6c\uff0cH.\u7c73\u54c8\u83b1\u592b\u65af\u57fa\uff0cD.\u591a\u6c49\uff0cE.\u59dc\uff0cC.\u8521\uff0cM.\u7279\u91cc\uff0c Q.Le\u7b49\uff0c\u5927\u578b\u8bed\u8a00\u6a21\u578b\u7684\u7a0b\u5e8f\u7efc\u5408\u3002arXiv\u9884\u5370\u672carXiv\uff1a2108.077322021\u3002 \u767d\uff0c\u767d\uff0c\u6731\uff0c\u5d14\uff0c\u515a\uff0c\u9093\uff0c\u8303\uff0c\u845b\uff0c\u97e9\uff0c\u9ec4\uff0c\u7b49\u3002Qwen\u6280\u672f\u62a5\u544a\u3002arXiv\u9884\u5370\u672carXiv:2309.16609\uff0c2023\u3002 Y.Bisk\u3001R.Zellers\u3001R.L.Bras\u3001J.Gao\u548cY.Choi\u3002PIQA\uff1a\u81ea\u7136\u8bed\u8a00\u4e2d\u5173\u4e8e\u7269\u7406\u5e38\u8bc6\u7684\u63a8\u7406\u3002\u7b2c\u4e09\u5341\u56db\u5c4aAAAI\u4eba\u5de5\u667a\u80fd\u5927\u4f1a</p> <p>2020\u5e74\uff0c\u7b2c\u4e09\u5341\u4e8c\u5c4a\u4eba\u5de5\u667a\u80fd\u521b\u65b0\u5e94\u7528\u5927\u4f1a\uff0cIAAI 2020\uff0c\u7b2c\u5341\u5c4aAAAI\u4eba\u5de5\u667a\u80fd\u6559\u80b2\u8fdb\u5c55\u7814\u8ba8\u4f1a\uff0cEAAI 2020\uff0c\u7f8e\u56fd\u7ebd\u7ea6\u5dde\u7ebd\u7ea6\u5e02\uff0c2020\u5e742\u67087\u65e5\u81f312\u65e5\uff0c\u7b2c7432-7439\u9875\u3002AAAI\u51fa\u7248\u793e\uff0c2020\u5e74\u3002doi:10.1609/aai.v34i05.6239\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://doi.org/10.1609/aaai.v34i05.6239. T.B.Brown\u3001B.Mann\u3001N.Ryder\u3001M.Subbiah\u3001J.Kaplan\u3001P.Dhariwal\u3001A.Neelakantan\u3001P.Shyam\u3001G.Sastry\u3001A.Askell\u3001S.Agarwal\u3001A.Herbert Voss\u3001G.Krueger\u3001T.Henighan\u3001R.Child\u3001A.Ramesh\u3001D.M.Ziegler\u3001J.Wu\u3001C.Winter\u3001C.Hesse\u3001M.Chen\u3001E.Sigler\u3001M.Litwin\u3001S.Gray\u3001B.Chess\u3001J.Clark\u3001C.Berner\u3001S.McCandlish\u3001A.Radford\u3001I.Sutskever\u548cD.Amodei\u3002\u00ac2020\u5e74\uff0c\u8bed\u8a00\u6a21\u578b\u5f88\u5c11\u6709\u4eba\u5b66\u4e60\u3002 \u9648\uff0cJ.Tworek\uff0cH.Jun\uff0cQ.Yuan\uff0cH.P.de Oliveira Pinto\uff0cJ.Kaplan\uff0cH.Edwards\uff0cY.Burda\uff0cN.Joseph\uff0cG.Brockman\uff0cA.Ray\uff0cR.Puri\uff0cG.Krueger\uff0cM.Petrov\uff0cH.Khlaaf\uff0cG.Sastry\uff0cP.Mishkin\uff0cB.Chan\uff0cS.Gray\uff0cN.Ryder\uff0cM.Pavlov\uff0cA.Power\uff0cL.Kaiser\uff0cM.Bavarian\uff0cC.Winter\uff0cP.Tillet\uff0cF.P.Such\uff0cD.Cummings\uff0cM.Plappert\uff0cF.Chantzis\uff0cE.Barnes\uff0cA.Herbert Voss\uff0cW.H.Guss\uff0cA.Nichol\uff0cA.Paino\uff0cN.Tezak\uff0cJ.Tang\uff0cI.Babuschkin S.Balaji\u3001S.Jain\u3001W.Saunders\u3001C.Hesse\u3001A.N.Carr\u3001J.Leike\u3001J.Achiam\u3001V.Misra\u3001E.Morikawa\u3001A.Radford\u3001M.Knight\u3001M.Brundage\u3001M.Murati\u3001K.Mayer\u3001P.Welinder\u3001B.McGrew\u3001D.Amodei\u3001S.McCandlish\u3001I.Sutskever\uff0c\u4ee5\u53ca W.\u624e\u4f26\u5df4\u3002\u8bc4\u4f30\u57fa\u4e8e\u4ee3\u7801\u8bad\u7ec3\u7684\u5927\u578b\u8bed\u8a00\u6a21\u578b\u3002\u7f8e\u56fd\u6ce8\u518c\u4f1a\u8ba1\u5e08\u534f\u4f1a\uff0cabs/2107.033742021\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://arxiv.org/abs/2107.03374. P.Clark\u3001I.Cowhey\u3001O.Etzioni\u3001T.Khot\u3001A.Sabharwal\u3001C.Schoenick\u548cO.Tafjord\u3002\u4f60\u8ba4\u4e3a\u4f60\u5df2\u7ecf\u89e3\u51b3\u4e86\u95ee\u7b54\u95ee\u9898\u5417\uff1ftry arc\uff0cAI2\u63a8\u7406\u6311\u6218\u3002CoRR\uff0cabs/1803.054572018\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740http://arxiv.org/abs/1803.05457. K.Cobbe\uff0cV.Kosaraju\uff0cM.Bavarian\uff0cM.Chen\uff0cH.Jun\uff0cL.Kaiser\uff0cM.Plappert\uff0cJ.Tworek\uff0c J.Hilton\uff0cR.Nakano\u7b49\u4eba\u3002\u8bad\u7ec3\u9a8c\u8bc1\u8005\u89e3\u51b3\u6570\u5b66\u5355\u8bcd\u95ee\u9898\u3002arXiv\u9884\u5370\u672carXiv:2110.14162021\u3002 T.\u8ba1\u7b97\u673a\u3002Redpajama\uff1a\u7528\u4e8e\u8bad\u7ec3\u5927\u578b\u8bed\u8a00\u6a21\u578b\u7684\u5f00\u653e\u6570\u636e\u96c6\uff0c2023\u5e74\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740 https://github.com/togethercomputer/RedPajama-Data. \u6234\u3001\u6768\u3001\u6768\u3001\u5361\u535a\u5185\u5c14\u3001\u4e50\u3001\u8428\u62c9\u8d6b\u56fe\u5b63\u8bfa\u592b\u3002Transformer xl\uff1a\u4e13\u6ce8\u4e8e\u56fa\u5b9a\u957f\u5ea6\u4e0a\u4e0b\u6587\u4e4b\u5916\u7684\u8bed\u8a00\u6a21\u578b\u3002arXiv\u9884\u5370\u672carXiv:1901.0286019\u3002 T.\u9053\u3002FlashAttention-2\uff1a\u66f4\u5feb\u7684\u6ce8\u610f\u529b\uff0c\u66f4\u597d\u7684\u5e76\u884c\u6027\u548c\u5de5\u4f5c\u5206\u533a\u30022023. \u9676\u3001\u5085\u3001\u57c3\u5c14\u8499\u3001\u9c81\u5fb7\u62c9\u3001\u96f7\u3002FlashAttention\uff1a\u5177\u6709IO\u611f\u77e5\u7684\u5feb\u901f\u3001\u5185\u5b58\u9ad8\u6548\u7684\u7cbe\u786e\u6ce8\u610f\u529b\u3002\u795e\u7ecf\u4fe1\u606f\u5904\u7406\u7cfb\u7edf\u8fdb\u5c55\uff0c2022\u3002 \u675c\uff0c\u94b1\uff0c\u5218\uff0c\u4e01\uff0c\u90b1\uff0c\u6768\uff0c\u5510\u3002Glm\uff1a\u5e26\u6709\u81ea\u56de\u5f52\u7a7a\u767d\u586b\u5145\u7684\u901a\u7528\u8bed\u8a00\u6a21\u578b\u9884\u8bad\u7ec3\u3002\u300a\u8ba1\u7b97\u8bed\u8a00\u5b66\u534f\u4f1a\u7b2c60\u5c4a\u5e74\u4f1a\u8bba\u6587\u96c6\u300b\uff08\u7b2c1\u5377\uff1a\u957f\u7bc7\u8bba\u6587\uff09\uff0c\u7b2c320-335\u9875\uff0c2022\u5e74\u3002 \u675c\u3001\u738b\u3001\u8fbe\u897f\u5409\u3001\u65af\u5766\u8bfa\u592b\u65af\u57fa\u3001\u8f9b\u683c\u548c\u52a0\u5fb7\u7eb3\u3002DROP\uff1a\u4e00\u4e2a\u9605\u8bfb\u00ac\u7406\u89e3\u57fa\u51c6\uff0c\u8981\u6c42\u5bf9\u6bb5\u843d\u8fdb\u884c\u79bb\u6563\u63a8\u7406\u3002J.Burstein\u3001C.Doran\u548cT.Solorio\uff0c\u7f16\u8f91\uff0c\u300a\u8ba1\u7b97\u8bed\u8a00\u5b66\u534f\u4f1a\u5317\u7f8e\u5206\u4f1a2019\u5e74\u4f1a\u8bae\u8bba\u6587\u96c6\uff1a\u4eba\u7c7b\u8bed\u8a00\u6280\u672f\u300b\uff0cNAACL-HLT 2019\uff0c\u7f8e\u56fd\u660e\u5c3c\u82cf\u8fbe\u5dde\u660e\u5c3c\u963f\u6ce2\u5229\u65af\uff0c2019\u5e746\u67082\u65e5\u81f37\u65e5\uff0c\u7b2c1\u5377\uff08\u957f\u7bc7\u548c\u77ed\u7bc7\u8bba\u6587\uff09\uff0c\u7b2c2368\u81f32378\u9875\u3002\u8ba1\u7b97\u8bed\u8a00\u5b66\u534f\u4f1a\uff0c2019\u5e74\u3002doi:10.18653/V1/N19-1246\u3002URL\u3002</p> <p>\u9ad8\u3001\u6bd5\u5fb7\u66fc\u3001\u5e03\u83b1\u514b\u3001\u6208\u5c14\u4e01\u3001\u970d\u666e\u3001\u798f\u65af\u7279\u3001\u5f6d\u3001\u4f55\u3001\u7530\uff0c N.Nabeshima\u7b49\u4eba\uff0cThe Pile\uff1a\u4e00\u4e2a800GB\u7684\u7528\u4e8e\u8bed\u8a00\u5efa\u6a21\u7684\u591a\u6837\u5316\u6587\u672c\u6570\u636e\u96c6\u3002arXiv\u9884\u5370\u672carXiv\uff1a2101.000272020\u3002 \u8c37\u6b4c\u30022023\u5e74\u662f\u6211\u4eec\u4eba\u5de5\u667a\u80fd\u4e4b\u65c5\u7684\u91cd\u8981\u4e0b\u4e00\u6b65\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://blog.google/technology/ai/bard\u8c37\u6b4c\u4eba\u5de5\u667a\u80fd\u641c\u7d22\u66f4\u65b0/\u3002 \u90ed\u53f0\u94ed\u3001\u90b5\u5fd7\u519b\u3001\u9f9a\u3001\u6c88\u3001\u6768\u3001\u9ec4\u3001\u6bb5\u3001\u9648\u3002Tora\uff1a\u4e00\u4e2a\u7528\u4e8e\u89e3\u51b3\u6570\u5b66\u95ee\u9898\u7684\u5de5\u5177\u96c6\u6210\u63a8\u7406\u4ee3\u7406\u3002\u7f8e\u56fd\u6ce8\u518c\u4f1a\u8ba1\u5e08\u534f\u4f1a\uff0cabs/2309.174522023\u3002doi:10.48550/ARXIV.2309.17452\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://doi.org/10.48550/arXiv.2309.17452. P.Goyal\u3001P.Doll\u00e1r\u3001r.Girshick\u3001P.Noordhuis\u3001L.Wesolowski\u3001A.Kyrola\u3001A.Tulloch\u3001Y.Jia\u548cK.He\u3002\u7cbe\u786e\u3001\u5927\u6279\u91cf\u3001\u5c0f\u6279\u91cfsgd\uff1a1\u5c0f\u65f6\u5185\u8bad\u7ec3\u56fe\u50cf\u7f51\u3002arXiv\u9884\u5370\u672carXiv:1706.026772017\u3002 D.Hendrycks\u3001C.Burns\u3001S.Basart\u3001A.Zou\u3001M.Mazeika\u3001D.Song\u548cJ.Steinhardt\u3002\u6d4b\u91cf\u5927\u91cf\u591a\u4efb\u52a1\u8bed\u8a00\u7406\u89e3\u80fd\u529b\u3002arXiv\u9884\u5370\u672carXiv:2009.03302020\u3002 D.Hendrycks\u3001C.Burns\u3001S.Kadavath\u3001A.Arora\u3001S.Basart\u3001E.Tang\u3001D.Song\u548cJ.Steinhardt\u3002\u00ac\u7528\u6570\u5b66\u6570\u636e\u96c6\u8861\u91cf\u6570\u5b66\u95ee\u9898\u7684\u89e3\u51b3\u3002arXiv\u9884\u5370\u672carXiv:2103.03874\uff0c2021\u3002 T.Henighan\uff0cJ.Kaplan\uff0cM.Katz\uff0cM.Chen\uff0cC.Hesse\uff0cJ.Jackson\uff0cH.Jun\uff0cT.B.Brown\uff0cP.\u00acDhariwal\uff0cS.Gray\u7b49\u4eba\u3002\u81ea\u56de\u5f52\u751f\u6210\u5efa\u6a21\u7684\u6807\u5ea6\u5f8b\u3002arXiv\u9884\u5370\u672carXiv:2010.14701.2020\u3002 J.Hestness\u3001S.Narang\u3001N.Ardalani\u3001G.Diamos\u3001H.Jun\u3001H.Kianinejad\u3001M.M.A.Patwary\uff0c \u6768\u548c\u5468\u3002\u6839\u636e\u7ecf\u9a8c\uff0c\u6df1\u5ea6\u5b66\u4e60\u7684\u6269\u5c55\u662f\u53ef\u9884\u6d4b\u7684\u3002arXiv\u9884\u5370\u672carXiv:1712.004092017\u3002 \u9ad8\u98de\u3002\u6d77\uff1a\u9ad8\u6548\u4e14\u8f7b\u91cf\u7684\u5927\u6a21\u578b\u8bad\u7ec3\u5de5\u5177, 2023.\u7f51\u5740https://www.high-flyer.cn/en/blog/hai llm\u3002 J.Hoffmann\uff0cS.Borgeaud\uff0cA.Mensch\uff0cE.Buchatskaya\uff0cT.Cai\uff0cE.Rutherford\uff0cD.de Las Casas\uff0c L.A.Hendricks\u3001J.Welbl\u3001A.Clark\u3001T.Hennigan\u3001E.Noland\u3001K.Millican\u3001G.van den Driessche\uff0c B.Damoc\u3001A.Guy\u3001S.Osindero\u3001K.Simonyan\u3001E.Elsen\u3001J.W.Rae\u3001O.Vinyals\u548cL.Sifre\u3002\u8bad\u7ec3\u8ba1\u7b97\u6700\u4f18\u7684\u5927\u578b\u8bed\u8a00\u6a21\u578b\u3002\u7f8e\u56fd\u8239\u7ea7\u793e\uff0cabs/2203.15556\uff0c2022\u3002doi:10.48550 /ARXIV.2203.15556\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://doi.org/10.48550/arXiv.2203.15556. \u9ec4\uff0c\u767d\uff0c\u6731\uff0c\u5f20\uff0c\u5f20\uff0c\u82cf\uff0c\u5218\uff0c\u5415\uff0c\u5f20\uff0c\u96f7\uff0c\u7b49.C-Eval:\u4e00\u4e2a\u591a\u5c42\u6b21\u3001\u591a\u5b66\u79d1\u7684\u4e2d\u56fd\u57fa\u7840\u6a21\u578b\u8bc4\u4ef7\u5957\u4ef6\u3002arXiv\u9884\u5370\u672carXiv:2305.08322023\u3002 \u62e5\u62b1\u9762\u5bf9\u56e2\u961f\u3002Tokenizers\uff1a2019\u5e74\u9488\u5bf9\u7814\u7a76\u548c\u751f\u4ea7\u4f18\u5316\u7684\u5feb\u901f\u6700\u5148\u8fdb\u7684Tokenizers\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://github.com/huggingface/tokenizers. F.i\uff0cM.Suzgun\uff0cM.Freitag\uff0cX.Wang\uff0cS.Srivats\uff0cS.Vosoughi\uff0cH.W.Chung\uff0cY.Tay\uff0cS.Ruder\uff0c D.\u5468\u3001D.\u8fbe\u65af\u548cJ.\u9b4f\u3002\u8bed\u8a00\u6a21\u578b\u662f\u591a\u8bed\u8a00\u601d\u7ef4\u63a8\u7406\u94fe\u3002\u5728\u7b2c\u5341\u4e00\u5c4a\u56fd\u9645\u5b66\u4e60\u4ee3\u8868\u5927\u4f1a\u4e0a\uff0cICLR 2023\uff0c\u5362\u65fa\u8fbe\u57fa\u52a0\u5229\uff0c2023\u5e745\u67081\u65e5\u81f35\u65e5\u3002OpenReview.net\uff0c2023\u5e74\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://openreview.net/pdf?id=fR3wGCk IXp\u3002 H.Ivison\uff0cY.Wang\uff0cV.Pyatkin\uff0cN.Lambert\uff0cM.Peters\uff0cP.Dasigi\uff0cJ.Jang\uff0cD.Wadden\uff0cN.A.Smith\uff0cI.Beltagy\u548cH.Hajishirzi\u3002\u6c14\u5019\u53d8\u5316\u4e2d\u7684\u9a86\u9a7c\uff1a\u7528tulu\u589e\u5f3alm\u9002\u5e94\u80fd\u529b2\u30022023. A.Q.\u59dc\u3001A.Sablayrolles\u3001A.Mensch\u3001C.Bamford\u3001D.S.Chaplot\u3001D.D.l.Casas\u3001F.Bressand\u3001G.Lengyel\u3001G.Lample\u3001l.Saulnier\u7b49\u4eba\u3002arXiv\u9884\u5370\u672carXiv:2310068252023\u3002 M.Joshi\uff0cE.Choi\uff0cD.Weld\u548cL.Zettlemoyer\u3002TriviaQA\uff1a\u4e00\u4e2a\u00ac\u7528\u4e8e\u9605\u8bfb\u7406\u89e3\u7684\u5927\u89c4\u6a21\u8fdc\u7a0b\u76d1\u7763\u6311\u6218\u6570\u636e\u96c6\u3002R.Barzilay\u548cM.-Y.Kan\uff0c\u7f16\u8f91\uff0c\u300a\u8ba1\u7b97\u8bed\u8a00\u5b66\u534f\u4f1a\u7b2c55\u5c4a\u5e74\u4f1a\u8bba\u6587\u96c6\u300b\uff08\u7b2c1\u5377\uff1a\u957f\u7bc7\u8bba\u6587\uff09\uff0c\u7b2c1601-1611\u9875\uff0c\u52a0\u62ff\u5927\u6e29\u54e5\u534e\uff0c2017\u5e747\u6708\u3002\u8ba1\u7b97\u8bed\u8a00\u5b66\u534f\u4f1a\u3002doi:10.18653/v1/P17-1147\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://aclanthology.org/P17-1147. J.Kaplan\u3001S.McCandlish\u3001T.Henighan\u3001T.B.Brown\u3001B.Chess\u3001R.Child\u3001S.Gray\u3001A.Radford\uff0c \u5434\u548c\u963f\u83ab\u8fea\u3002\u795e\u7ecf\u8bed\u8a00\u6a21\u578b\u7684\u7f29\u653e\u5b9a\u5f8b\u3002\u7f8e\u56fd\u8239\u7ea7\u793e\uff0c\u7f8e\u56fd\u8239\u7ea7\u793e/2001.083612020\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://arxiv.org/abs/2001.08361. V.A.Korthikanti\u3001J.Casper\u3001S.Lym\u3001L.McAfee\u3001M.Andersch\u3001M.Shoeybi\u548cB.Catanzaro\u3002\u51cf\u5c11\u5927\u578b\u53d8\u538b\u5668\u6a21\u578b\u4e2d\u7684\u6fc0\u6d3b\u91cd\u65b0\u8ba1\u7b97\u3002\u300a\u673a\u5668\u5b66\u4e60\u4e0e\u7cfb\u7edf\u5b66\u62a5\u300b\uff0c2023\u5e74\u7b2c5\u671f\u3002 T.Kwiatkowski\u3001J.Palomaki\u3001O.Redfield\u3001M.Collins\u3001A.P.Parikh\u3001C.Alberti\u3001D.Epstein\u3001I.Polosukhin\u3001J.Devlin\u3001K.Lee\u3001K.Toutanova\u3001L.Jones\u3001M.Kelcey\u3001M.Chang\u3001A.M.Dai\u3001J.Uszkoreit\u3001Q.Le\u548cS.Petrov\u3002\u81ea\u7136\u95ee\u9898\uff1a\u95ee\u7b54\u7814\u7a76\u7684\u57fa\u51c6\u3002Trans\u3002\u8ba1\u7b97\u673a\u534f\u4f1a\u3002\u8bed\u8a00\u5b66\uff0c7:452\u20134662019\u3002doi:10.1162/tacl_a_00276\u3002URL\u3002 \u6743\u3001\u674e\u3001\u5e84\u3001\u76db\u3001\u90d1\u3001\u4f59\u3001\u5188\u8428\u96f7\u65af\u3001\u5f20\u3001\u65af\u591a\u845b\u3002\u4e3a\u670d\u52a1\u4e8e\u9875\u9762\u6570\u636e\u7684\u5927\u578b\u8bed\u8a00\u6a21\u578b\u63d0\u4f9b\u9ad8\u6548\u7684\u5185\u5b58\u7ba1\u7406\u3002\u300aACM SIGOPS\u7b2c29\u5c4a\u64cd\u4f5c\u7cfb\u7edf\u539f\u7406\u7814\u8ba8\u4f1a\u8bba\u6587\u96c6\u300b\uff0c2023\u5e74\u3002 \u8d56\uff0c\u8c22\uff0c\u5218\uff0c\u6768\uff0c\u970d\u7ef4\u3002RACE\uff1a\u6765\u81ea\u8003\u8bd5\u7684\u5927\u89c4\u6a21\u9605\u8bfb\u7406\u89e3\u6570\u636e\u96c6\u3002M.Palmer\u3001R.Hwa\u548cS.Riedel\uff0c\u7f16\u8f91\uff0c\u300a2017\u5e74\u81ea\u7136\u8bed\u8a00\u5904\u7406\u5b9e\u8bc1\u65b9\u6cd5\u4f1a\u8bae\u8bba\u6587\u96c6\u300b\uff0cEMNLP 2017\uff0c\u4e39\u9ea6\u54e5\u672c\u54c8\u6839\uff0c2017\u5e749\u67089\u65e5\u81f311\u65e5\uff0c\u7b2c785-794\u9875\u3002\u8ba1\u7b97\u8bed\u8a00\u5b66\u534f\u4f1a\uff0c2017\u5e74\u3002doi:10.18653/V1/D17-1082\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://doi.org/10.18653/v1/d1 7-1082. H.Li\u3001Y.Zhang\u3001F.Koto\u3001Y.Yang\u3001H.\u8d75\u3001Y.Gong\u3001N.Duan\u548cT.Baldwin\u3002CMMLU\uff1a\u6d4b\u91cf\u00ac\u4e2d\u6587\u4e2d\u7684\u5927\u89c4\u6a21\u591a\u4efb\u52a1\u8bed\u8a00\u7406\u89e3\u80fd\u529b\u3002arXiv\u9884\u5370\u672carXiv:2306.09212023\u3002 \u674e\uff0c\u9f50\uff0c\u5b59\uff0c\u6613\uff0c\u5f20\u3002Ccpm:2021\u5e74\u4e2d\u56fd\u53e4\u5178\u8bd7\u6b4c\u5339\u914d\u6570\u636e\u96c6\u3002 \u5218\uff0c\u96f7\uff0c\u738b\uff0c\u9ec4\uff0c\u51af\uff0c\u6e29\uff0c\u7a0b\uff0c\u67ef\uff0c\u5f90\uff0c\u8c2d\uff0c\u5f20\uff0c\u5b59\uff0c\u738b\uff0c\u5f20\uff0c\u9ec4\uff0c\u8463\uff0c\u5510\u3002Alignbench\uff1a\u5bf9\u5927\u578b\u8bed\u8a00\u6a21\u578b\u7684\u4e2d\u6587\u5bf9\u9f50\u8fdb\u884c\u57fa\u51c6\u6d4b\u8bd5\u3002CoRR\uff0cabs/2311.187432023\u3002doi:10.48550/A RXIV.2311.18743\u3002URL\u3002 I.\u6d1b\u5e0c\u6d1b\u592b\u548cF.\u54c8\u7279\u3002\u89e3\u8026\u6743\u91cd\u8870\u51cf\u6b63\u5219\u5316\u3002arXiv\u9884\u5370\u672carXiv:171.051012017\u3002</p> <p>\u7f57\u3001\u5b59\u3001\u5f90\u3001\u8d75\u3001\u697c\u3001\u9676\u3001\u803f\u3001\u6797\u3001\u9648\u3001\u5f20\u3002Wizardmath\uff1a\u901a\u8fc7\u5f3a\u5316\u8fdb\u5316\u8bba\u6307\u4ee4\u4e3a\u5927\u578b\u8bed\u8a00\u6a21\u578b\u8d4b\u4e88\u6570\u5b66\u63a8\u7406\u80fd\u529b\u3002arXiv\u9884\u5370\u672carXiv:2308.095832023\u3002 S.McCandlish\u3001J.Kaplan\u3001D.Amodei\u548cO.D.\u56e2\u961f\u3002\u5927\u6279\u91cf\u8bad\u7ec3\u7684\u5b9e\u8bc1\u6a21\u578b\u3002arXiv\u9884\u5370\u672carXiv:1812.061622018\u3002 T.\u7c73\u54c8\u4f0a\u6d1b\u592b\u3001P.\u514b\u62c9\u514b\u3001T.\u79d1\u7279\u548cA.\u8428\u5df4\u74e6\u5c14\u3002\u4e00\u5957\u76d4\u7532\u80fd\u5bfc\u7535\u5417\uff1f2018\u5e74\uff0c\u4e00\u4e2a\u65b0\u7684\u5f00\u5377\u95ee\u7b54\u6570\u636e\u96c6\u3002 D.\u7eb3\u62c9\u4e9a\u5357\u3001M.\u8096\u4f0a\u6bd4\u3001J.\u5361\u65af\u73c0\u3001P.\u52d2\u683c\u96f7\u65af\u5229\u3001M.\u5e15\u5854\u74e6\u91cc\u3001V.\u79d1\u5c14\u63d0\u574e\u8482\u3001D.\u6e29\u5e03\u5170\u5fb7\uff0c P.Kashinkunti\uff0cJ.Bernauer\uff0cB.Catanzaro\uff0c\u7b49\u4eba\u3002\u4f7f\u7528\u5a01\u9707\u52a0\u901f\u5668lm\u5728gpu\u96c6\u7fa4\u4e0a\u8fdb\u884c\u9ad8\u6548\u7684\u5927\u89c4\u6a21\u8bed\u8a00\u6a21\u578b\u8bad\u7ec3\u3002\u300a\u9ad8\u6027\u80fd\u8ba1\u7b97\u3001\u7f51\u7edc\u3001\u5b58\u50a8\u548c\u5206\u6790\u56fd\u9645\u4f1a\u8bae\u8bba\u6587\u96c6\u300b\uff0c2021\u5e74\u7b2c1-15\u9875\u3002 OpenAI\u30022022\u5e74\u63a8\u51faChatGPT\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://openai.com/blog/chatgpt.OpenAI\u3002GPT4\u6280\u672f\u62a5\u544a\u3002arXiv\u9884\u5370\u672carXiv:2303.087742023\u3002 \u6b27\u9633\uff0c\u5434\uff0c\u59dc\uff0c\u963f\u5c14\u6885\u8fbe\uff0c\u6e29\u8d56\u7279\uff0c\u7c73\u4ec0\u91d1\uff0c\u5f20\uff0c\u963f\u52a0\u74e6\u5c14\uff0c\u65af\u62c9\u9a6c\uff0c\u96f7\u7b49\u3002\u8bad\u7ec3\u8bed\u8a00\u6a21\u578b\u9075\u5faa\u4eba\u7c7b\u53cd\u9988\u6307\u4ee4\u3002\u795e\u7ecf\u4fe1\u606f\u5904\u7406\u7cfb\u7edf\u8fdb\u5c55\uff0c35:27730\u2013277442022\u3002 G.\u4f69\u5185\u591a\u3001Q.\u9a6c\u62c9\u5c14\u8482\u3001D.\u8d6b\u65af\u6d1b\u3001R.\u79d1\u7ea6\u5361\u9c81\u3001A.\u5361\u4f69\u5229\u3001H.\u963f\u6d1b\u8d1d\u5fb7\u5229\u3001B.\u6f58\u5c3c\u5c14\u3001E.\u963f\u5c14\u00b7\u9a6c\u5179\u9c81\u7ef4\u548cJ.\u52b3\u5948\u3002falcon llm\u7684\u7cbe\u5316web\u6570\u636e\u96c6\uff1a\u5728\u7f51\u7edc\u6570\u636e\u548c\u4ec5\u7f51\u7edc\u6570\u636e\u65b9\u9762\u4f18\u4e8e\u7cbe\u5fc3\u7b56\u5212\u7684\u8bed\u6599\u5e93\u3002arXiv\u9884\u5370\u672carXiv:2306.011162023\u3002 A.Radford\uff0cJ.Wu\uff0cR.Child\uff0cD.Luan\uff0cD.Amodei\uff0cI.Sutskever\u7b49\u4eba\u3002\u8bed\u8a00\u6a21\u578b\u662f\u65e0\u76d1\u7763\u7684\u591a\u4efb\u52a1\u5b66\u4e60\u8005\u3002OpenAI\u535a\u5ba2\uff0c1\uff088\uff09\uff1a92019\u3002 R.Rafailov\u3001A.Sharma\u3001E.Mitchell\u3001S.Ermon\u3001C.D.Manning\u548cC.Finn\u3002\u76f4\u63a5\u504f\u597d\u4f18\u5316\uff1a\u4f60\u7684\u8bed\u8a00\u6a21\u578b\u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a\u5956\u52b1\u6a21\u578b\u30022023. S.Rajbhandari\u3001J.Rasley\u3001O.Ruwase\u548cY.He\u3002\u96f6\uff1a\u9488\u5bf9\u8bad\u7ec3\u4e07\u4ebf\u53c2\u6570\u6a21\u578b\u7684\u5185\u5b58\u4f18\u5316\u3002-SC20\uff1a\u9ad8\u6027\u80fd\u8ba1\u7b97\u3001\u7f51\u7edc\u3001\u5b58\u50a8\u548c\u5206\u6790\u56fd\u9645\u4f1a\u8bae\uff0c\u7b2c1-16\u9875\u3002IEEE\uff0c2020\u5e74\u3002 K.Sakaguchi\u3001R.L.Bras\u3001C.Bhagavatula\u548cY.Choi\u3002Winogrande:2019\u5e74\u5927\u89c4\u6a21\u5bf9\u6297\u6027winograd\u6a21\u5f0f\u6311\u6218\u3002 C.J.Shallue\u3001J.Lee\u3001J.Antognini\u3001J.Sohl Dickstein\u3001R.Frostig\u548cG.E.Dahl\u3002\u6d4b\u91cf\u6570\u636e\u5e76\u884c\u6027\u5bf9\u795e\u7ecf\u7f51\u7edc\u8bad\u7ec3\u7684\u5f71\u54cd\u3002\u673a\u5668\u5b66\u4e60\u7814\u7a76\u6742\u5fd7\uff0c20\uff08112\uff09\uff1a1-492019\u3002 N.\u6c99\u6cfd\u5c14\u3002\u8c37\u6c28\u9178\u53d8\u4f53\u6539\u5584\u53d8\u538b\u5668\u3002arXiv\u9884\u5370\u672carXiv:2002.052020\u3002 M.Shoeybi\u3001M.Patwary\u3001R.Puri\u3001P.LeGresley\u3001J.Casper\u548cB.Catanzaro\u3002\u5a01\u9707\u5929lm\uff1a\u4f7f\u7528\u6a21\u578b\u5e76\u884c\u6027\u8bad\u7ec3\u6570\u5341\u4ebf\u53c2\u6570\u8bed\u8a00\u6a21\u578b\u3002arXiv\u9884\u5370\u672carXiv:1909.080531919\u3002 S.Smith\uff0cM.Patwary\uff0cB.Norick\uff0cP.LeGresley\uff0cS.Rajbhandari\uff0cJ.Casper\uff0cZ.Liu\uff0cS.Prabhumoye\uff0cG.Zerveas\uff0cV.Korthikanti\u7b49\u4eba\u3002\u4f7f\u7528\u6df1\u5ea6\u901f\u5ea6\u548c\u5146\u6b27\u7ba1\u8bad\u7ec3\u5146\u6b27\u7ba1\u56fe\u7075nlg 530b\uff0c\u8fd9\u662f\u4e00\u79cd\u5927\u89c4\u6a21\u7684\u751f\u6210\u8bed\u8a00\u6a21\u578b\u3002arXiv\u9884\u5370\u672carXiv:2201.11990\uff0c2022\u3002 S.L.Smith\u3001P.J.Kindermans\u3001C.Ying\u548cQ.V.Le\u3002\u4e0d\u8981\u964d\u4f4e\u5b66\u4e60\u7387\uff0c\u589e\u52a0\u6279\u91cf\u5927\u5c0f\u3002arXiv\u9884\u5370\u672carXiv:171.004892017\u3002</p> <p>\u82cf\uff08J.Su\uff09\u3001\u827e\u54c8\u8fc8\u5fb7\uff08M.Ahmed\uff09\u3001\u9c81\uff08Y.Lu\uff09\u3001\u6f58\uff08S.Pan\uff09\u3001Bo\uff08W.Bo\uff09\u548c\u5218\uff08Y.Liu\uff09\u3002Roformer\uff1a\u5e26\u6709\u65cb\u8f6c\u4f4d\u7f6e\u5d4c\u5165\u7684\u589e\u5f3a\u578b\u53d8\u538b\u5668\u3002\u795e\u7ecf\u8ba1\u7b97\uff0c568:1270632024\u3002 \u5b59\u3001\u4f59\u3001\u4f59\u3001\u5361\u8fea\u30022019\u5e74\uff0c\u7814\u7a76\u6311\u6218\u6027\u4e2d\u6587\u673a\u5668\u9605\u8bfb\u7406\u89e3\u7684\u5148\u9a8c\u77e5\u8bc6\u3002 M.Suzgun\uff0cN.Scales\uff0cN.Sch\u00e4rli\uff0cS.Gehrmann\uff0cY.Tay\uff0cH.W.Chung\uff0cA.Chowdhery\uff0cQ.V.Le\uff0cE.H.Chi\uff0cD.Zhou\u7b49\u4eba\u3002\u6311\u6218\u6027\u7684\u5927\u677f\u51f3\u4efb\u52a1\u4ee5\u53ca\u601d\u7ef4\u94fe\u80fd\u5426\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\u3002arXiv\u9884\u5370\u672carXiv:2210.09261022\u3002 H.Touvron\uff0cT.Lavril\uff0cG.Izacard\uff0cX.Martinet\uff0cM.-A.Lachaux\uff0cT.Lacroix\uff0cB.Rozi\u00e8re\uff0cN.Goyal\uff0cE.Hambro\uff0cF.Azhar\u7b49\u4eba\u3002LLaMA\uff1a\u5f00\u653e\u9ad8\u6548\u7684\u57fa\u7840\u8bed\u8a00\u6a21\u578b\u3002arXiv\u9884\u5370\u672carXiv:2302.139712023a\u3002 H.Touvron\u3001L.Martin\u3001K.Stone\u3001P.Albert\u3001A.Almahairi\u3001Y.Babaei\u3001N.Bashlykov\u3001S.Batra\u3001P.Bhargava\u3001S.Bhosale\u3001D.Bikel\u3001L.Blecher\u3001C.Canton Ferrer\u3001M.Chen\u3001G.Cucurull\u3001D.Esiobu\u3001J.Fernandes\u3001J.Fu\u3001W.Fu\u3001B.Fuller\u3001C.Gao\u3001V.Goswami\u3001N.Goyal\u3001A.Hartshorn\u3001S.Hosseini\u3001R.Hou\u3001H.Inan\u3001M.Kardas\u3001V.Kerkez\u3001M.Khabsa\u3001I.Kloumann\u3001A.Korenev\u3001P.S.Koura\u3001M.Lachaux\u3001T.Lavril\u3001J.\u674e\u3001\u674e\u3001\u9c81\u3001\u6bdb\u3001\u9a6c\u8482\u5185\u7279\u3001\u7c73\u54c8\u4f0a\u6d1b\u592b\u3001\u7c73\u4ec0\u62c9\u3001\u83ab\u5229\u5821\u3001\u8042\u3001\u6ce2\u5c14\u987f\u3001\u8d56\u68ee\u65af\u5766\u3001\u9f99\u683c\u3001\u8428\u62c9\u8fea\u3001\u8c22\u5c14\u6ed5\u3001\u5e2d\u5c14\u74e6\u3001\u53f2\u5bc6\u65af\u3001\u8428\u52c3\u62c9\u66fc\u5c3c\u4e9a\u3001\u8c2d\u3001\u5510\u3001\u6cf0\u52d2\u3001\u5a01\u5ec9\u59c6\u65af\u3001\u5173\u3001\u8bb8\u3001\u4e25\u3001\u624e\u7f57\u592b\u3001\u5f20\u3001\u8303\u3001\u574e\u5df4\u675c\u5c14\u3001\u7eb3\u6717\u3001\u7f57\u5fb7\u91cc\u683c\u65af\u3001\u65af\u6258\u4f0a\u5c3c\u514b\u3001\u57c3\u675c\u8bfa\u592b\u548c T.\u590f\u9686\u3002Llama 2\uff1a\u5f00\u653e\u5f0f\u57fa\u7840\u548c\u5fae\u8c03\u7684\u804a\u5929\u6a21\u5f0f\u3002\u7f8e\u56fd\u6ce8\u518c\u4f1a\u8ba1\u5e08\u534f\u4f1a\uff0cabs/2307.092882023b\u3002doi:10.48550/arXiv.2307.09288\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://doi.org/10.48550/arXiv.2307. 09288. A.Vaswani\uff0cN.Shazeer\uff0cN.Parmar\uff0cJ.Uszkoreit\uff0cL.Jones\uff0cA.N.Gomez\uff0c\u0141\u3002\u51ef\u6492\u548cI.\u6ce2\u7f57\u82cf\u6b23\u3002\u6ce8\u610f\u529b\u662f\u4f60\u6240\u9700\u8981\u7684\u3002\u300a\u00ac\u795e\u7ecf\u4fe1\u606f\u5904\u7406\u7cfb\u7edf\u8fdb\u5c55\u300b\uff0c2017\u5e74\u7b2c30\u671f\u3002 \u738b\uff0c\u674e\uff0c\u97e9\uff0c\u7eb3\u79d1\u592b\uff0c\u9c8d\u5fb7\u6e29\u3002\u4e0d\u8981\u56de\u7b54\uff1a\u7528\u4e8e\u8bc4\u4f30llms\u4e2d\u5b89\u5168\u63aa\u65bd\u7684\u6570\u636e\u96c6\u3002\u7f8e\u56fd\u6ce8\u518c\u4f1a\u8ba1\u5e08\u534f\u4f1a\uff0cabs/2308.13387\uff0c2023\u5e74\u3002doi:10.48550/ARXIV.2308.13387\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://doi.org/10.48550/arXiv.2308.13387. \u9b4f\u3001\u738b\u3001\u8212\u5c14\u66fc\u3001\u535a\u65af\u9a6c\u3001\u4f0a\u514b\u7279\u3001\u590f\u3001\u8fdf\u3001\u4e50\u3001\u5468\u3002\u601d\u7ef4\u94fe\u63d0\u793a\u5728\u5927\u578b\u8bed\u8a00\u6a21\u578b\u4e2d\u5f15\u53d1\u63a8\u7406\u3002\u5728NeurIPS\uff0c2022\u5e74\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740http://papers.nips.cc/paper_files/paper/2022/hash/9d5609613524ecf4f15af0f7b31abca4-\u6458\u8981\u4f1a\u8bae.html\u3002 \u9b4f\uff0c\u683e\uff0c\u5218\uff0c\u8463\uff0c\u738b\u3002Cmath\uff1a\u4f60\u7684\u8bed\u8a00\u6a21\u578b\u80fd\u901a\u8fc7\u4e2d\u56fd\u5c0f\u5b66\u6570\u5b66\u8003\u8bd5\u5417\uff1f\uff0c2023. L.Xu\uff0cH.Hu\uff0cX.Zhang\uff0cL.Li\uff0cC.Cao\uff0cY.Li\uff0cY.Xu\uff0cK.Sun\uff0cD.Yu\uff0cC.Yu\uff0cY.Tian\uff0cQ.Dong\uff0cW.Liu\uff0cB.Shi\uff0cY.Cui\uff0cJ.Li\uff0cJ.Zeng\uff0cR.Wang\uff0cW.Xie\uff0cY.Lii\uff0cY.Patterson\uff0cZ.Tian\uff0cY.Zhang\u3002CLUE\uff1a\u6c49\u00ac\u8bed\u7406\u89e3\u8bc4\u4f30\u57fa\u51c6\u3002D.Scott\u3001N.Bel\u548cC.Zong\u4e3b\u7f16\uff0c\u300a\u7b2c28\u5c4a\u56fd\u9645\u8ba1\u7b97\u8bed\u8a00\u5b66\u4f1a\u8bae\u8bba\u6587\u96c6\u300b\uff0cCOLING 2020\uff0c\u897f\u73ed\u7259\u5df4\u585e\u7f57\u90a3\uff08\u5728\u7ebf\uff09\uff0c2020\u5e7412\u67088\u65e5\u81f313\u65e5\uff0c\u7b2c4762-4772\u9875\u3002\u56fd\u9645\u8ba1\u7b97\u8bed\u8a00\u5b66\u59d4\u5458\u4f1a\uff0c2020\u5e74\u3002\u7535\u8bdd\uff1a10.18653/V1/2020\uff0c\u5317\u4eac\u5e02\u671d\u9633\u533a419\u53f7\u3002URL\u3002\u00ac A.\u6768\uff0cB.\u8096\uff0cB.\u738b\uff0cB.\u5f20\uff0cC.\u5c39\uff0cC.\u5415\uff0cD.\u6f58\uff0cD.\u738b\uff0cD.\u4e25\uff0cF.\u6768\uff0cF.\u9093\uff0cF.\u738b\uff0cF.\u5218\uff0cG.\u827e\uff0cG.\u8463\uff0cH.\u8d75\uff0cH.\u5f90\uff0cH.\u5b59\uff0cH.\u5f20\uff0cH.\u5218\uff0cJ.\u5409\uff0cJ.\u8c22\uff0cJ.\u6234\uff0c</p> <p>\u65b9\uff0c\u82cf\uff0c\u5b8b\uff0c\u5218\uff0c\u5982\uff0c\u9a6c\uff0c\u738b\uff0c\u5218\uff0c\u6797\uff0c\u8042\uff0c\u90ed\uff0c\u5b59\uff0c\u5f20\uff0c\u674e\uff0c\u674e\uff0c\u7a0b\uff0c\u9648\uff0c\u66fe\uff0c\u738b\uff0c\u9648\uff0c\u95e8\uff0c \u4f59\uff0c\u6f58\uff0c\u6c88\uff0c\u738b\uff0c\u674e\uff0c\u6c5f\uff0c\u9ad8\uff0c\u5f20\uff0c\u5468\uff0c\u5434\u3002\u767e\u5ddd2\uff1a\u5f00\u653e\u5927\u89c4\u6a21\u8bed\u8a00\u6a21\u578b\u3002\u6280\u672f\u62a5\u544a\uff0c\u767e\u5ddd\u80a1\u4efd\u6709\u9650\u516c\u53f8\uff0c2023\u5e74\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://cdn.baichuan-ai.com/paper/Baichuan2-technical-report.pdf. \u4f59\u3001\u6c5f\u3001\u77f3\u3001\u4f59\u3001\u5218\u3001\u5f20\u3001\u90ed\u3001\u674e\u3001\u97e6\u52d2\u3001\u5218\u3002Metamath\uff1a\u4e3a\u5927\u578b\u8bed\u8a00\u6a21\u578b\u5f15\u5bfc\u81ea\u5df1\u7684\u6570\u5b66\u95ee\u9898\u3002\u7f8e\u56fd\u6ce8\u518c\u4f1a\u8ba1\u5e08\u534f\u4f1a\uff0cabs/2309.12284\uff0c2023\u5e74\u3002doi:10.48550/ARXIV.2309.12284\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://doi.org/10.48550/arXiv.2309.12284\u3002 R.Zellers\u3001A.Holtzman\u3001Y.Bisk\u3001A.Farhadi\u548cY.Choi\u3002HellaSwag\uff1a\u673a\u5668\u771f\u7684\u80fd\u5b8c\u6210\u4f60\u7684\u53e5\u5b50\u5417\uff1fA.Korhonen\u3001D.R.Traum\u548cL.M\u00e0rquez\uff0c\u7f16\u8f91\uff0c\u300a\u8ba1\u7b97\u8bed\u8a00\u5b66\u534f\u4f1a\u7b2c57\u5c4a\u4f1a\u8bae\u8bba\u6587\u96c6\u300b\uff0cACL 2019\uff0c\u610f\u5927\u5229\u4f5b\u7f57\u4f26\u8428\uff0c2019\u5e747\u670828\u65e5\u81f38\u67082\u65e5\uff0c\u7b2c1\u5377\uff1a\u957f\u7bc7\u8bba\u6587\uff0c\u7b2c4791-4800\u9875\u3002\u8ba1\u7b97\u8bed\u8a00\u5b66\u534f\u4f1a\uff0c2019\u5e74\u3002doi:10.18653/v1/p19-1472\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://doi.org/10.18653/v1/p1 9-1472. B.\u5f20\u548cR.\u68ee\u91cc\u5947\u3002\u5747\u65b9\u6839\u5c42\u5f52\u4e00\u5316\u3002\u300a\u795e\u7ecf\u4fe1\u606f\u5904\u7406\u7cfb\u7edf\u8fdb\u5c55\u300b\uff0c2019\u5e74\u7b2c32\u671f\u3002 G.\u5f20\u3001\u674e\u3001Z.Nado\u3001J.Martens\u3001S.Sachdeva\u3001G.Dahl\u3001C.Shallue\u548cR.B.Grosse\u3002\u5728\u4f55\u79cd\u6279\u91cf\u4e0b\uff0c\u54ea\u4e9b\u7b97\u6cd5\u9009\u62e9\u5f88\u91cd\u8981\uff1f\u6765\u81ea\u566a\u58f0\u4e8c\u6b21\u6a21\u578b\u7684\u89c1\u89e3\u3002\u300a\u795e\u7ecf\u4fe1\u606f\u5904\u7406\u7cfb\u7edf\u8fdb\u5c55\u300b\uff0c2019\u5e74\u7b2c32\u671f\u3002 C.\u90d1\u3001\u9ec4\u3001\u5b59\u3002Chid\uff1a\u7528\u4e8e\u5b8c\u5f62\u586b\u7a7a\u6d4b\u8bd5\u7684\u5927\u89c4\u6a21\u6c49\u8bed\u6210\u8bed\u6570\u636e\u96c6\u3002In 1 Korhonen\u3001D.R.Traum\u548cL.M\u00e0rquez\uff0c\u7f16\u8f91\uff0c\u300a\u8ba1\u7b97\u8bed\u8a00\u5b66\u534f\u4f1a\u7b2c57\u5c4a\u4f1a\u8bae\u8bba\u6587\u96c6\u300b\uff0cACL 2019\uff0c\u610f\u5927\u5229\u4f5b\u7f57\u4f26\u8428\uff0c2019\u5e747\u670828\u65e5\u81f38\u67082\u65e5\uff0c\u7b2c1\u5377\uff1a\u957f\u7bc7\u8bba\u6587\uff0c\u7b2c778-787\u9875\u3002\u8ba1\u7b97\u8bed\u8a00\u5b66\u534f\u4f1a\uff0c2019\u5e74\u3002doi:10.18653/V1/P19-1075\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://doi.org/10.18653/v1/p19-1075. \u90d1\u3001\u848b\u3001\u76db\u3001\u5e84\u3001\u5434\u3001\u5e84\u3001\u6797\u3001\u674e\u3001\u674e\u3001\u90a2\u3001\u5f20\u3001\u5188\u8428\u96f7\u65af\u3001\u65af\u591a\u845b\u3002\u5728mt\u677f\u51f3\u548c\u804a\u5929\u673a\u5668\u4eba\u7ade\u6280\u573a\u62c5\u4efb\u88c1\u5224\u30022023. \u949f\uff0c\u5d14\uff0c\u90ed\uff0c\u6881\uff0c\u9646\uff0c\u738b\uff0c\u8d5b\u4e49\u5fb7\uff0c\u9648\uff0c\u6bb5\u3002AGIEval\uff1a\u4e00\u4e2a\u4ee5\u4eba\u4e3a\u4e2d\u5fc3\u7684\u57fa\u51c6\uff0c\u7528\u4e8e\u8bc4\u4f30\u57fa\u7840\u6a21\u578b\u3002\u7f8e\u56fd\u6ce8\u518c\u4f1a\u8ba1\u5e08\u534f\u4f1a\uff0cabs/2304.063642023\u3002doi:10.48550/arXiv.2304.06364\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://doi.org/10.48550/arXiv.2304.06364. \u5468\uff0c\u9646\uff0c\u7c73\u4ec0\u62c9\uff0c\u68b5\u5929\uff0c\u5df4\u82cf\uff0c\u683e\uff0c\u5468\uff0c\u4faf\u3002\u5927\u578b\u8bed\u8a00\u6a21\u578b\u8bc4\u4f30\u540e\u7684\u8bf4\u660e\u3002arXiv\u9884\u5370\u672carXiv:2311.0791112023\u3002</p> <p>1 \u9644\u5f55 1.1 \u81f4\u8c22 \u8fd9\u4e2a\u9879\u76ee\u662f\u5728\u4f17\u591a\u8d21\u732e\u8005\u7684\u52aa\u529b\u4e0b\u5b9e\u73b0\u7684\u3002\u6211\u4eec\u8877\u5fc3\u611f\u8c22\u4ee5\u4e0b\u4eba\u58eb\u7684\u5e2e\u52a91\uff1a</p> <p>\u2022   \u6570\u636e\u6ce8\u91ca\u7ec4\uff1a\u8521\u5609\u7490\u3001\u9648\u745e\u5efa\u3001\u9648\u6c5d\u4e49\u3001\u51af\u84d3\u3001\u9ec4\u5ef6\u5e73\u3001\u9ec4\u9707\u3001\u59dc\u5e73\u3001\u91d1\u8363\u7acb\u3001\u91d1\u5411\u5cb3\u3001\u67ef\u5b50\u4e91\u3001\u674e\u8f89\u3001\u674e\u68a6\u4e3d\u3001\u674e\u6851\u751f\u3001\u674e\u5c0f\u5029\u3001\u674e\u8000\u8f89\u3001\u9a6c\u4e91\u8d24\u3001\u502a\u5609\u742a\u3001\u6c88\u5c0f\u91d1\u3001\u5b8b\u65b0\u6960\u3001\u5b59\u5929\u5b87\u3001\u9648\u5c0f\u6c99\u3001\u7530\u6d69\u6e90\u3001\u738b\u5c0f\u6db5\u3001\u738b\u6653\u7965\u3001\u738b\u7389\u6d69\u3001\u590f\u51e1\u6021\u3001\u5f90\u78ca\u3001\u5f90\u6cfd\u6e90\u3001\u5f90\u5fd7\u9e4f\u3001\u5f90\u5929\u5143\u3001\u5f20\u5fe0\u79b9\u3001\u90d1\u6bc5\u3001\u5468\u53cc\u559c\u3001\u5468\u6b23\u6021\u3001\u6731\u96e8\u8fb0\u3001\u6731\u96e8\u8431\u3002 \u2022   \u5408\u89c4\u56e2\u961f\uff1a\u91d1\u6668\u3001\u5510\u9896\u3001\u738b\u5999\u519b\u3001\u738b\u663e\u7956\u3001\u5434\u5c11\u9752\u3001\u590f\u4e50\u4e49\u3001\u8096\u3002 \u2022   \u4e1a\u52a1\u56e2\u961f\uff1a\u6881\u5065\u3001\u674e\u660e\u660e\u3001\u738b\u3001\u738b\u663e\u7956\u3001\u6e29\u5fd7\u725b\u3001\u53f6\u80dc\u5cf0\u3001\u5f20\u9e4f\u3001\u5f20\u9707\u3002 \u2022 \u8bbe\u8ba1\u56e2\u961f\uff1a\u9b4f\u5b89\u3001\u7fdf\u7389\u5764\u3002</p> <p>1.2 \u4e0d\u540c\u7684\u6a21\u578b\u6bd4\u4f8b\u8868\u793a \u6211\u4eec\u91cd\u65b0\u8c03\u6574\u4e86\u4e0d\u540c\u6a21\u578b\u6bd4\u4f8b\u8868\u793a\u7684\u6bd4\u4f8b\u66f2\u7ebf\uff0c\u91cd\u7528\u4e86IsoFLOP\u5256\u9762\u4e2d\u7684\u5b9e\u9a8c\u3002\u6211\u4eec\u4f7f\u75286\u91cd\u65b0\u8ba1\u7b97\u4e86\u8ba1\u7b97FLOP\ud835\udc411 and 6\ud835\udc412 \u4f5c\u4e3a\u6a21\u578b\u6bd4\u4f8b\u8868\u793a\uff0c\u5e76\u91cd\u65b0\u62df\u5408\u4e86\u6027\u80fd\u6bd4\u4f8b\u66f2\u7ebf\u3002\u5982\u56fe6\u6240\u793a\uff0c\u7ed3\u679c\u8868\u660e\uff0c\u5728\u8f83\u9ad8\u7684\u8ba1\u7b97\u9884\u7b97\u4e0b\uff0c\u8fd9\u4e09\u79cd\u8868\u793a\u4e4b\u95f4\u7684\u6700\u4f18\u6a21\u578b/\u6570\u636e\u5206\u914d\u504f\u5dee\u5e76\u4e0d\u663e\u8457\uff0c\u4f46\u5728\u8f83\u4f4e\u7684\u9884\u7b97\u4e0b\u5b58\u5728\u660e\u663e\u5dee\u5f02\u3002</p> <p>\uff08a\uff09 \u8ba1\u7b97\u9884\u7b97\ud835\udc36 = 6\ud835\udc411 \ud835\udc37   \uff08b\uff09 \u8ba1\u7b97\u9884\u7b97\ud835\udc36 = 6\ud835\udc412 \ud835\udc37   \uff08c\uff09 \u8ba1\u7b97\u9884\u7b97\ud835\udc36 = \ud835\udc40\ud835\udc37</p> <p>\u56fe6 |\u4f7f\u7528\u4e0d\u540c\u6a21\u578b\u6bd4\u4f8b\u8868\u793a\u7684\u6027\u80fd\u7f29\u653e\u66f2\u7ebf\u3002\u5ea6\u91cf\u662f\u9a8c\u8bc1\u96c6\u4e0a\u7684\u6bcf\u5b57\u8282\u6bd4\u7279\u6570\u3002\u865a\u7ebf\u8868\u793a\u9002\u5408\u8f83\u5c0f\u6a21\u578b\u7684\u5e42\u5f8b\uff08\u7070\u8272\u5706\u5708\uff09\u3002\u84dd\u8272\u6052\u661f\u4ee3\u8868DeepSeek LLM 7B\u548c67B\u3002\ud835\udc411, \ud835\udc412, and \ud835\udc40 \u5206\u522b\u8868\u793a\u6a21\u578b\u7684\u975e\u5d4c\u5165\u53c2\u6570\u3001\u5b8c\u6574\u53c2\u6570\u548c\u975e\u5d4c\u5165FLOP/\u4ee4\u724c\u3002</p> <p>\u5f53\u4f7f\u75286\ud835\udc411 \u4f5c\u4e3a\u6a21\u578b\u5c3a\u5ea6\u8868\u793a\uff0c\u62df\u5408\u7684\u6027\u80fd\u5c3a\u5ea6\u66f2\u7ebf\u5f80\u5f80\u9ad8\u4f30\u4e86\u5927\u89c4\u6a21\u6a21\u578b\u7684\u6027\u80fd\u3002\u76f8\u53cd\uff0c\u5f53\u4f7f\u75286\ud835\udc412, \u8fd9\u4e2a</p> <p>1\u4f5c\u8005\u6309\u59d3\u6c0f\u7684\u5b57\u6bcd\u987a\u5e8f\u6392\u5217\u3002 \u66f2\u7ebf\u5f80\u5f80\u4f4e\u4f30\u4e86\u4ed6\u4eec\u7684\u8868\u73b0\u3002\u4f7f\u7528\ud835\udc40 \u7136\u800c\uff0c\u7531\u4e8e\u6a21\u578b\u5c3a\u5ea6\u8868\u793a\u5b9e\u73b0\u4e86\u6700\u51c6\u786e\u7684\u9884\u6d4b\u3002</p> <p>1.3 \u57fa\u51c6\u6307\u6807\u66f2\u7ebf</p> <p>\u56fe7|DeepSeek LLM Base\u7684\u57fa\u51c6\u6307\u6807\u66f2\u7ebf\u3002ChineseQA\u662f\u6211\u4eec\u7684\u5185\u90e8\u6d4b\u8bd5\u96c6\uff0c\u5176\u6784\u5efa\u65b9\u5f0f\u7c7b\u4f3c\u4e8eTriviaQA\u3002</p> <p>\u56fe7\u663e\u793a\u4e86\u4e0d\u540c\u8bad\u7ec3\u6b65\u9aa4\u7684\u57fa\u51c6\u5ea6\u91cf\u66f2\u7ebf\u3002\u4ece\u8bad\u7ec3\u5f00\u59cb\u5230\u7ed3\u675f\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u8fd9\u4e9b\u57fa\u51c6\u7684\u6301\u7eed\u6539\u8fdb\u3002\u6211\u4eec\u76f8\u4fe1\uff0c\u5982\u679c\u8bad\u7ec3\u7ee7\u7eed\u4e0b\u53bb\uff0c\u6210\u7ee9\u4f1a\u8fdb\u4e00\u6b65\u63d0\u9ad8\u3002\u00ac</p> <p>HumanEval Python    \u591a\u8bed\u8a00</p> <p>\u9884\u8bad\u7ec3\u6a21\u578b \u4ee3\u7801-001  -   33.5%   26.1%   45.9% StarCoder   16B 36.0%   28.7%   46.8% CodeGeeX2   6B  36.0%   24.5%   42.4% CodeLlama   7B  31.7%   29.2%   41.6% CodeLlama   13B 36.0%   35.4%   48.4% CodeLlama   34B 48.2%   41.0 %  55.2% DeepSeek\u6cd5\u5b66\u7855\u58eb\u57fa\u5730  67B 42.7%   37.2%   57.4% \u6307\u4ee4\u8c03\u6574\u6a21\u578b \u5411\u5bfc\u7f16\u7801\u5668   34B 73.2%   48.8%   61.2% DeepSeek LLM\u804a\u5929  67B 73.8%   53.3%   61.4% \u886815 |\u4e0e\u7279\u5b9a\u4ee3\u7801\u6a21\u578b\u7684\u6bd4\u8f83\u3002</p> <p>1.4 \u4e0e\u4ee3\u7801\u6216\u6570\u5b66\u7279\u5b9a\u6a21\u578b\u7684\u6bd4\u8f83 \u6211\u4eec\u5bf9\u6211\u4eec\u7684\u6a21\u578b\u548c\u7279\u5b9a\u7684\u4ee3\u7801\u548c\u6570\u5b66\u8bed\u8a00\u6a21\u578b\uff08LLM\uff09\u8fdb\u884c\u4e86\u6bd4\u8f83\u3002\u886815\u8868\u660e\uff0cDeepSeek LLM 67B\u80fd\u591f\u5b9e\u73b0\u4e0eCodeLlama\u7c7b\u4f3c\u7684\u6027\u80fd\uff0c\u5c3d\u7ba1\u53ef\u4ee5\u8bbf\u95ee\u66f4\u5c11\u7684\u4ee3\u7801\u6570\u636e\u3002\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0cDeepSeek LLM\u5728\u4ee3\u7801\u4ee5\u5916\u7684\u9886\u57df\u5177\u6709\u66f4\u5927\u7684\u80fd\u529b\u3002 \u540c\u6837\uff0c\u886816\u663e\u793a\u4e86\u4ece\u5404\u79cd\u6570\u5b66\u76f8\u5173\u57fa\u51c6\u83b7\u5f97\u7684\u7ed3\u679c\uff0c\u5982GSM8K\uff08Cobbe\u7b49\u4eba\uff0c2021\uff09\u3001math\uff08Hendrycks\u7b49\u4eba\uff0c2021\u5e74\uff09\u3001MGSM zh\uff08i\u7b49\u4eba\uff0c2023\u5e74\uff09\u548cCMath\uff08Wei\u7b49\u4eba\uff0c2023\uff09\u3002DeepSeek 67B\u5728\u4e0d\u540c\u8bed\u8a00\u7684\u6570\u5b66\u76f8\u5173\u4efb\u52a1\u4e0a\u8868\u73b0\u51fa\u8272\uff0c\u5c55\u793a\u4e86\u5b83\u5728\u8fd9\u4e00\u9886\u57df\u7684\u4f18\u52bf\u3002\u6b64\u5916\uff0cDeepSeek LLM\u53ef\u4ee5\u5229\u7528\u7a0b\u5e8f\u6765\u89e3\u51b3\u6570\u5b66\u95ee\u9898\uff0c\u8fd9\u6bd4\u601d\u7ef4\u94fe\u8868\u73b0\u5f97\u66f4\u597d\u3002\u5728\u57fa\u51c6\u6d4b\u8bd5\u4e2d\uff0c\u5b83\u660e\u663e\u4f18\u4e8e\u4e4b\u524d\u7684SOTA\u6a21\u578bToRA\uff08Gou\u7b49\u4eba\uff0c2023\uff09\u3002</p> <p>\u63a8\u65ad  GSM8KATHMGSM        zhCMath</p> <p>\u601d\u7ef4\u94fe MetaMath 70B\uff08Yu\u7b49\u4eba\uff0c2023\uff09 CoT 82.3%   26.6%   66.4%   70.9% WizardMath 70B\uff08Luo\u7b49\u4eba\uff0c2023\uff09  CoT 81.6%   22.7%   64.8%   65.4% DeepSeek LLM 67B\u804a\u5929  CoT 84.1%   32.6 %  74.0%   80.3% \u5de5\u5177\u96c6\u6210\u63a8\u7406 ToRA\u4ee3\u780134B\uff08Gou\u7b49\u4eba\uff0c2023\uff09   \u5de5\u5177\u96c6\u6210    80.7%   50.8%   41.2%   53.4% DeepSeek LLM 67B\u804a\u5929  \u5de5\u5177\u96c6\u6210    86.7%   51.1%   76.4%   85.4% \u886816 |\u4e0e\u6570\u5b66\u7279\u5b9a\u6a21\u578b\u7684\u6bd4\u8f83\u3002</p> <p>1.5 DPO\u9636\u6bb5\u57fa\u51c6\u7ed3\u679c \u886817\u663e\u793a\u4e86DPO\u9636\u6bb5\u83b7\u5f97\u7684\u57fa\u51c6\u7ed3\u679c\u3002\u57fa\u4e8e\u8fd9\u4e9b\u7ed3\u679c\uff0c\u6211\u4eec\u53ef\u4ee5\u5f97\u51fa\u7ed3\u8bba\uff0cDPO\u9636\u6bb5\u4e0d\u4f1a\u663e\u8457\u5f71\u54cdLLM\u7684\u57fa\u672c\u80fd\u529b\u3002</p> Text Only<pre><code>DeepSeek 67B\u804a\u5929  DeepSeek 67B\u804a\u5929DPO\n</code></pre> <p>HellaSwag   75.7    76.1 TriviaQA    81.5    82.9 \u81ea\u7136\u95ee\u9898    47.0    48.8 MMLU    71.1    70.9 GSM8K   84.1    85.2 \u6570\u5b66  32.6    30.2 HumanEval   73.8    71.3 BBH 71.7    70.8 AGIEval 46.4    46.1 CEval   65.2    64.3 CMMLU   67.8    68.2 \u886817 | DPO\u9636\u6bb5\u524d\u540e\u7684\u57fa\u51c6\u6307\u6807\u3002</p> <p>1.6 \u8bc4\u4f30\u683c\u5f0f \u886818-\u886840\u5c55\u793a\u4e86\u6211\u4eec\u5728\u4e0d\u540c\u57fa\u51c6\u4e0a\u7684\u8bc4\u4f30\u683c\u5f0f\u793a\u4f8b\u3002</p> <p>\u63d0\u793a \u4ee5\u4e0b\u662f\u4e00\u9053\u4e2d\u56fd\u9ad8\u8003\u751f\u7269\u9009\u62e9\u9898\uff0c\u8bf7\u9009\u62e9\u6b63\u786e\u7684\u7b54\u6848\u3002 \u95ee\u9898\uff1a\u4e0b\u5217\u6709\u5173\u9ad8\u5c14\u57fa\u4f53\u3001\u7ebf\u7c92\u4f53\u548c\u53f6\u7eff\u4f53\u7684\u53d9\u8ff0, \u6b63\u786e\u7684\u662f\u9009\u9879\uff1a(A)\u4e09\u8005\u90fd \u5b58\u5728\u4e8e\u84dd\u85fb\u4e2d(B)\u4e09\u8005\u90fd\u542b\u6709DNA\uff08C\uff09\u4e09\u8005\u90fd\u662fATP \u5408\u6210\u7684\u573a\u6240(D)\u4e09\u8005\u7684\u819c\u7ed3 \u6784\u4e2d\u90fd\u542b\u6709\u86cb\u767d\u8d28 \u7b54\u6848\uff1a\u4eceA\u5230D, \u6211\u4eec\u5e94\u9009\u62e9 \u886818 | AGIEval\u793a\u4f8b\u3002</p> <p>\u63d0\u793a \u95ee\u9898\uff1a\u4f7f\u7528\u4ee5\u4e0b\u4fe1\u606f\u56de\u7b54\u95ee\u9898\u3002\u68c9\u82b1\u662f\u4e00\u79cd\u7528\u4e8e\u5236\u9020\u7ec7\u7269\u7684\u690d\u7269\u4ea7\u54c1\u3002\u68c9\u82b1\u662f\u7531\u7ea4\u7ef4\u7d20\u5236\u6210\u7684\uff0c\u7ea4\u7ef4\u7d20\u662f\u4e00\u79cd\u4eba\u7c7b\u4e0d\u6613\u6d88\u5316\u7684\u7ea4\u7ef4\u3002\u7ea4\u7ef4\u7d20\u662f\u7531\u8bb8\u591a\u7cd6\u5206\u5b50\u7ed3\u5408\u6210\u957f\u94fe\u7ec4\u6210\u7684\u3002\u6bcf\u4e2a\u7cd6\u5206\u5b50\u90fd\u542b\u6709\u78b3\u3001\u6c22\u548c\u6c27\u539f\u5b50\u3002\u68c9\u7ec7\u7269\u6d17\u6da4\u65f6\uff0c\u7ecf\u5e38\u4f1a\u5f62\u6210\u76b1\u7eb9\u3002\u670d\u88c5\u884c\u4e1a\u4f7f\u7528\u5316\u5b66\u7269\u8d28\u5236\u9020\u4e00\u4e9b\u65e0\u76b1\u7eb9\u7684\u68c9\u7ec7\u7269\u3002\u67d3\u6599\u4e5f\u88ab\u6dfb\u52a0\u5230\u68c9\u82b1\u4e2d\u7684\u7ea4\u7ef4\u7d20\u7ea4\u7ef4\u4e0a\u3002\u670d\u88c5\u5236\u9020\u5546\u5982\u4f55\u533a\u5206\u989c\u8272\u4ee5\u786e\u5b9a\u67d3\u6599\u7684\u7eaf\u5ea6\uff1f \u7b54\u6848\uff1a</p> <p>\u9009\u9879 - \u901a\u8fc7\u8fc7\u6ee4 - \u6839\u636e\u5b83\u4eec\u7684\u6cb8\u70b9 - \u6839\u636e\u5b83\u4eec\u7684\u51b0\u70b9 - \u901a\u8fc7\u7eb8\u5c42\u6790</p> <p>\u886819|ARC\u793a\u4f8b\u3002</p> <p>\u63d0\u793a \u8ba1\u7b97\u968f\u673a\u5e03\u5c14\u8868\u8fbe\u5f0f\u7684\u7ed3\u679c\u3002</p> <p>Q\uff1a not\uff08not True\uff09\u662fA\uff1a\u8ba9\u6211\u4eec\u4e00\u6b65\u4e00\u6b65\u5730\u601d\u8003\u3002 \u8bf7\u8bb0\u4f4f\uff1a\uff08i\uff09\u62ec\u53f7\u5185\u7684\u8868\u8fbe\u5f0f\u603b\u662f\u5148\u6c42\u503c\uff0c\uff08ii\uff09\u4ece\u6700\u9ad8\u4f18\u5148\u7ea7\u5230\u6700\u4f4e\u4f18\u5148\u7ea7\u7684\u64cd\u4f5c\u987a\u5e8f\u5206\u522b\u662f\u201cnot\u201d\u3001\u201cand\u201d\u3001\u201cor\u201d\u3002\u6211\u4eec\u9996\u5148\u5c06\u8868\u8fbe\u5f0f\u201cZ\u201d\u7b80\u5316\u5982\u4e0b\uff1a\u201cZ=not\uff08not True\uff09=not\uff08\uff08A\uff09\uff09\u201d\uff0c\u5176\u4e2d\u201cA=not True\u201d\u3002\u8ba9\u6211\u4eec\u8ba1\u7b97A:A=not True=not\uff08not True\uff09=not False=True\u3002\u63d2\u5165A\uff0c\u6211\u4eec\u5f97\u5230\uff1aZ=not\uff08\uff08A\uff09\uff09=not\uff08\uff08True\uff09\uff09=notTrue=False\u3002\u6240\u4ee5\u7b54\u6848\u662f\u5047\u7684\u3002</p> <p>Q\uff1a A\uff1a\u8ba9\u6211\u4eec\u4e00\u6b65\u4e00\u6b65\u5730\u601d\u8003\u3002 \u8bf7\u8bb0\u4f4f\uff1a\uff08i\uff09\u62ec\u53f7\u5185\u7684\u8868\u8fbe\u5f0f\u603b\u662f\u5148\u6c42\u503c\uff0c\uff08ii\uff09\u4ece\u6700\u9ad8\u4f18\u5148\u7ea7\u5230\u6700\u4f4e\u4f18\u5148\u7ea7\u7684\u64cd\u4f5c\u987a\u5e8f\u5206\u522b\u662f\u201cnot\u201d\u3001\u201cand\u201d\u3001\u201cor\u201d\u3002\u6211\u4eec\u9996\u5148\u5c06\u8868\u8fbe\u5f0f\u201cZ\u201d\u7b80\u5316\u5982\u4e0b\uff1a\u201cZ=\u771f\u548c\u5047\uff0c\u800c\u4e0d\u662f\u771f\u548c\u771f=A\u548cB\u201d\uff0c\u5176\u4e2d\u201cA=\u771f\u548c\u5047\u7684\u201d\u548c\u201cB=\u975e\u771f\u548c\u771f\u201d\u3002\u8ba9\u6211\u4eec\u8ba1\u7b97A:A=\u771f\uff0cFalse=\u5047\u3002\u8ba9\u6211\u4eec\u8ba1\u7b97B:B=not True\u548cTrue=not\uff08True\u548cTrue\uff09=not\uff08True\uff09=False\u3002\u63d2\u5165A\u548cB\uff0c\u6211\u4eec\u5f97\u5230\uff1aZ=A\u548cB=False\u548cFalse=False\u3002\u6240\u4ee5\u7b54\u6848\u662f\u5047\u7684\u3002</p> <p>Q\uff1a not not\uff08not\uff08False\uff09\uff09\u662fA\uff1a\u8ba9\u6211\u4eec\u4e00\u6b65\u4e00\u6b65\u5730\u601d\u8003\u3002 \u8bf7\u8bb0\u4f4f\uff1a\uff08i\uff09\u62ec\u53f7\u5185\u7684\u8868\u8fbe\u5f0f\u603b\u662f\u5148\u6c42\u503c\uff0c\uff08ii\uff09\u4ece\u6700\u9ad8\u4f18\u5148\u7ea7\u5230\u6700\u4f4e\u4f18\u5148\u7ea7\u7684\u64cd\u4f5c\u987a\u5e8f\u5206\u522b\u662f\u201cnot\u201d\u3001\u201cand\u201d\u3001\u201cor\u201d\u3002\u6211\u4eec\u9996\u5148\u5c06\u8fd9\u4e2a\u8868\u8fbe\u5f0f\u201cZ\u201d\u7b80\u5316\u5982\u4e0b\uff1a\u201cZ=not\uff08not\uff08False\uff09\uff09=not\uff08A\uff09\u201d\uff0c\u5176\u4e2d\u201cA=not\uff08False\uff09\u201d\u3002\u8ba9\u6211\u4eec\u8ba1\u7b97A:A=not\uff08False\uff09=not False=True\u3002\u63d2\u5165A\uff0c\u6211\u4eec\u5f97\u5230\uff1aZ=not not\uff08A\uff09 =\u4e0d\uff08\u771f\uff09=\u4e0d\u5047=\u771f\u3002\u6240\u4ee5\u7b54\u6848\u662f\u771f\u7684\u3002</p> <p>Q\uff1a A\uff1a\u8ba9\u6211\u4eec\u4e00\u6b65\u4e00\u6b65\u5730\u601d\u8003\u3002</p> <p>\u886820|BBH\u793a\u4f8b\u3002</p> <p>\u63d0\u793a \u4ee5\u4e0b\u662f\u4e2d\u56fd\u5173\u4e8e\u6559\u80b2\u5b66\u8003\u8bd5\u7684\u5355\u9879\u9009\u62e9\u9898\uff0c\u8bf7\u9009\u51fa\u5176\u4e2d\u7684\u6b63\u786e\u7b54\u6848\u3002 \u6839\u636e\u6211\u56fd\u5fc3\u7406\u5b66\u5bb6\u51af\u5fe0\u826f\u6559\u6388\u7684\u5b66\u4e60\u5206\u7c7b\uff0c\u57f9\u517b\u5b66\u751f\u54c1\u5fb7\u8981\u901a\u8fc7    \u3002 1 \u77e5\u8bc6\u7684\u5b66\u4e60 2 \u6280\u80fd\u7684\u5b66\u4e60 3 \u884c\u4e3a\u89c4\u8303\u7684\u5b66\u4e60 4 \u6001\u5ea6\u7684\u5b66\u4e60 \u7b54\u6848\uff1aC \u5f00\u8bbe\u8de8\u5b66\u79d1\u8bfe\u7a0b\u6216\u5efa\u7acb\u8de8\u5b66\u79d1\u4e13\u4e1a\u4f53\u73b0\u4e86\u9ad8\u7b49\u6559\u80b2\u8bfe\u7a0b\u53d1\u5c55\u7684 \u3002 1 \u7efc\u5408\u5316\u8d8b\u52bf 2 \u591a\u6837\u5316\u8d8b\u52bf 3 \u4eba\u6587\u5316\u8d8b\u52bf 4 \u79d1\u5b66\u5316\u8d8b\u52bf \u7b54\u6848\uff1aA. \u5fc3\u667a\u6280\u80fd\u7684\u7279\u70b9\u6709    \u3002 1 \u7269\u8d28\u6027\u3001\u5916\u663e\u6027\u3001\u7b80\u7f29\u6027 2 \u89c2\u5ff5\u6027\u3001\u5185\u6f5c\u6027\u3001\u7b80\u7f29\u6027 3 \u7269\u8d28\u6027\u3001\u5916\u663e\u6027\u3001\u5c55\u5f00\u6027 4 \u89c2\u5ff5\u6027\u3001\u5185\u6f5c\u6027\u3001\u5c55\u5f00\u6027 \u7b54\u6848\uff1aB \u4e0b\u5217\u5173\u4e8e\u5927\u5b66\u751f\u7684\u60c5\u7eea\u4e0e\u7406\u667a\u5173\u7cfb\u7684\u8bf4\u6cd5\u4e2d\u6b63\u786e\u7684\u662f \u3002 1 \u80fd\u51b7\u9759\u63a7\u5236\u81ea\u5df1\u60c5\u7eea 2 \u611f\u60c5\u7528\u4e8b\uff0c\u96be\u4ee5\u7528\u7406\u667a\u63a7\u5236\u60c5\u7eea 3 \u9047\u4e8b\u80fd\u575a\u6301\u81ea\u5df1\u6b63\u786e\u8ba4\u8bc6 4 \u5df2\u53d1\u5c55\u5230\u4e0d\u4e3a\u5c0f\u4e8b\u800c\u53d1\u6012\u548c\u6004\u6c14 \u7b54\u6848\uff1aB \u5728\u5b66\u5b8c\u4e00\u7bc7\u903b\u8f91\u7ed3\u6784\u4e25\u5bc6\u7684\u8bfe\u6587\u4ee5\u540e\uff0c\u52fe\u753b\u51fa\u8bfe\u6587\u7684\u8bba\u70b9\u8bba\u636e\u7684\u903b\u8f91\u5173\u7cfb\u56fe\u4ee5 \u5e2e\u52a9\u7406\u89e3\u548c\u8bb0\u5fc6\u3002\u8fd9\u79cd\u5b66\u4e60\u65b9\u6cd5\u5c5e\u4e8e    \u3002 1 \u7cbe\u7ec6\u52a0\u5de5\u7b56\u7565 2 \u7ec4\u7ec7\u7b56\u7565 3 \u590d\u8ff0\u7b56\u7565 4 \u505a\u7b14\u8bb0\u7b56\u7565 \u7b54\u6848\uff1aB \u6709\u5b66\u8005\u5f3a\u8c03\uff0c\u6559\u80b2\u8981\u6839\u636e\u4e00\u4e2a\u6c11\u65cf\u56fa\u6709\u7684\u7279\u5f81\u6765\u5b9a\uff0c\u8fd9\u79cd\u89c2\u70b9\u4f53\u73b0\u4e86 1 \u751f\u4ea7\u529b\u5bf9\u6559\u80b2\u7684\u5f71\u54cd\u548c\u5236\u7ea6 2 \u653f\u6cbb\u5236\u5ea6\u5bf9\u6559\u80b2\u7684\u5f71\u54cd\u548c\u5236\u7ea6 3 \u6587\u5316\u5bf9\u6559\u80b2\u7684\u5f71\u54cd\u548c\u5236\u7ea6 4 \u7ecf\u6d4e\u5236\u5ea6\u5bf9\u6559\u80b2\u7684\u5f71\u54cd\u548c\u5236\u7ea6 \u7b54\u6848\uff1a \u9009\u9879 - A. - B - C - D</p> <p>\u886821 | C-Eval\u793a\u4f8b\u3002</p> <p>\u63d0\u793a \u5973\uff1a\u8fd9\u4e9b\u836f\u600e\u4e48\u5403? \u7537\uff1a\u4e00\u5929\u4e09\u6b21\uff0c\u4e00\u6b21\u4e24\u7247\u3002 \u8bf7\u6839\u636e\u4e0a\u6587\u56de\u7b54\u95ee\u9898\uff1a \u4ed6\u4eec\u5728\u54ea\u513f? \u7b54\u6848\uff1a \u9009\u9879 - \u5546\u5e97 - \u996d\u5e97 - \u533b\u9662 - \u6559\u5ba4 \u886822| C3\u793a\u4f8b\u3002</p> <p>\u63d0\u793a \u4ee5\u4e0b\u662f\u5c06\u67d0\u53e5\u53e4\u8bd7\u6587\u7ffb\u8bd1\u800c\u6210\u7684\u73b0\u4ee3\u8868\u8ff0\uff1a\u6625\u5929\u5df2\u81f3\uff0c\u4e07\u7269\u590d\u82cf\uff0c\u6625\u98ce\u5982\u4e00\u4f4d\u7f8e\u4e3d\u800c\u53c8\u5fc3\u7075\u624b\u5de7\u7684\u59d1\u5a18\uff0c\u8fc8\u7740\u7ea4\u7ea4\u7ec6\u6b65\u6b3e\u6b3e\u800c\u6765\uff0c\u5979\u6325\u821e\u526a\u5200\uff0c\u5c3d\u60c5\u5730\u5c55\u793a\u90a3\u9ad8\u8d85\u7684\u5973\u5de5\u6280\u5de7\uff0c\u5979\u5148\u88c1\u51fa\u4e86\u67f3\u53f6\uff0c\u968f\u7740\u67f3\u6761\u8885\u8885\u4f9d\u4f9d\u5730\u821e\u8e48\uff0c\u53c8\u88c1\u51fa\u674f\u53f6\uff0c\u6843\u53f6\u3002 \u8be5\u7ffb\u8bd1\u6240\u5bf9\u5e94\u7684\u53e4\u8bd7\u6587\u662f\uff1a \u9009\u9879 - \u6625\u98ce\u9a8b\u5de7\u5982\u7fe6\u5200 - \u526a\u88c1\u65e0\u5de7\u4f3c\u6625\u98ce - \u98ce\u5439\u6028\u6068\u5feb\u5982\u5200 - \u6625\u98ce\u6b32\u64c5\u79cb\u98ce\u5de7</p> <p>\u886823 | CCPM\u793a\u4f8b\u3002</p> <p>\u63d0\u793a Q: \u67d0\u5c0f\u5b66\u5728\u201c\u732e\u7231\u5fc3\u2013\u4e3a\u6c76\u5ddd\u5730\u9707\u533a\u6350\u6b3e\u201d\u6d3b\u52a8\u4e2d\uff0c \u516d\u5e74\u7ea7\u4e94\u4e2a\u73ed\u5171\u6350\u6b3e8000\u5143\uff0c \u5176\u4e2d\u4e00\u73ed\u6350\u6b3e1500\u5143\uff0c \u4e8c\u73ed\u6bd4\u4e00\u73ed\u591a\u6350\u6b3e200\u5143\uff0c \u4e09\u73ed\u6350\u6b3e1600\u5143\uff0c\u56db\u73ed\u4e0e\u4e94\u73ed\u6350\u6b3e\u6570\u4e4b\u6bd4\u662f3\uff1a5\uff0e\u56db\u73ed\u6350\u6b3e\u591a\u5c11\u5143\uff1f A.\u4e00 \u73ed \u6350 \u6b3e1500\u5143 \uff0c \u800c \u4e8c \u73ed \u6bd4 \u4e00 \u73ed \u591a \u6350200\u5143 \uff0c \u6240 \u4ee5 \u4e8c \u73ed \u6350\u6b3e1500+200=1700\u5143\uff0c \u53c8\u77e5\u9053\u516d\u5e74\u7ea7\u4e94\u4e2a\u73ed\u4e00\u5171\u6350\u6b3e8000\u5143\uff0c \u6240\u4ee5\u56db\u73ed\u548c\u4e94\u73ed\u6350\u6b3e\u4e4b\u548c= \u4e00\u5171\u6350\u6b3e- \u4e00\u73ed\u548c\u4e8c\u73ed\u548c\u4e09\u73ed\u6350\u6b3e\u4e4b\u548c\uff0c \u53738000-1500-1700-1600=3200\u5143\uff0c \u800c\u9898\u76ee\u8bf4\u56db\u73ed\u4e0e\u4e94\u73ed\u6350\u6b3e\u6570\u4e4b\u6bd4\u662f3\uff1a5\uff0c \u5219\u56db\u73ed\u6350\u6b3e\u4e863200/(3+5)*3=1200\u5143\u3002\u6240\u4ee5\u7b54\u6848\u662f\uff1a1200\u3002 Q: \u5c0f\u4fca\u5728\u4e1c\u897f\u5927\u9053\u4e0a\u8dd1\u6b65\uff0c\u82e5\u89c4\u5b9a\u5411\u4e1c\u4e3a\u6b63\u3002\u4ed6\u5148\u5411\u4e1c\u8dd1\u4e86800\u7c73\uff0c\u7136\u540e\u53c8\u8dd1 \u4e86\u4e00\u6bb5\u4e4b\u540e\uff0c\u4ed6\u4f4d\u4e8e\u51fa\u53d1\u70b9\u897f\u8fb9100\u7c73\u5904\uff0c\u5c0f\u4fca\u7b2c\u4e8c\u6bb5\u8dd1\u4e86\u591a\u5c11\u7c73\uff1f A.\u5c0f\u4fca\u7b2c\u4e8c\u6bb5\u8dd1\u5b8c\u540e\u4f4d\u4e8e\u51fa\u53d1\u70b9\u897f\u8fb9\uff0c \u6240\u4ee5\u7b2c\u4e8c\u6bb5\u5e94\u8be5\u662f\u5411\u897f\u8dd1\uff0c \u7b2c\u4e8c\u6bb5\u8dd1\u7684\u957f\u5ea6-\u7b2c\u4e00\u6bb5\u8dd1\u7684\u957f\u5ea6=100\uff0c \u7b2c\u4e8c\u6bb5\u8dd1\u4e86100+800=900\u7c73\u3002\u6240\u4ee5\u7b54\u6848\u662f\uff1a900\u3002</p> <p>Q: A\u8f66\u548cB\u8f66\u540c\u65f6\u4ece\u7532\u3001\u4e59\u4e24\u5730\u76f8\u5411\u5f00\u51fa\uff0c\u7ecf\u8fc75\u5c0f\u65f6\u76f8\u9047\uff0e\u7136\u540e\uff0c\u5b83\u4eec\u53c8\u5404\u81ea\u6309\u539f\u901f\u539f\u65b9\u5411\u7ee7\u7eed\u884c\u9a763\u5c0f\u65f6\uff0c\u8fd9\u65f6A\u8f66\u79bb\u4e59\u5730\u8fd8\u6709135\u5343\u7c73\uff0cB\u8f66\u79bb\u7532\u5730\u8fd8\u6709165\u5343\u7c73\uff0e\u7532\u3001\u4e59\u4e24\u5730\u76f8\u8ddd\u591a\u5c11\u5343\u7c73\uff1f A: \u5047\u8bbeA\u8f66\u7684\u901f\u5ea6\u4e3ax\u5343\u7c73\u6bcf\u5c0f\u65f6\uff0cB\u8f66\u7684\u901f\u5ea6\u4e3ay\u5343\u7c73\u6bcf\u5c0f\u65f6\uff0c\u6839\u636e\u800cA\u3001B\u76f8\u9047\u65f6A\u8f66\u884c\u9a76\u4e865\u5c0f\u65f6\uff0cA\u8f66\u884c\u9a763\u5c0f\u65f6\u540e\u79bb\u4e59\u5730\u8fd8\u6709135\u5343\u7c73\uff0cB\u8f66\u884c\u9a763\u5c0f\u65f6\u540e\u8ddd\u79bb\u7532\u5730\u8fd8\u6709165\u5343\u7c73\uff0c\u53ef\u4ee5\u5f97\u5230\u7532\u4e59\u4e24\u5730\u76f8\u8ddd=5x+5y=135+8x=165+8y\u53d8\u6362\u5f97\u5230\uff1a10\uff08x+y\uff09\uff1d300+8\uff08x+y\uff09\u4e8e\u662fx+y=150\u7532\u4e59\u4e24\u5730\u76f8\u8ddd5\uff08x+y\uff09=750\u5343\u7c73\u3002\u6240\u4ee5\u7b54\u6848\u662f\uff1a750\u3002</p> <p>Q\u5728\u4e00\u4e2a\u5e95\u9762\u534a\u5f84\u4e3a10\u5398\u7c73\u7684\u5706\u67f1\u5f62\u5bb9\u5668\u5185\uff0c\u5012\u516510\u5398\u7c73\u6df1\u7684\u6c34\uff0c\u7136\u540e\u5c06\u4e00\u4e2a\u5e95\u9762\u76f4\u5f844\u5398\u7c73\uff0c\u9ad86\u5398\u7c73\u7684\u5706\u9525\u5f62\u94c5\u9524\u653e\u5165\u6c34\u4e2d\uff0c\u5bb9\u5668\u4e2d\u6c34\u9762\u4e0a\u5347\u591a\u5c11\u5398\u7c73\uff1f A.</p> <p>\u886824 | CMATH\u793a\u4f8b\u3002</p> <p>\u63d0\u793a \u4ee5\u4e0b\u662f\u5173\u4e8e\u89e3\u5256\u5b66\u7684\u5355\u9879\u9009\u62e9\u9898\uff0c\u8bf7\u76f4\u63a5\u7ed9\u51fa\u6b63\u786e\u7b54\u6848\u7684\u9009\u9879\u3002 \u9898\u76ee\uff1a\u58c1\u80f8\u819c\u7684\u5206\u90e8\u4e0d\u5305\u62ec 1 \u808b\u80f8\u819c 2 \u80ba\u80f8\u819c 3 \u8188\u80f8\u819c 4 \u80f8\u819c\u9876 \u7b54\u6848\u662f\uff1aB \u9898\u76ee\uff1a\u5c5e\u4e8e\u8776\u9aa8\u4e0a\u7684\u7ed3\u6784\u4e3a 1 \u5782\u4f53\u7a9d 2 \u68d8\u5b54 3 \u7834\u88c2\u5b54 4 \u89c6\u795e\u7ecf\u7ba1\u7b54\u6848\u662f\uff1aB \u9898\u76ee\uff1a\u5c5e\u4e8e\u53f3\u5fc3\u623f\u7684\u7ed3\u6784\u662f 1 \u8089\u67f1 2 \u5ba4\u4e0a\u5d74 3 \u4e73\u5934\u808c 4 \u68b3\u72b6\u808c \u7b54\u6848\u662f\uff1aD \u9898\u76ee\uff1a\u54bd\u7684\u5206\u90e8 1 \u54bd\u9690\u7a9d 2 \u53e3\u54bd\u90e8 3 \u9f3b\u54bd\u90e8 4 \u5589\u54bd\u90e8 \u7b54\u6848\u662f\uff1aC \u9898\u76ee\uff1a\u820c\u4e0b\u795e\u7ecf\u6838\u4f4d\u4e8e 1 \u95f4\u8111 2 \u5ef6\u9ad3 3 \u4e2d\u8111 4 \u8111\u6322 \u7b54\u6848\u662f\uff1aB \u9898\u76ee\uff1a\u4ece\u8111\u5e72\ud83d\udc49\u4fa7\u51fa\u8111\u7684\u8111\u795e\u7ecf\u662f 1 \u526f\u795e\u7ecf 2 \u4e09\u53c9\u795e\u7ecf 3 \u820c\u4e0b\u795e\u7ecf 4 \u6ed1\u8f66\u795e\u7ecf \u7b54\u6848\u662f\uff1a \u9009\u9879 - A. - B - C - D</p> <p>\u886825 | CMMLU\u793a\u4f8b\u3002</p> <p>\u63d0\u793a \u6587\u7ae0\uff1a\u8be5\u5e02\u7684\u5e73\u5747\u5e74\u9f84\u4e3a22.1\u5c81\u300210.1%\u7684\u5c45\u6c11\u5e74\u9f84\u572818\u5c81\u4ee5\u4e0b\uff1b56.2%\u7684\u4eba\u5e74\u9f84\u572818\u81f324\u5c81\u4e4b\u95f4\uff1b16.1%\u662f \u4ece25\u5c81\u523044\u5c81\uff1b45\uff5e64\u5c81\u536010.5%\uff1b7%\u7684\u4eba\u5e74\u9f84\u572865\u5c81\u6216\u4ee5\u4e0a\u3002\u8be5\u5e02\u7684\u6027\u522b\u6784\u6210\u4e3a\u7537\u602764.3%\uff0c\u5973\u602735.7%\u3002</p> <p>\u6839\u636e\u4e0a\u8ff0\u6587\u7ae0\u56de\u7b54\u4ee5\u4e0b\u95ee\u9898\uff0c\u5982\u679c\u9700\u8981\u8ba1\u7b97\uff0c\u8bf7\u4ed4\u7ec6\u8ba1\u7b97\u3002 Q\uff1a \u6709\u591a\u5c11\u767e\u5206\u6bd4\u4e0d\u662f\u4ece25%\u523044%\uff1f A\uff1a \u7b54\u6848\u7c7b\u578b\u4e3a\u6570\u5b57\u3002\u6839\u636e\u4e0a\u8ff0\u6bb5\u843d\uff0c\u7b54\u6848\u4e3a83.9\u3002</p> <p>Q\uff1a \u6709\u591a\u5c11\u767e\u5206\u6bd4\u4e0d\u662f25\u523044\uff1f A\uff1a \u7b54\u6848\u7c7b\u578b\u4e3a\u6570\u5b57\u3002\u56e0\u6b64\uff0c\u6839\u636e\u4e0a\u8ff0\u6bb5\u843d\uff0c\u7b54\u6848\u662f</p> <p>\u886826 | DROP\u793a\u4f8b\u3002</p> <p>\u63d0\u793a \u4e2d\u65b0\u7f5112\u67087\u65e5\u7535\u7efc\u5408\u5916\u5a926\u65e5\u62a5\u9053,\u5728\u7f8e\u56fd\u5f97\u514b\u8428\u65af\u5dde,\u8d1f\u8d23\u6cbb\u7597\u65b0\u51a0\u80ba\u708e\u60a3\u8005\u7684\u533b\u751f\u7ea6\u745f\u592b\u00b7\u74e6\u9686\uff08\u7ea6\u745f\u592b\u00b7\u74e6\u9686\uff09\u5df2\u8fde\u7eed\u4e0a\u73ed\u8d85260\u5929,\u6bcf\u5929\u53ea\u7761\u4e0d\u8d85\u8fc72\u5c0f\u65f6\u3002\u74e6\u9686\u65e5\u524d\u63a5\u53d7\u91c7\u8bbf\u65f6\u547c\u5401,\u7f8e\u56fd\u6c11\u4f17\u5e94\u9075\u4ece\u9632\u75ab\u89c4\u5b9a,\u4e00\u7ebf\u7684\u533b\u62a4\u4eba\u5458\u201c\u5df2</p> <p>\u9009\u9879 - \u795e\u6e05\u6c14\u723d\u201d\u3002 - \u8be1\u8ba1\u591a\u7aef\u201d\u3002 - \u7cbe\u75b2\u529b\u7aed\u201d\u3002 - \u5206\u5de5\u5408\u4f5c\u201d\u3002 - \u5bc5\u5403\u536f\u7cae\u201d\u3002 - \u571f\u8c6a\u52a3\u7ec5\u201d\u3002 - \u82b8\u82b8\u4f17\u751f\u201d\u3002</p> <p>\u886827| CHID\u793a\u4f8b\u3002</p> <p>\u63d0\u793a \u80e1\u96ea\u5ca9\u79bb\u8239\u767b\u5cb8\uff0c\u5750\u8f7f\u8fdb\u57ce\uff0c\u7b49\u738b\u6709\u9f84\u5230\u5bb6\uff0c\u4ed6\u63a5\u7740\u4e5f\u5230\u4e86\u4ed6\u90a3\u91cc\uff0c\u8138\u4e0a\u662f\u63a9 \u6291\u4e0d\u4f4f\u7684\u7b11\u5bb9\uff0c\u738b\u6709\u9f84\u592b\u5987\u90fd\u89c9\u5f97\u5947\u602a\uff0c\u95ee\u4ed6\u4ec0\u4e48\u4e8b\u8fd9\u4e48\u9ad8\u5174\u3002 \u4e0a\u9762\u7684\u53e5\u5b50\u4e2d\u7684\"\u4ed6\"\u6307\u7684\u662f \u80e1\u96ea\u5ca9 \u6e10\u6e10\u5730\uff0c\u6c64\u4e2d\u51dd\u7ed3\u51fa\u4e00\u56e2\u56e2\u5757\u72b6\u7269\uff0c\u5c06\u5b83\u4eec\u635e\u8d77\u653e\u8fdb\u76c6\u91cc\u51b7\u5374\uff0c\u80a5\u7682\u4fbf\u51fa\u73b0\u5728 \u4e16\u4e0a\u4e86\u3002 \u4e0a\u9762\u7684\u53e5\u5b50\u4e2d\u7684\"\u5b83\u4eec\"\u6307\u7684\u662f \u5757\u72b6\u7269</p> <p>\u201c\u5979\u5e8f\u4e0a\u660e\u660e\u5f15\u7740JulesTellier\u7684\u6bd4\u55bb\uff0c\u8bf4\u6709\u4e2a\u751f\u8131\u53d1\u75c5\u7684\u4eba\u53bb\u7406\u53d1\uff0c\u90a3\u5243\u5934\u7684\u5bf9\u4ed6\u8bf4\u4e0d\u7528\u526a\u53d1\uff0c\u7b49\u4e0d\u4e86\u51e0\u5929\uff0c\u5934\u6bdb\u538b\u513f\u5168\u6389\u5149\u4e86\uff1b\u5927\u90e8\u5206\u73b0\u4ee3\u6587\u5b66\u4e5f\u540c\u6837\u7684\u4e0d\u503c\u6279\u8bc4\u3002\u8fd9\u6bd4\u55bb\u8fd8\u7b97\u4fcf\u76ae\u3002\u201d \u4e0a\u9762\u7684\u53e5\u5b50\u4e2d\u7684\"\u4ed6\"\u6307\u7684\u662f \u751f\u8131\u53d1\u75c5\u7684\u4eba \u5728\u6d1b\u4f26\u4f50\u5927\u8857\u7684\u5c3d\u5934\u5904\uff0c\u77d7\u7acb\u7740\u8457\u540d\u7684\u5723\u4e09\u4e00\u5927\u6559\u5802\u3002\u5b83\u6709\u7740\u5de8\u5927\u7684\u7a79\u9876\uff0c\u8fd8 \u6709\u660e\u4eae\u7684\u5f69\u8272\u73bb\u7483\u7a97\uff0c\u4e0a\u9762\u63cf\u7ed8\u7740\u300a\u65e7\u7ea6\u300b\u548c\u300a\u65b0\u7ea6\u300b\u7684\u573a\u666f\u3002 \u4e0a\u9762\u7684\u53e5\u5b50\u4e2d\u7684\"\u5b83\"\u6307\u7684\u662f \u5723\u4e09\u4e00\u5927\u6559\u5802 \u4ed6\u4f2f\u7236\u8fd8\u6709\u8bb8\u591a\u5973\u5f1f\u5b50\uff0c\u5927\u534a\u662f\u5bcc\u5546\u8d22\u4e3b\u7684\u5916\u5ba4\uff1b\u8fd9\u4e9b\u8d22\u7fc1\u767d\u5929\u5fd9\u7740\u8d5a\u94b1\uff0c\u6015 \u5c0f\u516c\u9986\u91cc\u7684\u60c5\u5987\u957f\u65e5\u65e0\u804a\uff0c\u8981\u4e0d\u5b89\u5206\uff0c\u5e38\u5e38\u53eb\u5979\u4eec\u5b66\u70b9\u73a9\u827a\u513f\u6d88\u9063\u3002 \u4e0a\u9762\u7684\u53e5\u5b50\u4e2d\u7684\"\u5979\u4eec\"\u6307\u7684\u662f \u60c5\u5987 \u8d75\u96e8\u53c8\u62ff\u51fa\u4e86\u4e00\u4e2a\u676f\u5b50\uff0c\u6211\u4eec\u70ed\u60c5\u5730\u8bf7\u8001\u738b\u5165\u5ea7\uff0c\u6211\u8fb9\u7ed9\u4ed6\u5012\u9152\u8fb9\u95ee\uff1a1962\u5e74 \u7684\u54ea\u6b21\u8bb0\u5f97\u5417\uff1f\u201c \u4e0a\u9762\u7684\u53e5\u5b50\u4e2d\u7684\"\u4ed6\"\u6307\u7684\u662f \u886828|CLUEWSC\u793a\u4f8b\u3002</p> <p>\u63d0\u793a Q\uff1a \u9a6c\u514b\u65af\u80fd\u572840\u5206\u949f\u5185\u5272\u5b8c\u8349\u576a\u3002\u5982\u679c\u4ed6\u7ed9\u8349\u576a\u65bd\u80a5\u9700\u8981\u4e24\u500d\u7684\u65f6\u95f4\uff0c\u90a3\u4e48\u4ed6\u7ed9\u8349\u576a\u5272\u8349\u548c\u65bd\u80a5\u9700\u8981\u591a\u957f\u65f6\u95f4\uff1f A\uff1a \u8ba9\u6211\u4eec\u4e00\u6b65\u4e00\u6b65\u5730\u601d\u8003\u3002\u7ed9\u8349\u576a\u65bd\u80a5\u6700\u591a\u9700\u89812*40\u5206\u949f=80\u5206\u949f\u3002\u603b\u7684\u6765\u8bf4\uff0cMax\u9700\u898180\u5206\u949f+40\u5206\u949f=120\u5206\u949f\u6765\u5272\u8349\u548c\u65bd\u80a5\u3002\u7b54\u6848\u662f120\u3002</p> <p>Q\uff1a \u8fd9\u4e9b\u767e\u5409\u997c\u6bcf\u4e2a\u552e\u4ef72.25\u7f8e\u5143\uff0c\u6216\u8005\u4e00\u6253\u552e\u4ef724\u7f8e\u5143\u3002\u4e00\u6b21\u4e70\u4e00\u6253\u767e\u5409\u997c\uff0c\u6bcf\u4e2a\u767e\u5409\u997c\u80fd\u8282\u7701\u591a\u5c11\u94b1\uff1f A\uff1a \u8ba9\u6211\u4eec\u4e00\u6b65\u4e00\u6b65\u5730\u601d\u8003\u3002\u5b83\u4eec\u7684\u4ef7\u683c\u4e3a2.25100=225\u7f8e\u5206\u3002\u6309\u6279\u91cf\u8d39\u7387\u8ba1\u7b97\uff0c\u5b83\u4eec\u662f24/12=2\u7f8e\u5143\u3002\u6bcf\u4ef6\u552e\u4ef72100=200\u7f8e\u5206\u3002225-200=\u6bcf\u4e2a\u767e\u5409\u997c\u8282\u770125\u7f8e\u5206\u3002\u7b54\u6848\u662f25\u3002</p> <p>Q\uff1a \u8482\u59c6\u4eca\u5e745\u5c81\u3002\u4ed6\u7684\u5802\u5144\u9686\u7f8e\u5c14\u7684\u5e74\u9f84\u662f\u4ed6\u7684\u4e09\u500d\u3002\u4ed6\u7684\u53e6\u4e00\u4e2a\u5802\u5144\u73cd\u59ae\u6bd4\u9686\u7f8e\u5c14\u5927\u4e24\u5c81\u3002\u8482\u59c6\u6bd4\u73cd\u59ae\u5c0f\u51e0\u5c81\uff1fA\uff1a \u8ba9\u6211\u4eec\u4e00\u6b65\u4e00\u6b65\u5730\u601d\u8003\u3002\u9686\u7f8e\u5c14\u662f5 x 3=15\u5c81\u3002\u73cd\u59ae\u662f15+2=17\u5c81\u3002\u6240\u4ee5\uff0c\u8482\u59c6\u6bd4\u73cd\u59ae\u5c0f17-5=12\u5c81\u3002\u7b54\u6848\u662f12\u3002</p> <p>Q\uff1a \u8fd9\u6240\u5b66\u6821\u670914\u4e2a\u7537\u751f\u548c10\u4e2a\u5973\u751f\u3002\u5982\u679c4\u4e2a\u7537\u5b69\u548c3\u4e2a\u5973\u5b69\u8f8d\u5b66\uff0c\u8fd8\u5269\u591a\u5c11\u7537\u5b69\u548c\u5973\u5b69\uff1f A\uff1a \u8ba9\u6211\u4eec\u4e00\u6b65\u4e00\u6b65\u5730\u601d\u8003\u3002\u670914\u4e2a\u7537\u5b69\u2014\u20144\u4e2a\u7537\u5b69=10\u4e2a\u7537\u5b69\u3002\u670910\u4e2a\u5973\u5b69\uff0c3\u4e2a\u5973\u5b69=7\u4e2a\u5973\u5b69\u3002\u603b\u5171\u670910\u4e2a\u7537\u5b69+7\u4e2a\u5973\u5b69=17\u4e2a\u7537\u5b69\u548c\u5973\u5b69\u3002\u7b54\u6848\u662f17\u3002</p> <p>Q\uff1a \u5efa\u9020\u4e00\u4e2a\u9e1f\u820d\u9700\u89817\u5757\u6728\u677f\u548c20\u4e2a\u9489\u5b50\u3002\u5982\u679c\u4e00\u4e2a\u9489\u5b50\u82b1\u8d390.05\uff0c\u4e00\u5757\u6728\u677f\u82b1\u8d393\uff0c\u90a3\u4e48\u5efa\u90204\u4e2a\u9e1f\u820d\u7684\u6210\u672c\u662f\u591a\u5c11\uff08\u4ee5\u7f8e\u5143\u8ba1\uff09\uff1f A\uff1a \u8ba9\u6211\u4eec\u4e00\u6b65\u4e00\u6b65\u5730\u601d\u8003\u3002\u4e00\u4e2a\u9e1f\u820d\u7684\u6728\u677f\u6210\u672c\u4e3a73=21\u3002\u6bcf\u4e2a\u9e1f\u820d\u7684\u9489\u5b50\u6210\u672c\u4e3a200.05=1\u3002\u56e0\u6b64\uff0c\u8981\u5efa\u9020\u4e00\u4e2a\u9e1f\u820d\uff0c\u9700\u898121+1=22\u3002\u56e0\u6b64\uff0c\u5efa\u90204\u4e2a\u9e1f\u820d\u7684\u6210\u672c\u4e3a4*22=88\u3002\u7b54\u6848 \u662f88\u3002</p> <p>Q\uff1a \u4e39\u5c3c\u5e26\u4e863\u4e2a\u897f\u74dc\u53bb\u4ed6\u5bb6\u91ce\u9910\u3002\u4ed6\u628a\u6bcf\u4e2a\u897f\u74dc\u5207\u621010\u7247\u3002\u4ed6\u7684\u59b9\u59b9\u5e26\u4e86\u4e00\u4e2a\u897f\u74dc\u53bb\u91ce\u9910\uff0c\u5979\u628a\u897f\u74dc\u5207\u621015\u7247\u3002\u91ce\u9910\u65f6\u4e00\u5171\u6709\u591a\u5c11\u7247\u897f\u74dc\uff1f A\uff1a \u8ba9\u6211\u4eec\u4e00\u6b65\u4e00\u6b65\u5730\u601d\u8003\u3002\u4ece\u4e39\u5c3c\u90a3\u91cc\uff0c\u6709310=30\u4e2a\u897f\u74dc\u7247\u3002\u4ece\u4ed6\u59d0\u59d0\u90a3\u91cc\uff0c\u6709115=15\u4e2a\u897f\u74dc\u7247\u3002\u603b\u5171\u670930+15=45\u4e2a\u897f\u74dc\u7247\u3002\u7b54\u6848\u662f45\u3002</p> <p>Q\uff1a \u5b89\u5409\u62c9\u662f\u7ebd\u7ea6\u7684\u4e00\u540d\u81ea\u884c\u8f66\u4fe1\u4f7f\u3002\u5979\u9700\u8981\u9012\u9001\u7684\u5305\u88f9\u662f\u9910\u8d39\u76848\u500d\u3002\u5982\u679c\u5979\u9700\u8981\u900127\u987f\u996d\u548c\u5305\u88f9\uff0c\u5979\u8981\u9001\u591a\u5c11\u987f\u996d\uff1f A\uff1a \u8ba9\u6211\u4eec\u4e00\u6b65\u4e00\u6b65\u5730\u601d\u8003\u3002\u8bbep\u4e3aAngela\u9012\u9001\u7684\u5305\u88f9\u6570\u91cf\uff0cm\u4e3a\u7528\u9910\u6b21\u6570\u3002\u6211\u4eec\u77e5\u9053p+m=27\u548cp=8m\u3002\u5c06\u7b2c\u4e8c\u4e2a\u65b9\u7a0b\u4ee3\u5165\u7b2c\u4e00\u4e2a\u65b9\u7a0b\uff0c\u6211\u4eec\u5f97\u52308m+m=27\u3002\u7ed3\u5408\u7c7b\u4f3c\u7684\u672f\u8bed\uff0c\u6211\u4eec\u5f97\u52309m=27\u3002\u628a\u4e24\u8fb9\u90fd\u9664\u4ee59\uff0c\u6211\u4eec\u5f97\u5230m=3\u3002\u7b54\u6848\u662f3\u3002</p> <p>Q\uff1a \u79d1\u91cc\u4eca\u59293\u5c81\u4e86\u3002\u4e94\u5e74\u540e\uff0c\u5979\u5c06\u662f\u5979\u59d1\u59d1\u7684\u4e09\u5206\u4e4b\u4e00\u3002\u5979\u963f\u59e8\u4eca\u5929\u51e0\u5c81\u4e86\uff1f A\uff1a \u8ba9\u6211\u4eec\u4e00\u6b65\u4e00\u6b65\u5730\u601d\u8003\u30025\u5e74\u540e\uff0c\u79d1\u91cc\u5c06\u662f3+5=8\u5c81\u30025\u5e74\u540e\uff0c\u79d1\u91cc\u7684\u963f\u59e8\u5c06\u662f8 x 3=24\u5c81\u3002\u4eca\u5929\uff0c\u5979\u7684\u963f\u59e824-5=19\u5c81\u3002\u7b54\u6848\u662f19\u3002</p> <p>Q\uff1a Indras\u7684\u540d\u5b57\u6709\u516d\u4e2a\u5b57\u6bcd\u3002\u5979\u59d0\u59d0\u7684\u540d\u5b57\u6bd4\u56e0\u9640\u7f57\u540d\u5b57\u4e2d\u4e00\u534a\u7684\u5b57\u6bcd\u591a\u51fa4\u4e2a\u5b57\u6bcd\u3002\u56e0\u9640\u7f57\u548c\u5979\u59d0\u59d0\u7684\u540d\u5b57\u91cc\u6709\u591a\u5c11\u4e2a\u5b57\u6bcd\uff1fA\uff1a \u8ba9\u6211\u4eec\u4e00\u6b65\u4e00\u6b65\u5730\u601d\u8003\u3002</p> <p>\u886829|GSM8K\u793a\u4f8b\u3002</p> <p>\u63d0\u793a \u5f39\u94a2\u7434\uff1a\u4e00\u4e2a\u7537\u4eba\u5750\u5728\u94a2\u7434\u524d\u3002\u4ed6</p> <p>\u9009\u9879 - \u4ed6\u6b63\u5728\u7528\u624b\u548c\u8138\u5f39\u94a2\u7434\u3002 - \u6bd4\u91d1\u65af\u7528\u94a2\u7434\u6f14\u594f\u8482\u5df4\u5170\u7684\u4e00\u9996\u6b4c\u3002 - \u6162\u6162\u5730\u6f14\u594f\uff0c\u7136\u540e\u505c\u4e0b\u6765\u5f39\u624b\u6307\u3002 - \u6b63\u5728\u4ed6\u9762\u524d\u6f14\u594f\u4e00\u9996\u6b4c\u3002</p> <p>\u886830|HellaSwag\u793a\u4f8b\u3002</p> <p>\u63d0\u793a</p> <p>def starts_one_ends\uff08n\uff09\uff1a \"\"\" \u7ed9\u5b9a\u4e00\u4e2a\u6b63\u6574\u6570n\uff0c\u8fd4\u56de\u4ee51\u5f00\u5934\u6216\u7ed3\u5c3e\u7684n\u4f4d\u6b63\u6574\u6570\u7684\u6570\u91cf\u3002 \"\"\"</p> <p>\u886831|HumanEval\u793a\u4f8b\u3002</p> <p>\u63d0\u793a \u95ee\u9898\uff1a \u627e\u5230\u8868\u8fbe\u5f0f\\(\\frac{\\sqrt{x-2}{\\sqrt{5-x}}\\)\u7684\u57df\u3002}</p> <p>\u89e3\u51b3\u65b9\u6848\uff1a \u6bcf\u4e2a\u5e73\u65b9\u6839\u5185\u7684\u8868\u8fbe\u5f0f\u5fc5\u987b\u4e3a\u975e\u8d1f\u6570\u3002\u56e0\u6b64\uff0c\\(x-2\\ge 0\\)\uff0c\u5373\\(x\\ge2\\)\uff0c\u4ee5\u53ca\\(5-x\\ge 0\u7f8e\u5143\uff0c\u5373\\)x \\le 5\\(\u3002 \u6b64\u5916\uff0c\u5206\u6bcd\u4e0d\u80fd\u7b49\u4e8e\u96f6\uff0c\u56e0\u6b64\\)5-x&gt;0\\(\uff0c\u5373\\)x&lt;5\\(\u3002\u56e0\u6b64\uff0c\u8868\u8fbe\u5f0f\u7684\u57df\u662f\\)\\boxed{[2,5\uff09}\\(\u3002 \u6700\u7ec8\u7b54\u6848\uff1a\u6700\u7ec8\u7b54\u6848\u662f\\)[2,5\uff09$\u3002\u6211\u5e0c\u671b\u5b83\u662f\u6b63\u786e\u7684\u3002</p> <p>\u95ee\u9898\uff1a \u5982\u679c\\(\\det\\mathbf{A}=2\\)\u548c\\(\\det\\mathbf{B}=12\uff0c\u5219\\)\u627e\u5230\\(\\det\uff08\\mathbf{1}\\mathbf{0}\uff09\\)</p> <p>\u89e3\u51b3\u65b9\u6848\uff1a \u6211\u4eec\u6709\\(\\det\uff08\\mathbf{A}\\mathbf{1B}\uff09=\uff08\\det\\mathbf[A}\uff09\uff08\\det \\mathbf{B}\uff09=\uff082\uff09\uff0812\uff09=\\boxed{24}\\) \u6700\u7ec8\u7b54\u6848\uff1a\u6700\u7ec8\u7b54\u6848\u662f24\u7f8e\u5143\u3002\u6211\u5e0c\u671b\u8fd9\u662f\u6b63\u786e\u7684\u3002</p> <p>\u95ee\u9898\uff1a \u7279\u96f7\u5c14\u901a\u5e38\u4f1a\u4e3e\u8d77\u4e24\u4e2a20\u78c5\u91cd\u7684\u91cd\u726912\u6b21\u3002\u5982\u679c\u4ed6\u4f7f\u7528\u4e24\u4e2a15\u78c5\u7684\u781d\u7801\uff0cTerrell\u5fc5\u987b\u4e3e\u8d77\u591a\u5c11\u6b21\u624d\u80fd\u4e3e\u8d77\u76f8\u540c\u7684\u603b\u91cd\u91cf\uff1f</p> <p>\u89e3\u51b3\u65b9\u6848\uff1a \u5982\u679cTerrell\u4e3e\u8d77\u4e24\u4e2a20\u78c5\u7684\u91cd\u726912\u6b21\uff0c\u4ed6\u603b\u5171\u4e3e\u8d77\u4e862\u7f8e\u5143\u7684\u91cd\u91cf\u3002\u5982\u679c\u4ed6\u4ee5n\\(\u6b21\u4e3e\u8d77\u4e24\u4e2a15\u78c5\u7684\u91cd\u7269\uff0c\u4ed6\u5c06\u603b\u5171\u4e3e\u8d772\\cdot15\\cdotn=30n\\)\u78c5\u7684\u91cd\u7269\u3002\u5c06\u5176\u7b49\u4e8e480\u78c5\uff0c\u6211\u4eec\u53ef\u4ee5\u6c42\u89e3\\(n\\)\uff1a\\begin{align}30n&amp;=480\\ \\\u53f3\u7bad\u5934n&amp;=480/30=\\boxed{16} \\\u7ed3\u675f{align} \u6700\u7ec8\u7b54\u6848\uff1a\u6700\u7ec8\u7b54\u6848\u662f16\u7f8e\u5143\u3002\u6211\u5e0c\u671b\u8fd9\u662f\u6b63\u786e\u7684\u3002</p> <p>\u95ee\u9898\uff1a \u5982\u679c\u65b9\u7a0b\u7ec4</p> <p>\\\u5f00\u59cb{align}6x-4y&amp;=a\uff0c\\6y-9x&amp;=b\u3002 \\end{align}\u6709\u4e00\u4e2a\u89e3\\(\uff08x\uff0cy\uff09\\)\uff0c\u5176\u4e2d\\(x\\)\u548c\\(y\\)\u90fd\u662f\u975e\u96f6\u7684\uff0c\u627e\u5230\\(\\frac{a}{b}\uff0c\\)\uff0c\u5047\u8bbe\\(b\\)\u662f\u975e\u96f6\u3002</p> <p>\u89e3\u51b3\u65b9\u6848\uff1a \u5982\u679c\u6211\u4eec\u5c06\u7b2c\u4e00\u4e2a\u65b9\u7a0b\u4e58\u4ee5\\(-\\frac{3}{2}\\)\uff0c\u6211\u4eec\u5f97\u5230</p> <p>6\u7f8e\u5143-9x=-\\frac{3}{2}a.$\\(\u65e2\u7136\u6211\u4eec\u4e5f\u77e5\u90536y-9x=b\\)\uff0c\u6211\u4eec\u6709</p> <p>\\(\\(-\\frac\uff5b3\uff5d{2}a=b\\Rightarrow \\frac{a}{b}=\\boxed{-\\frac\uff5b2\uff5d\uff5b3\uff5d}\u3002\\)\\)\u6700\u7ec8\u7b54\u6848\uff1a\u6700\u7ec8\u7b54\u6848\u662f\\(-\\frac{2}{3}\\)\u3002\u6211\u5e0c\u671b\u8fd9\u662f\u6b63\u786e\u7684\u3002 \u95ee\u9898\uff1a\u8ba1\u7b97\\(\\log_21\\)\u3002\u89e3\u51b3\u65b9\u6848\uff1a</p> <p>\u886832 |\u6570\u5b66\u793a\u4f8b\u3002</p> <p>\u63d0\u793a \u4f60\u662f\u4e00\u540dPython\u7a0b\u5e8f\u5458\uff0c\u4f60\u7684\u4efb\u52a1\u662f\uff1a\u7f16\u5199\u4e00\u4e2a\u51fd\u6570\uff0c\u4ece\u7ed9\u5b9a\u7684\u4e24\u4e2a\u5143\u7ec4\u5217\u8868\u4e2d\u67e5\u627e\u76f8\u4f3c\u7684\u5143\u7d20\u3002\u4f60\u7684\u4ee3\u7801\u5e94\u8be5\u901a\u8fc7\u8fd9\u4e9b\u6d4b\u8bd5\uff1a</p> <p>\u65ad\u8a00\u76f8\u4f3c\u5143\u7d20\uff08\uff083,4,5,6\uff09\uff0c\uff085,7,4,10\uff09==\uff084,5\uff09 \u65ad\u8a00\u76f8\u4f3c\u5143\u7d20\uff08\uff081,2,3,4\uff09\uff0c\uff085,4,3,7\uff09==\uff083,4\uff09 \u65ad\u8a00\u76f8\u4f3c\u5143\u7d20\uff08\uff0811\uff0c12\uff0c14\uff0c13\uff09\uff0c\uff0817\uff0c15\uff0c14\uff0c3\uff09==\uff0813\uff0c14\uff09[BEGIN] \u5b9a\u4e49\u7c7b\u4f3c\u5143\u7d20\uff08test_tup1\u3001test_tup2\uff09\uff1a res=\u5143\u7ec4\uff08set\uff08test_tup1\uff09&amp;set\uff08test_tup 2\uff09\uff09\u8fd4\u56de\u503c\uff08res\uff09 [\u5b8c\u6210] \u4f60\u662f\u4e00\u540dPython\u7a0b\u5e8f\u5458\uff0c\u4f60\u7684\u4efb\u52a1\u662f\uff1a\u7f16\u5199\u4e00\u4e2aPython\u51fd\u6570\u6765\u8bc6\u522b\u975e\u7d20\u6570\u3002\u4f60\u7684\u4ee3\u7801\u5e94\u8be5\u901a\u8fc7\u8fd9\u4e9b\u6d4b\u8bd5\uff1a</p> <p>\u65ad\u8a00is_not_pime\uff082\uff09==\u5047\u65ad\u8a00is_nut_pime\uff0810\uff09==\u771f\u65ad\u8a00is_not _pime\uff0835\uff09==True[BEGIN] \u5bfc\u5165\u6570\u5b66 def is_not_pime\uff08n\uff09\uff1a \u7ed3\u679c=\u5047 \u5bf9\u4e8e\u8303\u56f4\uff082\uff0cint\uff08math.sqrt\uff08n\uff09\uff09+1\uff09\u4e2d\u7684i\uff1a \u5982\u679cn%i==0\uff1a result=\u8fd4\u56de\u771f\u7ed3\u679c[DONE] \u4f60\u662f\u4e00\u540dPython\u7a0b\u5e8f\u5458\uff0c\u4f60\u7684\u4efb\u52a1\u662f\uff1a\u7f16\u5199\u4e00\u4e2a\u51fd\u6570\uff0c\u4f7f\u7528\u5806\u961f\u5217\u7b97\u6cd5\u4ece\u7ed9\u5b9a\u7684\u6570\u5b57\u5217\u8868\u4e2d\u67e5\u627e\u6700\u5927\u7684\u6574\u6570\u3002\u4f60\u7684\u4ee3\u7801\u5e94\u8be5\u901a\u8fc7\u8fd9\u4e9b\u6d4b\u8bd5\uff1a</p> <p>\u65ad\u8a00heap_queue_largest\uff08[25,35,22,85,14,65,75,22,58]\uff0c3\uff09==[85,75,65] \u65ad\u8a00heap_queue_largest\uff08[25,35,22,85,14,65,75,22,58]\uff0c2\uff09==[85,75] \u65ad\u8a00heap_queue_largest\uff08[25,35,22,85,14,65,75,22,58]\uff0c5\uff09==[85,75,65,58\uff0c 35][\u5f00\u59cb] \u5c06heapq\u5bfc\u5165\u4e3ahq def heap_queue_largest\uff08num\uff0cn\uff09\uff1a largest_num=hq.nlargest\uff08n\uff0cnums\uff09\u8fd4\u56delargest_nums [\u5b8c\u6210] \u4f60\u662f\u4e00\u540dPython\u7a0b\u5e8f\u5458\uff0c\u4f60\u7684\u4efb\u52a1\u662f\uff1a\u7f16\u5199\u4e00\u4e2a\u51fd\u6570\u6765\u8fd4\u56de\u4e00\u4e2a\u6570\u5b57\u7684\u6240\u6709\u9664\u6570\u4e4b\u548c\u3002\u4f60\u7684\u4ee3\u7801\u5e94\u8be5\u901a\u8fc7\u8fd9\u4e9b\u6d4b\u8bd5\uff1a</p> <p>assert sum_div\uff088\uff09==7 assert sum-div\uff0812\uff09==16 assert sum_iv\uff087\uff09==1[BEGIN]</p> <p>\u886833|MBPP\u793a\u4f8b\u3002</p> <p>\u63d0\u793a \u4ee5\u4e0b\u662f\u5173\u4e8e\u6742\u9879\u7684\u591a\u9879\u9009\u62e9\u9898\uff08\u9644\u7b54\u6848\uff09\u00ac\u3002</p> <p>\u4e00\u8f86\u6807\u51c6\u6c7d\u8f66\u6709\u591a\u5c11\u4e2a\u8f66\u8f74\uff1f 1 \u4e00 2 \u4e8c 3 \u56db 4 8\u7b54\u6848\uff1aB</p> <p>\u6447\u6eda\u4f20\u5947\u4eba\u7269Cheap Trick 1979\u5e74\u73b0\u573a\u4e13\u8f91\u7684\u6807\u9898\u4e2d\u63d0\u5230\u4e86\u54ea\u4e2a\u5730\u65b9\uff1f 1 \u5e03\u8fbe\u4f69\u65af 2 \u65e5\u672c\u6b66\u9053\u9986 3 \u4e0d\u4e39 4 \u82f1\u56fd\u7b54\u6848\uff1aB</p> <p>\u8c01\u662fNBA\u704c\u7bee\u6bd4\u8d5b\u4e2d\u6700\u77ee\u7684\u4eba\uff1f 1 \u5b89\u4e1c\u5c3c\u00b7\u97e6\u4f2f 2 \u8fc8\u514b\u5c14\u00b7\u4e54\u4e39 3 \u6cf0\u9686\u201cMuggsy\u201d\u6cbc\u6cfd 4 \u6731\u5229\u53f6\u65af\u00b7\u6b27\u6587\u535a\u58eb\u56de\u7b54\uff1aA</p> <p>\u5149\u5408\u4f5c\u7528\u4ea7\u751f\u4ec0\u4e48\uff1f 1 \u6c22 2 \u5c3c\u9f99 3 \u6c27\u6c14 4 \u7b54\u6848\uff1aC</p> <p>\u8fd9\u4e9b\u6b4c\u66f2\u4e2d\uff0c\u54ea\u9996\u662f\u6447\u6eda\u4e50\u961f\u201c\u8b66\u5bdf\u201d\u7684\u5341\u5927\u70ed\u95e8\u6b4c\u66f2\uff1f 1 \u201c\u560e\u560e\u7535\u53f0\u201d 2 \u201cOb la di Ob la da\u201d 3 \u201cDe Do Do De Da Da\u201d 4 \u201cIn a Gadda-Da Vida\u201d\u7b54\u6848\uff1aC</p> <p>\u4e09\u4e2a\u5080\u5121\u4e2d\uff0c\u54ea\u4e00\u4e2a\u4e0e\u5176\u4ed6\u4eba\u6ca1\u6709\u5173\u7cfb\uff1f 1 \u83ab 2 \u62c9\u91cc 3 \u5377\u66f2\u7684 4 Shemp\u56de\u7b54\uff1a</p> <p>\u9009\u9879 - A. - B - C - D</p> <p>\u886834|MMLU\u793a\u4f8b\u3002</p> <p>\u63d0\u793a \u8bf7\u56de\u7b54\u4ee5\u4e0b\u95ee\u9898\uff1a Q\uff1a 2022\u5e74\u56fd\u9645\u8db3\u8054\u4e16\u754c\u676f\u7531\u8c01\u4e3b\u529e\uff1fA\uff1a \u5361\u5854\u5c14 Q\uff1a \u8c01\u8d62\u5f97\u4e86\u7b2c\u4e00\u5c4a\u5973\u5b50\u56fd\u9645\u8db3\u8054\u4e16\u754c\u676f\uff1fA\uff1a \u7f8e\u56fd Q\uff1a \u300a\u8fc8\u963f\u5bc6\u98ce\u4e91\u300b\u4ec0\u4e48\u65f6\u5019\u505c\u64ad\u7684\uff1fA\uff1a 1989\u5e74 Q\uff1a \u8c01\u5199\u4e86\u8fd9\u9996\u5411\u4e0a\u5e1d\u547c\u558a\u7684\u6b4c\uff1fA\uff1a Darlene Zschech Q\uff1a \u8c01\u88ab\u6254\u8fdb\u4e86\u72ee\u5b50\u7a9d\uff1fA\uff1a \u4e39\u5c3c\u5c14 Q\uff1a habib\u8fd9\u4e2a\u540d\u5b57\u662f\u4ec0\u4e48\u610f\u601d\uff1fA.</p> <p>\u886835|\u81ea\u7136\u95ee\u9898\u793a\u4f8b\u3002</p> <p>\u63d0\u793a \u6bcf\u5e74\u79cb\u5929\uff0c\u4e00\u4f4d\u5973\u58eb\u90fd\u4f1a\u6ce8\u610f\u5230\u81ea\u5df1\u5f88\u6cae\u4e27\uff0c\u5e76\u60f3\u77e5\u9053\u4e3a\u4ec0\u4e48\u3002\u4e00\u4f4d\u670b\u53cb\u5efa\u8bae\u5979\uff0c\u4e5f\u8bb8\u968f\u7740\u5b63\u8282\u4ece\u6e29\u6696\u53d8\u4e3a\u5bd2\u51b7\u800c\u53d1\u751f\u7684\u67d0\u4e9b\u53d8\u5316\u53ef\u80fd\u4f1a\u5bf9\u5979\u4ea7\u751f\u5f71\u54cd\u3002\u5f53\u88ab\u95ee\u53ca\u8fd9\u4e9b\u53d8\u5316\u7684\u4f8b\u5b50\u65f6\uff0c\u8fd9\u4f4d\u670b\u53cb\u5f15\u7528\u4e86 \u9009\u9879 - \u9c9c\u82b1\u76db\u5f00 - \u8349\u53d8\u9ec4\u4e86 - \u6811\u6728\u751f\u957f - \u82b1\u6735\u76db\u5f00 \u886836|OpenBookQA\u793a\u4f8b\u3002</p> <p>\u63d0\u793a \u4e3a\u4e86\u66f4\u5bb9\u6613\u6309\u4e0b\u4f4d\u4e8e\u673a\u5668\u4e0b\u65b9\u7684\u5783\u573e\u4e00\u6b21\u6027\u673a\u5668\u7684\u91cd\u7f6e\u6309\u94ae\uff0c \u9009\u9879 - \u5728\u6a71\u67dc\u7684\u5730\u677f\u4e0a\u653e\u4e00\u9762\u5899\u955c - \u5728\u5783\u573e\u5904\u7406\u673a\u4e0b\u62ff\u4e00\u4e2a\u624b\u955c \u886837|PIQA\u793a\u4f8b\u3002</p> <p>\u63d0\u793a \u6587\u7ae0\uff1a \u5f53\u4f60\u9605\u8bfb\u4e00\u7bc7\u6587\u7ae0\u65f6\uff0c\u5982\u679c\u4f60\u80fd\u5f04\u6e05\u695a\u4f5c\u8005\u662f\u5982\u4f55\u628a\u60f3\u6cd5\u653e\u5728\u4e00\u8d77\u7684\uff0c\u4f60\u4f1a\u66f4\u597d\u5730\u7406\u89e3\u548c\u8bb0\u4f4f\u5b83\u3002\u6709\u65f6\uff0c\u4f5c\u5bb6\u901a\u8fc7\u63d0\u51fa\u95ee\u9898\u7136\u540e\u56de\u7b54\u95ee\u9898\u6765\u628a\u60f3\u6cd5\u653e\u5728\u4e00\u8d77\u3002\u4f8b\u5982\uff0c\u5982\u679c\u8fd9\u7bc7\u6587\u7ae0\u662f\u5173\u4e8e\u571f\u62e8\u9f20\u7684\uff0c\u90a3\u4e48\u4f5c\u8005\u8111\u6d77\u4e2d\u7684\u95ee\u9898\u53ef\u80fd\u662f\uff1a \u571f\u62e8\u9f20\u957f\u4ec0\u4e48\u6837\uff1f\u571f\u62e8\u9f20\u4f4f\u5728\u54ea\u91cc\uff1f \u4ed6\u4eec\u5403\u4ec0\u4e48\uff1f\u3002\u3002\u3002 \u5728\u6587\u7ae0\u4e2d\uff0c\u4f5c\u8005\u53ef\u80fd\u4f1a\u56de\u7b54\u8fd9\u4e9b\u95ee\u9898\u3002 \u6709\u65f6\u4f5c\u8005\u4f1a\u5728\u6587\u7ae0\u4e2d\u5199\u4e0b\u5979\u7684\u95ee\u9898\u3002\u8fd9\u4e9b\u95ee\u9898\u7ed9\u4e86\u4f60\u4fe1\u53f7\u3002\u4ed6\u4eec\u544a\u8bc9\u4f60\u4f5c\u8005\u63a5\u4e0b\u6765\u8981\u5199\u4ec0\u4e48\u3002\u901a\u5e38\uff0c\u4e00\u4f4d\u4f5c\u8005\u8111\u5b50\u91cc\u4f1a\u6709\u4e00\u4e2a\u95ee\u9898\uff0c\u4f46\u5979\u4e0d\u4f1a\u4e3a\u4f60\u5199\u51fa\u6765\u3002\u4f60\u5fc5\u987b\u81ea\u5df1\u89e3\u51b3\u5979\u7684\u95ee\u9898\u3002\u8fd9\u91cc\u6709\u4e00\u4e2a\u793a\u4f8b\u9605\u8bfb\uff0c\u4f9b\u60a8\u7ec3\u4e60\u8fd9\u79cd\u65b9\u6cd5\u3002 \u86af\u8693 \u4f60\u77e5\u9053\u86af\u8693\u6709\u591a\u5c11\u79cd\u5417\uff1f\u4e16\u754c\u4e0a\u5927\u7ea6\u67091800\u79cd\uff01\u5b83\u4eec\u53ef\u4ee5\u662f\u68d5\u8272\u3001\u7d2b\u8272\u3001\u7eff\u8272\u3002\u5b83\u4eec\u53ef\u4ee5\u5c0f\u81f33\u5398\u7c73\u957f\uff0c\u5927\u81f33\u7c73\u957f\u3002 \u89c2\u8d4f\u86af\u8693\u7684\u6700\u4f73\u65f6\u95f4\u662f\u665a\u4e0a\uff0c\u5c24\u5176\u662f\u51c9\u723d\u6f6e\u6e7f\u7684\u591c\u665a\u3002\u90a3\u662f\u5b83\u4eec\u4ece\u6d1e\u7a74\u91cc\u51fa\u6765\u89c5\u98df\u7684\u65f6\u5019\u3002\u86af\u8693\u4e0d\u559c\u6b22\u5728\u9633\u5149\u4e0b\u3002\u8fd9\u662f\u56e0\u4e3a\u5b83\u4eec\u901a\u8fc7\u76ae\u80a4\u547c\u5438\uff0c\u5982\u679c\u76ae\u80a4\u592a\u5e72\u71e5\uff0c\u5b83\u4eec\u5c31\u65e0\u6cd5\u547c\u5438\u3002\u5982\u679c\u7ecf\u5e38\u4e0b\u96e8\uff0c\u86af\u8693\u5fc5\u987b\u4ece\u5730\u91cc\u51fa\u6765\uff0c\u56e0\u4e3a\u5b83\u4eec\u5728\u88ab\u6df9\u7684\u6d1e\u7a74\u91cc\u65e0\u6cd5\u547c\u5438\u3002\u591a\u4e48\u5371\u9669\u7684\u751f\u6d3b\u554a\uff01 \u86af\u8693\u6ca1\u6709\u773c\u775b\uff0c\u6240\u4ee5\u5b83\u4eec\u600e\u4e48\u77e5\u9053\u4ec0\u4e48\u65f6\u5019\u5929\u9ed1\u4e86\uff1f\u5b83\u4eec\u7684\u76ae\u80a4\u4e0a\u6709\u5bf9\u5149\u7ebf\u654f\u611f\u7684\u7279\u6b8a\u90e8\u4f4d\u3002\u8fd9\u4e9b\u6591\u70b9\u53ef\u4ee5\u5206\u8fa8\u51fa\u662f\u4eae\u662f\u6697\u3002\u5982\u679c\u4f60\u5728\u665a\u4e0a\u7528\u624b\u7535\u7b52\u7167\u86af\u8693\uff0c\u5b83\u4f1a\u5f88\u5feb\u6d88\u5931\u5728\u5730\u91cc\u3002 \u86af\u8693\u4e5f\u6ca1\u6709\u8033\u6735\uff0c\u4f46\u5b83\u4eec\u53ef\u4ee5\u901a\u8fc7\u611f\u89c9\u5730\u7403\u4e0a\u7684\u8fd0\u52a8\u6765\u542c\u5230\u58f0\u97f3\u3002\u5982\u679c\u4f60\u60f3\u50cf\u86af\u8693\u4e00\u6837\u542c\uff0c\u8eba\u5728\u5730\u4e0a\uff0c\u624b\u6307\u653e\u5728\u8033\u6735\u91cc\u3002\u7136\u540e\u8ba9\u4e00\u4e2a\u670b\u53cb\u5728\u4f60\u8eab\u8fb9\u8dfa\u811a\u3002\u86af\u8693\u5c31\u662f\u8fd9\u6837\u611f\u89c9\u7684\u2014\u2014\u9e1f\u548c\u4eba\u5728\u5b83\u4eec\u9644\u8fd1\u884c\u8d70\uff0c\u9f39\u9f20\u5728\u5b83\u4eec\u9644\u8fd1\u6316\u6d1e\u3002 \u86af\u8693\u662f\u6709\u7528\u7684\u3002\u519c\u6c11\u548c\u56ed\u4e01\u559c\u6b22\u5728\u4ed6\u4eec\u7684\u571f\u5730\u4e0a\u6709\u5f88\u591a\u86af\u8693\uff0c\u56e0\u4e3a\u86af\u8693\u5728\u6316\u6398\u65f6\u6709\u52a9\u4e8e\u5f62\u6210\u66f4\u597d\u7684\u571f\u58e4\u3002\u6316\u6398\u4f7f\u571f\u58e4\u4fdd\u6301\u677e\u8f6f\u548c\u901a\u98ce\u3002\u4e00\u5e74\u5185\uff0c\u86af\u8693\u53ef\u4ee5\u5728\u4e00\u4e2a\u8db3\u7403\u573a\u5927\u5c0f\u7684\u533a\u57df\u5806\u79ef\u591a\u8fbe23000\u516c\u65a4\u7684\u94f8\u4ef6\u3002 Q\uff1a \u9605\u8bfb\u300a\u86af\u8693\u300b\u7684\u76ee\u7684\u662f\u4ec0\u4e48\uff1fA\uff1a \u628a\u4f5c\u8005\u7684\u60f3\u6cd5\u4ed8\u8bf8\u5b9e\u8df5\u3002 Q\uff1a \u6587\u7ae0\u4e2d\u54ea\u4e9b\u95ee\u9898\u65e0\u6cd5\u56de\u7b54\uff1fA\uff1a \u4e3a\u4ec0\u4e48\u4eba\u7c7b\u80fd\u50cf\u86af\u8693\u4e00\u6837\u542c\uff1f Q\uff1a \u6839\u636e\u8fd9\u7bc7\u6587\u7ae0\uff0c\u4f60\u5982\u4f55\u66f4\u597d\u5730\u7406\u89e3\u86af\u8693\uff1fA\uff1a \u9605\u8bfb\u65f6\uff0c\u9605\u8bfb\u4ee5\u89e3\u51b3\u4f5c\u8005\u5934\u8111\u4e2d\u7684\u6240\u6709\u95ee\u9898\u3002Q\uff1a \u8fd9\u7bc7\u6587\u7ae0\u7684\u6700\u4f73\u6807\u9898\u662f\u4ec0\u4e48\uff1f A. \u9009\u9879 - \u4e00\u79cd\u5e2e\u52a9\u7406\u89e3\u7684\u65b9\u6cd5 - \u4e00\u79cd\u5b9e\u8df5\u65b0\u60f3\u6cd5\u7684\u65b9\u6cd5 - \u5b66\u4e60\u6210\u4e3a\u4e00\u540d\u660e\u667a\u4f5c\u5bb6\u7684\u4e00\u79cd\u65b9\u6cd5 - \u4e00\u79cd\u66f4\u6e05\u695a\u8815\u866b\u7684\u65b9\u6cd5 \u886838|RACE\u793a\u4f8b\u3002</p> <p>\u63d0\u793a \u8bf7\u56de\u7b54\u4ee5\u4e0b\u95ee\u9898\uff1a Q\uff1a Jayhawker\u662f\u6307\u6765\u81ea\u7f8e\u56fd\u67d0\u4e2a\u5dde\u7684\u53cd\u5974\u96b6\u5236\u6fc0\u8fdb\u7ec4\u7ec7\uff0c\u4e0e\u5bc6\u82cf\u91cc\u5dde\u7684\u652f\u6301\u5974\u96b6\u5236\u6d3e\u7cfb\u53d1\u751f\u51b2\u7a81\u3002\u8fd9\u662f\u54ea\u4e2a\u5dde\uff0c\u6709\u65f6\u88ab\u79f0\u4e3aJayhawk\u5dde\uff1f A\uff1a \u582a\u8428\u65af\u3002 Q\uff1a \u54ea\u4f4d\u745e\u5178DJ\u548c\u5531\u7247\u5236\u4f5c\u4eba\u57282013\u5e74\u51ed\u501f\u300aWake Me Up\u300b\u83b7\u5f97\u4e86\u82f1\u56fd\u51a0\u519b\u5355\u66f2\uff1f A\uff1a \u8482\u59c6\u00b7\u4f2f\u683c\u6797 Q\uff1a \u8c22\u83f2\u5c14\u5fb7\u54c8\u52d2\u59c6\u7684\u8bae\u5458\u662f\u8c01\uff1fA\uff1a \u5c3c\u514b\u00b7\u514b\u83b1\u683c Q\uff1a 1925\u5e747\u670821\u65e5\uff0c\u7530\u7eb3\u897f\u5dde\u8bc9\u7ea6\u7ff0\u00b7\u6258\u9a6c\u65af\u00b7\u65af\u79d1\u666e\u65af\u6848\uff08the State of Tennessee v.John Thomas Scopes\uff09\u5728\u5168\u56fd\u8303\u56f4\u5185\u5f15\u8d77\u4e86\u8f70\u52a8\uff0c\u966a\u5ba1\u56e2\u88c1\u5b9a\u65af\u79d1\u666e\u65af\u5148\u751f\u72af\u6709\u6559\u5b66\u7f6a\uff1f A\uff1a \u7269\u79cd\u7684\u751f\u5b58 Q\uff1a \u54ea\u4e2a\u5361\u901a\u7cfb\u5217\u4ee5\u4e00\u4e2a\u53eb\u201c\u5c0f\u6211\u201d\u7684\u89d2\u8272\u4e3a\u7279\u8272\uff1fA\uff1a Muumi Q\uff1a 1966\u5e74\uff0cNigel Davies\u53d1\u73b0\u4e86\u4e00\u4f4d\u82f1\u56fd\u6a21\u7279\uff0c\u5979\u7559\u7740\u77ed\u53d1\uff0c\u96cc\u96c4\u540c\u4f53\uff0c\u540d\u53ebLesley Hornby\uff0c\u5f53\u65f6\u597916\u5c81\uff0c\u4f53\u91cd6\u82f1\u77f3\uff0841\u516c\u65a4\uff0c91\u78c5\uff09\uff0c\u5e76\u51ed\u501fMary Quant\u521b\u9020\u7684\u9ad8\u7ea7\u65f6\u5c1a\u73b0\u4ee3\u9020\u578b\u6210\u4e3a\u4e86\u201c66\u5e74\u7684\u8138\u201d A.</p> <p>\u886839 | TriviaQA\u793a\u4f8b\u3002</p> <p>\u524d\u7f00 - \u6240\u4ee5\u83ab\u59ae\u5361 - \u6240\u4ee5\u6770\u897f\u5361 \u5b8c\u6210 \u4e3a\u4e86\u773c\u775b\u5065\u5eb7\u907f\u514d\u5403\u80e1\u841d\u535c\uff0c\u56e0\u4e3a\u827e\u7c73\u4e3d\u9700\u8981\u826f\u597d\u7684\u89c6\u529b\uff0c\u800c\u83ab\u59ae\u5361\u4e0d\u9700\u8981\u3002 \u886840|WinoGrande\u793a\u4f8b\u3002\u8bf7\u6ce8\u610f\uff0cWinoGrande\u6709\u591a\u4e2a\u524d\u7f00\uff0c\u53ea\u6709\u4e00\u4e2a\u8865\u5168\uff0c\u6211\u4eec\u9009\u62e9\u8865\u5168\u56f0\u60d1\u5ea6\u6700\u4f4e\u7684\u9884\u6d4b\u524d\u7f00\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/llama/LLaMA_Open_and_Efficient_Foundation_Language_Models/","title":"LLaMA: Open and Efficient Foundation Language Models","text":"<p>Hugo Touvron, Thibaut Lavril, Gautier Izacard, Xavier Martinet, Marie-Anne Lachaux, Timoth\u00e9e Lacroix, Baptiste Rozi\u00e8re, Naman Goyal, Eric Hambro, Faisal Azhar, Aurelien Rodriguez, Armand Joulin, Edouard Grave, Guillaume Lample\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/llama/LLaMA_Open_and_Efficient_Foundation_Language_Models/#_1","title":"\u6458\u8981","text":"<p>\u672c\u6587\u4ecb\u7ecd LLaMA\uff0c\u4e00\u4e2a\u5305\u542b 7B ~ 65B\uff0870~650 \u4ebf\uff09\u53c2\u6570\u7684\u57fa\u7840\u8bed\u8a00\u6a21\u578b\u96c6\u5408\uff08a collection of foundation language models\uff09\u3002\u6211\u4eec\u7528\u6570\u4e07\u4ebf\u4e2a\uff08trillions of\uff09token \u8bad\u7ec3\u8fd9\u4e9b\u6a21\u578b\uff0c\u8bc1\u660e\u4e86\u4f7f\u7528\u5f00\u6e90\u6570\u636e\u96c6\u5c31\u80fd\u8bad\u7ec3\u51fa\u6700\u5148\u8fdb\u7684\u6a21\u578b\uff0c\u800c\u5e76\u975e\u5fc5\u987b\u4f7f\u7528\u4e13\u6709\u548c\u79c1\u6709\u6570\u636e\u96c6\u3002\u7279\u522b\u662f\uff0cLLaMA-13B \u5728\u5927\u591a\u6570\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u4f18\u4e8e GPT-3\uff08175B\uff09\uff0c\u800c LLaMA-65B \u5219\u4e0e\u6700\u4f73\u6a21\u578b Chinchilla-70B \u548c PaLM-540B \u76f8\u5f53\u3002\u6211\u4eec\u5df2\u7ecf\u5c06\u6240\u6709\u6a21\u578b\u5f00\u6e90\uff0c\u4f9b\u793e\u533a\u7814\u7a76\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/llama/LLaMA_Open_and_Efficient_Foundation_Language_Models/#1","title":"1 \u5f15\u8a00","text":"<p>\u5728\u5927\u89c4\u6a21\u6587\u672c\u8bed\u6599\u5e93\uff08massive corpora of texts\uff09\u4e0a\u8bad\u7ec3\u7684\u5927\u578b\u8bed\u8a00\u6a21\u578b \uff08Large Languages Models, LLM\uff09\uff0c\u5df2\u7ecf\u6709\u80fd\u529b\u6839\u636e\u7ed9\u5b9a\u7684\u6587\u672c\u6307\u4ee4\uff08textual instructions\uff09 \u6216\u793a\u4f8b\uff08a few examples\uff09\u6267\u884c\u65b0\u4efb\u52a1\uff08Brown \u7b49\uff0c2020\uff09\u3002</p> <p>\u8fd9\u4e9b few-shot \u5c5e\u6027\u9996\u5148\u51fa\u73b0\u5728\u5c06\u6a21\u578b\u6269\u5c55\u5230\u8db3\u591f\u5927\u7684\u89c4\u6a21\u65f6\uff08Kaplan \u7b49\uff0c2020\uff09\uff0c\u5728\u6b64\u4e4b\u540e\uff0c\u51fa\u73b0\u4e86\u5f88\u591a\u8fdb\u4e00\u6b65\u6269\u5c55\u8fd9\u4e9b\u6a21\u578b\u7684\u5de5\u4f5c\uff08Chowdhery \u7b49\uff0c2022\uff1bRae \u7b49\uff0c2021\uff09\uff0c\u5b83\u4eec\u90fd\u9075\u5faa\u4e86\u8fd9\u6837\u4e00\u4e2a\u5047\u8bbe\uff1a\u66f4\u591a\u7684\u53c2\u6570\u5c06\u4ea7\u751f\u66f4\u597d\u7684\u6027\u80fd\u3002\u7136\u800c\uff0cHoffmann \u7b49\uff082022\uff09\u7684\u6700\u65b0\u5de5\u4f5c\u8868\u660e\uff0c\u5bf9\u4e8e\u7ed9\u5b9a\u7684\u8ba1\u7b97\u9884\u7b97\uff08compute budget\uff09\uff0c\u6700\u4f73\u6027\u80fd\u5e76\u975e\u6765\u81ea\u90a3\u4e9b\u6700\u5927\u7684\u6a21\u578b\uff0c\u800c\u662f\u6765\u81ea\u90a3\u4e9b\u5728\u66f4\u591a\u6570\u636e\u4e0a\u8bad\u7ec3\u51fa\u6765\u7684\u8f83\u5c0f\u6a21\u578b\u3002</p> <p>\u201cfew-shot\u201d \u6307\u4e00\u4e2a\u6a21\u578b\u6709\u80fd\u529b\u6839\u636e\u7ed9\u5b9a\u7684\u5c11\u91cf\u793a\u4f8b\u53bb\u6267\u884c\u5176\u4ed6\u7684\u7c7b\u4f3c\u4efb\u52a1\u7684\u80fd\u529b\u3002\u8bd1\u6ce8\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/llama/LLaMA_Open_and_Efficient_Foundation_Language_Models/#11-vs","title":"1.1 \u5927\u6a21\u578b\u8bad\u7ec3\uff1a\u66f4\u591a\u53c2\u6570 vs \u66f4\u5927\u7684\u6570\u636e\u96c6","text":"<p>Hoffmann \u7b49\uff082022\uff09\u63d0\u51fa\u7684 scaling laws\uff0c\u76ee\u6807\u662f\u9488\u5bf9\u7ed9\u5b9a\u7684\u8bad\u7ec3\uff08training\uff09\u8ba1\u7b97\u9884\u7b97\uff08compute budget\uff09\uff0c\u5982\u4f55\u6700\u597d\u5730\u6269\u5c55\uff08scale\uff09\u6570\u636e\u96c6\u548c\u6a21\u578b\u5927\u5c0f\u3002\u4f46\u662f\uff0c</p> <ul> <li>\u8fd9\u4e2a\u6a21\u578b\u6ca1\u6709\u8003\u8651\u63a8\u7406\uff08inference\uff09\u9884\u7b97\uff0c\u5728\u63d0\u4f9b\u5927\u89c4\u6a21\u6a21\u578b\u63a8\u7406\u670d\u52a1\u65f6\uff0c\u8fd9\u4e00\u70b9\u5c24\u5176\u91cd\u8981\uff1a\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u7ed9\u5b9a\u4e00\u4e2a\u6027\u80fd\u76ee\u6807\uff0c\u6211\u4eec\u66f4\u60f3\u8981\u7684\u662f\u4e00\u4e2a\u63a8\u7406\u901f\u5ea6\u6700\u5feb\u800c\u975e\u8bad\u7ec3\u901f\u5ea6\u6700\u5feb\u7684\u6a21\u578b\u3002</li> <li>\u5bf9\u4e8e\u4e00\u4e2a\u7ed9\u5b9a\u7684\u6027\u80fd\u8981\u6c42\uff0c\u8bad\u7ec3\u4e00\u4e2a\u5927\u6a21\u578b\uff08a large model\uff09\u53ef\u80fd\u662f\u4e00\u79cd\u66f4\u4fbf\u5b9c\u7684\u65b9\u5f0f\uff1b\u4f46\u5bf9\u4e8e\u6700\u7ec8\u7684\u63a8\u7406\u6765\u8bf4\uff0c\u8f83\u5c0f\u7684\u6a21\u578b+\u66f4\u957f\u7684\u8bad\u7ec3\u65f6\u95f4\uff08a smaller one trained longer\uff09\u53cd\u800c\u66f4\u5b9e\u60e0\u3002\u4f8b\u5982\uff0cHoffmann \u7b49\uff082022\uff09\u5efa\u8bae\u7528 200B tokens \u6765\u8bad\u7ec3 10B \u6a21\u578b\uff0c\u4f46\u6211\u4eec\u53d1\u73b0\u5373\u4f7f\u5728 1T \u4e2a token \u4e4b\u540e\uff0c7B \u6a21\u578b\u7684\u6027\u80fd\u4ecd\u5728\u968f\u7740 token \u7684\u589e\u591a\u800c\u63d0\u9ad8\u3002</li> </ul>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/llama/LLaMA_Open_and_Efficient_Foundation_Language_Models/#12-llama","title":"1.2 LLaMA\uff1a\u51cf\u5c11\u53c2\u6570\uff0c\u589e\u5927\u6570\u636e\u96c6","text":"<p>\u672c\u6587\u7684\u91cd\u70b9\u662f\uff1a\u5bf9\u4e8e\u7ed9\u5b9a\u7684\u4e0d\u540c\u63a8\u7406\u9884\u7b97\uff08inference budgets\uff09\uff0c\u901a\u8fc7\u4f7f\u7528\u66f4\u591a token \u8fdb\u884c\u8bad\u7ec3\u7684\u65b9\u5f0f\uff08\u8d85\u8fc7\u4e1a\u5185\u5e38\u7528\u7684 token \u89c4\u6a21\uff09\u6765\u83b7\u5f97\u6700\u4f73\u7684\u6027\u80fd\uff08the best possible performance\uff09\u3002\u7531\u6b64\u5f97\u5230\u7684\u6a21\u578b\u6211\u4eec\u79f0\u4e3a LLaMA\u3002LLaMA \u7684\u53c2\u6570\u8303\u56f4\u5728 7B ~ 65B\uff0c\u6027\u80fd\u5219\u4e0e\u76ee\u524d\u4e1a\u754c\u6700\u4f73\u7684\u4e00\u4e9b\u5927\u8bed\u8a00\u6a21\u578b\u76f8\u5f53\u3002 \u4f8b\u5982\uff0c</p> <ul> <li>LLaMA-13B \u5728\u5927\u591a\u6570\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u4f18\u4e8e GPT-3\uff0c\u5c3d\u7ba1\u53c2\u6570\u8fde\u540e\u8005\u7684 10% \u90fd\u4e0d\u5230\uff1b</li> <li>LLaMA \u53ef\u4ee5\u5728\u5355\u4e2a GPU \u4e0a\u8fd0\u884c\uff0c\u56e0\u6b64\u4f7f\u5927\u6a21\u578b\u7684\u83b7\u53d6\u548c\u7814\u7a76\u66f4\u5bb9\u6613\uff0c\u800c\u4e0d\u518d\u53ea\u662f\u5c11\u6570\u51e0\u4e2a\u5927\u5382\u7684\u4e13\u5229\uff1b</li> <li>\u5728\u9ad8\u7aef\u7cfb\u5217\u4e0a\uff0cLLaMA-65B \u4e5f\u4e0e\u6700\u4f73\u7684\u5927\u8bed\u8a00\u6a21\u578b\uff08\u5982 Chinchilla \u6216 PaLM-540B\uff09\u6027\u80fd\u76f8\u5f53\u3002</li> </ul> <p>\u4e0e Chinchilla\u3001PaLM\u3001GPT-3 \u4e0d\u540c\uff0c\u6211\u4eec\u53ea\u4f7f\u7528\u516c\u5f00\u7684\u6570\u636e\uff08publicly available data\uff09\uff0c\u56e0\u6b64\u6211\u4eec\u7684\u5de5\u4f5c\u662f\u5f00\u6e90\u517c\u5bb9\u7684\uff1b</p> <ul> <li>\u76f8\u6bd4\u4e4b\u4e0b\uff0c\u5927\u591a\u6570\u73b0\u6709\u6a21\u578b\u4f9d\u8d56\u4e8e\u4e0d\u516c\u5f00\u6216\u6ca1\u6709\u6587\u6863\u7684\u6570\u636e\uff08not publicly available or undocumented\uff09\uff0c\u4f8b\u5982 \u201cBooks\u20132TB\u201d \u548c \u201cSocial media conversations\u201d\uff1b</li> <li>\u4e5f\u5b58\u5728\u4e00\u4e9b\u4f8b\u5916\uff0c\u4f8b\u5982 OPT\uff08Zhang \u7b49\uff0c2022\uff09\u3001GPT-NeoX\uff08Black \u7b49\uff0c2022\uff09\u3001BLOOM\uff08Scao \u7b49\uff0c2022\uff09\u548c GLM\uff08Zeng \u7b49\uff0c2022\uff09\uff0c\u4f46\u5b83\u4eec\u7684\u6027\u80fd\u90fd\u65e0\u6cd5\u4e0e PaLM-62B \u6216 Chinchilla \u76f8\u6bd4\u3002</li> </ul>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/llama/LLaMA_Open_and_Efficient_Foundation_Language_Models/#13","title":"1.3 \u5185\u5bb9\u7ec4\u7ec7","text":"<p>\u672c\u6587\u63a5\u4e0b\u6765\u7684\u5185\u5bb9\u7ec4\u7ec7\u5982\u4e0b\uff1a</p> <ul> <li>\u63cf\u8ff0\u6211\u4eec\u5bf9 Transformer \u67b6\u6784\uff08Vaswani \u7b49\uff0c2017\uff09\u6240\u505a\u7684\u6539\u52a8\uff0c\u4ee5\u53ca\u6211\u4eec\u7684\u8bad\u7ec3\u65b9\u6cd5\uff1b</li> <li>\u7ed9\u51fa LLaMA \u7684\u6027\u80fd\uff0c\u57fa\u4e8e\u6807\u51c6\u57fa\u51c6\u6d4b\u8bd5\u4e0e\u5176\u4ed6 LLM \u8fdb\u884c\u6bd4\u8f83\uff1b</li> <li>\u4f7f\u7528 responsible AI \u793e\u533a\u7684\u6700\u65b0\u57fa\u51c6\u6d4b\u8bd5\uff0c\u63ed\u793a LLaMA \u6a21\u578b\u4e2d\u5b58\u5728\u7684\u4e00\u4e9b\u504f\u89c1\u548c\u6bd2\u6027\uff08biases and toxicity\uff09\u3002</li> </ul>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/llama/LLaMA_Open_and_Efficient_Foundation_Language_Models/#2-approach","title":"2 \u65b9\u6cd5\uff08Approach\uff09","text":"<p>\u6211\u4eec\u7684\u8bad\u7ec3\u65b9\u6cd5\u4e0e\u524d\u4eba\u7684\u4e00\u4e9b\u5de5\u4f5c\uff08Brown \u7b49\uff0c2020\uff1bChowdhery \u7b49\uff0c2022\uff09\u7c7b\u4f3c\uff0c\u5e76\u53d7\u5230 Chinchilla scaling laws\uff08Hoffmann \u7b49\uff0c2022\uff09\u7684\u542f\u53d1\u3002\u6211\u4eec\u4f7f\u7528\u4e00\u4e2a\u6807\u51c6\u7684 optimizer \u5728\u5927\u91cf\u6587\u672c\u6570\u636e\u4e0a\u8bad\u7ec3\u5927\u578b Transformers\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/llama/LLaMA_Open_and_Efficient_Foundation_Language_Models/#21-pre-training-data","title":"2.1 \u9884\u8bad\u7ec3\u6570\u636e\uff08Pre-training Data\uff09","text":"<p>\u8bad\u7ec3\u6570\u636e\u96c6\u6709\u51e0\u79cd\u4e0d\u540c\u6765\u6e90\uff0c\u6db5\u76d6\u4e86\u591a\u4e2a\u9886\u57df\uff0c\u5982\u8868 1 \u6240\u793a\u3002</p> <p></p> <p>\u8fd9\u91cc\u7684\u6570\u636e\u96c6\u5927\u90e8\u5206\u90fd\u662f\u5176\u4ed6 LLM \u8bad\u7ec3\u7528\u8fc7\u7684\uff0c\u4f46\u6211\u4eec\u53ea\u7528\u5176\u4e2d\u516c\u5f00\u53ef\u5f97\uff08publicly available\uff09\u7684\u90e8\u5206\uff0c\u5e76\u4e14\u8981\u4fdd\u6301\u5f00\u6e90\u517c\u5bb9\uff08compatible with open sourcing\uff09\u3002\u56e0\u6b64\u6700\u540e\u5f97\u5230\u7684\u5c31\u662f\u4e00\u4e2a\u6df7\u5408\u6570\u636e\u96c6\u3002</p> <ul> <li>English CommonCrawl [67%]\uff1a\u6211\u4eec\u4f7f\u7528 CCNet pipeline\uff08Wenzek \u7b49\uff0c2020\uff09\u5bf9 2017~2020 \u7684\u4e94\u4e2a CommonCrawl dumps \u8fdb\u884c\u9884\u5904\u7406\u3002</li> <li>\u5728\u884c\u7ea7\u522b\uff08line level\uff09\u4e0a\u5bf9\u6570\u636e\u8fdb\u884c\u53bb\u91cd\uff1b</li> <li>\u4f7f\u7528 fastText \u7ebf\u6027\u5206\u7c7b\u5668\u8fdb\u884c\u8bed\u8a00\u8bc6\u522b\uff0c\u53bb\u6389\u975e\u82f1\u6587\u7f51\u9875\uff1b</li> <li>\u4f7f\u7528 n-gram \u8bed\u8a00\u6a21\u578b\u8fc7\u6ee4\u6389\u4e00\u4e9b\u4f4e\u8d28\u91cf\u5185\u5bb9\uff1b</li> <li>\u6b64\u5916\uff0c\u6211\u4eec\u8fd8\u8bad\u7ec3\u4e86\u4e00\u4e2a\u7ebf\u6027\u6a21\u578b\uff0c\u5c06\u9875\u9762\u5206\u4e3a\u4e24\u7c7b\uff1a</li> <li>\u88ab Wikipedia \u5f15\u7528\u8fc7\u7684\u7f51\u9875\uff1b</li> <li>\u6ca1\u6709\u88ab Wikipedia \u5f15\u7528\u8fc7\u7684\uff08\u968f\u673a\u91c7\u6837\u7f51\u9875\uff09\uff1b </li> <li> <p>\u5e76\u5c06\u7b2c\u4e8c\u7c7b\u4e22\u5f03\u3002</p> </li> <li> <p>C4 [15%]\uff1a\u5728\u524d\u671f\u63a2\u7d22\u6027\u5b9e\u9a8c\u4e2d\uff0c\u6211\u4eec\u89c2\u5bdf\u5230\u4f7f\u7528\u591a\u6837\u5316\u7684\u9884\u5904\u7406 CommonCrawl \u6570\u636e\u96c6\u53ef\u4ee5\u63d0\u9ad8\u6027\u80fd\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u5c06\u516c\u5f00\u53ef\u7528\u7684 C4 \u6570\u636e\u96c6\uff08Raffel \u7b49\uff0c2020\uff09\u4e5f\u5305\u542b\u5230\u4e86\u8bad\u7ec3\u6570\u636e\u4e2d\u3002\u5bf9 C4 \u7684\u9884\u5904\u7406\u4e5f\u662f\u53bb\u91cd\u548c\u8bed\u79cd\u8bc6\u522b\uff1a\u4e0e CCNet \u7684\u4e3b\u8981\u533a\u522b\u5728\u4e8e\u8d28\u91cf\u8fc7\u6ee4\uff08quality filtering\uff09\uff0c \u4e3b\u8981\u4f9d\u8d56\u4e8e\u542f\u53d1\u5f0f\u65b9\u6cd5\uff08heuristics\uff09\uff0c\u4f8b\u5982\u662f\u5426\u5b58\u5728\u6807\u70b9\u7b26\u53f7\u6216\u7f51\u9875\u4e2d\u5355\u8bcd\u548c\u53e5\u5b50\u7684\u6570\u91cf\u3002</p> </li> <li> <p>Github [4.5%]\uff1a\u4f7f\u7528\u4e86 Google BigQuery \u4e0a\u516c\u5f00\u53ef\u7528\u7684 GitHub \u6570\u636e\u96c6\uff0c\u4f46\u4ec5\u4fdd\u7559\u5176\u4e2d\u7528 Apache\u3001BSD \u548c MIT license \u7684\u9879\u76ee\u3002\u6b64\u5916\uff0c</p> </li> <li>\u57fa\u4e8e\u884c\u957f\u5ea6\uff08line length\uff09\uff0c\u5b57\u6bcd\u6216\u6570\u5b57\u5b57\u7b26\uff08alphanumeric characters\uff09\u6bd4\u4f8b\u7b49\uff0c\u7528\u542f\u53d1\u5f0f\u65b9\u6cd5\u8fc7\u6ee4\u6389\u4f4e\u8d28\u91cf\u6587\u4ef6\uff1b</li> <li>\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u5220\u9664\u4e00\u4e9b\u6a21\u677f\u6bb5\u843d\uff08boilerplate\uff09\uff0c\u4f8b\u5982 headers\uff1b</li> <li> <p>\u5728\u6587\u4ef6\u7ea7\u522b\u4e0a\u4f7f\u7528\u7cbe\u786e\u5339\u914d\u5bf9\u5f97\u5230\u7684\u6570\u636e\u96c6\u8fdb\u884c\u53bb\u91cd\u3002</p> </li> <li> <p>Wikipedia [4.5%] \u4f7f\u7528\u4e86 2022 \u5e74 6 \u6708\u81f3 8 \u6708\u7684\u4e00\u90e8\u5206 Wikipedia dumps\uff0c \u8986\u76d6 20 \u79cd\u8bed\u8a00\uff08use either the Latin or Cyrillic scripts\uff09\uff1abg\u3001ca\u3001cs\u3001da\u3001de\u3001en\u3001es\u3001fr\u3001hr\u3001hu\u3001it\u3001nl\u3001pl\u3001pt\u3001ro\u3001ru\u3001sl\u3001sr\u3001sv\u3001uk\u3002\u5220\u6389\u4e86\u5176\u4e2d\u7684\u8d85\u94fe\u63a5\u3001\u6ce8\u91ca\u548c\u5176\u4ed6 formatting boilerplate\u3002</p> </li> <li> <p>Gutenberg and Books3 [4.5%]\uff1a \u8bad\u7ec3\u6570\u636e\u96c6\u4e2d\u5305\u542b\u4e24\u4e2a\u4e66\u7c4d\u8bed\u6599\u5e93\uff1a</p> <ul> <li>Gutenberg Project\uff1a\u516c\u7248\u4e66\uff08public domain books\uff09\uff1b</li> <li>Books3 section of ThePile\uff08Gao \u7b49\uff0c2020\uff09\uff1a\u4e00\u4e2a\u7528\u4e8e\u8bad\u7ec3\u5927\u8bed\u8a00\u6a21\u578b\u7684\u516c\u5f00\u53ef\u7528\u6570\u636e\u96c6\u3002\u5728\u4e66\u7ea7\u522b\uff08book level\uff09\u53bb\u91cd\uff0c\u5185\u5bb9\u8d85\u8fc7 90% \u91cd\u590d\u7684\u4e66\u4f1a\u88ab\u5254\u9664\u51fa\u53bb\u3002</li> </ul> </li> <li> <p>ArXiv [2.5%] \u4e3a\u4e86\u8ba9\u8bad\u7ec3\u6570\u636e\u96c6\u5305\u542b\u4e00\u5b9a\u7684\u79d1\u5b66\u6570\u636e\uff08scientific data\uff09\uff0c\u6211\u4eec\u5bf9\u4e00\u4e9b arXiv Latex \u6587\u4ef6\u505a\u5904\u7406\u4e4b\u540e\u52a0\u5230\u8bad\u7ec3\u6570\u636e\u96c6\u3002</p> </li> <li>\u6309\u7167 Lewkowycz \u7b49\uff082022\uff09\u7684\u65b9\u6cd5\uff0c\u5220\u9664\u4e86 the first section \u4e4b\u524d\u7684\u6240\u6709\u5185\u5bb9\u4ee5\u53ca\u53c2\u8003\u6587\u732e\uff1b</li> <li>\u4ece .tex \u6587\u4ef6\u4e2d\u5220\u9664\u4e86\u6ce8\u91ca\uff1b</li> <li> <p>\u5bf9\u4f5c\u8005\u7f16\u5199\u7684\u5b9a\u4e49\u548c\u5b8f\uff08definitions and macros written by users\uff09\u505a\u4e86\u5185\u8054\u5c55\u5f00\uff08inline-expand\uff09\uff0c\u4f7f\u5f97\u8bba\u6587\u66f4\u52a0\u4e00\u81f4\uff08increase consistency across papers\uff09\u3002</p> </li> <li> <p>Stack Exchange [2%] Stack Exchange \u662f\u4e00\u4e2a\u9ad8\u8d28\u91cf\u7684\u95ee\u7b54\u7f51\u7ad9\uff0c\u6db5\u76d6\u4e86\u4ece\u8ba1\u7b97\u673a\u79d1\u5b66\u5230\u5316\u5b66\u7b49\u5404\u79cd\u9886\u57df\u3002 \u6211\u4eec\u7684\u8bad\u7ec3\u6570\u636e\u96c6\u5305\u62ec\u4e86\u4e00\u4e2a Stack Exchange dump\uff0c\u4fdd\u7559\u5176\u4e2d\u6700\u5927\u7684 28 \u4e2a\u7f51\u7ad9\u7684\u6570\u636e\uff0c\u4ece\u6587\u672c\u4e2d\u5220\u9664\u4e86 HTML tags \uff0c\u6309\u5206\u6570\uff08\u4ece\u9ad8\u5230\u4f4e\uff09\u5bf9\u7b54\u6848\u8fdb\u884c\u4e86\u6392\u5e8f\u3002</p> </li> <li> <p>Tokenizer\uff08\u5206\u8bcd\u5668\uff09 \u6211\u4eec\u4f7f\u7528 bytepair encoding\uff08BPE\uff09\u7b97\u6cd5\uff08Sennrich \u7b49\uff0c2015\uff09\u5bf9\u6570\u636e\u8fdb\u884c tokenization\uff0c\u7b97\u6cd5\u5b9e\u73b0\u91c7\u7528\u7684\u662f Sentence-Piece\uff08Kudo \u548c Richardson\uff0c2018\uff09\u3002\u9700\u8981 \u8bf4\u660e\u7684\u662f\uff0c\u4e3a\u4e86 decompose unknown UTF-8 characters\uff0c\u6211\u4eec\u5c06\u6240\u6709 numbers \u62c6\u5206\u4e3a\u5355\u4e2a digits\uff0c\u518d fallback \u5230 bytes\u3002</p> </li> </ul> <p>\u6700\u7ec8\uff0c\u6211\u4eec\u7684\u6574\u4e2a\u8bad\u7ec3\u6570\u636e\u96c6\u5728 tokenization \u540e\u5305\u542b\u5927\u7ea6 1.4T \u4e2a token\u3002 * \u5bf9\u4e8e\u5927\u591a\u6570\u8bad\u7ec3\u6570\u636e\uff0c\u6bcf\u4e2a token \u5728\u8bad\u7ec3\u671f\u95f4\u4ec5\u4f7f\u7528\u4e00\u6b21\uff1b * \u7ef4\u57fa\u767e\u79d1\u548c\u4e66\u7c4d\u662f\u4e2a\u4f8b\u5916\uff0c\u4f1a\u88ab\u4f7f\u7528\u4e24\u6b21\uff08two epochs\uff09\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/llama/LLaMA_Open_and_Efficient_Foundation_Language_Models/#22-architecture","title":"2.2 \u67b6\u6784\uff08Architecture\uff09","text":"<p>\u4e0e\u6700\u8fd1\u5927\u8bed\u8a00\u6a21\u578b\u7684\u7814\u7a76\u8d8b\u52bf\u4e00\u81f4\uff0c\u6211\u4eec\u7684\u7f51\u7edc\u4e5f\u57fa\u4e8e Transformer \u67b6\u6784\uff08Vaswani \u7b49\uff0c2017\uff09\u3002\u4f46\u505a\u4e86\u5f88\u591a\u6539\u8fdb\uff0c\u4e5f\u501f\u9274\u4e86\u5176\u4ed6\u6a21\u578b\uff08\u4f8b\u5982 PaLM\uff09\u4e2d\u7684\u4e00\u4e9b\u6280\u5de7\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/llama/LLaMA_Open_and_Efficient_Foundation_Language_Models/#221","title":"2.2.1 \u6539\u8fdb","text":"<p>\u4ee5\u4e0b\u662f\u4e0e\u539f\u59cb\u67b6\u6784\u7684\u4e3b\u8981\u5dee\u5f02\uff1a</p> <ul> <li> <p>\u9884\u5f52\u4e00\u5316\uff08Pre-normalization\uff09\uff1a\u53d7 GPT3 \u542f\u53d1 \u4e3a\u4e86\u63d0\u9ad8\u8bad\u7ec3\u7a33\u5b9a\u6027\uff0c\u6211\u4eec\u5bf9\u6bcf\u4e2a Transformer sub-layer \u7684\u8f93\u5165\u8fdb\u884c\u5f52\u4e00\u5316\uff0c\u800c\u4e0d\u662f\u5bf9\u8f93\u51fa\u8fdb\u884c\u5f52\u4e00\u5316\u3002 \u8fd9\u91cc\u4f7f\u7528\u7531 Zhang \u548c Sennrich\uff082019\uff09\u63d0\u51fa\u7684 RMSNorm \u5f52\u4e00\u5316\u51fd\u6570\u3002</p> </li> <li> <p>SwiGLU \u6fc0\u6d3b\u51fd\u6570\uff1a\u53d7 PaLM \u542f\u53d1\u7528 SwiGLU \u6fc0\u6d3b\u51fd\u6570\u66ff\u6362 ReLU \u975e\u7ebf\u6027\uff0c\u8be5\u51fd\u6570\u7531 Shazeer\uff082020\uff09\u63d0\u51fa\uff0c\u76ee\u7684\u662f\u63d0\u5347\u6027\u80fd\u3002 \u4f46\u6211\u4eec\u4f7f\u7528\u7684\u7ef4\u5ea6\u662f 2/3 * 4d\uff0c\u800c\u4e0d\u662f PaLM \u4e2d\u7684 4d\u3002</p> </li> <li> <p>\u65cb\u8f6c\u5d4c\u5165\uff08Rotary Embeddings\uff09\uff1a\u53d7 GPTNeo \u542f\u53d1\u53bb\u6389\u4e86\u7edd\u5bf9\u4f4d\u7f6e\u5d4c\u5165\uff08absolute positional embeddings\uff09\uff0c\u5e76\u5728\u6bcf\u4e2a\u7f51\u7edc\u5c42\u4e2d\u6dfb\u52a0\u65cb\u8f6c\u4f4d\u7f6e\u5d4c\u5165\uff08rotary positional embeddings\uff0cRoPE\uff09\u3002 RoPE \u7531 Su \u7b49\uff082021\uff09\u63d0\u51fa\u3002</p> </li> </ul>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/llama/LLaMA_Open_and_Efficient_Foundation_Language_Models/#222-llama","title":"2.2.2 \u4e0d\u540c LLaMA \u6a21\u578b\u7684\u8d85\u53c2\u6570","text":"<p>\u4e0d\u540c\u6a21\u578b\u7684\u8d85\u53c2\u6570\u8be6\u7ec6\u4fe1\u606f\u89c1\u8868 2\u3002 </p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/llama/LLaMA_Open_and_Efficient_Foundation_Language_Models/#23-optimizer","title":"2.3 \u4f18\u5316\u5668\uff08Optimizer\uff09","text":"<ul> <li>\u4f7f\u7528 AdamW \u4f18\u5316\u5668\uff08Loshchilov \u548c Hutter\uff0c2017\uff09\u5bf9\u6a21\u578b\u8fdb\u884c\u8bad\u7ec3\uff0c\u5177\u4f53\u8d85\u53c2\u6570\uff1a\\(\\beta_1=0.9, \\beta_2 = 0.95\\)\uff1b</li> <li>\u4f7f\u7528\u4e00\u4e2a cosine learning rate schedule\uff0c\u6700\u7ec8\u7684\u5b66\u4e60\u7387\u8fbe\u5230\u4e86\u6700\u5927\u5b66\u4e60\u7387\u7684 10\uff05\uff1b</li> <li>\u4f7f\u7528 0.1 \u7684\u6743\u91cd\u8870\u51cf\uff08weight decay\uff09\u548c 1.0 \u7684\u68af\u5ea6\u88c1\u526a\uff08gradient clipping\uff09\uff1b</li> <li>\u4f7f\u7528 2,000 \u4e2a warmup steps\uff0c\u5e76\u6839\u636e\u6a21\u578b\u5927\u5c0f\u6765\u8c03\u6574 learning rate \u548c batch size\u3002</li> </ul>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/llama/LLaMA_Open_and_Efficient_Foundation_Language_Models/#24-efficient-implementation","title":"2.4 \u9ad8\u6548\u5b9e\u73b0\uff08Efficient implementation\uff09\uff1a\u63d0\u9ad8\u8bad\u7ec3\u901f\u5ea6","text":"<p>\u6211\u4eec\u8fdb\u884c\u4e86\u51e0\u9879\u4f18\u5316\u6765\u63d0\u9ad8\u6a21\u578b\u7684\u8bad\u7ec3\u901f\u5ea6\u3002</p> <p>\u9996\u5148\uff0c\u6211\u4eec\u4f7f\u7528 causal multi-head attention \u7684\u4e00\u4e2a\u9ad8\u6548\u5b9e\u73b0\u6765\u51cf\u5c11\u5185\u5b58\u5360\u7528\u548c\u8fd0\u884c\u65f6\u3002\u8fd9\u79cd\u5b9e\u73b0\u662f\u53d7 Rabe \u548c Staats\uff082021\uff09\u7684\u542f\u53d1\uff0c\u5e76\u4f7f\u7528 Dao \u7b49\uff082022\uff09\u7684\u53cd\u5411\u4f20\u64ad\uff0c\u73b0\u5728 xformers \u5e93\u4e2d\u5df2\u7ecf\u63d0\u4f9b\u4e86\u3002\u4f18\u5316\u539f\u7406\uff1a\u7531\u4e8e\u8bed\u8a00\u5efa\u6a21\u4efb\u52a1\u5b58\u5728\u56e0\u679c\u7279\u6027\uff0c\u56e0\u6b64\u53ef\u4ee5\u4e0d\u5b58\u50a8\u6ce8\u610f\u529b\u6743\u91cd\uff08attention weights\uff09\uff0c\u4e0d\u8ba1\u7b97\u90a3\u4e9b\u5df2\u7ecf\u88ab\u63a9\u7801\uff08masked\uff09\u7684 key/query scores\u3002</p> <p>\u4e3a\u8fdb\u4e00\u6b65\u63d0\u9ad8\u8bad\u7ec3\u6548\u7387\uff0c\u6211\u4eec\u901a\u8fc7 checkpoint \u6280\u672f\uff0c \u51cf\u5c11\u4e86\u5728\u53cd\u5411\u4f20\u64ad\u671f\u95f4\u9700\u8981\u91cd\u65b0\u8ba1\u7b97\u7684\u6fc0\u6d3b\u6570\u91cf\u3002\u66f4\u5177\u4f53\u5730\u8bf4\uff0c</p> <ul> <li>\u6211\u4eec\u4fdd\u5b58\u4e86\u8ba1\u7b97\u6210\u672c\u9ad8\u6602\u7684\u6fc0\u6d3b\uff0c\u4f8b\u5982\u7ebf\u6027\u5c42\u7684\u8f93\u51fa\u3002\u5b9e\u73b0\u65b9\u5f0f\u662f\u624b\u52a8\u5b9e\u73b0 Transformer \u5c42\u7684\u53cd\u5411\u51fd\u6570\uff0c\u800c\u4e0d\u7528 PyTorch autograd\u3002</li> <li>\u5982 Korthikanti \u7b49\uff082022\uff09\u4e2d\u63d0\u5230\u7684\uff0c \u4e3a\u4e86\u5145\u5206\u53d7\u76ca\u4e8e\u8fd9\u79cd\u4f18\u5316\uff0c\u6211\u4eec\u9700\u8981\u901a\u8fc7\u6a21\u578b\u548c\u5e8f\u5217\u5e76\u884c\uff08model and sequence parallelism\uff09\u6765\u51cf\u5c11\u6a21\u578b\u7684\u5185\u5b58\u4f7f\u7528\u3002</li> <li>\u6b64\u5916\uff0c\u6211\u4eec\u8fd8\u5c3d\u53ef\u80fd\u5730 overlap \u6fc0\u6d3b\u8ba1\u7b97\u548c GPU \u4e4b\u95f4\u7684\u7f51\u7edc\u901a\u4fe1\uff08\u7531\u4e8e all_reduce \u64cd\u4f5c\uff09\u3002</li> </ul> <p>\u8bad\u7ec3 65B \u53c2\u6570\u7684\u6a21\u578b\u65f6\uff0c\u6211\u4eec\u7684\u4ee3\u7801\u5728 2048 \u4e2a A100 80GB GPU \u4e0a\u80fd\u5904\u7406\u7ea6 380 tokens/second/GPU\u3002\u8fd9\u610f\u5473\u7740 1.4T token \u7684\u6570\u636e\u96c6\u4e0a\u8bad\u7ec3\u5927\u7ea6\u9700\u8981 21 \u5929\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/llama/LLaMA_Open_and_Efficient_Foundation_Language_Models/#3-main-results","title":"3 \u4e3b\u8981\u7ed3\u679c\uff08Main results\uff09","text":"<p>\u53c2\u8003\u524d\u4eba\u5de5\u4f5c\uff08Brown \u7b49\uff0c2020\uff09\uff0c\u6211\u4eec\u6d4b\u8bd5\u4e86\u96f6\u6837\u672c\uff08zero-shot\uff09\u548c\u5c11\u6837\u672c\uff08few-shot\uff09\u4e24\u79cd\u4efb\u52a1\uff0c \u8fdb\u884c\u603b\u5171 20 \u4e2a\u57fa\u51c6\u6d4b\u8bd5\uff1a</p> <ul> <li>\u96f6\u6837\u672c\uff1a\u63d0\u4f9b\u4efb\u52a1\u7684\u6587\u672c\u63cf\u8ff0\u548c\u4e00\u4e2a\u6d4b\u8bd5\u793a\u4f8b\u3002\u6a21\u578b\u53ef\u4ee5\u4f7f\u7528\u5f00\u653e\u5f0f\u751f\u6210\uff08open-ended generation\uff09\u63d0\u4f9b\u7b54\u6848\uff0c\u6216\u5bf9\u63d0\u8bae\u7684\u7b54\u6848\u8fdb\u884c\u6392\u540d\uff08ranks the proposed answers\uff09\u3002</li> <li>\u5c11\u6837\u672c\uff1a\u63d0\u4f9b\u4e00\u4e9b\uff081~64 \u4e2a\uff09\u4efb\u52a1\u793a\u4f8b\u548c\u4e00\u4e2a\u6d4b\u8bd5\u793a\u4f8b\u3002\u6a21\u578b\u5c06\u6b64\u6587\u672c\u4f5c\u4e3a\u8f93\u5165\u5e76\u751f\u6210\u7b54\u6848\uff0c\u6216\u5bf9\u4e0d\u540c\u9009\u9879\u8fdb\u884c\u6392\u540d\uff08ranks different options\uff09\u3002</li> </ul> <p>\u6211\u4eec\u5c06 LLaMA \u4e0e\u5176\u4ed6\u57fa\u7840\u6a21\u578b\u8fdb\u884c\u6bd4\u8f83\uff0c\u5305\u62ec</p> <ul> <li>\u672a\u5f00\u6e90\u6a21\u578b\uff08non-publicly available\uff09\uff1aGPT-3\uff08Brown \u7b49\uff0c2020\uff09\u3001Gopher\uff08Rae \u7b49\uff0c2021\uff09\u3001Chinchilla\uff08Hoffmann \u7b49\uff0c2022\uff09\u548c PaLM\uff08Chowdhery \u7b49\uff0c2022\uff09\uff0c</li> <li>\u5f00\u6e90\u6a21\u578b\uff1aOPT \u6a21\u578b\uff08Zhang \u7b49\uff0c2022\uff09\u3001GPT-J\uff08Wang \u548c Komatsuzaki\uff0c2021\uff09\u548c GPTNeo\uff08Black \u7b49\uff0c2022\uff09\u3002</li> <li>\u5728\u7b2c 4 \u8282\u4e2d\uff0c\u6211\u4eec\u8fd8\u5c06\u7b80\u8981\u6bd4\u8f83 LLaMA \u4e0e instruction-tuned \u6a21\u578b\uff0c\u5982 OPT-IML\uff08Iyer \u7b49\uff0c2022\uff09\u548c Flan-PaLM\uff08Chung \u7b49\uff0c2022\uff09\u3002</li> </ul> <p>\u6211\u4eec\u5728\u81ea\u7531\u5f62\u5f0f\u751f\u6210\u4efb\u52a1\uff08free-form generation\uff09\u548c\u591a\u9879\u9009\u62e9\uff08multiple choice\uff09\u4efb\u52a1\u4e0a\u8bc4\u4f30 LLaMA\u3002 \u591a\u9879\u9009\u62e9\u4efb\u52a1\u7684\u76ee\u6807\u662f\u5728\u63d0\u4f9b\u7684\u4e0a\u4e0b\u6587\u57fa\u7840\u4e0a\uff0c\u4ece\u4e00\u7ec4\u7ed9\u5b9a\u9009\u9879\u4e2d\u9009\u62e9\u6700\u5408\u9002\u7684\u3002\u6211\u4eec\u4f7f\u7528\u7684\u6700\u5408\u9002\u6807\u51c6\u5c31\u662f\u53ef\u6027\u80fd\u6700\u9ad8\uff08highest likelihood\uff09\u3002</p> <ul> <li>\u5bf9\u4e8e\u5927\u90e8\u5206\u6570\u636e\u96c6\uff0c\u6211\u4eec\u9075\u5faa Gao \u7b49\uff082021\uff09\u7684\u65b9\u6cd5\uff0c\u4f7f\u7528\u7531\u5b8c\u6210\u5b57\u7b26\u6570\u5f52\u4e00\u5316\u7684\u53ef\u80fd\u6027\uff08likelihood normalized by the number of characters\uff09\uff0c</li> <li>\u5bf9\u4e8e\u5c11\u91cf\u6570\u636e\u96c6\uff08OpenBookQA\uff0cBoolQ\uff09\uff0c\u6211\u4eec\u9075\u5faa Brown \u7b49\uff082020\uff09\u7684\u65b9\u6cd5\uff0c\u6839\u636e\u5728\u201cAnswer:\u201d\u4e0a\u4e0b\u6587\u4e2d\u7ed9\u5b9a\u7684\u5b8c\u6210\u53ef\u80fd\u6027\uff08likelihood of the completion given \u201cAnswer:\u201d as context\uff09\uff0c\u7528\u516c\u5f0f\u8868\u793a\u5c31\u662f P(completion|context) / P(completion|\"Answer:\").</li> </ul>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/llama/LLaMA_Open_and_Efficient_Foundation_Language_Models/#31-common-sense-reasoning","title":"3.1 \u5e38\u8bc6\u63a8\u7406\uff08Common Sense Reasoning\uff09","text":"<p>\u4f7f\u7528\u4e0b\u9762\u516b\u4e2a\u6807\u51c6\u7684\u5e38\u8bc6\u63a8\u7406\u57fa\u51c6\u6d4b\u8bd5\uff1a</p> <ol> <li>BoolQ\uff08Clark \u7b49\uff0c2019\uff09</li> <li>PIQA\uff08Bisk \u7b49\uff0c2020\uff09</li> <li>SIQA\uff08Sap \u7b49\uff0c2019\uff09</li> <li>HellaSwag\uff08Zellers \u7b49\uff0c2019\uff09</li> <li>WinoGrande\uff08Sakaguchi \u7b49\uff0c2021\uff09</li> <li>OpenBookQA\uff08Mihaylov \u7b49\uff0c2018\uff09</li> <li>&amp; 8. ARC easy \u548c challenge\uff08Clark \u7b49\uff0c2018\uff09</li> </ol> <p>\u8fd9\u4e9b\u6570\u636e\u96c6\u5305\u62ec Cloze \u548c Winograd \u98ce\u683c\u7684\u4efb\u52a1\uff0c\u4ee5\u53ca\u591a\u9879\u9009\u62e9\u9898\u3002 \u4e0e\u8bed\u8a00\u5efa\u6a21\u793e\u533a\u7c7b\u4f3c\uff0c\u6211\u4eec\u4f7f\u7528\u96f6\u6837\u672c\u8bbe\u7f6e\u8fdb\u884c\u8bc4\u4f30\u3002 \u5728\u8868 3 \u4e2d\uff0c\u6211\u4eec\u4e0e\u5404\u79cd\u89c4\u6a21\u7684\u73b0\u6709\u6a21\u578b\u8fdb\u884c\u6bd4\u8f83\u3002 </p> <p>\u51e0\u70b9\u8bf4\u660e\uff1a</p> <p>\u9664\u4e86 BoolQ\uff0cLLaMA-65B \u5728\u5176\u4ed6\u6240\u6709\u57fa\u51c6\u6d4b\u8bd5\u90fd\u4f18\u4e8e Chinchilla-70B\u3002 \u540c\u6837\uff0c\u8be5\u6a21\u578b\u5728\u9664\u4e86 BoolQ \u548c WinoGrande \u4e4b\u5916\u7684\u6240\u6709\u5730\u65b9\u90fd\u8d85\u8fc7\u4e86 PaLM-540B\u3002 LLaMA-13B \u6a21\u578b\u5c3d\u7ba1\u6bd4 GPT-3 \u5c0f 90\uff05 \u591a\uff0c\u4f46\u5728\u5927\u591a\u6570\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u8868\u73b0\u6bd4 GPT-3 \u8fd8\u597d\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/llama/LLaMA_Open_and_Efficient_Foundation_Language_Models/#32-closed-book-question-answering","title":"3.2 \u95ed\u5377\u95ee\u7b54\uff08Closed-book Question Answering\uff09","text":"<p>\u6211\u4eec\u5c06 LLaMA \u4e0e\u73b0\u6709\u7684\u5927\u8bed\u8a00\u6a21\u578b\u8fdb\u884c\u6bd4\u8f83\uff0c\u5728\u4e24\u4e2a\u95ed\u5377\u95ee\u7b54\u57fa\u51c6\u6d4b\u8bd5\uff1a</p> <p>\u81ea\u7136\u95ee\u9898\uff08Kwiatkowski \u7b49\uff0c2019\uff09 TriviaQA\uff08Joshi \u7b49\uff0c2017\uff09\u3002 \u5bf9\u4e8e\u8fd9\u4e24\u4e2a\u57fa\u51c6\u6d4b\u8bd5\uff0c\u5728\u76f8\u540c\u8bbe\u7f6e\uff08\u4f8b\u5982\uff0c\u6a21\u578b\u4e0d\u80fd\u8bbf\u95ee\u90a3\u4e9b\u6709\u52a9\u4e8e\u56de\u7b54\u95ee\u9898\u7684\u6587\u6863\uff09\u4e0b\uff0c \u53d6\u5f97\u4e86\u5b8c\u5168\u76f8\u540c\u7684\u6027\u80fd\uff08exact match performance\uff09\u3002 \u8868 4 \u548c\u8868 5 \u5206\u522b\u662f\u5728\u8fd9\u4e24\u4e2a benchmark \u4e0a\u7684\u7ed3\u679c\uff0c</p> <p></p> <p>\u5728\u8fd9\u4e24\u4e2a\u57fa\u51c6\u6d4b\u8bd5\u4e2d\uff0cLLaMA-65B \u5728\u96f6\u6837\u672c\u548c\u5c11\u6837\u672c\u8bbe\u7f6e\u4e2d\u90fd\u5b9e\u73b0\u4e86 state-of-the-arts \u7684\u6027\u80fd\u3002 \u66f4\u91cd\u8981\u7684\u662f\uff0cLLaMA-13B \u5728\u8fd9\u4e9b\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u4e0e GPT-3 \u548c Chinchilla \u76f8\u6bd4\u4e5f\u5177\u6709\u7ade\u4e89\u529b\uff0c\u5c3d\u7ba1\u53c2\u6570\u53ea\u6709\u540e\u8005\u7684 10%~20\uff05\uff085-10 smaller\uff09\u3002 \u5728\u63a8\u7406\u573a\u666f\uff0cLLaMA-13B \u80fd\u5728\u5355\u4e2a V100 GPU \u4e0a\u8fd0\u884c\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/llama/LLaMA_Open_and_Efficient_Foundation_Language_Models/#33-reading-comprehension","title":"3.3 \u9605\u8bfb\u7406\u89e3\uff08Reading Comprehension\uff09","text":"<p>\u9605\u8bfb\u7406\u89e3\u80fd\u529b\u6d4b\u8bd5\u57fa\u4e8e \u201cRACE \u9605\u8bfb\u7406\u89e3\u57fa\u51c6\u6d4b\u8bd5\u201d\uff08Lai \u7b49\uff0c2017\uff09\u3002 \u8fd9\u4e2a\u6570\u636e\u96c6\u662f\u4ece\u4e3a\u4e2d\u56fd\u521d\u4e2d\u548c\u9ad8\u4e2d\u751f\u8bbe\u8ba1\u7684\u82f1\u6587\u9605\u8bfb\u7406\u89e3\u8003\u8bd5\u4e2d\u6536\u96c6\u7684\u3002 \u4e00\u4e9b\u8bbe\u7f6e\u9075\u5faa Brown \u7b49\uff082020\uff09\uff0c\u6d4b\u8bd5\u7ed3\u679c\u89c1\u8868 6\uff0c </p> <p>\u5728\u8fd9\u4e9b\u57fa\u51c6\u6d4b\u8bd5\u4e2d\uff0cLLaMA-65B \u4e0e PaLM-540B \u76f8\u5f53\uff0c\u800c LLaMA-13B \u6bd4 GPT-3 \u597d\u51e0\u4e2a\u767e\u5206\u70b9\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/llama/LLaMA_Open_and_Efficient_Foundation_Language_Models/#34-mathematical-reasoning","title":"3.4 \u6570\u5b66\u63a8\u7406\uff08Mathematical reasoning\uff09","text":"<p>\u5728\u4e24\u4e2a\u6570\u5b66\u63a8\u7406\u57fa\u51c6\u6d4b\u8bd5\u4e0a\u8bc4\u4f30\u6a21\u578b\uff1a</p> <p>MATH\uff08Hendrycks \u7b49\uff0c2021\uff09\uff1a\u4e00\u4e2a\u5305\u542b 12K \u4e2a\u521d\u4e2d\u548c\u9ad8\u4e2d\u6570\u5b66\u95ee\u9898\u7684\u6570\u636e\u96c6\uff0cLaTeX \u683c\u5f0f\uff1b GSM8k\uff08Cobbe \u7b49\uff0c2021\uff09\uff1a\u4e00\u4e2a\u521d\u4e2d\u6570\u5b66\u95ee\u9898\u96c6\u3002 \u8868 7 \u6bd4\u8f83\u4e86 PaLM \u548c Minerva\uff08Lewkowycz \u7b49\uff0c2022\uff09\u8fdb\u884c\u6bd4\u8f83\u3002</p> <p></p> <p>\u8868 7\uff1a\u91cf\u5316\u63a8\u7406\u6570\u636e\u96c6\uff08quantitative reasoning datasets\uff09\u4e0a\u7684\u6a21\u578b\u6027\u80fd\u3002 For majority voting, we use the same setup as Minerva, with k = 256 samples for MATH and k = 100 for GSM8k (Minerva 540B uses k = 64 for MATH and and k = 40 for GSM8k). LLaMA-65B outperforms Minerva 62B on GSM8k, although it has not been fine-tuned on mathematical data.</p> <p>Minerva \u662f\u4e00\u7cfb\u5217\u5728 ArXiv \u548c Math Web Pages \u4e2d\u63d0\u53d6\u7684 38.5B token \u4e0a finetune \u800c\u6210\u7684 PaLM \u6a21\u578b\uff0c PaLM \u548c LLaMA \u90fd\u6ca1\u6709\u5728\u6570\u5b66\u6570\u636e\u4e0a\u8fdb\u884c finetune \u3002 PaLM \u548c Minerva \u7684\u6027\u80fd\u6570\u5b57\u53d6\u81ea Lewkowycz \u7b49\uff082022\uff09\uff0c\u6211\u4eec\u5206\u522b\u7528\u548c\u4e0d\u7528 maj1@k \u8fdb\u884c\u4e86\u6bd4\u8f83\u3002 maj1@k \u8868\u793a\u6211\u4eec\u4e3a\u6bcf\u4e2a\u95ee\u9898\u751f\u6210 k \u4e2a\u6837\u672c\uff0c\u5e76\u8fdb\u884c\u591a\u6570\u6295\u7968\uff08Wang \u7b49\uff0c2022\uff09\u3002</p> <p>\u5728 GSM8k \u4e0a\uff0c\u53ef\u4ee5\u770b\u5230 LLaMA-65B \u4f18\u4e8e Minerva-62B\uff0c\u5c3d\u7ba1\u5b83\u6ca1\u6709\u5728\u6570\u5b66\u6570\u636e\u4e0a\u8fdb\u884c\u5fae\u8c03\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/llama/LLaMA_Open_and_Efficient_Foundation_Language_Models/#35-code-generation","title":"3.5 \u4ee3\u7801\u751f\u6210\uff08Code generation\uff09","text":"<p>\u8bc4\u4f30\u6a21\u578b\u4ece\u7ed9\u51fa\u7684\u81ea\u7136\u8bed\u8a00\u63cf\u8ff0\u6765\u751f\u6210\u4ee3\u7801\u7684\u80fd\u529b\uff0c\u4f7f\u7528\u4e86\u4e24\u4e2a\u57fa\u51c6\u6d4b\u8bd5\uff1a</p> <p>HumanEval\uff08Chen \u7b49\uff0c2021\uff09 MBPP\uff08Austin \u7b49\uff0c2021\uff09 \u8fd9\u4e24\u4e2a\u6d4b\u8bd5\uff0c\u90fd\u662f\u7ed9\u6a21\u578b\u51e0\u53e5\u5173\u4e8e\u7a0b\u5e8f\u7684\u63cf\u8ff0\uff0c\u4ee5\u53ca\u4e00\u4e9b\u8f93\u5165\u8f93\u51fa\u793a\u4f8b\u3002</p> <p>In HumanEval, it also receives a function signature, and the prompt is formatted as natural code with the textual description and tests in a program that fits the description and satisfies the test cases.</p> <p>\u5728\u8868 8 \u4e2d\uff0c\u6211\u4eec\u5c06 LLaMA \u7684 pass@1 \u5f97\u5206\u4e0e\u672a\u5728\u4ee3\u7801\u4e0a\u8fdb\u884c\u5fae\u8c03\u7684\u73b0\u6709\u8bed\u8a00\u6a21\u578b\u8fdb\u884c\u4e86\u6bd4\u8f83\uff0c\u5373 PaLM \u548c LaMDA\uff08Thoppilan \u7b49\uff0c2022\uff09\u3002 PaLM \u548c LLaMA \u662f\u5728\u5305\u542b\u76f8\u4f3c\u6570\u91cf\u7684\u4ee3\u7801 token \u7684\u6570\u636e\u96c6\u4e0a\u8bad\u7ec3\u7684\u3002</p> <p>\u8868 8\uff1aModel performance for code generation. We report the pass@ score on HumanEval and MBPP. HumanEval generations are done in zero-shot and MBBP with 3-shot prompts similar to Austin et al. (2021). The values marked with are read from figures in Chowdhery et al. (2022).</p> <p>\u5982\u8868 8 \u6240\u793a\uff0c</p> <p>\u5bf9\u4e8e\u7c7b\u4f3c\u6570\u91cf\u7684\u53c2\u6570\uff0cLLaMA \u4f18\u4e8e\u5176\u4ed6\u4e00\u822c\u6a21\u578b\uff0c\u5982 LaMDA \u548c PaLM\uff0c\u5b83\u4eec\u6ca1\u6709\u4e13\u95e8\u9488\u5bf9\u4ee3\u7801\u8fdb\u884c\u8bad\u7ec3\u6216\u5fae\u8c03\u3002 LLaMA \u5177\u6709 13B \u53c2\u6570\u53ca\u4ee5\u4e0a\uff0c\u5728 HumanEval \u548c MBPP \u4e0a\u5747\u4f18\u4e8e LaMDA 137B\u3002 LLaMA 65B \u4e5f\u4f18\u4e8e PaLM 62B\uff0c\u5373\u4f7f\u5b83\u7684\u8bad\u7ec3\u65f6\u95f4\u66f4\u957f\u3002 \u672c\u8868\u4e2d pass@1 \u7ed3\u679c\u662f\u901a\u8fc7 temperature=0.1 \u91c7\u6837\u5f97\u5230\u7684\u3002 pass@100 \u548c pass@80 \u6307\u6807\u662f\u901a\u8fc7 temperature=0.8 \u83b7\u5f97\u7684\u3002 \u6211\u4eec\u4f7f\u7528\u4e0e Chen \u7b49\uff082021\uff09\u76f8\u540c\u7684\u65b9\u6cd5\u6765\u83b7\u5f97 pass@k \u7684\u65e0\u504f\u4f30\u8ba1\u3002</p> <p>\u901a\u8fc7\u5728\u4ee3\u7801\u7279\u5b9a token \u4e0a\u8fdb\u884c\u5fae\u8c03\uff0c\u53ef\u4ee5\u63d0\u9ad8\u751f\u6210\u4ee3\u7801\u7684\u6027\u80fd\u3002\u4f8b\u5982\uff0c</p> <p>PaLM-Coder\uff08Chowdhery \u7b49\uff0c2022\uff09\u5c06 PaLM \u5728 HumanEval \u4e0a\u7684 pass@1 \u5206\u6570\u4ece PaLM \u7684 26.2\uff05\u63d0\u9ad8\u5230 36\uff05\u3002 \u5176\u4ed6\u4e13\u95e8\u9488\u5bf9\u4ee3\u7801\u8fdb\u884c\u8bad\u7ec3\u7684\u6a21\u578b\u5728\u8fd9\u4e9b\u4efb\u52a1\u4e0a\u4e5f\u8868\u73b0\u6bd4\u901a\u7528\u6a21\u578b\u66f4\u597d\uff08Chen \u7b49\uff0c2021; Nijkamp \u7b49\uff0c2022; Fried \u7b49\uff0c2022\uff09\u3002 \u5728\u4ee3\u7801 token \u4e0a\u8fdb\u884c\u5fae\u8c03\u8d85\u51fa\u4e86\u672c\u6587\u7684\u8303\u56f4\u3002</p> <p>3.6 \u5927\u89c4\u6a21\u591a\u4efb\u52a1\u8bed\u8a00\u7406\u89e3\uff08Massive Multitask Language Understanding\uff09 \u5927\u89c4\u6a21\u591a\u4efb\u52a1\u8bed\u8a00\u7406\u89e3\u57fa\u51c6\u6d4b\u8bd5\uff08MMLU\uff09\u7531 Hendrycks \u7b49\uff082020\uff09\u63d0\u51fa\uff0c \u5305\u62ec\u6db5\u76d6\u4eba\u6587\u3001STEM \u548c\u793e\u4f1a\u79d1\u5b66\u7b49\u5404\u79cd\u77e5\u8bc6\u9886\u57df\u7684\u591a\u9879\u9009\u62e9\u9898\u3002 \u6211\u4eec\u5728 5-shot \u8bbe\u7f6e\u4e0b\u4f7f\u7528\u57fa\u51c6\u6d4b\u8bd5\u63d0\u4f9b\u7684\u793a\u4f8b\u6765\u8bc4\u4f30\u6211\u4eec\u7684\u6a21\u578b\uff0c\u7ed3\u679c\u5982\u8868 9 \u6240\u793a\uff0c</p> <p>\u8868 9\uff1aMassive Multitask Language Understanding (MMLU). Five-shot accuracy</p> <p>\u53ef\u4ee5\u770b\u5230\uff0cLLaMA-65B \u843d\u540e\u4e8e Chinchilla-70B \u548c PaLM-540B \u51e0\u4e2a\u767e\u5206\u70b9\uff0c\u5e76\u4e14\u5728\u5927\u90e8\u5206\u9886\u57df\u90fd\u662f\u5982\u6b64\u3002 \u4e00\u4e2a\u53ef\u80fd\u7684\u89e3\u91ca\u662f\u6211\u4eec\u5728\u9884\u8bad\u7ec3\u6570\u636e\u4e2d\u4f7f\u7528\u4e86\u6709\u9650\u6570\u91cf\u7684\u4e66\u7c4d\u548c\u5b66\u672f\u8bba\u6587\uff0c\u5373 ArXiv\u3001Gutenberg \u548c Books3\uff0c\u603b\u5171\u53ea\u6709 177GB\uff0c \u800c\u540e\u4e24\u4e2a\u6a21\u578b\u662f\u5728\u591a\u8fbe 2TB \u7684\u4e66\u7c4d\u4e0a\u8fdb\u884c\u8bad\u7ec3\u7684\u3002 Gopher\u3001Chinchilla \u548c PaLM \u4f7f\u7528\u7684\u5927\u91cf\u4e66\u7c4d\u53ef\u80fd\u4e5f\u89e3\u91ca\u4e86\u4e3a\u4ec0\u4e48 Gopher \u5728\u8fd9\u4e2a\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u8868\u73b0\u4f18\u4e8e GPT-3\uff0c\u800c\u5728\u5176\u4ed6\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u8868\u73b0\u53ea\u662f\u5dee\u4e0d\u591a\u3002</p> <p>3.7 \u8bad\u7ec3\u8fc7\u7a0b\u4e2d\u6027\u80fd\u7684\u53d8\u5316 \u5728\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u8ddf\u8e2a\u4e86 LLaMA \u5728\u4e00\u4e9b\u95ee\u9898\u56de\u7b54\u548c\u5e38\u8bc6\u57fa\u51c6\u6d4b\u8bd5\u4e0a\u7684\u6027\u80fd\uff0c\u5982\u56fe 2\uff0c</p> <p>\u56fe 2\uff1aEvolution of performance on question answering and common sense reasoning during training</p> <p>\u5728\u5927\u591a\u6570\u57fa\u51c6\u6d4b\u8bd5\u4e2d\uff0c\u6027\u80fd\u968f\u7740 token \u6570\u91cf\u7a33\u6b65\u63d0\u9ad8\uff0c\u5e76\u4e0e\u6a21\u578b\u7684 training perplexity \u76f8\u5173\uff08\u89c1\u56fe 1\uff09\u3002</p> <p>\u56fe 1\uff1aTraining loss over train tokens for the 7B, 13B, 33B, and 65 models. LLaMA-33B and LLaMA- 65B were trained on 1.4T tokens. The smaller models were trained on 1.0T tokens. All models are trained with a batch size of 4M tokens.</p> <p>SIQA \u548c WinoGrande \u662f\u4f8b\u5916\u3002</p> <p>\u7279\u522b\u662f\u5728 SIQA \u4e0a\uff0c\u6211\u4eec\u89c2\u5bdf\u5230\u6027\u80fd\u53d8\u5316\u5f88\u5927\uff0c\u8fd9\u53ef\u80fd\u8868\u660e\u8fd9\u4e2a\u57fa\u51c6\u6d4b\u8bd5\u4e0d\u53ef\u9760\uff1b \u5728 WinoGrande \u4e0a\uff0c\u6027\u80fd\u4e0etraining perplexity\u7684\u76f8\u5173\u6027\u4e0d\u592a\u597d\uff1aLLaMA-33B \u548c LLaMA-65B \u5728\u8bad\u7ec3\u671f\u95f4\u7684\u6027\u80fd\u76f8\u4f3c\u3002 4 \u6307\u4ee4\u5fae\u8c03\uff08Instruction Finetuning\uff09 \u5728\u672c\u8282\u4e2d\uff0c\u6211\u4eec\u5c06\u8bf4\u660e\u7b80\u5355\u5730\u5728\u6307\u4ee4\u6570\u636e\u4e0a\u8fdb\u884c\u5fae\u8c03\uff0c\u5c31\u4f1a\u8fc5\u901f\u63d0\u9ad8\u5728 MMLU \u4e0a\u7684\u6027\u80fd\u3002</p> <p>\u5c3d\u7ba1 LLaMA-65B \u7684\u672a\u5fae\u8c03\u7248\u672c\u5df2\u7ecf\u80fd\u591f follow \u57fa\u672c\u6307\u4ee4\uff0c\u4f46\u6211\u4eec\u89c2\u5bdf\u5230\u8fdb\u884c\u4e00\u70b9\u5fae\u8c03\u53ef\u4ee5\u63d0\u9ad8\u5728 MMLU \u4e0a\u7684\u6027\u80fd\uff0c \u5e76\u80fd\u8fdb\u4e00\u6b65\u63d0\u9ad8\u6a21\u578b follow \u6307\u4ee4\u7684\u80fd\u529b\u3002 \u7531\u4e8e\u8fd9\u4e0d\u662f\u672c\u6587\u7684\u91cd\u70b9\uff0c\u6211\u4eec\u53ea\u8fdb\u884c\u4e86\u4e00\u6b21\u5b9e\u9a8c\uff0c\u9075\u5faa Chung \u7b49\uff082022\uff09\u7684\u76f8\u540c\u534f\u8bae\u6765\u8bad\u7ec3\u4e00\u4e2a\u6307\u4ee4\u6a21\u578b LLaMA-I\u3002 LLaMA-I \u5728 MMLU \u4e0a\u7684\u7ed3\u679c\u89c1\u8868 10\uff0c\u4e0e\u5f53\u524d\u4e2d\u7b49\u89c4\u6a21\u7684\u6307\u4ee4\u5fae\u8c03\u6a21\u578b OPT-IML\uff08Iyer \u7b49\uff0c2022\uff09\u548c Flan-PaLM \u7cfb\u5217\uff08Chung \u7b49\uff0c2022\uff09\u8fdb\u884c\u4e86\u6bd4\u8f83\uff1a</p> <p>\u8868 10\uff1aInstruction finetuning \u2013 MMLU (5-shot). Comparison of models of moderate size with and without instruction finetuning on MMLU.</p> <p>\u5c3d\u7ba1\u8fd9\u91cc\u4f7f\u7528\u7684\u6307\u4ee4\u5fae\u8c03\u65b9\u6cd5\u5f88\u7b80\u5355\uff0c\u4f46\u6211\u4eec\u5728 MMLU \u4e0a\u8fbe\u5230\u4e86 68.9\uff05\u3002 LLaMA-I\uff0865B\uff09\u5728 MMLU \u4e0a\u4f18\u4e8e\u73b0\u6709\u7684\u4e2d\u7b49\u89c4\u6a21\u6307\u4ee4\u5fae\u8c03\u6a21\u578b\uff0c\u4f46\u4ecd\u8fdc\u8fdc\u843d\u540e\u4e8e\u6700\u5148\u8fdb\u7684 GPT code-davinci-002 \u5728 MMLU \u4e0a\u7684 77.4\uff08\u6570\u5b57\u6765\u81ea Iyer \u7b49\uff082022\uff09\uff09\u3002\u6709\u5173 57 \u4e2a\u4efb\u52a1\u7684 MMLU \u6027\u80fd\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u9644\u5f55\u7684\u8868 16\u3002</p> <p>5 Bias, Toxicity and Misinformation Large language models have been showed to reproduce and amplify biases that are existing in the training data (Sheng et al., 2019; Kurita et al., 2019), and to generate toxic or offensive content (Gehman et al., 2020). As our training dataset contains a large proportion of data from the Web, we believe that it is crucial to determine the potential for our models to generate such content. To understand the potential harm of LLaMA-65B, we evaluate on different benchmarks that measure toxic content production and stereotypes detection. While we have selected some of the standard benchmarks that are used by the language model community to indicate some of the issues with these models, these evaluations are not sufficient to fully understand the risks associated with these models.</p> <p>5.1 RealToxicityPrompts Language models can generate toxic language, e.g., insults, hate speech or threats. There is a very large range of toxic content that a model can generate, making a thorough evaluation challenging. Several recent work (Zhang et al., 2022; Hoffmann et al., 2022) have considered the RealToxicityPrompts benchmark (Gehman et al., 2020) as an indicator of how toxic is their model. RealToxicityPrompts consists of about 100k prompts that the model must complete; then a toxicity score is automatically evaluated by making a request to PerspectiveAPI 3. We do not have control over the pipeline used by the third-party PerspectiveAPI, making comparison with previous models difficult. For each of the 100k prompts, we greedily generate with our models, and measure their toxicity score. The score per prompt ranges from 0 (non-toxic) to 1 (toxic). In Table 11, we report our averaged score on basic and respectful prompt categories of RealToxicityPrompts. These scores are \u201ccomparable\u201d with what we observe in the literature (e.g., 0.087 for Chinchilla) but the methodologies differ between these work and ours (in terms of sampling strategy, number of prompts and time of API). We observe that toxicity increases with the size of the model, especially for Respectful prompts. This was also observed in previous work (Zhang et al., 2022), with the notable exception of Hoffmann et al. (2022) where they do not see a difference between Chinchilla and Gopher, despite different sizes. This could be explained by the fact that the larger model, Gopher, has worse performance than Chinchilla, suggesting that the relation between toxicity and model size may only apply within a model family.</p> <p>5.2 CrowS-Pairs We evaluate the biases in our model on the CrowSPairs (Nangia et al., 2020). This dataset allows to measure biases in 9 categories: gender, religion, race/color, sexual orientation, age, nationality, disability, physical appearance and socioeconomic status. Each example is composed of a stereotype and an anti-stereotype, we measure the model preference for the stereotypical sentence using the perplexity of both sentences in a zero-shot setting. Higher scores thus indicate higher bias. We compare with GPT-3 and OPT-175B in Table 12. LLaMA compares slightly favorably to both models on average. Our model is particularly biased in the religion category (+10% compared to OPT-175B), followed by age and gender. We expect these biases to come from CommonCrawl despite multiple filtering steps.</p> <p>5.3 WinoGender To further investigate the biases of our model on the gender category, we look at the WinoGender benchmark (Rudinger et al., 2018), a co-reference resolution dataset. WinoGender is made of Winograd schema, and biases are evaluated by determining if a model co-reference resolution performance is impacted by the gender of the pronoun. More precisely, each sentence has three mentions: an \u201coccupation\u201d, a \u201cparticipant\u201d, and a \u201cpronoun\u201d where the pronoun is co-referencing either the occupation or participant. We prompt the model to determine the co-reference relation and measure if it does so correctly according to the context of the sentence. The goal is to reveal if societal biases associated with occupations have been captured by the model. For example, a sentence in the WinoGender dataset is \u201cThe nurse notified the patient that his shift would be ending in an hour.\u201d, which is followed by \u2018His\u2019 refers to. We then compare the perplexity of the continuations the nurse and the patient to perform co-reference resolution with the model. We evaluate the performance when using 3 pronouns: \u201cher/her/she\u201d, \u201chis/him/he\u201d and \u201ctheir/them/someone\u201d (the different choices corresponding to the grammatical function of the pronoun. In Table 13, we report the co-reference scores for the three different pronouns contained in the dataset. We observe that our model is significantly better at performing co-reference resolution for the \u201ctheir/them/someone\u201d pronouns than for the \u201cher/her/she\u201d and \u201chis/him/he\u201d pronouns. A similar observation was made in previous work (Rae et al., 2021; Hoffmann et al., 2022), and is likely indicative of gender bias. Indeed, in the case of the \u201cher/her/she\u201d and \u201chis/him/he\u201d pronouns, the model is probably using the majority gender of the occupation to perform co-reference resolution, instead of using the evidence of the sentence. To further investigate this hypothesis, we look at the set of \u201cgotcha\u201d cases for the \u201cher/her/she\u201d and \u201chis/him/he\u201d pronouns in the WinoGender dataset. Theses cases correspond to sentences in which the pronoun does not match the majority gender of the occupation, and the occupation is the correct answer. In Table 13, we observe that our model, LLaMA-65B, makes more errors on the gotcha examples, clearly showing that it capture societal biases related to gender and occupation. The drop of performance exists for \u201cher/her/she\u201d and \u201chis/him/he\u201d pronouns, which is indicative of biases regardless of gender.</p> <p>In Table 14, we report the performance of our models on both questions to measure truthful models and the intersection of truthful and informative. Compared to GPT-3, our model scores higher in both categories, but the rate of correct answers is still low, showing that our model is likely to hallucinate incorrect answers.</p> <p>5.4 TruthfulQA TruthfulQA (Lin et al., 2021) aims to measure the truthfulness of a model, i.e., its ability to identify when a claim is true. Lin et al. (2021) consider the definition of \u201ctrue\u201d in the sense of \u201cliteral truth about the real world\u201d, and not claims that are only true in the context of a belief system or tradition. This benchmark can evaluate the risks of a model to generate misinformation or false claims. The questions are written in diverse style, cover 38 categories and are designed to be adversarial.</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/llama/LLaMA_Open_and_Efficient_Foundation_Language_Models/#6-carbon-footprint","title":"6 \u78b3\u8db3\u8ff9\uff08Carbon footprint\uff09","text":"<p>\u8bad\u7ec3 LLaMA \u6d88\u8017\u4e86\u5927\u91cf\u80fd\u6e90\uff0c\u6392\u653e\u4e86\u5f88\u591a\u4e8c\u6c27\u5316\u78b3\u3002\u6211\u4eec\u9075\u5faa\u6700\u8fd1\u7684\u6587\u732e\uff0c\u5c06\u603b\u80fd\u8017\u548c\u4ea7\u751f\u7684\u78b3\u8db3\u8ff9\u5206\u89e3\u5728\u8868 15 \u4e2d\uff0c</p> <p>\u8868 15\uff1a Carbon footprint of training different models in the same data center. We follow Wu et al. (2022) to compute carbon emission of training OPT, BLOOM and our models in the same data center. For the power consumption of a A100-80GB, we take the thermal design power for NVLink systems, that is 400W. We take a PUE of 1.1 and a carbon intensity factor set at the national US average of 0.385 kg CO2e per KWh.</p> <p>\u6211\u4eec\u91c7\u7528 Wu \u7b49(2022)\u7684\u516c\u5f0f\u6765\u4f30\u7b97\u8bad\u7ec3\u6a21\u578b\u6240\u9700\u7684\u74e6\u65f6\u6570\uff08Watt-hour, Wh\uff09\u548c\u78b3\u6392\u653e\u91cf\uff08carbon emissions\uff09\u3002 \u5bf9\u4e8e\u74e6\u65f6\u6570\uff0c\u6211\u4eec\u4f7f\u7528\u4ee5\u4e0b\u516c\u5f0f\uff1a</p> <p>Wh = GPU-h * (GPU power consumption) * PUE</p> <p>\u5176\u4e2d\uff0c\u6211\u4eec\u7684\u529f\u7387\u4f7f\u7528\u6548\u7387\uff08PUE\uff09\u4e3a 1.1\u3002 \u4ea7\u751f\u7684\u78b3\u6392\u653e\u91cf\u53d6\u51b3\u4e8e\u7528\u4e8e\u8bad\u7ec3\u6240\u5728\u7684\u6570\u636e\u4e2d\u5fc3\u7684\u4f4d\u7f6e\u3002\u4f8b\u5982\uff0c</p> <p>BLOOM \u4f7f\u7528\u6392\u653e 0.057kg CO2eq/KWh \u7684\u7535\u7f51\uff0c\u4ea7\u751f 27 tCO2eq \u7684\u6392\u653e\u91cf\uff0c OPT \u4f7f\u7528\u6392\u653e 0.231kg CO2eq/KWh \u7684\u7535\u7f51\uff0c\u5bfc\u81f4 82 tCO2eq \u7684\u6392\u653e\u91cf\u3002 \u5728\u672c\u7814\u7a76\u4e2d\uff0c\u6211\u4eec\u611f\u5174\u8da3\u7684\u662f\u5728\u540c\u4e00\u4e2a\u6570\u636e\u4e2d\u5fc3\u7684\u60c5\u51b5\u4e0b\uff0c\u4e0d\u540c\u6a21\u578b\u8bad\u7ec3\u7684\u78b3\u6392\u653e\u6210\u672c\u3002 \u56e0\u6b64\uff0c\u6211\u4eec\u4e0d\u8003\u8651\u6570\u636e\u4e2d\u5fc3\u7684\u4f4d\u7f6e\uff0c\u5e76\u4f7f\u7528\u7f8e\u56fd\u56fd\u5bb6\u5e73\u5747\u78b3\u5f3a\u5ea6\u7cfb\u6570\uff08carbon intensity factor\uff09 0.385kg CO2eq/KWh\u3002 \u90a3\u4e48\u6b64\u65f6\u5c31\u6709\uff0c</p> <p>tCO2eq = MWh * 0:385</p> <p>\u6211\u4eec\u5bf9 OPT \u548c BLOOM \u91c7\u7528\u76f8\u540c\u7684\u516c\u5f0f\u8fdb\u884c\u516c\u5e73\u6bd4\u8f83\u3002</p> <p>\u5bf9\u4e8e OPT\uff0c\u6211\u4eec\u5047\u8bbe\u8bad\u7ec3\u9700\u8981\u5728 992 \u4e2a A100-80GB \u4e0a\u8fdb\u884c 34 \u5929\uff08\u53c2\u89c1\u4ed6\u4eec\u7684\u65e5\u5fd7 4\uff09\u3002 \u6211\u4eec\u5728 2048 \u4e2a A100 80GB \u4e0a\uff0c\u7528\u4e86\u7ea6 5 \u4e2a\u6708\u65f6\u95f4\u6765\u5f00\u53d1 LLaMA\u3002 \u6839\u636e\u524d\u9762\u7684\u516c\u5f0f\uff0c\u8ba1\u7b97\u5f97\u5230 LLaMA \u7684\u8bad\u7ec3\u6210\u672c\u7ea6\u4e3a 2638 MWh\uff0c\u603b\u6392\u653e\u91cf\u4e3a 1015 tCO2eq\u3002 \u6211\u4eec\u5e0c\u671b LLaMA \u7684\u53d1\u5e03\u6709\u52a9\u4e8e\u51cf\u5c11\u672a\u6765\u7684\u78b3\u6392\u653e\uff0c\u56e0\u4e3a\u5b83\u8bad\u7ec3\u5df2\u7ecf\u5b8c\u6210\uff08\u5f88\u591a\u60c5\u51b5\u4e0b\u5927\u5bb6\u76f4\u63a5\u7528\u6216\u8005\u8fdb\u884c\u5fae\u8c03\u5c31\u884c\u4e86\uff09: \u800c\u4e14\u5176\u4e2d\u4e00\u4e9b\u5c0f\u53c2\u6570\u6a21\u578b\u53ef\u4ee5\u5728\u5355\u4e2a GPU \u4e0a\u8fd0\u884c\u3002</p> <p>7 \u76f8\u5173\u5de5\u4f5c\uff08Related work\uff09 \u8bed\u8a00\u6a21\u578b\u662f\u5355\u8bcd\u3001 token \u6216\u5b57\u7b26\u7ec4\u6210\u7684\u5e8f\u5217\u7684\u6982\u7387\u5206\u5e03 \uff08probability distributions over sequences of words, tokens or characters\uff09(Shannon, 1948, 1951)\u3002</p> <p>\u8fd9\u4e2a\u4efb\u52a1\u901a\u5e38\u88ab\u63cf\u8ff0\u4e3a\u5bf9\u4e0b\u4e00\u4e2a token \u7684\u9884\u6d4b\uff0c\u5728\u81ea\u7136\u8bed\u8a00\u5904\u7406\uff08Bahl \u7b49\uff0c1983\uff1bBrown \u7b49\uff0c1990\uff09\u4e2d\u5f88\u65e9\u5c31\u662f\u4e00\u4e2a\u6838\u5fc3\u95ee\u9898\u4e86\u3002 Turing\uff081950\uff09\u63d0\u51fa\u901a\u8fc7\u201c\u6a21\u4eff\u6e38\u620f\u201d\uff08imitation game\uff09\uff0c\u4f7f\u7528\u8bed\u8a00\u6765\u8861\u91cf\u673a\u5668\u667a\u80fd\uff0c \u56e0\u6b64\u8bed\u8a00\u5efa\u6a21\uff08language modeling\uff09\u6210\u4e3a\u4e86\u8861\u91cf\u4eba\u5de5\u667a\u80fd\u8fdb\u5c55\u7684\u57fa\u51c6\uff08Mahoney\uff0c1999\uff09\u3002</p> <p>7.1 Architecture Traditionally, language models were based on n-gram count statistics (Bahl et al., 1983), and various smoothing techniques were proposed to improve the estimation of rare events (Katz, 1987; Kneser and Ney, 1995). In the past two decades, neural networks have been successfully applied to the language modelling task, starting from feed forward models (Bengio et al., 2000), recurrent neural networks (Elman, 1990; Mikolov et al., 2010) and LSTMs (Hochreiter and Schmidhuber, 1997; Graves, 2013). More recently, transformer networks, based on self-attention, have led to important improvements, especially for capturing long range dependencies (Vaswani et al., 2017; Radford et al., 2018; Dai et al., 2019).</p> <p>7.2 Scaling There is a long history of scaling for language models, for both the model and dataset sizes. Brants et al. (2007) showed the benefits of using language models trained on 2 trillion tokens, resulting in 300 billion n-grams, on the quality of machine translation. While this work relied on a simple smoothing technique, called Stupid Backoff, Heafield et al. (2013) later showed how to scale Kneser-Ney smoothing to Web-scale data. This allowed to train a 5-gram model on 975 billions tokens from CommonCrawl, resulting in a model with 500 billions n-grams (Buck et al., 2014). Chelba et al. (2013) introduced the One Billion Word benchmark, a large scale training dataset to measure the progress of language models.</p> <p>In the context of neural language models, Jozefowicz et al. (2016) obtained state-of-the-art results on the Billion Word benchmark by scaling LSTMs to 1 billion parameters. Later, scaling transformers lead to improvement on many NLP tasks. Notable models include BERT (Devlin et al., 2018), GPT-2 (Radford et al., 2019), Megatron- LM (Shoeybi et al., 2019), and T5 (Raffel et al., 2020). A significant breakthrough was obtained with GPT-3 (Brown et al., 2020), a model with 175 billion parameters. This lead to a series of Large Language Models, such as Jurassic-1 (Lieber et al., 2021), Megatron-Turing NLG (Smith et al., 2022), Gopher (Rae et al., 2021), Chinchilla (Hoffmann et al., 2022), PaLM (Chowdhery et al., 2022), OPT (Zhang et al., 2022), and GLM (Zeng et al., 2022). Hestness et al. (2017) and Rosenfeld et al. (2019) studied the impact of scaling on the performance of deep learning models, showing the existence of power laws between the model and dataset sizes and the performance of the system. Kaplan et al. (2020) derived power laws specifically for transformer based language models, which were later refined by Hoffmann et al. (2022), by adapting the learning rate schedule when scaling datasets. Finally, Wei et al. (2022) studied the effect of scaling on the abilities of large language models.</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/llama/LLaMA_Open_and_Efficient_Foundation_Language_Models/#8","title":"8 \u603b\u7ed3","text":"<p>\u5728\u672c\u6587\u4e2d\uff0c\u6211\u4eec\u4ecb\u7ecd\u4e86\u4e00\u7cfb\u5217\u516c\u5f00\u53d1\u5e03\u7684\u8bed\u8a00\u6a21\u578b\uff0c\u8fd9\u4e9b\u6a21\u578b\u4e0e\u6700\u5148\u8fdb\u7684\u57fa\u7840\u6a21\u578b\u5177\u6709\u7ade\u4e89\u529b\u3002\u6700\u503c\u5f97\u4e00\u63d0\u7684\u662f\uff0cLLaMA-13B\u7684\u8868\u73b0\u4f18\u4e8eGPT-3\uff0c\u4f46\u5176\u4f53\u79ef\u5374\u5c0f\u4e8610\u500d\u4ee5\u4e0a\uff0c\u800cLLaMA-65B\u5219\u4e0eChinchilla-70B\u548cPaLM-540B\u5177\u6709\u7ade\u4e89\u529b\u3002\u4e0e\u4ee5\u5f80\u7814\u7a76\u4e0d\u540c\uff0c\u6211\u4eec\u8bc1\u660e\uff0c\u4ec5\u901a\u8fc7\u8bad\u7ec3\u516c\u5f00\u53ef\u7528\u7684\u6570\u636e\uff0c\u800c\u4e0d\u4f9d\u8d56\u4e13\u6709\u6570\u636e\u96c6\uff0c\u5c31\u53ef\u4ee5\u5b9e\u73b0\u6700\u5148\u8fdb\u7684\u6027\u80fd\u3002\u6211\u4eec\u5e0c\u671b\u5c06\u8fd9\u4e9b\u6a21\u578b\u53d1\u5e03\u7ed9\u7814\u7a76\u754c\uff0c\u4ee5\u52a0\u901f\u5927\u578b\u8bed\u8a00\u6a21\u578b\u7684\u5f00\u53d1\uff0c\u5e76\u52a9\u529b\u63d0\u5347\u5176\u9c81\u68d2\u6027\uff0c\u7f13\u89e3\u5df2\u77e5\u95ee\u9898\uff0c\u5982\u6bd2\u6027\u5185\u5bb9\u548c\u504f\u89c1\u3002\u6b64\u5916\uff0c\u6211\u4eec\u89c2\u5bdf\u5230\uff0c\u4e0eChung\u7b49\u4eba\uff082022\uff09\u7684\u53d1\u73b0\u7c7b\u4f3c\uff0c\u5bf9\u8fd9\u4e9b\u6a21\u578b\u8fdb\u884c\u6307\u4ee4\u5fae\u8c03\u53ef\u4ee5\u53d6\u5f97\u4ee4\u4eba\u9f13\u821e\u7684\u7ed3\u679c\uff0c\u6211\u4eec\u8ba1\u5212\u5728\u672a\u6765\u7684\u5de5\u4f5c\u4e2d\u8fdb\u4e00\u6b65\u63a2\u7d22\u8fd9\u4e00\u70b9\u3002\u6700\u540e\uff0c\u6211\u4eec\u8ba1\u5212\u5728\u672a\u6765\u53d1\u5e03\u5728\u66f4\u5927\u89c4\u6a21\u7684\u9884\u8bad\u7ec3\u8bed\u6599\u5e93\u4e0a\u8bad\u7ec3\u51fa\u7684\u66f4\u5927\u6a21\u578b\uff0c\u56e0\u4e3a\u6211\u4eec\u5728\u6269\u5927\u89c4\u6a21\u65f6\u5df2\u7ecf\u89c2\u5bdf\u5230\u4e86\u6027\u80fd\u7684\u6301\u7eed\u63d0\u5347\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/llama/LLaMA_Open_and_Efficient_Foundation_Language_Models/#_2","title":"\u81f4\u8c22","text":"<p>We thank Daniel Haziza, Francisco Massa, Jeremy Reizenstein, Artem Korenev, and Patrick Labatut from the xformers team. We thank Susan Zhang and Stephen Roller for their support on data deduplication. We thank Luca Wehrstedt, Vegard Mella, and Pierre-Emmanuel Mazar\u00e9 for their support on training stability. We thank Shubho Sengupta, Kalyan Saladi, and all the AI infra team for their support. We thank Jane Yu for her input on evaluation. We thank Yongyi Hu for his help on data collection.</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/llama/LLaMA_Open_and_Efficient_Foundation_Language_Models/#_3","title":"\u53c2\u8003\u6587\u732e","text":"<ul> <li>Jacob Austin, Augustus Odena, Maxwell Nye, Maarten Bosma, Henryk Michalewski, David Dohan, Ellen Jiang, Carrie Cai, Michael Terry, Quoc Le, and Charles Sutton. 2021. Program synthesis with large language models.</li> <li>Lalit R Bahl, Frederick Jelinek, and Robert L Mercer. 1983. A maximum likelihood approach to continuous speech recognition. IEEE transactions on pattern analysis and machine intelligence, pages 179\u2013 190.</li> <li>Yoshua Bengio, R\u00e9jean Ducharme, and Pascal Vincent. 2000. A neural probabilistic language model. Advances in neural information processing systems, 13.</li> <li>Yonatan Bisk, Rowan Zellers, Jianfeng Gao, Yejin Choi, et al. 2020. Piqa: Reasoning about physical commonsense in natural language. In Proceedings of the AAAI conference on artificial intelligence, pages 7432\u20137439.</li> <li>Sid Black, Stella Biderman, Eric Hallahan, Quentin Anthony, Leo Gao, Laurence Golding, Horace He, Connor Leahy, Kyle McDonell, Jason Phang, et al. 2022. Gpt-neox-20b: An open-source autoregressive language model. arXiv preprint arXiv:2204.06745. Thorsten Brants, Ashok C. Popat, Peng Xu, Franz J. Och, and Jeffrey Dean. 2007. Large language models in machine translation. In Proceedings of the 2007 Joint Conference on Empirical Methods in Natural Language Processing and Computational Natural Language Learning (EMNLP-CoNLL), pages 858\u2013867, Prague, Czech Republic. Association for Computational Linguistics. Peter F Brown, John Cocke, Stephen A Della Pietra, Vincent J Della Pietra, Frederick Jelinek, John Lafferty, Robert L Mercer, and Paul S Roossin. 1990. A statistical approach to machine translation. Computational linguistics, 16(2):79\u201385. Tom B. Brown, Benjamin Mann, Nick Ryder, Melanie Subbiah, Jared Kaplan, Prafulla Dhariwal, Arvind Neelakantan, Pranav Shyam, Girish Sastry, Amanda Askell, Sandhini Agarwal, Ariel Herbert-Voss, Gretchen Krueger, Tom Henighan, Rewon Child, Aditya Ramesh, Daniel M. Ziegler, Jeffrey Wu, Clemens Winter, Christopher Hesse, Mark Chen, Eric Sigler, Mateusz Litwin, Scott Gray, Benjamin Chess, Jack Clark, Christopher Berner, Sam Mc- Candlish, Alec Radford, Ilya Sutskever, and Dario Amodei. 2020. Language models are few-shot learners. Christian Buck, Kenneth Heafield, and Bas Van Ooyen. 2014. N-gram counts and language models from the common crawl. In LREC, volume 2, page 4. Ciprian Chelba, Tomas Mikolov, Mike Schuster, Qi Ge, Thorsten Brants, Phillipp Koehn, and Tony Robinson. 2013. One billion word benchmark for measuring progress in statistical language modeling. arXiv preprint arXiv:1312.3005. Mark Chen, Jerry Tworek, Heewoo Jun, Qiming Yuan, Henrique Ponde de Oliveira Pinto, Jared Kaplan, Harri Edwards, Yuri Burda, Nicholas Joseph, Greg Brockman, Alex Ray, Raul Puri, Gretchen Krueger, Michael Petrov, Heidy Khlaaf, Girish Sastry, Pamela Mishkin, Brooke Chan, Scott Gray, Nick Ryder, Mikhail Pavlov, Alethea Power, Lukasz Kaiser, Mohammad Bavarian, Clemens Winter, Philippe Tillet, Felipe Petroski Such, Dave Cummings, Matthias Plappert, Fotios Chantzis, Elizabeth Barnes, Ariel Herbert-Voss, William Hebgen Guss, Alex Nichol, Alex Paino, Nikolas Tezak, Jie Tang, Igor Babuschkin, Suchir Balaji, Shantanu Jain, William Saunders, Christopher Hesse, Andrew N. Carr, Jan Leike, Josh Achiam, Vedant Misra, Evan Morikawa, Alec Radford, Matthew Knight, Miles Brundage, Mira Murati, Katie Mayer, Peter Welinder, Bob McGrew, Dario Amodei, Sam McCandlish, Ilya Sutskever, and Wojciech Zaremba. 2021. Evaluating large language models trained on code. Aakanksha Chowdhery, Sharan Narang, Jacob Devlin, Maarten Bosma, Gaurav Mishra, Adam Roberts, Paul Barham, Hyung Won Chung, Charles Sutton, Sebastian Gehrmann, Parker Schuh, Kensen Shi, Sasha Tsvyashchenko, Joshua Maynez, Abhishek Rao, Parker Barnes, Yi Tay, Noam Shazeer, Vinodkumar Prabhakaran, Emily Reif, Nan Du, Ben Hutchinson, Reiner Pope, James Bradbury, Jacob Austin, Michael Isard, Guy Gur-Ari, Pengcheng Yin, Toju Duke, Anselm Levskaya, Sanjay Ghemawat, Sunipa Dev, Henryk Michalewski, Xavier Garcia, Vedant Misra, Kevin Robinson, Liam Fedus, Denny Zhou, Daphne Ippolito, David Luan, Hyeontaek Lim, Barret Zoph, Alexander Spiridonov, Ryan Sepassi, David Dohan, Shivani Agrawal, Mark Omernick, Andrew M. Dai, Thanumalayan Sankaranarayana Pillai, Marie Pellat, Aitor Lewkowycz, Erica Moreira, Rewon Child, Oleksandr Polozov, Katherine Lee, Zongwei Zhou, Xuezhi Wang, Brennan Saeta, Mark Diaz, Orhan Firat, Michele Catasta, Jason Wei, Kathy Meier-Hellstern, Douglas Eck, Jeff Dean, Slav Petrov, and Noah Fiedel. 2022. Palm: Scaling language modeling with pathways. Hyung Won Chung, Le Hou, S. Longpre, Barret Zoph, Yi Tay, William Fedus, Eric Li, Xuezhi Wang, Mostafa Dehghani, Siddhartha Brahma, Albert Webson, Shixiang Shane Gu, Zhuyun Dai, Mirac Suzgun, Xinyun Chen, Aakanksha Chowdhery, Dasha Valter, Sharan Narang, Gaurav Mishra, Adams Wei Yu, Vincent Zhao, Yanping Huang, Andrew M. Dai, Hongkun Yu, Slav Petrov, Ed Huai hsin Chi, Jeff Dean, Jacob Devlin, Adam Roberts, Denny Zhou, Quoc Le, and Jason Wei. 2022. Scaling instruction-finetuned language models. arXiv preprint arXiv:2210.11416. Christopher Clark, Kenton Lee, Ming-Wei Chang, Tom Kwiatkowski, Michael Collins, and Kristina Toutanova. 2019. Boolq: Exploring the surprising difficulty of natural yes/no questions. arXiv preprint arXiv:1905.10044. Peter Clark, Isaac Cowhey, Oren Etzioni, Tushar Khot, Ashish Sabharwal, Carissa Schoenick, and Oyvind Tafjord. 2018. Think you have solved question answering? try arc, the ai2 reasoning challenge. arXiv preprint arXiv:1803.05457. Karl Cobbe, Vineet Kosaraju, Mohammad Bavarian, Mark Chen, Heewoo Jun, Lukasz Kaiser, Matthias Plappert, Jerry Tworek, Jacob Hilton, Reiichiro Nakano, et al. 2021. Training verifiers to solve math word problems. arXiv preprint arXiv:2110.14168. Zihang Dai, Zhilin Yang, Yiming Yang, Jaime Carbonell, Quoc V Le, and Ruslan Salakhutdinov. 2019. Transformer-xl: Attentive language models beyond a fixed-length context. arXiv preprint arXiv:1901.02860. Tri Dao, Daniel Y Fu, Stefano Ermon, Atri Rudra, and Christopher R\u00e9. 2022. Flashattention: Fast and memory-efficient exact attention with io-awareness. arXiv preprint arXiv:2205.14135. Jacob Devlin, Ming-Wei Chang, Kenton Lee, and Kristina Toutanova. 2018. Bert: Pre-training of deep bidirectional transformers for language understanding. arXiv preprint arXiv:1810.04805. Jeffrey L Elman. 1990. Finding structure in time. Cognitive science, 14(2):179\u2013211. Daniel Fried, Armen Aghajanyan, Jessy Lin, Sida Wang, Eric Wallace, Freda Shi, Ruiqi Zhong, Wentau Yih, Luke Zettlemoyer, and Mike Lewis. 2022. Incoder: A generative model for code infilling and synthesis. arXiv preprint arXiv:2204.05999. Leo Gao, Stella Biderman, Sid Black, Laurence Golding, Travis Hoppe, Charles Foster, Jason Phang, Horace He, Anish Thite, Noa Nabeshima, Shawn Presser, and Connor Leahy. 2020. The Pile: An 800gb dataset of diverse text for language modeling. arXiv preprint arXiv:2101.00027. Leo Gao, Jonathan Tow, Stella Biderman, Sid Black, Anthony DiPofi, Charles Foster, Laurence Golding, Jeffrey Hsu, Kyle McDonell, Niklas Muennighoff, Jason Phang, Laria Reynolds, Eric Tang, Anish Thite, BenWang, KevinWang, and Andy Zou. 2021. A framework for few-shot language model evaluation. Samuel Gehman, Suchin Gururangan, Maarten Sap, Yejin Choi, and Noah A Smith. 2020. Realtoxicityprompts: Evaluating neural toxic degeneration in language models. arXiv preprint arXiv:2009.11462. Alex Graves. 2013. Generating sequences with recurrent neural networks. arXiv preprint arXiv:1308.0850. Kenneth Heafield, Ivan Pouzyrevsky, Jonathan H Clark, and Philipp Koehn. 2013. Scalable modified kneserney language model estimation. In Proceedings of the 51st Annual Meeting of the Association for Computational Linguistics (Volume 2: Short Papers), pages 690\u2013696. Dan Hendrycks, Collin Burns, Steven Basart, Andy Zou, Mantas Mazeika, Dawn Song, and Jacob Steinhardt. 2020. Measuring massive multitask language understanding. arXiv preprint arXiv:2009.03300. Dan Hendrycks, Collin Burns, Saurav Kadavath, Akul Arora, Steven Basart, Eric Tang, Dawn Song, and Jacob Steinhardt. 2021. Measuring mathematical problem solving with the math dataset. arXiv preprint arXiv:2103.03874. Joel Hestness, Sharan Narang, Newsha Ardalani, Gregory Diamos, Heewoo Jun, Hassan Kianinejad, Md Patwary, Mostofa Ali, Yang Yang, and Yanqi Zhou. 2017. Deep learning scaling is predictable, empirically. arXiv preprint arXiv:1712.00409. Sepp Hochreiter and J\u00fcrgen Schmidhuber. 1997. Long short-term memory. Neural computation, 9(8):1735\u20131780. Jordan Hoffmann, Sebastian Borgeaud, Arthur Mensch, Elena Buchatskaya, Trevor Cai, Eliza Rutherford, Diego de Las Casas, Lisa Anne Hendricks, Johannes Welbl, Aidan Clark, Tom Hennigan, Eric Noland, Katie Millican, George van den Driessche, Bogdan Damoc, Aurelia Guy, Simon Osindero, Karen Simonyan, Erich Elsen, Jack W. Rae, Oriol Vinyals, and Laurent Sifre. 2022. Training compute-optimal large language models. Srinivasan Iyer, Xi Victoria Lin, Ramakanth Pasunuru, Todor Mihaylov, D\u00e1niel Simig, Ping Yu, Kurt Shuster, TianluWang, Qing Liu, Punit Singh Koura, et al. 2022. Opt-iml: Scaling language model instruction meta learning through the lens of generalization. arXiv preprint arXiv:2212.12017. Mandar Joshi, Eunsol Choi, Daniel S Weld, and Luke Zettlemoyer. 2017. Triviaqa: A large scale distantly supervised challenge dataset for reading comprehension. arXiv preprint arXiv:1705.03551. Rafal Jozefowicz, Oriol Vinyals, Mike Schuster, Noam Shazeer, and Yonghui Wu. 2016. Exploring the limits of language modeling. arXiv preprint arXiv:1602.02410. Jared Kaplan, Sam McCandlish, Tom Henighan, Tom B Brown, Benjamin Chess, Rewon Child, Scott Gray, Alec Radford, Jeffrey Wu, and Dario Amodei. 2020. Scaling laws for neural language models. arXiv preprint arXiv:2001.08361. Slava Katz. 1987. Estimation of probabilities from sparse data for the language model component of a speech recognizer. IEEE transactions on acoustics, speech, and signal processing, 35(3):400\u2013401. Reinhard Kneser and Hermann Ney. 1995. Improved backing-off for m-gram language modeling. In 1995 international conference on acoustics, speech, and signal processing, volume 1, pages 181\u2013184. IEEE. Vijay Korthikanti, Jared Casper, Sangkug Lym, Lawrence McAfee, Michael Andersch, Mohammad Shoeybi, and Bryan Catanzaro. 2022. Reducing activation recomputation in large transformer models. arXiv preprint arXiv:2205.05198. Taku Kudo and John Richardson. 2018. Sentencepiece: A simple and language independent subword tokenizer and detokenizer for neural text processing. arXiv preprint arXiv:1808.06226. Keita Kurita, Nidhi Vyas, Ayush Pareek, AlanWBlack, and Yulia Tsvetkov. 2019. Quantifying social biases in contextual word representations. In 1st ACL Workshop on Gender Bias for Natural Language Processing. Tom Kwiatkowski, Jennimaria Palomaki, Olivia Redfield, Michael Collins, Ankur Parikh, Chris Alberti, Danielle Epstein, Illia Polosukhin, Jacob Devlin, Kenton Lee, et al. 2019. Natural questions: a benchmark for question answering research. Transactions of the Association for Computational Linguistics, 7:453\u2013466. Guokun Lai, Qizhe Xie, Hanxiao Liu, Yiming Yang, and Eduard Hovy. 2017. Race: Large-scale reading comprehension dataset from examinations. arXiv preprint arXiv:1704.04683. Aitor Lewkowycz, Anders Johan Andreassen, David Dohan, Ethan Dyer, Henryk Michalewski, Vinay Venkatesh Ramasesh, Ambrose Slone, Cem Anil, Imanol Schlag, Theo Gutman-Solo, Yuhuai Wu, Behnam Neyshabur, Guy Gur-Ari, and Vedant Misra. 2022. Solving quantitative reasoning problems with language models. In Advances in Neural Information Processing Systems. Opher Lieber, Or Sharir, Barak Lenz, and Yoav Shoham. 2021. Jurassic-1: Technical details and evaluation. White Paper. AI21 Labs, 1. Stephanie Lin, Jacob Hilton, and Owain Evans. 2021. Truthfulqa: Measuring how models mimic human falsehoods. arXiv preprint arXiv:2109.07958. Ilya Loshchilov and Frank Hutter. 2017. Decoupled weight decay regularization. arXiv preprint arXiv:1711.05101. Matthew V Mahoney. 1999. Text compression as a test for artificial intelligence. AAAI/IAAI, 970. Todor Mihaylov, Peter Clark, Tushar Khot, and Ashish Sabharwal. 2018. Can a suit of armor conduct electricity? a new dataset for open book question answering. arXiv preprint arXiv:1809.02789. Tomas Mikolov, Martin Karafi\u00e1t, Lukas Burget, Jan Cernocky, and Sanjeev Khudanpur. 2010. Recurrent neural network based language model. In Interspeech, pages 1045\u20131048. Makuhari. Nikita Nangia, Clara Vania, Rasika Bhalerao, and Samuel R. Bowman. 2020. CrowS-pairs: A challenge dataset for measuring social biases in masked language models. In EMNLP 2020. Erik Nijkamp, Bo Pang, Hiroaki Hayashi, Lifu Tu, Huan Wang, Yingbo Zhou, Silvio Savarese, and Caiming Xiong. 2022. Codegen: An open large language model for code with multi-turn program synthesis. arXiv preprint arXiv:2203.13474. Long Ouyang, Jeffrey Wu, Xu Jiang, Diogo Almeida, CarrollWainwright, Pamela Mishkin, Chong Zhang, Sandhini Agarwal, Katarina Slama, Alex Gray, John Schulman, Jacob Hilton, Fraser Kelton, Luke Miller, Maddie Simens, Amanda Askell, Peter Welinder, Paul Christiano, Jan Leike, and Ryan Lowe. 2022. Training language models to follow instructions with human feedback. In Advances in Neural Information Processing Systems. Markus N Rabe and Charles Staats. 2021. Selfattention does not need o(n2) memory. arXiv preprint arXiv:2112.05682. Alec Radford, Karthik Narasimhan, Tim Salimans, Ilya Sutskever, et al. 2018. Improving language understanding by generative pre-training. Alec Radford, Jeffrey Wu, Rewon Child, David Luan, Dario Amodei, Ilya Sutskever, et al. 2019. Language models are unsupervised multitask learners. OpenAI blog, 1(8):9. Jack W. Rae, Sebastian Borgeaud, Trevor Cai, Katie Millican, Jordan Hoffmann, Francis Song, John Aslanides, Sarah Henderson, Roman Ring, Susannah Young, Eliza Rutherford, Tom Hennigan, Jacob Menick, Albin Cassirer, Richard Powell, George van den Driessche, Lisa Anne Hendricks, Maribeth Rauh, Po-Sen Huang, Amelia Glaese, Johannes Welbl, Sumanth Dathathri, Saffron Huang, Jonathan Uesato, John Mellor, Irina Higgins, Antonia Creswell, Nat McAleese, Amy Wu, Erich Elsen, Siddhant Jayakumar, Elena Buchatskaya, David Budden, Esme Sutherland, Karen Simonyan, Michela Paganini, Laurent Sifre, Lena Martens, Xiang Lorraine Li, Adhiguna Kuncoro, Aida Nematzadeh, Elena Gribovskaya, Domenic Donato, Angeliki Lazaridou, Arthur Mensch, Jean-Baptiste Lespiau, Maria Tsimpoukelli, Nikolai Grigorev, Doug Fritz, Thibault Sottiaux, Mantas Pajarskas, Toby Pohlen, Zhitao Gong, Daniel Toyama, Cyprien de Masson d\u2019Autume, Yujia Li, Tayfun Terzi, Vladimir Mikulik, Igor Babuschkin, Aidan Clark, Diego de Las Casas, Aurelia Guy, Chris Jones, James Bradbury, Matthew Johnson, Blake Hechtman, LauraWeidinger, Iason Gabriel,William Isaac, Ed Lockhart, Simon Osindero, Laura Rimell, Chris Dyer, Oriol Vinyals, Kareem Ayoub, Jeff Stanway, Lorrayne Bennett, Demis Hassabis, Koray Kavukcuoglu, and Geoffrey Irving. 2021. Scaling language models: Methods, analysis &amp; insights from training gopher. Colin Raffel, Noam Shazeer, Adam Roberts, Katherine Lee, Sharan Narang, Michael Matena, Yanqi Zhou, Wei Li, and Peter J Liu. 2020. Exploring the limits of transfer learning with a unified text-to-text transformer. The Journal of Machine Learning Research, 21(1):5485\u20135551. Jonathan S Rosenfeld, Amir Rosenfeld, Yonatan Belinkov, and Nir Shavit. 2019. A constructive prediction of the generalization error across scales. arXiv preprint arXiv:1909.12673. Rachel Rudinger, Jason Naradowsky, Brian Leonard, and Benjamin Van Durme. 2018. Gender bias in coreference resolution. In NAACL-HLT 2018. Keisuke Sakaguchi, Ronan Le Bras, Chandra Bhagavatula, and Yejin Choi. 2021. Winogrande: An adversarial winograd schema challenge at scale. Communications of the ACM, 64(9):99\u2013106. Maarten Sap, Hannah Rashkin, Derek Chen, Ronan LeBras, and Yejin Choi. 2019. Socialiqa: Commonsense reasoning about social interactions. arXiv preprint arXiv:1904.09728. Teven Le Scao, Angela Fan, Christopher Akiki, Ellie Pavlick, Suzana Ili\u00b4c, Daniel Hesslow, Roman Castagn\u00e9, Alexandra Sasha Luccioni, Fran\u00e7ois Yvon, Matthias Gall\u00e9, et al. 2022. Bloom: A 176bparameter open-access multilingual language model. arXiv preprint arXiv:2211.05100. Rico Sennrich, Barry Haddow, and Alexandra Birch. 2015. Neural machine translation of rare words with subword units. arXiv preprint arXiv:1508.07909. Claude E Shannon. 1948. A mathematical theory of communication. The Bell system technical journal, 27(3):379\u2013423. Claude E Shannon. 1951. Prediction and entropy of printed english. Bell system technical journal, 30(1):50\u201364. Noam Shazeer. 2020. Glu variants improve transformer. arXiv preprint arXiv:2002.05202. Emily Sheng, Kai-Wei Chang, Premkumar Natarajan, and Nanyun Peng. 2019. The woman worked as a babysitter: On biases in language generation. arXiv preprint arXiv:1909.01326. Mohammad Shoeybi, Mostofa Patwary, Raul Puri, Patrick LeGresley, Jared Casper, and Bryan Catanzaro. 2019. Megatron-lm: Training multi-billion parameter language models using model parallelism. arXiv preprint arXiv:1909.08053. Shaden Smith, Mostofa Patwary, Brandon Norick, Patrick LeGresley, Samyam Rajbhandari, Jared Casper, Zhun Liu, Shrimai Prabhumoye, George Zerveas, Vijay Korthikanti, Elton Zhang, Rewon Child, Reza Yazdani Aminabadi, Julie Bernauer, Xia Song, Mohammad Shoeybi, Yuxiong He, Michael Houston, Saurabh Tiwary, and Bryan Catanzaro. 2022. Using deepspeed and megatron to train megatron-turing nlg 530b, a large-scale generative language model. Jianlin Su, Yu Lu, Shengfeng Pan, Ahmed Murtadha, Bo Wen, and Yunfeng Liu. 2021. Roformer: Enhanced transformer with rotary position embedding. arXiv preprint arXiv:2104.09864. Romal Thoppilan, Daniel De Freitas, Jamie Hall, Noam Shazeer, Apoorv Kulshreshtha, Heng-Tze Cheng, Alicia Jin, Taylor Bos, Leslie Baker, Yu Du, YaGuang Li, Hongrae Lee, Huaixiu Steven Zheng, Amin Ghafouri, Marcelo Menegali, Yanping Huang, Maxim Krikun, Dmitry Lepikhin, James Qin, Dehao Chen, Yuanzhong Xu, Zhifeng Chen, Adam Roberts, Maarten Bosma, Vincent Zhao, Yanqi Zhou, Chung-Ching Chang, Igor Krivokon, Will Rusch, Marc Pickett, Pranesh Srinivasan, Laichee Man, Kathleen Meier-Hellstern, Meredith Ringel Morris, Tulsee Doshi, Renelito Delos Santos, Toju Duke, Johnny Soraker, Ben Zevenbergen, Vinodkumar Prabhakaran, Mark Diaz, Ben Hutchinson, Kristen Olson, Alejandra Molina, Erin Hoffman-John, Josh Lee, Lora Aroyo, Ravi Rajakumar, Alena Butryna, Matthew Lamm, Viktoriya Kuzmina, Joe Fenton, Aaron Cohen, Rachel Bernstein, Ray Kurzweil, Blaise Aguera-Arcas, Claire Cui, Marian Croak, Ed Chi, and Quoc Le. 2022. Lamda: Language models for dialog applications. A. M. Turing. 1950. Computing Machinery and Intelligence. [Oxford University Press, Mind Association]. Ashish Vaswani, Noam Shazeer, Niki Parmar, Jakob Uszkoreit, Llion Jones, Aidan N Gomez, \u0141 ukasz Kaiser, and Illia Polosukhin. 2017. Attention is all you need. In Advances in Neural Information Processing Systems 30, pages 5998\u20136008. Ben Wang and Aran Komatsuzaki. 2021. GPT-J-6B: A 6 Billion Parameter Autoregressive Language Model. https://github.com/kingoflolz/mesh-transformer-jax. Xuezhi Wang, Jason Wei, Dale Schuurmans, Quoc Le, Ed Chi, Sharan Narang, Aakanksha Chowdhery, and Denny Zhou. 2022. Self-consistency improves chain of thought reasoning in language models. Jason Wei, Yi Tay, Rishi Bommasani, Colin Raffel, Barret Zoph, Sebastian Borgeaud, Dani Yogatama, Maarten Bosma, Denny Zhou, Donald Metzler, et al. 2022. Emergent abilities of large language models. arXiv preprint arXiv:2206.07682. Guillaume Wenzek, Marie-Anne Lachaux, Alexis Conneau, Vishrav Chaudhary, Francisco Guzm\u00e1n, Armand Joulin, and Edouard Grave. 2020. CCNet: Extracting high quality monolingual datasets from web crawl data. In Language Resources and Evaluation Conference. Carole-Jean Wu, Ramya Raghavendra, Udit Gupta, Bilge Acun, Newsha Ardalani, Kiwan Maeng, Gloria Chang, Fiona Aga, Jinshi Huang, Charles Bai, et al. 2022. Sustainable ai: Environmental implications, challenges and opportunities. Proceedings of Machine Learning and Systems, 4:795\u2013813. Rowan Zellers, Ari Holtzman, Yonatan Bisk, Ali Farhadi, and Yejin Choi. 2019. Hellaswag: Can a machine really finish your sentence? arXiv preprint arXiv:1905.07830. Aohan Zeng, Xiao Liu, Zhengxiao Du, Zihan Wang, Hanyu Lai, Ming Ding, Zhuoyi Yang, Yifan Xu, Wendi Zheng, Xiao Xia, Weng Lam Tam, Zixuan Ma, Yufei Xue, Jidong Zhai, Wenguang Chen, Peng Zhang, Yuxiao Dong, and Jie Tang. 2022. Glm-130b: An open bilingual pre-trained model. Biao Zhang and Rico Sennrich. 2019. Root mean square layer normalization. Advances in Neural Information Processing Systems, 32. Susan Zhang, Stephen Roller, Naman Goyal, Mikel Artetxe, Moya Chen, Shuohui Chen, Christopher Dewan, Mona Diab, Xian Li, Xi Victoria Lin, et al. 2022. Opt: Open pre-trained transformer language models. arXiv preprint arXiv:2205.01068.</li> </ul> <p>https://arthurchiao.art/blog/llama-paper-zh/</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/gsm8k/training_veriers_to_solve_math_word_problems/","title":"Training Veri\u2000ers to Solve Math Word Problems","text":""},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/gsm8k/training_veriers_to_solve_math_word_problems/#_1","title":"\u6458\u8981","text":"<p>\u6700\u5148\u8fdb\u7684\u8bed\u8a00\u6a21\u578b\u53ef\u4ee5\u5728\u8bb8\u591a\u4efb\u52a1\u4e0a\u4e0e\u4eba\u7c7b\u7684\u8868\u73b0\u76f8\u5339\u914d\uff0c\u4f46\u5b83\u4eec\u4ecd\u7136\u96be\u4ee5\u7a33\u5065\u5730\u6267\u884c\u591a\u6b65\u6570\u5b66\u63a8\u7406\u3002\u4e3a\u4e86\u627e\u51fa\u5f53\u524d\u6a21\u578b\u7684\u95ee\u9898\u5e76\u652f\u6301\u7814\u7a76\uff0c\u6211\u4eec\u5f15\u5165\u4e86GSM8K\uff0c\u8fd9\u662f\u4e00\u4e2a\u5305\u542b8.5K\u4e2a\u9ad8\u8d28\u91cf\u591a\u8bed\u8a00\u7684\u5c0f\u5b66\u6570\u5b66\u95ee\u9898\u7684\u6570\u636e\u96c6\u3002\u6211\u4eec\u53d1\u73b0\uff0c\u5c3d\u7ba1\u8fd9\u4e2a\u95ee\u9898\u5206\u5e03\u5728\u6982\u5ff5\u4e0a\u5f88\u7b80\u5355\uff0c\u4f46\u5373\u4f7f\u662f\u6700\u5927\u7684\u53d8\u538b\u5668\u6a21\u578b\u4e5f\u65e0\u6cd5\u5b9e\u73b0\u9ad8\u6d4b\u8bd5\u6027\u80fd\u3002\u4e3a\u4e86\u63d0\u9ad8\u6027\u80fd\uff0c\u6211\u4eec\u5efa\u8bae\u8bad\u7ec3\u9a8c\u8bc1\u5668\u6765\u5224\u65ad\u6a21\u578b\u5b8c\u6210\u7684\u6b63\u786e\u6027\u3002\u5728\u6d4b\u8bd5\u65f6\uff0c\u6211\u4eec\u751f\u6210\u8bb8\u591a\u5019\u9009\u89e3\u51b3\u65b9\u6848\uff0c\u5e76\u9009\u62e9\u9a8c\u8bc1\u5668\u6392\u540d\u6700\u9ad8\u7684\u4e00\u4e2a\u3002\u6211\u4eec\u8bc1\u660e\uff0c\u9a8c\u8bc1\u663e\u8457\u63d0\u9ad8\u4e86GSM8K\u7684\u6027\u80fd\uff0c\u6211\u4eec\u63d0\u4f9b\u4e86\u5f3a\u6709\u529b\u7684\u7ecf\u9a8c\u8bc1\u636e\uff0c\u8868\u660e\u9a8c\u8bc1\u5728\u6570\u636e\u589e\u52a0\u7684\u60c5\u51b5\u4e0b\u6bd4\u5fae\u8c03\u57fa\u7ebf\u66f4\u6709\u6548\u5730\u6269\u5c55\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/gsm8k/training_veriers_to_solve_math_word_problems/#1","title":"1 \u4ecb\u7ecd","text":"<p>\u8fd1\u5e74\u6765\uff0c\u5927\u578b\u8bed\u8a00\u6a21\u578b\u5728\u8bb8\u591a\u4e0d\u540c\u7684\u4efb\u52a1\u4e2d\u8868\u73b0\u51fa\u4e86\u4ee4\u4eba\u5370\u8c61\u6df1\u523b\u7684\u6280\u80fd\uff08Wang\u7b49\u4eba\uff0c2019\uff1bBrown\u7b49\u4eba\uff0c2020\uff09\u3002Kaplan\u7b49\u4eba\uff082020\uff09\u63cf\u8ff0\u4e86\u589e\u52a0\u6a21\u578b\u5927\u5c0f\u7684\u4e00\u81f4\u597d\u5904\uff0c\u63cf\u8ff0\u4e86\u8de8\u8d8a\u8bb8\u591a\u6570\u91cf\u7ea7\u7684\u7f29\u653e\u8d8b\u52bf\u3002\u7136\u800c\uff0c\u5373\u4f7f\u662f\u6700\u5927\u7684\u6a21\u578b\u5728\u9700\u8981\u6267\u884c\u591a\u6b65\u6570\u5b66\u63a8\u7406\u65f6\u4e5f\u4f1a\u52a8\u6447\uff08Hendrycks\u7b49\u4eba\uff0c2021\uff09\u3002\u5373\u4f7f\u5728\u6a21\u578b\u7ecf\u8fc7\u9002\u5f53\u7684\u5fae\u8c03\u540e\uff0c\u6a21\u578b\u6837\u672c\u4e5f\u7ecf\u5e38\u5305\u542b\u707e\u96be\u6027\u7684\u9519\u8bef\u3002\u56e0\u6b64\uff0c\u6570\u5b66\u63a8\u7406\u63ed\u793a\u4e86\u73b0\u4ee3\u8bed\u8a00\u6a21\u578b\u7684\u4e00\u4e2a\u5173\u952e\u5f31\u70b9\u3002 \u6570\u5b66\u63a8\u7406\u4e2d\u7684\u4e00\u4e2a\u91cd\u5927\u6311\u6218\u662f\u5bf9\u4e2a\u4f53\u9519\u8bef\u7684\u9ad8\u5ea6\u654f\u611f\u6027\uff08Shen\u7b49\u4eba\uff0c2021a\uff09\u3002\u5728\u751f\u6210\u89e3\u65f6\uff0c\u9012\u5f52\u6a21\u578b\u6ca1\u6709\u7ea0\u6b63\u81ea\u8eab\u9519\u8bef\u7684\u673a\u5236\u3002\u8fc5\u901f\u504f\u79bb\u8f68\u9053\u7684\u89e3\u51b3\u65b9\u6848\u53d8\u5f97\u65e0\u6cd5\u6062\u590d\u3002\u5982\u679c\u6211\u4eec\u7eaf\u7cb9\u4f9d\u8d56\u751f\u6210\u00ac\u65b9\u6cd5\u5e76\u4ece\u5f53\u524d\u8d8b\u52bf\u4e2d\u63a8\u65ad\uff0c\u6211\u4eec\u5c06\u9700\u8981\u4e00\u4e2a\u8fc7\u9ad8\u7684 \u56fe1:GSM8K\u7684\u4e09\u4e2a\u793a\u4f8b\u95ee\u9898\u3002\u8ba1\u7b97\u6ce8\u91ca\u4ee5\u7ea2\u8272\u7a81\u51fa\u663e\u793a\u3002</p> <p>\u53c2\u6570\u8ba1\u6570\uff0c\u4ee5\u5728\u4e0eMATH\u6570\u636e\u96c6\u4e00\u6837\u5177\u6709\u6311\u6218\u6027\u7684\u5206\u5e03\u4e0a\u5b9e\u73b0\u4e2d\u7b49\u6027\u80fd\uff08Hendrycks\u7b49\u4eba\uff0c2021\uff09\u3002\u8fd9\u4e00\u8bc1\u636e\u6709\u529b\u5730\u63a8\u52a8\u4e86\u5bfb\u627e\u5177\u6709\u66f4\u6709\u5229\u6807\u5ea6\u5f8b\u7684\u65b9\u6cd5\u3002 \u6211\u4eec\u5efa\u8bae\u4f7f\u7528\u8bad\u7ec3\u9a8c\u8bc1\u5668\u6765\u8bc4\u4f30\u6a21\u578b\u751f\u6210\u89e3\u51b3\u65b9\u6848\u7684\u6b63\u786e\u6027\uff0c\u7c7b\u4f3c\u4e8eShen\u7b49\u4eba\uff082021a\uff09\u7684\u5e76\u53d1\u5de5\u4f5c\u3002\u5728\u6d4b\u8bd5\u65f6\uff0c\u6211\u4eec\u5bf9\u56fa\u5b9a\u6570\u91cf\u7684\u5019\u9009\u89e3\u51b3\u65b9\u6848\u8fdb\u884c\u91c7\u6837\uff0c\u5e76\u9009\u62e9\u9a8c\u8bc1\u5668\u6392\u540d\u6700\u9ad8\u7684\u89e3\u51b3\u65b9\u6848\u3002\u9a8c\u8bc1\u5668\u65e2\u53d7\u76ca\u4e8e\u5176\u56fa\u6709\u7684\u53ef\u9009\u6027\uff0c\u4e5f\u53d7\u76ca\u4e8e\u9a8c\u8bc1\u662f\u4e00\u9879\u6bd4\u4e00\u822c\u751f\u6210\u66f4\u7b80\u5355\u7684\u4efb\u52a1\u3002</p> <p>\u4e3a\u4e86\u4fc3\u8fdb\u7814\u7a76\uff0c\u6211\u4eec\u53d1\u5e03\u4e86GSM8K\uff0c\u8fd9\u662f\u4e00\u4e2a\u5305\u542b8.5K\u9ad8\u8d28\u91cf\u5c0f\u5b66\u6570\u5b66\u95ee\u9898\u6570\u636e\u96c6\u3002\u6211\u4eec\u8bbe\u8ba1\u4e86\u8fd9\u4e2a\u6570\u636e\u96c6\uff0c\u4f7f\u5176\u5177\u6709\u6781\u5927\u7684\u8bed\u8a00\u591a\u6837\u6027\uff0c\u540c\u65f6\u4f9d\u8d56\u4e8e\u76f8\u5bf9\u7b80\u5355\u7684\u5c0f\u5b66\u6570\u5b66\u6982\u5ff5\u3002\u6700\u597d\u7684\u8bed\u8a00\u6a21\u578b\u5f88\u96be\u5728\u8fd9\u4e2a\u6570\u636e\u96c6\u4e0a\u5177\u6709\u6781\u597d\u7684\u6027\u80fd\uff0c\u4e3b\u8981\u662f\u7531\u4e8e\u95ee\u9898\u5177\u6709\u6781\u5927\u7684\u591a\u6837\u6027\u3002\u540c\u65f6\uff0cGSM8K\u89e3\u51b3\u65b9\u6848\u4ec5\u4f9d\u8d56\u4e8e\u57fa\u672c\u6982\u5ff5\uff0c\u56e0\u6b64\u5b9e\u73b0\u9ad8\u6d4b\u8bd5\u6027\u80fd\u662f\u4e00\u4e2a\u6613\u4e8e\u5b9e\u73b0\u7684\u76ee\u6807\u3002 \u6211\u4eec\u7684\u4e3b\u8981\u8d21\u732e\u5982\u4e0b\uff1a</p> <ol> <li>\u6211\u4eec\u5c55\u793a\u4e86\u4e00\u4e2a\u7ecf\u8fc7\u7cbe\u5fc3\u7b56\u5212\u76848.5K\u5c0f\u5b66\u6570\u5b66\u95ee\u9898\u548c\u81ea\u7136\u8bed\u8a00\u89e3\u51b3\u65b9\u6848\u7684\u6570\u636e\u96c6\uff0c\u53ef\u7528\u4e8e\u63a2\u7d22\u5927\u578b\u8bed\u8a00\u6a21\u578b\u7684\u975e\u6b63\u5f0f\u63a8\u7406\u80fd\u529b\u3002</li> <li>\u6211\u4eec\u53d1\u73b0\uff0c\u4e0e\u5fae\u8c03\u57fa\u7ebf\u76f8\u6bd4\uff0c\u4f7f\u7528\u9a8c\u8bc1\u5668\u53ef\u4ee5\u83b7\u5f97\u4e0e\u6a21\u578b\u5927\u5c0f\u589e\u52a030\u500d\u5927\u81f4\u76f8\u540c\u7684\u6027\u80fd\u63d0\u5347\uff0c\u5e76\u4e14\u9a8c\u8bc1\u5668\u7684\u6548\u679c\u968f\u7740\u6570\u636e\u7684\u589e\u52a0\u800c\u63d0\u5347\u5f97\u66f4\u597d\u3002</li> <li>\u6211\u4eec\u8bc1\u660edropout\u662f\u4e00\u4e2a\u5f3a\u6b63\u5219\u5316\u5668\uff0c\u663e\u8457\u63d0\u9ad8\u4e86\u5fae\u8c03\u548c\u9a8c\u8bc1\u7684\u6027\u80fd\u3002</li> </ol>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/gsm8k/training_veriers_to_solve_math_word_problems/#2","title":"2 \u6570\u636e\u96c6","text":"<p>GSM8K\u7531\u4eba\u7c7b\u95ee\u9898\u7f16\u5199\u8005\u521b\u5efa\u76848.5K\u4e2a\u9ad8\u8d28\u91cf\u7684\u5c0f\u5b66\u6570\u5b66\u95ee\u9898\u7ec4\u6210\u3002\u6211\u4eec\u5c06\u8fd9\u4e9b\u95ee\u9898\u5206\u4e3a7.5K\u8bad\u7ec3\u95ee\u9898\u548c1K\u6d4b\u8bd5\u95ee\u9898\u3002\u8fd9\u4e9b\u95ee\u9898\u9700\u89812\u52308\u4e2a\u6b65\u9aa4\u6765\u89e3\u51b3\uff0c\u89e3\u51b3\u65b9\u6848\u4e3b\u8981\u6d89\u53ca\u4f7f\u7528\u57fa\u672c\u7b97\u672f\u8fd0\u7b97\uff08+\u2212\u00d7\u00f7\uff09\u6267\u884c\u4e00\u7cfb\u5217\u57fa\u672c\u8ba1\u7b97\uff0c\u4ee5\u83b7\u5f97\u6700\u7ec8\u7b54\u6848\u3002\u4e00\u4e2a\u806a\u660e\u7684\u4e2d\u5b66\u751f\u5e94\u8be5\u80fd\u591f\u89e3\u51b3\u6bcf\u4e00\u4e2a\u95ee\u9898\u3002</p> <p>\u6211\u4eec\u57fa\u4e8e\u4ee5\u4e0b\u8bbe\u8ba1\u539f\u5219\u521b\u5efa\u4e86GSM8K\u3002</p> <ul> <li>\u9ad8\u8d28\u91cf\u6211\u4eec\u907f\u514d\u4e86\u5bb9\u6613\u51fa\u9519\u7684\u522e\u64e6\u7a0b\u5e8f\uff0c\u800c\u662f\u4f9d\u9760\u4eba\u5de5\u5236\u9020\u95ee\u9898\u3002\u5728\u6839\u636e\u5de5\u4eba\u7684\u56de\u7b54\u534f\u8bae\u8fdb\u884c\u5e7f\u6cdb\u7684\u8d28\u91cf\u63a7\u5236\u540e\uff0c\u6211\u4eec\u4f30\u8ba1\u4e0d\u52302%\u7684\u95ee\u9898\u5305\u542b\u65ad\u88c2\u9519\u8bef\u3002</li> <li>\u9ad8\u591a\u6837\u6027\u6211\u4eec\u52aa\u529b\u5728\u95ee\u9898\u4e4b\u95f4\u5b9e\u73b0\u9ad8\u591a\u6837\u6027\u3002\u6211\u4eec\u79ef\u6781\u907f\u514d\u8bbe\u8ba1\u6765\u81ea\u540c\u4e00\u8bed\u8a00\u6a21\u677f\u6216\u4ec5\u5728\u8868\u9762\u7ec6\u8282\u4e0a\u6709\u6240\u4e0d\u540c\u7684\u95ee\u9898\uff0c\u8fd9\u662f\u8bb8\u591a\u5176\u4ed6\u6570\u636e\u96c6\u4e2d\u666e\u904d\u5b58\u5728\u7684\u95ee\u9898\u3002\u901a\u8fc7\u4f7f\u6bcf\u4e2a\u95ee\u9898\u76f8\u5bf9\u72ec\u7279\uff0c\u4fdd\u6301\u6d4b\u8bd5\u6027\u80fd\u6210\u4e3a\u4e00\u4e2a\u66f4\u76f8\u5173\u7684\u6307\u6807\u3002</li> <li>\u4e2d\u7b49\u96be\u5ea6\u6211\u4eec\u9009\u62e9\u4e00\u4e2a\u5bf9\u5927\u578b\u6700\u5148\u8fdb\u7684\u8bed\u8a00\u6a21\u578b\u5177\u6709\u6311\u6218\u6027\u7684\u95ee\u9898\u5206\u5e03\uff0c\u800c\u4e0d\u662f\u5b8c\u5168\u68d8\u624b\u7684\u3002GSM8K\u5c06\u5e2e\u52a9\u6211\u4eec\u66f4\u597d\u5730\u4e86\u89e3\u4e0d\u540c\u6a21\u578b\u548c\u65b9\u6cd5\u5728\u8fd9\u4e00\u56f0\u96be\u70b9\u4e0a\u7684\u6570\u636e\u7f29\u653e\u8d8b\u52bf\u3002\u95ee\u9898\u4e0d\u9700\u8981\u8d85\u8d8a\u65e9\u671f\u4ee3\u6570\u6c34\u5e73\u7684\u6982\u5ff5\uff0c\u7edd\u5927\u591a\u6570\u95ee\u9898\u90fd\u53ef\u4ee5\u5728\u4e0d\u663e\u5f0f\u5b9a\u4e49\u53d8\u91cf\u7684\u60c5\u51b5\u4e0b\u89e3\u51b3\u3002</li> <li>\u81ea\u7136\u8bed\u8a00\u89e3\u51b3\u65b9\u6848\u6211\u4eec\u6536\u96c6\u81ea\u7136\u8bed\u8a00\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u800c\u4e0d\u662f\u7eaf\u7cb9\u7684\u6570\u5b66\u8868\u8fbe\u5f0f\u3002\u6211\u4eec\u8ba4\u4e3a\u8fd9\u662f\u6700\u5e38\u7528\u7684\u6570\u636e\u683c\u5f0f\uff0c\u6211\u4eec\u5e0c\u671b\u5b83\u80fd\u63ed\u793a\u5927\u578b\u8bed\u8a00\u6a21\u578b\u5185\u90e8\u72ec\u767d\u7684\u7279\u6027\u3002\u6211\u4eec\u6307\u793a\u95ee\u9898\u7f16\u5199\u8005\u5c3d\u53ef\u80fd\u591a\u5730\u89e3\u91ca\u4ed6\u4eec\u7684\u5de5\u4f5c\uff0c\u4f46\u6211\u4eec\u5141\u8bb8\u4ed6\u4eec\u7528\u81ea\u5df1\u4e0d\u540c\u7684\u8bed\u8a00\u98ce\u683c\u7f16\u5199\u89e3\u51b3\u65b9\u6848\u3002</li> </ul> <p>\u5b8c\u6574\u7684GSM8K\u6570\u636e\u96c6\u53ef\u4ee5\u5728https://github.com/openai/grade-school-math\u3002\u793a\u4f8b\u95ee\u9898\u5982\u56fe1\u6240\u793a\uff0c\u6211\u4eec\u5728\u9644\u5f55A\u4e2d\u8ba8\u8bba\u4e86\u5176\u4ed6\u6570\u636e\u96c6\u7ec6\u8282\u3002</p> <p></p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/gsm8k/training_veriers_to_solve_math_word_problems/#3","title":"3 \u76f8\u5173\u5de5\u4f5c","text":""},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/gsm8k/training_veriers_to_solve_math_word_problems/#31","title":"3.1 \u76f8\u5173\u6570\u636e\u96c6","text":"<p>\u65e9\u671f\u7684\u6570\u5b66\u95ee\u9898\u6570\u636e\u96c6\uff08Kushman\u7b49\u4eba\uff0c2014\uff1bRoy\u548cRoth\uff0c2015\uff09\u76f8\u5bf9\u8f83\u5c0f\uff0c\u4e0d\u9002\u5408\u6d4b\u8bd5\u73b0\u4ee3\u8bed\u8a00\u6a21\u578b\u7684\u5c40\u9650\u6027\u3002Dolphin18K\uff08Huang\u7b49\u4eba\uff0c2016\uff09\u662f\u4e00\u4e2a\u66f4\u5927\u7684\u6570\u636e\u96c6\uff0c\u5305\u542b18K\u95ee\u9898\uff0c\u4f46\u89e3\u51b3\u65b9\u6848\u4ec5\u4ee5\u65b9\u7a0b\u6216\u6700\u7ec8\u7b54\u6848\u7684\u5f62\u5f0f\u63d0\u4f9b\u3002AQuA RAT\uff08Ling\u7b49\u4eba\uff0c2017\uff09\u5305\u542b10\u4e07\u4e2a\u95ee\u9898\uff0c\u4f46\u4e0d\u5e78\u7684\u662f\uff0c\u8be5\u6570\u636e\u96c6\u5b58\u5728\u9ad8\u5ea6\u7684\u95ee\u9898\u6a21\u677f\u5316\u548c\u81ea\u7136\u8bed\u8a00\u89e3\u51b3\u65b9\u6848\u8d28\u91cf\u63a7\u5236\u4e0d\u4f73\u7684\u95ee\u9898\u3002MathQA\u662fAQuA RAT\u6700\u8fd1\u53d1\u5e03\u7684\u4e00\u4e2a\u5b50\u96c6\uff0c\u4e13\u6ce8\u4e8e\u7ea0\u6b63\u8fd9\u4e9b\u9519\u8bef\uff08Amini\u7b49\u4eba\uff0c2019\uff09\uff0c\u4f46\u5373\u4f7f\u662f\u7ea0\u6b63\u540e\u7684\u6570\u636e\u96c6\u4e5f\u5b58\u5728\u6570\u636e\u8d28\u91cf\u95ee\u9898\uff0c\u7ea630%\u7684\u6570\u636e\u5b58\u5728\u4e0d\u4e00\u81f4\uff08Miao\u7b49\u4eba\uff0c2021\uff09\u3002Ape210K\uff08\u8d75\u7b49\u4eba\uff0c2020\uff09\u662f\u6700\u5927\u7684\u516c\u5f00\u6570\u636e\u96c6\uff0c\u7531210K\u4e2a\u4e2d\u56fd\u5c0f\u5b66\u6570\u5b66\u95ee\u9898\u7ec4\u6210\u3002\u7136\u800c\uff0c\u7531\u4e8e\u8bed\u8a00\u969c\u788d\u548c\u7f3a\u4e4f\u81ea\u7136\u8bed\u8a00\u89e3\u51b3\u65b9\u6848\uff0c\u6211\u4eec\u65e0\u6cd5\u5728\u6b64\u6570\u636e\u96c6\u4e0a\u8bc4\u4f30\u6211\u4eec\u7684\u65b9\u6cd5\u3002</p> <p>\u6700\u8fd1\u5f00\u53d1\u7684ASDiv\u6570\u636e\u96c6\uff08Miao\u7b49\u4eba\uff0c2021\uff09\u5305\u542b2.3K\u4e2a\u6570\u5b66\u5355\u8bcd\u95ee\u9898\uff0c\u901a\u8fc7\u786e\u4fdd\u95ee\u9898\u5177\u6709\u9ad8\u591a\u6837\u6027\u548c\u9ad8\u8d28\u91cf\uff0c\u89e3\u51b3\u4e86\u5148\u524d\u6570\u636e\u96c6\u4e2d\u7684\u5e38\u89c1\u7f3a\u9677\u3002\u6211\u4eec\u5728GSM8K\u7684\u521b\u5efa\u8fc7\u7a0b\u4e2d\u5206\u4eab\u4e86\u8fd9\u4e9b\u8bbe\u8ba1\u539f\u5219\u3002\u7136\u800c\uff0c\u6211\u4eec\u6ce8\u610f\u5230GSM8K\u66f4\u5927\uff0c\u63d0\u4f9b\u81ea\u7136\u8bed\u8a00\u89e3\u51b3\u65b9\u6848\uff0c\u5e76\u4e14\u5e73\u5747\u5305\u542b\u9700\u8981\u66f4\u591a\u6b65\u9aa4\u6765\u89e3\u51b3\u7684\u95ee\u9898\u3002MATH\u6570\u636e\u96c6\uff08Hendrycks\u7b49\u4eba\uff0c2021\uff09\u6bd4GSM8K\u66f4\u5927\u3001\u66f4\u590d\u6742\uff0c\u4f46\u9274\u4e8e\u76ee\u524d\u6700\u5148\u8fdb\u7684\u8bed\u8a00\u6a21\u578b\u7684\u80fd\u529b\uff0c\u5176\u9ad8\u96be\u5ea6\u4f7f\u5f97\u51c6\u786e\u8861\u91cf\u8fdb\u5c55\u53d8\u5f97\u5177\u6709\u6311\u6218\u6027\u3002</p> <p>\u5176\u4ed6\u6700\u8fd1\u4e0e\u63a8\u7406\u76f8\u5173\u7684\u6570\u636e\u96c6\u4fa7\u91cd\u4e8e\u7b26\u53f7\u6570\u5b66\u7684\u6570\u5b66\u63a8\u7406\uff08Lample\u548cCharton\uff0c2019\uff09\u3001\u9605\u8bfb\u7406\u89e3\uff08LogiQA\uff09\uff08Liu\u7b49\u4eba\uff0c2020\uff09\u548c\u5e38\u8bc6\u95ee\u7b54\uff08Common senseQA\uff09\uff08Talmor\u7b49\u4eba\uff0c2018\uff09\u3002\u4e0eCommonsenseQA\u7c7b\u4f3c\uff0cGSM8K\u5305\u62ec\u9700\u8981\u57fa\u672c\u80cc\u666f\u77e5\u8bc6\u7684\u95ee\u9898\uff0c\u5982\u4e00\u5468\u7684\u5929\u6570\u3002\u4e0e\u8981\u6c42\u9605\u8bfb\u7406\u89e3\u548c\u903b\u8f91\u63a8\u7406\u76f8\u7ed3\u5408\u7684LogiQA\u7c7b\u4f3c\uff0cGSM8K\u7684\u4e3b\u8981\u56f0\u96be\u5728\u4e8e\u6b63\u786e\u89e3\u91ca\u95ee\u9898\u548c\u901a\u8fc7\u89e3\u51b3\u95ee\u9898\u7684\u6b65\u9aa4\u8fdb\u884c\u63a8\u7406\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/gsm8k/training_veriers_to_solve_math_word_problems/#32","title":"3.2 \u76f8\u5173\u65b9\u6cd5","text":"<p>\u4e4b\u524d\u7684\u5de5\u4f5c\u8bd5\u56fe\u7528\u57fa\u4e8e\u5faa\u73af\u795e\u7ecf\u7f51\u7edc\u7684seq2seq\u6a21\u578b\uff08Sutskever\u7b49\u4eba\uff0c2014\uff09\u548c\u5bc6\u5207\u76f8\u5173\u7684\u53d8\u4f53\uff08Wang\u7b49\u4eba\uff0c2017\uff1bHuang\u7b49\u4eba\uff0c2018\uff09\u6765\u89e3\u51b3\u7ecf\u5178\u7684\u6570\u5b66\u95ee\u9898\u57fa\u51c6\u3002\u6700\u8fd1\u7684\u5de5\u4f5c\u901a\u8fc7\u8bbe\u8ba1\u4e13\u95e8\u7684\u7f16\u7801\u5668-\u89e3\u7801\u5668\u67b6\u6784\u63d0\u9ad8\u4e86\u6027\u80fd\uff08Amini\u7b49\u4eba\uff0c2019\uff1bChiang\u548cChen\uff0c2018\uff1bXie\u548cSun\uff0c2019\uff1bChen\u7b49\u4eba\uff0c2020\uff1bLi\u7b49\u4eba\uff0c2020\uff09\uff0c\u5176\u4e2d\u6700\u5f3a\u7684\u7ed3\u679c\u901a\u5e38\u4f9d\u8d56\u4e8eBERT\u5bb6\u65cf\u7684\u5927\u578b\u9884\u8bad\u7ec3\u7f16\u7801\u5668\uff08Chen\u7b49\u4eba\uff0c2019\u5e74\uff1bKim\u7b49\u4eba\uff0c2020\u5e74\uff1bLiang\u7b49\u4eba\uff0c2021\u5e74\uff09\u3002</p> <p>\u6700\u8fd1\u7684\u5176\u4ed6\u5de5\u4f5c\u5efa\u8bae\u8fdb\u884c\u989d\u5916\u7684\u9884\u8bad\u7ec3\u4efb\u52a1\uff0c\u4ee5\u8fdb\u4e00\u6b65\u63d0\u9ad8\u57fa\u4e8e\u5927\u578btransformer\u6a21\u578b\u7684\u6570\u5b66\u63a8\u7406\u80fd\u529b\u3002Hendrycks\u7b49\u4eba\uff082021\uff09\u5728\u65b0\u7684AMPS\u8bed\u6599\u5e93\u4e0a\u63d0\u51fa\u4e86\u9884\u8bad\u7ec3\u6a21\u578b\uff0c\u8be5\u8bed\u6599\u5e93\u6765\u6e90\u4e8eKhan Academy\u95ee\u9898\u548cMathematica\u811a\u672c\u3002\u540c\u6837\uff0cShen\u7b49\u4eba\uff082021b\uff09\u63d0\u51fa\u4e86\u4e00\u79cd\u4ece\u4e92\u8054\u7f51\u4e0a\u63d0\u53d6\u7684\u5b66\u524d\u81f3\u5927\u5b66\u8bfe\u7a0b\u8bed\u6599\u5e93\u7684\u9884\u8bad\u7ec3\u65b9\u6cd5\uff0cPeng\u7b49\u4eba\uff082021\uff09\u63d0\u51fa\u4e86\u901a\u8fc7\u9884\u6d4b\u8868\u8fbe\u5f0f\u6811\u4e2d\u7684\u63a9\u7801\u5b50\u8868\u8fbe\u5f0f\u8fdb\u884c\u9884\u8bad\u7ec3\u7684\u65b9\u6cd5\u3002</p> <p>\u4e0e\u9a8c\u8bc1\u7c7b\u4f3c\uff0c\u5176\u4ed6\u65b9\u6cd5\u4e5f\u5bf9\u8bed\u8a00\u6a21\u578b\u8fdb\u884c\u4e86\u5fae\u8c03\uff0c\u4ee5\u5728\u4f17\u591a\u6a21\u578b\u5b8c\u6210\u4e2d\u8fdb\u884c\u9009\u62e9\u3002Nichols\u7b49\u4eba\uff082020\uff09\u63d0\u51fa\u4e86\u4e00\u79cd\u6837\u672c\u548c\u6392\u540d\u65b9\u6cd5\uff0c\u4ee5\u63d0\u9ad8\u5927\u578b\u8bed\u8a00\u6a21\u578b\u7684\u534f\u4f5c\u8bb2\u6545\u4e8b\u80fd\u529b\uff0c\u8bad\u7ec3\u6570\u636e\u6765\u81ea\u4eba\u7c7b\u5de5\u4f5c\u8005\u7684\u504f\u597d\u3002\u5728\u4e0e\u6211\u4eec\u81ea\u5df1\u5bc6\u5207\u76f8\u5173\u7684\u5e76\u884c\u5de5\u4f5c\u4e2d\uff0cShen\u7b49\u4eba\uff082021a\uff09\u5e94\u7528\u4e86\u7c7b\u4f3c\u7684\u65b9\u6cd5\u6765\u89e3\u51b3\u6570\u5b66\u5355\u8bcd\u95ee\u9898\uff0c\u8054\u5408\u8bad\u7ec3\u4e00\u4e2a\u6a21\u578b\u6765\u751f\u6210\u548c\u6392\u5e8f\u89e3\u3002\u6211\u4eec\u7684\u5de5\u4f5c\u4e0e\u4ed6\u4eec\u7684\u65b9\u6cd5\u6709\u8bb8\u591a\u57fa\u672c\u76f8\u4f3c\u4e4b\u5904\uff0c\u5c3d\u7ba1\u6211\u4eec\u5728\u51e0\u4e2a\u5173\u952e\u65b9\u9762\u6709\u6240\u4e0d\u540c\u3002\u9996\u5148\uff0c\u6211\u4eec\u5173\u6ce8\u81ea\u7136\u8bed\u8a00\u89e3\u7684\u7a7a\u95f4\uff0c\u56e0\u4e3a\u8fd9\u662f\u4e00\u79cd\u6bd4\u7eaf\u6570\u5b66\u8868\u8fbe\u5f0f\u66f4\u4e30\u5bcc\u3001\u66f4\u901a\u7528\u7684\u89e3\u683c\u5f0f\u3002\u6b64\u5916\uff0c\u8fd9\u4e00\u9009\u62e9\u4f7f\u6211\u4eec\u7684\u6a21\u578b\u80fd\u591f\u53d1\u5c55\u8bed\u8a00\u5206\u6790\u6280\u80fd\uff0c\u5e76\u4ea7\u751f\u66f4\u5bb9\u6613\u88ab\u4eba\u7c7b\u89e3\u91ca\u7684\u89e3\u51b3\u65b9\u6848\u3002\u5176\u6b21\uff0c\u6211\u4eec\u63d0\u4f9b\u7684\u8bc1\u636e\u8868\u660e\uff0c\u9a8c\u8bc1\u8005\u4f7f\u7528\u989d\u5916\u6570\u636e\u6bd4\u57fa\u7ebf\u65b9\u6cd5\u66f4\u6709\u5229\u3002\u6700\u540e\uff0c\u6211\u4eec\u4f7f\u7528\u5355\u72ec\u7684\u751f\u6210\u5668\u548c\u9a8c\u8bc1\u5668\u7f51\u7edc\uff0c\u4ee5\u9632\u6b62\u751f\u6210\u5668\u8fc7\u62df\u5408\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/gsm8k/training_veriers_to_solve_math_word_problems/#4","title":"4 \u65b9\u6cd5","text":"<p>\u6211\u4eec\u7814\u7a76\u4e86\u89e3\u51b3GSM8K\u4e2d\u95ee\u9898\u7684\u4e24\u79cd\u65b9\u6cd5\uff1a\u5fae\u8c03\u548c\u9a8c\u8bc1\u3002\u5fae\u8c03\u662f\u6211\u4eec\u7684\u57fa\u7ebf\u65b9\u6cd5\uff0c\u5b83\u4f7f\u7528\u4e0eGPT-3\u4e2d\u7684\u751f\u6210\u6027\u9884\u8bad\u7ec3\u76f8\u540c\u7684\u8bed\u8a00\u5efa\u6a21\u76ee\u6807\uff08Brown\u7b49\u4eba\uff0c2020\uff09\u3002\u5728\u6d4b\u8bd5\u65f6\uff0c\u6211\u4eec\u901a\u8fc7\u81ea\u56de\u5f52\u91c7\u6837\u5355\u4e2a\u4f4e\u6e29\u89e3\u5e76\u68c0\u67e5\u6700\u7ec8\u7b54\u6848\u662f\u5426\u6b63\u786e\u6765\u5224\u65ad\u6027\u80fd\u3002\u76f8\u6bd4\u4e4b\u4e0b\uff0c\u9a8c\u8bc1\u5305\u62ec\u5bf9\u591a\u4e2a\u9ad8\u6e29\u89e3\u51b3\u65b9\u6848\u8fdb\u884c\u91c7\u6837\uff0c\u4e3a\u6bcf\u4e2a\u89e3\u51b3\u65b9\u6848\u5206\u914d\u4e00\u4e2a\u5206\u6570\uff0c\u5e76\u8f93\u51fa\u6392\u540d\u6700\u9ad8\u7684\u89e3\u51b3\u65b9\u6848\u3002\u9a8c\u8bc1\u8005\u88ab\u8bad\u7ec3\u6765\u5224\u65ad\u89e3\u7684\u6b63\u786e\u6027\uff0c\u8bad\u7ec3\u6570\u636e\u4ec5\u53d6\u51b3\u4e8e\u89e3\u662f\u5426\u8fbe\u5230\u6b63\u786e\u7684\u6700\u7ec8\u7b54\u6848\u3002</p> <p>\u5bf9\u4e8e\u8fd9\u4e24\u79cd\u65b9\u6cd5\uff0c\u6211\u4eec\u4f7f\u7528GPT-3\u7cfb\u5217\u7684\u6a21\u578b\u4f5c\u4e3a\u521d\u59cb\u5316\uff0c\u4e3b\u8981\u5173\u6ce8175B\u548c6B\u7684\u6a21\u578b\u5c3a\u5bf8\u3002175B\u6a21\u578b\u662f\u6700\u5927\u7684\uff0c\u5e76\u4ea7\u751f\u4e86\u6700\u4ee4\u4eba\u5370\u8c61\u6df1\u523b\u7684\u7ed3\u679c\uff0c\u800c6B\u6a21\u578b\u5728\u7814\u7a76\u76ee\u7684\u4e0a\u660e\u663e\u66f4\u65b9\u4fbf\u3002\u6211\u4eec\u5728\u9644\u5f55B\u4e2d\u8ba8\u8bba\u4e86\u8d85\u53c2\u6570\u7684\u9009\u62e9\u3002 \u6211\u4eec\u7684\u6a21\u578b\u7ecf\u5e38\u4e0d\u80fd\u51c6\u786e\u5730\u8fdb\u884c\u8ba1\u7b97\u3002\u5c3d\u7ba1\u8f83\u5927\u7684\u6a21\u578b\u6bd4\u8f83\u5c0f\u7684\u6a21\u578b\u72af\u7684\u7b97\u672f\u9519\u8bef\u66f4\u5c11\uff0c\u4f46\u8fd9\u4ecd\u7136\u662f\u5e38\u89c1\u7684\u9519\u8bef\u6765\u6e90\u3002\u4e3a\u4e86\u7f13\u89e3\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u901a\u8fc7\u5411\u8bad\u7ec3\u96c6\u4e2d\u6ce8\u5165\u8ba1\u7b97\u6ce8\u91ca\u6765\u8bad\u7ec3\u6240\u6709\u6a21\u578b\u4f7f\u7528\u8ba1\u7b97\u5668\u3002\u5728\u6d4b\u8bd5\u65f6\uff0c\u5f53\u6a21\u578b\u9009\u62e9\u4f7f\u7528\u8fd9\u4e9b\u6ce8\u91ca\u65f6\uff0c\u8ba1\u7b97\u5668\u5c06\u8986\u76d6\u91c7\u6837\u3002\u8be6\u60c5\u89c1\u9644\u5f55C\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/gsm8k/training_veriers_to_solve_math_word_problems/#41","title":"4.1 \u5fae\u8c03","text":"<p>\u6211\u4eec\u901a\u8fc7\u66f4\u65b0\u6a21\u578b\u53c2\u6570\u6765\u6267\u884c\u5fae\u8c03\uff0c\u4ee5\u6700\u5c0f\u5316\u6240\u6709\u8bad\u7ec3token\u7684\u4ea4\u53c9\u71b5\u635f\u5931\u3002\u56fe2\u663e\u793a\u4e86\u572820\u4e2a\u8fed\u4ee3\u5468\u671f\u5185\u5bf9\u4e0d\u540c\u5927\u5c0f\u7684\u8bad\u7ec3\u96c6\u8fdb\u884c\u5fae\u8c03\u540e\u7684\u6d4b\u8bd5\u6027\u80fd\u3002\u6211\u4eec\u5c06\u76f8\u540c\u7684\u6570\u636e\u53ef\u89c6\u5316\u4e3a\u8bad\u7ec3\u96c6\u5927\u5c0f\u7684\u51fd\u6570\u548c\u6a21\u578b\u5927\u5c0f\u7684\u51fd\u6570\u3002\u6d4b\u8bd5\u6027\u80fd\u7531\u6bcf\u4e2a\u6d4b\u8bd5\u95ee\u9898\u7684\u5355\u4e2a\u4f4e\u6e29\uff08T=0\uff09\u6837\u672c\u51b3\u5b9a\u3002\u4e0d\u51fa\u6240\u6599\uff0c\u6211\u4eec\u770b\u5230175B\u578b\u53f7\u7684\u8868\u73b0\u660e\u663e\u4f18\u4e8e\u8f83\u5c0f\u7684\u578b\u53f7\u3002\u5047\u8bbe\u5448\u5bf9\u6570\u7ebf\u6027\u8d8b\u52bf\uff0c\u6211\u4eec\u53ef\u4ee5\u5929\u771f\u5730\u63a8\u65ad\u8fd9\u4e9b\u7ed3\u679c\uff0c\u4ee5\u4f30\u8ba1\u5728\u4f7f\u7528\u5b8c\u6574\u7684GSM8K\u8bad\u7ec3\u96c6\u65f6\uff0c\u9700\u8981\u5177\u67091016\u4e2a\u53c2\u6570\u7684\u6a21\u578b\u624d\u80fd\u8fbe\u523080%\u7684\u6c42\u89e3\u7387\u3002\u66f4\u96be\u6cbf\u6570\u636e\u7ef4\u5ea6\u8fdb\u884c\u63a8\u65ad\uff0c\u56e0\u4e3a\u6027\u80fd\u4f3c\u4e4e\u5e76\u4e0d\u9075\u5faa\u5bf9\u6570\u7ebf\u6027\u8d8b\u52bf\u3002\u7136\u800c\uff0c175B\u6a21\u578b\u4f3c\u4e4e\u9700\u8981\u81f3\u5c11\u4e24\u4e2a\u6570\u91cf\u7ea7\u7684\u989d\u5916\u8bad\u7ec3\u6570\u636e\u624d\u80fd\u8fbe\u523080%\u7684\u89e3\u51b3\u7387\u3002 </p> <p>\u5728\u56fe3\u4e2d\uff0c\u6211\u4eec\u5c55\u793a\u4e866B\u6d4b\u8bd5\u6027\u80fd\u5728100\u8bad\u7ec3\u65f6\u671f\u3002\u6211\u4eec\u4f7f\u7528test@N\u5f53\u5141\u8bb8\u6a21\u578b\u5bf9\u6bcf\u4e2a\u95ee\u9898\u8fdb\u884cN\u6b21\u5355\u72ec\u731c\u6d4b\u65f6\uff0c\u8868\u793a\u81f3\u5c11\u4e00\u6b21\u6b63\u786e\u89e3\u51b3\u7684\u95ee\u9898\u7684\u767e\u5206\u6bd4\u3002\u6211\u4eec\u4f7f\u7528\u4f4e\u6e29\uff08T=0\uff09\u6765\u4ea7\u751ftest@1\u6211\u4eec\u4f7f\u7528\u66f4\u9ad8\u7684\u6e29\u5ea6\uff08T=0.7\uff09\u6765\u751f\u6210test@100\u6837\u672c\u3002\u8fd9\u4e24\u4e2a\u6e29\u5ea6\u503c\u90fd\u662f\u6839\u636e\u7ecf\u9a8c\u9009\u62e9\u7684\uff0c\u4ee5\u4ea7\u751f\u6700\u4f73\u7ed3\u679c\u3002Test@1\u6027\u80fd\u51e0\u4e4e\u5355\u8c03\u5730\u63d0\u9ad8\uff0c\u5373\u4f7f\u6211\u4eec\u5f88\u5feb\u5f00\u59cb\u5bf9\u6d4b\u8bd5\u635f\u5931\u8fdb\u884c\u8fc7\u62df\u5408\u3002\u4e0d\u5e78\u7684\u662f\uff0ctest@100\u6027\u80fd\u4e0b\u964d\u7684\u5e45\u5ea6\u6bd4test@1\u968f\u7740\u6211\u4eec\u589e\u52a0\u7eaa\u5143\u7684\u6570\u91cf\u3002\u8fd9\u662f\u610f\u6599\u4e4b\u4e2d\u7684\uff1a\u968f\u7740\u6a21\u578b\u53cd\u590d\u9047\u5230\u76f8\u540c\u7684\u6570\u636e\uff0c\u5b83\u5bf9\u9884\u6d4b\u53d8\u5f97\u8d8a\u6765\u8d8a\u4e0d\u6821\u51c6\u548c\u8fc7\u4e8e\u81ea\u4fe1\u3002\u5728\u6d4b\u8bd5\u65f6\uff0c\u8fd9\u79cd\u8fc7\u5ea6\u81ea\u4fe1\u4f1a\u5bfc\u81f4\u89e3\u51b3\u65b9\u6848\u7a7a\u95f4\u7684\u8986\u76d6\u7387\u4f4e\uff0c\u8fd9\u79cd\u5f71\u54cd\u53ea\u6709\u5728\u6211\u4eec\u5728\u6d4b\u8bd5\u65f6\u8003\u8651\u591a\u4e2a\u6837\u672c\u65f6\u624d\u4f1a\u53d8\u5f97\u660e\u663e\u3002 \u9009\u62e9\u4e00\u4e2a\u5177\u6709\u826f\u597d\u8986\u76d6\u7387\u7684\u6a21\u578b\u5bf9\u4e8e\u6210\u529f\u8bad\u7ec3\u9a8c\u8bc1\u8005\u81f3\u5173\u91cd\u8981\u3002\u6839\u636e\u7ecf\u9a8c\uff0c\u6211\u4eec\u770b\u5230test@100\u6027\u80fd\u5728\u6700\u521d\u7684\u51e0\u4e2a\u65f6\u671f\u8fbe\u5230\u5cf0\u503c\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u4f7f\u7528\u7ecf\u8fc72\u4e2aepoch\u8bad\u7ec3\u7684\u6a21\u578b\u6765\u751f\u6210\u8bad\u7ec3\u9a8c\u8bc1\u5668\u7684\u6837\u672c\u3002\u6211\u4eec\u5728\u9644\u5f55D\u4e2d\u63d0\u4f9b\u4e866B\u548c175B\u6a21\u578b\u7684\u51e0\u4e2a\u793a\u4f8b\u89e3\u51b3\u65b9\u6848\u3002\u6211\u4eec\u8fd8\u6ce8\u610f\u5230\uff0c\u5728\u8f93\u51fa\u6700\u7ec8\u7b54\u6848\u4e4b\u524d\uff0c\u8ba9\u6a21\u578b\u751f\u6210\u5b8c\u6574\u7684\u81ea\u7136\u8bed\u8a00\u89e3\u51b3\u65b9\u6848\u975e\u5e38\u91cd\u8981\u3002\u5982\u679c\u6211\u4eec\u6539\u4e3a\u5fae\u8c036B\u6a21\u578b\uff0c\u76f4\u63a5\u8f93\u51fa\u6700\u7ec8\u7b54\u6848\uff0c\u800c\u4e0d\u8fdb\u884c\u4efb\u4f55\u4e2d\u95f4\u6b65\u9aa4\uff0c\u6027\u80fd\u5c06\u4ece20.6%\u6025\u5267\u4e0b\u964d\u52305.2%\u3002</p> <p></p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/gsm8k/training_veriers_to_solve_math_word_problems/#42","title":"4.2 \u9a8c\u8bc1","text":"<p>\u4e3a\u4e86\u6539\u8fdb\u5fae\u8c03\u57fa\u7ebf\uff0c\u6211\u4eec\u8bad\u7ec3\u9a8c\u8bc1\u5668\u6765\u5224\u65ad\u6a21\u578b\u751f\u6210\u89e3\u51b3\u65b9\u6848\u7684\u6b63\u786e\u6027\uff0c\u5e76\u5728\u6d4b\u8bd5\u65f6\u6839\u636e\u8fd9\u4e9b\u9a8c\u8bc1\u5668\u8fdb\u884c\u641c\u7d22\u3002\u5728\u95ee\u9898\u548c\u5019\u9009\u89e3\u51b3\u65b9\u6848\u7684\u6761\u4ef6\u4e0b\uff0c\u9a8c\u8bc1\u5668\u8f93\u51fa\u89e3\u51b3\u65b9\u6848\u6b63\u786e\u7684\u6982\u7387\u3002\u8bad\u7ec3\u89e3\u51b3\u65b9\u6848\u4ec5\u6839\u636e\u5176\u662f\u5426\u8fbe\u5230\u6b63\u786e\u7684\u6700\u7ec8\u7b54\u6848\u6765\u6807\u8bb0\u4e3a\u6b63\u786e\u6216\u4e0d\u6b63\u786e\u3002\u5728\u5b9e\u8df5\u4e2d\uff0c\u4e00\u4e9b\u89e3\u51b3\u65b9\u6848\u4f1a\u4f7f\u7528\u6709\u7f3a\u9677\u7684\u63a8\u7406\u5f97\u51fa\u6b63\u786e\u7684\u6700\u7ec8\u7b54\u6848\uff0c\u4ece\u800c\u5bfc\u81f4\u8bef\u62a5\u3002  \u5982\u56fe4\u6240\u793a\uff0c\u6211\u4eec\u6309\u5982\u4e0b\u65b9\u5f0f\u8bad\u7ec3\u9a8c\u8bc1\u5668\uff1a</p> <ol> <li>\u5728\u8bad\u7ec3\u96c6\u4e0a\u5bf9\u6a21\u578b\uff08\u201c\u751f\u6210\u5668\u201d\uff09\u8fdb\u884c2\u4e2a\u8fed\u4ee3\u5468\u671f\u7684\u5fae\u8c03\u3002</li> <li>\u4ece\u751f\u6210\u5668\u4e2d\u4e3a\u6bcf\u4e2a\u8bad\u7ec3\u95ee\u9898\u62bd\u53d6100\u4e2a\u5b8c\u6210\u6837\u672c\uff0c\u5e76\u5c06\u6bcf\u4e2a\u89e3\u51b3\u65b9\u6848\u6807\u8bb0\u4e3a\u6b63\u786e\u6216\u4e0d\u6b63\u786e\u3002</li> <li>\u5728\u6b64\u6570\u636e\u96c6\u4e0a\u8bad\u7ec3\u5355\u4e2a\u5386\u5143\u7684\u9a8c\u8bc1\u5668\u3002</li> </ol> <p>\u8bad\u7ec32\u4e2aepoch\u5c31\u8db3\u4ee5\u8ba9\u751f\u6210\u5668\u5b66\u4e60\u8be5\u9886\u57df\u7684\u57fa\u672c\u6280\u80fd\u3002\u6211\u4eec\u9009\u62e9\u4e0d\u8fdb\u884c\u66f4\u957f\u65f6\u95f4\u7684\u8bad\u7ec3\uff0c\u56e0\u4e3a\u5728\u6b64\u4e4b\u540e\u751f\u6210\u7684\u89e3\u51b3\u65b9\u6848\u7684\u591a\u6837\u6027\u5f00\u59cb\u5d29\u6e83\uff0c\u5982\u56fe3\u6240\u793a\u3002\u6211\u4eec\u8bad\u7ec3\u5355\u72ec\u7684\u751f\u6210\u5668\u548c\u9a8c\u8bc1\u5668\u6a21\u578b\u6765\u9650\u5236\u751f\u6210\u5668\u7684\u8bad\u7ec3\u5e76\u9632\u6b62\u8fc7\u62df\u5408\uff0c\u4f46\u539f\u5219\u4e0a\uff0c\u5e94\u8be5\u53ef\u4ee5\u7ec4\u5408\u8fd9\u4e9b\u6a21\u578b\u3002\u9664\u975e\u53e6\u6709\u8bf4\u660e\uff0c\u5426\u5219\u6211\u4eec\u5bf9\u751f\u6210\u5668\u548c\u9a8c\u8bc1\u5668\u4f7f\u7528\u76f8\u540c\u7684\u6a21\u578b\u5927\u5c0f\u3002\u9664\u4e86\u9884\u6d4b\u89e3\u51b3\u65b9\u6848\u7684\u6b63\u786e\u6027\u5916\uff0c\u6211\u4eec\u8fd8\u4f7f\u7528\u4e0e\u751f\u6210\u5668\u76f8\u540c\u7684\u8bed\u8a00\u5efa\u6a21\u76ee\u6807\u6765\u8bad\u7ec3\u9a8c\u8bc1\u5668\u3002\u8fd9\u5bf9\u9a8c\u8bc1\u8005\u6765\u8bf4\u662f\u4e00\u4e2a\u6709\u4ef7\u503c\u7684\u8f85\u52a9\u76ee\u6807\u3002\u6211\u4eec\u5728\u9644\u5f55E\u4e2d\u8ba8\u8bba\u4e86\u5176\u4ed6\u9a8c\u8bc1\u8005\u57f9\u8bad\u7ec6\u8282\u3002</p> <p>\u5728\u6d4b\u8bd5\u65f6\uff0c\u6211\u4eec\u5bf9\u6bcf\u4e2a\u6d4b\u8bd5\u95ee\u9898\u7684100\u4e2a\u5b8c\u6210\u60c5\u51b5\u8fdb\u884c\u62bd\u6837\uff0c\u7528\u9a8c\u8bc1\u5668\u5bf9\u5176\u8fdb\u884c\u6392\u540d\uff0c\u7136\u540e\u8fd4\u56de\u9a8c\u8bc1\u5668\u5f97\u5206\u6700\u9ad8\u7684\u4e00\u4e2a\u3002\u56fe5\u663e\u793a\u4e866B\u548c175B\u6a21\u578b\u5c3a\u5bf8\u7684\u9a8c\u8bc1\u548c\u5fae\u8c03\u4e4b\u95f4\u7684\u6bd4\u8f83\u3002\u6211\u4eec\u53d1\u73b0\uff0c\u5728\u4f4e\u6570\u636e\u96c6\u5927\u5c0f\u4e0b\u4f7f\u7528\u9a8c\u8bc1\u662f\u4e0d\u5229\u7684\u3002\u6211\u4eec\u8ba4\u4e3a\u8fd9\u662f\u7531\u4e8e\u5bf9\u6b63\u786e\u7b54\u6848\u8fdb\u884c\u8fc7\u62df\u5408\u7684\u538b\u529b\u9020\u6210\u7684\uff1a\u5bf9\u4e8e\u5c0f\u6570\u636e\u96c6\uff0c\u5bf9\u6b63\u786e\u7b54\u6848\u7684\u8fc7\u62df\u5408\u6bd4\u5b66\u4e60\u6b63\u786e\u63a8\u7406\u7684\u66f4\u5177\u666e\u904d\u6027\u7684\u5c5e\u6027\u66f4\u5feb\u3002\u7136\u800c\uff0c\u4e00\u65e6\u6211\u4eec\u4f7f\u7528\u4e86\u8db3\u591f\u5927\u7684\u6570\u636e\u96c6\uff0c\u6211\u4eec\u5c31\u4f1a\u770b\u5230\u9a8c\u8bc1\u5668\u7684\u5f3a\u5927\u63a8\u52a8\u529b\u3002 </p> <p>\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c175B\u9a8c\u8bc1\u5668\u6bd46B\u9a8c\u8bc1\u5668\u201c\u8d77\u98de\u201d\u5f97\u65e9\uff0c\u9700\u8981\u66f4\u5c11\u7684\u8bad\u7ec3\u95ee\u9898\u624d\u80fd\u8d85\u8fc7\u5fae\u8c03\u57fa\u7ebf\u3002\u9a8c\u8bc1\u8005\u627e\u5230\u7684\u793a\u4f8b\u89e3\u51b3\u65b9\u6848\u89c1\u9644\u5f55D\uff0c\u9a8c\u8bc1\u8005\u7f6e\u4fe1\u5ea6\u53ef\u89c6\u5316\u89c1\u9644\u5f55F\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/gsm8k/training_veriers_to_solve_math_word_problems/#43","title":"4.3 \u9a8c\u8bc1\u6d88\u878d\u5b9e\u9a8c","text":"<p>\u6211\u4eec\u53ef\u4ee5\u8bad\u7ec3\u9a8c\u8bc1\u5668\uff0c\u4ee5\u6574\u4e2a\u751f\u6210\u7684\u89e3\u4e3a\u6761\u4ef6\u8fdb\u884c\u5355\u4e2a\u6807\u91cf\u9884\u6d4b\uff0c\u4e5f\u53ef\u4ee5\u5728\u89e3\u4e2d\u7684\u6bcf\u4e2a\u4ee4\u724c\u4e4b\u540e\u8fdb\u884c\u6807\u91cf\u9884\u6d4b\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u9009\u62e9\u540e\u8005\uff0c\u8bad\u7ec3\u9a8c\u8bc1\u5668\u5728\u6bcf\u4e2a\u4ee4\u724c\u540e\u8fdb\u884c\u9884\u6d4b\u3002\u8fd9\u53ef\u4ee5\u88ab\u89c6\u4e3a\u4e00\u4e2a\u4ee4\u724c\u7ea7\u522b\u7684\u503c\u51fd\u6570\u3002\u6211\u4eec\u5728\u56fe6a\u4e2d\u6bd4\u8f83\u4e86\u8fd9\u4e24\u79cd\u65b9\u6cd5\uff0c\u5206\u522b\u6807\u8bb0\u4e3a\u201c\u89e3\u51b3\u65b9\u6848\u7ea7\u522b\u201d\u548c\u201c\u4ee4\u724c\u7ea7\u522b\u201d\u3002</p> <p>\u9884\u6d4b\u6bcf\u4e2a\u4ee4\u724c\u7684\u503c\u51fd\u6570\u662f\u4e00\u9879\u6bd4\u4ec5\u5224\u65ad\u5b8c\u5168\u5b8c\u6210\u66f4\u5177\u6311\u6218\u6027\u548c\u66f4\u5608\u6742\u7684\u4efb\u52a1\u3002\u7136\u800c\uff0c\u5c3d\u7ba1\u6700\u521d\u7684\u8bad\u7ec3\u901f\u5ea6\u8f83\u6162\uff0c\u4f46\u4ee4\u724c\u7ea7\u9a8c\u8bc1\u5668\u6700\u7ec8\u4ecd\u4f18\u4e8e\u89e3\u51b3\u65b9\u6848\u7ea7\u9a8c\u8bc1\u5668\u3002\u6b64\u5916\uff0c\u4ee4\u724c\u7ea7\u9a8c\u8bc1\u5668\u5728\u8bad\u7ec3\u540e\u671f\u4ecd\u5728\u6539\u8fdb\uff0c\u800c\u89e3\u51b3\u65b9\u6848\u7ea7\u9a8c\u8bc1\u5668\u5219\u5f88\u5feb\u663e\u793a\u51fa\u8fc7\u62df\u5408\u7684\u8ff9\u8c61\u3002\u6211\u4eec\u5047\u8bbe\u5168\u503c\u51fd\u6570\u63d0\u4f9b\u4e86\u4e00\u4e2a\u6709\u7528\u7684\u8f85\u52a9\u4fe1\u53f7\uff0c\u9f13\u52b1\u6a21\u578b\u5728\u6574\u4e2a\u89e3\u51b3\u65b9\u6848\u4e2d\u5224\u65ad\u63a8\u7406\uff0c\u800c\u4e0d\u4ec5\u4ec5\u662f\u8bb0\u5fc6\u6b63\u786e\u7684\u6700\u7ec8\u7b54\u6848\u3002 \u5728\u56fe6b\u4e2d\uff0c\u6211\u4eec\u6d88\u9664\u4e86\u8bad\u7ec3\u9a8c\u8bc1\u8005\u65f6\u4f7f\u7528\u7684\u76ee\u6807\u3002\u5982\u7b2c4.2\u8282\u6240\u8ff0\uff0c\u6211\u4eec\u53ef\u4ee5\u9009\u62e9\u5728\u9a8c\u8bc1\u76ee\u6807\u65c1\u8fb9\u5305\u542b\u8bed\u8a00\u5efa\u6a21\u76ee\u6807\u3002\u6211\u4eec\u5c06\u4f7f\u7528\u8fd9\u4e24\u4e2a\u76ee\u6807\u4e0e\u4ec5\u4f7f\u7528\u9a8c\u8bc1\u76ee\u6807\u8fdb\u884c\u6bd4\u8f83\u3002\u867d\u7136\u4e24\u8005\u90fd\u662f\u5408\u7406\u7684\u9009\u62e9\uff0c\u4f46\u5305\u62ec\u8bed\u8a00\u5efa\u6a21\u76ee\u6807\u5728\u5185\u7684\u4e25\u683c\u6539\u8fdb\u3002\u8fd9\u4f7f\u5f97\u76f4\u89c2\u610f\u4e49\uff1a\u66f4\u597d\u5730\u7406\u89e3\u8fd9\u79cd\u8bed\u8a00\u5206\u5e03\u53ea\u4f1a\u5e2e\u52a9\u9a8c\u8bc1\u8005\u533a\u5206\u6837\u672c\u3002 </p> <p>\u5728\u56fe6c\u4e2d\uff0c\u6211\u4eec\u5206\u522b\u6d88\u878d\u751f\u6210\u5668\u548c\u9a8c\u8bc1\u5668\u7684\u6a21\u578b\u5927\u5c0f\u3002\u6211\u4eec\u53d1\u73b0\uff0c\u4f7f\u7528\u5927\u578b\u751f\u6210\u5668\u548c\u5c0f\u578b\u9a8c\u8bc1\u5668\u7684\u6027\u80fd\u660e\u663e\u4f18\u4e8e\u4f7f\u7528\u5c0f\u578b\u751f\u6210\u5668\u548c\u5927\u578b\u9a8c\u8bc1\u5668\u7684\u6027\u80fd\u3002\u5373\u4f7f\u9a8c\u8bc1\u5668\u6bd4\u751f\u6210\u5668\u5c0f\u5f97\u591a\uff0c\u9a8c\u8bc1\u4ecd\u7136\u975e\u5e38\u6709\u6548\u3002\u8fd9\u8868\u660e\u9a8c\u8bc1\u8005\u53ef\u80fd\u7ecf\u5e38\u4f9d\u8d56\u76f8\u5bf9\u7c97\u7565\u7684\u542f\u53d1\u5f0f\u65b9\u6cd5\u6765\u533a\u5206\u6765\u81ea\u7ed9\u5b9a\u751f\u6210\u5668\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u800c\u4e0d\u662f\u5c1d\u8bd5\u66f4\u5f7b\u5e95\u7684\u9a8c\u8bc1\u5f62\u5f0f\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/gsm8k/training_veriers_to_solve_math_word_problems/#5","title":"5 \u9644\u52a0\u5b9e\u9a8c","text":""},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/gsm8k/training_veriers_to_solve_math_word_problems/#51","title":"5.1 \u6d4b\u8bd5\u65f6\u95f4\u8ba1\u7b97","text":"<p>\u5728\u6d4b\u8bd5\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u9009\u62e9\u751f\u6210\u4efb\u610f\u591a\u4e2a\u89e3\u51b3\u65b9\u6848\uff0c\u7531\u9a8c\u8bc1\u8005\u5728\u9009\u62e9\u6392\u540d\u6700\u9ad8\u7684\u5b8c\u6210\u4e4b\u524d\u8fdb\u884c\u5224\u65ad\u3002\u56fe7a\u663e\u793a\u4e866B\u9a8c\u8bc1\u5668\u7684\u6027\u80fd\u5982\u4f55\u968f\u6bcf\u4e2a\u6d4b\u8bd5\u95ee\u9898\u7684\u5b8c\u6210\u6b21\u6570\u800c\u53d8\u5316\u3002\u5728\u8fd9\u79cd\u89c4\u6a21\u4e0b\uff0c\u968f\u7740\u6211\u4eec\u5c06\u5b8c\u5de5\u6570\u91cf\u589e\u52a0\u5230400\u4e2a\uff0c\u6027\u80fd\u4e5f\u4f1a\u63d0\u9ad8\u3002\u8d85\u8fc7\u8fd9\u4e00\u70b9\uff0c\u6027\u80fd\u5f00\u59cb\u4e0b\u964d\u3002\u8fd9\u8868\u660e\uff0c\u641c\u7d22\u7684\u597d\u5904\u6700\u7ec8\u88ab\u627e\u5230\u6b3a\u9a97\u9a8c\u8bc1\u8005\u7684\u5bf9\u6297\u6027\u89e3\u51b3\u65b9\u6848\u7684\u98ce\u9669\u6240\u62b5\u6d88\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u6211\u4eec\u4f7f\u7528100\u4e2a\u8865\u5168\u6765\u8bc4\u4f30\u9a8c\u8bc1\u5668\u6d4b\u8bd5\u6027\u80fd\uff0c\u56e0\u4e3a\u8fd9\u4ee5\u76f8\u5bf9\u9002\u4e2d\u7684\u8ba1\u7b97\u6210\u672c\u83b7\u5f97\u4e86\u9a8c\u8bc1\u7684\u5927\u90e8\u5206\u597d\u5904\u3002  \u4e3a\u4e86\u8fdb\u4e00\u6b65\u63d0\u9ad8\u6027\u80fd\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u6392\u540d\u9760\u524d\u7684\u9a8c\u8bc1\u8005\u89e3\u51b3\u65b9\u6848\u4e2d\u8fdb\u884c\u591a\u6570\u6295\u7968\uff0c\u800c\u4e0d\u662f\u53ea\u9009\u62e9\u4e00\u4e2a\u9876\u7ea7\u89e3\u51b3\u65b9\u6848\u3002 \u6b64\u6295\u7968\u8fc7\u7a0b\u53ea\u8003\u8651\u5404\u4e2a\u89e3\u51b3\u65b9\u6848\u5f97\u51fa\u7684\u6700\u7ec8\u7b54\u6848\uff1a\u6700\u7ec8\u9009\u62e9\u7684\u7b54\u6848\u662f\u5f97\u7968\u6700\u591a\u7684\u7b54\u6848\u3002\u56fe7b\u663e\u793a\u4e86\u5f53\u6211\u4eec\u5141\u8bb8\u66f4\u591a\u7684\u9876\u7ea7\u6837\u672c\u6295\u7968\u65f6\uff0c\u6027\u80fd\u662f\u5982\u4f55\u53d8\u5316\u7684\u3002\u4e0d\u51fa\u6240\u6599\uff0c\u5f53\u4ece\u66f4\u591a\u7684\u6837\u672c\u5f00\u59cb\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u5141\u8bb8\u66f4\u591a\u7684\u6837\u672c\u8fdb\u884c\u6295\u7968\u3002\u5f53\u6211\u4eec\u53ea\u6709100\u4e2a\u6837\u672c\u65f6\uff0c\u6700\u597d\u53ea\u5141\u8bb8\u524d3-5\u4e2a\u6837\u672c\u6295\u7968\u3002\u5f53\u6211\u4eec\u67093200\u4e2a\u6837\u672c\u65f6\uff0c\u8ba9\u524d30\u540d\u6295\u7968\u5927\u7ea6\u662f\u6700\u4f73\u9009\u62e9\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/gsm8k/training_veriers_to_solve_math_word_problems/#52","title":"5.2 \u89c4\u8303\u5316","text":"<p>\u6211\u4eec\u53d1\u73b0\uff0c\u4f7f\u7528dropout\u4f5c\u4e3a\u6b63\u5219\u5316\u5668\u5bf9\u5fae\u8c03\u548c\u9a8c\u8bc1\u90fd\u6709\u5f88\u5927\u7684\u597d\u5904\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u6211\u4eec\u6cbf\u7740\u7f51\u7edc\u4e2d\u6bcf\u4e00\u5c42\u7684\u6b8b\u5dee\u8def\u5f84\u5e94\u7528\u6b8b\u5deedropout\uff08Vaswani\u7b49\u4eba\uff0c2017\uff09\u3002\u6211\u4eec\u6839\u636e\u8d85\u53c2\u6570\u626b\u63cf\u7684\u7ed3\u679c\u9009\u62e920%\u7684dropout\u7528\u4e8e\u6240\u6709dropout\u5b9e\u9a8c\u3002\u6211\u4eec\u6ce8\u610f\u5230GPT-3\u6a21\u578b\u6ca1\u6709\u9884\u5148\u8bad\u7ec3dropout\u3002\u56e0\u6b64\uff0c\u5bf9\u4e8e\u6d89\u53cadropout\u7684\u5b9e\u9a8c\uff0c\u6211\u4eec\u5728\u968f\u540e\u5fae\u8c03\u6a21\u578b\u4e4b\u524d\uff0c\u4f7f\u7528dropout\u8fdb\u884c\u989d\u5916\u7684\u9884\u8bad\u7ec3\u3002\u8fd9\u51cf\u8f7b\u4e86\u6a21\u578b\u5728\u5fae\u8c03\u8fc7\u7a0b\u4e2d\u7ecf\u5386\u7684\u5206\u5e03\u53d8\u5316\u3002</p> <p>\u6211\u4eec\u9996\u5148\u7814\u7a76\u4e86 dropout \u5bf9\u4e0d\u540c\u8bad\u7ec3\u96c6\u5927\u5c0f\u7684\u5fae\u8c03\u7684\u5f71\u54cd\u3002\u56fe8a\u663e\u793a\uff0cdropout \u5bfc\u81f4\u6bd4\u57fa\u7ebf\u6709\u663e\u8457\u6539\u5584\u3002\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5c06\u7814\u7a76dropout\u5bf9\u9a8c\u8bc1\u5668\u7684\u5f71\u54cd\uff0c\u540c\u65f6\u8003\u8651\u89e3\u51b3\u65b9\u6848\u7ea7\u522b\u548c\u4ee4\u724c\u7ea7\u522b\u7684\u53d8\u91cf\u3002\u5728\u56fe8b\u4e2d\uff0c\u6211\u4eec\u770b\u5230dropout\u663e\u8457\u63d0\u9ad8\u4e86\u89e3\u51b3\u65b9\u6848\u7ea7\u9a8c\u8bc1\u5668\uff0c\u51cf\u8f7b\u4e86\u975e\u6b63\u5219\u5316\u57fa\u7ebf\u4e2d\u53d1\u751f\u7684\u8fc7\u62df\u5408\u3002\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u4f7f\u7528dropout\u548c\u89e3\u51b3\u65b9\u6848\u7ea7\u9a8c\u8bc1\u5668\u53ef\u4ee5\u8fbe\u5230\u4e0e\u4ee4\u724c\u7ea7\u9a8c\u8bc1\u5668\u7c7b\u4f3c\u7684\u6027\u80fd\u6c34\u5e73\u3002\u5728\u56fe8c\u4e2d\uff0c\u6211\u4eec\u5c06dropout\u5e94\u7528\u4e8e\u4ee4\u724c\u7ea7\u9a8c\u8bc1\u5668\u3002\u7531\u4e8e\u4ee4\u724c\u7ea7\u9a8c\u8bc1\u5668\u5df2\u7ecf\u4e0d\u592a\u5bb9\u6613\u8fc7\u62df\u5408\uff0c\u56e0\u6b64dropout\u7684\u5f71\u54cd\u8f83\u5c0f\u4e5f\u5c31\u4e0d\u8db3\u4e3a\u5947\u4e86\u3002\u5c3d\u7ba1\u5982\u6b64\uff0c\u6211\u4eec\u4ecd\u7136\u770b\u5230\uff0c\u901a\u8fc7\u4f7f\u7528dropout\u8bad\u7ec3\u4ee4\u724c\u7ea7\u9a8c\u8bc1\u5668\u7565\u6709\u6536\u83b7\u3002\u8bf7\u6ce8\u610f\uff0c\u6211\u4eec\u5c06\u4ee4\u724c\u7ea7\u9a8c\u8bc1\u5668\u7684\u6279\u5927\u5c0f\u589e\u52a0\u4e864\u500d\uff0c\u4ee5\u66f4\u597d\u5730\u5904\u7406\u66f4\u56f0\u96be\u7684\u76ee\u6807\u548c\u8f8d\u5b66\u5e26\u6765\u7684\u566a\u97f3\u3002 </p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/gsm8k/training_veriers_to_solve_math_word_problems/#6","title":"6 \u7ed3\u8bba","text":"<p>\u6211\u4eec\u5df2\u7ecf\u770b\u5230\uff0c\u76f8\u5bf9\u4e8e\u5fae\u8c03\u57fa\u7ebf\uff0c\u9a8c\u8bc1\u63d0\u4f9b\u4e86\u663e\u8457\u7684\u6027\u80fd\u63d0\u5347\u3002\u5728\u5b8c\u6574\u6570\u636e\u96c6\u4e0a\uff0c6B\u9a8c\u8bc1\u7565\u4f18\u4e8e\u5fae\u8c03\u7684175B\u6a21\u578b\uff0c\u4ece\u800c\u63d0\u4f9b\u4e86\u5927\u7ea6\u76f8\u5f53\u4e8e\u6a21\u578b\u5927\u5c0f\u589e\u52a030\u500d\u7684\u63d0\u5347\u3002\u6211\u4eec\u8fd8\u770b\u5230\uff0c\u4ee4\u724c\u7ea7\u9a8c\u8bc1\u5668\u6bd4\u89e3\u51b3\u65b9\u6848\u7ea7\u9a8c\u8bc1\u5668\u66f4\u4e0d\u5bb9\u6613\u8fc7\u62df\u5408\uff0c\u5e76\u4e14\u6240\u6709\u65b9\u6cd5\u90fd\u53d7\u76ca\u4e8e\u5e26\u6709\u6b8b\u5dee\u4e22\u5f03\u7684\u6b63\u5219\u5316\u3002\u6211\u4eec\u5e0c\u671b\u9a8c\u8bc1\u80fd\u591f\u5f88\u597d\u5730\u6269\u5c55\u5230\u9700\u8981\u66f4\u590d\u6742\u6570\u5b66\u63a8\u7406\u7684\u95ee\u9898\u5206\u5e03\uff0c\u6211\u4eec\u5e0c\u671bGSM8K\u652f\u6301\u5f00\u53d1\u6269\u5c55\u6027\u66f4\u597d\u7684\u65b0\u65b9\u6cd5\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/gsm8k/training_veriers_to_solve_math_word_problems/#_2","title":"\u6570\u636e\u96c6\u8be6\u7ec6\u4fe1\u606f","text":"<p>\u6211\u4eec\u6700\u521d\u901a\u8fc7\u5728Upwork\uff08\u00acUpwork.com\uff09\u4e0a\u96c7\u4f63\u81ea\u7531\u627f\u5305\u5546\u6536\u96c6\u4e861000\u4e2a\u95ee\u9898\u548c\u81ea\u7136\u8bed\u8a00\u89e3\u51b3\u65b9\u6848\u3002\u7136\u540e\uff0c\u6211\u4eec\u4e0e\u81ea\u7136\u8bed\u8a00\u5904\u7406\u6570\u636e\u6807\u7b7e\u5e73\u53f0Surge AI\uff08surgehq.AI\uff09\u5408\u4f5c\uff0c\u6269\u5927\u4e86\u6211\u4eec\u7684\u6570\u636e\u6536\u96c6\u89c4\u6a21\u3002\u5728\u6536\u96c6\u4e86\u5b8c\u6574\u7684\u6570\u636e\u96c6\u540e\uff0c\u6211\u4eec\u8981\u6c42\u5de5\u4eba\u91cd\u65b0\u89e3\u51b3\u6240\u6709\u95ee\u9898\uff0c\u6ca1\u6709\u5de5\u4eba\u91cd\u65b0\u89e3\u51b3\u4ed6\u4eec\u6700\u521d\u5199\u7684\u95ee\u9898\u3002\u6211\u4eec\u68c0\u67e5\u4e86\u4ed6\u4eec\u7684\u6700\u7ec8\u7b54\u6848\u662f\u5426\u4e0e\u6700\u521d\u7684\u89e3\u51b3\u65b9\u6848\u4e00\u81f4\uff0c\u4efb\u4f55\u4ea7\u751f\u5206\u6b67\u7684\u95ee\u9898\u8981\u4e48\u88ab\u4fee\u590d\uff0c\u8981\u4e48\u88ab\u4e22\u5f03\u3002\u7136\u540e\uff0c\u6211\u4eec\u5bf9\u4e00\u5c0f\u90e8\u5206\u95ee\u9898\u8fdb\u884c\u4e86\u53e6\u4e00\u8f6e\u534f\u8bae\u68c0\u67e5\uff0c\u53d1\u73b01.7%\u7684\u95ee\u9898\u4ecd\u7136\u4f1a\u5728\u627f\u5305\u5546\u4e4b\u95f4\u4ea7\u751f\u5206\u6b67\u3002\u6211\u4eec\u4f30\u8ba1\u8fd9\u662f\u5305\u542b\u65ad\u88c2\u9519\u8bef\u6216\u6b67\u4e49\u7684\u95ee\u9898\u7684\u4e00\u90e8\u5206\u3002\u53ef\u80fd\u6709\u66f4\u5927\u6bd4\u4f8b\u7684\u95ee\u9898\u5305\u542b\u5fae\u5999\u7684\u9519\u8bef\u3002 \u4e3a\u4e86\u5e2e\u52a9\u627f\u5305\u5546\u7f16\u5199\u95ee\u9898\uff0c\u6211\u4eec\u63d0\u4f9b\u4e86\u4ece\u51e0\u4e2a\u955c\u5934\u63d0\u793a\u7684175B GPT-3\u6a21\u578b\u81ea\u52a8\u751f\u6210\u7684\u79cd\u5b50\u95ee\u9898\u3002\u627f\u5305\u5546\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u8fd9\u4e9b\u79cd\u5b50\u95ee\u9898\uff0c\u5c06\u5176\u4f5c\u4e3a\u7075\u611f\u5e76\u8fdb\u884c\u4fee\u6539\uff0c\u6216\u8005\u5b8c\u5168\u63d0\u51fa\u81ea\u5df1\u7684\u95ee\u9898\u3002\u6211\u4eec\u6307\u793a\u627f\u5305\u5546\u5728\u89e3\u51b3\u65b9\u6848\u4e2d\u5c3d\u53ef\u80fd\u5177\u6709\u63cf\u8ff0\u6027\uff0c\u5e76\u4e14\u4e0d\u8981\u5728\u4e0d\u540c\u95ee\u9898\u4e4b\u95f4\u91cd\u590d\u4f7f\u7528\u95ee\u9898\u8bbe\u7f6e\u6216\u6a21\u677f\u3002\u4e3a\u4e86\u786e\u4fdd\u627f\u5305\u5546\u4e0d\u4f1a\u91cd\u590d\u4f7f\u7528\u95ee\u9898\u6a21\u677f\uff0c\u6211\u4eec\u8ba1\u7b97\u4e86\u95ee\u9898\u4e4b\u95f4\u7684\u6210\u5bf9\u76f8\u4f3c\u6027\u5f97\u5206\uff0c\u5e76\u4ee5\u6b64\u5411\u627f\u5305\u5546\u63d0\u4f9b\u53cd\u9988\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/gsm8k/training_veriers_to_solve_math_word_problems/#_3","title":"\u8d85\u53c2\u6570","text":"<p>\u6211\u4eec\u5728\u4e0b\u9762\u5217\u51fa\u4e86\u4e00\u4e2a\u91cd\u8981\u7684\u8d85\u53c2\u6570\u8868\u3002\u6211\u4eec\u6839\u636e\u8868\u4e2d\u7684\u503c\u5728\u4e24\u4e2a\u65b9\u5411\u4e0a\u5bf9\u5b66\u4e60\u7387\u548c\u6279\u91cf\u5927\u5c0f\u8fdb\u884c\u4e86\u4e00\u4e2a\u6570\u91cf\u7ea7\u7684\u626b\u63cf\uff0c\u4f46\u6ca1\u6709\u53d1\u73b0\u4efb\u4f55\u663e\u8457\u7684\u6539\u8fdb\u3002\u9a8c\u8bc1\u5668\u6e29\u5ea6\uff08\u4f8b\u5982\uff1a1.0\u800c\u4e0d\u662f0.7\uff09\u548c\u76ee\u6807\uff08\u4ea4\u53c9\u71b5\u800c\u4e0d\u662f\u5747\u65b9\u8bef\u5dee\uff09\u7684\u5176\u4ed6\u5408\u7406\u9009\u62e9\u5bf9\u6211\u4eec\u7684\u6d88\u878d\u5f71\u54cd\u4e5f\u53ef\u4ee5\u5ffd\u7565\u4e0d\u8ba1\u3002 </p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/gsm8k/training_veriers_to_solve_math_word_problems/#_4","title":"\u8ba1\u7b97\u5668\u6ce8\u91ca","text":"<p>\u8ba1\u7b97\u5668\u6ce8\u91ca\u4e0d\u662f\u7531\u4eba\u5de5\u627f\u5305\u5546\u63d0\u4f9b\u7684\uff1a\u5b83\u4eec\u662f\u7531\u786c\u7f16\u7801\u903b\u8f91\u548c\u5fae\u8c03\u7684\u8bed\u8a00\u6a21\u578b\u7ec4\u5408\u751f\u6210\u7684\u3002\u81ea\u52a8\u751f\u6210\u8ba1\u7b97\u5668\u6ce8\u91ca\u7684\u903b\u8f91\u5e76\u4e0d\u5b8c\u7f8e\u3002\u5b83\u4e0d\u592a\u53ef\u80fd\u751f\u6210\u4efb\u4f55\u4e0d\u6b63\u786e\u7684\u6ce8\u91ca\uff0c\u4f46\u5ffd\u7565\u4e00\u4e9b\u53ef\u4ee5\u6ce8\u91ca\u7684\u884c\u5e76\u4e0d\u7f55\u89c1\u3002</p> <p>\u5728\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\uff0c\u5e26\u6ce8\u91ca\u7684\u4ee4\u724c\u548c\u89e3\u51b3\u65b9\u6848\u7684\u5176\u4f59\u90e8\u5206\u4e4b\u95f4\u6ca1\u6709\u7279\u6b8a\u7684\u533a\u522b\uff1a\u5b83\u4eec\u90fd\u53ea\u662f\u4ee4\u724c\u3002\u5728\u6d4b\u8bd5\u8fc7\u7a0b\u4e2d\uff0c\u5f53\u5b58\u5728\u683c\u5f0f\u826f\u597d\u7684\u6ce8\u91ca\u65f6\uff0c\u6211\u4eec\u4f1a\u8986\u76d6\u6a21\u578b\u91c7\u6837\uff0c\u7279\u522b\u662f\u8986\u76d6\u76f4\u63a5\u5728\u201c=\u201d\u540e\u9762\u548c\u00ac&lt;&lt;\u2026&gt;&gt;\u5185\u7684\u6807\u8bb0\u3002 \u4e3a\u4e86\u6a21\u62df\u8ba1\u7b97\u5668\uff0c\u6211\u4eec\u53ea\u9700\u4f7f\u7528python eval\u51fd\u6570\u6765\u8ba1\u7b97\u8868\u8fbe\u5f0f\u4e2d\u7684\u6807\u8bb0\uff08\u56fe9\uff09\u3002\u8d85\u65f6\u6216\u629b\u51fa\u9519\u8bef\u7684\u8bc4\u4f30\u4f1a\u5bfc\u81f4\u8df3\u8fc7\u6ce8\u91ca\uff0c\u5e76\u50cf\u5f80\u5e38\u4e00\u6837\u5bf9\u6a21\u578b\u8fdb\u884c\u91c7\u6837\u3002\u00ac</p> <p>\u6211\u4eec\u6ce8\u610f\u5230\uff0c\u7528\u4e8e\u672c\u6587\u6240\u6709\u7ed3\u679c\u7684\u8ba1\u7b97\u5668\u7684\u539f\u59cb\u7248\u672c\u5b58\u5728\u4e00\u4e9b\u5c0f\u7684\u5b9e\u73b0\u9519\u8bef\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u62a5\u544a\u7684\u6d4b\u8bd5\u6027\u80fd\u7565\u6709\u4f4e\u4f30\uff0c\u5c3d\u7ba1\u5728\u5927\u591a\u6570\u5b9e\u9a8c\u4e2d\uff0c\u8fd9\u79cd\u5dee\u5f02\u7684\u5e45\u5ea6\u4e0d\u52301%\u3002\u4f7f\u7528\u5b8c\u6574\u7684GSM8K\u8bad\u7ec3\u96c6\u65f6\uff0c\u4fee\u590d\u8ba1\u7b97\u5668\u53ef\u5c06\u9a8c\u8bc1\u6d4b\u8bd5\u6027\u80fd\u63d0\u9ad8\u7ea61%\u3002 </p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/gsm8k/training_veriers_to_solve_math_word_problems/#_5","title":"\u793a\u4f8b\u6a21\u578b\u89e3\u51b3\u65b9\u6848","text":"<p>\u6211\u4eec\u5c55\u793a\u4e86\u4e00\u4e9b\u6837\u672c\uff0c\u6bd4\u8f83\u4e866B\u548c175B\u5c3a\u5ea6\u4e0b\u7684\u5fae\u8c03\u548c\u9a8c\u8bc1\u3002\u4e3a\u4e86\u591a\u6837\u6027\uff0c\u5bf9\u6837\u672c\u8fdb\u884c\u4e86\u8f7b\u5fae\u7684\u6311\u9009\u3002  </p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/gsm8k/training_veriers_to_solve_math_word_problems/#_6","title":"\u9a8c\u8bc1\u5668\u8be6\u7ec6\u4fe1\u606f","text":"<p>\u5982\u7b2c4.2\u8282\u6240\u8ff0\uff0c\u9664\u4e86\u539f\u59cb\u8bed\u8a00\u5efa\u6a21\u76ee\u6807\u5916\uff0c\u6211\u4eec\u8fd8\u8bad\u7ec3\u5177\u6709\u8054\u5408\u76ee\u6807\u7684\u9a8c\u8bc1\u5668\uff0c\u5176\u4e2d\u6a21\u578b\u5b66\u4f1a\u5c06\u6a21\u578b\u5b8c\u6210\u6807\u8bb0\u4e3a\u6b63\u786e\u6216\u4e0d\u6b63\u786e\u3002\u4ece\u67b6\u6784\u4e0a\u8bb2\uff0c\u8fd9\u610f\u5473\u7740\u6211\u4eec\u7684\u9a8c\u8bc1\u5668\u662f\u8bed\u8a00\u6a21\u578b\uff0c\u5177\u6709\u4e00\u4e2a\u5c0f\u7684\u6807\u91cf\u5934\uff0c\u53ef\u4ee5\u5728\u6bcf\u4e2a\u4ee4\u724c\u7684\u57fa\u7840\u4e0a\u8f93\u51fa\u9884\u6d4b\u3002</p> <p>\u6211\u4eec\u5c06\u8fd9\u4e2a\u6807\u91cf\u5934\u5b9e\u73b0\u4e3a\u5355\u4e2a\u504f\u7f6e\u53c2\u6570\u548c\u5355\u4e2a\u589e\u76ca\u53c2\u6570\uff0c\u5b83\u4eec\u5bf9\u8bed\u8a00\u6a21\u578b\u6700\u7ec8\u672a\u5d4c\u5165\u5c42\u8f93\u51fa\u7684logits\u8fdb\u884c\u64cd\u4f5c\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u504f\u7f6e\u548c\u589e\u76ca\u4f1a\u79fb\u52a8\u5e76\u7f29\u653e\u4e0e\u8bcd\u6c47\u8868\u4e2d\u7684\u7279\u6b8a\u6807\u8bb0\u76f8\u5bf9\u5e94\u7684logit\u3002\u56e0\u6b64\uff0c\u5176\u4ed6\u4ee4\u724c\u7684logits\u53ef\u4ee5\u7ee7\u7eed\u8868\u793a\u8bed\u8a00\u5efa\u6a21\u76ee\u6807\uff0c\u800c\u8fd9\u4e2a\u7279\u6b8a\u7684\u4ee4\u724c\u662f\u4e3a\u9a8c\u8bc1\u5668\u7684\u9884\u6d4b\u4fdd\u7559\u7684\u3002</p> <p>\u6211\u4eec\u53ef\u4ee5\u9009\u62e9\u4ece\u751f\u6210\u5668\u5fae\u8c03\u7684\u540c\u4e00\u9884\u8bad\u7ec3\u8bed\u8a00\u6a21\u578b\u6216\u751f\u6210\u5668\u672c\u8eab\u521d\u59cb\u5316\u9a8c\u8bc1\u5668\u3002\u5728\u6211\u4eec\u7684\u6d88\u878d\u4e2d\uff0c\u540e\u8005\u7684\u8868\u73b0\u7565\u597d\uff1b\u6211\u4eec\u6000\u7591\u8fd9\u662f\u56e0\u4e3a\u66f4\u597d\u5730\u7406\u89e3\u751f\u6210\u5668\u5b66\u4e60\u7684\u8bed\u8a00\u5206\u5e03\u53ea\u4f1a\u5e2e\u52a9\u9a8c\u8bc1\u5668\u5bf9\u8be5\u5206\u5e03\u4e2d\u7684\u6837\u672c\u8fdb\u884c\u8bc4\u5206\u3002\u9664\u975e\u53e6\u6709\u660e\u786e\u8bf4\u660e\uff0c\u5426\u5219\u5728\u6240\u6709\u5b9e\u9a8c\u4e2d\uff0c\u6211\u4eec\u90fd\u4f1a\u4ece\u76f8\u5e94\u7684\u751f\u6210\u5668\u521d\u59cb\u5316\u9a8c\u8bc1\u5668\u3002</p> <p>\u5f53\u8bad\u7ec3\u5177\u6709\u5171\u540c\u76ee\u6807\u7684\u9a8c\u8bc1\u8005\u65f6\uff0c\u6211\u4eec\u4f7f\u7528\u8bed\u8a00\u6570\u636e\u548c\u9a8c\u8bc1\u8005\u6570\u636e\u7684\u76f8\u7b49\u7ec4\u5408\u3002\u56e0\u4e3a\u6211\u4eec\u5bf9\u6bcf\u4e2a\u539f\u59cb\u8bad\u7ec3\u793a\u4f8b\u7684100\u4e2a\u5b8c\u6210\u8fdb\u884c\u91c7\u6837\u4ee5\u751f\u6210\u9a8c\u8bc1\u5668\u6570\u636e\uff0c\u6240\u4ee5\u4f7f\u7528\u76f8\u7b49\u7684\u6df7\u5408\u610f\u5473\u7740\u6211\u4eec\u6709\u6548\u5730\u5c06\u539f\u59cb\u8bed\u8a00\u6570\u636e\u4e0a\u91c7\u6837\u4e86100\u500d\u3002\u4e3a\u4e86\u5f62\u6210\u8054\u5408\u76ee\u6807\uff0c\u6211\u4eec\u53ea\u9700\u6dfb\u52a0\u9a8c\u8bc1\u8005\u635f\u5931\u548c\u672a\u52a0\u6743\u7684\u8bed\u8a00\u5efa\u6a21\u635f\u5931\uff0c\u5e76\u5c06\u8be5\u8054\u5408\u76ee\u6807\u7684\u4e00\u4e2a\u7eaa\u5143\u5b9a\u4e49\u4e3a\u6bcf\u4e2a\u9a8c\u8bc1\u8005\u793a\u4f8b\u89c1\u8fc7\u4e00\u6b21\u3002\u6709\u4e86\u8fd9\u4e24\u4e2a\u76ee\u6807\uff0c\u6211\u4eec\u5c4f\u853d\u4e86\u95ee\u9898\u4e2d\u7684\u4ee4\u724c\uff0c\u53ea\u5728\u89e3\u51b3\u65b9\u6848\u4e2d\u7684\u4ee4\u724c\u4e0a\u8fdb\u884c\u8bad\u7ec3\uff0c\u5982\u56fe12\u6240\u793a\u3002 </p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/gsm8k/training_veriers_to_solve_math_word_problems/#_7","title":"\u9a8c\u8bc1\u5668\u53ef\u89c6\u5316","text":"<p> \u4ee4\u724c\u7ea7\u9a8c\u8bc1\u5668\u7684\u4e00\u4e2a\u597d\u5904\u662f\uff0c\u8fd9\u4e9b\u6a21\u578b\u53ef\u4ee5\u7acb\u5373\u89e3\u91ca\uff1a\u6211\u4eec\u53ef\u4ee5\u53ef\u89c6\u5316\u6bcf\u4e2a\u4ee4\u724c\u7684\u9884\u6d4b\u503c\uff0c\u66f4\u597d\u5730\u7406\u89e3\u9a8c\u8bc1\u5668\u5982\u4f55\u5224\u65ad\u6837\u672c\u3002\u4e0a\u9762\u6211\u4eec\u5c55\u793a\u4e86\u4e94\u4e2a\u4e0d\u540c\u7cbe\u5fc3\u6311\u9009\u7684\u95ee\u9898\u548c\u6a21\u578b\u5b8c\u6210\u7684\u9884\u6d4b\u503c\u7684\u53ef\u89c6\u5316\uff0c\u7531\u5728\u5b8c\u6574\u8bad\u7ec3\u96c6\u4e0a\u8bad\u7ec3\u7684175B\u4ee4\u724c\u7ea7\u522b\u9a8c\u8bc1\u5668\u9a8c\u8bc1\u3002 \u5728\u53ef\u89c6\u5316\u4e2d\uff0c\u6587\u672c\u7684\u80cc\u666f\u989c\u8272\u5bf9\u5e94\u4e8e\u8be5\u4ee4\u724c\u7684\u9a8c\u8bc1\u5668\u5206\u6570\uff0c\u5176\u4e2d\u7ea2\u8272\u662f\u4f4e\u503c\uff08\u9884\u6d4b\u4e0d\u6b63\u786e\uff09\uff0c\u7eff\u8272\u662f\u4f4e\u503c\u662f\u9ad8\u503c\uff08\u9884\u6d4b\u6b63\u786e\uff09\u3002\u8868\u683c\u7684\u7b2c\u4e8c\u5217\u603b\u7ed3\u4e86\u9a8c\u8bc1\u8005\u7684\u9884\u6d4b\uff0c\u7b2c\u4e09\u5217\u8868\u660e\u751f\u6210\u7684\u6a21\u578b\u5b8c\u6210\u5b9e\u9645\u4e0a\u662f\u6b63\u786e\u7684\u8fd8\u662f\u4e0d\u6b63\u786e\u7684\u3002\u7b2c\u4e8c\u5217\u548c\u7b2c\u4e09\u5217\u4e4b\u95f4\u7684\u4efb\u4f55\u4e0d\u4e00\u81f4\u90fd\u8868\u660e\u9a8c\u8bc1\u8005\u72af\u4e86\u9519\u8bef\u3002 \u7b2c\u4e00\u884c\u5305\u62ec\u4e00\u4e2a\u771f\u6b63\u7684\u6b63\u793a\u4f8b\uff0c\u5176\u4e2d\u9a8c\u8bc1\u5668\u6b63\u786e\u5730\u5c06\u5b8c\u6210\u5206\u7c7b\u4e3a\u6b63\u786e\u3002\u8bf7\u6ce8\u610f\uff0c\u6a21\u578b\u6700\u521d\u4e0d\u786e\u5b9a\u89e3\u662f\u5426\u6b63\u786e\uff0c\u5e76\u968f\u7740\u89e3\u7684\u8fdb\u5c55\u9010\u6e10\u83b7\u5f97\u786e\u5b9a\u6027\uff1a\u8fd9\u53ef\u80fd\u662f\u9a8c\u8bc1\u5668\u8bad\u7ec3\u8fc7\u7a0b\u7684\u4e00\u4e2a\u7279\u6027\uff0c\u5b83\u5728\u5f88\u5927\u4e00\u90e8\u5206\u4e0d\u6b63\u786e\u7684\u6a21\u578b\u751f\u6210\u6837\u672c\u4e0a\u8fdb\u884c\u8bad\u7ec3\u3002 \u7b2c\u4e8c\u884c\u5305\u542b\u4e00\u4e2a\u95ee\u9898\uff0c\u5176\u4e2d\u89e3\u51b3\u65b9\u6848\u662f\u6b63\u786e\u7684\uff0c\u4f46\u9a8c\u8bc1\u8005\u5c06\u5176\u8bc4\u4e3a\u4e0d\u6b63\u786e\u3002\u8fd9\u53ef\u80fd\u662f\u7531\u4e8e\u95ee\u9898\u63cf\u8ff0\u4e2d\u7684\u201c4\u6b21\u201d\u548c\u201c4\u4e2a\u571f\u8c46\u201d\u4e4b\u95f4\u5b58\u5728\u6b67\u4e49\u3002 \u7b2c\u4e09\u884c\u5305\u542b\u53e6\u4e00\u4e2a\u5047\u9634\u6027\u793a\u4f8b\u3002\u7136\u800c\uff0c\u4e0e\u524d\u9762\u7684\u4f8b\u5b50\u4e0d\u540c\uff0c\u8fd9\u91cc\u7684\u6a21\u578b\u5b8c\u6210\u5305\u542b\u4e00\u4e9b\u9519\u8bef\u7684\u63a8\u7406\u3002\u56e0\u6b64\uff0c\u5c3d\u7ba1\u6a21\u578b\u5b8c\u6210\u4e2d\u7684\u6700\u7ec8\u7b54\u6848\u662f\u6b63\u786e\u7684\uff0c\u4f46\u81ea\u7136\u8bed\u8a00\u89e3\u91ca\u662f\u4e0d\u6b63\u786e\u7684\uff0c\u56e0\u6b64\u9a8c\u8bc1\u8005\u6b63\u786e\u5730\u7ed9\u51fa\u4e86\u8f83\u4f4e\u7684\u5206\u6570\u3002 \u5728\u7b2c\u56db\u884c\u4e2d\uff0c\u6211\u4eec\u770b\u5230\u9a8c\u8bc1\u8005\u5bf9\u6a21\u578b\u5b8c\u6210\u5ea6\u8fdb\u884c\u8bc4\u5206\uff0c\u8be5\u6a21\u578b\u5b8c\u6210\u5ea6\u4e00\u5f00\u59cb\u662f\u6b63\u786e\u7684\uff0c\u4f46\u968f\u7740\u89e3\u51b3\u65b9\u6848\u7684\u8fdb\u5c55\uff0c\u9a8c\u8bc1\u8005\u9010\u6e10\u5bf9\u89e3\u51b3\u65b9\u6848\u5931\u53bb\u4fe1\u5fc3\u3002\u5728\u89e3\u51b3\u65b9\u6848\u51fa\u73b0\u660e\u663e\u9519\u8bef\uff08\u8bf4\u82b1\u8d39\u4e8664\u7f8e\u5143\uff0c\u800c\u4e0d\u662f64+16+8=88\u7f8e\u5143\uff09\u540e\uff0c\u9a8c\u8bc1\u8005\u4ee5\u9ad8\u5ea6\u7684\u7f6e\u4fe1\u5ea6\u5224\u65ad\u89e3\u51b3\u65b9\u6848\u4e0d\u6b63\u786e\u3002 \u6700\u540e\u4e00\u884c\u5305\u542b\u4e00\u4e2a\u8bef\u62a5\uff0c\u5373\u6a21\u578b\u5728\u7b2c\u4e8c\u6b65\u51fa\u9519\uff0c\u5373\u4ece\u94bb\u77f3\u73e0\u5b9d\u800c\u4e0d\u662f\u9ec4\u91d1\u73e0\u5b9d\u7684\u4ef7\u683c\u4e2d\u51cf\u53bb400\u3002\u9a8c\u8bc1\u8005\u5076\u5c14\u4f1a\u5728\u5c06\u6570\u91cf\u4e0e\u5176\u5173\u7cfb\u8fdb\u884c\u53d8\u91cf\u7ed1\u5b9a\u65f6\u51fa\u9519\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/math_01/learning_to_automatically_solve_algebra_word_problems/","title":"Learning to Automatically Solve AlgebraWord Problems","text":""},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/math_01/learning_to_automatically_solve_algebra_word_problems/#_1","title":"\u6458\u8981","text":"<p>\u6211\u4eec\u63d0\u51fa\u4e86\u4e00\u79cd\u81ea\u52a8\u5b66\u4e60\u89e3\u51b3\u4ee3\u6570\u5355\u8bcd\u95ee\u9898\u7684\u65b9\u6cd5\u3002\u6211\u4eec\u7684\u7b97\u6cd5\u8de8\u8d8a\u53e5\u5b50\u8fb9\u754c\u8fdb\u884c\u63a8\u7406\uff0c\u4ee5\u6784\u5efa\u548c\u6c42\u89e3\u7ebf\u6027\u65b9\u7a0b\u7ec4\uff0c\u540c\u65f6\u6062\u590d\u8fd9\u4e9b\u65b9\u7a0b\u4e2d\u7684\u53d8\u91cf\u548c\u6570\u5b57\u4e0e\u95ee\u9898\u6587\u672c\u7684\u5bf9\u9f50\u3002\u5b66\u4e60\u7b97\u6cd5\u4f7f\u7528\u4e0d\u540c\u7684\u76d1\u7763\uff0c\u5305\u62ec\u5b8c\u6574\u7684\u65b9\u7a0b\u6216\u53ea\u662f\u6700\u7ec8\u7684\u7b54\u6848\u3002\u6211\u4eec\u8bc4\u4f30\u4e86\u65b0\u6536\u96c6\u7684\u4ee3\u6570\u5355\u8bcd\u95ee\u9898\u8bed\u6599\u5e93\u7684\u6027\u80fd\uff0c\u8bc1\u660e\u8be5\u7cfb\u7edf\u53ef\u4ee5\u6b63\u786e\u56de\u7b54\u6570\u636e\u96c6\u4e2d\u8fd170%\u7684\u95ee\u9898\u3002\u636e\u6211\u4eec\u6240\u77e5\uff0c\u8fd9\u662f\u8fd9\u9879\u4efb\u52a1\u7684\u7b2c\u4e00\u4e2a\u5b66\u4e60\u7ed3\u679c\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/math_01/learning_to_automatically_solve_algebra_word_problems/#1","title":"1 \u4ecb\u7ecd","text":"<p>\u4ee3\u6570\u5355\u8bcd\u95ee\u9898\u7b80\u6d01\u5730\u63cf\u8ff0\u4e86\u4e00\u4e2a\u4e16\u754c\u72b6\u6001\uff0c\u5e76\u63d0\u51fa\u4e86\u5173\u4e8e\u5b83\u7684\u95ee\u9898\u3002\u6240\u63cf\u8ff0\u7684\u72b6\u6001\u53ef\u4ee5\u7528\u4e00\u4e2a\u65b9\u7a0b\u7ec4\u6765\u5efa\u6a21\uff0c\u65b9\u7a0b\u7ec4\u7684\u89e3\u6307\u5b9a\u4e86\u95ee\u9898\u7684\u7b54\u6848\u3002\u4f8b\u5982\uff0c\u56fe1\u663e\u793a\u4e86\u4e00\u4e2a\u8fd9\u6837\u7684\u95ee\u9898\u3002\u8bfb\u8005\u88ab\u8981\u6c42\u6839\u636e\u95e8\u7968\u4ef7\u683c\u548c\u6574\u4f53\u9500\u552e\u989d\u7684\u9650\u5236\u6765\u63a8\u65ad\u6709\u591a\u5c11\u513f\u7ae5\u548c\u6210\u4eba\u8fdb\u5165\u6e38\u4e50\u56ed\u3002\u672c\u6587\u7814\u7a76\u4e86\u4ec5\u4f7f\u7528\u81ea\u7136\u8bed\u8a00\u81ea\u52a8\u89e3\u51b3\u6b64\u7c7b\u95ee\u9898\u7684\u5b66\u4e60\u4efb\u52a1\u3002 </p> <p>\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\u9700\u8981\u8de8\u8d8a\u53e5\u5b50\u8fb9\u754c\u8fdb\u884c\u63a8\u7406\uff0c\u4ee5\u627e\u5230\u4e00\u4e2a\u7b80\u6d01\u5730\u6a21\u62df\u6240\u63cf\u8ff0\u8bed\u4e49\u5173\u7cfb\u7684\u65b9\u7a0b\u7ec4\u3002\u4f8b\u5982\uff0c\u5728\u56fe1\u4e2d\uff0c\u7b2c\u4e8c\u4e2a\u65b9\u7a0b\u5f0f\u4e2d\u7684\u603b\u95e8\u7968\u6536\u5165\u8ba1\u7b97\u603b\u7ed3\u4e86\u7b2c\u4e8c\u3001\u7b2c\u4e09\u548c\u7b2c\u4e94\u4e2a\u65b9\u7a0b\u5f0f\u4e2d\u63cf\u8ff0\u7684\u95e8\u7968\u4ef7\u683c\u548c\u603b\u9500\u552e\u989d\u7684\u4e8b\u5b9e\u53e5\u5b50\u3002\u6b64\u5916\uff0c\u7b2c\u4e00\u4e2a\u65b9\u7a0b\u6a21\u62df\u4e86\u4e00\u79cd\u9690\u542b\u7684\u8bed\u4e49\u5173\u7cfb\uff0c\u5373\u88ab\u63a5\u7eb3\u7684\u513f\u7ae5\u548c\u6210\u5e74\u4eba\u662f\u8fdb\u5165\u516c\u56ed\u7684\u4eba\u7fa4\u4e2d\u4e0d\u76f8\u4ea4\u7684\u5b50\u96c6\u3002</p> <p>\u6211\u4eec\u7684\u6a21\u578b\u5b9a\u4e49\u4e86\u6574\u4e2a\u65b9\u7a0b\u7ec4\u4e0a\u7684\u8054\u5408\u5bf9\u6570\u7ebf\u6027\u5206\u5e03\uff0c\u4ee5\u53ca\u8fd9\u4e9b\u65b9\u7a0b\u4e0e\u6587\u672c\u4e4b\u95f4\u7684\u5bf9\u9f50\u3002\u53ef\u80fd\u65b9\u7a0b\u7684\u7a7a\u95f4\u7531\u4e00\u7ec4\u65b9\u7a0b\u6a21\u677f\u5b9a\u4e49\uff0c\u6211\u4eec\u4ece\u8bad\u7ec3\u793a\u4f8b\u4e2d\u5f52\u7eb3\u51fa\u6765\uff0c\u5176\u4e2d\u6bcf\u4e2a\u6a21\u677f\u90fd\u6709\u4e00\u7ec4\u69fd\u3002\u6570\u5b57\u69fd\u7531\u6587\u672c\u4e2d\u7684\u6570\u5b57\u586b\u5145\uff0c\u672a\u77e5\u69fd\u4e0e\u540d\u8bcd\u5bf9\u9f50\u3002\u4f8b\u5982\uff0c\u56fe1\u4e2d\u7684\u7cfb\u7edf\u662f\u901a\u8fc7\u7528\u56db\u4e2a\u7279\u5b9a\u6570\u5b57 \uff081.5\u30014\u3001278\u548c792\uff09 \u586b\u5145\u4e00\u4e2a\u8fd9\u6837\u7684\u6a21\u677f\u5e76\u5bf9\u9f50\u4e24\u4e2a\u540d\u8bcd \uff08\u201c\u513f\u7ae5\u7968\u201d\u4e2d\u7684\u201c\u7968\u201d\u548c\u201c\u6210\u4eba\u7968\u201d\u4e2d\u201c\u7968\u201d\uff09 \u800c\u751f\u6210\u7684\u3002\u8fd9\u4e9b\u63a8\u65ad\u7684\u5bf9\u5e94\u5173\u7cfb\u7528\u4e8e\u5b9a\u4e49\u8de8\u53e5\u7279\u5f81\uff0c\u4e3a\u6a21\u578b\u63d0\u4f9b\u5168\u5c40\u7ebf\u7d22\u3002\u4f8b\u5982\uff0c\u5728\u6211\u4eec\u7684\u8fd0\u884c\u793a\u4f8b\u4e2d\uff0c\u5b57\u7b26\u4e32\u6210\u5bf9\uff08\u201c1.50\u7f8e\u5143\u201d\uff0c\u201c\u513f\u7ae5\u201d\uff09\u548c\uff08\u201c4\u7f8e\u5143\u201d\uff0c\u201d\u6210\u4eba\u201d\uff09\u90fd\u56f4\u7ed5\u7740\u201c\u6210\u672c\u201d\u4e00\u8bcd\uff0c\u8fd9\u8868\u660e\u4e00\u4e2a\u8f93\u51fa\u65b9\u7a0b\u5305\u542b\u4e24\u4e2a\u5e38\u6570\u53d8\u91cf\u4e58\u79ef\u4e4b\u548c\u3002</p> <p>\u6211\u4eec\u8003\u8651\u5728\u4e24\u4e2a\u4e0d\u540c\u5c42\u6b21\u7684\u76d1\u7763\u4e0b\u5b66\u4e60\u3002\u5728\u7b2c\u4e00\u79cd\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u5047\u8bbe\u53ef\u4ee5\u8bbf\u95ee\u5927\u591a\u6570\u6570\u636e\u7684\u6bcf\u4e2a\u95ee\u9898\u7684\u6570\u503c\u89e3\uff08\u89c1\u56fe1\uff09\uff0c\u4ee5\u53ca\u4e00\u5c0f\u90e8\u5206\u6807\u6709\u5b8c\u6574\u65b9\u7a0b\u7684\u79cd\u5b50\u793a\u4f8b\u3002\u5728\u5b66\u4e60\u8fc7\u7a0b\u4e2d\uff0c\u6c42\u89e3\u8005\u8bc4\u4f30\u76f8\u4e92\u7ade\u4e89\u7684\u5047\u8bbe\u4ee5\u63a8\u52a8\u5b66\u4e60\u8fc7\u7a0b\u3002\u5728\u7b2c\u4e8c\u79cd\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u4e3a\u6bcf\u4e2a\u95ee\u9898\u63d0\u4f9b\u4e86\u4e00\u4e2a\u5b8c\u6574\u7684\u65b9\u7a0b\u7ec4\u3002\u5728\u8fd9\u4e24\u79cd\u60c5\u51b5\u4e0b\uff0c\u53ef\u7528\u7684\u6807\u8bb0\u65b9\u7a0b\uff08\u79cd\u5b50\u96c6\u6216\u5168\u96c6\uff09\u90fd\u88ab\u62bd\u8c61\u51fa\u6765\uff0c\u4ee5\u63d0\u4f9b\u6a21\u578b\u7684\u65b9\u7a0b\u6a21\u677f\uff0c\u800c\u69fd\u586b\u5145\u548c\u5bf9\u9f50\u51b3\u7b56\u662f\u6f5c\u5728\u53d8\u91cf\uff0c\u5176\u8bbe\u7f6e\u662f\u901a\u8fc7\u76f4\u63a5\u4f18\u5316\u8fb9\u9645\u6570\u636e\u5bf9\u6570\u4f3c\u7136\u6027\u6765\u4f30\u8ba1\u7684\u3002</p> <p>\u8be5\u65b9\u6cd5\u5728algebra.com\u4e0a\u6536\u96c6\u7684514\u4e2a\u4ee3\u6570\u5355\u8bcd\u95ee\u9898\u548c\u76f8\u5173\u65b9\u7a0b\u7cfb\u7edf\u7684\u65b0\u8bed\u6599\u5e93\u4e0a\u8fdb\u884c\u4e86\u8bc4\u4f30\u3002\u5728\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\u63d0\u4f9b\u4e86\u5b8c\u6574\u7684\u65b9\u7a0b\uff0c\u6211\u4eec\u7684\u7b97\u6cd5\u6210\u529f\u5730\u89e3\u51b3\u4e86\u6d4b\u8bd5\u96c6\u4e2d69%\u4ee5\u4e0a\u7684\u5355\u8bcd\u95ee\u9898\u3002\u6b64\u5916\uff0c\u6211\u4eec\u53d1\u73b0\u8be5\u7b97\u6cd5\u53ef\u4ee5\u7a33\u5065\u5730\u5904\u7406\u5f31\u76d1\u7763\uff0c\u5f53\u4ec5\u5bf9\u7b54\u6848\u8fdb\u884c\u8bad\u7ec3\u65f6\uff0c\u53ef\u4ee5\u8fbe\u5230\u4e0a\u8ff0\u6027\u80fd\u768470%\u4ee5\u4e0a\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/math_01/learning_to_automatically_solve_algebra_word_problems/#2","title":"2 \u76f8\u5173\u5de5\u4f5c","text":"<p>\u6211\u4eec\u7684\u5de5\u4f5c\u6d89\u53ca\u4e09\u4e2a\u4e3b\u8981\u7814\u7a76\u9886\u57df\uff1a\u60c5\u5883\u8bed\u4e49\u89e3\u91ca\u3001\u4fe1\u606f\u63d0\u53d6\u548c\u81ea\u52a8\u5355\u8bcd\u95ee\u9898\u6c42\u89e3\u5668\u3002</p> <ul> <li>\u60c5\u5883\u8bed\u4e49\u89e3\u91ca\u5728\u5404\u79cd\u5f62\u5f0f\u7684\u76d1\u7763\u4e0b: \u6709\u5927\u91cf\u5173\u4e8e\u5b66\u4e60\u5c06\u81ea\u7136\u8bed\u8a00\u6620\u5c04\u5230\u5f62\u5f0f\u610f\u4e49\u8868\u5f81\u7684\u7814\u7a76\u3002\u5f3a\u5316\u5b66\u4e60\u53ef\u7528\u4e8e\u5b66\u4e60\u5728\u5916\u90e8\u4e16\u754c\u4e2d\u9605\u8bfb\u6307\u4ee4\u548c\u6267\u884c\u52a8\u4f5c\uff08Branavan\u7b49\u4eba\uff0c2009\uff1bBranavan\u7b49\uff0c2010\uff1bVogel\u548cJurafsky\uff0c2010\uff09\u3002\u5176\u4ed6\u65b9\u6cd5\u4f9d\u8d56\u4e8e\u5bf9\u66f4\u6602\u8d35\u7684\u5e26\u6ce8\u91ca\u903b\u8f91\u5f62\u5f0f\u7684\u8bbf\u95ee\uff08Zelle\u548cMooney\uff0c1996\uff1bThompson\u548c\u7a46\u5c3c\uff0c2003\uff1bWong\u548cMooney\uff1bZettlemoyer\u548cCollins\uff0c2005\uff1bKwiatkowski\u7b49\u4eba\uff0c2010\uff09\u3002\u8fd9\u4e9b\u6280\u672f\u6700\u8fd1\u88ab\u63a8\u5e7f\u5230\u4ece\u4e0e\u53d7\u63a7\u5e94\u7528\u7a0b\u5e8f\u7684\u95f4\u63a5\u53cd\u9988\u914d\u5bf9\u7684\u53e5\u5b50\u4e2d\u5b66\u4e60\u3002\u793a\u4f8b\u5305\u62ec\u95ee\u7b54\uff08Clarke\u7b49\u4eba\uff0c2010\uff1bCai\u548cYates\uff0c2013a\uff1bCai\u4e0eYates\uff0c2013.b\uff1bBerant\u7b49\u4eba\uff0c2013\uff1bKwiatkowski\u7b49\u4eba\uff0c2013\uff09\u3001\u5bf9\u8bdd\u7cfb\u7edf\uff08Artzi\u548cZettlemoyer\uff0c2011\uff09\u3001\u673a\u5668\u4eba\u6307\u4ee4\uff08Chen\u548cMooney\uff0c2011\uff1bChen\uff0c2012\uff1bKim\u548cMooney\u7684\uff0c2012\uff1bMatuszek\u7b49\u4eba\uff0c\u00ac\u00ac\u00ac\u00ac2012\uff1bArtzi\u548cZettlemoyer\u7684\uff0c2013\uff09\u548c\u7a0b\u5e8f\u6267\u884c\uff08Kushman\u548cBarzilay\u7684\uff0c2013\uff1bLei\u7b49\uff0c2013\uff09\u3002\u6211\u4eec\u4e13\u6ce8\u4e8e\u4ece\u5404\u79cd\u76d1\u7763\u4e2d\u5b66\u4e60\uff0c\u5305\u62ec\u95ee\u7b54\u548c\u65b9\u7a0b\u7cfb\u7edf\uff0c\u8fd9\u4e24\u8005\u90fd\u53ef\u4ee5\u4ece\u6ce8\u91ca\u8005\u90a3\u91cc\u53ef\u9760\u5730\u83b7\u5f97\uff0c\u65e0\u9700\u8bed\u8a00\u8bad\u7ec3\uff0c\u53ea\u9700\u57fa\u672c\u7684\u6570\u5b66\u77e5\u8bc6\u3002 \u51e0\u4e4e\u6240\u6709\u4e0a\u8ff0\u5de5\u4f5c\u90fd\u662f\u5355\u72ec\u5904\u7406\u5355\u53e5\u3002\u8003\u8651\u591a\u4e2a\u53e5\u5b50\u7684\u6280\u672f\u901a\u5e38\u4ee5\u8fde\u7eed\u7684\u65b9\u5f0f\u8fdb\u884c\uff0c\u7528\u6709\u9650\u7684\u8de8\u53e5\u63a8\u7406\u4f9d\u6b21\u5904\u7406\u6bcf\u4e2a\u53e5\u5b50\uff08Branavan\u7b49\u4eba\uff0c2009\uff1bZettlemoyer\u548cCollins\uff0c2009\uff1bChen\u548cMooney\uff0c2011\uff1bArtzi\u548cZettlemoye\uff0c2013\uff09\u3002\u6211\u4eec\u4e13\u6ce8\u4e8e\u540c\u65f6\u5206\u6790\u591a\u4e2a\u53e5\u5b50\uff0c\u8fd9\u5bf9\u4e8e\u751f\u6210\u4ee3\u6570\u5355\u8bcd\u95ee\u9898\u7b49\u9886\u57df\u4e2d\u5e38\u89c1\u7684\u5168\u5c40\u8bed\u4e49\u8868\u793a\u662f\u5fc5\u8981\u7684\u3002</li> <li>\u4fe1\u606f\u63d0\u53d6: \u6211\u4eec\u7684\u65b9\u6cd5\u4e0e\u57fa\u4e8e\u6a21\u677f\u7684\u4fe1\u606f\u63d0\u53d6\u5de5\u4f5c\u6709\u5173\uff0c\u5176\u76ee\u6807\u662f\u8bc6\u522b\u6587\u672c\u4e2d\u4e8b\u4ef6\u6a21\u677f\u7684\u5b9e\u4f8b\u5e76\u63d0\u53d6\u5176\u586b\u5145\u7b26\u3002\u5927\u591a\u6570\u5de5\u4f5c\u90fd\u96c6\u4e2d\u5728\u76d1\u7763\u60c5\u51b5\u4e0b\uff0c\u5176\u4e2d\u6a21\u677f\u662f\u624b\u52a8\u5b9a\u4e49\u7684\uff0c\u6570\u636e\u7528\u5bf9\u9f50\u4fe1\u606f\u6807\u8bb0\uff0c\u4f8b\u5982\uff08Grishman\u7b49\u4eba\uff0c2005\uff1bMaslennikov\u548cChua\uff0c2007\uff1bJi\u548cGrishman\uff0c2008\uff1bReichart\u548cBarzilay\uff0c2012\uff09\u3002\u7136\u800c\uff0c\u6700\u8fd1\u7684\u4e00\u4e9b\u5de5\u4f5c\u7814\u7a76\u4e86\u4ece\u6570\u636e\u4e2d\u81ea\u52a8\u5f52\u7eb3\u51fa\u4e00\u7ec4\u53ef\u80fd\u7684\u6a21\u677f\uff08Chambers\u548cJurafsky\uff0c2011\uff1bRitter\u7b49\u4eba\uff0c2012\uff09\u3002\u5728\u6211\u4eec\u7684\u65b9\u6cd5\u4e2d\uff0c\u65b9\u7a0b\u7ec4\u76f8\u5bf9\u5bb9\u6613\u6307\u5b9a\uff0c\u63d0\u4f9b\u4e86\u4e00\u79cd\u6a21\u677f\u7ed3\u6784\uff0c\u8fd9\u4e9b\u6a21\u677f\u4e2d\u7684\u69fd\u4e0e\u6587\u672c\u7684\u5bf9\u9f50\u4e3b\u8981\u662f\u5728\u5b66\u4e60\u8fc7\u7a0b\u4e2d\u7528\u6f5c\u5728\u53d8\u91cf\u5efa\u6a21\u7684\u3002\u6b64\u5916\uff0c\u6620\u5c04\u5230\u53ef\u4ee5\u6267\u884c\u7684\u8bed\u4e49\u8868\u793a\u5141\u8bb8\u6211\u4eec\u5728\u5b66\u4e60\u8fc7\u7a0b\u4e2d\u5229\u7528\u8f83\u5f31\u7684\u76d1\u7763\u3002</li> <li>\u81ea\u52a8\u5355\u8bcd\u95ee\u9898\u89e3\u51b3\u5668: \u6700\u540e\uff0c\u5bf9\u81ea\u52a8\u89e3\u51b3\u5404\u79cd\u7c7b\u578b\u7684\u6570\u5b66\u5355\u8bcd\u95ee\u9898\u8fdb\u884c\u4e86\u7814\u7a76\u3002\u73b0\u6709\u7684\u4e3b\u8981\u65b9\u6cd5\u662f\u624b\u5de5\u8bbe\u8ba1\u57fa\u4e8e\u89c4\u5219\u7684\u7cfb\u7edf\u6765\u89e3\u51b3\u7279\u5b9a\u9886\u57df\u7684\u6570\u5b66\u95ee\u9898\uff08Mukherjee\u548cGarain\uff0c2008\uff1bLev\u7b49\u4eba\uff0c2004\uff09\u3002\u6211\u4eec\u7684\u91cd\u70b9\u662f\u5b66\u4e60\u4e00\u4e2a\u6a21\u578b\uff0c\u7528\u4e8e\u89e3\u51b3\u4ec5\u7ed9\u5b9a\u4e0e\u65b9\u7a0b\u6216\u7b54\u6848\u914d\u5bf9\u7684\u95ee\u9898\u8bad\u7ec3\u8bed\u6599\u5e93\u7684\u7aef\u5230\u7aef\u4efb\u52a1\u3002</li> </ul>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/math_01/learning_to_automatically_solve_algebra_word_problems/#3","title":"3 \u5c06\u5355\u8bcd\u95ee\u9898\u6620\u5c04\u5230\u65b9\u7a0b\u5f0f","text":"<p>\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a\u4e24\u6b65\u8fc7\u7a0b\uff0c\u5c06\u5355\u8bcd\u95ee\u9898\u6620\u5c04\u5230\u65b9\u7a0b\u3002\u9996\u5148\uff0c\u9009\u62e9\u4e00\u4e2a\u6a21\u677f\u6765\u5b9a\u4e49\u65b9\u7a0b\u7cfb\u7edf\u7684\u6574\u4f53\u7ed3\u6784\u3002\u63a5\u4e0b\u6765\uff0c\u4f7f\u7528\u6587\u672c\u4e2d\u7684\u6570\u5b57\u548c\u540d\u8bcd\u5b9e\u4f8b\u5316\u6a21\u677f\u3002\u5728\u63a8\u7406\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u5171\u540c\u8003\u8651\u8fd9\u4e24\u4e2a\u6b65\u9aa4\u3002 </p> <p>\u56fe2\u663e\u793a\u4e86\u4e24\u4e2a\u63a8\u5bfc\u7684\u4e24\u4e2a\u6b65\u9aa4\u3002\u6a21\u677f\u89c4\u5b9a\u4e86\u7cfb\u7edf\u4e2d\u65b9\u7a0b\u7684\u5f62\u5f0f\u4ee5\u53ca\u6bcf\u4e2a\u65b9\u7a0b\u4e2d\u7684\u69fd\u7c7b\u578b\uff1a\\(u\\) \u69fd\u8868\u793a\u672a\u77e5\u6570\uff0c\\(n\\) \u69fd\u8868\u793a\u5fc5\u987b\u4ece\u6587\u672c\u4e2d\u586b\u5199\u7684\u6570\u5b57\u3002\u5728\u63a8\u5bfc1\u4e2d\uff0c\u6240\u9009\u6a21\u677f\u6709\u4e24\u4e2a\u672a\u77e5\u69fd \\(u1\\) \u548c \\(u2\\)\uff0c\u4ee5\u53ca\u56db\u4e2a\u6570\u5b57\u69fd \\(n1\\) \u5230 \\(n4\\)\u3002\u69fd\u53ef\u4ee5\u5728\u65b9\u7a0b\u4e4b\u95f4\u5171\u4eab\uff0c\u4f8b\u5982\uff0c\u793a\u4f8b\u4e2d\u7684\u672a\u77e5\u69fd \\(u1\\) \u548c \\(u2\\) \u51fa\u73b0\u5728\u4e24\u4e2a\u65b9\u7a0b\u4e2d\u3002\u4e00\u4e2a\u63d2\u69fd\u5728\u95ee\u9898\u4e2d\u53ef\u80fd\u6709\u4e0d\u540c\u7684\u5355\u8bcd\uff08\u5355\u8bcd\u201c\u901f\u5ea6\u201d\u7684\u4e0d\u540c\u51fa\u73b0\u6b21\u6570\uff09\u3002\u8fd9\u5141\u8bb8\u5728\u81ea\u7136\u8bed\u8a00\u548c\u7cfb\u7edf\u6a21\u677f\u4e4b\u95f4\u8fdb\u884c\u66f4\u7d27\u5bc6\u7684\u6620\u5c04\uff0c\u5176\u4e2d\u4e0e\u6a21\u677f\u4e2d\u7684\u7b2c\u4e00\u4e2a\u65b9\u7a0b\u5bf9\u9f50\u7684\u5355\u8bcd\u6765\u81ea\u524d\u4e24\u53e5\u8bdd\uff0c\u4e0e\u7b2c\u4e8c\u4e2a\u65b9\u7a0b\u5f0f\u5bf9\u9f50\u7684\u5355\u8bcd\u6765\u6e90\u4e8e\u7b2c\u4e09\u4e2a\u53e5\u5b50\u3002 \u6211\u4eec\u6bcf\u4e2a\u69fd\u4f4d\u5b9e\u4f8b\u6620\u5c04\u5230\u95ee\u9898\u4e2d\u7684\u6bcf\u4e00\u4e2a\u5355\u8bcd\u3002\u6bcf\u4e2a\u6570\u5b57\u69fd \\(n\\) \u4e0e\u4e00\u4e2a\u6570\u5b57\u5bf9\u9f50\uff0c\u6bcf\u4e2a\u672a\u77e5\u69fd \\(u\\) \u4e0e\u4e00\u4e2a\u540d\u8bcd\u5bf9\u9f50\u3002\u4f8b\u5982\uff0c\u5bfc\u65701\u5c06\u6570\u5b57278\u4e0e \\(n1\\) \u30011.50\u4e0e \\(n2\\)\u30014\u4e0e\\(n3\\)\u548c792\u4e0e\\(n4\\)\u5bf9\u9f50\u3002\u5b83\u8fd8\u5c06\\(u1\\)\u7684\u4e24\u4e2a\u5b9e\u4f8b\uff08\u4f8b\u5982\\(u1\\)\u548c\\(u2\\)\uff09\u4e0e\u201c\u7968\u201d\u5bf9\u9f50\uff0c\u5c06\\(u2\\)\u7684\u4e24\u4e2a\u4f8b\u5b50\u4e0e\u201c\u7968\u201c\u5bf9\u9f50\u3002\u76f8\u6bd4\u4e4b\u4e0b\uff0c\u5728\u63a8\u5bfc2\u4e2d\uff0c\u76f8\u540c\u672a\u77e5\u69fd\u7684\u5b9e\u4f8b\uff08\u4f8b\u5982\\(u1\\)\u548c\\(u2\\)\uff09\u88ab\u5bf9\u9f50\u4e3a\u4e24\u4e2a\u5728\u81ea\u7136\u8bed\u8a00\u548c\u7cfb\u7edf\u6a21\u677f\u4e4b\u95f4\u8fdb\u884c\u66f4\u7d27\u5bc6\u7684\u6620\u5c04\uff0c\u5176\u4e2d\u4e0e\u6a21\u677f\u4e2d\u7684\u7b2c\u4e00\u4e2a\u65b9\u7a0b\u5bf9\u9f50\u7684\u5355\u8bcd\u6765\u81ea\u524d\u4e24\u53e5\u8bdd\uff0c\u4e0e\u7b2c\u4e8c\u4e2a\u65b9\u7a0b\u5f0f\u5bf9\u9f50\u7684\u5355\u8bcd\u6765\u6e90\u4e8e\u7b2c\u4e09\u4e2a\u53e5\u5b50\u3002 \u7ed9\u5b9a\u5bf9\u9f50\u65b9\u5f0f\uff0c\u7136\u540e\u53ef\u4ee5\u5b9e\u4f8b\u5316\u6a21\u677f\uff1a\u6bcf\u4e2a\u6570\u5b57\u69fd\\(n\\)\u90fd\u66ff\u6362\u4e3a\u793a\u4f8b\u4e2d\\(u1\\)\u7684\u4f4d\u7f6e\u3002\u6211\u4eec\u5c06\u6bcf\u4e2a\u69fd\u5b9e\u4f8b\u4e0e\u53d8\u91cfa\u4e2d\u7684\u4e00\u4e2a\u5355\u8bcd\u5bf9\u9f50\u3002\u7136\u540e\u81ea\u52a8\u6c42\u89e3\u8be5\u8f93\u51fa\u65b9\u7a0b\u7ec4\u4ee5\u751f\u6210\u6700\u7ec8\u7b54\u6848\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/math_01/learning_to_automatically_solve_algebra_word_problems/#31","title":"3.1 \u5bfc\u6570","text":"<ul> <li>\u5b9a\u4e49\uff1a\u8bbeX\u4e3a\u6240\u6709\u5355\u8bcd\u95ee\u9898\u7684\u96c6\u5408\u3002\u4e00\u4e2a\u5355\u8bcd\u95ee\u9898 \\(x \\in X\\) \u662fk\u4e2a\u5355\u8bcd\u7684\u5e8f\u5217 \\(&lt;w_1,\\cdots, w_k&gt;\\)\u3002\u6b64\u5916\uff0c\u5c06\u65b9\u7a0b\u6a21\u677f  \\(t\\) \u5b9a\u4e49\u4e3a\u516c\u5f0f \\(A=B\\)\uff0c\u5176\u4e2d \\(A\\) \u548c \\(B\\) \u662f\u8868\u8fbe\u5f0f\u3002\u8868\u8fbe\u5f0f \\(A\\) \u662f\u4ee5\u4e0b\u4e4b\u4e00\uff1a</li> <li>\u4e00\u4e2a\u6570\u5b57\u5e38\u6570 \\(f\\)\u3002</li> <li>\u6570\u5b57\u69fd \\(n\\)\u3002</li> <li>\u4e00\u4e2a\u672a\u77e5\u7684\u63d2\u69fdu\u3002</li> <li>\u6570\u5b66\u5173\u7cfb\u5f0fR\u7684\u5e94\u7528\u4e24\u4e2a\u8868\u8fbe\u5f0f\uff08\u4f8b\u5982 \\(n_1 \\times n_2\\)\uff09\u3002</li> </ul> <p>\u6211\u4eec\u5c06\u7cfb\u7edf\u6a21\u677f \\(T\\) \u5b9a\u4e49\u4e3a\u4e00\u7ec4l\u4e2a\u65b9\u7a0b\u6a21\u677f \\(\\{t_0, \\cdots, t_1\\}\\)\u3002\\(T\\) \u662f\u4e00\u7ec4\u6e38\u4e50\u56ed\u51fa\u552e\u4e24\u79cd\u95e8\u7968\u3002\u513f\u7ae5\u79681.5\u7f8e\u5143\u3002\u6210\u4eba\u79684\u7f8e\u5143\u3002\u67d0\u4e00\u5929\uff0c278\u4eba\u8fdb\u5165\u516c\u56ed\u3002\u540c\u4e00\u5929\uff0c\u6536\u53d6\u7684\u5165\u573a\u8d39\u603b\u8ba1792\u7f8e\u5143\u3002\u90a3\u5929\u6709\u591a\u5c11\u5b69\u5b50\u5165\u9662\uff1f\u6709\u591a\u5c11\u6210\u5e74\u4eba\u88ab\u5f55\u53d6\uff1f</p> <p>\u4e00\u4e2a\u69fd\u53ef\u4ee5\u5728\u7cfb\u7edf\u6a21\u677f\u4e2d\u51fa\u73b0\u591a\u6b21\uff0c\u4ee5\u5141\u8bb8\u5728\u4e0d\u540c\u7684\u65b9\u7a0b\u4e2d\u91cd\u7528\u53d8\u91cf\u3002\u6211\u4eec\u5c06\u63d2\u69fd\u7684\u7279\u5b9a\u5b9e\u4f8b \\(i\\)\uff08\u4f8b\u5982\\(u\\)\uff09\u8868\u793a\u4e3a \\(u_i\\)\u3002\u4e3a\u4e86\u7b80\u6d01\u8d77\u89c1\uff0c\u5f53\u4e00\u4e2a\u63d2\u69fd\u00ac\u53ea\u51fa\u73b0\u4e00\u6b21\u65f6\uff0c\u6211\u4eec\u7701\u7565\u4e86\u5b9e\u4f8b\u7d22\u5f15\u3002\u4e3a\u4e86\u6355\u6349x\u7684\u6587\u672c\u548c\u6a21\u677fT\u4e4b\u95f4\u7684\u5bf9\u5e94\u5173\u7cfb\uff0c\u6211\u4eec\u5c06\u5bf9\u9f50p\u5b9a\u4e49\u4e3a\u4e00\u7ec4\u5bf9\uff08w\uff0cs\uff09\uff0c\u5176\u4e2dw\u662fx\u4e2d\u7684\u6807\u8bb0\uff0cs\u662fT\u4e2d\u7684\u69fd\u5b9e\u4f8b\u3002</p> <p>\u6839\u636e\u4e0a\u8ff0\u5b9a\u4e49\uff0c\u53ef\u4ee5\u4ece\u6a21\u677ft\u6784\u5efa\u65b9\u7a0be\uff0c\u5176\u4e2d\u6bcf\u4e2a\u6570\u5b57\u69fdn\u88ab\u66ff\u6362\u4e3a\u5b9e\u6570\uff0c\u6bcf\u4e2a\u672a\u77e5\u69fd\u00acu\u88ab\u66ff\u6362\u4e3a\u53d8\u91cf\uff0c\u6bcf\u4e2a\u6570\u5b57\u5e38\u6570f\u4fdd\u6301\u4e0d\u53d8\u3002\u6211\u4eec\u79f0\u4e4b\u4e3a\u5c06\u6a21\u677f\u8f6c\u6362\u4e3a\u65b9\u7a0b\u6a21\u677f\u5b9e\u4f8b\u5316\u7684\u8fc7\u7a0b\u3002\u7c7b\u4f3c\u5730\uff0c\u65b9\u7a0b\u7cfb\u7edfE\u662f\u4e00\u7ec4l\u4e2a\u65b9\u7a0b{e0\uff0c\u2026\uff0cEL}\uff0c\u53ef\u4ee5\u901a\u8fc7\u5728\u7cfb\u7edf\u6a21\u677fT\u4e2d\u5b9e\u4f8b\u5316\u6bcf\u4e2a\u65b9\u7a0b\u6a21\u677f\u6765\u6784\u9020\u3002\u6700\u540e\uff0c\u7b54\u6848a\u662f\u5b9e\u6570\u7684\u5143\u7ec4\u3002 \u6211\u4eec\u5c06\u4ece\u5355\u8bcd\u95ee\u9898\u5230\u7b54\u6848\u7684\u5bfc\u6570y\u5b9a\u4e49\u4e3a\u5143\u7ec4 \\(T,p,a\\)\uff0c\u5176\u4e2dT\u662f\u6240\u9009\u7684\u7cfb\u7edf\u6a21\u677f\uff0cp\u662fT\u548cx\u4e4b\u95f4\u7684\u5bf9\u9f50\uff0ca\u662f\u901a\u8fc7\u4f7f\u7528x\u5230p\u5b9e\u4f8b\u5316T\u5e76\u6c42\u89e3\u751f\u6210\u7684\u65b9\u7a0b\u800c\u751f\u6210\u7684\u7b54\u6848\u3002\u8bbeY\u4e3a\u6240\u6709\u5bfc\u6570\u7684\u96c6\u5408\u3002 * \u53ef\u80fd\u63a8\u5bfc\u7684\u7a7a\u95f4: \u6211\u4eec\u7684\u76ee\u6807\u662f\u5c06\u6bcf\u4e2a\u5355\u8bcd\u95ee\u9898x\u6620\u5c04\u5230\u4e00\u4e2a\u65b9\u7a0b\u7ec4E.\u6240\u8003\u8651\u7684\u65b9\u7a0b\u7ec4\u7684\u7a7a\u95f4\u7531\u4e00\u7ec4\u53ef\u80fd\u7684\u7cfb\u7edf\u6a21\u677fT\u5b9a\u4e49\u5b57\uff08\u7a81\u51fa\u663e\u793a\uff09\u53ef\u4ee5\u4e0e\u6570\u5b57\u69fdni\u5bf9\u9f50\u3002\u6bcf\u4e2a\u6570\u5b57\u69fdn\u2208T\u53ef\u4ee5\u4e0e\u6587\u672c\u4e2d\u7684\u4efb\u4f55\u6570\u5b57\u5bf9\u9f50\uff0c\u6570\u5b57\u8bcd\u53ea\u80fd\u4e0e\u5355\u4e2a\u69fdn\u5bf9\u9f50\uff0c\u5e76\u4e14\u5fc5\u987b\u4e0e\u8be5\u69fd\u7684\u6240\u6709\u5b9e\u4f8b\u5bf9\u9f50\u3002\u6b64\u5916\uff0c\u672a\u77e5\u7684\u69fd\u5b9e\u4f8bu\u2208T\u53ea\u80fd\u4e0e\u540d\u8bcd\u8bcd\u5bf9\u9f50\u3002\u4e00\u4e2a\u5b8c\u6574\u7684\u63a8\u5bfc\u5c06T\u4e2d\u7684\u6240\u6709\u69fd\u4e0ex\u4e2d\u7684\u5355\u8bcd\u914d\u5bf9\u3002</p> <p>\u56fe3\u663e\u793a\u4e86\u56fe2\u4e2d\u7b2c\u4e00\u4e2a\u95ee\u9898\u548c\u7cfb\u7edf\u6a21\u677f\u7684\u53ef\u80fd\u5bf9\u9f50\u7a7a\u95f4\u3002\u540d\u8bcd\uff08\u4ee5\u9ed1\u4f53\u663e\u793a\uff09\u53ef\u4ee5\u4e0e\u6240\u9009\u6a21\u677f\u4e2d\u7684\u4efb\u4f55\u672a\u77e5\u69fd\u5b9e\u4f8b\u5bf9\u9f50\uff08\u6240\u9009\u6a21\u677f\u7684u1\u3001u2\u3001u1\u548cu2\uff09\u3002\u6570\u5b57\uff08\u7a81\u51fa\u663e\u793a\uff09\u53ef\u4ee5\u4e0e\u4efb\u4f55\u6570\u5b57\u69fd\uff08\u6a21\u677f\u4e2d\u7684n1\u3001n2\u3001n3\u548cn4\uff09\u5bf9\u9f50\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/math_01/learning_to_automatically_solve_algebra_word_problems/#32","title":"3.2 \u6982\u7387\u6a21\u578b","text":"<p>\u7531\u4e8e\u5728\u9009\u62e9\u7cfb\u7edf\u00ac\u6a21\u677f\u548c\u5bf9\u9f50\u65f6\u5b58\u5728\u6b67\u4e49\uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u5355\u8bcd\u95ee\u9898x\u2208x\uff0c\u90fd\u4f1a\u6709\u8bb8\u591a\u53ef\u80fd\u7684\u5bfc\u6570y\u2208y\u3002\u6211\u4eec\u00ac\u4f7f\u7528\u5177\u6709\u7279\u5f81\u00ac\u51fd\u6570\u03c6\uff1ax\u00d7y\u7684\u5bf9\u6570\u7ebf\u6027\u6a21\u578b\u6765\u533a\u5206\u7ade\u4e89\u5206\u6790\u2192 Rd\u548c\u53c2\u6570\u5411\u91cf\u03b8\u2208Rd\u3002\u7ed9\u5b9a\u95ee\u9898x\u7684\u5bfc\u6570y\u7684\u6982\u7387\u5b9a\u4e49\u4e3a\uff1a e\u03b8\u00b7\u03c6\uff08x\uff0cy\uff09</p> <p>\u4ee5\u53ca\u539f\u59cb\u95ee\u9898x\u4e2d\u53ef\u7528\u4e8e\u586b\u5145\u69fd\u7684\u5355\u8bcd\u3002\u5728\u5b9e\u8df5\u4e2d\uff0c\u6211\u4eec\u6839\u636e\u8bad\u7ec3\u6570\u636e\u751f\u6210T\uff0c\u5982\u7b2c-\u00ac</p> <p>p\uff08y|x\uff1b\u03b8\uff09=</p> <p>\u03a3 y\u2208y</p> <p>e\u03b8\u00b7\u03c6\uff08x\uff0cy\uff09</p> <p>\u7b2c4.1\u6761\u3002\u7ed9\u5b9a\u4e00\u4e2a\u7cfb\u7edf\u6a21\u677fT\u2208T\uff0c\u6211\u4eec\u5728T\u548cx\u4e4b\u95f4\u521b\u5efa\u4e00\u4e2a\u5bf9\u9f50p\u3002\u53ef\u80fd\u7684\u5bf9\u9f50\u5bf9\u7684\u96c6\u5408\u88ab\u7ea6\u675f\u5982\u4e0b-\u7b2c6\u8282\u5b9a\u4e49\u4e86\u6240\u4f7f\u7528\u7684\u5168\u5957\u529f\u80fd\u3002 \u6d4b\u8bd5\u65f6\u7684\u63a8\u7406\u95ee\u9898\u8981\u6c42\u6211\u4eec\u627e\u5230\u7ed9\u5b9a\u95ee\u9898\u6700\u53ef\u80fd\u7684\u7b54\u6848</p> <p>x\u3001 \u5047\u8bbe\u53c2\u6570\u03b8\u5df2\u77e5\uff1a f\uff08x\uff09=arg\u6700\u5927\u503cp\uff08a|x\uff1b\u03b8\uff09 \u4e00 \u5728   \u8fd9\u91cc\uff0c\u7b54\u6848\u7684\u6982\u7387     \u5728\u6a21\u677f\u9009\u62e9\u548c\u5bf9\u9f50\u65b9\u9762\u88ab\u8fb9\u7f18\u5316 \u4e86   \uff1a</p> <p>p\uff08a|x\uff1b\u03b8\uff09=   \u2211 y\u2208y s.t.AN\uff08y\uff09=a</p> <p>p\uff08y|x\uff1b\u03b8\uff09    \uff081\uff09</p> <p>\u5176\u4e2dAN\uff08y\uff09\u4ece\u5bfc\u6570\u00acy\u4e2d\u63d0\u53d6\u7b54\u6848a\u3002\u8fd9\u6837\uff0c\u5bfc\u6570\u00acy\u4e0a\u7684\u5206\u5e03\u88ab\u5efa\u6a21\u4e3a\u6f5c\u5728\u53d8\u91cf\u3002\u6211\u4eec\u4f7f\u7528\u6ce2\u675f\u641c\u7d22\u63a8\u7406\u7a0b\u5e8f\u6765\u8fd1\u4f3c\u8ba1\u7b97\u65b9\u7a0b1\uff0c\u5982\u7b2c5\u8282\u6240\u8ff0\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/math_01/learning_to_automatically_solve_algebra_word_problems/#4","title":"4 \u5b66\u4e60","text":"<p>\u4e3a\u4e86\u5b66\u4e60\u6211\u4eec\u7684\u6a21\u578b\uff0c\u6211\u4eec\u9700\u8981\u5728T\u4e2d\u5f52\u7eb3\u7cfb\u7edf\u6a21\u677f\u7684\u7ed3\u6784\uff0c\u5e76\u4f30\u8ba1\u6a21\u578b\u53c2\u6570\u03b8\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/math_01/learning_to_automatically_solve_algebra_word_problems/#41","title":"4.1 \u6a21\u677f\u5f52\u7eb3","text":"<p>\u5f53\u63d0\u4f9b\u5bf9\u4e00\u7ec4n\u4e2a\u8bad\u7ec3\u793a\u4f8b\u7684\u8bbf\u95ee\u65f6\uff0c\u53ef\u4ee5\u751f\u6210\u7cfb\u7edf\u6a21\u677fT {\uff08xi\uff0cEi\uff09\uff1ai=1\uff0c\u2026\uff0cn}\uff0c\u5176\u4e2dxi\u662f\u4e00\u4e2a\u8bcd\u3002\u6211\u4eec\u901a\u8fc7\u6700\u5927\u5316\u6570\u636e\u7684\u6761\u4ef6\u5bf9\u6570\u4f3c\u7136\u6765\u4f30\u8ba1\u03b8\uff0c\u5e76\u5bf9\u6240\u6709\u6709\u6548\u5bfc\u6570\u8fdb\u884c\u8fb9\u7f18\u5316\uff1a</p> <p>Ei\u662f\u4e00\u7ec4\u65b9\u7a0b\u3002\u6211\u4eec\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u5c06\u00ac\u6bcf\u4e2aE\u63a8\u5e7f\u5230\u7cfb\u7edf\u6a21\u677fT\uff1a\uff08a\uff09\u7528\u672a\u77e5\u69fd\u66ff\u6362\u6bcf\u4e2a\u53d8\u91cf\uff0c\u4ee5\u53ca\uff08b\uff09\u00ac\u7528a\u66ff\u6362\u6587\u672c\u4e2d\u63d0\u5230\u7684\u6bcf\u4e2a\u6570\u5b57</p> <p>O=\u2211 \u6211</p> <p>\u03a3 y\u2208y s.t.Vi\uff08y\uff09=1</p> <p>\u5bf9\u6570p\uff08y|neneneba xi\uff1b\u03b8\uff09</p> <p>\u53f7\u7801\u69fd\u3002\u95ee\u9898\u6587\u672c\u4e2d\u672a\u63d0\u53ca\u7684\u6570\u5b57\u5c06\u4f5c\u4e3a\u5e38\u91cf\u4fdd\u7559\u5728\u6a21\u677f\u4e2d\u3002\u8fd9\u4f7f\u6211\u4eec\u80fd\u591f\u89e3\u51b3\u9700\u8981\u95ee\u9898\u8bed\u4e49\u6240\u9690\u542b\u7684\u6570\u5b57\u7684\u95ee\u9898\uff0c\u800c\u4e0d\u662f\u00ac\u6211\u4eec\u4f7f\u7528L-BFGS\uff08Nocedal\u548cWright\uff0c2006\uff09\u6765\u4f18\u5316\u53c2\u6570\u3002\u5355\u4e2a\u53c2\u6570\u00ac\u03b8j\u7684\u68af\u5ea6\u7531\u4e0b\u5f0f\u7ed9\u51fa\uff1a</p> <p>\u800c\u4e0d\u662f\u76f4\u63a5\u51fa\u73b0\u5728\u6587\u672c\u4e2d\uff0c\u5982\u56fe4\u4e2d\u7684\u767e\u5206\u6bd4\u95ee\u9898\u3002\u00ac</p> <p>\u2202O=\u2211 \u2202\u03b8j i</p> <p>Ep\uff08y|neneneba xi\uff0cVi\uff08y\uff09\uff1d1\uff1b\u03b8)</p> <p>[\u03c6j</p> <p>\uff08xi\uff0cy\uff09]\u2212</p> <p>2.</p> <p>4.2 \u53c2\u6570\u4f30\u8ba1 \u5bf9\u4e8e\u53c2\u6570\u4f30\u8ba1\uff0c\u6211\u4eec\u5047\u8bbe\u8bbf\u95een\u4e2a\u8bad\u7ec3\u793a\u4f8b{\uff08xi\uff0cVi\uff09\uff1ai\uff1d1\uff0c\u2026\uff0cn}\uff0c\u6bcf\u4e2a\u8bad\u7ec3\u793a\u4f8b\u90fd\u5305\u542b\u5355\u8bcd\u95ee\u9898xi\u548c\u9a8c\u8bc1\u51fd\u6570Vi\u3002\u9a8c\u8bc1\u51fd\u6570V:Y\u2192 {0,1}\u5982\u679c\u5bfc\u6570y\u2208y\u6b63\u786e\uff0c\u5219\u5c06\u5176\u6620\u5c04\u4e3a1\uff0c\u5426\u5219\u6620\u5c04\u4e3a0\u3002 \u6211\u4eec\u53ef\u4ee5\u6539\u53d8\u9a8c\u8bc1\u529f\u80fd\uff0c\u4ece\u4e0d\u540c\u7c7b\u578b\u7684\u76d1\u7763\u4e2d\u5b66\u4e60\u3002\u5728\u7b2c8\u8282\u4e2d\uff0c\u6211\u4eec\u5c06\u4f7f\u7528\u9a8c\u8bc1\u51fd\u6570\u6765\u68c0\u67e5\u5bfc\u6570\u00acy\u662f\u5426\u5177\u6709\uff081\uff09\u6b63\u786e\u7684\u65b9\u7a0b\u7ec4\u00acE\uff0c\u6216\uff082\uff09\u6b63\u786e\u7684\u7b54\u6848\u00aca\u3002\u6b64\u5916\uff0c\u5728\u6570\u636e\u7684\u4e0d\u540c\u5b50\u96c6\u4e0a\u4f7f\u7528\u4e0d\u540c\u7c7b\u578b\u7684\u9a8c\u8bc1\u51fd\u6570\u53ef\u4ee5\u5b9e\u73b0\u534a\u76d1\u7763\u5b66\u4e60\u3002\u8fd9\u79cd\u65b9\u6cd5\u4e0eArtzi\u548cZettlemoyer \uff082013\uff09\u6709\u5173\u3002</p> <p>Ep\uff08y|neneneba xi\uff1b\u03b8\uff09[\u03c6j\uff08xi\uff0cy\uff09] \u7b2c5\u8282\u63cf\u8ff0\u4e86\u6211\u4eec\u5982\u4f55\u4f7f\u7528\u6ce2\u675f\u641c\u7d22\u6765\u8fd1\u4f3c\u68af\u5ea6\u7684\u4e24\u4e2a\u9879\u3002 5 \u63a8\u8bba \u8ba1\u7b97\u65b9\u7a0b1\u7684\u5f52\u4e00\u5316\u5e38\u6570\u9700\u8981\u5bf9\u6240\u6709\u6a21\u677f\u548c\u6240\u6709\u53ef\u80fd\u7684\u5b9e\u4f8b\u5316\u65b9\u6cd5\u6c42\u548c\u3002\u8fd9\u5bfc\u81f4\u641c\u7d22\u7a7a\u95f4\u4e2dT\uff08\u53ef\u7528\u7cfb\u7edf\u6a21\u677f\u96c6\uff09\u4e2d\u6700\u5927\u6a21\u677f\u7684\u69fd\u6570\u5448\u6307\u6570\u589e\u957f\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u4f7f\u7528\u6ce2\u675f\u641c\u7d22\u6765\u8fd1\u4f3c\u8ba1\u7b97\u3002\u6211\u4eec\u4f7f\u7528T\u4e2d\u7684\u6240\u6709\u6a21\u677f\u521d\u59cb\u5316\u6881\uff0c\u5e76\u8fed\u4ee3\u5730\u5c06\u6881\u4e2d\u6a21\u677f\u7684\u69fd\u4e0e\u95ee\u9898\u6587\u672c\u4e2d\u7684\u5355\u8bcd\u5bf9\u9f50\u3002\u5bf9\u4e8e\u6bcf\u4e2a\u6a21\u677f\uff0c\u4e0b\u4e00\u4e2a\u63d2\u69fd\u00ac \u6839\u636e\u8be5\u6a21\u677f\u7684\u9884\u5b9a\u4e49\u89c4\u8303\u5316\u987a\u5e8f\u9009\u62e9\u8981\u8003\u8651\u7684\u6a21\u677f\u3002\u6bcf\u6b21\u8fed\u4ee3\u540e\uff0c\u6211\u4eec\u6839\u636e\u6a21\u578b\u5f97\u5206\u4fee\u526a\u5149\u675f\uff0c\u4ee5\u4fdd\u6301\u00ac\u524dk\u4e2a\u504f\u5bfc\u6570\u3002\u5728\u4fee\u526a\u6881\u65f6\uff0c\u6211\u4eec\u6700\u591a\u5141\u8bb8\u5bf9\u6bcf\u4e2a\u6a21\u677f\u8fdb\u884cl\u6b21\u90e8\u5206\u63a8\u5bfc\uff0c\u4ee5\u786e\u4fdd\u5c11\u6570\u6a21\u677f\u4e0d\u4f1a\u5784\u65ad\u6881\u3002\u6211\u4eec\u7ee7\u7eed\u8fd9\u4e2a\u8fc7\u7a0b\uff0c\u76f4\u5230\u6881\u4e2d\u7684\u6240\u6709\u6a21\u677f\u90fd\u5b8c\u5168\u5b9e\u4f8b\u5316\u3002 \u5728\u5b66\u4e60\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528\u6ce2\u675f\u641c\u7d22\u8fd1\u4f3c\u8ba1\u7b97\u68af\u5ea6\uff08\u65b9\u7a0b2\uff09\u4e2d\u7684\u7b2c\u4e8c\u9879\u3002\u6839\u636e\u53ef\u7528\u7684\u9a8c\u8bc1\u51fd\u6570V\uff08\u5982\u7b2c4.2\u8282\u6240\u5b9a\u4e49\uff09\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u7cbe\u786e\u5730\u4fee\u526a\u6881\uff0c\u4ee5\u8ba1\u7b97\u68af\u5ea6\u7684\u524d\u534a\u90e8\u5206\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u5f53\u5047\u8bbe\u53ef\u4ee5\u8bbf\u95ee\u6807\u8bb0\u7684\u65b9\u7a0b\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u9650\u5236\u641c\u7d22\uff0c\u53ea\u8003\u8651\u53ef\u80fd\u5b8c\u6210\u4ee5\u751f\u6210\u6807\u8bb0\u65b9\u7a0b\u7684\u90e8\u5206\u5047\u8bbe\u3002\u00ac\u00ac\u00ac\u00ac</p> <p>6 \u578b\u53f7\u8be6\u7ec6\u4fe1\u606f</p> <p>\u6a21\u677f\u89c4\u8303\u5316\u6709\u8bb8\u591a\u8bed\u6cd5\u4e0a\u4e0d\u540c\u4f46\u8bed\u4e49\u4e0a\u7b49\u4ef7\u7684\u65b9\u6cd5\u6765\u8868\u8fbe\u7ed9\u5b9a\u7684\u65b9\u7a0b\u7ec4\u3002\u4f8b\u5982\uff0c\u77ed\u8bed\u201cJohn\u6bd4Bill\u59273\u5c81\u201d\u53ef\u4ee5\u5199\u6210\u00acj=b+3\u6216j-3=b\u3002\u4e3a\u4e86\u907f\u514d\u8fd9\u79cd\u6b67\u4e49\uff0c\u6211\u4eec\u5c06\u6a21\u677f\u89c4\u8303\u5316\u4e3a\u6807\u51c6\u5f62\u5f0f\u8868\u793a\u3002\u6211\u4eec\u901a\u8fc7\u4f7f\u7528\u6570\u5b66\u6c42\u89e3\u5668Maxima\uff08Maxima\uff0c2014\uff09\u6839\u636e\u6570\u5b57\u69fd\u548c\u5e38\u6570\u83b7\u5f97\u672a\u77e5\u69fd\u7684\u7b26\u53f7\u89e3\u6765\u6267\u884c\u8fd9\u79cd\u89c4\u8303\u5316\u3002\u00ac\u00ac\u00ac\u00ac \u63d2\u69fd\u7b7e\u540d\u5728s1+s2=s3\u8fd9\u6837\u7684\u6a21\u677f\u4e2d\uff0c\u63d2\u69fds1\u4e0e\u63d2\u69fds2\u4e0d\u540c\uff0c\u4f46\u6211\u4eec\u5e0c\u671b\u5b83\u4eec\u5171\u4eab\u8bb8\u591a\u7528\u4e8e-\u51b3\u5b9a\u5bf9\u9f50\u7684\u7279\u5f81\u3002\u4e3a\u4e86\u4fbf\u4e8e\u5b9e\u73b0\u8fd9\u4e00\u70b9\uff0c\u6211\u4eec\u00ac\u4e3a\u6bcf\u4e2a\u63d2\u69fd\u548c\u63d2\u69fd\u5bf9\u751f\u6210\u7b7e\u540d\u3002\u69fd\u7684\u7b7e\u540d\u8868\u793a\u5b83\u51fa\u73b0\u7684\u65b9\u7a0b\u7ec4\u3001\u5b83\u6240\u5728\u7684\u7279\u5b9a\u65b9\u7a0b\u4ee5\u53ca\u5b83\u6240\u5c5e\u7684\u65b9\u7a0b\u9879\u3002\u6210\u5bf9\u69fd\u7b7e\u540d\u5c06\u4e24\u4e2a\u69fd\u7684\u7b7e\u540d\u8fde\u63a5\u8d77\u6765\uff0c\u5e76\u6307\u793a\u5171\u4eab\u54ea\u4e9b\u672f\u8bed\u3002\u4f8b\u5982\uff0c\u8fd9\u5141\u8bb8\u56fe2\u4e2d\u63a8\u5bfc1\u4e2d\u7684\u00acn2\u548cn3\u5177\u6709\u76f8\u540c\u7684\u7b7e\u540d\uff0c\u800c\u5bf9n2\u3001u1\u548cn3\u3001u1\u5177\u6709\u4e0d\u540c\u7684\u7b7e\u540d\u3002\u4e3a\u4e86\u5728\u6a21\u677f\u4e4b\u95f4\u5171\u4eab\u7279\u5f81\uff0c\u4e3a\u6574\u4e2a\u6a21\u677f\u4ee5\u53ca\u6bcf\u4e2a\u7ec4\u6210\u65b9\u7a0b\u751f\u6210\u69fd\u548c\u69fd\u5bf9\u7b7e\u540d\u3002 \u7279\u5f81\u7279\u5f81\u03c6\uff08x\uff0cy\uff09\u662f\u9488\u5bf9\u5bfc\u6570y\u548c\u95ee\u9898x\u8ba1\u7b97\u7684\uff0c\u6db5\u76d6\u4e86\u6240\u6709\u5bfc\u6570-</p> <p>\u53ef\u80fd\u8868\u793a\u5982\u56fe4\u6240\u793a\u7684\u6a21\u677f\u3002\u6211\u4eec\u5305\u62ec\u5c06\u6bcf\u4e2a\u6a21\u677f\u4e0e\u5355\u8bcd\u95ee\u9898\u4e2d\u7684\u5355\u5b57\u548c\u53cc\u5b57\u8fde\u63a5\u8d77\u6765\u7684\u529f\u80fd\u3002\u6211\u4eec\u8fd8\u4e3a\u6bcf\u4e2a\u7cfb\u7edf\u6a21\u677f\u63d0\u4f9b\u4e86\u4e00\u4e2a\u6307\u6807\u529f\u80fd\uff0c\u4e3a\u5176\u4f7f\u7528\u63d0\u4f9b\u4e86\u504f\u5dee\u3002\u00ac\u00ac \u5355\u69fd\u529f\u80fd\u81ea\u7136\u8bed\u8a00x\u603b\u662f\u00ac\u5305\u542b\u4e00\u4e2a\u6216\u591a\u4e2a\u95ee\u9898\u6216\u547d\u4ee4\uff0c\u6307\u793a\u67e5\u8be2\u7684\u6570\u91cf\u3002\u4f8b\u5982\uff0c\u56fe2\u4e2d\u7684\u7b2c\u4e00\u4e2a\u95ee\u9898\u662f\u201c\u90a3\u5929\u6709\u591a\u5c11\u5b69\u5b50\u5165\u9662\uff1f\u201d\u6240\u67e5\u8be2\u7684\u6570\u91cf\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\u662f\u5b69\u5b50\u7684\u6570\u91cf\uff0c\u5fc5\u987b\u7528\u65b9\u7a0b\u7ec4\u4e2d\u7684\u4e00\u4e2a\u672a\u77e5\u6570\u6765\u8868\u793a\u3002\u6211\u4eec\u751f\u6210\u4e86\u4e00\u7ec4\u7279\u5f81\uff0c\u8fd9\u4e9b\u7279\u5f81\u7740\u773c\u4e8e\u69fd\u8bcd\u548c\u7591\u95ee\u53e5\u6216\u547d\u4ee4\u53e5\u7684\u5bf9\u8c61\u4e4b\u95f4\u7684\u5355\u8bcd\u91cd\u53e0\u548c\u540d\u8bcd\u77ed\u8bed\u91cd\u53e0\u3002\u6211\u4eec\u8fd8\u8ba1\u7b97\u4e86\u4e00\u4e2a\u7279\u5f81\uff0c\u8be5\u7279\u5f81\u6307\u793a\u4e00\u4e2a\u7a7a\u4f4d\u662f\u5426\u7531\u7591\u95ee\u53e5\u4e2d\u7684\u5355\u8bcd\u586b\u5145\u3002\u6b64\u5916\uff0c\u4ee3\u6570\u95ee\u9898\u7ecf\u5e38\u4f7f\u7528\u201c\u4e24\u79cd\u7968\u201d\u7b49\u77ed\u8bed\uff08\u5982\u56fe2\uff09\u3002\u8fd9\u4e9b\u6570\u5b57\u901a\u5e38\u4e0d\u4f1a\u51fa\u73b0\u5728\u65b9\u7a0b\u5f0f\u4e2d\u3002\u4e3a\u4e86\u89e3\u91ca\u8fd9\u4e00\u70b9\uff0c\u6211\u4eec\u6dfb\u52a0\u4e86\u4e00\u4e2a\u7279\u5f81\uff0c\u6307\u793a\u4e00\u4e2a\u6570\u5b57\u662f1\u8fd8\u662f2\u3002\u6700\u540e\uff0c\u8bb8\u591a\u6a21\u677f\u90fd\u5305\u542bcon-\u00ac\u00ac\u00ac</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/math_01/learning_to_automatically_solve_algebra_word_problems/#514","title":"\u95ee\u9898 514","text":""},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/math_01/learning_to_automatically_solve_algebra_word_problems/#1616","title":"\u53e5\u5b50 1616","text":""},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/math_01/learning_to_automatically_solve_algebra_word_problems/#19357","title":"\u5355\u8bcd 19357","text":"<p>\u8bcd\u6c47\u91cf 2352 \u6bcf\u4e2a\u95ee\u9898\u7684\u5e73\u5747\u5355\u8bcd\u6570  37 \u6bcf\u4e2a\u95ee\u9898\u7684\u5e73\u5747\u53e5\u6570   3.1 \u6bcf\u4e2a\u95ee\u9898\u7684\u5e73\u5747\u540d\u8bcd   13.4</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/math_01/learning_to_automatically_solve_algebra_word_problems/#28","title":"\u552f\u4e00\u65b9\u7a0b\u7ec4  28","text":"<p>\u6bcf\u4e2a\u7cfb\u7edf\u7684\u5e73\u5747\u63d2\u69fd\u6570  7. \u6bcf\u4e2a\u95ee\u9898\u7684\u5e73\u5747\u5bfc\u6570   4\u7c73 \u88682\uff1a\u6570\u636e\u96c6\u7edf\u8ba1\u3002</p> <p>\u4e2d\u4ecb\u52a8\u8bcd\u76f8\u7b49\u7684\u5bbe\u8bed\u5173\u7cfb\uff0c\u4ee5\u53ca\u4e2d\u4ecb\u4ecb\u8bcd\u76f8\u7b49\u7684\u540d\u8bcd\u5230\u4ecb\u8bcd\u5bbe\u8bed\u5173\u7cfb\u3002\u00ac \u89e3\u51b3\u65b9\u6848\u7279\u5f81\u901a\u8fc7\u5c06\u8bed\u4e49\u5efa\u7acb\u5728\u6570\u5b66\u57fa\u7840\u4e0a\uff0c\u6211\u4eec\u80fd\u591f\u5305\u542b\u67e5\u770b\u6700\u7ec8\u7b54\u6848a\u7684\u7279\u5f81\uff0c\u4ee5\u4e86\u89e3\u54ea\u4e9b\u7b54\u6848\u5bf9\u4e8e\u6211\u4eec\u901a\u5e38\u770b\u5230\u7684\u4ee3\u6570\u95ee\u9898\u662f\u5408\u7406\u7684\u3002\u4f8b\u5982\uff0c\u8bb8\u591a\uff08\u4f46\u4e0d\u662f\u5168\u90e8\uff09\u95ee\u9898\u7684\u89e3\u51b3\u65b9\u6848\u6d89\u53ca\u4e00\u7ec4\u5bf9\u8c61\u7684\u5927\u5c0f\uff0c\u8fd9\u4e9b\u5bf9\u8c61\u5fc5\u987b\u662f\u6b63\u6570\u548c\u6574\u6570\u3002</p> <p>\u53ef\u4ee5\u4ece\u9644\u8fd1\u63d2\u69fd\u4e2d\u4f7f\u7528\u7684\u5355\u8bcd\u4e2d\u8bc6\u522b\u7684\u5e38\u91cf\u3002\u4f8b\u5982\uff0c\u5728\u56fe4\u4e2d\uff0c\u5e38\u65700.01\u4e0e\u6587\u672c\u4e2d\u201c%\u201d\u7684\u4f7f\u7528\u6709\u5173\u3002\u4e3a\u4e86\u6355\u6349\u8fd9\u79cd\u7528\u6cd5\uff0c\u6211\u4eec\u5305\u542b\u4e86\u4e00\u7ec4\u8bcd\u6c47\u5316\u7279\u5f81\uff0c\u8fd9\u4e9b\u7279\u5f81\u5c06\u5355\u8bcd\u5f15\u7406\u4e0e\u65b9\u7a0b\u4e2d\u9644\u8fd1\u7684\u5e38\u6570\u8fde\u63a5\u8d77\u6765\u3002\u8fd9\u4e9b\u529f\u80fd\u4e0d\u5305\u62ec\u63d2\u69fd\u7b7e\u540d\u3002\u00ac\u00ac\u00ac \u69fd\u5bf9\u7279\u5f81\u6211\u4eec\u8ba1\u7b97\u7684\u5927\u591a\u6570\u7279\u5f81\u90fd\u89e3\u91ca\u4e86\u69fd\u8bcd\u4e4b\u95f4\u7684\u5173\u7cfb\u3002\u8fd9\u5305\u62ec\u89e6\u53d1\u5355\u8bcd\u672c\u8eab\u4e4b\u95f4\u5404\u79cd\u7b49\u4ef7\u5173\u7cfb\u7684\u7279\u5f81\uff0c\u4ee5\u53ca\u5b83\u4eec\u4e4b\u95f4\u4f9d\u8d56\u8def\u5f84\u7684\u7279\u5f81\u3002\u6211\u4eec\u8fd8\u5305\u62ec\u67e5\u770b\u4e24\u4e2a\u6570\u5b57\u7684\u6570\u503c\u5173\u7cfb\u7684\u529f\u80fd\uff0c\u5176\u4e2d\u672a\u77e5\u6570\u7684\u6570\u503c\u662f\u901a\u8fc7\u6c42\u89e3\u65b9\u7a0b\u7ec4\u751f\u6210\u7684\u3002\u8fd9\u6709\u52a9\u4e8e\u8ba4\u8bc6\u5230\uff0c\u4f8b\u5982\uff0c\u603b\u548c\u7684\u603b\u548c\u901a\u5e38\u5927\u4e8e\u6bcf\u4e2a\uff08\u901a\u5e38\u4e3a\u6b63\uff09\u603b\u548c\u3002\u00ac \u6b64\u5916\uff0c\u6211\u4eec\u8fd8\u6709\u4e00\u4e2a\u529f\u80fd\uff0c\u7528\u4e8e\u00ac\u67e5\u770b\u6210\u5bf9\u63d2\u69fd\u4e4b\u95f4\u7684\u5171\u4eab\u5173\u7cfb\u3002\u4f8b\u5982\uff0c\u5728\u56fe2\u4e2d\uff0c\u201c\u513f\u7ae5\u7968\u201d\u548c\u201c1.50\u7f8e\u5143\u201d\u4e4b\u95f4\u7684\u5173\u7cfb\u662f\u201c\u6210\u672c\u201d\u3002\u540c\u6837\uff0c\u201c\u6210\u4eba\u7968\u201d\u548c\u201c4\u7f8e\u5143\u201d\u4e4b\u95f4\u7684\u5173\u7cfb\u4e5f\u662f\u201c\u6210\u672c\u201d\u3002\u7531\u4e8e\u8fd9\u79cd\u5173\u7cfb\u7684\u5b9e\u9645\u6027\u8d28\u5e76\u4e0d\u91cd\u8981\uff0c\u56e0\u6b64\u8fd9\u4e00\u7279\u5f81\u4e0d\u662f\u8bcd\u6c47\u5316\u7684\uff0c\u800c\u662f\u4ec5\u5728\u00ac\u00ac\u5e73\u7b49\u5b58\u5728\u65f6\u89e6\u53d1\u7684\u3002\u6211\u4eec\u8003\u8651\u4e24\u79cd\u60c5\u51b5\uff1a-</p> <p>7 \u5b9e\u9a8c\u88c5\u7f6e \u6570\u636e\u96c6\u6211\u4eec\u4ece\u4f17\u5305\u8f85\u5bfc\u7f51\u7ad9algebra.com\u6536\u96c6\u4e86\u4e00\u4e2a\u65b0\u7684\u4ee3\u6570\u5355\u8bcd\u95ee\u9898\u6570\u636e\u96c6\u3002\u5b66\u751f\u4eec\u53d1\u5e03\u4e86\u8fd9\u4e9b\u95ee\u9898\uff0c\u4f9b\u793e\u533a\u6210\u5458\u56de\u7b54\u3002\u56e0\u6b64\uff0c\u8fd9\u4e9b\u95ee\u9898\u591a\u79cd\u591a\u6837\uff0c\u90fd\u662f\u4ece\u7ed9\u5b66\u751f\u7684\u5b9e\u9645\u95ee\u9898\u4e2d\u63d0\u53d6\u51fa\u6765\u7684\u3002\u6211\u4eec\u542f\u53d1\u5f0f\u5730\u8fc7\u6ee4\u6570\u636e\uff0c\u53ea\u5f97\u5230\u4e0d\u9700\u8981\u4efb\u4f55\u660e\u786e\u80cc\u666f\u77e5\u8bc6\u7684\u7ebf\u6027\u4ee3\u6570\u95ee\u9898\u3002\u4ece\u8fd9\u4e9b\u95ee\u9898\u4e2d\uff0c\u6211\u4eec\u968f\u673a\u9009\u62e9\u4e861024\u4e2a\u95ee\u9898\u3002\u5f53\u8fd9\u4e9b\u95ee\u9898\u88ab\u53d1\u5e03\u5230\u7f51\u7edc\u8bba\u575b\u65f6\uff0c\u8fd9\u4e9b\u5e16\u5b50\u901a\u5e38\u5305\u542b\u4e0d\u5c5e\u4e8e\u6587\u5b57\u95ee\u9898\u7684\u989d\u5916\u8bc4\u8bba\uff0c\u89e3\u51b3\u65b9\u6848\u5d4c\u5165\u4e86\u957f\u800c\u81ea\u7531\u7684\u81ea\u7136\u8bed\u8a00\u63cf\u8ff0\u4e2d\u3002\u4e3a\u4e86\u6e05\u7406\u6570\u636e\uff0c\u6211\u4eec\u8981\u6c42\u4e9a\u9a6c\u900aMechanical Turk\u7684\u5de5\u4f5c\u4eba\u5458\u4ece\u6587\u672c\u4e2d\u63d0\u53d6\uff1a\u4ee3\u6570\u5355\u8bcd\u95ee\u9898\u672c\u8eab\u3001\u89e3\u65b9\u7a0b\u548c\u6570\u503c\u7b54\u6848\u3002\u6211\u4eec\u624b\u52a8\u9a8c\u8bc1\u4e86\u65b9\u7a0b\u5f0f\u548c\u6570\u5b57\uff0c\u4ee5\u786e\u4fdd\u5b83\u4eec\u662f\u6b63\u786e\u7684\u3002\u4e3a\u4e86\u786e\u4fdd\u6bcf\u79cd\u95ee\u9898\u7c7b\u578b\u5728\u8bad\u7ec3\u6570\u636e\u4e2d\u81f3\u5c11\u51fa\u73b0\u51e0\u6b21\uff0c\u6211\u4eec\u5220\u9664\u4e86\u4e0d\u5e38\u89c1\u7684\u95ee\u9898\u7c7b\u578b\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u6211\u4eec\u4ece\u6bcf\u4e2a\u65b9\u7a0b\u7cfb\u7edf\u4e2d\u5f52\u7eb3\u51fa\u7cfb\u7edf\u6a21\u677f\uff0c\u5982\u00ac\u00ac\u00ac\u00ac\u00ac\u00ac\u00ac\u7b2c4.1\u8282\u6240\u8ff0\uff0c\u5e76\u6d88\u9664\u4e86\u76f8\u5173\u7cfb\u7edf\u6a21\u677f\u51fa\u73b0\u7684\u6240\u6709\u95ee\u9898</p> <p>\u5728\u6570\u636e\u96c6\u4e2d\u5c11\u4e8e6\u6b21\u3002\u8fd9\u7ed9\u6211\u4eec\u7559\u4e0b\u4e86514\u4e2a\u95ee\u9898\u3002\u88682\u63d0\u4f9b\u4e86\u6570\u636e\u7edf\u8ba1\u3002 \u76d1\u7763\u5f62\u5f0f\u6211\u4eec\u8003\u8651\u534a\u76d1\u7763\u5b66\u4e60\u548c\u76d1\u7763\u5b66\u4e60\u3002\u5728\u534a\u76d1\u7763\u573a\u666f\u4e2d\uff0c\u6211\u4eec\u5047\u8bbe\u53ef\u4ee5\u8bbf\u95ee\u00ac\u8bad\u7ec3\u00ac\u8bed\u6599\u5e93\u4e2d\u6240\u6709\u95ee\u9898\u7684\u6570\u503c\u7b54\u6848\uff0c\u4ee5\u53ca\u4e0e\u5168\u65b9\u7a0b\u7ec4\u914d\u5bf9\u7684\u5c11\u6570\u95ee\u9898\u3002\u4e3a\u4e86\u9009\u62e9\u7528\u65b9\u7a0b\u6ce8\u91ca\u54ea\u4e9b\u95ee\u9898\uff0c\u6211\u4eec\u786e\u5b9a\u4e86\u6570\u636e\u4e2d\u4e94\u79cd\u6700\u5e38\u89c1\u7684\u95ee\u9898\u7c7b\u578b\uff0c\u5e76\u5bf9\u6bcf\u79cd\u7c7b\u578b\u7684\u968f\u673a\u62bd\u6837\u95ee\u9898\u8fdb\u884c\u4e86\u6ce8\u91ca\u30025EQ+ANS\u4f7f\u7528\u8fd9\u79cd\u5f62\u5f0f\u7684\u5f31\u76d1\u7763\u3002\u4e3a\u4e86\u5c55\u793a\u4f7f\u7528\u5f31\u76d1\u7763\u6570\u636e\u7684\u597d\u5904\uff0c\u6211\u4eec\u8fd8\u63d0\u4f9b\u4e86\u57fa\u7ebf\u573a\u666f\u00ac\u00ac\u00ac5EQ\u7684\u7ed3\u679c\uff0c\u5176\u4e2d\u8bad\u7ec3\u6570\u636e\u4ec5\u5305\u62ec\u7528\u65b9\u7a0b\u7cfb\u7edf\u6ce8\u91ca\u7684\u4e94\u4e2a\u79cd\u5b50\u95ee\u9898\u3002\u5728\u5b8c\u5168\u76d1\u7763\u7684\u00acALLEQ\u573a\u666f\u4e2d\uff0c\u6211\u4eec\u5047\u8bbe\u53ef\u4ee5\u8bbf\u95ee\u6574\u4e2a\u8bad\u7ec3\u96c6\u7684\u5b8c\u6574\u65b9\u7a0b\u7cfb\u7edf\u3002\u00ac \u8bc4\u4f30\u65b9\u6848\u6211\u4eec\u4f7f\u75285\u500d\u4ea4\u53c9\u9a8c\u8bc1\u8fdb\u884c\u6240\u6709\u5b9e\u9a8c\u3002\u7531\u4e8e\u6211\u4eec\u7684\u6a21\u578b\u4e3a\u6bcf\u4e2a\u95ee\u9898\u751f\u6210\u4e86\u4e00\u4e2a\u89e3\u51b3\u65b9\u6848\uff0c\u56e0\u6b64\u6211\u4eec\u53ea\u62a5\u544a\u51c6\u786e\u6027\u3002\u6211\u4eec\u62a5\u544a\u4e86\u4e24\u4e2a\u6307\u6807\uff1a\u65b9\u7a0b\u7cbe\u5ea6\u7528\u4e8e\u8861\u91cf\u7cfb\u7edf\u751f\u6210\u6b63\u786e\u65b9\u7a0b\u7cfb\u7edf\u7684\u9891\u7387\uff0c\u7b54\u6848\u00ac\u00ac\u7cbe\u5ea6\u7528\u4e8e\u8bc4\u4f30\u751f\u6210\u7684\u6570\u503c\u7b54\u6848\u7684\u6b63\u786e\u9891\u7387\u3002\u5728\u6bd4\u8f83\u65b9\u7a0b\u65f6\uff0c\u6211\u4eec\u901a\u8fc7\u89c4\u8303\u5316\u65b9\u7a0b\u7ec4\u6765\u907f\u514d\u865a\u5047\u5dee\u5f02\uff0c\u5982\u7b2c6\u8282\u6240\u8ff0\u3002\u4e3a\u4e86\u6bd4\u8f83\u7b54\u6848\u5143\u7ec4\uff0c\u6211\u4eec\u5ffd\u7565\u4e86\u987a\u5e8f\uff0c\u5e76\u8981\u6c42\u53c2\u8003\u7b54\u6848\u4e2d\u51fa\u73b0\u7684\u6bcf\u4e2a\u6570\u5b57\u90fd\u51fa\u73b0\u5728\u751f\u6210\u7684\u7b54\u6848\u4e2d\u3002\u00ac \u53c2\u6570\u548c\u6c42\u89e3\u5668\u5728\u6211\u4eec\u7684\u5b9e\u9a8c\u4e2d\uff0c\u6211\u4eec\u5c06\u6ce2\u675f\u641c\u7d22\u7b97\u6cd5\uff08\u7b2c5\u8282\uff09\u4e2d\u7684k\u8bbe\u7f6e\u4e3a200\uff0cl\u8bbe\u7f6e\u4e3a20\u3002\u6211\u4eec\u8fd0\u884cL-BFGS\u8ba1\u7b9750\u6b21\u8fed\u4ee3\u3002\u6211\u4eec\u4f7f\u7528\u00acL2\u8303\u6570\u548c\u03bb\u503c0.1\u6765\u89c4\u8303\u6211\u4eec\u7684\u5b66\u4e60\u76ee\u6807\u3002\u6211\u4eec\u7684\u5b9e\u73b0\u652f\u6301\u7684\u6570\u5b66\u5173\u7cfb\u96c6\u662f{+\u00ac\uff0c\u2212\uff0c\u00d7\uff0c/}\u3002\u6211\u4eec\u7684\u5b9e\u73b0\u4f7f\u7528\u00ac\u9ad8\u6548Java\u77e9\u9635\u5e93\uff08EJML\uff09\u4e2d\u7684\u9ad8\u65af\u6d88\u5143\u51fd\u6570\uff08Abeles\uff0c2014\uff09\u6765\u751f\u6210\u7ed9\u5b9a\u4e00\u7ec4\u65b9\u7a0b\u7684\u7b54\u6848\u3002</p> <p>8 \u7ed3\u679c 8.1 \u76d1\u7763\u7684\u5f71\u54cd \u88683\u603b\u7ed3\u4e86\u7ed3\u679c\u3002\u6b63\u5982\u9884\u671f\u7684\u90a3\u6837\uff0c\u5728\u8bad\u7ec3\u65f6\u8bbf\u95ee\u5b8c\u6574\u7684\u65b9\u7a0b\u7ec4\uff08\u00acALLEQ\uff09\u53ef\u4ee5\u83b7\u5f97\u6700\u4f73\u7684\u5b66\u4e60\u6a21\u578b\uff0c\u51c6\u786e\u7387\u63a5\u8fd169%\u3002\u7136\u800c\uff0c\u4e3b\u8981\u4ece\u7b54\u6848\u6ce8\u91ca\uff085EQ+ANS\uff09\u8fdb\u884c\u8bad\u7ec3</p> Text Only<pre><code>\u65b9\u7a0b\u5f0f\n</code></pre> <p>\u7cbe\u786e  \u7b54\u6848 \u7cbe\u786e 5EQ 20.4    20.8 5EQ+\u7b54\u6848  45.7    46.1 ALLEQ   66.1    68.7 \u88683\uff1a\u5404\u79cd\u5f62\u5f0f\u76d1\u7763\u7684\u4ea4\u53c9\u9a8c\u8bc1\u51c6\u786e\u6027\u7ed3\u679c\u3002\u00ac</p> Text Only<pre><code>\u65b9\u7a0b\u5f0f\n</code></pre> <p>\u7cbe\u786e  \u7b54\u6848 \u7cbe\u786e  %of \u6570\u636e \u2264 10    43.6    50.8    25.5 11 \u2212 15 46.6    45.1    10.5 16 \u2212 20 44.2    52.0    11.3</p> <p>20    85.7    86.1    52.7 \u88684:\u00acALLEQ\u5728\u4e0d\u540c\u6a21\u677f\u9891\u7387\u4e0b\u7684\u6027\u80fd\u3002</p> <p>\u7ed3\u679c\u6027\u80fd\u51e0\u4e4e\u8fbe\u5230ALLEQ\u768470%\uff0c\u8bc1\u660e\u4e86\u5f31\u76d1\u7763\u6570\u636e\u7684\u4ef7\u503c\u3002\u76f8\u6bd4\u4e4b\u4e0b\uff0c\u4e0d\u80fd\u4f7f\u7528\u8fd9\u79cd\u5f31\u76d1\u7763\u7684\u00ac5EQ\u7684\u8868\u73b0\u8981\u5dee\u5f97\u591a\u3002 8.2 \u6027\u80fd\u548c\u6a21\u677f\u9891\u7387 \u4e3a\u4e86\u66f4\u597d\u5730\u7406\u89e3\u7ed3\u679c\uff0c\u6211\u4eec\u8fd8\u6d4b\u91cf\u4e86\u65b9\u7a0b\u7cbe\u5ea6\u4e0e\u6570\u636e\u96c6\u4e2d\u6bcf\u4e2a\u65b9\u7a0b\u6a21\u677f\u9891\u7387\u7684\u5173\u7cfb\u3002\u88684\u62a5\u544a\u4e86\u5c06\u95ee\u9898\u5206\u4e3a\u56db\u4e2a\u4e0d\u540c\u9891\u7387\u533a\u95f4\u540e\u7684ALLEQ\u7ed3\u679c\u3002\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c\u8be5\u7cfb\u7edf\u6b63\u786e\u56de\u7b54\u4e8685%\u4ee5\u4e0a\u7684\u5e38\u89c1\u95ee\u9898\u7c7b\u578b\uff0c\u540c\u65f6\u5bf9\u76f8\u5bf9\u4e0d\u5e38\u89c1\u7684\u95ee\u9898\u7c7b\u578b\u4ecd\u8fbe\u5230\u4e8650%\u4ee5\u4e0a\u7684\u51c6\u786e\u7387\u3002\u6211\u4eec\u4e0d\u5305\u62ec\u00ac5EQ+ANS\u7684\u6a21\u677f\u9891\u7387\u7ed3\u679c\uff0c\u56e0\u4e3a\u5728\u8fd9\u79cd\u8bbe\u7f6e\u4e2d\uff0c\u6211\u4eec\u7684\u7cfb\u7edf\u53ea\u7ed9\u51fa\u4e86\u524d\u4e94\u4e2a\u6700\u5e38\u89c1\u7684\u6a21\u677f\u3002\u8fd9\u5957\u6709\u9650\u7684\u6a21\u677f\u4ec5\u6db5\u76d6&gt;20\u4e2abin\u4e2d\u7684\u95ee\u9898\uff0c\u7ea6\u5360\u6570\u636e\u768452%\u3002\u7136\u800c\uff0c\u5728\u8fd9\u4e2a\u5b50\u96c6\u4e0a\uff0c5EQ+ANS\u7684\u8868\u73b0\u975e\u5e38\u597d\uff0c\u6b63\u786e\u56de\u7b54\u4e8688%\u7684\u95ee\u9898\uff0c\u8fd9\u4e0eALLEQ\u8fbe\u5230\u768486%\u5927\u81f4\u76f8\u540c\u3002\u56e0\u6b64\uff0c\u867d\u7136\u5f31\u76d1\u7763\u5bf9\u751f\u6210\u53ef\u80fd\u65b9\u7a0b\u7684\u7a7a\u95f4\u6ca1\u6709\u5e2e\u52a9\uff0c\u4f46\u5728\u7ed9\u5b9a\u9002\u5f53\u7684\u65b9\u7a0b\u7a7a\u95f4\u65f6\uff0c\u5b83\u5bf9\u5b66\u4e60\u751f\u6210\u6b63\u786e\u7b54\u6848\u975e\u5e38\u6709\u5e2e\u52a9\u3002 8.3 \u6d88\u878d\u5206\u6790 \u88685\u663e\u793a\u4e86\u6bcf\u7ec4\u7279\u5f81\u7684\u6d88\u878d\u7ed3\u679c\u3002\u6cbf\u5bf9\u89d2\u7ebf\u7684\u7ed3\u679c\u663e\u793a\u4e86\u5f53\u4e00\u7ec4\u7279\u5f81\u88ab\u6d88\u878d\u65f6\u7684\u6027\u80fd\uff0c\u800c\u975e\u5bf9\u89d2\u7ebf\u7684\u6570\u5b57\u663e\u793a\u4e86</p> <p>\u5f53\u4e24\u7ec4\u7279\u5f81\u4e00\u8d77\u6d88\u878d\u65f6\u7684\u6027\u80fd\u3002\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c\u6240\u6709\u529f\u80fd\u90fd\u5bf9\u6574\u4f53\u6027\u80fd\u6709\u8d21\u732e\uff0c\u5176\u4e2d\u6210\u5bf9\u529f\u80fd\u662f\u6700\u91cd\u8981\u7684\uff0c\u5176\u6b21\u662f\u6587\u6863\u548c\u89e3\u51b3\u65b9\u6848\u529f\u80fd\u3002\u6211\u4eec\u8fd8\u770b\u5230\uff0c\u6210\u5bf9\u7279\u5f81\u53ef\u4ee5\u5f25\u8865\u5176\u4ed6\u7279\u5f81\u7684\u7f3a\u5931\u3002\u4f8b\u5982\uff0c\u5f53\u5355\u72ec\u5220\u9664\u6587\u6863\u6216\u89e3\u51b3\u65b9\u6848\u529f\u80fd\u65f6\uff0c\u6027\u80fd\u53ea\u4f1a\u7565\u6709\u4e0b\u964d\u3002\u7136\u800c\uff0c\u5f53\u5b83\u4eec\u4e0e\u914d\u5bf9\u7279\u5f81\u4e00\u8d77\u88ab\u79fb\u9664\u65f6\uff0c\u4e0b\u964d\u5e45\u5ea6\u8981\u5927\u5f97\u591a\u3002\u00ac\u00ac\u00ac\u00ac 8.4 \u5b9a\u6027\u8bef\u5dee\u5206\u6790 \u6211\u4eec\u68c0\u67e5\u4e86ALLEQ\u7684\u4e00\u4e2a\u65b9\u9762\u7684\u7cfb\u7edf\u8f93\u51fa\uff0c\u5e76\u786e\u5b9a\u4e86\u4e24\u7c7b\u4e3b\u8981\u7684\u9519\u8bef\u3002\u7b2c\u4e00\u79cd\uff0c\u7ea6\u5360\u6848\u4ef6\u7684\u56db\u5206\u4e4b\u4e00\uff0c\u5305\u62ec\u66f4\u591a\u80cc\u666f\u6216\u4e16\u754c\u77e5\u8bc6\u53ef\u80fd\u6709\u6240\u5e2e\u52a9\u7684\u9519\u8bef\u3002\u4f8b\u5982\uff0c\u56fe5\u4e2d\u7684\u95ee\u98981\u8981\u6c42\u7406\u89e3\u7ed8\u753b\u5c3a\u5bf8\u4e4b\u95f4\u7684\u5173\u7cfb\uff0c\u4ee5\u53ca\u5728\u7ed8\u753b\u5370\u5237\u65f6\u5982\u4f55\u4fdd\u6301\u8fd9\u79cd\u5173\u7cfb\uff0c\u95ee\u9898\u00ac\u00ac\u00ac2\u4f9d\u8d56\u4e8e\u7406\u89e3\u5546\u4e1a\u6982\u5ff5\uff0c\u5305\u62ec\u6210\u672c\u3001\u9500\u552e\u4ef7\u683c\u548c\u5229\u6da6\u3002\u867d\u7136\u8fd9\u4e9b\u5173\u7cfb\u53ef\u4ee5\u5728\u6211\u4eec\u7684\u6a21\u578b\u4e2d\u7528\u8db3\u591f\u7684\u6570\u636e\u5b66\u4e60\uff0c\u5c31\u50cf\u767e\u5206\u6bd4\u95ee\u9898\u4e00\u6837\uff08\u5982\u56fe4\uff09\uff0c\u4f46\u5404\u79cd\u5916\u90e8\u8d44\u6e90\uff0c\u5982\u77e5\u8bc6\u5e93\uff08\u5982Freebase\uff09\u6216\u6765\u81ea\u5927\u578b\u6587\u672c\u8bed\u6599\u5e93\u7684\u5206\u5e03\u7edf\u8ba1\u6570\u636e\uff0c\u53ef\u80fd\u4f1a\u00ac\u00ac\u00ac\u5e2e\u52a9\u6211\u4eec\u7528\u8f83\u5c11\u7684\u8bad\u7ec3\u6570\u636e\u5b66\u4e60\u5b83\u4eec\u3002 \u7b2c\u4e8c\u7c7b\u9519\u8bef\u7ea6\u5360\u4e00\u534a\uff0c\u5305\u62ec\u6e90\u4e8e\u7ec4\u5408\u8bed\u8a00\u7684\u9519\u8bef\u3002\u4f8b\u5982\uff0c\u56fe5\u4e2d\u95ee\u98983\u7684\u7b2c\u4e8c\u53e5\u8bdd\u53ef\u4ee5\u751f\u6210\u65b9\u7a0b2x\u2212y=5\uff0c\u5176\u4e2d\u77ed\u8bed\u201c\u5176\u4e2d\u4e00\u4e2a\u7684\u4e24\u6b21\u201d\u751f\u6210\u8868\u8fbe\u5f0f2x\u3002\u8003\u8651\u5230\u5178\u578b\u7684\u6d45\u5d4c\u5957\uff0c\u5728\u6709\u8db3\u591f\u6570\u636e\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u5b66\u4e60\u8fd9\u4e9b\u60c5\u51b5\u7684\u6a21\u677f\uff0c\u5c06\u6765\u8fd8\u53ef\u4ee5\u5f00\u53d1\u65b0\u7684\u8de8\u53e5\u8bed\u4e49\u89e3\u6790\u5668\uff0c\u4ee5\u4fbf\u4ece\u8f83\u5c0f\u7684\u6570\u636e\u96c6\u4e2d\u66f4\u597d\u5730\u8fdb\u884c\u6cdb\u5316\u3002</p> <p>\u56fe5\uff1a\u6211\u4eec\u7684\u7cfb\u7edf\u65e0\u6cd5\u6b63\u786e\u89e3\u51b3\u7684\u95ee\u9898\u793a\u4f8b\u3002</p> <p>9 \u7ed3\u8bba \u6211\u4eec\u63d0\u51fa\u4e86\u4e00\u79cd\u81ea\u52a8\u5b66\u4e60\u89e3\u51b3\u4ee3\u6570\u5355\u8bcd\u95ee\u9898\u7684\u65b9\u6cd5\u3002\u6211\u4eec\u7684\u7b97\u6cd5\u6784\u5efa\u65b9\u7a0b\u7ec4\uff0c\u540c\u65f6\u5c06\u5b83\u4eec\u7684\u53d8\u91cf\u548c\u6570\u5b57\u4e0e\u95ee\u9898\u6587\u672c\u5bf9\u9f50\u3002\u4f7f\u7528\u65b0\u6536\u96c6\u7684\u8bed\u6599\u5e93\uff0c\u6211\u4eec\u6d4b\u91cf\u4e86\u5404\u79cd\u5f62\u5f0f\u7684\u5f31\u76d1\u7763\u5bf9\u7ee9\u6548\u7684\u5f71\u54cd\u3002\u636e\u6211\u4eec\u6240\u77e5\uff0c\u6211\u4eec\u5c55\u793a\u4e86\u8fd9\u9879\u4efb\u52a1\u7684\u7b2c\u4e00\u4e2a\u5b66\u4e60\u7ed3\u679c\u3002\u00ac \u4ecd\u6709\u8bb8\u591a\u673a\u4f1a\u53ef\u4ee5\u6539\u8fdb\u62a5\u544a\u7684\u7ed3\u679c\uff0c\u5e76\u5c06\u65b9\u6cd5\u6269\u5c55\u5230\u76f8\u5173\u9886\u57df\u3002\u6211\u4eec\u60f3\u5f00\u53d1\u6280\u672f\u6765\u5b66\u4e60\u751f\u6210\u65b0\u65b9\u7a0b\u7684\u610f\u4e49\u7ec4\u5408\u6a21\u578b\u3002\u6b64\u5916\uff0c\u6570\u5b66\u7684\u4e00\u822c\u8868\u793a\u9002\u7528\u00ac\u00ac\u00ac\u4e8e\u8bb8\u591a\u4e0d\u540c\u7684\u9886\u57df\uff0c\u5305\u62ec\u51e0\u4f55\u3001\u7269\u7406\u548c\u5316\u5b66\u3002\u6700\u7ec8\uff0c\u6211\u4eec\u5e0c\u671b\u5c06\u8fd9\u4e9b\u6280\u672f\u6269\u5c55\u5230\u4ece\u81ea\u7136\u8bed\u8a00\u5408\u6210\u66f4\u590d\u6742\u7684\u7ed3\u6784\uff0c\u5982\u8ba1\u7b97\u673a\u7a0b\u5e8f\u3002\u00ac</p> <p>\u81f4\u8c22 \u4f5c\u8005\u611f\u8c22\u5df4\u7279\u5c14\u7eaa\u5ff5\u7814\u7a76\u6240\uff08PO\uff03300662\uff09\u548c\u7f8e\u56fd\u56fd\u5bb6\u79d1\u5b66\u57fa\u91d1\u4f1a\uff08\u62e8\u6b3eIIS-0835652\uff09\u7684\u652f\u6301\u3002\u6211\u4eec\u611f\u8c22Nicholas FitzGerald\u3001\u9ebb\u7701\u7406\u5de5\u5b66\u9662NLP\u5c0f\u7ec4\u3001\u534e\u76db\u987f\u5927\u5b66NLP\u5c0f\u7ec4\u548cACL\u5ba1\u7a3f\u4eba\u7684\u5efa\u8bae\u548c\u610f\u89c1\u3002\u672c\u6587\u4e2d\u8868\u8fbe\u7684\u4efb\u4f55\u89c2\u70b9\u3001\u53d1\u73b0\u3001\u7ed3\u8bba\u6216\u5efa\u8bae\u90fd\u662f\u4f5c\u8005\u7684\u89c2\u70b9\uff0c\u4e0d\u4e00\u5b9a\u53cd\u6620\u8d44\u52a9\u7ec4\u7ec7\u7684\u89c2\u70b9\u3002\u00ac</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/","title":"RedPajama\uff1a\u7528\u4e8e\u8bad\u7ec3\u5927\u578b\u8bed\u8a00\u6a21\u578b\u7684\u5f00\u653e\u6570\u636e\u96c6","text":"<p>Maurice Weber, Daniel Y. Fu, Quentin Anthony Yonatan Oren Shane Adams, Anton Alexandrov, Xiaozhong Lyu, Huu Nguyen, Xiaozhe Yao, Virginia Adams, Ben Athiwaratkun1, Rahul Chalamala, Kezhen Chen, Max Ryabinin, Tri Dao, Percy Liang, Christopher R\u00e9, Irina Rish, Ce Zhang</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#_1","title":"\u6458\u8981","text":"<p>\u5927\u578b\u8bed\u8a00\u6a21\u578b\u6b63\u65e5\u76ca\u6210\u4e3a\u4eba\u5de5\u667a\u80fd\u3001\u79d1\u5b66\u548c\u6574\u4e2a\u793e\u4f1a\u4e2d\u4e00\u9879\u57fa\u77f3\u6280\u672f\uff0c\u7136\u800c\uff0c\u6570\u636e\u96c6\u6784\u6210\u548c\u8fc7\u6ee4\u7684\u6700\u4f18\u7b56\u7565\u5728\u5f88\u5927\u7a0b\u5ea6\u4e0a\u4ecd\u7136\u96be\u4ee5\u6349\u6478\u3002\u8bb8\u591a\u9876\u7ea7\u6027\u80fd\u7684\u6a21\u578b\uff0c\u5176\u6570\u636e\u96c6\u7ba1\u7406\u548c\u6a21\u578b\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u4ecd\u7136\u7f3a\u4e4f\u900f\u660e\u5ea6\uff0c\u8fd9\u963b\u788d\u4e86\u5b8c\u5168\u5f00\u6e90\u8bed\u8a00\u6a21\u578b\u7684\u53d1\u5c55\u3002 \u5728\u672c\u6587\u4e2d\uff0c\u6211\u4eec\u786e\u5b9a\u4e86\u5fc5\u987b\u89e3\u51b3\u7684\u4e0e\u6570\u636e\u76f8\u5173\u4e09\u4e2a\u6838\u5fc3\u6311\u6218\uff0c\u4ee5\u63a8\u52a8\u5b8c\u5168\u5f00\u6e90\u8bed\u8a00\u6a21\u578b\u7684\u53d1\u5c55\u3002 \u8fd9\u4e9b\u5305\u62ec\uff1a\uff081\uff09\u6a21\u578b\u5f00\u53d1\u7684\u900f\u660e\u5ea6\uff0c\u5305\u62ec\u6570\u636e\u7ba1\u7406\u8fc7\u7a0b\uff1b\uff082\uff09\u83b7\u53d6\u5927\u91cf\u9ad8\u8d28\u91cf\u6570\u636e\uff1b\u4ee5\u53ca\uff083\uff09\u6570\u636e\u96c6\u83b7\u53d6\u6240\u9700\u8981\u7684\u7ba1\u7406\u548c\u5206\u6790\u7ec4\u4ef6\u548c\u5143\u6570\u636e\u3002 \u4e3a\u4e86\u5e94\u5bf9\u8fd9\u4e9b\u6311\u6218\uff0c\u6211\u4eec\u53d1\u5e03\u4e86 RedPajama-V1\uff0c\u8fd9\u662f LLaMA \u8bad\u7ec3\u6570\u636e\u96c6\u7684\u5f00\u6e90\u590d\u5236\u7248\u672c\u3002\u6b64\u5916\uff0c\u6211\u4eec\u8fd8\u53d1\u5e03\u4e86 RedPajama-V2\uff0c\u8fd9\u662f\u4e00\u4e2a\u5e9e\u5927\u7684\u53ea\u6709\u7f51\u7edc\u6570\u636e\u7684\u6570\u636e\u96c6\uff0c\u5305\u542b\u539f\u59cb\u7684\u3001\u672a\u7ecf\u8fc7\u6ee4\u7684\u6587\u672c\u6570\u636e\u4ee5\u53ca\u8d28\u91cf\u4fe1\u53f7\u548c\u5143\u6570\u636e\u3002RedPajama \u6570\u636e\u96c6\u603b\u5171\u5305\u542b\u8d85\u8fc7 100 \u4e07\u4ebf\u4e2a\u7b26\u5143\uff0c\u6db5\u76d6\u591a\u4e2a\u9886\u57df\uff0c\u5176\u8d28\u91cf\u4fe1\u53f7\u6709\u52a9\u4e8e\u6570\u636e\u8fc7\u6ee4\uff0c\u65e8\u5728\u6fc0\u53d1\u4f17\u591a\u65b0\u6570\u636e\u96c6\u7684\u5f00\u53d1\u3002\u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u8fd9\u4e9b\u6570\u636e\u96c6\u5df2\u88ab\u7528\u4e8e\u8bad\u7ec3\u751f\u4ea7\u4e0a\u4f7f\u7528\u7684\u5f3a\u5927\u8bed\u8a00\u6a21\u578b\uff0c\u4f8b\u5982 Snowflake Arctic\u3001Salesforce \u7684 XGen \u548c AI2 \u7684 OLMo\u3002\u4e3a\u4e86\u6df1\u5165\u4e86\u89e3 RedPajama \u7684\u8d28\u91cf\uff0c\u6211\u4eec\u4f7f\u7528\u53c2\u6570\u6700\u591a\u4e3a 16 \u4ebf\u7684\u4ec5\u89e3\u7801\u5668\u8bed\u8a00\u6a21\u578b\u8fdb\u884c\u4e86\u4e00\u7cfb\u5217\u5206\u6790\u548c\u6d88\u878d\u7814\u7a76\u3002\u6211\u4eec\u7684\u7814\u7a76\u7ed3\u679c\u8868\u660e\uff0c\u5982\u4f55\u6709\u6548\u5730\u5229\u7528\u7f51\u7edc\u6570\u636e\u7684\u8d28\u91cf\u4fe1\u53f7\u6765\u6574\u7406\u6570\u636e\u96c6\u7684\u9ad8\u8d28\u91cf\u5b50\u96c6\uff0c\u7a81\u51fa\u4e86 RedPajama \u5728\u5927\u89c4\u6a21\u63a8\u8fdb\u900f\u660e\u548c\u9ad8\u6027\u80fd\u8bed\u8a00\u6a21\u578b\u53d1\u5c55\u7684\u6f5c\u529b\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#1","title":"1.\u5f15\u8a00","text":"<p>\u9884\u8bad\u7ec3\u6570\u636e\u662f\u73b0\u4ee3\u5927\u578b\u8bed\u8a00\u6a21\u578b (LLM) \u5f00\u53d1\u4e2d\u6700\u6838\u5fc3\u7684\u7ec4\u6210\u90e8\u5206\u4e4b\u4e00\u3002\u7136\u800c\uff0c\u8be5\u9886\u57df\u9762\u4e34\u7684\u6838\u5fc3\u6311\u6218\u4e4b\u4e00\u662f\u9884\u8bad\u7ec3\u6570\u636e\u6784\u6210\u548c\u7ba1\u7406\u7b56\u7565\u666e\u904d\u7f3a\u4e4f\u900f\u660e\u5ea6[8]\u3002\u4e8b\u5b9e\u4e0a\uff0c\u9664\u4e86\u4e00\u4e9b\u503c\u5f97\u6ce8\u610f\u7684\u4f8b\u5916\u60c5\u51b5[19, 4, 2, 65]\uff0c\u5927\u591a\u6570\u6700\u5148\u8fdb LLM \u7684\u62a5\u544a\u6587\u6863[1]\u63d0\u4f9b\u7684\u9884\u8bad\u7ec3\u6570\u636e\u96c6\u7ec6\u8282\u5f88\u5c11\uff0c\u751a\u81f3\u6ca1\u6709\u3002\u5373\u4f7f\u662f\u50cfLLaMA[57, 58]\u8fd9\u6837\u7684\u5f00\u6e90\u6743\u91cd\u6a21\u578b\uff0c\u4e5f\u51e0\u4e4e\u6ca1\u6709\u63d0\u4f9b\u5173\u4e8e\u5176\u8bad\u7ec3\u6570\u636e\u7684\u7ec6\u8282\uff0c\u66f4\u4e0d\u7528\u8bf4\u53d1\u5e03\u5176\u6570\u636e\u96c6\u4e86\u3002\u6b64\u5916\uff0c\u7814\u7a76\u548c\u6784\u5efa\u6700\u4f73\u6570\u636e\u7ec4\u5408\uff0c\u4ee5\u53ca\u5f00\u53d1\u8fc7\u6ee4\u89c4\u5219\u548c\u542f\u53d1\u5f0f\u65b9\u6cd5\u7684\u8fc7\u7a0b\u975e\u5e38\u8017\u65f6\uff0c\u56e0\u4e3a\u5b83\u9700\u8981\u5bf9\u8bad\u7ec3\u6570\u636e\u7684\u4e0d\u540c\u7ec4\u5408\u8fdb\u884c\u591a\u6b21\u6d88\u878d\u5b9e\u9a8c\u3002\u4e3a\u4e86\u5e94\u5bf9\u8fd9\u4e9b\u6311\u6218\uff0c\u5e76\u4ee5\u5b9e\u73b0\u5f00\u6e90\u5927\u8bed\u8a00\u6a21\u578b\u8bbf\u95ee\u548c\u5f00\u53d1\u6c11\u4e3b\u5316\u7684\u603b\u4f53\u76ee\u6807\uff0c\u6211\u4eec\u53d1\u5e03\u4e86RedPajama\u6570\u636e\u96c6\uff0c\u8be5\u6570\u636e\u96c6\u603b\u5171\u5305\u542b\u8d85\u8fc7100\u4e07\u4ebf\u4e2a\u6587\u672c\u6570\u636e\u7b26\u5143\u3002 \u672c\u7740\u8fd9\u4e00\u76ee\u6807\uff0c\u6211\u4eec\u4f7f\u7528\u4ee5\u4e0b\u8bbe\u8ba1\u539f\u5219\u6765\u6307\u5bfc\u6211\u4eec\u521b\u5efa\u5f00\u653e\u6570\u636e\u96c6\u7684\u65b9\u6cd5\uff1a</p> <ul> <li> <p>\u900f\u660e\u6027\u3002\u6211\u4eec\u81f3\u5c11\u4ece\u4e24\u4e2a\u89d2\u5ea6\u529b\u6c42\u6700\u5927\u9650\u5ea6\u7684\u900f\u660e\u6027\u3002 \u4e00\u65b9\u9762\uff0c\u8fd9\u610f\u5473\u7740\u8981\u8bb0\u5f55\u5e76\u516c\u5f00\u6240\u6709\u6570\u636e\u6574\u7406\u65b9\u9762\u7684\u4fe1\u606f\u3002\u53e6\u4e00\u65b9\u9762\uff0c\u6211\u4eec\u52aa\u529b\u6784\u5efa\u5f00\u6e90\u900f\u660e\u7684\u6570\u636e\u96c6\uff0c\u8fd9\u4f7f\u5f97\u5e94\u7528\u7a0b\u5e8f\u5f00\u53d1\u8005\u548c\u7814\u7a76\u4eba\u5458\u80fd\u591f\u66f4\u597d\u5730\u7406\u89e3\u548c\u8bbe\u8ba1\u8bed\u8a00\u6a21\u578b\u3002</p> </li> <li> <p>\u89c4\u6a21\u3002\u5e9e\u5927\u7684\u53ef\u8bbf\u95ee\u6570\u636e\u6c60\u662f\u529f\u80fd\u6700\u5f3a\u5927\u7684\u5927\u578b\u8bed\u8a00\u6a21\u578b[52, 11, 58, 1]\u7684\u6838\u5fc3\u7ec4\u6210\u90e8\u5206\u4e4b\u4e00\uff0c\u4f46\u7531\u4e8e\u6784\u5efa\u3001\u6574\u7406\u548c\u5b58\u50a8\u5b83\u4eec\u9700\u8981\u5927\u91cf\u7684\u8d44\u6e90\u548c\u4e13\u4e1a\u77e5\u8bc6\uff0c\u56e0\u6b64\u96be\u4ee5\u83b7\u5f97\u3002\u56e0\u6b64\uff0c\u9664\u4e86\u900f\u660e\u6027\u4e4b\u5916\uff0c\u6211\u4eec\u8fd8\u529b\u6c42\u89c4\u6a21\u5316\u3002</p> </li> <li> <p>\u901a\u7528\u6027\u3002\u6211\u4eec\u7684\u76ee\u6807\u662f\u901a\u8fc7\u63d0\u4f9b\u901a\u7528\u7684\u8d44\u6e90\uff0c\u4e3a\u793e\u533a\u63d0\u4f9b\u6784\u5efa\u6700\u5148\u8fdb\u7684\u5f00\u6e90\u8bed\u8a00\u6a21\u578b\u6240\u9700\u7684\u6570\u636e\u96c6\u548c\u7ec4\u4ef6\u3002\u6211\u4eec\u4e0d\u89c4\u5b9a\u9ad8\u8d28\u91cf\u6570\u636e\u96c6\u7684\u6784\u6210\uff0c\u800c\u662f\u63d0\u4f9b\u4e00\u4e2a\u5e7f\u6cdb\u7684\u3001\u901a\u7528\u7684\u7f51\u7edc\u6587\u6863\u8bed\u6599\u5e93\u3002\u6bcf\u4e2a\u6587\u6863\u90fd\u5e26\u6709\u8d28\u91cf\u4fe1\u53f7\u6807\u7b7e\uff0c\u4f7f\u7528\u6237\u80fd\u591f\u6839\u636e\u5176\u7279\u5b9a\u9700\u6c42\u548c\u6807\u51c6\u505a\u51fa\u660e\u667a\u7684\u51b3\u7b56\u3002</p> </li> </ul> <p></p> <p>\u9075\u5faa\u8fd9\u4e9b\u539f\u5219\uff0c\u6211\u4eec\u5f00\u53d1\u5e76\u516c\u5f00\u53d1\u5e03\u4e86\u7528\u4e8eLLM\u9884\u8bad\u7ec3\u7684 RedPajama \u6570\u636e\u96c6\u3002RedPajama-V1\u662f\u4e00\u4e2a\u516c\u5f00\u53ef\u7528\u3001\u5b8c\u5168\u5f00\u6e90\u7684\u3001\u5c3d\u529b\u800c\u4e3a\u7684\u590d\u73b0[57]\u4e2d\u63cf\u8ff0\u7684\u6570\u636e\u96c6\uff0c\u7528\u4e8e\u8bad\u7ec3\u7b2c\u4e00\u7248\u672c\u8fed\u4ee3 LLaMA \u7cfb\u5217\u6a21\u578b\u3002\u4e0e\u8be5\u6570\u636e\u96c6\u4e00\u8d77\uff0c\u6211\u4eec\u5f00\u53d1\u4e86 RedPajama-INCITE \u6a21\u578b\uff0c\u5176\u4e2d\u5305\u62ec3B\u548c7B\u89c4\u6a21\u7684\u57fa\u7840\u6a21\u578b\u3001\u6307\u4ee4\u5fae\u8c03\u6a21\u578b\u548c\u5bf9\u8bdd\u6a21\u578b\u3002\u57fa\u4e8e\u8fd9\u4e9b\u52aa\u529b\u7684\u7b2c\u4e00\u7248\u7ecf\u9a8c\u6559\u8bad\uff0c\u6211\u4eec\u6784\u5efa\u4e86 RedPajama-V2 \u6570\u636e\u96c6\u3002 \u8fd9\u4e2a\u6700\u65b0\u7684\u6570\u636e\u96c6\u91c7\u7528\u4e86\u5b8c\u5168\u4e0d\u540c\u7684\u65b9\u6cd5\uff0c\u5e76\u4e13\u95e8\u5173\u6ce8\u7f51\u7edc\u6570\u636e\u3002\u5b83\u5305\u542b\u4e94\u79cd\u8bed\u8a00\uff0c\u6765\u6e90\u662f84\u4e2aCommon Crawl\u5feb\u7167\uff0c\u65f6\u95f4\u8303\u56f4\u4ece2014\u5e74\u52302023\u5e74\u3002\u9664\u4e86\u539f\u59cb\u6587\u672c\u6570\u636e\u5916\uff0c\u6211\u4eec\u8fd8\u5728\u8bed\u6599\u5e93\u768450T\u7b26\u5143\u5b50\u96c6\u4e2d\u53d1\u5e03\u4e86\u4f34\u968f\u6bcf\u4e2a\u6587\u6863\u7684\u8d28\u91cf\u4fe1\u53f7\uff0c\u76ee\u6807\u662f\u4fc3\u8fdb\u5bf9\u8fc7\u6ee4\u7f51\u7edc\u6570\u636e\u65b9\u6cd5\u7684\u539f\u5219\u6027\u7406\u89e3\u7684\u7814\u7a76\u3002\u6b64\u5916\uff0c\u5728\u8fd9\u9879\u5de5\u4f5c\u4e2d\uff0c\u6211\u4eec\u8fd8\u63d0\u51fa\u4e86\u4e00\u7cfb\u5217\u6d88\u878d\u7814\u7a76\uff0c\u5c55\u793a\u4e86\u8d28\u91cf\u4fe1\u53f7\u5bf9\u4e8e\u521b\u5efa\u4e0d\u540c\u8d28\u91cf\u7684\u539f\u59cb\u8bed\u6599\u5e93\u5b50\u96c6\u4ee5\u53ca\u540e\u7eed\u6a21\u578b\u6027\u80fd\u7684\u4ef7\u503c\u3002</p> <p>\u603b\u800c\u8a00\u4e4b\uff0c\u5728\u8fd9\u9879\u5de5\u4f5c\u4e2d\uff0c\u6211\u4eec\u505a\u51fa\u4e86\u4ee5\u4e0b\u8d21\u732e\uff1a</p> <ul> <li>C1 \u6211\u4eec\u53d1\u5e03\u4e86 RedPajama-V1 \u6570\u636e\u96c6\uff0c\u8fd9\u662f\u7528\u4e8e\u8bad\u7ec3LLaMA-1[57]\u7684\u5f00\u6e90\u590d\u73b0\u6570\u636e\u96c6\u3002\u6211\u4eec\u8fd8\u5305\u62ec\u4e00\u4efd\u5173\u4e8e\u521b\u5efa\u8bed\u6599\u5e93\u7684\u8003\u8651\u56e0\u7d20\u7684\u8be6\u7ec6\u62a5\u544a\u3002</li> <li>C2 \u6211\u4eec\u62a5\u544a\u4e86 RedPajama-INCITE \u6a21\u578b\u8bad\u7ec3\u7684\u8fc7\u7a0b\u548c\u8bc4\u4f30\u65b9\u6cd5\uff0c\u5305\u62ec\u6211\u4eec\u5982\u4f55\u4f7f\u7528Summit\u8d85\u7ea7\u8ba1\u7b97\u673a\u4ee5\u53ca\u6211\u4eec\u5fc5\u987b\u5e94\u5bf9\u7684\u6311\u6218\u7684\u7ec6\u8282\u3002</li> <li>C3 \u6211\u4eec\u53d1\u5e03\u4e86 RedPajama-V2 \u6570\u636e\u96c6\uff0c\u8fd9\u662f\u6700\u5927\u7684\u5f00\u6e90\u9884\u8bad\u7ec3\u6570\u636e\u96c6\uff0c\u5b83\u5305\u542b\u4ece\u7f51\u7edc\u4e0a\u6293\u53d6\u7684\u539f\u59cb\u3001\u672a\u8fc7\u6ee4\u7684\u6570\u636e\uff0c\u4ee5\u53ca\u4e3a\u6bcf\u4e2a\u6587\u6863\u8ba1\u7b97\u7684 46 \u9879\u8d28\u91cf\u6307\u6807\uff0c\u4ee5\u4fc3\u8fdb\u6570\u636e\u6574\u7406\u65b9\u9762\u7684\u8fdb\u4e00\u6b65\u7814\u7a76\u3002</li> <li>C4 \u57fa\u4e8e RedPajama-V2 \u6570\u636e\u96c6\uff0c\u6211\u4eec\u5bf9\u5177\u6709 4.68 \u4ebf\u53c2\u6570\u7684\u4ec5\u89e3\u7801\u5668 Transformer \u6a21\u578b\u8fdb\u884c\u4e86\u4e00\u7cfb\u5217\u6d88\u878d\u7814\u7a76\uff0c\u5c55\u793a\u4e86\u5982\u4f55\u5229\u7528\u8d28\u91cf\u4fe1\u53f7\u521b\u5efa\u5728\u5e38\u89c1 NLP \u57fa\u51c6\u6d4b\u8bd5\u4e2d\u6027\u80fd\u4e0d\u540c\u7684\u6a21\u578b\u3002</li> </ul> <p>\u672c\u6587\u7684\u5176\u4f59\u90e8\u5206\u7ec4\u7ec7\u5982\u4e0b\u3002\u5728\u7b2c 2 \u8282\u4e2d\uff0c\u6211\u4eec\u5c06 RedPajama \u6570\u636e\u96c6\u7f6e\u4e8e\u5f53\u524d\u5f00\u6e90\u9884\u8bad\u7ec3\u6570\u636e\u96c6\u7684\u683c\u5c40\u4e2d\u3002\u7b2c 3 \u8282\u63cf\u8ff0\u4e86 RedPajama-V1 \u80cc\u540e\u7684\u6570\u636e\u96c6\u521b\u5efa\u8fc7\u7a0b\u7684\u7ec6\u8282\uff0c\u4ee5\u53ca\u6784\u5efa RedPajama-INCITE \u6a21\u578b\u7cfb\u5217\u7684\u8fc7\u7a0b\u3002\u7b2c 4 \u8282\u7ee7\u7eed\u4ecb\u7ecd\u6211\u4eec\u7684\u4ec5\u9650\u7f51\u7edc\u7684\u6570\u636e\u96c6 RedPajama-V2\u3002\u9664\u4e86\u63cf\u8ff0\u6570\u636e\u5904\u7406\u6b65\u9aa4\u5916\uff0c\u6211\u4eec\u8fd8\u4ecb\u7ecd\u4e86\u6570\u636e\u96c6\u7edf\u8ba1\u6570\u636e\u548c\u6d88\u878d\u7814\u7a76\u3002\u6700\u540e\uff0c\u6211\u4eec\u5728\u7b2c 5 \u8282\u4e2d\u603b\u7ed3\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#2","title":"2.\u76f8\u5173\u5de5\u4f5c","text":"<p>\u8bb8\u591a\u5de5\u4f5c\u90fd\u96c6\u4e2d\u5728\u6784\u5efa\u5927\u578b\u8bed\u8a00\u6a21\u578b\u7684\u9884\u8bad\u7ec3\u6570\u636e\u96c6\u4e0a\u3002\u4e00\u4e9b\u6570\u636e\u96c6\u662f\u4ece\u5404\u79cd\u6765\u6e90\u6df7\u5408\u6574\u7406\u7684\uff0c\u800c\u53e6\u4e00\u4e9b\u6570\u636e\u96c6\u5219\u5b8c\u5168\u6765\u81ea\u7f51\u7edc\u6570\u636e\u3002\u5728\u4ec5\u9650\u7f51\u7edc\u7684\u6570\u636e\u96c6\u4e2d\uff0cC4 \u6570\u636e\u96c6 [46] \u662f\u9996\u6279\u5927\u578b\u7f51\u7edc\u6570\u636e\u96c6\u4e4b\u4e00\uff0c\u5b83\u5305\u542b\u4e00\u4e2a\u4ece CommonCrawl \u8fc7\u6ee4\u51fa\u7684 1750 \u4ebf\u4e2a\u7b26\u5143\u7684\u7f51\u7edc\u8bed\u6599\u5e93\u3002C4 \u4ecd\u7136\u662f\u7f51\u7edc\u6570\u636e\u96c6\u8d28\u91cf\u7684\u57fa\u51c6\u3002\u6700\u8fd1\uff0cRefinedWeb [44] \u548c FineWeb [43] \u5df2\u7ecf\u8bc1\u660e\uff0c\u4ec5\u9650\u7f51\u7edc\u7684\u6570\u636e\u53ef\u4ee5\u5728\u65e0\u9700\u7ec4\u5408\u591a\u4e2a\u9886\u57df\u7684\u60c5\u51b5\u4e0b\u4ea7\u751f\u5f3a\u5927\u7684\u6a21\u578b\uff0c\u5e76\u4e14\u4e0e\u6211\u4eec\u7684\u5de5\u4f5c\u7c7b\u4f3c\uff0c\u4e5f\u63d0\u4f9b\u4e86\u5173\u4e8e\u5176\u6570\u636e\u6574\u7406\u6280\u672f\u7684\u5145\u8db3\u7ec6\u8282\u3002\u4e0e\u8fd9\u4e9b\u6570\u636e\u96c6\u5f62\u6210\u5bf9\u6bd4\u7684\u662f\uff0cRedPajama-V2\u7531100\u4e07\u4ebf\u4e2a\u539f\u59cb\u7684\u3001\u5927\u90e8\u5206\u672a\u7ecf\u8fc7\u6ee4\u7684\u6587\u672c\u7b26\u5143\u7ec4\u6210\u3002RedPajama-V2\u62e5\u670940\u591a\u4e2a\u7528\u4e8e\u6f5c\u5728\u8fc7\u6ee4\u7684\u8d28\u91cf\u4fe1\u53f7\uff0c\u5b83\u63a8\u5e7f\u4e86\u4e00\u79cd\u5b8c\u5168\u4e0d\u540c\u7684\u65b9\u6cd5\uff0c\u65e8\u5728\u4e3a\u672a\u6765\u7684\u9ad8\u8d28\u91cf\u7f51\u7edc\u6570\u636e\u96c6\u8bbe\u5b9a\u65b0\u7684\u6807\u51c6\uff0c\u4e3a\u4e0b\u4e00\u4ee3\u9ad8\u8d28\u91cf\u7f51\u7edc\u6570\u636e\u96c6\u63d0\u4f9b\u5f3a\u5927\u7684\u57fa\u7840\u3002\u6b64\u5916\uff0c[45]\u4e2d\u63d0\u51fa\u7684Gopher\u89c4\u5219\u4e5f\u5177\u6709\u91cd\u8981\u610f\u4e49\uff0c\u8fd9\u4e9b\u89c4\u5219\u4e00\u76f4\u662f\u8bb8\u591a\u524d\u9762\u63d0\u5230\u7684\u5f00\u6e90\u9884\u8bad\u7ec3\u6570\u636e\u96c6\u7684\u6838\u5fc3\u3002</p> <p>\u4f5c\u4e3a\u5bf9\u4ec5\u9650\u7f51\u7edc\u6570\u636e\u96c6\u7684\u8865\u5145\uff0c\u590d\u5408\u6570\u636e\u96c6\u5f15\u5165\u4e86\u989d\u5916\u7684\u9886\u57df\u5e76\u5b9e\u73b0\u4e86\u66f4\u5e7f\u6cdb\u7684\u8986\u76d6\u8303\u56f4\u3002\u6700\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0cThe Pile [17]\u662f\u6700\u65e9\u7684\u5b8c\u5168\u5f00\u6e90\u6570\u636e\u96c6\u4e4b\u4e00\u3002\u5728LLaMA [57]\u53d1\u5e03\u4e4b\u540e\uff08LLaMA\u4f7f\u7528\u4e86\u4e03\u4e2a\u5355\u72ec\u7684\u5b50\u96c6\u548c\u591a\u4e2a\u9886\u57df\uff09\uff0c\u6211\u4eec\u53d1\u5e03\u4e86RedPajama-V1\uff0c\u8fd9\u662f\u4e00\u4e2aLLaMA\u65b9\u6848\u7684\u5f00\u6e90\u590d\u73b0\u7248\u672c\uff0c\u5e76\u5f97\u5230\u4e86\u5e7f\u6cdb\u91c7\u7528\u3002\u5728\u6b64\u57fa\u7840\u4e0a\uff0cSlimPajama\u6570\u636e\u96c6[51]\u901a\u8fc7\u8fdb\u4e00\u6b65\u6e05\u7406\u548c\u53bb\u91cd\u4eceRedPajama-V1\u4e2d\u884d\u751f\u51fa\u6765\u3002\u540c\u6837\uff0cDolma [52]\u6570\u636e\u96c6\u5305\u62ec\u5176\u4ed6\u4e13\u95e8\u7684\u9886\u57df\uff0c\u4f8b\u5982\u4ee3\u7801\u6570\u636e\u96c6\u7684\u6e05\u7406\u7248\u672c\uff0c\u5305\u62ecThe Stack [25]\u3001StarcoderData [31]\u4ee5\u53caRedPajama-V1\u7684ArXiv\u548cStackExchange\u90e8\u5206\u3002Zyda [56]\u6570\u636e\u96c6\u91c7\u7528\u4e86\u7c7b\u4f3c\u7684\u65b9\u6cd5\uff0c\u5e76\u8fdb\u4e00\u6b65\u7ec6\u5316\u4e86\u5f00\u6e90\u6570\u636e\u96c6\uff0c\u5305\u62ec\u4eceRedPajama-V1\u884d\u751f\u7684SlimPajama\u6570\u636e\u96c6\u3002 \u6700\u540e\uff0cROOTS\u8bed\u6599\u5e93[26, 27]\u4e5f\u5c5e\u4e8e\u6838\u5fc3\u5f00\u6e90\u6570\u636e\u96c6\uff0c\u6db5\u76d6\u591a\u4e2a\u9886\u57df\u548c\u8bed\u8a00\u3002\u8868\u683c1\u6982\u8ff0\u4e86\u8fd9\u4e9b\u5f00\u653e\u6570\u636e\u96c6\uff0c\u5e76\u5bf9\u6bcf\u4e2a\u6570\u636e\u96c6\u5728\u900f\u660e\u5ea6\u3001\u591a\u529f\u80fd\u6027\u548c\u89c4\u6a21\u65b9\u9762\u7684\u8868\u73b0\u8fdb\u884c\u4e86\u6bd4\u8f83\u3002</p> <p></p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#3redpajama-v1llama","title":"3.RedPajama-V1\uff1aLLaMA\u8bad\u7ec3\u6570\u636e\u7684\u5f00\u653e\u5f0f\u590d\u73b0","text":"<p>\u5728\u6211\u4eec RedPajama \u6570\u636e\u96c6\u7684\u7b2c\u4e00\u6b21\u8fed\u4ee3\u4e2d\uff0c\u6211\u4eec\u7684\u4e3b\u8981\u76ee\u6807\u662f\u590d\u73b0 LLaMA \u6280\u672f\u62a5\u544a[57]\u4e2d\u8bb0\u5f55\u7684\u8bad\u7ec3\u6570\u636e\u3002\u4e3a\u6b64\uff0c\u6211\u4eec\u4e25\u683c\u9075\u5faa\u539f\u59cb\u65b9\u6848\u7684\u63cf\u8ff0\u3002\u672c\u8282\u9996\u5148\u8bb0\u5f55\u6211\u4eec\u91cd\u5efa\u539f\u59cb LLaMA \u8bad\u7ec3\u8bed\u6599\u5e93\u7684\u8fc7\u7a0b\uff08\u7b2c3.1\u8282\uff09\u3002\u6211\u4eec\u91cd\u70b9\u6307\u51fa\u4e86\u539f\u59cb\u6570\u636e\u96c6\u6536\u96c6\u63cf\u8ff0\u4e2d\u7684\u4e0d\u8db3\u4e4b\u5904\uff0c\u5e76\u63cf\u8ff0\u4e86\u6211\u4eec\u5982\u4f55\u89e3\u51b3\u8fd9\u4e9b\u6b67\u4e49\u3002\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u62a5\u544a\u4e86 RedPajama-INCITE\uff0c\u8fd9\u662f\u4e00\u4e2a\u4e0e\u6a61\u6811\u5cad\u56fd\u5bb6\u5b9e\u9a8c\u5ba4\uff08ORNL\uff09\u5408\u4f5c\uff0c\u57fa\u4e8e\u6b64\u8bed\u6599\u5e93\u8bad\u7ec3\u7684\u4e00\u7cfb\u5217\u6a21\u578b\uff08\u7b2c3.2\u8282\uff09\u3002\u6211\u4eec\u53d1\u73b0\uff0c\u5c3d\u7ba1\u751f\u6210\u76843B\u89c4\u6a21\u6a21\u578b\u6027\u80fd\u826f\u597d\uff0c\u4f46\u57287B\u89c4\u6a21\u4e0a\u4ecd\u7136\u4e0e\u539f\u59cbLLaMA-7B\u6a21\u578b\u5b58\u5728\u5dee\u8ddd\u3002\u6211\u4eec\u5047\u8bbe\u8fd9\u90e8\u5206\u662f\u7531\u4e8e\u9700\u8981\u4f7f\u7528FP16\u7cbe\u5ea6\u8fdb\u884c\u8bad\u7ec3\u9020\u6210\u7684\u3002\u6b64\u5916\uff0c\u8fd9\u4e5f\u8868\u660e\u539f\u59cbLLaMA\u8bad\u7ec3\u8bed\u6599\u5e93\u6784\u5efa\u4e2d\u7684\u4e00\u4e9b\u91cd\u8981\u7ec6\u8282\u53ef\u80fd\u7f3a\u5931\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#31","title":"3.1\u6570\u636e\u5904\u7406\u6b65\u9aa4","text":"<p>\u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u63cf\u8ff0\u4e86\u6211\u4eec\u5c1d\u8bd5\u91cd\u5efa LLaMa \u6280\u672f\u62a5\u544a[57]\u4e2d\u63cf\u8ff0\u7684\u8bad\u7ec3\u8bed\u6599\u5e93\u3002LLaMA \u8bad\u7ec3\u8bed\u6599\u5e93\u7684\u9884\u8bad\u7ec3\u6570\u636e\u6765\u81ea\u4e03\u4e2a\u6570\u636e\u96c6\uff1a\u82f1\u6587CommonCrawl\u3001C4\u3001GitHub\u3001\u7ef4\u57fa\u767e\u79d1\u3001\u4e66\u7c4d\uff08\u53e4\u817e\u5821\u8ba1\u5212\u548cBooks3\uff09\u3001ArXiv\u548cStack Exchange\u3002LLaMA \u6280\u672f\u62a5\u544a\u4e2d\u5bf9\u6bcf\u4e2a\u6570\u636e\u96c6\u90fd\u8fdb\u884c\u4e86\u7b80\u77ed\u7684\uff08\u5927\u7ea6\u4e00\u6bb5\uff09\u63cf\u8ff0\uff0c\u4f46\u6570\u636e\u96c6\u63cf\u8ff0\u4e2d\u5b58\u5728\u4e00\u4e9b\u4e0d\u8db3\u4e4b\u5904\u3002\u5728\u672c\u8282\u4e2d\uff0c\u6211\u4eec\u8be6\u7ec6\u4ecb\u7ecd\u4e86\u590d\u73b0\u6bcf\u4e2a\u6570\u636e\u96c6\u7684\u8fc7\u7a0b\uff0c\u91cd\u70b9\u6307\u51fa\u4e86LLaMA\u6280\u672f\u62a5\u544a\u4e2d\u63cf\u8ff0\u7684\u4e0d\u8db3\u4e4b\u5904\uff0c\u5e76\u63cf\u8ff0\u4e86\u6211\u4eec\u89e3\u51b3\u8fd9\u4e9b\u6b67\u4e49\u7684\u9009\u62e9\u3002\u8fd9\u4e9b\u6b65\u9aa4\u5171\u540c\u4ea7\u751f\u4e86\u4e00\u4e2a\u5927\u7ea61.2\u4e07\u4ebf\u4e2a\u7b26\u5143\u7684\u6570\u636e\u96c6\u3002\u88682\u603b\u7ed3\u4e86\u8fd9\u4e9b\u6570\u636e\u96c6\u548c\u7b26\u5143\u8ba1\u6570\u3002\u5728\u9644\u5f55\u4e2d\u7684\u886810\u4e2d\uff0c\u6211\u4eec\u8fdb\u4e00\u6b65\u5217\u51fa\u4e86\u5728\u6570\u636e\u96c6\u6784\u5efa\u8fc7\u7a0b\u4e2d\u9047\u5230\u7684\u6240\u6709\u4e0d\u786e\u5b9a\u6027\u3002</p> <p></p> <ul> <li>\u666e\u901a\u6293\u53d6 LLaMA\u8bed\u6599\u5e93\u5305\u542b 2017 \u5e74\u81f3 2020 \u5e74\u7684\u4e94\u4e2aCommonCrawl\u5feb\u7167\uff0c\u8fd9\u4e9b\u5feb\u7167\u4f7f\u7528CCNet\u7ba1\u9053[61]\u8fdb\u884c\u5904\u7406\u3002 CCNet\u5bf9\u5206\u7247\u4e2d\u7684\u6bcf\u4e2a\u5feb\u7167\u8fdb\u884c\u53bb\u91cd\uff0c\u5e76\u4e3a\u6bcf\u4e2a\u5feb\u7167\u4e2d\u7684\u6570\u636e\u5206\u914d\u8d28\u91cf\u7b49\u7ea7\u3002\u5b83\u57fa\u4e8e\u5728\u7ef4\u57fa\u767e\u79d1\u4e0a\u8bad\u7ec3\u76845-gram Kneser-Ney\u6a21\u578b\u5206\u914d\u7684\u56f0\u60d1\u5ea6\u5206\u5e03\uff0c\u4e3a\u6bcf\u4e2a\u6587\u6863\u5206\u914d\u201c\u5934\u90e8\u201d\u3001\u201c\u4e2d\u95f4\u201d\u548c\u201c\u5c3e\u90e8\u201d\u5206\u7c7b\u3002\u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u53ea\u4fdd\u7559\u201c\u5934\u90e8\u201d\u548c\u201c\u4e2d\u95f4\u201d\u90e8\u5206\uff0c\u5e76\u4e22\u5f03\u201c\u5c3e\u90e8\u201d\u3002\u6b64\u5916\uff0cTouvron\u7b49\u4eba\u3002[57]\u4f7f\u7528\u5728\u7ef4\u57fa\u767e\u79d1\u53c2\u8003\u6587\u7ae0\u4e0a\u8bad\u7ec3\u7684\u7ebf\u6027\u5206\u7c7b\u5668\u6765\u8fc7\u6ee4\u6389\u4f4e\u8d28\u91cf\u6587\u6863\u3002 LLaMA\u8bba\u6587\u6ca1\u6709\u6307\u5b9a\u6570\u636e\u96c6\u4e2d\u4f7f\u7528\u4e86\u54ea\u4e9b\u5feb\u7167\uff0c\u4e5f\u6ca1\u6709\u7ed9\u51fa\u5173\u4e8e\u5206\u7c7b\u5668\u7684\u8be6\u7ec6\u4fe1\u606f\u3002</li> </ul> <p>\u6211\u4eec\u9009\u62e9\u4e86\u4e94\u4e2a\u82f1\u6587CommonCrawl\u5feb\u71672019-30, 2020-05, 2021-04, 2022-5\u548c2023-06\uff0c\u4ee3\u8868\u9879\u76ee\u5f00\u59cb\u524d\u4e94\u5e74\u4e2d\u7684\u7b2c\u4e00\u4e2a\u5feb\u7167\u3002\u4e3a\u4e86\u8bad\u7ec3\u7ef4\u57fa\u767e\u79d1\u53c2\u8003\u5206\u7c7b\u5668\uff0c\u6211\u4eec\u57282023\u5e744\u67081\u65e5\u524d\u4e0b\u8f7d\u4e86\u6700\u65b0\u7684\u53ef\u7528\u82f1\u6587\u7ef4\u57fa\u767e\u79d1\u5feb\u7167\u3002\u6211\u4eec\u4ece\u7ef4\u57fa\u767e\u79d1\u5feb\u7167\u4e2d\u63d0\u53d6\u4e863800\u4e07\u4e2aURL\uff0c\u5e76\u722c\u53d6\u4e8630\u4e07\u4e2a\u9875\u9762\u3002\u7136\u540e\uff0c\u6211\u4eec\u4f7f\u7528CCNet\u7ba1\u9053\u5bf9\u7ef4\u57fa\u767e\u79d1\u53c2\u8003\u6587\u732e\u8fdb\u884c\u9002\u5ea6\u7684\u6e05\u6d17\u6b65\u9aa4\uff0c\u5e76\u4f7f\u7528fastText\u8bad\u7ec3\u4e00\u4e2aunigram\u5206\u7c7b\u5668\u3002\u6700\u540e\uff0c\u6211\u4eec\u5c06\u6240\u6709\u5f97\u5206\u4f4e\u4e8e0.25\u7684\u6587\u6863\u8fc7\u6ee4\u6389\uff0c\u8fd9\u5c06\u6211\u4eec\u7684CommonCrawl\u6570\u636e\u96c6\u7f29\u51cf\u5230\u4e0eLLaMA CommonCrawl\u6570\u636e\u96c6\u5927\u81f4\u76f8\u540c\u7684\u5927\u5c0f\u3002</p> <ul> <li> <p>C4 LLaMA\u8bed\u6599\u5e93\u5305\u542bC4\u6570\u636e\u96c6[46]\uff0c\u4ee5\u5305\u542bCommonCrawl\u7684\u4e0d\u540c\u7248\u672c\u3002 \u6211\u4eec\u4f7f\u7528C4\u7684c4_en\u7248\u672c\uff0c\u8be5\u7248\u672c\u7531Allen AI\u5728Hugging Face Hub\u4e0a\u63d0\u4f9b\u3002</p> </li> <li> <p>Github LLaMA\u8bed\u6599\u5e93\u4f7f\u7528\u5728Google BigQuery\u4e0a\u53ef\u7528\u7684\u516c\u5171GitHub\u6570\u636e\u96c6\uff0c\u5e76\u4fdd\u7559\u5728Apache\u3001BSD\u548cMIT\u8bb8\u53ef\u8bc1\u4e0b\u5206\u53d1\u7684\u9879\u76ee\u3002LLaMA\u8bed\u6599\u5e93\u8fd8\u4f7f\u7528\u4e00\u4e9b\u542f\u53d1\u5f0f\u65b9\u6cd5\u8fc7\u6ee4\u4f4e\u8d28\u91cf\u6587\u4ef6\uff0c\u5e76\u5728\u6587\u4ef6\u7ea7\u522b\u8fdb\u884c\u53bb\u91cd\u3002\u5bf9\u4e8eRedPajama-V1\uff0c\u6211\u4eec\u4f7f\u7528\u4e00\u7ec4\u57fa\u4e8e\u6587\u4ef6\u957f\u5ea6\u3001\u5b57\u6bcd\u6570\u5b57\u5b57\u7b26\u6bd4\u4f8b\u548c\u6587\u4ef6\u6269\u5c55\u540d\u7684\u8fc7\u6ee4\u5668\u6765\u5220\u9664\u4f4e\u8d28\u91cf\u6587\u4ef6\u3002\u6211\u4eec\u5728\u9644\u5f55C\u4e2d\u63d0\u4f9b\u4e86\u5b8c\u6574\u7684\u542f\u53d1\u5f0f\u7b97\u6cd5\u5217\u8868\u3002</p> </li> <li> <p>\u7ef4\u57fa\u767e\u79d1 LLaMA\u8bed\u6599\u5e93\u4f7f\u75282022\u5e746\u6708\u81f38\u6708\u671f\u95f420\u79cd\u8bed\u8a00\u7684\u7ef4\u57fa\u767e\u79d1\u8f6c\u50a8\uff0c\u5e76\u5bf9\u6570\u636e\u8fdb\u884c\u5904\u7406\u4ee5\u5220\u9664\u8d85\u94fe\u63a5\u3001\u6ce8\u91ca\u548c\u5176\u4ed6\u683c\u5f0f\u6837\u677f\u3002\u5bf9\u4e8eRedPajama-V1\uff0c\u6211\u4eec\u4f7f\u7528Hugging Face Hub\u4e0a\u63d0\u4f9b\u7684\u7ef4\u57fa\u767e\u79d1\u6570\u636e\u96c6\uff0c\u8be5\u6570\u636e\u96c6\u4f7f\u75282023\u5e743\u670820\u65e5\u7684\u8f6c\u50a8\u3002 \u8fd9\u4e5f\u9884\u5904\u7406\u6570\u636e\u4ee5\u5220\u9664\u8d85\u94fe\u63a5\u3001\u6ce8\u91ca\u548c\u5176\u4ed6\u6837\u677f\u3002</p> </li> <li> <p>Gutenberg and Books3 LLaMA\u8bed\u6599\u5e93\u4f7f\u7528\u6765\u81ea\u53e4\u817e\u5821\u8ba1\u5212\u7684\u56fe\u4e66\u8bed\u6599\u5e93\u548c\u6765\u81eaPile\u7684Books3\u3002\u6211\u4eec\u53ea\u4f7f\u7528\u53e4\u817e\u5821\u8ba1\u5212\u7684PG19\u5b50\u96c6\uff0c\u5e76\u4f7f\u7528SimHash\u53bb\u9664\u8fd1\u4f3c\u91cd\u590d\u9879\u3002 \u6211\u4eec\u6700\u521d\u4e5f\u5305\u542bBooks3\uff0c\u4f46\u7531\u4e8e\u7248\u6743\u95ee\u9898\u5c06\u5176\u5220\u9664\u3002</p> </li> <li> <p>arXiv LLaMA\u8bed\u6599\u5e93\u5904\u7406arXiv LaTeX\u6587\u4ef6\uff0c\u5e76\u5220\u9664\u7b2c\u4e00\u8282\u4e4b\u524d\u7684\u6240\u6709\u5185\u5bb9\u3001\u6ce8\u91ca\u3001\u5185\u8054\u5c55\u5f00\u7684\u5b9a\u4e49\u548c\u5b8f\u4ee5\u53ca\u53c2\u8003\u6587\u732e\uff0c\u9075\u5faa[29]\u3002\u6211\u4eec\u4eceAmazon S3\u4e0b\u8f7d\u4e86\u201carXiv\u201d\u8bf7\u6c42\u8005\u4ed8\u8d39\u5b58\u50a8\u6876\u4e2d\u7684arXiv\u6570\u636e\uff0c\u5e76\u5b9e\u73b0\u4e86\u7c7b\u4f3c\u7684\u540e\u5904\u7406\uff0c\u53ea\u4fdd\u7559LaTeX\u6e90\u6587\u4ef6\u5e76\u5220\u9664\u5e8f\u8a00\u3001\u6ce8\u91ca\u3001\u53c2\u8003\u6587\u732e\uff0c\u5e76\u5c55\u5f00\u5b8f\u3002</p> </li> <li> <p>Stack Exchange LLaMa\u8bed\u6599\u5e93\u5305\u542bStack Exchange\u7684\u8f6c\u50a8\u3002 \u6570\u636e\u4fdd\u7559\u6765\u81ea28\u4e2a\u6700\u5927\u7684\u7f51\u7ad9\uff0c\u6587\u672c\u4e2d\u5220\u9664HTML\u6807\u7b7e\uff0c\u7b54\u6848\u6309\u5f97\u5206\u4ece\u9ad8\u5230\u4f4e\u6392\u5e8f\u3002 \u540c\u6837\uff0c\u6211\u4eec\u4ece\u4e92\u8054\u7f51\u6863\u6848\u4e0b\u8f7dStack Exchange\uff0c\u53ea\u4fdd\u7559\u6765\u81ea28\u4e2a\u6700\u5927\u7f51\u7ad9\u7684\u5e16\u5b50\uff0c\u5e76\u5220\u9664HTML\u6807\u7b7e\u3002\u6b64\u5916\uff0c\u6211\u4eec\u5c06\u5e16\u5b50\u5206\u7ec4\u4e3a\u95ee\u7b54\u5bf9\uff0c\u5e76\u6309\u5176\u5f97\u5206\u5bf9\u7b54\u6848\u8fdb\u884c\u6392\u5e8f\u3002</p> </li> </ul>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#32redpajama-incite","title":"3.2RedPajama-INCITE \u7cfb\u5217\u5927\u8bed\u8a00\u6a21\u578b","text":"<p>\u4e3a\u4e86\u8bc4\u4f30 RedPajama-V1 \u4e0e\u539f\u59cb LLaMA \u8bed\u6599\u5e93\u7684\u5339\u914d\u7a0b\u5ea6\uff0c\u6211\u4eec\u4e0e Incite \u9879\u76ee\u5408\u4f5c\uff0c\u5728\u6a61\u6811\u5cad\u56fd\u5bb6\u5b9e\u9a8c\u5ba4\u7684 Summit \u8d85\u7ea7\u8ba1\u7b97\u673a\u4e0a\u8bad\u7ec3\u4e86\u4e00\u7cfb\u5217\u4e0d\u540c\u89c4\u6a21\u7684\u5927\u8bed\u8a00\u6a21\u578b\u3002 RedPajama-Incite \u7cfb\u5217\u5927\u8bed\u8a00\u6a21\u578b\u5305\u62ec\u4e00\u5957 3B \u548c 7B \u6a21\u578b\u89c4\u6a21\u7684\u9884\u8bad\u7ec3\u548c\u6307\u4ee4\u8c03\u4f18\u6a21\u578b\u3002\u5728\u672c\u8282\u4e2d\uff0c\u6211\u4eec\u9996\u5148\u63cf\u8ff0 Summit \u8d85\u7ea7\u8ba1\u7b97\u673a\u7684\u8ba1\u7b97\u8bbe\u7f6e\u4ee5\u53ca\u5bf9\u9884\u8bad\u7ec3\u8fd0\u884c\u7684\u5f71\u54cd\uff08\u7b2c 3.2.1 \u8282\uff09\u3002\u7136\u540e\uff0c\u6211\u4eec\u5c06\u63cf\u8ff0\u5982\u4f55\u8bc4\u4f30\u6a21\u578b\uff0c\u5e76\u63a8\u6d4b\u8fd9\u4e9b\u6a21\u578b\u4e0e LLaMA \u7cfb\u5217\u6a21\u578b\u4e4b\u95f4\u8d28\u91cf\u5dee\u5f02\uff08\u7b2c 3.2.2 \u8282\uff09\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#321-summit","title":"3.2.1 Summit \u8bad\u7ec3\u8bbe\u7f6e","text":"<p>\u5728\u672c\u8282\u4e2d\uff0c\u6211\u4eec\u5c06\u63cf\u8ff0 Summit \u8d85\u7ea7\u8ba1\u7b97\u673a\u4ee5\u53ca\u8bad\u7ec3 RedPajama-Incite \u7cfb\u5217\u5927\u8bed\u8a00\u6a21\u578b\u7684\u5de5\u7a0b\u548c\u9884\u8bad\u7ec3\u6311\u6218\u3002\u6211\u4eec\u7684\u8bed\u8a00\u6a21\u578b\u4f7f\u7528\u6a61\u6811\u5cad\u56fd\u5bb6\u5b9e\u9a8c\u5ba4\u7684 Summit \u8d85\u7ea7\u8ba1\u7b97\u673a\u8fdb\u884c\u8bad\u7ec3\uff0c\u8fd9\u662f\u4e00\u4e2a\u5305\u542b 4608 \u4e2a 6xV100 \u8282\u70b9\u7684\u96c6\u7fa4\uff0c\u8fd0\u884c IBM Power9 \u67b6\u6784\u3002\u8fd9\u79cd\u8bbe\u7f6e\u5728\u8bad\u7ec3\u73b0\u4ee3\u5927\u8bed\u8a00\u6a21\u578b\u65f6\u5e26\u6765\u4e86\u4e00\u4e9b\u6311\u6218\u3002 \u5728\u4e0b\u6587\u4e2d\uff0c\u6211\u4eec\u5c06\u8ba8\u8bba\u8fd9\u4e9b\u6311\u6218\u5e76\u63cf\u8ff0\u6211\u4eec\u5982\u4f55\u514b\u670d\u5b83\u4eec\u3002</p> <p>IBM Power9 \u67b6\u6784 \u4f7f\u7528\u7684\u6307\u4ee4\u96c6\u4e0e\u5927\u591a\u6570\u73b0\u4ee3\u82af\u7247\u7ec4\uff08\u5373\u82f1\u7279\u5c14\u3001ARM \u6216\u82f9\u679c\u7684\u82af\u7247\uff09\u4e0d\u540c\u3002\u73b0\u4ee3\u7248\u672c\u7684 PyTorch \u4ee5\u53ca\u5b83\u4eec\u4f9d\u8d56\u7684\u5927\u90e8\u5206 Python \u6808\u90fd\u6ca1\u6709\u9884\u7f16\u8bd1\u4ee5\u652f\u6301 Power9 \u67b6\u6784\uff08\u5b98\u65b9\u652f\u6301\u7684\u6700\u65b0\u7248\u672c\u662f PyTorch 1.9\uff09\u3002 \u4e3a\u4e86\u652f\u6301\u4f7f\u7528\u73b0\u4ee3\u5e93\u8fdb\u884c\u9884\u8bad\u7ec3\uff0c\u6211\u4eec\u56e2\u961f\u7684\u6210\u5458\u9700\u8981\u4ece\u5934\u91cd\u65b0\u7f16\u8bd1 PyTorch \u5e76\u4e3a Summit \u6784\u5efa\u4e00\u4e2a\u81ea\u5b9a\u4e49\u8bad\u7ec3\u6808\u3002 \u5176\u4e2d\u4e00\u4e9b\u5de5\u4f5c\u5728 GPT-NeoX \u6280\u672f\u62a5\u544a [6] \u4e2d\u6709\u66f4\u8be6\u7ec6\u7684\u8bb0\u5f55\u3002</p> <p>\u5728\u64b0\u5199\u672c\u6587\u65f6\uff0cSummit \u8d85\u7ea7\u8ba1\u7b97\u673a\u8fd0\u884c\u5728 V100 GPU \u4e0a\uff0c\u8fd9\u6bd4\u901a\u5e38\u7528\u4e8e\u8bad\u7ec3\u5927\u8bed\u8a00\u6a21\u578b\u7684 A100 \u6216 H100 GPU \u66f4\u65e7\u3002\u81f3\u5173\u91cd\u8981\u7684\u662f\uff0cV100s \u4e0d\u652f\u6301 bf16 \u6570\u636e\u7c7b\u578b\uff0c\u800c\u8fd9\u5bf9\u4e8e\u73b0\u4ee3\u7a33\u5b9a\u7684 LLM \u8bad\u7ec3\u65b9\u6848\u662f\u5fc5\u8981\u7684\u3002\u76f8\u53cd\uff0c\u6211\u4eec\u4e0d\u5f97\u4e0d\u4f7f\u7528 fp16 \u8fdb\u884c\u8bad\u7ec3\uff0c\u5e76\u4f7f\u7528\u635f\u5931\u7f29\u653e[37]\u4ee5\u5b9e\u73b0\u7a33\u5b9a\u7684\u8bad\u7ec3\u8fd0\u884c\u3002\u6211\u4eec\u8fd8\u5fc5\u987b\u964d\u4f4e\u5b66\u4e60\u7387\uff0c\u8fd9\u4e0e LLaMA \u8bad\u7ec3\u4e2d\u62a5\u544a\u7684\u5b66\u4e60\u7387\u76f8\u6bd4\u6709\u6240\u964d\u4f4e\uff0c\u8fd9\u53ef\u80fd\u5bf9\u6536\u655b\u4ea7\u751f\u4e86\u5f71\u54cd\uff083B \u6a21\u578b\u4e3a $1.6 \\cdot 10 ^ {-4} $ \uff0c7B \u6a21\u578b\u4e3a \\(1.2 \\cdot 10 ^{-4}\\)\uff09\u3002</p> <p>IBM Power9 \u67b6\u6784\u5177\u6709\u7f13\u6162\u7684\u4e92\u8fde\uff0c\u9650\u5236\u4e86\u6211\u4eec\u6bcf\u6b21\u8fd0\u884c\u53ef\u4ee5\u4f7f\u7528\u7684\u8282\u70b9\u6570\u91cf\u3002 \u6211\u4eec\u4e5f\u65e0\u6cd5\u4f7f\u7528\u6574\u4e2a\u96c6\u7fa4\uff0c\u56e0\u4e3a\u5176\u4ed6\u9879\u76ee\u6b63\u5728\u540c\u65f6\u8fd0\u884c\u3002 \u6211\u4eec\u4f7f\u7528 512 \u4e2a\u8282\u70b9\u5e76\u884c\uff083072 \u4e2a GPU\uff09\u8bad\u7ec3 7B \u6a21\u578b\uff0c\u4f7f\u7528 256 \u4e2a\u8282\u70b9\u5e76\u884c\uff081536 \u4e2a GPU\uff09\u8bad\u7ec3 3B \u6a21\u578b\uff0c\u6bcf\u4e2a\u6a21\u578b\u7684\u5168\u5c40\u6279\u91cf\u5927\u5c0f\u4e3a 4M \u4e2a\u7b26\u5143\u3002 \u5728\u6269\u5c55\u5b9e\u9a8c\u4e2d\uff0c\u6211\u4eec\u53d1\u73b0\u5982\u679c\u4e0d\u589e\u52a0\u5168\u5c40\u6279\u91cf\u5927\u5c0f\uff0c\u6211\u4eec\u5c31\u65e0\u6cd5\u8fdb\u4e00\u6b65\u589e\u52a0\u5e76\u884c\u5ea6\uff0c\u8fd9\u4f1a\u635f\u5bb3\u6536\u655b\u6027\u3002</p> <p>6xV100 \u8282\u70b9 \u4e3a\u4f7f\u7528\u5f20\u91cf\u548c\u6d41\u6c34\u7ebf\u5e76\u884c\u8fdb\u884c\u8bad\u7ec3\u5e26\u6765\u4e86\u6311\u6218\u3002 \u6211\u4eec\u5bf9 7B \u6a21\u578b\u4f7f\u7528\u4e86 12 \u8def\u6d41\u6c34\u7ebf\u5e76\u884c\uff0c\u5bf9 3B \u6a21\u578b\u4f7f\u7528\u4e86 6 \u8def\u6d41\u6c34\u7ebf\u5e76\u884c\uff0c\u5e76\u4e14\u5bf9\u8fd9\u4e24\u4e2a\u6a21\u578b\u90fd\u4f7f\u7528\u4e86 2 \u8def\u5f20\u91cf\u5e76\u884c\u3002</p> <p>\u5728\u89e3\u51b3\u8fd9\u4e9b\u6311\u6218\u4e4b\u540e\uff0c\u6211\u4eec\u80fd\u591f\u5728 Summit \u4e0a\u603b\u5171\u8bad\u7ec3 3B \u6a21\u578b 8000 \u4ebf\u4e2a\u7b26\u5143\uff0c\u603b\u5171\u8bad\u7ec3 7B \u6a21\u578b 1.001 \u4e07\u4ebf\u4e2a\u7b26\u5143\u3002 \u6211\u4eec\u5728\u9884\u70ed\u671f\u4e4b\u540e\u7ebf\u6027\u8870\u51cf\u5b66\u4e60\u7387\uff0c\u8fd9\u4e0e\u539f\u59cb LLaMA \u8bba\u6587\u4e2d\u63cf\u8ff0\u7684\u5b66\u4e60\u7387\u4e00\u81f4\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#322","title":"3.2.2 \u8bc4\u4f30","text":"<p>\u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u8ba8\u8bba\u4e86 RedPajama-INCITE-3B \u548c 7B \u6a21\u578b\u5728\u5e38\u7528\u57fa\u51c6\u6d4b\u8bd5\u4e0a\u7684\u8bc4\u4f30\u3002\u5b8c\u6574\u7684\u6210\u679c\u548c\u57fa\u51c6\u5206\u6570\u5728\u9644\u5f55C.2\u4e2d\u63d0\u4f9b\u3002\u5728\u8bad\u7ec3 RedPajama-Base-INCITE-3B \u8fbe 8000 \u4ebf\u4e2a\u7b26\u5143\u540e\uff0c\u5b83\u5177\u6709\u66f4\u597d\u7684\u5c11\u6837\u672c\u6027\u80fd\uff08\u5728 HELM classic[9]\u4e2d\u8861\u91cf\uff0c\u4e3a 16 \u4e2a\u6838\u5fc3\u573a\u666f\u7684\u5e73\u5747\u5206\u6570\uff09\u548c\u66f4\u597d\u7684\u96f6\u6837\u672c\u6027\u80fd\uff08\u4f7f\u7528 Eleuther AI \u7684 LM \u8bc4\u4f30\u5de5\u5177[18]\u8861\u91cf\uff09\uff0c\u4e0e\u5176\u4ed6\u7c7b\u4f3c\u89c4\u6a21\u7684\u5f00\u653e\u6a21\u578b\u76f8\u6bd4\uff0c\u5305\u62ec\u5e7f\u53d7\u597d\u8bc4\u7684 GPT-Neo \u548c Pythia-2.8B\uff08\u5206\u522b\u4f7f\u7528 4200 \u4ebf\u548c 3000 \u4ebf\u4e2a\u7b26\u5143\u5728 Pile \u4e0a\u8bad\u7ec3\uff09\u3002 \u5728 HELM \u4e0a\uff0c\u5b83\u6bd4\u8fd9\u4e9b\u6a21\u578b\u9ad8\u51fa 3-5 \u5206\u3002 \u5728LMevaluation\u6d4b\u8bd5\u5957\u4ef6\u7684\u4e00\u4e2a\u5b50\u96c6\u4efb\u52a1\u4e0a\uff0c\u5b83\u6bd4\u8fd9\u4e9b\u5f00\u653e\u6a21\u578b\u7684\u6027\u80fd\u9ad8\u51fa2-7\u4e2a\u767e\u5206\u70b9\u3002</p> <p>\u5728HELM-classic\u6d4b\u8bd5\u4e2d\uff0cRedPajama-INCITE-7B-Base\u6a21\u578b\u6bd4 Falcon-7B \u843d\u540e1.0\u4e2a\u767e\u5206\u70b9\uff0c\u6bd4Llama-7B\u843d\u540e4.1\u4e2a\u767e\u5206\u70b9\u3002 \u6211\u4eec\u8fdb\u4e00\u6b65\u7ec6\u5206\u4e86\u8fd9\u4e9b\u4efb\u52a1\uff0c\u53d1\u73b0\u5b83\u53ea\u5728\u9700\u8981\u4f7f\u7528logprobs\u7684\u4efb\u52a1\u4e0a\u843d\u540e\uff0c\u800clogprobs\u8ba1\u7b97\u7684\u662f\u6b63\u786e\u7b54\u6848\u548c\u9519\u8bef\u7b54\u6848\u6982\u7387\u4e4b\u95f4\u7684\u5dee\u5f02\u3002 \u7136\u800c\uff0c\u8be5\u6a21\u578b\u5728\u76f4\u63a5\u751f\u6210\u7b54\u6848\u5e76\u8861\u91cf\u8d28\u91cf\u7684\u4efb\u52a1\u4e0a\u53d6\u5f97\u4e86\u76f8\u5f53\u7684\u5e73\u5747HELM\u5206\u6570\u3002 \u7531\u4e8eLM\u6d4b\u8bd5\u5957\u4ef6\u4e2d\u7684\u6240\u6709\u57fa\u51c6\u90fd\u4f7f\u7528logprobs\uff0c\u56e0\u6b64\u6211\u4eec\u5728\u8fd9\u4e2a\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u4e5f\u770b\u5230\u4e86\u7c7b\u4f3c\u7684\u8f83\u4f4e\u7ed3\u679c\u3002 \u6211\u4eec\u5047\u8bbe\u8fd9\u90e8\u5206\u662f\u7531\u4e8e\u4f7f\u7528FP16\u8fdb\u884c\u8bad\u7ec3\u9020\u6210\u7684\uff0c\u8fd9\u4f7f\u5f97\u6211\u4eec\u65e0\u6cd5\u4f7f\u7528\u66f4\u5927\u7684\u5b66\u4e60\u7387\u3002 \u6b64\u5916\uff0c\u5982\u4e0a\u4e00\u8282\u6240\u793a\uff0c\u8bad\u7ec3\u6570\u636e\u96c6\u7684\u6784\u5efa\u5b58\u5728\u4e0d\u786e\u5b9a\u6027\u6765\u6e90\uff0c\u8fd9\u53ef\u80fd\u5bfc\u81f4\u6570\u636e\u96c6\u4e0e\u7528\u4e8e\u8bad\u7ec3Llama-1\u6a21\u578b\u7684\u6570\u636e\u96c6\u7565\u6709\u4e0d\u540c\u3002 \u6211\u4eec\u8ba4\u4e3a\u8fd9\u4e24\u4e2a\u56e0\u7d20\u5bfc\u81f4\u4e86\u4e0eLlama\u6a21\u578b\u76f8\u6bd4\u6027\u80fd\u7565\u4f4e\u3002</p> <p>RedPajama-INCITE-7B-Instruct \u662f\u57fa\u7840\u6a21\u578b\u7684\u6307\u4ee4\u8c03\u4f18\u7248\u672c\uff0c\u901a\u8fc7\u5728\u6765\u81eaP3 (BigScience) [49]\u548cNatural Instructions (AI2) [39]\u7684\u5404\u79cdNLP\u4efb\u52a1\u4e0a\u8fdb\u884c\u8bad\u7ec3\uff0c\u4ece\u800c\u4f18\u5316\u4e86\u5c11\u6837\u672c\u6027\u80fd\u3002 Instruct\u7248\u672c\u5728\u5c11\u6837\u672c\u4efb\u52a1\u4e0a\u8868\u73b0\u51fa\u8272\uff0c\u5728HELM\u4e0a\u6bd4\u540c\u7b49\u89c4\u6a21\u7684\u9886\u5148\u5f00\u653e\u6a21\u578b\uff08\u5305\u62ecLlama-7B\u3001Falcon-7B\uff08\u57fa\u7840\u7248\u548c\u6307\u4ee4\u8c03\u4f18\u7248\uff09\u4ee5\u53caMPT-7B\uff08\u57fa\u7840\u7248\u548c\u6307\u4ee4\u8c03\u4f18\u7248\uff09\uff09\u9ad8\u51fa2-8\u4e2a\u767e\u5206\u70b9\u3002 \u6211\u4eec\u5728\u8865\u5145\u6750\u6599\u4e2d\u63d0\u4f9b\u4e86\u8be6\u7ec6\u7684\u8bc4\u4f30\u5206\u6570\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#4-redpajama-v2","title":"4. RedPajama-V2","text":"<p>\u4e0e RedPajama \u6570\u636e\u96c6\u7684\u7b2c\u4e00\u4e2a\u8fed\u4ee3\u7248\u672c\u76f8\u6bd4\uff0c\u7b2c\u4e8c\u4e2a\u8fed\u4ee3\u7248\u672c\u5b8c\u5168\u4e13\u6ce8\u4e8e\u7f51\u7edc\u6570\u636e\uff0c\u5e76\u4e14\u9664\u4e86\u900f\u660e\u5ea6\u548c\u89c4\u6a21\u7684\u8bbe\u8ba1\u539f\u5219\u5916\uff0c\u6211\u4eec\u8fd8\u66f4\u52a0\u91cd\u89c6\u901a\u7528\u6027\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u9664\u4e86\u63d0\u4f9b\u5b8c\u5168\u900f\u660e\u548c\u5f00\u6e90\u7684\u6570\u636e\u96c6\u7684\u76ee\u6807\u5916\uff0c\u8bed\u6599\u5e93\u7684\u76ee\u7684\u662f\u4f5c\u4e3a\u521b\u5efa\u9ad8\u8d28\u91cf\u5b50\u96c6\u7684\u57fa\u7840\u3002\u901a\u8fc7\u5f00\u6e90\u6570\u636e\u96c6\u53ca\u5176\u5236\u54c1\uff0c\u5b9e\u73b0\u4e86\u900f\u660e\u5ea6\u7684\u76ee\u6807\uff1b\u901a\u8fc7\u5904\u7406Common Crawl\u8bed\u6599\u5e93\u7684\u5927\u90e8\u5206\u5185\u5bb9\uff0c\u5b9e\u73b0\u4e86\u89c4\u6a21\u7684\u76ee\u6807\uff1b\u4e3a\u4e86\u9075\u5faa\u591a\u529f\u80fd\u6027\u7684\u8bbe\u8ba1\u539f\u5219\uff0c\u6211\u4eec\u5c06RedPajama V2\u53d1\u5e03\u4e3a\u4e00\u4e2a\u6570\u636e\u96c6\uff0c\u8be5\u6570\u636e\u96c6\u5bcc\u542b\u4e00\u7ec4\u5143\u6570\u636e\uff0c\u80fd\u591f\u5feb\u901f\u3001\u4f4e\u6210\u672c\u5730\u8fed\u4ee3\u521b\u5efa\u9ad8\u8d28\u91cf\u3001\u591a\u6837\u5316\u548c\u5927\u578b\u6570\u636e\u96c6\u3002\u5728\u672c\u8282\u4e2d\uff0c\u6211\u4eec\u9996\u5148\u4ecb\u7ecd\u7528\u4e8e\u521b\u5efa\u539f\u59cb\u6587\u672c\u6570\u636e\u7684\u6570\u636e\u5904\u7406\u6b65\u9aa4\uff0c\u6982\u8ff0\u6bcf\u4e2a\u6587\u6863\u53ef\u7528\u7684\u8d28\u91cf\u4fe1\u53f7\uff0c\u5e76\u4ecb\u7ecd\u6570\u636e\u96c6\u7ec4\u6210\u65b9\u9762\u7684\u7edf\u8ba1\u6570\u636e\u3002\u6700\u540e\uff0c\u6211\u4eec\u4ecb\u7ecd\u4e86\u5173\u4e8e\u5982\u4f55\u5229\u7528\u8d28\u91cf\u4fe1\u53f7\u6765\u521b\u5efa\u66f4\u597d\u6570\u636e\u96c6\u7684\u6d88\u878d\u7814\u7a76\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#41","title":"4.1\u6570\u636e\u5904\u7406\u6b65\u9aa4","text":"<p>RedPajama-V2 \u662f\u4e00\u4e2a\u6570\u636e\u96c6\uff0c\u5b83\u901a\u8fc7\u5904\u7406CommonCrawl\u57fa\u91d1\u4f1a\u63d0\u4f9b\u7684\u7f51\u7edc\u6587\u6863\u521b\u5efa\u3002 \u7531\u4e8e\u7f51\u7edc\u6570\u636e\u672c\u8d28\u4e0a\u662f\u5608\u6742\u7684\uff0c\u5e76\u4e14\u53ea\u80fd\u4f5c\u4e3a\u5d4c\u5165\u5728HTML\u4ee3\u7801\u4e2d\u7684\u6587\u672c\u83b7\u5f97\uff0c\u56e0\u6b64\u9700\u8981\u5bf9\u5176\u8fdb\u884c\u5904\u7406\u4ee5\u4f7f\u5176\u9002\u5408\u8bad\u7ec3\u5927\u8bed\u8a00\u6a21\u578b\uff08LLM\uff09\u3002 \u4e3a\u6b64\uff0c\u7528\u4e8eRedPajama-V2\u7684\u539f\u59cb\u6570\u636e\u7ecf\u8fc7\u4e00\u7cfb\u5217\u57fa\u672c\u7684\u5904\u7406\u6b65\u9aa4\uff0c\u6211\u4eec\u5c06\u5bf9\u5176\u8fdb\u884c\u66f4\u8be6\u7ec6\u7684\u89e3\u91ca\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#411","title":"4.1.1\u6570\u636e\u83b7\u53d6","text":"<p>Common Crawl Archive\u662f\u4e00\u4e2a\u5e9e\u5927\u7684\u7f51\u7edc\u722c\u53d6\u6570\u636e\u5b58\u50a8\u5e93\uff0c\u53ef\u4f9b\u516c\u4f17\u514d\u8d39\u4f7f\u7528\u3002\u8be5\u8bed\u6599\u5e93\u5305\u542b\u81ea2013\u5e74\u4ee5\u6765\u7684\u722c\u53d6\u7ed3\u679c\uff0c\u5e76\u5b9a\u671f\uff08\u53cc\uff09\u6bcf\u6708\u66f4\u65b0\u3002\u9664\u4e86HTML\u683c\u5f0f\u7684\u539f\u59cb\u7f51\u7edc\u6570\u636e\uff08warc\uff09\u5916\uff0c\u8be5\u5b58\u6863\u8fd8\u63d0\u4f9b\u5143\u6570\u636e\uff08wat\uff09\u548cwet\u683c\u5f0f\u7684\u7eaf\u6587\u672c\u6570\u636e\u3002\u5b83\u5df2\u6210\u4e3a\u8bb8\u591a\u6570\u636e\u96c6\u7684\u57fa\u7840\uff0c\u5305\u62ecC4 [46]\u3001RefinedWeb [44]\u3001Dolma [52]\u548cFineWeb [43]\u7b49\u3002</p> <p>\u4e3a\u4e86\u521b\u5efaRedPajama-V2\u6570\u636e\u96c6\uff0c\u6211\u4eec\u4f7f\u7528\u4e862014\u5e744\u6708\u81f32023\u5e744\u6708\u4e4b\u95f4\u6240\u670984\u4e2a\u6bcf\u6708\u5feb\u7167\u4e2d\u63d0\u53d6\u7684\u7f51\u7edc\u6587\u672c\uff08\u5373.wet\u6587\u4ef6\uff09\uff0c\u5e76\u5c06\u5176\u901a\u8fc7CCNet\u7ba1\u9053[61]\u5904\u7406\u3002\u4e0eRPv1\u76f8\u6bd4\uff0c\u8fd9\u91cc\u6211\u4eec\u4fdd\u7559\u6240\u6709\u56f0\u60d1\u5ea6\u533a\u95f4\uff0c\u9664\u4e86\u82f1\u8bed\u6570\u636e\u5916\uff0c\u6211\u4eec\u8fd8\u4fdd\u7559\u6cd5\u8bed\u3001\u5fb7\u8bed\u3001\u610f\u5927\u5229\u8bed\u548c\u897f\u73ed\u7259\u8bed\u6570\u636e\u3002\u6211\u4eec\u9009\u62e9\u8fd9\u4e2a\u7ba1\u9053\u662f\u56e0\u4e3a\u5b83\u7684\u5904\u7406\u8f83\u4e3a\u8f7b\u91cf\u7ea7\uff0c\u8fd9\u7b26\u5408\u6211\u4eec\u5c3d\u53ef\u80fd\u4fdd\u7559\u539f\u59cb\u6570\u636e\u96c6\u4e2d\u5c3d\u53ef\u80fd\u591a\u7684\u4fe1\u606f\u7684\u6307\u5bfc\u539f\u5219\uff0c\u5e76\u5141\u8bb8\u4e0b\u6e38\u6a21\u578b\u5f00\u53d1\u8005\u8fc7\u6ee4\u6570\u636e\u96c6\u3002\u6b64\u5904\u7406\u6b65\u9aa4\u4ea7\u751f\u8d85\u8fc71000\u4ebf\u4e2a\u5355\u72ec\u7684\u6587\u672c\u6587\u6863\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#412","title":"4.1.2\u8d28\u91cf\u4fe1\u53f7","text":"<p>\u50cfLlama [57, 58]\u3001Mistral [22]\u3001Falcon [2]\u3001MPT [53]\u6216Qwen [3]\u6a21\u578b\u8fd9\u6837\u6700\u5148\u8fdb\u7684\u5f00\u6e90\u5927\u578b\u8bed\u8a00\u6a21\u578b\uff08LLM\uff09\uff0c\u8fd9\u4e9b\u6a21\u578b\u7684\u4e00\u4e2a\u6838\u5fc3\u8981\u7d20\u662f\u8fd9\u4e9b\u6a21\u578b\u6240\u8bad\u7ec3\u7684\u5927\u91cf\u9ad8\u8d28\u91cf\u6570\u636e\u3002\u4f8b\u5982\uff0cLlama 3 \u8bad\u7ec3\u4f7f\u7528\u4e86 15 \u4e07\u4ebf\u4e2a\u7ecf\u8fc7\u7cbe\u5fc3\u6311\u9009\u7684\u7b26\u5143\u3002\u63d0\u4f9b\u5fc5\u8981\u89c4\u6a21\u7684\u6700\u7a81\u51fa\u6570\u636e\u6765\u6e90\u662f CommonCrawl \u516c\u5f00\u63d0\u4f9b\u7684\u722c\u53d6\u6570\u636e\u3002\u7136\u800c\uff0c\u8fd9\u4e9b\u539f\u59cb\u6587\u672c\uff08\u5728\u672c\u4f8b\u4e2d\uff0c\u6211\u4eec\u8fd8\u901a\u8fc7 CCNet \u7ba1\u9053\u5bf9\u5176\u8fdb\u884c\u4e86\u5904\u7406\uff09\u7531\u4e8e\u4ece HTML \u8f6c\u6362\u4e3a\u7eaf\u6587\u672c\u8fc7\u7a0b\u4e2d\u4ea7\u751f\u7684\u4f2a\u5f71\uff08\u4f8b\u5982\uff0c\u89e3\u6790\u9519\u8bef\u548c\u83dc\u5355\uff09\u3001\u603b\u4f53\u8d28\u91cf\u8f83\u4f4e\u7684\u6570\u636e\u6765\u6e90\u4ee5\u53ca\u7f51\u7edc\u5185\u5bb9\u5206\u5e03\u56fa\u6709\u7684\u504f\u5dee\uff0c\u4ecd\u7136\u4e0d\u9002\u5408\u76f4\u63a5\u7528\u4f5c\u5927\u8bed\u8a00\u6a21\u578b (LLM) \u7684\u8bad\u7ec3\u6570\u636e\u3002\u4e3a\u4e86\u6e05\u7406\u6b64\u7c7b\u6570\u636e\u96c6\uff0c\u6587\u732e\u4e2d\u63d0\u51fa\u4e86\u591a\u79cd\u542f\u53d1\u5f0f\u65b9\u6cd5\uff0c\u4ee5\u4ece\u5927\u578b\u5f02\u6784\u7f51\u7edc\u6570\u636e\u96c6\u4e2d\u63d0\u53d6\u9ad8\u8d28\u91cf\u6570\u636e\u96c6\u3002\u7136\u800c\uff0c\u4e0e\u4e4b\u524d\u8fc7\u6ee4\u6389\u4f4e\u8d28\u91cf\u5185\u5bb9\u7684\u6570\u636e\u96c6\u4e0d\u540c\uff0c\u6211\u4eec\u7684\u65b9\u6cd5\u4fdd\u7559\u4e86\u6574\u4e2a\u539f\u59cb\u6587\u672c\u8bed\u6599\u5e93\uff0c\u5e76\u5c06\u8d28\u91cf\u4fe1\u53f7\u4f5c\u4e3a\u9644\u52a0\u5143\u6570\u636e\u7eb3\u5165\u5176\u4e2d\u3002\u6b64\u7b56\u7565\u4f7f\u6211\u4eec\u80fd\u591f\u4f7f\u7528\u5168\u8c31\u6570\u636e\uff0c\u5c06\u901a\u5e38\u88ab\u4e22\u5f03\u7684\u90e8\u5206\u8f6c\u6362\u4e3a\u4fe1\u606f\u5c5e\u6027\uff0c\u4ece\u800c\u589e\u5f3a\u6211\u4eec\u6570\u636e\u96c6\u7684\u6548\u7528\u3002\u8fd9\u4f7f\u5f97\u80fd\u591f\u521b\u5efa\u5176\u4ed6\u6570\u636e\u96c6\uff0c\u4f8b\u5982 C4\uff0c\u4f5c\u4e3a RedPajama-V2 \u6570\u636e\u96c6\u7684\u7279\u4f8b\u3002 \u5bf9\u4e8e\u6bcf\u4e2a\u6587\u6863\uff0c\u6211\u4eec\u90fd\u63d0\u4f9b\u4e86\u5728 C4 [46]\u3001Gopher [45]\u3001RefinedWeb [44]\u3001\u201c\u9884\u8bad\u7ec3\u8005\u6307\u5357\u201d [34] \u548c DSIR [62] \u4e2d\u4f7f\u7528\u7684\u8d28\u91cf\u4fe1\u53f7\u3002\u8fd9\u4e9b\u5927\u81f4\u53ef\u4ee5\u5206\u4e3a\u8861\u91cf \u81ea\u7136\u8bed\u8a00\u3001\u6587\u672c\u7684 \u91cd\u590d\u6027\u3001\u57fa\u4e8e\u6587\u672c \u5185\u5bb9\u3001\u57fa\u4e8e\u673a\u5668\u5b66\u4e60 (ML) \u7684\u542f\u53d1\u5f0f\u65b9\u6cd5\u548c \u53bb\u91cd \u7684\u8d28\u91cf\u4fe1\u53f7\u3002 \u4e0b\u9762\uff0c\u6211\u4eec\u5c06\u8be6\u7ec6\u89e3\u91ca\u8fd9\u4e9b\u7c7b\u522b\u4e2d\u7684\u6bcf\u4e00\u4e2a\u3002 \u9644\u5f55 D.2 \u63d0\u4f9b\u4e86\u4e00\u4e2a\u5305\u542b\u6240\u6709\u8d28\u91cf\u4fe1\u53f7\u7684\u8be6\u7ec6\u63cf\u8ff0\u4ee5\u53ca\u76f4\u65b9\u56fe\u7684\u5b8c\u6574\u5217\u8868\u3002</p> <ul> <li> <p>\u81ea\u7136\u8bed\u8a00 \u4ece\u7f51\u7ad9\u63d0\u53d6\u7684\u6587\u672c\u6587\u6863\u901a\u5e38\u5305\u542b\u4e0e\u81ea\u7136\u8bed\u8a00\u4e0d\u7b26\u7684\u5185\u5bb9\uff0c\u4f8b\u5982 JavaScript \u4ee3\u7801\u3001\u83dc\u5355\u548c\u5176\u4ed6\u6837\u677f\u6587\u672c\u3002\u4e3a\u4e86\u8861\u91cf\u7ed9\u5b9a\u6587\u672c\u6587\u6863\u7684\u81ea\u7136\u7a0b\u5ea6\uff0c\u6211\u4eec\u63d0\u4f9b\u4e86\u4e00\u4e9b\u7b80\u5355\u7684\u542f\u53d1\u5f0f\u5ea6\u91cf\uff0c\u4f8b\u5982\u6240\u6709\u5927\u5199\u5355\u8bcd\u6216\u5b57\u6bcd\u7684\u6bd4\u4f8b\u3001\u4ee5\u7701\u7565\u53f7\u7ed3\u5c3e\u7684\u884c\u6570\u6bd4\u4f8b\u3001\u552f\u4e00\u8bcd\u7684\u6bd4\u4f8b\u3001\u4e00\u884c\u662f\u5426\u4ee5\u7ec8\u7aef\u6807\u70b9\u7b26\u53f7\u7ed3\u5c3e\u7b49\u7b49\u3002</p> </li> <li> <p>\u91cd\u590d\u6027 \u7f51\u7edc\u6570\u636e\u4e2d\u7ecf\u5e38\u89c2\u5bdf\u5230\u7684\u4e00\u79cd\u4f2a\u5f71\u662f\u91cd\u590d\u6587\u672c\uff0c\u8fd9\u4e0e\u65e0\u4fe1\u606f\u5185\u5bb9\u6709\u5173 [45]\u3002 \u91cd\u590d\u751f\u6210\u4e5f\u662f\u8bed\u8a00\u6a21\u578b\u5df2\u77e5\u7684\u5931\u6548\u6a21\u5f0f[21]\uff0c\u53bb\u9664\u8fc7\u5ea6\u91cd\u590d\u7684\u5185\u5bb9\u53ef\u80fd\u6709\u52a9\u4e8e\u7f13\u89e3\u8fd9\u79cd\u884c\u4e3a[45]\u3002 \u5bf9\u4e8e\u6bcf\u4e2a\u6587\u6863\uff0c\u6211\u4eec\u8ba1\u7b97\u51fa\u73b0\u5728\u6700\u9891\u7e41\uff08\u8bcd\uff09n \u5143\u4e2d\u5b57\u7b26\u7684\u6bd4\u4f8b \\(n \\in \\{2, 3, 4\\}\\)\u3002 \u5176\u6b21\uff0c\u6211\u4eec\u8ba1\u7b97\u5bf9\u4e8e \\(n \\in \\{5, \\cdots, 10\\}\\) \u7684\u503c\uff0c\u51fa\u73b0\u5728\u4efb\u4f55\u91cd\u590d n \u5143\u4e2d\u7684\u5b57\u7b26\u6bd4\u4f8b\u3002 \u6211\u4eec\u786e\u4fdd\u4e0d\u4f1a\u591a\u6b21\u8ba1\u7b97\u51fa\u73b0\u5728\u91cd\u53e0 n \u5143\u4e2d\u7684\u5b57\u7b26\u3002</p> </li> <li> <p>\u57fa\u4e8e\u5185\u5bb9\u7684 \u7f51\u7edc\u6587\u6863\u53ef\u80fd\u5305\u542b\u6709\u5bb3\u548c\u4ee4\u4eba\u53cd\u611f\u7684\u5185\u5bb9\uff0c\u9700\u8981\u89e3\u51b3\u3002 \u4e3a\u6b64\uff0c\u6211\u4eec\u63d0\u4f9b\u4e86C4\u548cRefinedWeb\u4e2d\u4f7f\u7528\u7684\u4fe1\u53f7\uff0c\u5373\uff1a\uff081\uff09\u5305\u542b\u5728LDNOOBW\u9ed1\u540d\u5355\u4e2d\u7684\u8bcd\u5e8f\u5217\u6570\u91cf4\u3002 \u6b64\u5916\uff0c\u6211\u4eec\u8fd8\u5305\u542b\u4e00\u4e2a\u6807\u5fd7\uff0c\u6307\u793a\u6587\u6863\u7684\u57df\u540d\u662f\u5426\u51fa\u73b0\u5728UT1\u963b\u6b62\u7684URL\u5217\u8868\u4e2d5\u3002 \u867d\u7136\u8fd9\u4e9b\u8d28\u91cf\u4fe1\u53f7\u4fa7\u91cd\u4e8eNSFW\u5185\u5bb9\uff0c\u4f46\u6211\u4eec\u8ba4\u4e3a\u5176\u4ed6\u57fa\u4e8e\u5185\u5bb9\u7684\u8fc7\u6ee4\u5668\uff0c\u4f8b\u5982\u57df\u540d\u6216\u5d4c\u5165\u96c6\u7fa4[55]\uff0c\u4e5f\u662f\u5f88\u6709\u524d\u666f\u7684\u65b9\u5411\u3002 \u5728\u9644\u5f55\u4e2d\u7684\u56fe8\u4e2d\uff0c\u6211\u4eec\u5c55\u793a\u4e86\u901a\u8fc7\u5d4c\u5165\u805a\u7c7b\u627e\u5230\u7684\u4e3b\u9898\u5206\u5e03\u3002</p> </li> <li> <p>\u673a\u5668\u5b66\u4e60\u542f\u53d1\u5f0f\u65b9\u6cd5 \u57fa\u4e8e\u673a\u5668\u5b66\u4e60\u7684\u8d28\u91cf\u4fe1\u53f7\u56f4\u7ed5\u7740\u8861\u91cf\u4e0e\u9ad8\u8d28\u91cf\u9886\u57df\u76f8\u4f3c\u6027\u7684\u60f3\u6cd5\u3002 \u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u4f7f\u7528fastText\u5206\u7c7b\u5668[24]\uff0c\u4ee5\u53ca[62]\u4e2d\u63d0\u51fa\u7684\u91cd\u8981\u6027\u6743\u91cd\u3002 \u867d\u7136\u673a\u5668\u5b66\u4e60\u8fc7\u6ee4\u5668\u5df2\u88ab\u8bc1\u660e\u53ef\u4ee5\u63d0\u9ad8\u6570\u636e\u96c6\u7684\u8d28\u91cf\uff08\u4f8b\u5982\uff0c[12, 57, 11]\uff09\uff0c\u4f46\u4e5f\u6709\u62a5\u9053\u79f0\u5b83\u4eec\u4f1a\u5bfc\u81f4\u504f\u5dee\u6216\u4f4e\u4f30\u5c11\u6570\u7fa4\u4f53[15]\u3002 RPv2\u4e2d\u63d0\u4f9b\u7684fastText\u5206\u7c7b\u5668\u4fe1\u53f7\u662f\u8bad\u7ec3\u7528\u4e8e\u533a\u5206\u672a\u8fc7\u6ee4\u7684RPv2\u6570\u636e\u548c\u9ad8\u8d28\u91cf\u9886\u57df\u7684unigram\u8bcd\u888b\u6a21\u578b\u3002 \u5bf9\u4e8e\u82f1\u8bed\u6570\u636e\uff0c\u6211\u4eec\u4f7f\u7528\u7ef4\u57fa\u767e\u79d1\u3001\u7ef4\u57fa\u767e\u79d1\u5f15\u7528\u7684\u7f51\u7ad9\u3001\u4e66\u7c4d\u548cOpenWebText\u6570\u636e\u96c6\u3002 \u5bf9\u4e8e\u975e\u82f1\u8bed\u6570\u636e\uff0c\u6211\u4eec\u53ea\u4f7f\u7528\u7ef4\u57fa\u767e\u79d1\u3002 \u5728[62]\u4e2d\u63d0\u51fa\u7684DSIR\u6743\u91cd\u4f30\u8ba1\u4e86\u5355\u4e2a\u6837\u672c\u5bf9\u7ed9\u5b9a\u76ee\u6807\u57df\u5728\u964d\u7ef4\u7279\u5f81\u7a7a\u95f4\u4e2d\u7684\u91cd\u8981\u6027\uff0c\u5e76\u4e14\u57fa\u4e8e\u8bcd\u8bed\u4e00\u5143\u6a21\u578b\u548c\u4e8c\u5143\u6a21\u578b\u3002 \u8fd9\u4e9b\u6743\u91cd\u5b9a\u4e49\u4e3a\u76ee\u6807\u57df\u4e0e\u6e90\u57df\u8bed\u8a00\u6a21\u578b\u4e4b\u95f4\u7684\u5bf9\u6570\u4f3c\u7136\u6bd4\uff0c\u5176\u4e2d\u6211\u4eec\u4f7f\u7528\u4e0efasttext\u5206\u7c7b\u5668\u76f8\u540c\u7684\u57df\u3002</p> </li> <li> <p>\u91cd\u590d\u6570\u636e\u5220\u9664 \u4eba\u4eec\u53d1\u73b0\uff0c\u5220\u9664\u91cd\u590d\u7684\u8bad\u7ec3\u6570\u636e\u53ef\u4ee5\u63d0\u9ad8\u6a21\u578b\u7684\u56f0\u60d1\u5ea6\uff0c\u51cf\u5c11\u8bb0\u5fc6\u91cf\uff0c\u540c\u65f6\u51cf\u5c11\u8bad\u7ec3\u6570\u636e\u91cf\u548c\u6240\u9700\u7684\u8ba1\u7b97\u91cf[28]\u3002 \u91cd\u590d\u6570\u636e\u5220\u9664\u4e5f\u662f\u6700\u6d41\u884c\u7684\u6570\u636e\u96c6\u7684\u6838\u5fc3\u7ec4\u6210\u90e8\u5206\u4e4b\u4e00[46, 52, 44]\u3002 \u5728RPv2\u4e2d\uff0c\u6211\u4eec\u5305\u542b\u4e86\u7528\u4e8e\u6a21\u7cca\u91cd\u590d\u6570\u636e\u5220\u9664\u7684MinHash\u7b7e\u540d[10]\uff08\u5728\u4e0d\u540c\u7684\u76f8\u4f3c\u5ea6\u7ea7\u522b\uff09\uff0c\u4ee5\u53ca\u901a\u8fc7\u5e03\u9686\u8fc7\u6ee4\u5668[7]\uff08\u9519\u8bef\u7387\u8bbe\u7f6e\u4e3a 1%\uff09\u53d1\u73b0\u7684\u5b8c\u5168\u91cd\u590d\u6587\u6863\u7684ID\u3002 6. \u5bf9\u4e8e\u8fd9\u4e2a\u6587\u6863\u7ea7\u522b\u7684\u91cd\u590d\u6570\u636e\u5220\u9664\uff0c\u6211\u4eec\u6309\u987a\u5e8f\u8fdb\u884c\uff0c\u4ece\u6700\u65b0\u7684\u8f6c\u50a8\uff082023-14\uff09\u5f00\u59cb\uff0c\u4f9d\u6b21\u8fed\u4ee3\u540e\u7eed\u7684\u8f6c\u50a8\uff0c\u76f4\u5230\u5230\u8fbe\u6700\u65e7\u7684\u8f6c\u50a8\uff082014-15\uff09\u3002 \u9644\u5f55\u4e2d\u7684\u56fe3\u663e\u793a\u4e86\u4ee5\u8fd9\u79cd\u65b9\u5f0f\u6807\u8bb0\u4e3a\u91cd\u590d\u6587\u6863\u7684\u6570\u91cf\u6982\u8ff0\u3002</p> </li> </ul>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#42","title":"4.2\u6570\u636e\u96c6\u7edf\u8ba1","text":"<p>RPv2\u5305\u542b\u4e94\u79cd\u4e0d\u540c\u8bed\u8a00\u76841130\u4ebf\u4e2a\u6587\u6863\uff1a\u82f1\u8bed\u3001\u5fb7\u8bed\u3001\u6cd5\u8bed\u3001\u897f\u73ed\u7259\u8bed\u548c\u610f\u5927\u5229\u8bed\u3002\u5982\u524d\u6240\u8ff0\uff0cCCNet\u7ba1\u9053\u5c06\u6570\u636e\u96c6\u5212\u5206\u4e3a\u4e09\u4e2a\u6876\u201c\u5934\u90e8\u201d\u3001\u201c\u4e2d\u95f4\u201d\u548c\u201c\u5c3e\u90e8\u201d\uff0c\u5206\u522b\u5bf9\u5e94\u4e8e\u5177\u6709\u4f4e\u3001\u4e2d\u548c\u9ad8\u7ef4\u57fa\u767e\u79d1\u56f0\u60d1\u5ea6\u7684\u6587\u6863\u3002 \u5934\u90e8+\u4e2d\u95f4\u5206\u533a\u4e2d\u6709328\u4ebf\u4e2a\u6587\u6863\uff0c\u5c3e\u90e8\u5206\u533a\u4e2d\u6709800\u4ebf\u4e2a\u6587\u6863\u3002\u5c3e\u90e8\u6587\u6863\u901a\u5e38\u6bd4\u5934\u90e8\u548c\u4e2d\u90e8\u533a\u5757\u7684\u6587\u6863\u77ed\uff08850\u4e2a\u7b26\u5143\uff09\uff0c\u223c1500\u4e2a\u7b26\u5143\uff09\u3002\u7b26\u5143\u8ba1\u6570\u662f\u57fa\u4e8e\u4f7f\u7528Mistral [22] BPE\u5206\u8bcd\u5668\u5bf91\u4ebf\u4efd\u6587\u6863\u7684\u72ec\u7acb\u540c\u5206\u5e03\u6837\u672c\u8fdb\u884c\u4f30\u8ba1\u7684\u3002\u8868\u683c3\u8be6\u7ec6\u6982\u8ff0\u4e86\u6bcf\u79cd\u8bed\u8a00\u548c\u6bcf\u4e2a\u5206\u533a\u7b26\u5143\u7684\u6570\u91cf\u3002 \u6211\u4eec\u5728\u8865\u5145\u6750\u6599\u4e2d\u63d0\u4f9b\u4e86\u5173\u4e8e\u91cd\u590d\u6570\u636e\u5220\u9664\u524d\u540e\u6587\u6863\u6570\u91cf\u4ee5\u53ca\u8d28\u91cf\u4fe1\u53f7\u5206\u5e03\u7684\u66f4\u591a\u7edf\u8ba1\u6570\u636e\u3002</p> <p></p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#43","title":"4.3\u6570\u636e\u96c6\u6d88\u878d\u5b9e\u9a8c","text":"<p>\u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u63d0\u51fa\u4e86\u4e00\u7cfb\u5217\u6570\u636e\u96c6\u6d88\u878d\u5b9e\u9a8c\uff0c\u76ee\u7684\u662f\u4e3a\u4e86\u66f4\u597d\u5730\u7406\u89e3\u7b2c4.1.2\u8282\u4e2d\u4ecb\u7ecd\u7684\u8d28\u91cf\u4fe1\u53f7\u5982\u4f55\u5f71\u54cd\u4f7f\u7528\u4e0d\u540c\u542f\u53d1\u5f0f\u7b97\u6cd5\u8fc7\u6ee4\u7684\u6570\u636e\u8bad\u7ec3\u65f6\uff0c\u8bed\u8a00\u6a21\u578b\u7684\u6027\u80fd\u3002\u66f4\u5177\u4f53\u5730\u8bf4\uff0c\u6211\u4eec\u5728\u8fd9\u91cc\u63d0\u51fa\u4ee5\u4e0b\u95ee\u9898\uff1a\u4e0d\u540c\u7684\u8d28\u91cf\u8fc7\u6ee4\u89c4\u5219\u5982\u4f55\u5f71\u54cd\u4e0b\u6e38\u6027\u80fd\uff1f \u6211\u4eec\u529b\u6c42\u8fdb\u884c\u5e7f\u6cdb\u7684\u8bc4\u4f30\uff0c\u5e76\u8861\u91cf\u5728\u4e0d\u540c\u4e0b\u6e38\u57fa\u51c6\u6d4b\u8bd5\u4e0a\u7684\u6027\u80fd\u4ee5\u53ca\u591a\u4e2a\u9886\u57df\u4e0a\u7684\u8bed\u8a00\u5efa\u6a21\u76ee\u6807\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#431","title":"4.3.1\u8bbe\u7f6e","text":"<ul> <li> <p>\u6a21\u578b \u6211\u4eec\u91c7\u7528\u5177\u67094.68\u4ebf\u53c2\u6570\u548c16\u4ebf\u53c2\u6570\u4ee5\u53ca2048\u4e2a\u5e8f\u5217\u957f\u5ea6\u7684\u4ec5\u89e3\u7801\u5668Llama-2\u67b6\u6784[58]\u3002\u4e24\u4e2a\u6a21\u578b\u90fd\u5177\u670924\u5c42\u300116\u4e2a\u6ce8\u610f\u529b\u5934\uff0c\u5e76\u4e14MLP\u6269\u5c55\u6bd4\u7387\u8bbe\u7f6e\u4e3a4.0\u30024.68\u4ebf\u53c2\u6570\u6a21\u578b\u7684\u9690\u85cf\u7ef4\u5ea6\u4e3a1024\uff0c\u800c16\u4ebf\u53c2\u6570\u6a21\u578b\u7684\u9690\u85cf\u7ef4\u5ea6\u4e3a2048\u3002\u5bf9\u4e8e\u6bcf\u4e2a\u6570\u636e\u96c6\uff0c\u6211\u4eec\u57284.68\u4ebf\u4e2a\u7b26\u5143\u4e0a\u8bad\u7ec34.68\u4ebf\u53c2\u6570\u6a21\u578b\uff0c\u57283500\u4ebf\u4e2a\u7b26\u5143\u4e0a\u8bad\u7ec316\u4ebf\u53c2\u6570\u6a21\u578b\u3002 \u6211\u4eec\u4f7f\u7528\u5e26\u67090.1\u6743\u91cd\u8870\u51cf\u7684AdamW [14] \u4f18\u5316\u5668\uff0c\u6700\u5927\u5b66\u4e60\u7387\u5206\u522b\u8bbe\u7f6e\u4e3a \\(5e^{-3}\\) \u548c\\(5e^{-4}\\)\uff0c\u4ee5\u53ca\u5728\u6700\u521d1%\u7684\u6b65\u9aa4\u4e2d\u5177\u6709\u7ebf\u6027\u9884\u70ed\u7684\u4f59\u5f26\u8870\u51cf\u8c03\u5ea6\u3002\u6211\u4eec\u4f7f\u7528\u76f8\u5bf9\u8f83\u5c0f\u7684\u89c4\u6a21\uff0c\u56e0\u4e3a\u8fd9\u4f7f\u6211\u4eec\u80fd\u591f\u63a2\u7d22\u66f4\u5e7f\u6cdb\u7684\u8fc7\u6ee4\u5668\uff0c\u5c55\u793aRedPajama\u4e2d\u53ef\u7528\u8d28\u91cf\u8fc7\u6ee4\u5668\u7684\u5e7f\u5ea6\u3002</p> </li> <li> <p>\u786c\u4ef6\u548c\u8bad\u7ec3\u6808 \u7531\u4e8e\u5176\u6613\u4e8e\u8bbe\u7f6e\u3001\u4f7f\u7528\u4ee5\u53ca\u9ad8\u6a21\u578b\u6d6e\u70b9\u8fd0\u7b97\u5229\u7528\u7387\uff0c\u6211\u4eec\u4f7f\u7528OLMo\u6846\u67b67\u8fdb\u884c\u5206\u5e03\u5f0f\u8bad\u7ec3\uff0c\u5e76\u4f7f\u7528FSDP [66]\u5728\u591a\u4e2aGPU\u548c\u8282\u70b9\u4e4b\u95f4\u8fdb\u884c\u5e76\u884c\u5316\u3002 \u5bf9\u4e8e\u8bc4\u4f30\uff0c\u6211\u4eec\u4f7f\u7528lm-evaluation-harness\u3002 \u6211\u4eec\u6700\u591a\u4f7f\u75285\u4e2a\u5177\u6709Infiniband\u4e92\u8fde\u7684H100\u8282\u70b9\u6765\u8bad\u7ec3\u6211\u4eec\u7684\u6a21\u578b\u3002</p> </li> <li> <p>\u8bc4\u4f30\u6307\u6807 \u6211\u4eec\u529b\u6c42\u5bf9\u57fa\u51c6\u548c\u9886\u57df\u8fdb\u884c\u5e7f\u6cdb\u7684\u8986\u76d6\u3002 \u540c\u65f6\uff0c\u6211\u4eec\u7684\u8fd0\u4f5c\u89c4\u6a21\u76f8\u5bf9\u8f83\u5c0f\uff0c\u5176\u4e2d\u8bb8\u591a\u4efb\u52a1\u90fd\u8fc7\u4e8e\u56f0\u96be\uff0c\u96be\u4ee5\u63d0\u4f9b\u8db3\u591f\u5f3a\u7684\u4fe1\u53f7\u6765\u533a\u5206\u6570\u636e\u96c6\u3002</p> </li> </ul> <p>\u4e0eFineWeb[43]\u6570\u636e\u96c6\u7c7b\u4f3c\uff0c\u6211\u4eec\u5bfb\u627e\u5373\u4f7f\u5728\u8fd9\u4e2a\u5c0f\u578b\u6a21\u578b\u89c4\u6a21\u4e0b\u4e5f\u80fd\u63d0\u4f9b\u8db3\u591f\u9ad8\u4fe1\u566a\u6bd4\u7684\u57fa\u51c6\u3002\u5728\u4ed4\u7ec6\u8003\u8651\u4e4b\u540e\uff0c\u6211\u4eec\u6700\u7ec8\u9009\u62e9\u4e86\u88684\u4e2d\u7684\u57fa\u51c6\u3002\u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u5448\u73b0\u805a\u5408\u5206\u6570\uff1a</p> <ul> <li>\uff081\uff09\u8ba1\u7b97\u57fa\u51c6\u7684\u5e73\u5747\u503c\uff1b</li> <li>\uff082\uff09\u5f52\u4e00\u5316\u5e73\u5747\u503c\uff1b\u4ee5\u53ca</li> <li>\uff083\uff09\u6bcf\u4e2a\u6570\u636e\u914d\u65b9\u7684\u79e9\u7684\u5f52\u4e00\u5316\u548c\u3002 </li> </ul> <p>\u6211\u4eec\u9009\u62e9\u5305\u542b\u540e\u8005\u4ee5\u907f\u514d\u5bf9\u4e0d\u540c\u89c4\u6a21\u7684\u5206\u6570\u8fdb\u884c\u5e73\u5747\u3002\u8865\u5145\u6750\u6599\u4e2d\u63d0\u4f9b\u4e86\u66f4\u8be6\u7ec6\u7684\u8bc4\u5206\u3002\u4e3a\u4e86\u57fa\u4e8e\u76ee\u6807\u9886\u57df\u7684\u56f0\u60d1\u5ea6\u5bf9\u6570\u636e\u96c6\u8fdb\u884c\u6392\u5e8f\uff0c\u6211\u4eec\u9075\u5faa Dolma [52] \u4e2d\u91c7\u7528\u7684\u65b9\u6cd5\uff0c\u5e76\u91c7\u7528 Paloma [35] \u548c Pile [17] \u9a8c\u8bc1\u96c6\u3002</p> <p></p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#432","title":"4.3.2\u7ed3\u679c","text":"<p>\u6211\u4eec\u9996\u5148\u4f7f\u7528\u8d28\u91cf\u4fe1\u53f7\u6765\u5b9e\u73b0\u6587\u732e\u4e2d\u6700\u5e7f\u6cdb\u4f7f\u7528\u7684\u8fc7\u6ee4\u5668\u4e2d\u7684\u4e00\u4e9b\u3002\u6b64\u5916\uff0c\u6211\u4eec\u8fd8\u7814\u7a76\u4e86 RPv2 \u4e2d\u53ef\u7528\u7684 ML \u542f\u53d1\u5f0f\u65b9\u6cd5\uff0c\u8fd9\u4e9b\u65b9\u6cd5\u57fa\u4e8e fastText \u8bcd\u888b n-gram \u5206\u7c7b\u5668 [24] \u548c DSIR \u91cd\u8981\u6027\u6743\u91cd [62]\u3002\u6211\u4eec\u5bf9 RPv2 \u7684\u4e24\u4e2a\u5b50\u96c6\u8fdb\u884c\u4e86\u6d88\u878d\u7814\u7a76\uff0c\u5373 2023-14 \u722c\u53d6\u7684\u6570\u636e\u548c 2021-49 \u5230 2023-14 \u7684 9 \u6b21\u722c\u53d6\u7684\u6570\u636e\uff0c\u8fd9\u4e9b\u6570\u636e\u4f7f\u7528 MinHash LSH \u5bf9\u5355\u8bcd 13-gram \u8fdb\u884c\u53bb\u91cd\uff0c\u4f7f\u7528 128 \u4e2a\u54c8\u5e0c\u51fd\u6570\u30019 \u4e2a\u6ce2\u6bb5\u548c 13 \u884c\u3002 \u5bf9\u4e8e 1.6B \u6d88\u878d\u7814\u7a76\uff0c\u6211\u4eec\u8fc7\u6ee4\u5b8c\u6574\u7684 RPv2 \u6570\u636e\u96c6\uff0c\u7136\u540e\u5927\u7ea6\u91c7\u6837 1T \u4e2a\u7b26\u5143\u5e76\u4f7f\u7528\u76f8\u540c\u7684 Minhash \u8d85\u53c2\u6570\u5bf9\u5176\u8fdb\u884c\u53bb\u91cd\u3002</p> <p>\u8fc7\u6ee4\u5668\u3002  \u6211\u4eec\u529b\u6c42\u6db5\u76d6\u5e7f\u6cdb\u7684\u8d28\u91cf\u8fc7\u6ee4\u914d\u7f6e\u3002\u76ee\u6807\u5e76\u975e\u5728\u7279\u5b9a\u57fa\u51c6\u6d4b\u8bd5\u4e0a\u4f18\u5316\u6027\u80fd\uff0c\u800c\u662f\u5c55\u793a\u4ee5\u4e0d\u540c\u65b9\u5f0f\u8fc7\u6ee4RPv2\u6570\u636e\u96c6\u4f1a\u5bfc\u81f4\u6a21\u578b\u6027\u80fd\u7684\u5de8\u5927\u5dee\u5f02\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u5c1d\u8bd5\u4e86C4\u548cGopher\u89c4\u5219\u7684\u53d8\u4f53\uff0c\u5e76\u4f7f\u7528\u4e86RPv2\u4e2d\u57fa\u4e8e\u673a\u5668\u5b66\u4e60\u7684\u8d28\u91cf\u4fe1\u53f7\u3002\u6211\u4eec\u8fd8\u4f7f\u7528\u4e86\u4e00\u4e2a\u57fa\u4e8e\u8bcd\u6570\u3001\u5e73\u5747\u884c\u957f\u3001\u7ef4\u57fa\u767e\u79d1\u56f0\u60d1\u5ea6\u548c\u7ef4\u57fa\u767e\u79d1\u53c2\u8003\u6587\u732e\u5206\u7c7b\u5668\u7684\u81ea\u5b9a\u4e49\u914d\u7f6ecustom-rules\u3002</p> <p>\u7ed3\u679c\u3002 \u4ece\u88685\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u5f97\u51fa\u5173\u4e8e\u8fc7\u6ee4RedPajama-V2\u6570\u636e\u96c6\u7684\u4e00\u7cfb\u5217\u7ed3\u8bba\u3002\u9996\u5148\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230Gopher\u89c4\u5219\u901a\u5e38\u4f1a\u63d0\u9ad8\u6027\u80fd\u3002\u7279\u522b\u5730\uff0c\u6211\u4eec\u770b\u5230\u6a21\u7cca\u53bb\u91cd\u548c\u4f7f\u7528Gopher\u8fdb\u884c\u8fc7\u6ee4\u5728\u6240\u6709RPv2\u6570\u636e\u96c6\u4e0a\u5177\u6709\u6700\u9ad8\u7684\u805a\u5408\u5206\u6570\u3002\u6b64\u5916\uff0c\u5e73\u5747\u57fa\u51c6\u5206\u6570\u548c\u5f52\u4e00\u5316\u5e73\u5747\u57fa\u51c6\u5206\u6570\u4ec5\u6b21\u4e8eRefinedWeb\uff0c\u800c\u6392\u540d\u5206\u6570\u9ad8\u4e8eRefinedWeb\u3002\u9644\u5f55\u4e2d\u7684\u6bcf\u4e2a\u57fa\u51c6\u6d4b\u8bd5\u886818\u300119\u548c20\u663e\u793a\uff0c\u4f7f\u7528\u6a21\u7cca\u53bb\u91cd\u548cGopher\u8fc7\u6ee4\u7684RPv2\u6570\u636e\u96c6\u59cb\u7ec8\u5904\u4e8e\u4e2d\u4e0a\u6c34\u5e73\uff08\u6700\u4f4e\u6392\u540d\u5206\u6570\u4e3a19\u4e2d\u76849\uff09\uff0c\u800cRefinedWeb\u5728Hellaswag\u3001LAMBADA\u3001Winogrande\u3001MMLU\u548cOpenBookQA\u4e0a\u7684\u8868\u73b0\u66f4\u5dee\u3002\u8fd9\u8868\u660e\uff0c\u4f7f\u7528\u5b8c\u6574\u7684Gopher\u89c4\u5219\u548c\u6a21\u7cca\u53bb\u91cd\uff08Minhash LSH\uff09\u8fc7\u6ee4RPv2\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u5728\u66f4\u5e7f\u6cdb\u7684\u4efb\u52a1\u4e2d\u8868\u73b0\u826f\u597d\u7684\u6570\u636e\u96c6\uff0c\u4f18\u4e8e\u6240\u6709\u5176\u4ed6\u6570\u636e\u96c6\u3002\u5176\u6b21\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230Gopher-natlang\u8fc7\u6ee4\u5668\u6bd4Gopher-repetition\u8fc7\u6ee4\u5668\u6027\u80fd\u66f4\u597d\u3002 \u7b2c\u4e09\uff0c\u5728\u57fa\u4e8e\u6a21\u578b\u7684\u8fc7\u6ee4\u7684\u80cc\u666f\u4e0b\uff0c\u6211\u4eec\u53d1\u73b0\u4f7f\u7528fasttext\u5206\u7c7b\u5668\u548cDSIR\u4e4b\u95f4\u6ca1\u6709\u663e\u8457\u5dee\u5f02\u3002 \u7b2c\u56db\uff0c\u4ec5\u4f7f\u7528\u884c\u7ea7C4\u8fc7\u6ee4\u5668\u4f3c\u4e4e\u53ef\u4ee5\u964d\u4f4e\u56f0\u60d1\u5ea6\uff0c\u4f46\u5bf9\u805a\u5408\u57fa\u51c6\u5206\u6570\u7684\u5f71\u54cd\u53ef\u4ee5\u5ffd\u7565\u4e0d\u8ba1\u3002 \u6700\u540e\uff0c\u6211\u4eec\u6ce8\u610f\u5230\u672a\u7ecf\u8fc7\u6ee4\u7684RPv2 2023-14\u6570\u636e\u96c6\u5728Paloma\u6570\u636e\u96c6\u4e0a\u7684\u56f0\u60d1\u5ea6\u4f3c\u4e4e\u6700\u4f4e\uff0c\u800c\u5176\u4ed6\u8fc7\u6ee4\u65b9\u6cd5\u4f1a\u5bfc\u81f4\u6a21\u578b\u5177\u6709\u66f4\u9ad8\u7684\u56f0\u60d1\u5ea6\u3002 \u6211\u4eec\u8ba4\u4e3a\u8fd9\uff08\u81f3\u5c11\u90e8\u5206\uff09\u53ef\u4ee5\u5f52\u56e0\u4e8ePaloma\u6db5\u76d6\u7684\u5e7f\u6cdb\u9886\u57df\u3002 \u6b64\u5916\uff0cPaloma\u8fd8\u5305\u542bRPv1\u6570\u636e\u96c6\uff0c\u8fd9\u53ef\u4ee5\u89e3\u91ca\u5728RPv1-CC\u4e0a\u8bad\u7ec3\u7684\u6a21\u578b\u83b7\u5f97\u7684\u4f4e\u56f0\u60d1\u5ea6\u5f97\u5206\u3002 \u88686\u8fdb\u4e00\u6b65\u8868\u660e\uff0c\u4f7f\u7528\u5b8c\u6574\u7684Gopher\u89c4\u5219\u8fc7\u6ee4\u7684RPv2\u8bad\u7ec3\u7684\u6a21\u578b\u4f18\u4e8e\u4ec5\u4f7f\u7528Gopher-natlang\u89c4\u5219\u8fc7\u6ee4\u7684RPv2\u8bad\u7ec3\u7684\u6a21\u578b\uff0c\u5e76\u4e14\u5176\u8d28\u91cf\u63a5\u8fd1\u4e8e\u5728RefinedWeb\u6570\u636e\u96c6\u4e0a\u8bad\u7ec3\u7684\u6a21\u578b\u3002 \u603b\u4e4b\uff0c\u8fd9\u4e00\u7cfb\u5217\u6d88\u878d\u7814\u7a76\u8868\u660e\u4e86\u5982\u4f55\u5229\u7528RPv2\u6570\u636e\u96c6\u4e2d\u7684\u8d28\u91cf\u4fe1\u53f7\u6765\u9010\u6b65\u8fc7\u6ee4\u51fa\u66f4\u597d\u7684\u6570\u636e\u96c6\u3002 \u7ed3\u5408\u5176\u8d85\u8fc7100\u4e07\u4ebf\u4e2a\u7b26\u5143\u7684\u5de8\u5927\u89c4\u6a21\uff0c\u6211\u4eec\u770b\u5230\u8fd9\u4e2a\u6570\u636e\u96c6\u4e3a\u521b\u5efa\u7528\u4e8e\u5927\u8bed\u8a00\u6a21\u578b\u9884\u8bad\u7ec3\u7684\u9ad8\u8d28\u91cf\u7f51\u7edc\u6570\u636e\u96c6\u63d0\u4f9b\u4e86\u5f3a\u5927\u7684\u8d44\u6e90\u3002</p> <p></p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#5","title":"5.\u7ed3\u8bba","text":"<p>\u5728\u672c\u6587\u4e2d\uff0c\u6211\u4eec\u4ecb\u7ecd\u4e86RedPajama\u6570\u636e\u96c6\u3002 \u62e5\u6709\u8d85\u8fc7100\u4e07\u4ebf\u4e2a\u7b26\u5143\uff0c\u8fd9\u4e9b\u662f\u7528\u4e8e\u9884\u8bad\u7ec3\u8bed\u8a00\u6a21\u578b\u7684\u6700\u5927\u3001\u5b8c\u5168\u5f00\u6e90\u548c\u900f\u660e\u7684\u6570\u636e\u96c6\uff0c\u5e76\u4e14\u4e00\u76f4\u662f\u8bb8\u591a\u6700\u5f3a\u5927\u7684\u5f00\u6e90\u5927\u8bed\u8a00\u6a21\u578b\u7684\u6838\u5fc3\u7ec4\u6210\u90e8\u5206\u3002\u9664\u4e86\u4f34\u968f\u6570\u636e\u96c6\u7684\u6587\u6863\u5916\uff0c\u6211\u4eec\u8fd8\u5c55\u793a\u4e86\u5982\u4f55\u5c06RedPajama-V2\u8fc7\u6ee4\u5230\u8d28\u91cf\u8d8a\u6765\u8d8a\u9ad8\u7684\u5b50\u96c6\u7684\u793a\u4f8b\uff0c\u4ece\u800c\u5728\u5404\u79cd\u57fa\u51c6\u4efb\u52a1\u4e0a\u4ea7\u751f\u4e0d\u540c\u8d28\u91cf\u6c34\u5e73\u7684\u8bed\u8a00\u6a21\u578b\uff0c\u5e76\u4f18\u4e8e\u5728\u5176\u4ed6\u5927\u578b\u9884\u8bad\u7ec3\u8bed\u6599\u5e93\u4e0a\u8bad\u7ec3\u7684\u6a21\u578b\u3002\u867d\u7136\u8fd9\u4e9b\u6a21\u578b\u76f8\u5bf9\u8f83\u5c0f\uff0c\u4f7f\u6211\u4eec\u80fd\u591f\u63a2\u7d22\u66f4\u591a\u79cd\u7c7b\u7684\u8fc7\u6ee4\u5668\uff0c\u4f46\u8fd9\u4e5f\u662f\u4e00\u4e2a\u5c40\u9650\u6027\uff0c\u9700\u8981\u8fdb\u4e00\u6b65\u8fdb\u884c\u66f4\u5927\u89c4\u6a21\u7684\u63a2\u7d22\u3002 \u6211\u4eec\u6ca1\u6709\u9488\u5bf9\u5e38\u89c1\u57fa\u51c6\u8fdb\u884c\u5f7b\u5e95\u7684\u53bb\u6c61\u67d3\u5206\u6790\uff0c\u4e5f\u6ca1\u6709\u5206\u6790\u6570\u636e\u96c6\u4e2d\u5b58\u5728\u7684\u4e2a\u4eba\u8eab\u4efd\u4fe1\u606f\uff0c\u8fd9\u6784\u6210\u4e86\u8fd9\u9879\u5de5\u4f5c\u7684\u53e6\u4e00\u4e2a\u5c40\u9650\u6027\u3002 \u901a\u8fc7\u53d1\u5e03\u539f\u59cb\u7684\u3001\u672a\u8fc7\u6ee4\u7684RedPajama-V2\u6570\u636e\u96c6\uff0c\u4f46\u540c\u65f6\u63d0\u4f9b\u4e00\u7ec4\u8d28\u91cf\u4fe1\u53f7\uff0c\u6211\u4eec\u5e0c\u671b\u672a\u6765\u7684\u5de5\u4f5c\u5c06\u7ee7\u7eed\u57fa\u4e8eRedPajama\uff0c\u5e76\u63d0\u4f9b\u8fc7\u6ee4\u3001\u6574\u7406\u548c\u6df7\u5408\u591a\u4e2a\u9884\u8bad\u7ec3\u8bed\u6599\u5e93\u7684\u65b0\u7684\u521b\u65b0\u65b9\u6cd5\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#_2","title":"\u81f4\u8c22\u4e0e\u8d44\u91d1\u62ab\u9732","text":"<p>\u6211\u4eec\u611f\u8c22\u52a0\u62ff\u5927CIFAR\u4eba\u5de5\u667a\u80fd\u4e3b\u5e2d\u9879\u76ee[I.R.]\u7684\u652f\u6301\u3002\u4ee5\u53ca\u52a0\u62ff\u5927\u5353\u8d8a\u7814\u7a76\u4e3b\u5e2d\u9879\u76ee[I.R.]\u7684\u652f\u6301\u3002\u8fd9\u9879\u7814\u7a76\u5f97\u4ee5\u5b9e\u73b0\uff0c\u8981\u611f\u8c22Summit\u8d85\u7ea7\u8ba1\u7b97\u673a\u4e0a\u7684\u8ba1\u7b97\u8d44\u6e90\uff0c\u8fd9\u4e9b\u8d44\u6e90\u662f\u4f5c\u4e3aINCITE 2023\u9879\u76ee\u5956\u201c\u7528\u4e8e\u53ef\u8fc1\u79fb\u901a\u624d\u4eba\u5de5\u667a\u80fd\u7684\u53ef\u6269\u5c55\u57fa\u7840\u6a21\u578b\u201d\u7684\u4e00\u90e8\u5206\u63d0\u4f9b\u7684\u3002\u8fd9\u4e9b\u8d44\u6e90\u7531\u6a61\u6811\u5cad\u56fd\u5bb6\u5b9e\u9a8c\u5ba4\u7684\u6a61\u6811\u5cad\u9886\u5bfc\u8ba1\u7b97\u8bbe\u65bd\u63d0\u4f9b\uff0c\u8be5\u8bbe\u65bd\u7531\u7f8e\u56fd\u80fd\u6e90\u90e8\u79d1\u5b66\u529e\u516c\u5ba4\u6839\u636e\u5408\u540c\u53f7\u63d0\u4f9b\u652f\u6301\u3002 DE-AC05-00OR22725\u3002  \u6211\u4eec\u8877\u5fc3\u611f\u8c22\u7f8e\u56fd\u56fd\u7acb\u536b\u751f\u7814\u7a76\u9662\uff08NIH\uff09\u5728\u7f16\u53f7\u4e3a U54EB020405\uff08Mobilize\uff09\u4e0b\u7684\u652f\u6301\uff0c\u4ee5\u53ca\u7f8e\u56fd\u56fd\u5bb6\u79d1\u5b66\u57fa\u91d1\u4f1a\uff08NSF\uff09\u5728\u7f16\u53f7\u4e3a CCF2247015\uff08\u786c\u4ef6\u611f\u77e5\uff09\u3001 CCF1763315\uff08\u8d85\u8d8a\u7a00\u758f\u6027\uff09\u3001 CCF1563078\uff08\u4ece\u4f53\u79ef\u5230\u901f\u5ea6\uff09\u548c 1937301\uff08RTML\uff09\u4e0b\u7684\u652f\u6301\uff1b\u4ee5\u53ca\u7f8e\u56fd\u9646\u519b\u4f5c\u6218\u80fd\u529b\u53d1\u5c55\u53f8\u4ee4\u90e8\u9646\u519b\u7814\u7a76\u5b9e\u9a8c\u5ba4\uff08DEVCOM ARL\uff09\u5728\u7f16\u53f7\u4e3a W911NF-23-2-0184\uff08\u957f\u4e0a\u4e0b\u6587\uff09\u548c W911NF-21-2-0251\uff08\u4eba\u673a\u4ea4\u4e92\u5f0f\u56e2\u961f\uff09\u4e0b\u7684\u652f\u6301\uff1b\u4ee5\u53ca\u7f8e\u56fd\u6d77\u519b\u7814\u7a76\u529e\u516c\u5ba4\uff08ONR\uff09\u5728\u7f16\u53f7\u4e3a N000142312633\uff08\u6df1\u5ea6\u4fe1\u53f7\u5904\u7406\uff09\u4e0b\u7684\u652f\u6301\uff1b\u4ee5\u53ca\u65af\u5766\u798f\u5927\u5b66\u4eba\u5de5\u667a\u80fd\u7814\u7a76\u6240\uff08HAI\uff09\u5728\u7f16\u53f7\u4e3a 247183\u4e0b\u7684\u652f\u6301\uff1b\u4ee5\u53ca\u6069\u667a\u6d66\uff08NXP\uff09\u3001\u8d5b\u7075\u601d\uff08Xilinx\uff09\u3001\u6cd5\u56fd\u539f\u5b50\u80fd\u59d4\u5458\u4f1a\u7535\u5b50\u4e0e\u4fe1\u606f\u6280\u672f\u5b9e\u9a8c\u5ba4\uff08LETI-CEA\uff09\u3001\u82f1\u7279\u5c14\uff08Intel\uff09\u3001IBM\u3001\u5fae\u8f6f\uff08Microsoft\uff09\u3001NEC\u3001\u4e1c\u829d\uff08Toshiba\uff09\u3001\u53f0\u79ef\u7535\uff08TSMC\uff09\u3001ARM\u3001\u65e5\u7acb\uff08Hitachi\uff09\u3001\u5df4\u65af\u592b\uff08BASF\uff09\u3001\u57c3\u68ee\u54f2\uff08Accenture\uff09\u3001\u7231\u7acb\u4fe1\uff08Ericsson\uff09\u3001\u9ad8\u901a\uff08Qualcomm\uff09\u3001ADI\u516c\u53f8\uff08Analog Devices\uff09\u3001\u8c37\u6b4c\u4e91\uff08Google Cloud\uff09\u3001Salesforce\u3001\u9053\u8fbe\u5c14\uff08Total\uff09\u3001HAI-GCP\u4e91\u8ba1\u7b97\u7814\u7a76\u9879\u76ee\u3001\u65af\u5766\u798f\u6570\u636e\u79d1\u5b66\u5021\u8bae\uff08SDSI\uff09\u4ee5\u53ca\u65af\u5766\u798fDAWN\u9879\u76ee\u7684\u6210\u5458\uff1aMeta\u3001\u8c37\u6b4c\u548c VMware \u7684\u652f\u6301\u3002 \u7f8e\u56fd\u653f\u5e9c\u6709\u6743\u51fa\u4e8e\u653f\u5e9c\u76ee\u7684\u590d\u5236\u548c\u5206\u53d1\u8f6c\u8f7d\u672c\uff0c\u5373\u4f7f\u4e0a\u9762\u6709\u4efb\u4f55\u7248\u6743\u58f0\u660e\u3002 \u672c\u6750\u6599\u4e2d\u8868\u8fbe\u7684\u4efb\u4f55\u89c2\u70b9\u3001\u53d1\u73b0\u3001\u7ed3\u8bba\u6216\u5efa\u8bae\u5747\u4e3a\u4f5c\u8005\u7684\u89c2\u70b9\uff0c\u4e0d\u4e00\u5b9a\u53cd\u6620NIH\u3001ONR\u6216\u7f8e\u56fd\u653f\u5e9c\u7684\u89c2\u70b9\u3001\u653f\u7b56\u6216\u8ba4\u53ef\uff0c\u65e0\u8bba\u662f\u660e\u793a\u7684\u8fd8\u662f\u6697\u793a\u7684\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#_3","title":"\u53c2\u8003\u6587\u732e","text":"<ul> <li>[1] Josh Achiam, Steven Adler, Sandhini Agarwal, Lama Ahmad, Ilge Akkaya, Florencia Leoni Aleman, Diogo Almeida, Janko Altenschmidt, Sam Altman, Shyamal Anadkat, et al.Gpt-4 technical report.arXiv preprint arXiv:2303.08774, 2023.</li> <li>[2] Ebtesam Almazrouei, Hamza Alobeidli, Abdulaziz Alshamsi, Alessandro Cappelli, Ruxandra Cojocaru, M\u00e9rouane Debbah, \u00c9tienne Goffinet, Daniel Hesslow, Julien Launay, Quentin Malartic, et al.The falcon series of open language models.arXiv preprint arXiv:2311.16867, 2023.</li> <li>[3] Jinze Bai, Shuai Bai, Yunfei Chu, Zeyu Cui, Kai Dang, Xiaodong Deng, Yang Fan, Wenbin Ge, Yu Han, Fei Huang, et al.Qwen technical report.arXiv preprint arXiv:2309.16609, 2023.</li> <li>[4] Stella Biderman, Hailey Schoelkopf, Quentin Gregory Anthony, Herbie Bradley, Kyle O\u2019Brien, Eric Hallahan, Mohammad Aflah Khan, Shivanshu Purohit, USVSN Sai Prashanth, Edward Raff, et al.Pythia: A suite for analyzing large language models across training and scaling.In International Conference on Machine Learning, pages 2397\u20132430. PMLR, 2023.</li> <li>[5] Yonatan Bisk, Rowan Zellers, Ronan Le Bras, Jianfeng Gao, and Yejin Choi.Piqa: Reasoning about physical commonsense in natural language.In Thirty-Fourth AAAI Conference on Artificial Intelligence, 2020.</li> <li>[6] Sid Black, Stella Biderman, Eric Hallahan, Quentin Anthony, Leo Gao, Laurence Golding, Horace He, Connor Leahy, Kyle McDonell, Jason Phang, et al.Gpt-neox-20b: An open-source autoregressive language model.arXiv preprint arXiv:2204.06745, 2022.</li> <li>[7] Burton H Bloom.Space/time trade-offs in hash coding with allowable errors.Communications of the ACM, 13(7):422\u2013426, 1970.</li> <li>[8] Rishi Bommasani, Kevin Klyman, Shayne Longpre, Sayash Kapoor, Nestor Maslej, Betty Xiong, Daniel Zhang, and Percy Liang.The foundation model transparency index.arXiv preprint arXiv:2310.12941, 2023.</li> <li>[9] Rishi Bommasani, Percy Liang, and Tony Lee.Holistic evaluation of language models.Annals of the New York Academy of Sciences, 1525(1):140\u2013146, 2023.</li> <li>[10] Andrei Z Broder.On the resemblance and containment of documents.In Proceedings. Compression and Complexity of SEQUENCES 1997 (Cat. No. 97TB100171), pages 21\u201329. IEEE, 1997.</li> <li>[11] Tom Brown, Benjamin Mann, Nick Ryder, Melanie Subbiah, Jared D Kaplan, Prafulla Dhariwal, Arvind Neelakantan, Pranav Shyam, Girish Sastry, Amanda Askell, et al.Language models are few-shot learners.Advances in neural information processing systems, 33:1877\u20131901, 2020.</li> <li>[12] Aakanksha Chowdhery, Sharan Narang, Jacob Devlin, Maarten Bosma, Gaurav Mishra, Adam Roberts, Paul Barham, Hyung Won Chung, Charles Sutton, Sebastian Gehrmann, et al.Palm: Scaling language modeling with pathways.Journal of Machine Learning Research, 24(240):1\u2013113, 2023.</li> <li>[13] Peter Clark, Isaac Cowhey, Oren Etzioni, Tushar Khot, Ashish Sabharwal, Carissa Schoenick, and Oyvind Tafjord.Think you have solved question answering? try arc, the ai2 reasoning challenge.ArXiv, abs/1803.05457, 2018.</li> <li>[14] P Kingma Diederik.Adam: A method for stochastic optimization.2014.</li> <li>[15] Jesse Dodge, Maarten Sap, Ana Marasovi\u0107, William Agnew, Gabriel Ilharco, Dirk Groeneveld, Margaret Mitchell, and Matt Gardner.Documenting large webtext corpora: A case study on the colossal clean crawled corpus.arXiv preprint arXiv:2104.08758, 2021.</li> <li>[16] Nan Du, Yanping Huang, Andrew M Dai, Simon Tong, Dmitry Lepikhin, Yuanzhong Xu, Maxim Krikun, Yanqi Zhou, Adams Wei Yu, Orhan Firat, et al.Glam: Efficient scaling of language models with mixture-of-experts.In International Conference on Machine Learning, pages 5547\u20135569. PMLR, 2022.</li> <li>[17] Leo Gao, Stella Biderman, Sid Black, Laurence Golding, Travis Hoppe, Charles Foster, Jason Phang, Horace He, Anish Thite, Noa Nabeshima, et al.The pile: An 800gb dataset of diverse text for language modeling.arXiv preprint arXiv:2101.00027, 2020.</li> <li>[18] Leo Gao, Jonathan Tow, Baber Abbasi, Stella Biderman, Sid Black, Anthony DiPofi, Charles Foster, Laurence Golding, Jeffrey Hsu, Alain Le Noac\u2019h, Haonan Li, Kyle McDonell, Niklas Muennighoff, Chris Ociepa, Jason Phang, Laria Reynolds, Hailey Schoelkopf, Aviya Skowron, Lintang Sutawika, Eric Tang, Anish Thite, Ben Wang, Kevin Wang, and Andy Zou.A framework for few-shot language model evaluation, 07 2024.</li> <li>[19] Dirk Groeneveld, Iz Beltagy, Pete Walsh, Akshita Bhagia, Rodney Kinney, Oyvind Tafjord, Ananya Harsh Jha, Hamish Ivison, Ian Magnusson, Yizhong Wang, et al.Olmo: Accelerating the science of language models.arXiv preprint arXiv:2402.00838, 2024.</li> <li>[20] Dan Hendrycks, Collin Burns, Steven Basart, Andy Zou, Mantas Mazeika, Dawn Song, and Jacob Steinhardt.Measuring massive multitask language understanding.Proceedings of the International Conference on Learning Representations (ICLR), 2021.</li> <li>[21] Ari Holtzman, Jan Buys, Li Du, Maxwell Forbes, and Yejin Choi.The curious case of neural text degeneration.arXiv preprint arXiv:1904.09751, 2019.</li> <li>[22] Albert Q Jiang, Alexandre Sablayrolles, Arthur Mensch, Chris Bamford, Devendra Singh Chaplot, Diego de las Casas, Florian Bressand, Gianna Lengyel, Guillaume Lample, Lucile Saulnier, et al.Mistral 7b.arXiv preprint arXiv:2310.06825, 2023.</li> <li>[23] Qiao Jin, Bhuwan Dhingra, Zhengping Liu, William Cohen, and Xinghua Lu.Pubmedqa: A dataset for biomedical research question answering.In Proceedings of the 2019 Conference on Empirical Methods in Natural Language Processing and the 9th International Joint Conference on Natural Language Processing (EMNLP-IJCNLP), pages 2567\u20132577, 2019.</li> <li>[24] Armand Joulin, Edouard Grave, Piotr Bojanowski, and Tomas Mikolov.Bag of tricks for efficient text classification.In Proceedings of the 15th Conference of the European Chapter of the Association for Computational Linguistics: Volume 2, Short Papers, pages 427\u2013431. Association for Computational Linguistics, April 2017.</li> <li>[25] Denis Kocetkov, Raymond Li, Loubna Ben Allal, Jia Li, Chenghao Mou, Carlos Mu\u00f1oz Ferrandis, Yacine Jernite, Margaret Mitchell, Sean Hughes, Thomas Wolf, Dzmitry Bahdanau, Leandro von Werra, and Harm de Vries.The stack: 3 tb of permissively licensed source code.Preprint, 2022.</li> <li>[26] Hugo Lauren\u00e7on, Lucile Saulnier, Thomas Wang, Christopher Akiki, Albert Villanova del Moral, Teven Le Scao, Leandro Von Werra, Chenghao Mou, Eduardo Gonz\u00e1lez Ponferrada, Huu Nguyen, et al.The bigscience roots corpus: A 1.6 tb composite multilingual dataset.Advances in Neural Information Processing Systems, 35:31809\u201331826, 2022.</li> <li>[27] Teven Le Scao, Angela Fan, Christopher Akiki, Ellie Pavlick, Suzana Ili\u0107, Daniel Hesslow, Roman Castagn\u00e9, Alexandra Sasha Luccioni, Fran\u00e7ois Yvon, Matthias Gall\u00e9, et al.Bloom: A 176b-parameter open-access multilingual language model.2023.</li> <li>[28] Katherine Lee, Daphne Ippolito, Andrew Nystrom, Chiyuan Zhang, Douglas Eck, Chris Callison-Burch, and Nicholas Carlini.Deduplicating training data makes language models better.arXiv preprint arXiv:2107.06499, 2021.</li> <li>[29] Aitor Lewkowycz, Anders Andreassen, David Dohan, Ethan Dyer, Henryk Michalewski, Vinay Ramasesh, Ambrose Slone, Cem Anil, Imanol Schlag, Theo Gutman-Solo, et al.Solving quantitative reasoning problems with language models.Advances in Neural Information Processing Systems, 35:3843\u20133857, 2022.</li> <li>[30] Jeffrey Li, Alex Fang, Georgios Smyrnis, Maor Ivgi, Matt Jordan, Samir Gadre, Hritik Bansal, Etash Guha, Sedrick Keh, Kushal Arora, et al.Datacomp-lm: In search of the next generation of training sets for language models.arXiv preprint arXiv:2406.11794, 2024.</li> <li>[31] Raymond Li, Loubna Ben Allal, Yangtian Zi, Niklas Muennighoff, Denis Kocetkov, Chenghao Mou, Marc Marone, Christopher Akiki, Jia Li, Jenny Chim, et al.Starcoder: may the source be with you!arXiv preprint arXiv:2305.06161, 2023.</li> <li>[32] Zehan Li, Xin Zhang, Yanzhao Zhang, Dingkun Long, Pengjun Xie, and Meishan Zhang.Towards general text embeddings with multi-stage contrastive learning.arXiv preprint arXiv:2308.03281, 2023.</li> <li>[33] Stephanie Lin, Jacob Hilton, and Owain Evans.Truthfulqa: Measuring how models mimic human falsehoods, 2021.</li> <li>[34] Shayne Longpre, Gregory Yauney, Emily Reif, Katherine Lee, Adam Roberts, Barret Zoph, Denny Zhou, Jason Wei, Kevin Robinson, David Mimno, et al.A pretrainer\u2019s guide to training data: Measuring the effects of data age, domain coverage, quality, &amp; toxicity.arXiv preprint arXiv:2305.13169, 2023.</li> <li>[35] Ian Magnusson, Akshita Bhagia, Valentin Hofmann, Luca Soldaini, Ananya Harsh Jha, Oyvind Tafjord, Dustin Schwenk, Evan Pete Walsh, Yanai Elazar, Kyle Lo, et al.Paloma: A benchmark for evaluating language model fit.arXiv preprint arXiv:2312.10523, 2023.</li> <li>[36] Sachin Mehta, Mohammad Hossein Sekhavat, Qingqing Cao, Maxwell Horton, Yanzi Jin, Chenfan Sun, Iman Mirzadeh, Mahyar Najibi, Dmitry Belenko, Peter Zatloukal, et al.Openelm: An efficient language model family with open-source training and inference framework.arXiv preprint arXiv:2404.14619, 2024.</li> <li>[37] Paulius Micikevicius, Sharan Narang, Jonah Alben, Gregory Diamos, Erich Elsen, David Garcia, Boris Ginsburg, Michael Houston, Oleksii Kuchaiev, Ganesh Venkatesh, et al.Mixed precision training.arXiv preprint arXiv:1710.03740, 2017.</li> <li>[38] Todor Mihaylov, Peter Clark, Tushar Khot, and Ashish Sabharwal.Can a suit of armor conduct electricity? a new dataset for open book question answering.In EMNLP, 2018.</li> <li>[39] Swaroop Mishra, Daniel Khashabi, Chitta Baral, and Hannaneh Hajishirzi.Cross-task generalization via natural language crowdsourcing instructions.In ACL, 2022. [40] Yixin Nie, Adina Williams, Emily Dinan, Mohit Bansal, Jason Weston, and Douwe Kiela.Adversarial nli: A new benchmark for natural language understanding.In Proceedings of the 58th Annual Meeting of the Association for Computational Linguistics. Association for Computational Linguistics, 2020. [41] Nomic.Structure unstructured data: Interact, discover insights and build with unstructured text, image and audio data., 2024.Accessed: 2024-06-12. [42] Denis Paperno, Germ\u00e1n Kruszewski, Angeliki Lazaridou, Ngoc Quan Pham, Raffaella Bernardi, Sandro Pezzelle, Marco Baroni, Gemma Boleda, and Raquel Fernandez.The LAMBADA dataset: Word prediction requiring a broad discourse context.In Proceedings of the 54th Annual Meeting of the Association for Computational Linguistics (Volume 1: Long Papers), pages 1525\u20131534, Berlin, Germany, August 2016. Association for Computational Linguistics. [43] Guilherme Penedo, Hynek Kydl\u00ed\u010dek, Anton Lozhkov, Margaret Mitchell, Colin Raffel, Leandro Von Werra, Thomas Wolf, et al.The fineweb datasets: Decanting the web for the finest text data at scale.arXiv preprint arXiv:2406.17557, 2024. [44] Guilherme Penedo, Quentin Malartic, Daniel Hesslow, Ruxandra Cojocaru, Hamza Alobeidli, Alessandro Cappelli, Baptiste Pannier, Ebtesam Almazrouei, and Julien Launay.The refinedweb dataset for falcon llm: Outperforming curated corpora with web data only.Advances in Neural Information Processing Systems, 36, 2024. [45] Jack W Rae, Sebastian Borgeaud, Trevor Cai, Katie Millican, Jordan Hoffmann, Francis Song, John Aslanides, Sarah Henderson, Roman Ring, Susannah Young, et al.Scaling language models: Methods, analysis &amp; insights from training gopher.arXiv preprint arXiv:2112.11446, 2021. [46] Colin Raffel, Noam Shazeer, Adam Roberts, Katherine Lee, Sharan Narang, Michael Matena, Yanqi Zhou, Wei Li, and Peter J Liu.Exploring the limits of transfer learning with a unified text-to-text transformer.Journal of machine learning research, 21(140):1\u201367, 2020. [47] Siva Reddy, Danqi Chen, and Christopher D Manning.Coqa: A conversational question answering challenge.Transactions of the Association for Computational Linguistics, 7:249\u2013266, 2019. [48] Keisuke Sakaguchi, Ronan Le Bras, Chandra Bhagavatula, and Yejin Choi.Winogrande: an adversarial winograd schema challenge at scale.Commun. ACM, 64(9):99\u2013106, aug 2021. [49] Victor Sanh, Albert Webson, Colin Raffel, Stephen H. Bach, Lintang Sutawika, Zaid Alyafeai, Antoine Chaffin, Arnaud Stiegler, Teven Le Scao, Arun Raja, Manan Dey, M Saiful Bari, Canwen Xu, Urmish Thakker, Shanya Sharma Sharma, Eliza Szczechla, Taewoon Kim, Gunjan Chhablani, Nihal Nayak, Debajyoti Datta, Jonathan Chang, Mike Tian-Jian Jiang, Han Wang, Matteo Manica, Sheng Shen, Zheng Xin Yong, Harshit Pandey, Rachel Bawden, Thomas Wang, Trishala Neeraj, Jos Rozen, Abheesht Sharma, Andrea Santilli, Thibault Fevry, Jason Alan Fries, Ryan Teehan, Stella Biderman, Leo Gao, Tali Bers, Thomas Wolf, and Alexander M. Rush.Multitask prompted training enables zero-shot task generalization, 2021. [50] Maarten Sap, Hannah Rashkin, Derek Chen, Ronan LeBras, and Yejin Choi.Socialiqa: Commonsense reasoning about social interactions.arXiv preprint arXiv:1904.09728, 2019. [51] Zhiqiang Shen, Tianhua Tao, Liqun Ma, Willie Neiswanger, Joel Hestness, Natalia Vassilieva, Daria Soboleva, and Eric Xing.Slimpajama-dc: Understanding data combinations for llm training.arXiv preprint arXiv:2309.10818, 2023. [52] Luca Soldaini, Rodney Kinney, Akshita Bhagia, Dustin Schwenk, David Atkinson, Russell Authur, Ben Bogin, Khyathi Chandu, Jennifer Dumas, Yanai Elazar, et al.Dolma: An open corpus of three trillion tokens for language model pretraining research.arXiv preprint arXiv:2402.00159, 2024. [53] MosaicML NLP Team.Introducing mpt-7b: A new standard for open-source, commercially usable llms, 2023.Accessed: 2023-05-05. [54] Snowflake AI Research Team.Snowflake arctic: The best llm for enterprise ai \u2014 efficiently intelligent, truly open, 2023.Accessed: 2024-05-27. [55] Kushal Tirumala, Daniel Simig, Armen Aghajanyan, and Ari Morcos.D4: Improving llm pretraining via document de-duplication and diversification.Advances in Neural Information Processing Systems, 36, 2024. [56] Yury Tokpanov, Beren Millidge, Paolo Glorioso, Jonathan Pilault, Adam Ibrahim, James Whittington, and Quentin Anthony.Zyda: A 1.3t dataset for open language modeling, 2024.</li> <li>[57] Hugo Touvron, Thibaut Lavril, Gautier Izacard, Xavier Martinet, Marie-Anne Lachaux, Timoth\u00e9e Lacroix, Baptiste Rozi\u00e8re, Naman Goyal, Eric Hambro, Faisal Azhar, et al.Llama: Open and efficient foundation language models.arXiv preprint arXiv:2302.13971, 2023.</li> <li>[58] Hugo Touvron, Louis Martin, Kevin Stone, Peter Albert, Amjad Almahairi, Yasmine Babaei, Nikolay Bashlykov, Soumya Batra, Prajjwal Bhargava, Shruti Bhosale, et al.Llama 2: Open foundation and fine-tuned chat models.arXiv preprint arXiv:2307.09288, 2023.</li> <li>[59] Ben Wang and Aran Komatsuzaki.GPT-J-6B: A 6 Billion Parameter Autoregressive Language Model.https://github.com/kingoflolz/mesh-transformer-jax, May 2021. [60] Johannes Welbl, Nelson F Liu, and Matt Gardner.Crowdsourcing multiple choice science questions.arXiv preprint arXiv:1707.06209, 2017. [61] Guillaume Wenzek, Marie-Anne Lachaux, Alexis Conneau, Vishrav Chaudhary, Francisco Guzm\u00e1n, Armand Joulin, and Edouard Grave.Ccnet: Extracting high quality monolingual datasets from web crawl data.arXiv preprint arXiv:1911.00359, 2019. [62] Sang Michael Xie, Shibani Santurkar, Tengyu Ma, and Percy S Liang.Data selection for language models via importance resampling.Advances in Neural Information Processing Systems, 36:34201\u201334227, 2023. [63] Linting Xue, Noah Constant, Adam Roberts, Mihir Kale, Rami Al-Rfou, Aditya Siddhant, Aditya Barua, and Colin Raffel.mT5: A massively multilingual pre-trained text-to-text transformer.In Proceedings of the 2021 Conference of the North American Chapter of the Association for Computational Linguistics: Human Language Technologies, pages 483\u2013498, Online, June 2021. Association for Computational Linguistics. [64] Rowan Zellers, Ari Holtzman, Yonatan Bisk, Ali Farhadi, and Yejin Choi.Hellaswag: Can a machine really finish your sentence?In Proceedings of the 57th Annual Meeting of the Association for Computational Linguistics, 2019. [65] Ge Zhang, Scott Qu, Jiaheng Liu, Chenchen Zhang, Chenghua Lin, Chou Leuang Yu, Danny Pan, Esther Cheng, Jie Liu, Qunshu Lin, et al.Map-neo: Highly capable and transparent bilingual large language model series.arXiv preprint arXiv:2405.19327, 2024. [66] Yanli Zhao, Andrew Gu, Rohan Varma, Liang Luo, Chien-Chin Huang, Min Xu, Less Wright, Hamid Shojanazeri, Myle Ott, Sam Shleifer, et al.Pytorch fsdp: experiences on scaling fully sharded data parallel.arXiv preprint arXiv:2304.11277, 2023.</li> </ul>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#a","title":"\u9644\u5f55 A \u9884\u671f\u7528\u9014","text":"<p>RedPajama \u6570\u636e\u96c6\u521b\u5efa\u7684\u4e3b\u8981\u76ee\u662f\u4e3a\u5927\u578b\u8bed\u8a00\u6a21\u578b\u63d0\u4f9b\u8bad\u7ec3\u6570\u636e\u3002RedPajama \u5305\u542b\u6765\u81ea\u4e0d\u540c\u6765\u6e90\u548c\u9886\u57df\u7684\u6570\u636e\u3002RedPajama-V1 \u5305\u542b\u4ece\u7f51\u7edc\u6293\u53d6\u83b7\u5f97\u7684\u6570\u636e\u3001\u7ef4\u57fa\u767e\u79d1\u6587\u7ae0\u3001\u4ece arXiv \u4e0a\u7684\u6587\u7ae0\u4e2d\u63d0\u53d6\u7684\u79d1\u5b66\u5185\u5bb9\uff0c\u4ee5\u53ca\u5404\u79cd\u7f16\u7a0b\u8bed\u8a00\u7684\u4ee3\u7801\u3002RedPajama-V2 \u5305\u542b\u7684\u6570\u636e\u5b8c\u5168\u57fa\u4e8e\u7f51\u7edc\u6293\u53d6\uff0c\u5e76\u9644\u5e26\u4e00\u7cfb\u5217\u65e8\u5728\u7528\u4e8e\u8fc7\u6ee4\u539f\u59cb\u6570\u636e\u96c6\u7684\u8d28\u91cf\u4fe1\u53f7\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#b","title":"\u9644\u5f55 B\u6570\u636e\u96c6\u53ef\u8bbf\u95ee\u6027","text":"<p>RedPajama-V1 \u548c RedPajama-V2 \u90fd\u53ef\u4ee5\u901a\u8fc7 Huggingface Hub \u4e0b\u8f7d\uff0c\u94fe\u63a5\u5206\u522b\u4e3a https://huggingface.co/datasets/togethercomputer/RedPajama-Data-1T \u548c https://huggingface.co/datasets/togethercomputer/RedPajama-Data-V2\u3002</p> <p>\u53ef\u901a\u8fc7\u516c\u5171 HTTP \u7aef\u70b9\u8bbf\u95ee\u3002 \u6211\u4eec\u4e5f\u901a\u8fc7\u516c\u5171 HTTPS \u7aef\u70b9\u63d0\u4f9b\u5bf9\u6570\u636e\u96c6\u7684\u8bbf\u95ee\u3002 RedPajama-V1 \u6570\u636e\u96c6\u7ec4\u4ef6\u7684\u7f51\u5740\u5217\u8868\u53ef\u4ece https://data.together.xyz/redpajama-data-1T/v1.0.0/urls.txt \u83b7\u53d6\u3002 RedPajama-V2 \u4e0d\u540c\u7ec4\u4ef6\u7684\u7f51\u5740\u5217\u8868\u53ef\u4ece\u4ee5\u4e0b\u7f51\u5740\u83b7\u53d6\uff1a</p> <ul> <li>\u539f\u59cb\u6587\u672c\u6587\u6863\u53ef\u4ece https://data.together.xyz/redpajama-data-v2/v1.0.0/urls/document-urls.txt \u83b7\u53d6\u3002</li> <li>\u5934\u90e8\u548c\u4e2d\u95f4\u5206\u533a\u7684\u8d28\u91cf\u4fe1\u53f7\u53ef\u4ece https://data.together.xyz/redpajama-data-v2/v1.0.0/urls/quality_signals-urls.txt \u83b7\u53d6\u3002</li> <li>\u5b8c\u5168\u91cd\u590d\u7684\u6587\u6863 ID \u5217\u8868\u53ef\u4ece https://data.together.xyz/redpajama-data-v2/v1.0.0/urls/duplicates-urls.txt \u83b7\u53d6\u3002</li> <li>\u6700\u5c0f\u54c8\u5e0c\u7b7e\u540d\u53ef\u4ece https://data.together.xyz/redpajama-data-v2/v1.0.0/urls/minhash-urls.txt \u83b7\u53d6\u3002</li> </ul>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#b1","title":"B.1\u6570\u636e\u96c6\u7ed3\u6784","text":"<p>RedPajama-V1 \u548c RedPajama-V2 \u90fd\u4ee5 JSON Lines \u683c\u5f0f\u5206\u53d1\uff0c\u5e76\u88ab\u5206\u5272\u6210\u591a\u4e2a\u5206\u7247\u3002 \u7531\u4e8e\u4e24\u8005\u6027\u8d28\u4e0d\u540c\uff0c\u8fd9\u4e24\u4e2a\u6570\u636e\u96c6\u7684\u7ed3\u6784\u4e5f\u4e0d\u540c\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#b11-redpajama-v1","title":"B.1.1 RedPajama-V1","text":"<p>RedPajama-V1 \u5305\u542b\u4e03\u4e2a\u9886\u57df\uff0c\u5176\u7ed3\u6784\u4e5f\u76f8\u5e94\u5730\u8fdb\u884c\u4e86\u5212\u5206\u3002 \u9664\u4e86 Common Crawl \u5b50\u96c6\u4e4b\u5916\uff0c\u6bcf\u4e2a\u7ec4\u4ef6\u90fd\u9075\u5faa\u4ee5\u4e0b\u7ed3\u6784\uff1a</p> JSON<pre><code>{\n \"\u6587\u672c\": \"...\", \"meta\" {... }\n}\n</code></pre> <p>\u4e0d\u540c\u6765\u6e90\u7684\u5143\u6570\u636e\u5b57\u6bb5\u5404\u4e0d\u76f8\u540c\uff1a</p> <ul> <li>Arxiv\u5b50\u96c6\u7684\u5143\u6570\u636e\u5b57\u6bb5\u5305\u62ec\u65f6\u95f4\u6233\u3001\u5e74\u6708\u4efd\u3001arxiv_id\u3001\u8bed\u8a00\u548c\u7f51\u5740\u3002</li> <li>C4\u5b50\u96c6\u7684\u5143\u6570\u636e\u5b57\u6bb5\u5305\u62ec\u65f6\u95f4\u6233\u3001\u6765\u6e90\u3001\u8bed\u8a00\u548c\u7f51\u5740\u3002</li> <li>Github\u5b50\u96c6\u7684\u5143\u6570\u636e\u5b57\u6bb5\u5305\u62ec\u5185\u5bb9\u54c8\u5e0c\u503c\u3001\u65f6\u95f4\u6233\u3001\u6765\u6e90\u3001\u884c\u6570\u3001\u6700\u5927\u884c\u957f\u3001\u5e73\u5747\u884c\u957f\u3001\u5b57\u6bcd\u6570\u5b57\u6bd4\u4f8b\u3001\u4ed3\u5e93\u540d\u79f0\u3001ID\u3001\u5927\u5c0f\u3001\u4e8c\u8fdb\u5236\u3001\u526f\u672c\u3001\u5f15\u7528\u3001\u8def\u5f84\u3001\u6a21\u5f0f\u3001\u8bb8\u53ef\u8bc1\u3001\u8bed\u8a00\u3002</li> <li>Stack Exchange\u5b50\u96c6\u7684\u5143\u6570\u636e\u5b57\u6bb5\u5305\u62ec\u65f6\u95f4\u6233\u3001\u6765\u6e90\u3001\u8bed\u8a00\u3001\u95ee\u9898\u5f97\u5206\u548c\u7f51\u5740\u3002</li> <li>\u7ef4\u57fa\u767e\u79d1\u5b50\u96c6\u7684\u5143\u6570\u636e\u5b57\u6bb5\u5305\u62ec\u65f6\u95f4\u6233\u3001\u6807\u9898\u3001\u8bed\u8a00\u548c\u7f51\u5740\u3002</li> </ul> <p>Common Crawl\u5b50\u96c6\u9075\u5faa\u4ee5\u4e0b\u7ed3\u6784\uff1a</p> JSON<pre><code>{\n \"\u6587\u672c\": \"...\",\n \"pred_label\":...,\n \"pred_label_prob\":...,\n \"wiki_prob\":...,\n \"\u6765\u6e90\":\"...\"\n}\n</code></pre>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#b12-redpajama-v2","title":"B.1.2 RedPajama-v2","text":"<p>\u8be5\u6570\u636e\u96c6\u7684\u6838\u5fc3\u7531\u6587\u672c\u6587\u6863\u3001\u8d28\u91cf\u6807\u6ce8\u3001\u91cd\u590dID\u548cMinHash\u7b7e\u540d\u7ec4\u6210\u3002\u5bf9\u4e8e\u6587\u672c\u6587\u6863\uff0c\u5176\u7ed3\u6784\u5728\u5f88\u5927\u7a0b\u5ea6\u4e0a\u9075\u5faaCCNet\u5b9a\u4e49\u7684\u7ed3\u6784\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u7ed9\u5b9aCommonCrawl\u5feb\u7167\u7684\u6587\u6863\u88ab\u5206\u62105000\u4e2a\u5206\u7247\uff0c\u5176\u4e2d\u6587\u4ef6\u540d\u6307\u793a\u5206\u7247\u3001\u6587\u6863\u8bed\u8a00\u548c\u56f0\u60d1\u5ea6\u533a\u95f4\uff08\u5206\u533a\uff09\u3002\u9ad8\u8d28\u91cf\u6807\u6ce8\u3001\u91cd\u590d\u9879\u548c MinHash \u9075\u5faa\u76f8\u540c\u7684\u903b\u8f91\uff0c\u5e76\u53cd\u6620\u539f\u59cb\u6587\u6863\u7684\u6587\u4ef6\u540d\u3002</p> <ul> <li>\u6587\u4ef6\u7ed3\u6784\u3002 \u5305\u542b\u539f\u59cb\u6587\u672c\u6587\u6863\u7684\u6587\u4ef6\u6309\u7167\u4ee5\u4e0b\u6a21\u5f0f\u7ec4\u7ec7\uff1a</li> </ul> Text Only<pre><code>documents/&lt;snapshot_id&gt;/&lt;shard_id&gt;/&lt;lang&gt;_&lt;ppl_bucket&gt;.json.gz\n</code></pre> <p>\u5176\u4e2dsnapshot_id\u5bf9\u5e94\u4e8e RPv2 \u4e2d\u5305\u542b\u7684\u4efb\u4f55\u6293\u53d6\u6570\u636e\uff0cshard_id\u8303\u56f4\u4ece0000\u52304999\uff0clang\u53ef\u4ee5\u662fen, de, fr, es\u6216it\u3002\u6700\u540e\uff0cppl_bucket\u8868\u793a\u6839\u636e\u7ef4\u57fa\u767e\u79d1\u56f0\u60d1\u5ea6\u8fdb\u884c\u7684\u5212\u5206\uff0c\u53ef\u4ee5\u662fhead\u3001middle\u6216tail\u3002\u7c7b\u4f3c\u5730\uff0c\u8d28\u91cf\u4fe1\u53f7\u3001\u91cd\u590d ID \u548c MinHash \u9075\u5faa\u4ee5\u4e0b\u6a21\u5f0f</p> Text Only<pre><code>quality_signals/&lt;snapshot_id&gt;/&lt;shard_id&gt;/&lt;lang&gt;_&lt;ppl_bucket&gt;.signals.json.gz,\nduplicates/&lt;snapshot_id&gt;/&lt;shard_id&gt;/&lt;lang&gt;_&lt;ppl_bucket&gt;.duplicates.parquet,\n</code></pre> <p>\u548c Text Only<pre><code>minhashes/&lt;snapshot_id&gt;/&lt;shard_id&gt;/&lt;lang&gt;_&lt;ppl_bucket&gt;.minhash.parquet.\n</code></pre></p> <p>\u6587\u6863\u7ed3\u6784\u3002 \u8fd9\u4e9bdocuments\u5b58\u50a8\u4e3a Gzip \u538b\u7f29\u7684 JSONL \u6587\u4ef6\uff0c\u5e76\u9075\u5faa\u4ee5\u4e0b\u6a21\u5f0f</p> Text Only<pre><code>{\n\"url\": \"...\" ,\n\" date_download \": \"...\" ,\n\" digest \": \"...\" ,\n\" length \": ...,\n\" nlines \": ...,\n\" source_domain \": \"...\" ,\n\" title \": \"...\" ,\n\" raw_content \": \"...\" ,\n\" cc_segment \": \"...\" ,\n\" original_nlines \": ...,\n\" original_length \": ..,\n\" line_ids \": [ ...],\n\" language \": \"...\" ,\n\" language_score \": ...,\n\" perplexity \": ...,\n\" bucket \": \"...\"\n}\n</code></pre> <p>\u8d28\u91cf\u4fe1\u53f7\u7ed3\u6784\u3002 \u8fd9\u4e9b\u8d28\u91cf\u4fe1\u53f7\u662f\u7ecf\u8fc7Gzip\u538b\u7f29\u7684JSONL\u6587\u4ef6\uff0c\u5e76\u9075\u5faa\u4ee5\u4e0b\u6a21\u5f0f</p> Text Only<pre><code>{\n\"id\": \"...\" ,\n\" id_int \": ...,\n\" metadata \": {\n\" cc_segment \": \"...\" ,\n\" cc_net_source \": \"...\" ,\n\"url\": \"...\" ,\n\" source_domain \": \"...\" ,\n\" language \": \"...\" ,\n\" snapshot_id \": \"...\"\n},\n\"quality_signals \": {\n    \"key\": [[ start , end, score ]]\n    }\n}\n</code></pre> <p>quality_signals\u5b57\u6bb5\u662f\u4e00\u4e2a\u5b57\u5178\uff0c\u5176\u4e2d\u8d28\u91cf\u4fe1\u53f7\u7684\u540d\u79f0\u4f5c\u4e3a\u952e\uff0c\u5143\u7ec4\u5217\u8868\u4f5c\u4e3a\u503c\u3002 \u6bcf\u4e2a\u5143\u7ec4\u5305\u542b\u4e09\u4e2a\u6d6e\u70b9\u6570start\u3001end\u548cscore\uff0c\u6307\u793araw_content\u5b57\u7b26\u4e32\u4e2dscore \u7684\u4f4d\u7f6e\u3002 \u6b64\u8868\u793a\u6cd5\u9075\u5faaDolma [52] \u4e2d\u4f7f\u7528\u7684\u8868\u793a\u6cd5\uff0c\u5e76\u5141\u8bb8\u5355\u4e2a\u8868\u793a\u6cd5\u5bf9\u5e94\u7528\u4e8e\u4e0d\u540c\u6587\u672c\u7c92\u5ea6\u7ea7\u522b\uff08\u4f8b\u5982\uff0c\u884c\u7ea7\u548c\u6587\u6863\u7ea7\uff09\u7684\u8d28\u91cf\u4fe1\u53f7\u8fdb\u884c\u7f16\u7801\u3002</p> <ul> <li> <p>\u91cd\u590dID \u91cd\u590d\u6587\u6863\u7684ID\u5b58\u50a8\u4e3aparquet\u6587\u4ef6\u3002 parquet\u6587\u4ef6\u4e2d\u7684\u6bcf\u4e00\u884c\u5bf9\u5e94\u4e8e\u81f3\u5c11\u5728\u6574\u4e2a\u8bed\u6599\u5e93\u4e2d\u91cd\u590d\u4e00\u6b21\u7684\u6587\u6863\u3002 \u6211\u4eec\u5f3a\u8c03\uff0c\u8fd9\u5e76\u4e0d\u5305\u62ec\u5177\u6709\u540e\u7eed\u91cd\u590d\u9879\u7684\u6587\u6863\u7684\u7b2c\u4e00\u6b21\u51fa\u73b0\u3002 \u6362\u53e5\u8bdd\u8bf4\uff0c\u5982\u679c\u5220\u9664\u91cd\u590d\u5217\u8868\u4e2d\u51fa\u73b0\u7684\u6bcf\u4e2a\u6587\u6863\uff0c\u5219\u6bcf\u4e2a\u6587\u6863\u96c6\u7fa4\u7684\u4e00\u4e2a\u6210\u5458\u4fdd\u7559\u5728\u6570\u636e\u96c6\u4e2d\u3002</p> </li> <li> <p>\u6700\u5c0f\u54c8\u5e0c \u6700\u5c0f\u54c8\u5e0c\u7b7e\u540d\u5b58\u50a8\u5728parquet\u6587\u4ef6\u4e2d\uff0c\u5e76\u88ab\u5212\u5206\u6210\u591a\u4e2aband\u548crows\uff0c\u5bf9\u5e94\u4e8e \\(\\{.7, 0.8, 0.9, 1.0\\}\\) \u8303\u56f4\u5185\u7684\u4e0d\u540c\u7ea7\u522b\u7684Jaccard\u76f8\u4f3c\u5ea6\u3002</p> </li> </ul>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#credpajama-v1","title":"\u9644\u5f55 CRedPajama-V1","text":"<p>\u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u63d0\u4f9b\u4e86RedPajama-V1\u6570\u636e\u96c6\u7684\u66f4\u591a\u7ec6\u8282\u548c\u7ed3\u679c\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#c1github","title":"C.1\u4eceGitHub\u83b7\u53d6\u7684\u4ee3\u7801\u7684\u8fc7\u6ee4\u542f\u53d1\u5f0f\u65b9\u6cd5","text":"<p>\u6b63\u5982\u672c\u6587\u4e3b\u8981\u90e8\u5206\u6240\u8ff0\uff0c\u6211\u4eec\u901a\u8fc7\u4ec5\u4fdd\u7559Apache\u3001BSD\u548cMIT\u8bb8\u53ef\u8bc1\u4e0b\u7684\u9879\u76ee\u6765\u8fc7\u6ee4\u539f\u59cbGitHub\u6570\u636e\u96c6\uff0c\u5e76\u989d\u5916\u5e94\u7528\u7c7b\u4f3c\u4e8eThe Stack\u6570\u636e\u96c6[25]\u4e2d\u4f7f\u7528\u7684\u8fc7\u6ee4\u542f\u53d1\u5f0f\u65b9\u6cd5\u3002 \u5177\u4f53\u6765\u8bf4\uff0c\u6211\u4eec\u5e94\u7528\u4ee5\u4e0b\u542f\u53d1\u5f0f\u65b9\u6cd5\u96c6\uff0c\u5220\u9664\u4efb\u4f55\u5177\u6709\u4ee5\u4e0b\u5c5e\u6027\u7684\u6587\u4ef6\uff1a</p> <p>\u2022 \u6700\u5927\u884c\u957f\u8d85\u8fc71000\u4e2a\u5b57\u7b26\u3002 \u2022 \u5e73\u5747\u884c\u957f\u8d85\u8fc7100\u4e2a\u5b57\u7b26\u3002 \u2022 \u5b57\u6bcd\u6570\u5b57\u5b57\u7b26\u7684\u6bd4\u4f8b\u5c0f\u4e8e0.25\u3002 \u2022 \u5b57\u6bcd\u5b57\u7b26\u6570\u91cf\u4e0e\u7b26\u5143\u6570\u91cf\u4e4b\u6bd4\u5c0f\u4e8e1.5\u3002 \u2022 \u6269\u5c55\u540d\u4e0d\u5728\u4ee5\u4e0b\u767d\u540d\u5355\u6269\u5c55\u540d\u96c6\u5408\u4e2d\uff1a .asm, .bat, .cmd, .c, .h, .cs, .cpp, .hpp, .c++, .h++, .cc, .hh, .C, .H, .cmake, .css, .dockerfile, .f90, .f, .f03, .f08, .f77, .f95, .for, .fpp, .go, .hs, .html, .java, .js, .jl, .lua, .md, .markdown, .php, .php3, .php4, .php5, .phps, .phpt, .pl, .pm, .pod, .perl, .ps1, .psd1, .psm1, .py, .rb, .rs, .sql, .scala, .sh, .bash, .command, .zsh, .ts, .tsx, .tex, .vb, Dockerfile, Makefile, .xml, .rst, .m, .smali C.2RedPajama-INCITE \u5927\u8bed\u8a00\u6a21\u578b\u7684\u8be6\u7ec6\u8bc4\u4f30 \u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u63d0\u4f9b\u4e86\u5728RedPajama-V1\u6570\u636e\u96c6\u4e0a\u8bad\u7ec3\u7684RedPajama-INCITE 3B\u548c7B\u5927\u8bed\u8a00\u6a21\u578b\u7684\u8be6\u7ec6\u57fa\u51c6\u5206\u6570\u3002</p> <p>Refer to caption \u56fe2\uff1a RedPajama-INCITE-Base 3B \u6a21\u578b\u5728 lm-evaluation-harness \u5b50\u96c6\u4e0a\u7684\u7ed3\u679c\u3002 \u8fd9\u4e9b\u4efb\u52a1\u7684\u9009\u62e9\u662f\u6839\u636e\u8bc4\u4f30 Pythia [4] \u548c GPT-J [59] \u6240\u505a\u7684\u9009\u62e9\u8fdb\u884c\u7684\u3002 \u8868 7\uff1a RedPajama-INCITE-Base-3B-v1 \u6a21\u578b\u5728 lm-evaluation-harness \u5b50\u96c6\uff08\u96f6\u6837\u672c\uff09\u548c HELM \u4e0a\u7684\u7ed3\u679c\uff0c\u4e0e\u53c2\u6570\u6570\u91cf\u76f8\u4f3c\u7684\u6a21\u578b\u8fdb\u884c\u4e86\u6bd4\u8f83\u3002 \u6bcf\u4e2a\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u5f97\u5206\u6700\u9ad8\u7684\u6a21\u578b\u4ee5\u7c97\u4f53\u663e\u793a\u3002 Lambada OpenAi (acc)</p> <p>Hellaswag (acc_norm)</p> <p>Winogrande (acc)</p> <p>Piqa (acc)     Avg.    HELM avg. GPT-Neo 0.6223  0.5579  0.5769  0.7219  0.6197  0.3570 Pythia-2.8B 0.6466  0.5933  0.6006  0.7399  0.6451  0.3770 Pythia-2.8B-dedup   0.6524  0.5941  0.5848  0.7404  0.6429  - RedPajama-INCITE-Base-3B-v1 0.6541  0.6317  0.6322  0.7470  0.6662  0.4060</p> <p>\u8868 8\uff1a RedPajama-INCITE-Base-7B-v1 \u6a21\u578b\u4ee5\u53ca\u6307\u4ee4\u5fae\u8c03\u540e\u7684\u6a21\u578b\u5728 HELM \u57fa\u51c6\u6d4b\u8bd5\u4e0a\u7684\u7ed3\u679c\u3002 \u6bcf\u4e2a\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u5f97\u5206\u6700\u9ad8\u7684\u6a21\u578b\u4ee5\u7c97\u4f53\u663e\u793a\u3002 Model   RedPajama 7B Instruct     Llama 7B    MPT 7B  Falcon 7B   RedPajama 7B Base     GPT J   Falcon 7B Instruct     Pythia 7B   Dolly v2    MPT 7B Instruct</p> <p>Stablelm Alpha 7B</p> <p>HELM-AVG    0.492   0.472   0.444   0.441   0.431   0.417   0.407   0.400   0.396   0.393   0.288 MMLU - EM   0.366   0.345   0.294   0.285   0.323   0.249   0.271   0.266   0.238   0.349   0.293 BoolQ - EM  0.697   0.751   0.731   0.770   0.694   0.649   0.708   0.656   0.602   0.442   0.537 NarrativeQA - F1    0.623   0.524   0.541   0.549   0.512   0.545   0.381   0.427   0.441   0.220   0.218 NaturalQuestions (closed-book) - F1 0.229   0.297   0.284   0.289   0.258   0.156   0.192   0.141   0.133   0.247   0.077 NaturalQuestions (open-book) - F1   0.654   0.580   0.603   0.574   0.600   0.559   0.453   0.549   0.535   0.627   0.317 QuAC - F1   0.252   0.332   0.343   0.322   0.323   0.330   0.300   0.306   0.299   0.352   0.218 HellaSwag - EM  0.698   0.747   0.754   0.732   0.702   0.663   0.690   0.653   0.692   0.763   0.421 OpenbookQA - EM 0.488   0.574   0.540   0.546   0.504   0.514   0.498   0.496   0.516   0.532   0.394 TruthfulQA - EM 0.226   0.297   0.186   0.206   0.205   0.199   0.203   0.225   0.250   0.188   0.209 MS MARCO (regular) - RR@10  0.391   0.252   0.161   0.169   0.135   0.152   0.225   0.159   0.160   0.161   0.110 MS MARCO (TREC) - NDCG@10   0.709   0.482   0.369   0.362   0.322   0.345   0.481   0.342   0.359   0.387   0.253 CNN/DailyMail - ROUGE-2 0.143   0.149   0.137   0.147   0.137   0.131   0.114   0.101   0.140   0.148   0.045 XSUM - ROUGE-2  0.101   0.127   0.107   0.116   0.114   0.096   0.071   0.079   0.074   0.101   0.037 IMDB - EM   0.941   0.933   0.903   0.893   0.916   0.939   0.906   0.930   0.907   0.891   0.627 CivilComments - EM  0.667   0.578   0.525   0.511   0.536   0.520   0.516   0.527   0.520   0.270   0.490 RAFT - EM   0.682   0.583   0.618   0.586   0.611   0.619   0.498   0.542   0.466   0.616   0.368</p> <p>\u8868 9\uff1a RedPajama-INCITE-Base-7B-v1 \u6a21\u578b\u4ee5\u53ca\u6307\u4ee4\u5fae\u8c03\u6a21\u578b\u5728 LM \u8bc4\u4f30\u5de5\u5177\u7bb1\u4e0a\u7684\u7ed3\u679c\u3002 \u6bcf\u4e2a\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u5f97\u5206\u6700\u9ad8\u7684\u6a21\u578b\u4ee5\u7c97\u4f53\u663e\u793a\u3002 MPT 7B Instruct     Falcon 7B   MPT 7B  RedPajama 7B Base     Llama 7B    RedPajama 7B Instruct</p> <p>Falcon 7B Instruct     Dolly v2    GPT-J   Pythia 7B   StableLM Alpha 7B</p> <p>LM-eval-harness-AVG 0.7195  0.7161  0.7100  0.6882  0.6881  0.6858  0.6813  0.6557  0.6526  0.6392  0.5260 arc_challenge (acc_norm)    0.4462  0.4326  0.4215  0.3925  0.4147  0.4078  0.4283  0.4027  0.3660  0.3532  0.2705 arc_easy (acc)  0.7218  0.7096  0.7008  0.6923  0.5253  0.7159  0.6789  0.6423  0.6225  0.6338  0.4487 boolq (acc) 0.7425  0.7361  0.7486  0.707   0.7315  0.6865  0.7089  0.6502  0.6544  0.6446  0.6006 copa (acc)  0.9000  0.8600  0.8500  0.880   0.8500  0.850   0.8400  0.8600  0.8300  0.7400  0.7500 hellaswag (acc_norm)    0.7717  0.7634  0.7626  0.7037  0.7620  0.7103  0.6978  0.6896  0.6625  0.6588  0.4122 lambada_openai (acc)    0.6918  0.7467  0.7056  0.7143  0.7360  0.6895  0.6831  0.6893  0.6831  0.6441  0.6379 piqa (acc_norm) 0.8041  0.8069  0.8052  0.7737  0.7810  0.7699  0.7856  0.7486  0.7617  0.7671  0.6736 winogrande (acc)    0.6780  0.6732  0.6859  0.6417  0.7040  0.6567  0.6669  0.6140  0.6409  0.6267  0.5012</p> <p>C.3RedPajama-V1 \u6570\u636e\u96c6\u6784\u5efa\u4e2d\u4e0d\u786e\u5b9a\u6027\u7684\u8be6\u7ec6\u6765\u6e90 \u886810\u8be6\u7ec6\u6982\u8ff0\u4e86 RedPajama-V1 \u6570\u636e\u96c6\u6784\u5efa\u8fc7\u7a0b\u4e2d\u51fa\u73b0\u7684\u5404\u79cd\u4e0d\u786e\u5b9a\u6027\u6765\u6e90\u3002 \u8fd9\u4e9b\u4e0d\u786e\u5b9a\u6027\u4e3b\u8981\u6e90\u4e8e[57]\u4e2d\u5173\u4e8e\u6570\u636e\u96c6\u7684\u7ec6\u8282\u7f3a\u4e4f\u3002 \u4ece\u6b64\u5217\u8868\u53ef\u4ee5\u770b\u51fa\uff0cRedPajama-V1 \u548c\u7528\u4e8e\u8bad\u7ec3 Llama-1 \u6a21\u578b\u7684\u6570\u636e\u96c6\u4e4b\u95f4\u53ef\u80fd\u5b58\u5728\u4e0d\u5339\u914d\u3002 \u6211\u4eec\u8ba4\u4e3a\u8fd9\u662f\u5bfc\u81f4 RedPajama-INCITE \u548c LLaMA-1 \u6027\u80fd\u4e0d\u5339\u914d\u7684\u91cd\u8981\u56e0\u7d20\u3002</p> <p>\u8868 10\uff1a RedPajama-V1 \u6570\u636e\u96c6\u6784\u5efa\u8fc7\u7a0b\u4e2d\u4e0d\u540c\u4e0d\u786e\u5b9a\u6027\u548c\u51b3\u7b56\u7684\u6982\u8ff0\u3002 Subset</p> <p>Uncertainty Decision CommonCrawl</p> <p>Which snapshots were used? We use the first snapshot from 2019 to 2023. What classifier was used, and how was it constructed?</p> <p>We use a fasttext classifier with unigram features and use 300k training samples. What threshold was used to classify a sample as high quality?</p> <p>We set the threshold to match the token count reported in LLama. GitHub</p> <p>Quality filtering heuristics We remove any file   \u2022  with a maximum line length of more than 1000 characters.   \u2022  with an average line length of more than 100 characters.   \u2022  with a proportion of alphanumeric characters of less than 0.25.   \u2022  with a ratio between the number of alphabetical characters and the number of tokens of less than 1.5.   \u2022  whose extension is not in the following set of whitelisted extensions: .asm, .bat, .cmd, .c, .h, .cs, .cpp, .hpp, .c++, .h++, .cc, .hh, .C, .H, .cmake, .css, .dockerfile, .f90, .f, .f03, .f08, .f77, .f95, .for, .fpp, .go, .hs, .html, .java, .js, .jl, .lua, .md, .markdown, .php, .php3, .php4, .php5, .phps, .phpt, .pl, .pm, .pod, .perl, .ps1, .psd1, .psm1, .py, .rb, .rs, .sql, .scala, .sh, .bash, .command, .zsh, .ts, .tsx, .tex, .vb, Dockerfile, Makefile, .xml, .rst, .m, .smali Wikipedia</p> <p>Which Wikipedia dump was used? We used the most recent at the time of data curation (2023-03-20). Books</p> <p>How were the books deduplicated? We use SimHash to perform near deduplication.</p> <p>\u9644\u5f55 DRedPajama-V2 \u672c\u8282\u63d0\u4f9b RedPajama-V2 \u7f51\u7edc\u6570\u636e\u96c6\u7684\u989d\u5916\u5206\u6790\u548c\u7edf\u8ba1\u6570\u636e\uff0c\u5e76\u9488\u5bf9\u5728\u4e0d\u540c\u8fc7\u6ee4\u5b50\u96c6\u4e0a\u8bad\u7ec3\u7684\u6d88\u878d\u6a21\u578b\u5448\u73b0\u8be6\u7ec6\u7ed3\u679c\u3002</p> <p>D.1\u53bb\u91cd\u65b9\u6cd5\u7684\u6c47\u603b\u7edf\u8ba1\u6570\u636e \u5728\u56fe 3 \u4e2d\uff0c\u6211\u4eec\u770b\u5230 head+middle \u5206\u533a\u4e2d\u7684\u6587\u6863\u6570\u91cf\u5982\u4f55\u968f\u7740\u6bcf\u6b21\u722c\u53d6\u65f6\u95f4\u7684\u53d8\u5316\u800c\u53d8\u5316\u3002 \u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u76f4\u5230 2018 \u5e74\uff0c\u6587\u6863\u6570\u91cf\u76f8\u5bf9\u7a33\u5b9a\uff0c\u800c\u5728 2014 \u5e74\u5230 2016 \u5e74\u4e4b\u95f4\uff0c\u6587\u6863\u6570\u91cf\u660e\u663e\u51cf\u5c11\uff08\u4f8b\u5982\uff0c\u5fb7\u8bed\u6587\u6863\u51cf\u5c11\u4e86 10 \u500d\uff09\u3002 \u540c\u6837\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u552f\u4e00\u6587\u6863\u6570\u91cf\u968f\u65f6\u95f4\u7684\u53d8\u5316\u60c5\u51b5\uff08\u865a\u7ebf\uff09\u3002 \u5177\u4f53\u6765\u8bf4\uff0c\u7531\u4e8e\u6211\u4eec\u4ece\u6700\u65b0\u7684\u5feb\u7167\u5230\u6700\u65e7\u7684\u5feb\u7167\u8fd0\u884c\u53bb\u91cd\uff0c\u9884\u671f\u8bed\u6599\u5e93\u4e2d\u552f\u4e00\u6587\u6863\u7684\u6570\u91cf\u4f1a\u8d8a\u6765\u8d8a\u5c11\uff0c\u8fd9\u53ef\u4ee5\u4ece\u56fe 3 \u4e2d\u89c2\u5bdf\u5230\uff08\u6ce8\u610f\u5bf9\u6570\u523b\u5ea6\uff09\u3002 \u7136\u800c\uff0c\u503c\u5f97\u6307\u51fa\u7684\u662f\uff0c\u5728 2014 \u5e74\u5230 2017 \u5e74\u4e4b\u95f4\u7684\u722c\u53d6\u4e2d\uff0c\u552f\u4e00\u6587\u6863\u6570\u91cf\u7a81\u7136\u4e0b\u964d\u3002 \u6211\u4eec\u8ba4\u4e3a\uff0c\u8fd9\u53ef\u4ee5\u7528 CommonCrawl \u7f51\u7edc\u722c\u866b\u5728\u8be5\u671f\u95f4\u4f7f\u7528\u7684\u79cd\u5b50\u5217\u8868\u4e0d\u540c\u6765\u89e3\u91ca\u3002</p> <p>Refer to caption \u56fe 3\uff1a \u53bb\u91cd\u524d\u540e\u6bcf\u4e2a CommonCrawl \u5feb\u7167\u7684\u6587\u6863\u65f6\u95f4\u987a\u5e8f\u8ba1\u6570\u3002 \u53bb\u91cd\u662f\u987a\u5e8f\u6267\u884c\u7684\uff0c\u4ece\u6700\u65b0\u7684\u5feb\u7167\u5f00\u59cb\uff0c\u8fed\u4ee3\u5230\u6700\u65e7\u7684\u5feb\u7167\u3002 D.2\u8d28\u91cf\u4fe1\u53f7 \u672c\u8282\u63d0\u4f9b\u5173\u4e8e RedPajama-V2 \u6570\u636e\u96c6\u4e00\u90e8\u5206\u7684\u8d28\u91cf\u4fe1\u53f7\u7684\u66f4\u591a\u7ec6\u8282\u548c\u7edf\u8ba1\u6570\u636e\u3002</p> <p>D.2.1\u53ef\u7528\u8d28\u91cf\u4fe1\u53f7\u6982\u8ff0 \u8d28\u91cf\u4fe1\u53f7\u96c6\u53ef\u4ee5\u5206\u4e3a\u4ee5\u4e0b\u51e0\u7c7b\uff1a\u6d4b\u91cf\u81ea\u7136\u8bed\u8a00\uff08\u886812\uff09\u3001\u6587\u672c\u7684\u91cd\u590d\u6027\uff08\u886814\uff09\u3001\u57fa\u4e8e\u6587\u672c\u5185\u5bb9\uff08\u886815\uff09\uff0c\u6216\u57fa\u4e8e\u57fa\u4e8e\u673a\u5668\u5b66\u4e60\u7684\u542f\u53d1\u5f0f\u65b9\u6cd5\uff08\u886813\uff09\u3002 \u6b64\u5916\uff0c\u6211\u4eec\u8fd8\u5728\u886811\u4e2d\u603b\u7ed3\u4e86\u7531CCNet\u7ba1\u9053\u8ba1\u7b97\u7684\u8d28\u91cf\u4fe1\u53f7\u3002</p> <p>\u886811\uff1a \u6765\u81eaCCNet\u7ba1\u9053\u7684\u8d28\u91cf\u4fe1\u53f7[61]\u3002 Annotation Tag  Description ccnet_bucket    head, middle or tail bucket of the perplexity score ccnet_language_score    score of the language identification model ccnet_length    number of characters ccnet_nlines    number of lines ccnet_original_length   number of characters before line-level deduplication ccnet_original_nlines   number of lines before line-level deduplication ccnet_perplexity    perplexity of an LM trained on Wikipedia \u886812\uff1a \u8861\u91cf\u6587\u6863\u4e0e\u81ea\u7136\u8bed\u8a00\u5bf9\u5e94\u7a0b\u5ea6\u7684\u8d28\u91cf\u4fe1\u53f7\u6458\u8981\u3002 Annotation Tag  Description Reference(s) rps_doc_curly_bracket   The ratio between the number of occurrences of \u2019{\u2019 or \u2019}\u2019 and the number of characters in the raw text.     [46] rps_doc_frac_all_caps_words The fraction of words in the content that only consist of uppercase letters. This is based on the raw content.     [34] rps_doc_frac_lines_end_with_ellipsis    The fraction of lines that end with an ellipsis, where an ellipsis is defined as either \"\u2026\" or \"U+2026\".     [44, 45] rps_doc_frac_no_alph_words  The fraction of words that contain no alphabetical character.     [44, 45] rps_doc_lorem_ipsum The ratio between the number of occurrences of \u2019lorem ipsum\u2019 and the number of characters in the content after normalisation.     [46] rps_doc_mean_word_length    The mean length of words in the content after normalisation.     [44, 45] rps_doc_stop_word_fraction  The ratio between the number of stop words and the number of words in the document. Stop words are obtained from https://github.com/6/stopwords-json.     [44, 45] rps_doc_symbol_to_word_ratio    The ratio of symbols to words in the content. Symbols are defined as U+0023 (#), \"\u2026\", and U+2026.     [44, 45] rps_doc_frac_unique_words   The fraction of unique words in the content. This is also known as the degeneracy of a text sample. Calculated based on the normalised content.     [34] rps_doc_unigram_entropy The entropy of the unigram distribution of the content. This measures the diversity of the content and is computed using \u2211 x \u2212 x n \u22c5 log \u2061 ( 1 n ) where the sum is taken over counts of unique words in the normalised content.     - rps_doc_word_count  The number of words in the content after normalisation.     [44, 45] rps_lines_ending_with_terminal_punctution_mark  Indicates whether a line ends with a terminal punctuation mark. A terminal punctuation mark is defined as one of: \".\", \"!\", \"?\", \"\u201d\".     [46] rps_lines_javascript_counts The number of occurrences of the word \"javascript\" in each line.     [46] rps_lines_num_words The number of words in each line. This is computed based on the normalised text.     [46, 44] rps_lines_numerical_chars_fraction  The ratio between the number of numerical characters and total number of characters in each line. This is based on the normalised content.     [44] rps_lines_start_with_bulletpoint    Whether the lines that start with a bullet point symbol. The following set of unicodes are considered a bullet point: U+2022 (bullet point), U+2023 (triangular bullet point), U+25B6 (black right pointing triangle), U+25C0 (black left pointing triangle), U+25E6 (white bullet point), U+2013 (en dash) U+25A0 (black square), U+25A1 (white square), U+25AA (black small square), U+25AB (white small square).     [43, 45] rps_lines_uppercase_letter_fraction The ratio between the number of uppercase letters and total number of characters in each line. This is based on the raw text.     [44] rps_doc_num_sentences   The number of sentences in the content.     [46]</p> <p>\u886813\uff1a \u57fa\u4e8e\u673a\u5668\u5b66\u4e60\u542f\u53d1\u5f0f\u7684\u8d28\u91cf\u4fe1\u53f7\u3002 Annotation Tag  Description Reference(s) rps_doc_books_importance    Given a bag of 1,2-wordgram model trained on Books  p , and a model trained on the source domain  q , This is the logarithm of the ratio  p / q .     [62] rps_doc_openwebtext_importance  Given a bag of 1,2-wordgram model trained on OpenWebText  p , and a model trained on the source domain  q , this is the logarithm of the ratio  p / q .     [62] rps_doc_wikipedia_importance    Given a bag of 1,2-wordgram model trained on Wikipedia articles  p , and a model trained on the source domain  q , this is the logarithm of the ratio  p / q .     [62] rps_doc_ml_wikiref_score    Fasttext classifier prediction for the document being a Wikipedia reference. This is the same fasttext model used in the RedPajama-1T dataset. Only applies to English data.     [57] rps_doc_ml_palm_score   Fasttext classifier prediction for the document being a Wikipedia article, OpenWebText sample or a RedPajama-V1 book. Only for English data.     [12], [16] rps_doc_ml_wikipedia_score  Fasttext classifier prediction for the document being a Wikipedia article. This is used for non-English data     -</p> <p>\u886814\uff1a \u8861\u91cf\u6587\u672c\u91cd\u590d\u7a0b\u5ea6\u7684\u8d28\u91cf\u4fe1\u53f7\u6458\u8981\u3002 Annotation Tag  Description Reference(s) rps_doc_frac_chars_dupe_10grams The fraction of characters in duplicate word 10grams.   [43, 45] rps_doc_frac_chars_dupe_5grams  The fraction of characters in duplicate word 5grams.    [43, 45] rps_doc_frac_chars_dupe_6grams  The fraction of characters in duplicate word 6grams.    [43, 45] rps_doc_frac_chars_dupe_7grams  The fraction of characters in duplicate word 7grams.    [43, 45] rps_doc_frac_chars_dupe_8grams  The fraction of characters in duplicate word 8grams.    [43, 45] rps_doc_frac_chars_dupe_9grams  The fraction of characters in duplicate word 9grams.    [43, 45] rps_doc_frac_chars_top_2gram    The fraction of characters in the top word 2gram.   [43, 45] rps_doc_frac_chars_top_3gram    The fraction of characters in the top word 3gram.   [43, 45] rps_doc_frac_chars_top_4gram    The fraction of characters in the top word 4gram.   [43, 45]</p> <p>\u886815\uff1a \u57fa\u4e8e\u6587\u672c\u5185\u5bb9\uff0c\u6d4b\u91cf\u6bd2\u6027\u7684\u8d28\u91cf\u4fe1\u53f7\u6458\u8981\u3002 Annotation Tag  Description Reference(s) rps_doc_ldnoobw_words   The number of sequences of words that are contained in the List-of-Dirty-Naughty-Obscene-and-Otherwise-Bad-Words blocklist. The blocklist is obtained from https://github.com/LDNOOBW/List-of-Dirty-Naughty-Obscene-and-Otherwise-Bad-Words.     [46] rps_doc_ut1_blacklist   A categorical id corresponding to the list of categories of the domain of the document. Categories are obtained from https://dsi.ut-capitole.fr/blacklists/     [44]</p> <p>D.2.2\u76f4\u65b9\u56fe \u8d28\u91cf\u4fe1\u53f7\u5206\u5e03\u7684\u76f4\u65b9\u56fe\u5982\u56fe4\u30015\u30016\u548c7\u6240\u793a\u3002 \u8fd9\u4e9b\u7edf\u8ba1\u6570\u636e\u6765\u81ea2023\u5e746\u6708\u7684\u5feb\u7167\uff0c\u4ec5\u9488\u5bf9\u82f1\u6587\u6570\u636e\u8ba1\u7b97\u3002</p> <p>Refer to caption Refer to caption Refer to caption Refer to caption Refer to caption Refer to caption \u56fe4\uff1a CCNet [61] \u7ba1\u9053\u8ba1\u7b97\u7684\u8d28\u91cf\u4fe1\u53f7\u76f4\u65b9\u56fe\u3002 Refer to caption Refer to caption Refer to caption Refer to caption Refer to caption \u56fe5\uff1a \u57fa\u4e8e\u673a\u5668\u5b66\u4e60\u7684\u8d28\u91cf\u4fe1\u53f7\u76f4\u65b9\u56fe\u3002 Refer to caption Refer to caption Refer to caption Refer to caption Refer to caption Refer to caption Refer to caption Refer to caption Refer to caption Refer to caption Refer to caption Refer to caption Refer to caption Refer to caption Refer to caption Refer to caption Refer to caption \u56fe6\uff1a \u57fa\u4e8e\u81ea\u7136\u8bed\u8a00\u7684\u8d28\u91cf\u4fe1\u53f7\u76f4\u65b9\u56fe\u3002 Refer to caption Refer to caption Refer to caption Refer to caption Refer to caption Refer to caption Refer to caption Refer to caption Refer to caption \u56fe7\uff1a \u7528\u4e8e\u8861\u91cf\u6587\u672c\u91cd\u590d\u6027\u7684\u8d28\u91cf\u4fe1\u53f7\u76f4\u65b9\u56fe\u3002 D.3\u57fa\u4e8e\u5d4c\u5165\u7684\u805a\u7c7b \u4e3a\u4e86\u57fa\u4e8e\u6587\u672c\u6587\u6863\u7684\u8bed\u4e49\u8ba1\u7b97\u805a\u7c7b\uff0c\u6211\u4eec\u4eceRedPajama-V2\u6570\u636e\u96c62021\u5e744\u6708\u672a\u8fc7\u6ee4\u5feb\u7167\u4e2d\u968f\u673a\u62bd\u53d6\u4e862,000,000\u4e2a\u6587\u6863\uff0c\u5e76\u4f7f\u7528Alibaba-NLP gte-large-en-v1.5\u6a21\u578b[32]\u8ba1\u7b97\u6bcf\u4e2a\u6587\u6863\u4e2d\u95f48,192\u4e2a\u7b26\u5143\u7684\u5d4c\u5165\u3002 \u6211\u4eec\u4f7f\u7528Nomic Atlas [41]\u8fdb\u884c\u805a\u7c7b\u548c\u4e3b\u9898\u5efa\u6a21\u5206\u6790\u3002 \u805a\u7c7b\u548c\u76f8\u5173\u4e3b\u9898\u7684\u6982\u8ff0\u5982\u56fe8\u6240\u793a\u3002 6\u4e2a\u968f\u673a\u62bd\u53d6\u7684\u6587\u6863\uff0c\u4ee5\u53ca\u5b83\u4eec\u5bf9\u5e94\u7684\u805a\u7c7b\u4e3b\u9898\u548c\u6bcf\u4e2a\u6587\u6863\u4e2d1000\u4e2a\u5b57\u7b26\u7684\u5b50\u4e32\uff08\u4ece\u968f\u673a\u7a7a\u683c\u5b57\u7b26\u4e4b\u540e\u5f00\u59cb\uff09\uff0c\u5982\u886816\u548c\u886817\u6240\u793a\u3002</p> <p>Refer to caption \u56fe8\uff1a RedPajama-V2\u6570\u636e\u96c6\u4e2d\u51fa\u73b0\u7684\u4e3b\u9898\u805a\u7c7b\u7684\u53ef\u89c6\u5316\u3002 \u8fd9\u4e9b\u805a\u7c7b\u662f\u57fa\u4e8e200\u4e07\u4e2a\u672a\u8fc7\u6ee4\u76842021\u5e744\u6708\u5feb\u7167\u6587\u6863\u7684gte-large-en-v1.5\u5d4c\u5165\u5728Nomic Atlas [41]\u4e2d\u8ba1\u7b97\u7684\u3002 \u8868 16\uff1a Nomic Atlas [41] \u4e2d\u7684\u6587\u6863\u793a\u4f8b\u53ca\u5176\u5bf9\u5e94\u7684\u805a\u7c7b\u4e3b\u9898\u3002 Cluster Topics</p> <p>Document (broad - medium - specific)</p> <p>Election - Health (2) - COVID Testing</p> <p>immediately moving to the Purple Tier. This is the most restrictive level in the State\u2019s effort to control the spread of COVID-19. Businesses and residents must comply with the Purple Tier restrictions by Tuesday, Nov. 17. To determine restrictions by industry, business and activity, visit: https://covid19.ca.gov/safer-economy/ Read the full news release here: www.gov.ca.gov/2020/11/16/governor-newsom-announces-new-immediate-actions-to-curb-covid-19-transmission/ Watch the Governor\u2019s press conference during which he made the announcement today here: www.facebook.com/CAgovernor/videos/376746553637721 According to County of Orange officials, schools that have not already opened must continue with remote classes and cannot reopen in-person. Read the County\u2019s release here: https://cms.ocgov.com/civicax/filebank/blobdload.aspx?BlobID=118441 The California Department of Public Health has also issued a travel advisory encouraging Californians to stay home or in their region and avoid non-esse Religion/Spirituality - Gaming - Gaming (3)</p> <p>Top 100 Employers, and one of Canada\u2019s Top Employers for Young People multiple years running! At Ubisoft Toronto, we look for people who are excited to create the future of games in one of the most diverse cities in the world. We believe that embracing our differences helps us build stronger creative teams and develop better games for all players. We are an equal-opportunity employer and welcome applications from all interested candidates. We strongly encourage applications from Indigenous people, racialized people, neurodivergent people, people with disabilities, people from gender and sexually diverse communities and/or people with intersectional identities. We are committed to providing reasonable accommodation for people with disability upon request. If this sounds like your kind of studio, what are you waiting for? Apply to join us now! We thank you for your interest, however, only those candidates selected for an interview will be contacted. No agencies please. Senior Game Design Education - Golf - Rotary Meetings</p> <p>what\u2019s happening. Conversely, some people rely on the newsletter. Thus, the more avenues to inform people, the better. attendance at many social functions is poor, possibly due to the limited advertising reach. In practical terms, it means that social functions may be advertised in the OOC newsletter (current practice) the schedule, as is done for outdoor activities such as hikes the OOC\u2019s Facebook group As when social functions are advertised in the newsletter, the person organizing the social function can choose how much location information to provide, especially if it is to be held at someone\u2019s residence. OOC bylaw Article 3, Section 9 (f) states (highlighting added) (f) Social Coordinator: Shall be responsible for coordinating all social events for Club members only, and for preparing a schedule of these outings, not to be advertised to non-members. The executive voted to amend this statement by removing the limitation per Paragraph 3 of \"Article 5 - Amending Formula\" of the Const</p> <p>\u8868 17\uff1a Nomic Atlas [41] \u4e2d\u7684\u6587\u6863\u793a\u4f8b\u53ca\u5176\u5bf9\u5e94\u7684\u805a\u7c7b\u4e3b\u9898\u3002 Cluster Topics</p> <p>Document (broad - medium - specific)</p> <p>Online Privacy - Privacy Policy - Contracts</p> <p>shall be governed by the laws of the Federal Republic of Germany under exclusion of the UN Convention on the International Sale of Goods (CISG), without prejudice to any mandatory conflict of laws and consumer protection provisions. 11.2 If the Customer is an entrepreneur according to Sec. 14 German Civil Code (\u201cBGB\u201d), a legal person under public law or a special fund under public law the courts at the place of business of the vendor shall have exclusive jurisdiction in respect of all disputes arising out of or in connection with the relevant contract. 11.3 In the event that one or more provisions of the contract should be or become invalid or unenforceable, the validity of the remaining provisions shall not be affected thereby. The invalid or unenforceable provision shall be deemed to be replaced - as existent - with statutory provisions. In case of an unacceptable rigor to one of the parties, the contract shall be deemed invalid as a whole. 11.4 In case of deviations of these General Religion/Spirituality - Film/Movie - Movie</p> <p>Movie of Nelson Mandela\u2019s life premieres in South Africa Nov. 04 - Stars Idris Elba and Naomie Harris attend the premiere of \"Mandela: Long Walk to Freedom,\" based on the autobiography of anti-apartheid icon Nelson Mandela. Matthew Stock reports. Election - Election (2) - Healthcare (4)</p> <p>McAuliffe revived that language as an amendment to the budget. He also called on the General Assembly to immediately convene a special joint committee that had been created to assess the impact that repealing the ACA would have had on Virginia. The legislature will gather April 5 to consider the governor\u2019s amendments and vetoes, but leaders said Monday that McAuliffe\u2019s new budget language stands no better chance this time. In a joint statement, the Republican leadership of the House of Delegates said expanding Medicaid would lead to increased costs and eventually blow a hole in the state budget. \u201cThe lack of action in Washington has not changed that and in fact, the uncertainty of federal health policy underscores the need to be cautious over the long term,\u201d the leaders, including House Speaker William J. Howell (R-Stafford) and the man selected to replace him as speaker when he retires next year, Del. Kirk Cox (R-Colonial Heights), said via email. \u201cVirginians can barely afford our cu</p> <p>D.4\u6570\u636e\u6d88\u878d\uff1a\u8be6\u7ec6\u8bc4\u4f30 \u6211\u4eec\u5df2\u7ecf\u5728\u672c\u6587\u7684\u4e3b\u8981\u90e8\u5206\u5c55\u793a\u4e86\u6c47\u603b\u7684\u57fa\u51c6\u5206\u6570\u3002 \u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u63d0\u4f9b\u66f4\u591a\u7ec6\u8282\uff0c\u5e76\u5206\u522b\u62a5\u544a\u6bcf\u4e2a\u4efb\u52a1\u7684\u5206\u6570\u3002 \u7ed3\u679c\u5982\u8868 18\u300119 \u548c 20 \u6240\u793a\u3002</p> <p>\u8868 18\uff1a \u9488\u5bf9\u4e0d\u540c\u6570\u636e\u96c6\u8fc7\u6ee4\u5668\u548c\u5176\u4ed6\u5f3a\u5927\u7684\u7f51\u7edc\u6570\u636e\u96c6\uff0c\u5bf9 468M \u53c2\u6570\u8bed\u8a00\u6a21\u578b\u8fdb\u884c\u7684\u8bc4\u4f30\u3002 \u6bcf\u4e2a\u6307\u6807\u4e2d\u5f97\u5206\u6700\u9ad8\u7684\u6570\u636e\u96c6\u4ee5 bolded underlined\u8868\u793a\uff0c\u5f97\u5206\u7b2c\u4e8c\u9ad8\u7684\u6570\u636e\u96c6\u4ee5\u7c97\u4f53\u8868\u793a\uff0c\u5f97\u5206\u7b2c\u4e09\u9ad8\u7684\u6570\u636e\u96c6\u4ee5 \u659c\u4f53\u4e0b\u5212\u7ebf \u8868\u793a\u3002 Dataset Deduplication   Rule-based  ML Heuristics   Natural Language Inference  Coref. Res. Sentence Completion Exact   Fuzzy   C4  Gopher  Classif.    DSIR    PPL ANLI    ARC-c   ARC-e   Winogrande  Hellaswag   LAMBADA C4                              33.8    22.0    37.0    51.9    32.9    15.5 Dolma-v1.7 CC                               33.5    24.0    38.3    49.6    32.3    17.3 FineWeb                             34.0    23.4    37.7    51.8    32.8    18.1 RefinedWeb                              32.8    22.6    38.3    51.9    31.6    17.8 RPv1-CC                 \u2714 (Wiki-Ref.)           33.9    22.4    37.5    52.6    29.7    19.0 RPv2 (2023-14)                              33.3    22.2    38.5    52.4    31.5    18.2 RPv2 (2023-14)  \u2714                           33.9    22.1    38.1    50.6    31.3    18.0 RPv2 (2023-14)      \u2714       \u2714 (full)                34.1    22.3    38.3    52.2    32.1    18.7 RPv2 (2023-14)      \u2714   \u2714                   33.4    22.7    38.9    51.1    32.4    17.5 RPv2 (2023-14)      \u2714       \u2714 (natlang)         Wiki-middle 33.4    24.2    37.7    49.8    33.1    19.2 RPv2 (2023-14)      \u2714       \u2714 (Rep.)            Wiki-middle 34.2    23.1    37.4    50.8    32.5    18.5 RPv2 (9 Dumps)      \u2714   \u2714                   34.3    23.5    38.6    51.5    32.0    17.2 RPv2 (9 Dumps)      \u2714   \u2714   \u2714 (full)                33.5    23.3    38.4    50.2    32.8    16.8 RPv2 (9 Dumps)      \u2714   \u2714   \u2714 (Rep.)        \u2714 (Palm-mix)        33.8    21.9    38.0    52.5    32.0    17.3 RPv2 (9 Dumps)      \u2714   \u2714   \u2714 (Rep.)    \u2714 (Palm-mix)            34.6    23.3    38.6    52.2    32.7    16.4 RPv2 (9 Dumps)      \u2714   \u2714   \u2714 (natlang) \u2714 (Palm-mix)            34.8    23.0    39.2    53.0    32.3    16.9 RPv2 (9 Dumps)      \u2714   \u2714 (line-filter) \u2714 (natlang) \u2714 (Palm-mix)            33.7    22.9    38.5    50.9    32.3    19.9 RPv2 (9 Dumps)      \u2714   custom-rules    \u2714 (Wiki-Ref.)      P wiki</p> <p>30 33.2    23.0    37.9    49.6    30.1    18.7 RPv2 (9 Dumps)      \u2714   custom-rules + Gopher-Rep   \u2714 (Wiki-Ref.)      P wiki</p> <p>30 33.0    23.8    38.9    50.5    30.0    18.9</p> <p>\u8868 19\uff1a \u5bf9 468M \u53c2\u6570\u8bed\u8a00\u6a21\u578b\u5728 MMLU \u53ca\u5176\u5b50\u4efb\u52a1\u4e0a\u8fdb\u884c\u7684 5-shot \u8bbe\u7f6e\u8bc4\u4f30\u3002 \u6bcf\u4e2a\u6307\u6807\u4e2d\u5f97\u5206\u6700\u9ad8\u7684\u6570\u636e\u96c6\u4ee5 \u7c97\u4f53\u4e0b\u5212\u7ebf\u8868\u793a\uff0c\u5f97\u5206\u7b2c\u4e8c\u9ad8\u7684\u6570\u636e\u96c6\u4ee5\u7c97\u4f53\u8868\u793a\uff0c\u5f97\u5206\u7b2c\u4e09\u9ad8\u7684\u6570\u636e\u96c6\u4ee5 \u659c\u4f53\u4e0b\u5212\u7ebf \u8868\u793a\u3002 Dataset Deduplication   Rule-based  ML Heuristics   MMLU    Stem    Humanities  Other   Social Sciences Exact   Fuzzy   C4  Gopher  Classif.    DSIR    PPL C4                              24.9    26.4    24.1    25.8    23.4 Dolma-v1.7 CC                               26.0    27.8    24.5    26.2    26.1 FineWeb                             26.2    25.4    25.1    25.8    29.3 RefinedWeb                              24.8    23.9    23.7    26.5    25.6 RPv1-CC                 \u2714 (Wiki-Ref.)           25.1    25.1    23.7    24.0    28.5 RPv2 (2023-14)                              26.3    26.7    25.3    24.1    29.6 RPv2 (2023-14)  \u2714                           26.4    26.8    25.3    25.2    28.8 RPv2 (2023-14)      \u2714       \u2714 (full)                27.0    28.8    24.8    25.6    30.0 RPv2 (2023-14)      \u2714   \u2714                   25.4    27.8    24.1    26.1    24.1 RPv2 (2023-14)      \u2714       \u2714 (natlang)         Wiki-middle 26.1    27.4    25.2    24.6    27.7 RPv2 (2023-14)      \u2714       \u2714 (Rep.)            Wiki-middle 25.5    24.3    25.2    27.8    24.8 RPv2 (9 Dumps)      \u2714   \u2714                   26.3    28.3    25.3    25.8    26.6 RPv2 (9 Dumps)      \u2714   \u2714   \u2714 (full)                25.6    28.0    25.1    24.9    24.4 RPv2 (9 Dumps)      \u2714   \u2714   \u2714 (Rep.)        \u2714 (Palm-mix)        24.4    26.9    23.7    24.8    22.7 RPv2 (9 Dumps)      \u2714   \u2714   \u2714 (Rep.)    \u2714 (Palm-mix)            24.9    26.1    24.0    26.3    23.8 RPv2 (9 Dumps)      \u2714   \u2714   \u2714 (natlang) \u2714 (Palm-mix)            25.3    27.8    24.2    25.4    24.5 RPv2 (9 Dumps)      \u2714   \u2714 (line-filter) \u2714 (natlang) \u2714 (Palm-mix)            25.1    27.5    24.0    25.0    24.4 RPv2 (9 Dumps)      \u2714   custom-rules    \u2714 (Wiki-Ref.)      P wiki</p> <p>30 27.0    27.9    25.1    26.0    30.0 RPv2 (9 Dumps)      \u2714   custom-rules + Gopher-Rep   \u2714 (Wiki-Ref.)      P wiki</p> <p>30 25.9    25.8    24.3    27.1    27.2</p> <p>\u8868 20\uff1a \u5bf9 468M \u53c2\u6570\u8bed\u8a00\u6a21\u578b\u5728\u591a\u9879\u9009\u62e9\u4efb\u52a1\u4e0a\u7684\u8bc4\u4f30\u3002 \u6bcf\u4e2a\u6307\u6807\u4e2d\u5f97\u5206\u6700\u9ad8\u7684\u7684\u6570\u636e\u96c6\u4ee5\u7c97\u4f53\u4e0b\u5212\u7ebf\u663e\u793a\uff0c\u5f97\u5206\u7b2c\u4e8c\u9ad8\u7684\u6570\u636e\u96c6\u4ee5\u7c97\u4f53\u663e\u793a\uff0c\u5f97\u5206\u7b2c\u4e09\u9ad8\u7684\u6570\u636e\u96c6\u4ee5\u659c\u4f53\u4e0b\u5212\u7ebf\u663e\u793a\u3002 Dataset Deduplication   Rule-based  ML Heuristics   CoQA    OpenbookQA  PIQA    PubMedQA    SciQ    SocialIQA   TruthfulQA Exact   Fuzzy   C4  Gopher  Classif.    DSIR    PPL C4                              3.8 30.2    64.4    46.0    51.7    33.4    33.3 Dolma-v1.7 CC                               5.2 28.2    65.3    42.6    55.2    31.6    33.2 FineWeb                             9.0 29.4    64.5    41.4    54.3    32.4    33.5 RefinedWeb                              13.2    28.6    64.4    52.2    56.4    32.8    33.3 RPv1-CC                 \u2714 (Wiki-Ref.)           11.6    25.4    57.3    40.6    56.7    33.1    33.9 RPv2 (2023-14)                              12.5    29.2    61.6    40.8    53.0    32.9    31.4 RPv2 (2023-14)  \u2714                           11.8    27.6    61.1    43.6    53.7    32.5    33.4 RPv2 (2023-14)      \u2714       \u2714 (full)                11.3    28.8    62.8    51.0    53.9    32.6    32.6 RPv2 (2023-14)      \u2714   \u2714                   5.8 28.8    63.4    49.6    54.7    36.6    33.8 RPv2 (2023-14)      \u2714       \u2714 (natlang)         Wiki-middle 11.3    28.4    63.5    49.6    53.6    32.8    33.4 RPv2 (2023-14)      \u2714       \u2714 (Rep.)            Wiki-middle 11.9    29.4    63.1    52.6    53.4    32.5    31.6 RPv2 (9 Dumps)      \u2714   \u2714                   6.6 29.0    62.0    36.2    53.7    33.2    34.3 RPv2 (9 Dumps)      \u2714   \u2714   \u2714 (full)                5.8 28.6    62.8    51.2    54.8    34.4    31.2 RPv2 (9 Dumps)      \u2714   \u2714   \u2714 (Rep.)        \u2714 (Palm-mix)        6.0 29.4    61.6    45.4    52.2    33.4    33.1 RPv2 (9 Dumps)      \u2714   \u2714   \u2714 (Rep.)    \u2714 (Palm-mix)            5.4 29.4    62.5    45.0    51.7    34.0    33.7 RPv2 (9 Dumps)      \u2714   \u2714   \u2714 (natlang) \u2714 (Palm-mix)            4.9 28.0    62.9    52.8    52.0    33.0    33.6 RPv2 (9 Dumps)      \u2714   \u2714 (line-filter) \u2714 (natlang) \u2714 (Palm-mix)            6.4 27.0    63.2    47.8    52.9    32.8    32.0 RPv2 (9 Dumps)      \u2714   custom-rules    \u2714 (Wiki-Ref.)      P wiki</p> <p>30 10.0    27.8    59.6    41.2    55.8    33.3    32.0 RPv2 (9 Dumps)      \u2714   custom-rules + Gopher-Rep   \u2714 (Wiki-Ref.)      P wiki</p> <p>30 9.3 28.0    59.2    43.4    54.9    33.0    33.3</p> <p>D.516\u4ebf\u53c2\u6570\u6a21\u578b\u7684\u8bc4\u4f30 \u8868\u683c21\u300122\u548c23\u663e\u793a\u4e86\u4f7f\u752816\u4ebf\u53c2\u6570\u6a21\u578b\u7684\u6d88\u878d\u5b9e\u9a8c\u7ed3\u679c\u3002 \u6bcf\u4e2a\u6a21\u578b\u90fd\u4f7f\u75283500\u4ebf\u4e2a\u7b26\u5143\u8fdb\u884c\u8bad\u7ec3\u3002</p> <p>\u8868\u683c 21\uff1a \u4f7f\u75283500\u4ebf\u4e2a\u7b26\u5143\u5728\u4e0d\u540c\u6570\u636e\u96c6\u4e0a\u8bad\u7ec3\u768416\u4ebf\u53c2\u6570\u8bed\u8a00\u6a21\u578b\u7684\u4e0b\u6e38\u4efb\u52a1\u51c6\u786e\u7387\u3002 Dataset Fuzzy Deduplication     Rule-based  ML Heuristics   Natural Language Inference  Coref. Res. Sentence Completion C4  Gopher  ANLI    ARC-c   ARC-e   Winogrande  Hellaswag   LAMBADA RefinedWeb                  33.6    26.9    51.7    54.4    55.8    47.9 RPv2 (full) \u2714       \u2714   WikiRef 32.4    27.9    51.3    56.4    47.4    47.4 RPv2 (full) \u2714   \u2714   \u2714(natlang)  Palm-Mix    33.6    28.7    52.4    54.5    53.1    42.9</p> <p>\u8868\u683c 22\uff1a \u5728MMLU\u53ca\u5176\u5b50\u4efb\u52a1\u4e0a\uff0c\u9488\u5bf916\u4ebf\u53c2\u6570\u8bed\u8a00\u6a21\u578b\u76845-shot\u8bbe\u7f6e\u4e0b\u7684\u8bc4\u4f30\u7ed3\u679c\u3002 Dataset Fuzzy Deduplication     Rule-based  ML Heuristics   MMLU C4  Gopher  MMLU    Stem    Humanities  Other   Social Sciences RefinedWeb                  25.3    24.9    24.9    27.0    24.7 RPv2 (full) \u2714       \u2714   WikiRef 25.2    26.0    26.7    23.9    23.3 RPv2 (full) \u2714   \u2714   \u2714(natlang)  Palm-Mix    24.7    25.7    25.4    23.8    23.4</p> <p>\u8868\u683c 23\uff1a \u9488\u5bf916\u4ebf\u53c2\u6570\u8bed\u8a00\u6a21\u578b\u5728\u591a\u9879\u9009\u62e9\u4efb\u52a1\u4e0a\u7684\u8bc4\u4f30\u7ed3\u679c\u3002 Dataset Fuzzy Deduplication     Rule-based  ML Heuristics   CoQA    OpenbookQA  PIQA    PubMedQA    SciQ    SocialIQA   TruthfulQA C4  Gopher RefinedWeb                  47.4    31.6    73.8    57.0    75.3    41.0    36.6 RPv2 (full) \u2714       \u2714   WikiRef 43.7    32.6    67.4    55.6    72.7    40.4    36.9 RPv2 (full) \u2714   \u2714   \u2714(natlang)  Palm-Mix    22.1    32.2    71.3    55.2    71.0    42.2    35.7</p> <p>\u9644\u5f55 E\u4f5c\u8005\u8d23\u4efb\u58f0\u660e \u6b64\u805a\u5408\u6570\u636e\u96c6\u6839\u636eODC-By-1.0\u7684\u6761\u6b3e\u4ee5\u53ca\u53ef\u80fd\u9002\u7528\u4e8e\u5176\u7ec4\u6210\u90e8\u5206\u7684\u4efb\u4f55\u8bb8\u53ef\u6388\u4e88\u60a8\u8bb8\u53ef\u3002</p> <p>\u867d\u7136\u6211\u4eec\u5df2\u5c3d\u4e00\u5207\u52aa\u529b\u786e\u4fdd\u6b64\u6570\u636e\u96c6\u4e2d\u5305\u542b\u7684\u6570\u636e\u7684\u51c6\u786e\u6027\u548c\u5408\u6cd5\u6027\uff0c\u4f46\u7531\u4e8e\u5176\u89c4\u6a21\uff0c\u6211\u4eec\u65e0\u6cd5\u4fdd\u8bc1\u5176\u7edd\u5bf9\u5b8c\u6574\u6027\u6216\u6b63\u786e\u6027\u3002 \u56e0\u6b64\uff0c\u5982\u679c\u4f7f\u7528\u6b64\u6570\u636e\u96c6\u8fdd\u53cd\u4e86\u4efb\u4f55\u6743\u5229\uff08\u6cd5\u5f8b\u6216\u5176\u4ed6\u6743\u5229\uff09\uff0c\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\u7248\u6743\u4fb5\u72af\u3001\u9690\u79c1\u4fb5\u72af\u6216\u654f\u611f\u4fe1\u606f\u6ee5\u7528\uff0c\u6211\u4eec\u4f5c\u8005\u5bf9\u8fd9\u4e9b\u8fdd\u89c4\u884c\u4e3a\u6982\u4e0d\u8d1f\u8d23\u3002 \u6b64\u6570\u636e\u96c6\u6309\u201c\u73b0\u72b6\u201d\u63d0\u4f9b\uff0c\u4e0d\u9644\u5e26\u4efb\u4f55\u660e\u793a\u6216\u6697\u793a\u7684\u4fdd\u8bc1\u3002</p> <p>\u4f7f\u7528\u6b64\u6570\u636e\u96c6\u5373\u8868\u793a\u60a8\u540c\u610f\uff0c\u56e0\u4f7f\u7528\u6b64\u6570\u636e\u96c6\u800c\u4ea7\u751f\u7684\u4efb\u4f55\u540e\u679c\uff08\u6cd5\u5f8b\u6216\u5176\u4ed6\u540e\u679c\uff09\u5747\u7531\u60a8\u81ea\u884c\u627f\u62c5\u8d23\u4efb\u3002 \u60a8\u627f\u8ba4\u60a8\u5c06\u5728\u4f7f\u7528\u6570\u636e\u96c6\u65f6\u5c3d\u804c\u5c3d\u8d23\uff0c\u5e76\u9075\u5b88\u6240\u6709\u9002\u7528\u7684\u6cd5\u5f8b\u3001\u6cd5\u89c4\u548c\u9053\u5fb7\u51c6\u5219\u3002 \u901a\u8fc7\u8bbf\u95ee\u3001\u4e0b\u8f7d\u6216\u4f7f\u7528\u6b64\u6570\u636e\u96c6\uff0c\u60a8\u8868\u793a\u63a5\u53d7\u672c\u58f0\u660e\uff0c\u5e76\u627f\u8bfa\u9075\u5b88\u8bb8\u53ef\u6761\u6b3e\u548c\u6761\u4ef6\u3002</p> <p>\u9644\u5f55 F\u8bb8\u53ef GitHub \u4ee3\u7801\u5e93\u4e2d\u63d0\u4f9b\u7684\u4ee3\u7801 8 \u91c7\u7528 Apache 2.0 \u8bb8\u53ef\u8bc1\u5206\u53d1\u3002 \u5bf9\u4e8e\u6570\u636e\u96c6\u672c\u8eab\uff0c\u6211\u4eec\u53c2\u8003 Common Crawl \u57fa\u91d1\u4f1a\u4f7f\u7528\u6761\u6b3e 9 \uff08\u5bf9\u4e8e\u4ece Common Crawl \u5b58\u6863\u6d3e\u751f\u7684\u6570\u636e\u96c6\uff09\u3002 \u5bf9\u4e8e\u5176\u4ed6\u6570\u636e\u96c6\uff0c\u6211\u4eec\u53c2\u8003\u6570\u636e\u96c6\u6700\u521d\u5206\u53d1\u7684\u8bb8\u53ef\u8bc1\u3002 \u5177\u4f53\u6765\u8bf4\uff0c</p> <p>\u2022 C4 \u6570\u636e\u96c6\u4f4d\u4e8e https://huggingface.co/datasets/allenai/c4#license\uff0c \u2022 GitHub \u5b50\u96c6\u4ec5\u9650\u4e8e MIT\u3001BSD \u6216 Apache \u8bb8\u53ef\u8bc1\uff0c \u2022 arxiv \u5b50\u96c6\u7684\u4f7f\u7528\u6761\u6b3e\u4f4d\u4e8e https://info.arxiv.org/help/api/tou.html\uff0c \u2022 \u4efb\u4f55\u7ef4\u57fa\u767e\u79d1\u6d3e\u751f\u6570\u636e\u7684\u7ef4\u57fa\u767e\u79d1\u8bb8\u53ef\u8bc1 https://huggingface.co/datasets/legacy-datasets/wikipedia#licensing-information\uff0c \u2022 StackExchange \u6570\u636e\u5728\u4e92\u8054\u7f51\u6863\u6848\u9986\u4e0a\u7684 StackExchange \u8bb8\u53ef\u8bc1 https://archive.org/details/stackexchange\u3002 \u6211\u4eec\u8fdb\u4e00\u6b65\u8981\u6c42\u7528\u6237\u9075\u5b88\u4ed6\u4eec\u4f7f\u7528\u7684\u5b50\u96c6\u7684\u6bcf\u4e2a\u5355\u72ec\u8bb8\u53ef\u8bc1\u3002</p>"},{"location":"%E8%BF%90%E7%BB%B4/%E8%BF%90%E7%BB%B4/","title":"\u8fd0\u7ef4\u6570\u636e","text":"Bash<pre><code># \u66f4\u65b0\u8f6f\u4ef6\u5305\u5217\u8868\napt-get update\n\n# \u5b89\u88c5\u5fc5\u8981\u7684\u57fa\u7840\u8f6f\u4ef6\napt-get install git screen\n</code></pre> Bash<pre><code>[filter \"lfs\"]\n        process = git-lfs filter-process\n        required = true\n        clean = git-lfs clean -- %f\n        smudge = git-lfs smudge -- %f\n[alias]\n    br = branch\n    st = status\n    d = difftool\n    co = checkout\n    lg = log --all --decorate --graph --oneline\n[color]\n    ui = true\n[tool]\n    difftool = vimdiff\n[user]\n        email = xiongxinlei@shizhuang-inc.com\n        name = xiongxinlei\n[difftool]\n    prompt = false\n[i18n]\n        commitencoding = utf-8\n        logoutputencoding = utf-8\n[gui]\n    encoding = utf-8\n[url \"git@pkg.poizon.com:\"]\n        insteadof = https://pkg.poizon.com/\n[difftool \"vimdiff\"]\n        cmd = vimdiff \\\"$LOCAL\\\" \\\"$REMOTE\\\"\n        trustExitCode = false\n[merge]\n        tool = vimdiff\n[diff]\n        tool = vimdiff\n[filter \"lfs\"]\n        clean = git-lfs clean -- %f\n        smudge = git-lfs smudge -- %f\n        process = git-lfs filter-process\n        required = true\n[core]\n        quotepath = false\n        editor = vim\n[http]\n        postBuffer = 524288000\n[credential]\n        helper = store\n</code></pre> Bash<pre><code>#allow bold colors - necessary for some reason\nattrcolor b \".I\"\n\n# Tell screen how to set colors. AB = background, AF=foreground\ntermcapinfo xterm 'Co#256:AB=\\E[48;5;%dm:AF=\\E[38;5;%dm'\n#\n# # Enables use of shift-PgUp and shift-PgDn\ntermcapinfo xterm|xterms|xs|rxvt ti@:te@\n#\n# # Erase background with current bg color\ndefbce \"on\"\n#\n# # Enable 256 color term\nterm xterm-256color\n\n# # Cache 30000 lines for scroll back\ndefscrollback 30000\n#\n# # New mail notification\n #backtick 101 30 15 $HOME/bin/mailstatus.sh\n\nhardstatus alwayslastline\n # Very nice tabbed colored hardstatus line\nhardstatus string '%{= Kd} %{= Kd}%-w%{= Kr}[%{= KW}%n %t%{= Kr}]%{= Kd}%+w %-= %{KG} %H%{KW}|%{KY}%101`%{KW}|%D %M %d %Y%{= Kc} %C%A%{-}'\n#\n# # change command character from ctrl-a to ctrl-b (emacs users may want this)\nescape ^Jj\n#\n# # Hide hardstatus: ctrl-a f\nbind f eval \"hardstatus ignore\"\n# Show hardstatus: ctrl-a F\nbind F eval \"hardstatus alwayslastline\"\ndefutf8 on\ndefencoding utf8\nencoding UTF-8 UTF-8\n</code></pre> <ul> <li>\u8fdc\u7a0b\u8fde\u63a5 Bash<pre><code>apt-get update &amp;&amp; \\\napt-get install -y openssh-server &amp;&amp; \\\necho \"PermitRootLogin yes\" &gt;&gt; /etc/ssh/sshd_config \n# \u8bbe\u7f6e\u7aef\u53e3\u4e3a8822\nvim /etc/ssh/sshd_config \n\n/etc/init.d/ssh  start\n\nvim ~/.ssh/authorized_keys\n</code></pre></li> </ul> Bash<pre><code>apt install language-pack-zh-hans\n# \u5728~/.bashrc\u4e2d\u8bbe\u7f6e\nexport LANG=zh_CN.UTF-8\n</code></pre> Bash<pre><code>apt-get install tzdata\nexport TZ='Asia/Shanghai'\ndpkg-reconfigure tzdata\n</code></pre> Bash<pre><code>\"\u5173\u95edvi\u517c\u5bb9,\u5426\u5219\u9000\u683c\u952e\u65e0\u6cd5\u5220\u9664\u6587\u672c\nset nocompatible\n\nset nu\nsyntax enable\nsyntax on\nset hlsearch\nset ignorecase\nset incsearch\nset fileencodings=utf-8,ucs-bom,gb18030,gbk,gb2312,cp936\nset termencoding=utf-8\nset encoding=utf-8\nset cursorline\nif has('mouse')\n    set mouse=a\nendif\n\" \u8df3\u8f6c\u81f3\u53f3\u65b9\u7684\u7a97\u53e3\nnnoremap wl &lt;C-W&gt;l\n\" \u8df3\u8f6c\u81f3\u5de6\u65b9\u7684\u7a97\u53e3\nnnoremap wh &lt;C-W&gt;h\n\" \u8df3\u8f6c\u81f3\u4e0a\u65b9\u7684\u5b50\u7a97\u53e3\nnnoremap wk &lt;C-W&gt;k\n\" \u8df3\u8f6c\u81f3\u4e0b\u65b9\u7684\u5b50\u7a97\u53e3\nnnoremap wj &lt;C-W&gt;j\n\n\" \u65b0\u5206\u5272\u7a97\u53e3\u4f4d\u4e8e\u4e0b\u65b9\nset splitbelow\n\" \u65b0\u5206\u5272\u7a97\u53e3\u4f4d\u4e8e\u53f3\u65b9\nset splitright\n\n\" \u65b0\u5206\u5272\u7a97\u53e3\u4f4d\u4e8e\u4e0b\u65b9\nset splitbelow\n\" \u65b0\u5206\u5272\u7a97\u53e3\u4f4d\u4e8e\u53f3\u65b9\nset splitright\n\n\nset showmode\nset showcmd\n\n\" \u5c06\u5236\u8868\u7b26\u6269\u5c55\u4e3a\u7a7a\u683c\nset expandtab\n\" \u8bbe\u7f6e\u7f16\u8f91\u65f6\u5236\u8868\u7b26\u5360\u7528\u7a7a\u683c\u6570\nset tabstop=4\n\" \u8bbe\u7f6e\u683c\u5f0f\u5316\u65f6\u5236\u8868\u7b26\u5360\u7528\u7a7a\u683c\u6570\nset shiftwidth=4\n\" \u8ba9 vim \u628a\u8fde\u7eed\u6570\u91cf\u7684\u7a7a\u683c\u89c6\u4e3a\u4e00\u4e2a\u5236\u8868\u7b26\nset softtabstop=4\n\n:map &lt;F3&gt; :vertical wincmd f&lt;CR&gt;\n:map &lt;F4&gt; :set wrap&lt;CR&gt;\n:map &lt;F5&gt; :set nowrap&lt;CR&gt;\n:map &lt;F6&gt; :set paste&lt;CR&gt;\n:map &lt;F7&gt; :set nopaste&lt;CR&gt;\n:map tn :tabNext&lt;CR&gt;\n:map tp :tabprevious&lt;CR&gt;\n\nset foldmethod=syntax \"\u57fa\u4e8e\u8bed\u6cd5\u7684\u4ee3\u7801\u6298\u53e0\nset nofoldenable \" \u542f\u52a8 vim \u65f6\u4e0d\u6298\u53e0\u4ee3\u7801\nnnoremap &lt;space&gt; za \" \u7a7a\u683c\u8fdb\u884c\u6298\u53e0\u4e0e\u5c55\u5f00\n</code></pre>"},{"location":"en/home/about/","title":"about","text":""},{"location":"en/todo/todo/#_1","title":"todo","text":"<ol> <li>TOD\u4ecb\u7ecd</li> <li>\u5b66\u672f\u7248GPT</li> <li>CPU\u8bbe\u8ba1</li> <li>cmake\u5b66\u4e60</li> <li>scaling law</li> <li>https://arthurchiao.art/blog/llama-paper-zh/</li> <li>https://www.aminer.org/research_report/64d9cb367cb68b460f1739af</li> <li>https://www.jiqizhixin.com/articles/2024-02-27-3</li> <li>https://github.com/km1994/llms_paper</li> <li>https://zhuanlan.zhihu.com/p/684955373</li> <li>https://zhuanlan.zhihu.com/p/687278237</li> <li>https://zhuanlan.zhihu.com/p/663524611</li> <li>https://ai.meta.com/blog/meta-llama-3/</li> <li>https://zhuanlan.zhihu.com/p/660580871</li> <li>https://qwenlm.github.io/zh/blog/qwen-moe/</li> <li>https://python3-cookbook.readthedocs.io/zh-cn/latest/c10/p04_split_module_into_multiple_files.html</li> <li>https://dlsyscourse.org/assignments/</li> <li>https://www.bilibili.com/video/BV1ZC4y177Tw/?spm_id_from=333.788&amp;vd_source=5d036d17b16d6367c25a00641a169e1f</li> <li>https://search.bilibili.com/all?vt=15763804&amp;keyword=%E6%8A%95%E6%9C%BA%E9%87%87%E6%A0%B7&amp;from_source=webtop_search&amp;spm_id_from=333.1007&amp;search_source=5</li> <li>https://www.bilibili.com/video/BV1oQ4y197tQ/?spm_id_from=333.337.search-card.all.click&amp;vd_source=5d036d17b16d6367c25a00641a169e1f</li> <li>https://www.bilibili.com/video/BV1Q24y1S7ve/?p=1&amp;vd_source=5d036d17b16d6367c25a00641a169e1f</li> <li>https://www.bilibili.com/video/BV1f5411i78C/?spm_id_from=autoNext&amp;vd_source=5d036d17b16d6367c25a00641a169e1f</li> <li>https://www.bilibili.com/video/BV1214y1X7Aq/?spm_id_from=pageDriver&amp;vd_source=5d036d17b16d6367c25a00641a169e1f</li> <li>https://programmercarl.com/0239.%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E6%9C%80%E5%A4%A7%E5%80%BC.html#%E6%80%9D%E8%B7%AF</li> <li>https://www.promptingguide.ai/zh</li> <li>https://space.bilibili.com/517221395/search/video?tid=0&amp;pn=3&amp;keyword=%E8%AE%A1%E7%AE%97%E5%9B%BE&amp;order=pubdate</li> <li>https://www.bilibili.com/video/BV1cG411E7gV/?spm_id_from=333.999.0.0&amp;vd_source=5d036d17b16d6367c25a00641a169e1f</li> <li>https://www.bilibili.com/video/BV1Bv4y1J7QT/?p=2&amp;spm_id_from=pageDriver&amp;vd_source=5d036d17b16d6367c25a00641a169e1f</li> <li>https://www.bilibili.com/video/BV1aF411v7Va/?spm_id_from=333.788.recommend_more_video.2&amp;vd_source=5d036d17b16d6367c25a00641a169e1f</li> <li>https://www.bilibili.com/video/BV1Ds4y1k7yr/?spm_id_from=333.337.search-card.all.click&amp;vd_source=5d036d17b16d6367c25a00641a169e1f</li> <li>https://space.bilibili.com/517221395/search/video?tid=0&amp;pn=3&amp;keyword=%E8%AE%A1%E7%AE%97%E5%9B%BE&amp;order=pubdate</li> <li>https://mkdocs-like-code.readthedocs.io/zh-cn/latest/get-started/deploy/#github-pages</li> <li>https://zhuanlan.zhihu.com/p/649731916</li> <li>https://blog.csdn.net/u010159842/article/details/78959515</li> <li>https://www.bilibili.com/video/BV1AW4y1F7EK/?p=2&amp;spm_id_from=pageDriver&amp;vd_source=5d036d17b16d6367c25a00641a169e1f</li> <li>https://www.bilibili.com/video/BV17g4y1g7S6/?spm_id_from=333.788&amp;vd_source=5d036d17b16d6367c25a00641a169e1f</li> <li>https://search.bilibili.com/all?keyword=qlora%E8%AE%AD%E7%BB%83&amp;from_source=webtop_search&amp;spm_id_from=333.1007&amp;search_source=5</li> <li>https://www.bilibili.com/video/BV1Hb421b72f/?spm_id_from=333.1007.tianma.1-2-2.click&amp;vd_source=5d036d17b16d6367c25a00641a169e1f</li> <li>https://juejin.cn/post/7350510977052229668</li> <li>https://huggingface.co/learn/nlp-course/zh-CN/chapter6/3</li> <li>https://www.huaxiaozhuan.com/%E5%B7%A5%E5%85%B7/huggingface_transformer/chapters/1_tokenizer.html</li> <li>https://huggingface.co/docs/transformers/main/zh/main_classes/tokenizer</li> <li>https://tvm.hyper.ai/docs/arch/arch/pass_infra/</li> <li>https://tvm.hyper.ai/docs/</li> <li>https://yangzhang.site/Note/mkdocs/practice/</li> <li>https://github.com/hellotransformers/Natural_Language_Processing_with_Transformers/tree/main</li> </ol>"},{"location":"","title":"\u6b22\u8fce\u6765\u5230XiongHaHa\u9c7c\u5858","text":""},{"location":"#_1","title":"\u5173\u4e8e\u672c\u7ad9","text":"<p>\u672c\u7f51\u7ad9\u4f5c\u4e3a\u6211\u4e2a\u4eba\u5b66\u4e60\u3001\u7814\u7a76\u6574\u7406\u7684\u5730\u65b9</p>"},{"location":"#_2","title":"\u611f\u609f","text":"<p>\u300a\u51ac\u591c\u8bfb\u4e66\u793a\u5b50\u807f\u300b</p> <p>\uff08\u5357\u5b8b\uff09\u9646\u6e38</p> <p>\u53e4\u4eba\u5b66\u95ee\u65e0\u9057\u529b\uff0c\u5c11\u58ee\u5de5\u592b\u8001\u59cb\u6210\u3002</p> <p>\u7eb8\u4e0a\u5f97\u6765\u7ec8\u89c9\u6d45\uff0c\u7edd\u77e5\u6b64\u4e8b\u8981\u8eac\u884c\u3002</p>"},{"location":"#_3","title":"\u8bc4\u8bba&amp;\u7591\u60d1","text":"<p>\u5927\u5bb6\u53ef\u4ee5\u5728github\u4e0a\u63d0issue\uff0c\u6216\u8005\u901a\u8fc7\u90ae\u4ef6\u76f4\u63a5\u8054\u7cfb\u6211</p>"},{"location":"blog/","title":"Blog","text":""},{"location":"blog/blogs/basic/","title":"basic","text":""},{"location":"datasets/tod/","title":"\u4efb\u52a1\u5f0f\u5bf9\u8bdd\u6570\u636e\u96c6","text":""},{"location":"datasets/tod/#_2","title":"\u6570\u636e\u96c6\u7b80\u4ecb","text":"\u6570\u636e\u96c6 \u591a\u8f6e\u5bf9\u8bdd\u6570\u76ee \u6bcf\u4e2a\u5bf9\u8bdd\u5e73\u5747\u8f6e\u6570 \u6bcf\u4e2a\u5bf9\u8bdd\u5e73\u5747tokens\u6570\u76ee \u5782\u7c7b\u6570\u76ee \u5355\u5782\u7c7b \u591a\u5782\u7c7b MultiWOZ 10438 13.70 13.18 7 \u2705 \u274e RiSAWOZ 11200 13.57 10.91 12 \u2705 \u274e"},{"location":"datasets/sft/lima/","title":"Lima \u6570\u636e\u96c6","text":""},{"location":"datasets/sft/lima/#_1","title":"\u7b80\u4ecb","text":"<p>\u8fd9\u7bc7\u8bba\u6587\u662f\u4e3a\u4e86\u8bc1\u660e\u5927\u6a21\u578b\u7684\u8868\u9762\u5bf9\u9f50\u5047\u8bbe(Superficial Alignment Hypothesis)\uff0c\u5927\u6a21\u578b\u7684\u5927\u91cf\u77e5\u8bc6\u90fd\u5728\u9884\u8bad\u7ec3\u91cc\u9762\u83b7\u53d6\uff0c\u901a\u8fc7\u5c11\u91cf\u7684SFT\u6570\u636e\u5373\u53ef\u4ee5\u8bad\u7ec3\u4e00\u4e2a\u5f88\u597d\u7684Chat\u6a21\u578b\u53bb\u6fc0\u53d1\u5927\u6a21\u578b\u4e2d\u5b58\u50a8\u7684\u77e5\u8bc6\u3002</p> <p>\u8be5\u6570\u636e\u96c6\u5728ModelScope\u4e2d\u7684\u8def\u5f84\u4e3a\uff1ahttps://modelscope.cn/datasets/swift/lima/files </p> <p>\u5bf9\u5e94\u7684\u6709\u4e00\u4e2a\u4e2d\u6587\u7248\u672c\u7684LIMA \u6570\u636e\u96c6\uff0cModelScope\u4e2d\u7684\u8def\u5f84\u4e3a\uff1ahttps://huggingface.co/datasets/Jellyfish042/Chinese-LIMA-V0</p>"},{"location":"datasets/sft/lima/#_2","title":"\u53c2\u8003","text":"<ol> <li>https://arxiv.org/abs/2305.11206</li> <li>https://finisky.github.io/lima-summary/</li> <li>https://www.mikecaptain.com/2023/05/26/captain-lima/</li> <li>https://www.ainavpro.com/3794.html</li> </ol>"},{"location":"hardware/%E5%9F%BA%E7%A1%80/","title":"\u6d6e\u70b9\u6570","text":""},{"location":"hardware/%E5%9F%BA%E7%A1%80/#_2","title":"\u80cc\u666f","text":"<p>\u6d6e\u70b9\u6570\u662f\u8ba1\u7b97\u673a\u7cfb\u7edf\u4e2d\u7528\u6765\u8868\u8fbe\u5b9e\u6570\u7684\u4e00\u79cd\u65b9\u5f0f\u3002\u8fd9\u79cd\u8868\u8fbe\u65b9\u5f0f\u5229\u7528\u79d1\u5b66\u8ba1\u6570\u6cd5\u6765\u8868\u8fbe\u5b9e\u6570\uff0c\u5373\u7528\u4e00\u4e2a\u5c3e\u6570( Mantissa\uff0c\u5c3e\u6570\u6709\u65f6\u4e5f\u79f0\u4e3a\u6709\u6548\u6570\u5b57\u2014\u2014\u2014Significand; \u5c3e\u6570\u5b9e\u9645\u4e0a\u662f\u6709\u6548\u6570\u5b57\u7684\u975e\u6b63\u5f0f\u8bf4\u6cd5) \uff0c\u4e00\u4e2a\u57fa\u6570( Base) \uff0c\u4e00\u4e2a\u6307\u6570( Exponent) \u4ee5\u53ca\u4e00\u4e2a\u8868\u793a\u6b63\u8d1f\u7684\u7b26\u53f7\u6765\u8868\u8fbe\u5b9e\u6570\uff0e \u6bd4\u5982 <code>123.45</code> \u7528\u5341\u8fdb\u5236\u79d1\u5b66\u8ba1\u6570\u6cd5\u53ef\u4ee5\u8868\u8fbe\u4e3a \\(1.2345 \\times 10^ 2\\)\uff0c\u5176\u4e2d 1.2345 \u4e3a\u5c3e\u6570\uff0c10 \u4e3a\u57fa\u6570\uff0c2 \u4e3a\u6307\u6570\uff0e \u6d6e\u70b9\u6570\u5229\u7528\u6307\u6570\u8fbe\u5230\u4e86\u6d6e\u52a8\u5c0f\u6570\u70b9\u7684\u6548\u679c\uff0c\u4ece\u800c\u53ef\u4ee5\u7075\u6d3b\u5730\u8868\u8fbe\u66f4\u5927\u8303\u56f4\u7684\u5b9e\u6570\u3002</p>"},{"location":"hardware/%E5%9F%BA%E7%A1%80/#ieee-754","title":"IEEE 754 \u6807\u51c6","text":"<p>IEEE754 \u6807\u51c6\u4e8e 1985 \u5e74\u63d0\u51fa\uff0c\u662f\u5f53\u524d\u4e8c\u8fdb\u5236\u6d6e\u70b9\u8fd0\u7b97\u7684\u683c\u5f0f\u6807\u51c6\uff0e IEEE754 \u6807\u51c6\u89c4\u5b9a\u4e86\u4e24\u79cd\u57fa\u672c\u6d6e\u70b9\u683c\u5f0f: \u5355\u7cbe\u5ea6\u548c\u53cc\u7cbe\u5ea6\u3002 IEEE754 \u6807\u51c6\u8981\u6c42\u6d6e\u70b9\u6570\u5fc5\u987b\u662f\u89c4\u8303\u7684\u3002\u4e00\u4e2a\u5b9e\u6570 \\(R\\) \u7684\u4e8c\u8fdb\u5236\u79d1\u5b66\u8ba1\u6570\u6cd5\u53ef\u8868\u793a\u4e3a \\(R = (\uff0d1)^S \\times 2^{E} \\times M\\)\uff0c\u5176\u4e2d * S \u4e3a\u5b9e\u6570\u7684\u7b26\u53f7\uff0c<code>0</code> \u6b63 <code>1</code> \u8d1f\u3002  * E \u4e3a\u4e8c\u8fdb\u5236\u6570\u7684\u6307\u6570\uff0c * M \u8868\u793a\u5c3e\u6570\uff0c\u89c4\u8303\u7684\u4e8c\u8fdb\u5236\u6570 \\(M=1.d_1,d_2, \\cdots, d_{M}\\) \u57fa\u672c\u6d6e\u70b9\u683c\u5f0f\u5bf9\u5e94\u7684\u7c7b\u578b\u4e3a Float \u548cDouble\u3002</p> <p>\u6d6e\u70b9\u683c\u5f0f\u4e2d\u6700\u9ad8\u4f4d\u662f\u7b26\u53f7\u4f4d\uff0e\u4e2d\u95f4\u662f\u6307\u6570\u57df\uff0c\u5bf9\u5e94\u4e8e\u4e8c\u8fdb\u5236\u79d1\u5b66\u8ba1\u6570\u6cd5\u4e2d\u7684\u6307\u6570\u90e8\u5206\uff0c\u6307\u6570\u90e8\u5206\u79f0\u4e3a\u6d6e\u70b9\u6570\u7684\u9636\u7801\uff0c\u91c7\u7528\u79fb\u7801\u65b9\u5f0f\u5b58\u50a8\u3002</p>"},{"location":"hardware/%E5%9F%BA%E7%A1%80/#_3","title":"\u6d6e\u70b9\u6570\u7684\u8868\u793a","text":"<p>\u5355\u7cbe\u5ea6\u6d6e\u70b9\u6570\u8981\u6307\u6570\u503c\u52a0\u4e0a\u504f\u79fb\u91cf 127\uff0c\u53cc\u7cbe\u5ea6\u8981\u6307\u6570\u503c\u52a0\u4e0a\u504f\u79fb\u91cf 1023\u3002\u5bf9\u4e8e\u5355\u7cbe\u5ea6\u6d6e\u70b9\u6570\uff0c\u53ef\u4ee5\u8868\u8fbe\u7684\u6307\u6570\u771f\u503c\u7684\u8303\u56f4\u5728 <code>\uff0d128</code> \u5230 <code>127</code> \u4e4b\u95f4\u3002 \u6307\u6570\u771f\u503c <code>\uff0d128</code> \u4ee5\u53ca <code>\uff0d127</code> \u4fdd\u7559\u7528\u4f5c\u7279\u6b8a\u503c\u7684\u5904\u7406\u3002 \u6307\u6570\u771f\u503c\u52a0\u4e0a\u504f\u79fb\u91cf 127 \u4e4b\u540e\uff0c\u6307\u6570 E \u7684\u673a\u5668\u503c\u4e3a 1 \u5230254\uff0c\u5373\u91c7\u7528\u79fb\u7801\u540e\uff0c\u6307\u6570\u7684\u673a\u5668\u6570\u5168\u90e8\u7528\u6b63\u6570\u8868\u793a\uff0c\u4fbf\u4e8e\u6bd4\u8f83\u6d6e\u70b9\u6570\u7684\u5927\u5c0f\uff0e \u6307\u6570\u771f\u503c\u8303\u56f4\u5728 \uff0d126\u548c 127 \u4e4b\u95f4\u7684\u6d6e\u70b9\u6570\u79f0\u4e3a\u89c4\u683c\u5316\u7684\u6d6e\u70b9\u6570\u3002\u6d6e\u70b9\u683c\u5f0f\u7684\u6700\u540e\u662f\u5c3e\u6570\u57df\uff0c\u89c4\u8303\u7684\u4e8c\u8fdb\u5236\u6570\u7684\u5c3e\u6570\u5c0f\u6570\u70b9\u524d\u9762\u603b\u662f 1\uff0c\u6240\u4ee5\u5728\u4fdd\u5b58\u5c3e\u6570\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u7701\u7565\u5c0f\u6570\u70b9\u524d\u9762\u7684 1\u3002</p> <p>fp32\u3001fp16\u3001bf16\u5206\u522b\u6307\u5355\u7cbe\u5ea6\u6d6e\u70b9\u6570\uff08float32\uff09\u3001Intel\u63d0\u51fa\u7684\u534a\u7cbe\u5ea6\u6d6e\u70b9\u6570\uff08float16)\u3001nvidia\u63d0\u51fa\u7684\u534a\u7cbe\u5ea6\u6d6e\u70b9\u6570\uff08bfloat16\uff09\u3002\u540d\u5b57\u5f53\u4e2d\u7684\u6570\u5b57\u5c31\u5bf9\u5e94\u4e86\u8be5\u79cd\u6d6e\u70b9\u6570\u8868\u793a\u65b9\u6cd5\u6240\u5360\u7684bit\u6570\uff0c\u90a3\u4e48fp16\u548cbp16\u7684\u5b58\u50a8\u7a7a\u95f4\u5929\u7136\u5c31\u662ffp32\u7684\u4e00\u534a\u3002</p> <p>\u4ee5fp16\u4e3a\u4f8b\uff0c\u5b83\u5360\u670916bit\uff082\u5b57\u8282\uff09\uff0c\u5176\u4e2d5bit\u7528\u6765\u8868\u793a\u6307\u6570\u4f4d\uff08\u8868\u793a10\u7684\u5e42\u6b21\uff09\uff0c10bit\u7528\u6765\u8868\u793a\u5c0f\u6570\u4f4d\uff08\u4e5f\u53eb\u5c3e\u6570\u4f4d\uff0c\u8868\u793a\u6d6e\u70b9\u6570\u7684\u6709\u6548\u6570\u5b57\u90e8\u5206\uff09\uff0c\u8fd8\u6709\u4e00\u4e2a\u7b26\u53f7\u4f4d\u30025\u4e2a\u6307\u6570\u4f4d\u672c\u6765\u53ef\u4ee5\u8868\u793a00000-11111\uff0c\u4f46\u662f\u51680\u548c\u51681\u6709\u7279\u6b8a\u542b\u4e49\uff0c\u6362\u7b97\u621010\u8fdb\u5236\u4e5f\u5c31\u662f1\u81f330\uff0c\u51cf\u53bb\u504f\u7f6e15\u3001\u80fd\u8868\u793a\u7684\u6b63\u8d1f\u533a\u95f4\u4e3a-14\u81f315\uff0c\u5c3e\u6570\u4f4d\u53ef\u4ee5\u8868\u793a<code>1.0000000000</code> \u81f3 <code>1.1111111111</code>\uff08\u6b64\u65f6\u5c3e\u6570\u4f4d\u524d\u7684\u9690\u85cf\u9879\u4e3a1\uff09\uff0c\u6362\u7b97\u621010\u8fdb\u5236\u4e5f\u5c31\u662f[1, 2)\u3002</p> <p>\u4e0a\u9762\u63d0\u5230\u7684\u6307\u6570\u4f4d\u51680\u548c\u51681\u6709\u4ec0\u4e48\u7279\u6b8a\u542b\u4e49\u5462\uff1a</p> <ul> <li>\u6307\u6570\u4f4d\u51680\u8868\u793a\u975e\u89c4\u683c\u6570\uff0c\u4e5f\u5c31\u662f+0\u3001-0, \u4ee5\u53ca\u975e\u5e38\u9760\u8fd10\u7684\u6570, \u6bd4\u59821E-38\u3002</li> <li>\u6307\u6570\u51681\u8868\u793a\u7279\u6b8a\u6570\uff0c\u6709Inf\u548cNaN\u4e24\u79cd\u60c5\u51b5\u3002\u5c0f\u6570\u4f4d\u51680\u8868\u793a\u65e0\u7a77\u5927inf\uff0c\u6839\u636e\u7b26\u53f7\u4f4d\u4e0d\u540c\u53ef\u4ee5\u5206\u4e3a+inf\u548c-inf\u3002\u5c0f\u6570\u4f4d\u4e0d\u5168\u4e3a0\uff0c\u8868\u793aNaN\u3002</li> <li>\u89c4\u683c\u6570\u548c\u975e\u89c4\u683c\u6570\u62fc\u63a5\u8d77\u6765\u624d\u662f\u4e00\u4e2a\u5b8c\u6574\u7684\u53d6\u503c\u8303\u56f4\u3002</li> </ul> <p>\u90a3\u4e48fp16\u6240\u80fd\u8868\u793a\u7684\u6570\u7684\u53d6\u503c\u8303\u56f4\u662f\u591a\u5c11\uff1f\u6700\u5927\u503c \\(1.1111111111 * 2^{11110}\\) \u6362\u7b97\u621010\u8fdb\u5236\u4e5f\u5c31\u662f \\((1 + \\frac{1023}{1024}) * 2^{15} = 65504\\)\uff1b\u800c\u6700\u5c0f\u503c \\(-1.1111111111 * 2 ^{11110}\\)\uff0c\u6362\u7b97\u621010\u8fdb\u5236\u4e5f\u5c31\u662f \\(-(1 + \\frac{1023}{1024})=-65504\\)\uff1b\u6700\u5c0f\u6b63\u503c \\(0.0000000001 * 2^{00000}\\)\uff0c\u6b64\u65f6\u6307\u6570\u4f4d\u51680\uff08\u4e5f\u5c31\u662f\u6240\u8c13\u7684\u975e\u89c4\u683c\u6570\uff09\uff0c\u6ce8\u610f\u6b64\u65f6\u6307\u6570\u4f4d\u56fa\u5b9a\u4e3a \\(1-\u504f\u7f6e\u9879=1-15=-14\\)\uff0c\u4e14\u5c3e\u6570\u4f4d\u524d\u7684\u9690\u85cf\u9879\u4e5f\u4e0d\u518d\u662f1\u800c\u662f0\uff0c\u6240\u4ee5\u6362\u7b97\u621010\u8fdb\u5236\u4e5f\u5c31\u662f   \\(\\frac{1}{1024} * 2 ^{-1024} = 2^{-24}=0.000000059604645\\)\u3002\u6240\u4ee5fp16\u7684\u52a8\u6001\u8303\u56f4\u4e3a\uff085.96E\u22128~65504\uff09\u3002</p> <p>\u7528\u540c\u6837\u7684\u529e\u6cd5\uff0c\u6211\u4eec\u4e5f\u80fd\u7b97\u51fafp32\u7684\u52a8\u6001\u8303\u56f4\u4e3a(1.4E-45 ~ 3.40E38)\u3002</p> <p>\u800cbf16\u5462\uff1f\u5b83\u76f8\u5f53\u4e8e\u662f\u5c06fp32\u7684\u5c3e\u6570\u4f4d\u622a\u65ad\u4e86\uff0c\u5b83\u8ddffp16\u4e00\u6837\u536016bit\uff0c\u8ddffp32\u4e00\u6837\u67098\u4e2a\u6307\u6570\u4f4d\uff0c\u90a3\u4e48\u8bf4\u660e\u5b83\u7684\u5c3e\u6570\u4f4d\u53ea\u67097\u4f4d\uff0c\u8fd9\u6837\u4e00\u6765\uff0c\u6211\u4eec\u5c31\u7528\u635f\u5931\u7cbe\u5ea6\u7684\u4ee3\u4ef7\u6362\u6765\u4e86\u51e0\u4e4e\u8ddffp32\u4e00\u6837\u5927\u7684\u53d6\u503c\u8303\u56f4\uff0c\u907f\u514d\u4e86fp16\u5bb9\u6613\u4e0a\u3001\u4e0b\u6ea2\u7684\u95ee\u9898\u3002\u5b83\u7684\u6700\u5927\u503c  \\(1.1111111 * 2^{11111110}\\) ,\u6362\u7b97\u621010\u8fdb\u5236\u5c31\u662f \\((1+\\frac{127}{128}) * 2 ^{127}\\)\uff0c\u7ea6\u4e3a3.38E38\uff1b\u6700\u5c0f\u6b63\u503c \\(0.0000001 * 2^{00000000}\\) \uff0c\u6362\u7b97\u621010\u8fdb\u5236\u4e5f\u5c31\u662f \\(\\frac{1}{128} * 2^{-126} = 2^{-133}\\)\uff0c\u7ea6\u4e3a9.2E\u221241\uff0c\u6240\u4ee5bf16\u7684\u52a8\u6001\u8303\u56f4\u4e3a(9.2E\u221241~3.38E38)\u3002 </p>"},{"location":"hardware/%E5%9F%BA%E7%A1%80/#_4","title":"\u4e8c\u3001\u6df7\u5408\u7cbe\u5ea6","text":"<p>\u867d\u7136\u7406\u60f3\u60c5\u51b5\u4e0b\u8bad\u7ec3\u548c\u63a8\u7406\u90fd\u5e94\u8be5\u5728fp32 \u4e2d\u5b8c\u6210\uff0c\u4f46\u534a\u7cbe\u5ea6\u5360\u7528\u5185\u5b58\u66f4\u5c11\u3001\u8ba1\u7b97\u66f4\u5feb\u3002</p> <p>\u6a21\u578b\u5360\u7528\u7684\u5185\u5b58\u66f4\u5c0f\uff0c\u8bad\u7ec3\u7684\u65f6\u5019\u53ef\u4ee5\u7528\u66f4\u5927\u7684batchsize\u3002 \u6a21\u578b\u8bad\u7ec3\u65f6\uff0c\u901a\u4fe1\u91cf\uff08\u7279\u522b\u662f\u591a\u5361\uff0c\u6216\u8005\u591a\u673a\u591a\u5361\uff09\u5927\u5e45\u51cf\u5c11\uff0c\u5927\u5e45\u51cf\u5c11\u7b49\u5f85\u65f6\u95f4\uff0c\u52a0\u5feb\u6570\u636e\u7684\u6d41\u901a\u3002</p> <p>\u800c\u4e4b\u6240\u4ee5\u8981\u4f7f\u7528\u6df7\u5408\u7cbe\u5ea6\u3001\u800c\u4e0d\u662f\u5168\u90e8\u66ff\u6362\u4e3a\u534a\u7cbe\u5ea6\u7684\u539f\u56e0\u662f\u6570\u636e\u6ea2\u51fa\u548c\u820d\u5165\u8bef\u5dee\u3002</p>"},{"location":"hardware/%E5%9F%BA%E7%A1%80/#21","title":"2.1 \u6570\u636e\u6ea2\u51fa","text":"<p>\u5bf9\u6bd4\u5b83\u4eec\u7684\u52a8\u6001\u8303\u56f4\uff1a</p> <p>fp16\uff085.96E\u22128~ 65504\uff09</p> <p>fp32\uff081.4E-45 ~ 3.40E38)</p> <p>bf16\uff089.2E\u221241~3.38E38)</p> <p>\u663e\u7136\uff0c\u534a\u7cbe\u5ea6\u8ddf\u5355\u7cbe\u5ea6\u6bd4\uff0c\u5bb9\u6613\u51fa\u73b0\u6570\u636e\u7684\u4e0a\u6ea2\u548c\u4e0b\u6ea2\uff0c\u5176\u4e2d\u5728\u6a21\u578b\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\uff0c\u66f4\u6709\u53ef\u80fd\u51fa\u73b0\u7684\u662f\u5c0f\u68af\u5ea6\u5bfc\u81f4\u7684\u4e0b\u6ea2\u3002</p>"},{"location":"hardware/%E5%9F%BA%E7%A1%80/#22","title":"2.2 \u820d\u5165\u8bef\u5dee","text":"<p>\u8fd9\u4e09\u79cd\u7cbe\u5ea6\u5b83\u4eec\u7684\u201c\u95f4\u9694\u5355\u4f4d\u201d\u4e5f\u662f\u4e0d\u4e00\u6837\u7684\uff0c\u6211\u4eec\u8ba1\u7b97\u7684\u6700\u5c0f\u6b63\u503c\u5c31\u662f\u5b83\u4eec\u7684\u95f4\u9694\u5355\u4f4d\uff0c\u800c\u95f4\u9694\u5355\u4f4d\u7684\u5927\u5c0f\u51b3\u5b9a\u4e86\u4e00\u4e2a\u5c0f\u503c\u662f\u5426\u4f1a\u88ab\u820d\u5f03\u3002\u6bd4\u5982\u8bf4fp32\u548cbf16\u867d\u7136\u6709\u5927\u81f4\u4e00\u6837\u7684\u53d6\u503c\u8303\u56f4\uff0c\u4f46\u662f\u5b83\u4eec\u7684\u7cbe\u5ea6\uff08\u95f4\u9694\u5355\u4f4d\uff09\u662f\u4e0d\u4e00\u6837\u7684\uff0c\u5f53\u4e00\u4e2afp32\u7684\u503c+1.4E-45\u65f6\uff0c\u8fd9\u4e2a\u5c0f\u503c\u4f1a\u88ab\u770b\u5230\uff0c\u539f\u503c\u4f1a\u53d1\u751f\u53d8\u52a8\uff0c\u4f46\u5982\u679c\u662f\u4e00\u4e2abf16\u7684\u503c+1.4E-45\uff0c\u7531\u4e8ebf16\u7684\u95f4\u9694\u5355\u4f4d\u4e3a9.2E\u221241\uff0c\u8fd9\u4e2a\u5c0f\u503c\u5c31\u4f1a\u88ab\u820d\u5f03\uff0c\u539f\u503c\u4e0d\u53d1\u751f\u53d8\u52a8\uff0c\u8fd9\u4e5f\u5c31\u5bfc\u81f4\u4e86\u820d\u5165\u8bef\u5dee\u3002</p>"},{"location":"hardware/%E5%9F%BA%E7%A1%80/#_5","title":"\u4e09\u3001\u6df7\u5408\u7cbe\u5ea6\u7684\u4f7f\u7528","text":"<p>\u4e0a\u9762\u63d0\u5230\u7684\u4e24\u4e2a\u95ee\u9898\uff0c\u5176\u5b9e\u90fd\u662f\u5728\u6a21\u578b\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\u7531\u4e8e\u68af\u5ea6\u66f4\u65b0\u5bfc\u81f4\u7684\uff0c\u6240\u4ee5\u5982\u679c\u662f\u63a8\u7406\u7684\u8bdd\uff0c\u76f4\u63a5\u964d\u4f4e\u7cbe\u5ea6\u5373\u53ef\u3002\u800c\u8bad\u7ec3\u7684\u8bdd\uff0c\u5c31\u9700\u8981\u6df7\u5408\u7cbe\u5ea6\u4e86\u3002</p> <p>\u6df7\u5408\u7cbe\u5ea6\u5c31\u662f\u901a\u8fc7\u4e00\u4e9b\u8bbe\u8ba1\uff0c\u4f7f\u5f97\u6211\u4eec\u53ef\u4ee5\u4eab\u53d7\u534a\u7cbe\u5ea6\u7684\u4f18\u70b9\uff0c\u53c8\u53ef\u4ee5\u4e00\u5b9a\u7a0b\u5ea6\u89c4\u907f\u6570\u636e\u6ea2\u51fa\u548c\u820d\u5165\u8bef\u5dee\u3002</p>"},{"location":"hardware/%E5%9F%BA%E7%A1%80/#31","title":"3.1 \u6743\u91cd\u7684\u9ad8\u7cbe\u5ea6\u5907\u4efd","text":"<p> \u8fd9\u79cd\u65b9\u6cd5\u4e3b\u8981\u662f\u7528\u4e8e\u89e3\u51b3\u820d\u5165\u8bef\u5dee\u7684\u95ee\u9898\u3002\u6211\u4eec\u4f7f\u7528 fp32 \u6743\u91cd\u4f5c\u4e3a\u7cbe\u786e\u7684 \u201c\u4e3b\u6743\u91cd (master weight)\u201d\u8fdb\u884c\u5907\u4efd\uff0c\u800c\u5176\u4ed6\u6240\u6709\u503c\uff08weights\uff0cactivations\uff0c gradients\uff09\u5747\u4f7f\u7528 fp16 \u8fdb\u884c\u8ba1\u7b97\u4ee5\u63d0\u9ad8\u8bad\u7ec3\u901f\u5ea6\uff0c\u6700\u540e\u5728\u68af\u5ea6\u66f4\u65b0\u9636\u6bb5\u518d\u4f7f\u7528\u534a\u7cbe\u5ea6\u7684\u68af\u5ea6\u66f4\u65b0\u5355\u7cbe\u5ea6\u7684\u4e3b\u6743\u91cd\uff0c\u8fd9\u6837\u5f53\u5f88\u5c0f\u7684\u68af\u5ea6*\u5b66\u4e60\u7387\u540e\u8981\u8ddf\u6743\u91cd\uff08fp32\u7684\uff09\u505a\u8fd0\u7b97\u65f6\uff0c\u5c31\u4e0d\u4f1a\u88ab\u820d\u5f03\u4e86\u3002</p> <p>\u7531\u4e8e fp16 \u6df7\u5408\u7cbe\u5ea6\u5927\u5927\u51cf\u5c11\u4e86\u5185\u5b58\u9700\u6c42, \u5e76\u53ef\u4ee5\u5b9e\u73b0\u66f4\u5feb\u7684\u901f\u5ea6, \u56e0\u6b64\u53ea\u6709\u5728\u5728\u6b64\u8bad\u7ec3\u6a21\u5f0f\u4e0b\u8868\u73b0\u4e0d\u4f73\u65f6, \u624d\u8003\u8651\u4e0d\u4f7f\u7528\u6df7\u5408\u7cbe\u5ea6\u8bad\u7ec3\u3002 \u901a\u5e38, \u5f53\u6a21\u578b\u672a\u5728 fp16 \u6df7\u5408\u7cbe\u5ea6\u4e2d\u8fdb\u884c\u9884\u8bad\u7ec3\u65f6, \u4f1a\u51fa\u73b0\u8fd9\u79cd\u60c5\u51b5\u3002 \u8fd9\u6837\u7684\u6a21\u578b\u53ef\u80fd\u4f1a\u6ea2\u51fa, \u5bfc\u81f4loss\u4e3aNaN\u3002 \u5982\u679c\u662f\u8fd9\u79cd\u60c5\u51b5, \u4f7f\u7528\u5b8c\u6574\u7684 fp32 \u6a21\u5f0f\u3002</p> <p>\u770b\u5230\u8fd9\u91cc\uff0c\u53ef\u80fd\u6709\u4eba\u63d0\u51fa\u8fd9\u79cd fp32 \u62f7\u8d1dweight\u7684\u65b9\u5f0f\uff0c\u90a3\u5c82\u4e0d\u662f\u4f7f\u5f97\u5185\u5b58\u5360\u7528\u53cd\u800c\u66f4\u9ad8\u4e86\u5462\uff1f\u662f\u7684\uff0c fp32 \u989d\u5916\u62f7\u8d1d\u4e00\u4efd weight \u7684\u786e\u65b0\u589e\u52a0\u4e86\u8bad\u7ec3\u65f6\u5019\u5b58\u50a8\u7684\u5360\u7528\u3002 \u4f46\u662f\u5b9e\u9645\u4e0a\uff0c\u5728\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\uff0c\u5185\u5b58\u4e2d\u5360\u636e\u5927\u90e8\u5206\u7684\u57fa\u672c\u90fd\u662f activations \u7684\u503c\u3002\u7279\u522b\u662f\u5728batchsize \u5f88\u5927\u7684\u60c5\u51b5\u4e0b\uff0c activations \u66f4\u662f\u7279\u522b\u5360\u636e\u7a7a\u95f4\u3002 \u4fdd\u5b58 activiations \u4e3b\u8981\u662f\u4e3a\u4e86\u5728 back-propogation \u7684\u65f6\u5019\u8fdb\u884c\u8ba1\u7b97\u3002\u56e0\u6b64\uff0c\u53ea\u8981 activation \u7684\u503c\u57fa\u672c\u90fd\u662f\u4f7f\u7528 fp16 \u6765\u8fdb\u884c\u5b58\u50a8\u7684\u8bdd\uff0c\u5219\u6700\u7ec8\u6a21\u578b\u4e0e fp32 \u76f8\u6bd4\u8d77\u6765\uff0c \u5185\u5b58\u5360\u7528\u4e5f\u57fa\u672c\u80fd\u591f\u51cf\u534a\u3002</p>"},{"location":"hardware/%E5%9F%BA%E7%A1%80/#32-loss-scale","title":"3.2 Loss scale","text":"<p>\u4e0a\u9762\u8fd9\u5f20\u56fe\u5c55\u793a\u4e86\u5728\u771f\u5b9e\u8bad\u7ec3\u573a\u666f\u4e0b\u68af\u5ea6\u503c\u7684\u5206\u5e03\uff0c\u53ef\u89c1\u5927\u90e8\u5206\u7684\u503c\u90fd\u5f88\u5c0f\uff0c\u4ee5fp16\u4e3a\u4f8b\uff0c\u5b83\u7684\u6307\u6570\u8303\u56f4\u662f[-14, 15]\uff0c\u56fe\u4e2d\u5927\u90e8\u5206\u68af\u5ea6\u90fd\u5c0f\u4e8e\u8fd9\u4e2a\u8303\u56f4\u3001\u4ece\u800c\u88ab\u5f52\u4e3a0\u4e86\u3002Loss scale\u8981\u505a\u7684\u5c31\u662f\u901a\u8fc7\u8ba9\u68af\u5ea6\u4e58\u4e00\u4e2ascale\u4ece\u800c\u4f7f\u5f97\u8fd9\u4e2a\u5206\u5e03\u53f3\u79fb\u3001\u5360\u636e\u66f4\u591afp16\u53ef\u8868\u793a\u7684\u8303\u56f4\u3002</p>"},{"location":"hardware/%E5%9F%BA%E7%A1%80/#33","title":"3.3 \u7b97\u6570\u7cbe\u5ea6","text":"<p>\u795e\u7ecf\u7f51\u7edc\u7684\u8bad\u7ec3\u4e2d\u4e3b\u8981\u6d89\u53ca\u4e09\u79cd\u8fd0\u7b97\uff1a\u5411\u91cf\u70b9\u4e58\uff0creduction\uff08\u51cf\u5c11\u4e00\u4e2atensor\u4e2d\u7684\u5143\u7d20\u6570\u91cf\uff0c\u5f80\u5f80\u5bf9\u4e00\u4e2aTensor\u5185\u7684\u5143\u7d20\u505a\u5f52\u7ea6\u64cd\u4f5c\uff0c\u5f80\u5f80\u51fa\u73b0\u5728batch-norm\u5c42\uff09\uff0cpointwise\u7684\u8fd0\u7b97\u3002</p> <p>\u5411\u91cf\u70b9\u4e58\u4e2d\u7684\u52a0\u6cd5\u4f7f\u7528fp32\u6765\u505a\uff0c\u4f46\u4ee5\u534a\u7cbe\u5ea6\u7684\u65b9\u5f0f\u5b58\u50a8\uff1breduction\u4e5f\u8981\u7528fp32\u6765\u505a\uff0c\u4f46\u4ee5\u534a\u7cbe\u5ea6\u65b9\u5f0f\u5b58\u50a8\uff1b</p> <p>Whereas previous GPUs supported only FP16 multiplyadd operation, NVIDIA Volta GPUs introduce Tensor Cores that multiply FP16 input matrices and accumulate products into either FP16 or FP32 outputs (NVIDIA, 2017). pointwise\u7684\u8fd0\u7b97\uff08\u6bd4\u5982element-wise matrix products\uff09\uff0c\u6536\u5230memory-bandwidth\u9650\u5236\uff0c\u800c\u4e14\u5b83\u4eec\u662f\u4ee5\u5355\u7cbe\u5ea6\u8fd8\u662f\u534a\u7cbe\u5ea6\u8fd0\u7b97\uff0c\u90fd\u4e0d\u5f71\u54cd\u8ba1\u7b97\u901f\u5ea6\uff0c\u6240\u4ee5\u5355\u3001\u534a\u7cbe\u5ea6\u5747\u53ef\u3002</p>"},{"location":"hardware/%E5%9F%BA%E7%A1%80/#_6","title":"\u56db\u3001\u91cf\u5316\u7684\u5e94\u7528","text":"<p>\u6839\u636e\u7b2c\u4e8c\u90e8\u5206\u4e2d\u6df7\u5408\u7cbe\u5ea6\u7684\u4f7f\u7528\u65b9\u6cd5\uff0c\u6211\u4eec\u53ef\u4ee5\u5f97\u77e5\u8f93\u5165\u5411\u91cf\u8d70\u8fc7\u6a21\u578b\u8ba1\u7b97\u56fe\u65f6\uff0c\u6240\u6709\u6743\u91cd\u77e9\u9635\u90fd\u4f1a\u4f9d\u6b21\u6267\u884c\u53cd\u91cf\u5316\u548c\u91cd\u91cf\u5316\u64cd\u4f5c\uff0c\u6240\u4ee5\uff0c\u4f7f\u7528\u6743\u91cd\u91cf\u5316\u65f6\uff0c\u63a8\u7406\u65f6\u95f4\u901a\u5e38\u4e0d\u4f1a\u51cf\u5c11\uff0c\u53cd\u800c\u4f1a\u589e\u52a0\u3002</p> <p>\u5982\u4f55\u8fdb\u884c\u91cf\u5316\uff1f\u4f7f\u7528huggingface\u65f6\uff0c\u662f\u975e\u5e38\u7b80\u5355\u7684\uff0c\u6bd4\u5982\uff1a</p> <p>model = AutoModelForCausalLM.from_pretrained(\"...\", torch_dtype=torch.bfloat16, device_map=\"auto\", pad_token_id=0) \u5982\u679c\u534a\u7cbe\u5ea6\u65e0\u6cd5\u6ee1\u8db3\u4f60\u7684\u9700\u6c42\uff0c\u4e5f\u53ef\u4ee5\u8fdb\u884c8bit\u62164bit\u91cf\u5316\uff1a</p> <p>model = AutoModelForCausalLM.from_pretrained(\"...r\", load_in_8bit=True, pad_token_id=0) model = AutoModelForCausalLM.from_pretrained(\"...r\", load_in_4bit=True, pad_token_id=0)</p>"},{"location":"hardware/%E5%9F%BA%E7%A1%80/#_7","title":"\u53c2\u8003","text":"<ol> <li>https://zhuanlan.zhihu.com/p/657886517</li> <li>https://deeprec.readthedocs.io/zh/latest/BFloat16.html</li> <li>https://zhuanlan.zhihu.com/p/667163603</li> <li>https://blog.csdn.net/Phoenix_ZengHao/article/details/118760774</li> <li>\u675c\u53d4\u5f3a,\u65bd\u6b66\u7956.\u6d6e\u70b9\u6570\u7528\u6cd5\u5206\u6790[J].\u5170\u5dde\u5de5\u4e1a\u9ad8\u7b49\u4e13\u79d1\u5b66\u6821\u5b66\u62a5, 2012.DOI:CNKI:SUN:LZGD.0.2012-03-013.</li> <li>https://www.cnblogs.com/cbscan/articles/2032127.html</li> <li>https://zhuanlan.zhihu.com/p/343033661</li> <li>https://www.johndcook.com/blog/2018/11/15/bfloat16/</li> </ol>"},{"location":"home/about/","title":"\u5173\u4e8e","text":""},{"location":"home/about/#_1","title":"\ud83d\udd2d \u5173\u4e8e","text":""},{"location":"home/about/#_2","title":"\u5173\u4e8e\u6211","text":"<ul> <li>\u59d3\u540d\uff1a\u718a\u54c8\u54c8</li> <li>\u8054\u7cfb\u65b9\u5f0f\uff1a915574300@qq.com</li> <li>\u5c97\u4f4d\uff1a\u7b97\u6cd5\u5de5\u7a0b\u5e08\uff08NLP, \u8bed\u97f3)</li> </ul>"},{"location":"home/about/#_3","title":"\u5173\u4e8e\u672c\u7ad9","text":"<p>\u672c\u7f51\u7ad9\u4f5c\u4e3a\u6211\u4e2a\u4eba\u5b66\u4e60\u3001\u7814\u7a76\u548c\u5f00\u53d1\u7684\u89c4\u5212\u56fe\u3002</p>"},{"location":"home/about/#_4","title":"\u4e2a\u4eba\u8d5e\u52a9","text":"<p>\u5982\u679c\u60a8\u89c9\u5f97\u672c\u7ad9\u7684\u5185\u5bb9\u5bf9\u60a8\u6709\u5e2e\u52a9\u548c\u542f\u53d1\uff0c\u53ef\u4ee5\u901a\u8fc7\u626b\u63cf\u4e0b\u65b9\u4e8c\u7ef4\u7801\u8d5e\u52a9\uff0c\u611f\u8c22\u60a8\u7684\u652f\u6301\u548c\u5e2e\u52a9 </p>"},{"location":"huggingface/datasets/DatasetDict%E7%B1%BB/","title":"DatasetDict \u7c7b","text":"<p><code>datasets.DatasetDict</code> \u662fHugging Face\u7684 <code>datasets</code> \u5e93\u4e2d\u7684\u4e00\u4e2a\u7c7b\uff0c\u5b83\u662f\u4e00\u4e2a\u5305\u542b\u591a\u4e2a <code>datasets.Dataset</code> \u5bf9\u8c61\u7684\u5b57\u5178\uff0c\u901a\u5e38\u7528\u6765\u5b58\u50a8\u548c\u7ba1\u7406\u5177\u6709\u4e0d\u540c\u6570\u636e\u5206\u5272\uff08\u5982\u8bad\u7ec3\u96c6\u3001\u9a8c\u8bc1\u96c6\u548c\u6d4b\u8bd5\u96c6\uff09\u7684\u6570\u636e\u96c6\u3002</p>"},{"location":"huggingface/datasets/DatasetDict%E7%B1%BB/#datasetdict_1","title":"\u521b\u5efa <code>DatasetDict</code>","text":"<p><code>DatasetDict</code> \u53ef\u4ee5\u4ece\u591a\u4e2a <code>datasets.Dataset</code> \u5bf9\u8c61\u521b\u5efa\uff0c\u6216\u8005\u4ece\u4e00\u4e2a\u5305\u542b\u6570\u636e\u96c6\u7684\u5b57\u5178\u4e2d\u521b\u5efa\uff0c\u672c\u8d28\u4e0a <code>DatasetDict</code> \u662f\u4e00\u4e2a\u5b57\u5178\uff0c\u5176\u952e\u662f\u6570\u636e\u96c6\u7684\u540d\u79f0\uff08\u5982 \"<code>train</code>\", \"<code>test</code>\"\uff09\uff0c\u503c\u662f\u5bf9\u5e94\u7684 <code>datasets.Dataset</code> \u5bf9\u8c61\u3002\u5176\u6784\u9020\u51fd\u6570\u5982\u4e0b\uff1a</p> Python<pre><code>class DatasetDict(dict):\n    \"\"\"A dictionary (dict of str: datasets.Dataset) with dataset transforms methods (map, filter, etc.)\"\"\"\n    pass\n</code></pre> <p><code>DatasetDict</code> \u91cd\u8981\u63a5\u53e3\u5982\u4e0b\u6240\u793a\uff1a</p> \u65b9\u6cd5\u540d \u63cf\u8ff0 \u5907\u6ce8 from_json \u4eceJSON\u6587\u4ef6\u52a0\u8f7d<code>DatasetDict</code>\u3002 \u8bfb\u53d6\u6570\u636e\u4e4b\u540e\uff0c\u4f1a\u5b58\u50a8\u591a\u4e2a\u5173\u952e\u7684\u4fe1\u606f\uff0c\u8fd9\u4e9b\u4fe1\u606f\u5982\u4e0b\uff1a 1.  cached_files: \u6bcf\u4e2a\u96c6\u5408\u7684\u7f13\u5b58\u6587\u4ef6  2. data: \u52a0\u8f7d\u4e4b\u540e\u7684\u6570\u636e\uff0c\u8fd9\u4e2a\u6570\u636e\u662f\u4e00\u4e2a\u5b57\u5178\uff0c\u5b57\u5178\u7684key\u662f <code>train</code>, <code>dev</code>, <code>test</code>\u3002\u5b57\u5178\u7684value\u662f\u5bf9\u5e94\u7684 <code>MemoryMappedTable</code> \u5bf9\u8c61\u3002 3. num_columns: \u6570\u636e\u96c6\u5408\u6bcf\u4e2a\u6837\u672c\u5b57\u6bb5\u7684\u6570\u76ee\u3002 4. num_rows: \u8fd9\u662f\u4e00\u4e2a\u5b57\u6bb5\uff0c\u4fdd\u5b58\u4e86\u6bcf\u4e2a\u6570\u636e\u96c6\u7684\u6837\u672c\u7684\u6570\u76ee\uff0ckey\u662f <code>train</code>, <code>dev</code>, <code>test</code>\u3002 5. \u63a5\u4e0b\u6765\u5c31\u662f\u5404\u79cd\u96c6\u5408\u5bf9\u5e94\u7684\u6570\u636e\uff0c\u4f8b\u5982 <code>train</code>, <code>dev</code>, <code>test</code> \u5bf9\u5e94\u7684\u6570\u636e\u3002"},{"location":"huggingface/datasets/DatasetDict%E7%B1%BB/#map","title":"<code>map</code> \u65b9\u6cd5","text":"<p>\u7528\u6cd5\u793a\u4f8b\uff1a Python<pre><code>encoded_dataset = dataset.map(encode_examples, batched=True)\n</code></pre> batched\u53c2\u6570\u7684\u4f5c\u7528 \u5f53\u4f7f\u7528DatasetDict\u7684map\u65b9\u6cd5\u65f6\uff0cbatched\u53c2\u6570\u63a7\u5236\u7740\u4f20\u9012\u7ed9\u4f60\u63d0\u4f9b\u7684\u51fd\u6570\u7684\u6570\u636e\u662f\u9010\u6761\u8fd8\u662f\u4ee5\u6279\u5904\u7406\u7684\u5f62\u5f0f\u3002\u5177\u4f53\u6765\u8bf4\uff1a</p> <p>\u5f53batched=False\uff08\u9ed8\u8ba4\u8bbe\u7f6e\uff09\u65f6\uff0c\u63d0\u4f9b\u7684\u51fd\u6570\u5c06\u88ab\u9010\u6761\u5e94\u7528\u4e8e\u6570\u636e\u96c6\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\u3002\u8fd9\u610f\u5473\u7740\u51fd\u6570\u6bcf\u6b21\u63a5\u6536\u5e76\u5904\u7406\u6570\u636e\u96c6\u4e2d\u7684\u5355\u6761\u6570\u636e\uff1b \u5f53batched=True\u65f6\uff0c\u63d0\u4f9b\u7684\u51fd\u6570\u5c06\u4ee5\u6279\u5904\u7406\u7684\u65b9\u5f0f\u5e94\u7528\u4e8e\u6570\u636e\u96c6\u3002\u8fd9\u610f\u5473\u7740\u51fd\u6570\u4e00\u6b21\u6027\u63a5\u6536\u4e00\u6279\u6570\u636e\uff0c\u8fd9\u6279\u6570\u636e\u7684\u5927\u5c0f\u7531batch_size\u53c2\u6570\uff08\u5982\u679c\u6709\u63d0\u4f9b\u7684\u8bdd\uff09\u51b3\u5b9a\u3002\u8fd9\u53ef\u4ee5\u663e\u8457\u63d0\u9ad8\u6570\u636e\u5904\u7406\u7684\u6548\u7387\uff0c\u7279\u522b\u662f\u5f53\u4f60\u7684\u5904\u7406\u51fd\u6570\u80fd\u591f\u5229\u7528\u5411\u91cf\u5316\u64cd\u4f5c\u65f6\uff1b \u4f7f\u7528batched=True\u6709\u51e0\u4e2a\u6f5c\u5728\u7684\u597d\u5904\uff1a</p> <p>\u6548\u7387\u63d0\u5347\uff1a\u6279\u5904\u7406\u53ef\u4ee5\u51cf\u5c11\u51fd\u6570\u8c03\u7528\u7684\u6b21\u6570\uff0c\u5e76\u5141\u8bb8\u4f60\u5728\u5904\u7406\u6570\u636e\u65f6\u5229\u7528\u66f4\u9ad8\u6548\u7684\u5411\u91cf\u5316\u64cd\u4f5c\uff0c\u4ece\u800c\u63d0\u9ad8\u6574\u4f53\u5904\u7406\u901f\u5ea6\uff1b \u5185\u5b58\u7ba1\u7406\uff1a\u5f53\u5904\u7406\u975e\u5e38\u5927\u7684\u6570\u636e\u96c6\u65f6\uff0c\u9010\u6761\u5904\u7406\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5185\u5b58\u4f7f\u7528\u589e\u52a0\uff0c\u7279\u522b\u662f\u5982\u679c\u6bcf\u6b21\u51fd\u6570\u8c03\u7528\u90fd\u9700\u8981\u52a0\u8f7d\u989d\u5916\u7684\u8d44\u6e90\u6216\u6a21\u578b\u3002\u901a\u8fc7\u6279\u5904\u7406\uff0c\u4f60\u53ef\u4ee5\u66f4\u6709\u6548\u5730\u7ba1\u7406\u5185\u5b58\u4f7f\u7528\uff1b \u5e76\u884c\u5904\u7406\uff1a\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0cbatched\u5904\u7406\u53ef\u4ee5\u4e0enum_proc\u53c2\u6570\u7ed3\u5408\u4f7f\u7528\uff0c\u540e\u8005\u5141\u8bb8\u5728\u591a\u4e2a\u5de5\u4f5c\u8fdb\u7a0b\u4e0a\u5e76\u884c\u5e94\u7528\u51fd\u6570\uff0c\u8fdb\u4e00\u6b65\u63d0\u9ad8\u5904\u7406\u901f\u5ea6\uff1b \u771f\u7684\u662f\u6279\u91cf\u5904\u7406\u5417 \u5f53\u4f60\u8bbe\u7f6ebatched=True\u65f6\uff0c\u7684\u786e\u662f\u4ee5\u6279\u6b21\u5f62\u5f0f\u5904\u7406\u6570\u636e\uff0c\u4f46\u5904\u7406\u7684\u5177\u4f53\u65b9\u5f0f\u53d6\u51b3\u4e8e\u4f60\u7684\u51fd\u6570\u5b9e\u73b0\u3002\u5728\u8fd9\u79cd\u6a21\u5f0f\u4e0b\uff0c\u4f20\u9012\u7ed9\u4f60\u7684\u51fd\u6570\u7684\u662f\u4e00\u6574\u6279\u6570\u636e\uff0c\u800c\u4e0d\u662f\u5355\u6761\u6570\u636e\u3002\u8fd9\u610f\u5473\u7740\u4f60\u7684\u51fd\u6570\u4e00\u6b21\u63a5\u6536\u5230\u7684\u662f\u591a\u6761\u8bb0\u5f55\u7684\u96c6\u5408\uff08\u901a\u5e38\u662f\u4e00\u4e2a\u5b57\u5178\uff0c\u5176\u4e2d\u6bcf\u4e2a\u952e\u5bf9\u5e94\u7684\u503c\u662f\u5305\u542b\u591a\u4e2a\u8bb0\u5f55\u7684\u5217\u8868\uff09\uff0c\u800c\u51fd\u6570\u5185\u90e8\u5982\u4f55\u5904\u7406\u8fd9\u6279\u6570\u636e\uff0c\u5219\u53d6\u51b3\u4e8e\u4f60\u7684\u5b9e\u73b0\u3002</p> <p>\u9010\u6761\u6267\u884c\uff1a\u5373\u4f7f\u5728batched=True\u7684\u60c5\u51b5\u4e0b\uff0c\u4f60\u7684\u51fd\u6570\u5185\u90e8\u4f9d\u7136\u53ef\u4ee5\u9009\u62e9\u9010\u6761\u5904\u7406\u6279\u6b21\u4e2d\u7684\u6bcf\u6761\u6570\u636e\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u867d\u7136\u6570\u636e\u662f\u4ee5\u6279\u6b21\u5f62\u5f0f\u4f20\u9012\u7ed9\u51fd\u6570\u7684\uff0c\u4f46\u5982\u679c\u4f60\u5728\u51fd\u6570\u5185\u90e8\u904d\u5386\u6bcf\u6761\u6570\u636e\u8fdb\u884c\u5904\u7406\uff08\u5982\u4f7f\u7528\u5faa\u73af\uff09\uff0c\u5b9e\u9645\u4e0a\u8fd8\u662f\u9010\u6761\u6267\u884c\u3002\u8fd9\u79cd\u65b9\u6cd5\u5e76\u6ca1\u6709\u5145\u5206\u5229\u7528batched=True\u5e26\u6765\u7684\u6279\u5904\u7406\u4f18\u52bf\uff0c\u9664\u975e\u4f60\u7684\u5904\u7406\u903b\u8f91\u65e0\u6cd5\u5411\u91cf\u5316\uff1b \u6279\u91cf\u6267\u884c\uff1a\u66f4\u9ad8\u6548\u7684\u65b9\u6cd5\u662f\u4f7f\u7528\u5411\u91cf\u5316\u64cd\u4f5c\u5904\u7406\u6574\u6279\u6570\u636e\uff0c\u8fd9\u901a\u5e38\u610f\u5473\u7740\u5229\u7528NumPy\u3001Pandas\u6216\u5176\u4ed6\u652f\u6301\u6279\u91cf\u64cd\u4f5c\u7684\u5e93\u6765\u4e00\u6b21\u6027\u5904\u7406\u6574\u6279\u6570\u636e\u3002\u8fd9\u79cd\u65b9\u5f0f\u53ef\u4ee5\u663e\u8457\u63d0\u9ad8\u6548\u7387\uff0c\u56e0\u4e3a\u5b83\u51cf\u5c11\u4e86Python\u5faa\u73af\u7684\u5f00\u9500\uff0c\u540c\u65f6\u5229\u7528\u4e86\u5e95\u5c42\u5e93\u7684\u4f18\u5316\uff08\u5982\u5e76\u884c\u5316\u5904\u7406\uff09\uff1b \u5047\u8bbe\u4f60\u60f3\u5c06\u6587\u672c\u6570\u636e\u8f6c\u6362\u4e3a\u5c0f\u5199\uff0c\u4ee5\u4e0b\u4e24\u79cd\u65b9\u5f0f\u90fd\u53ef\u4ee5\u5b9e\u73b0\uff0c\u4f46\u6548\u7387\u6709\u6240\u4e0d\u540c\uff1a</p>"},{"location":"huggingface/datasets/DatasetDict%E7%B1%BB/#1batchedtrue","title":"\u65b9\u6cd51\uff1a\u9010\u6761\u5904\u7406\uff08\u5373\u4f7f\u5728batched=True\u7684\u60c5\u51b5\u4e0b\uff09","text":"<p>def to_lower(batch):     # \u8fd9\u91cc\u4ecd\u7136\u662f\u9010\u6761\u5904\u7406\uff0c\u5c3d\u7ba1\u6570\u636e\u662f\u4ee5\u6279\u6b21\u5f62\u5f0f\u4f20\u9012\u7684     return {\"text\": [text.lower() for text in batch[\"text\"]]}</p>"},{"location":"huggingface/datasets/DatasetDict%E7%B1%BB/#2","title":"\u65b9\u6cd52\uff1a\u5229\u7528\u5411\u91cf\u5316\u64cd\u4f5c\u6279\u91cf\u5904\u7406\uff08\u5982\u679c\u53ef\u80fd\uff09","text":"<p>def to_lower(batch):     # \u5047\u8bbebatch[\"text\"]\u662f\u4e00\u4e2aPandas Series\u6216\u7c7b\u4f3c\u7684\u7ed3\u6784\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u5411\u91cf\u5316\u7684str.lower()\u65b9\u6cd5     return {\"text\": batch[\"text\"].str.lower()} \u603b\u7684\u6765\u8bf4\uff0c\u867d\u7136batched=True\u5141\u8bb8\u4f60\u4ee5\u6279\u6b21\u7684\u65b9\u5f0f\u5904\u7406\u6570\u636e\uff0c\u4f46\u5982\u4f55\u5b9e\u73b0\u6279\u91cf\u5904\u7406\u7684\u6548\u7387\u4f18\u5316\uff0c\u53d6\u51b3\u4e8e\u4f60\u7684\u51fd\u6570\u5b9e\u73b0\u548c\u6570\u636e\u5904\u7406\u7684\u5177\u4f53\u65b9\u6cd5\u3002\u5411\u91cf\u5316\u64cd\u4f5c\u901a\u5e38\u63d0\u4f9b\u4e86\u66f4\u597d\u7684\u6027\u80fd\u3002</p>"},{"location":"huggingface/datasets/DatasetDict%E7%B1%BB/#_1","title":"\u53c2\u8003\uff1a","text":"<ol> <li>http://118.195.180.129:5000/project-29/doc-153/</li> <li>https://www.cnblogs.com/zhangxuegold/p/17531896.html</li> <li>https://study.hycbook.com/article/57912</li> </ol>"},{"location":"inference/introduction/","title":"\u6a21\u578b\u63a8\u7406","text":""},{"location":"inference/sglang/getting_started/%E5%AE%89%E8%A3%85/","title":"\u5b89\u88c5","text":"<p>\u60a8\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u4efb\u4e00\u65b9\u6cd5\u5b89\u88c5 SGLang\u3002</p>"},{"location":"inference/sglang/getting_started/%E5%AE%89%E8%A3%85/#1-pip","title":"\u65b9\u6cd5 1\uff1a\u4f7f\u7528 pip \u5b89\u88c5","text":"Bash<pre><code>pip install --upgrade pip\npip install \"sglang[all]\" --find-links https://flashinfer.ai/whl/cu121/torch2.4/flashinfer/\n</code></pre> <p>\u6ce8\u610f\uff1a\u8bf7\u68c0\u67e5 <code>FlashInfer</code> \u5b89\u88c5\u6587\u6863\uff0c\u6839\u636e\u60a8\u7684 PyTorch \u548c CUDA \u7248\u672c\u5b89\u88c5\u6b63\u786e\u7684\u7248\u672c\u3002</p>"},{"location":"inference/sglang/getting_started/%E5%AE%89%E8%A3%85/#2","title":"\u65b9\u6cd5 2\uff1a\u4ece\u6e90","text":""},{"location":"inference/sglang/getting_started/%E5%AE%89%E8%A3%85/#use-the-last-release-branch","title":"Use the last release branch","text":"<p>git clone -b v0.4.0.post1 https://github.com/sgl-project/sglang.git cd sglang</p> <p>pip install --upgrade pip pip install -e \"python[all]\" --find-links https://flashinfer.ai/whl/cu121/torch2.4/flashinfer/ \u6ce8\u610f\uff1a\u8bf7\u68c0\u67e5FlashInfer \u5b89\u88c5\u6587\u6863\uff0c\u6839\u636e\u60a8\u7684 PyTorch \u548c CUDA \u7248\u672c\u5b89\u88c5\u6b63\u786e\u7684\u7248\u672c\u3002</p> <p>\u6ce8\u610f\uff1a\u5bf9\u4e8e\u5e26\u6709 Instinct/MI GPU \u7684 AMD ROCm \u7cfb\u7edf\uff0c\u8bf7\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a</p>"},{"location":"inference/sglang/getting_started/%E5%AE%89%E8%A3%85/#use-the-last-release-branch_1","title":"Use the last release branch","text":"<p>git clone -b v0.4.0.post1 https://github.com/sgl-project/sglang.git cd sglang</p> <p>pip install --upgrade pip pip install -e \"python[all_hip]\" \u65b9\u6cd5 3\uff1a\u4f7f\u7528 Docker \u955c\u50cf\u53ef\u5728 Docker Hub \u4e0a\u4f5c\u4e3almsysorg/sglang\u83b7\u5f97\uff0c\u7531Dockerfile\u6784\u5efa\u3002\u5c06\u4ee5\u4e0b\u5185\u5bb9\u66ff\u6362\u4e3a\u60a8\u7684 huggingface hub\u4ee4\u724c\u3002 <p>docker run --gpus all \\     --shm-size 32g \\     -p 30000:30000 \\     -v ~/.cache/huggingface:/root/.cache/huggingface \\     --env \"HF_TOKEN=\" \\     --ipc=host \\     lmsysorg/sglang:latest \\     python3 -m sglang.launch_server --model-path meta-llama/Llama-3.1-8B-Instruct --host 0.0.0.0 --port 30000 \u6ce8\u610f\uff1a\u5bf9\u4e8e\u5e26\u6709 Instinct/MI GPU \u7684 AMD ROCm \u7cfb\u7edf\uff0c\u5efa\u8bae\u4f7f\u7528\u5b83docker/Dockerfile.rocm\u6765\u6784\u5efa\u6620\u50cf\uff0c\u793a\u4f8b\u548c\u7528\u6cd5\u5982\u4e0b\uff1a <p>docker build --build-arg SGL_BRANCH=v0.4.0.post1 -t v0.4.0.post1-rocm620 -f Dockerfile.rocm .</p> <p>alias drun='docker run -it --rm --network=host --device=/dev/kfd --device=/dev/dri --ipc=host \\     --shm-size 16G --group-add video --cap-add=SYS_PTRACE --security-opt seccomp=unconfined \\     -v $HOME/dockerx:/dockerx -v /data:/data'</p> <p>drun -p 30000:30000 \\     -v ~/.cache/huggingface:/root/.cache/huggingface \\     --env \"HF_TOKEN=\" \\     v0.4.0.post1-rocm620 \\     python3 -m sglang.launch_server --model-path meta-llama/Llama-3.1-8B-Instruct --host 0.0.0.0 --port 30000"},{"location":"inference/sglang/getting_started/%E5%AE%89%E8%A3%85/#till-flashinfer-backend-available-attention-backend-triton-sampling-backend-pytorch-are-set-by-default","title":"Till flashinfer backend available, --attention-backend triton --sampling-backend pytorch are set by default","text":"<p>drun v0.4.0.post1-rocm620 python3 -m sglang.bench_one_batch --batch-size 32 --input 1024 --output 128 --model amd/Meta-Llama-3.1-8B-Instruct-FP8-KV --tp 8 --quantization fp8 \u65b9\u6cd5 4\uff1a\u4f7f\u7528 docker  \u66f4\u591a\u7684 \u5728 Kubernetes \u6216\u4e91\u4e0a\u8fd0\u884c \u66f4\u591a\u7684 \u5e38\u89c1\u6ce8\u91ca FlashInfer\u662f\u9ed8\u8ba4\u7684\u6ce8\u610f\u5185\u6838\u540e\u7aef\u3002\u5b83\u4ec5\u652f\u6301 sm75 \u53ca\u4ee5\u4e0a\u7248\u672c\u3002\u5982\u679c\u60a8\u5728 sm75+ \u8bbe\u5907\uff08\u4f8b\u5982 T4\u3001A10\u3001A100\u3001L4\u3001L40S\u3001H100\uff09\u4e0a\u9047\u5230\u4efb\u4f55\u4e0e FlashInfer \u76f8\u5173\u7684\u95ee\u9898\uff0c\u8bf7\u901a\u8fc7\u5728GitHub \u4e0a\u6dfb\u52a0\u5e76\u6253\u5f00\u95ee\u9898\u6765\u5207\u6362\u5230\u5176\u4ed6\u5185\u6838\u3002--attention-backend triton --sampling-backend pytorch</p> <p>\u5982\u679c\u60a8\u53ea\u9700\u8981\u5c06 OpenAI \u6a21\u578b\u4e0e\u524d\u7aef\u8bed\u8a00\u4e00\u8d77\u4f7f\u7528\uff0c\u5219\u53ef\u4ee5\u907f\u514d\u4f7f\u7528\u6765\u5b89\u88c5\u5176\u4ed6\u4f9d\u8d56\u9879\u3002pip install \"sglang[openai]\"</p> <p>\u8bed\u8a00\u524d\u7aef\u72ec\u7acb\u4e8e\u540e\u7aef\u8fd0\u884c\u65f6\u8fd0\u884c\u3002\u60a8\u53ef\u4ee5\u5728\u672c\u5730\u5b89\u88c5\u524d\u7aef\u800c\u65e0\u9700 GPU\uff0c\u800c\u540e\u7aef\u5219\u53ef\u4ee5\u5728\u652f\u6301 GPU \u7684\u673a\u5668\u4e0a\u8bbe\u7f6e\u3002\u8981\u5b89\u88c5\u524d\u7aef\uff0c\u8bf7\u8fd0\u884c\uff0c\u5bf9\u4e8e\u540e\u7aef\uff0c\u8bf7\u4f7f\u7528\u3002\u8fd9\u5141\u8bb8\u60a8\u5728\u672c\u5730\u6784\u5efa SGLang \u7a0b\u5e8f\u5e76\u901a\u8fc7\u8fde\u63a5\u5230\u8fdc\u7a0b\u540e\u7aef\u6765\u6267\u884c\u5b83\u4eec\u3002pip install sglangpip install sglang[srt]</p>"},{"location":"inference/vllm/getting_started/%E5%AE%89%E8%A3%85/","title":"\u5b89\u88c5","text":"<p>vLLM \u662f\u4e00\u4e2a Python \u5e93\uff0c\u8fd8\u5305\u542b\u9884\u7f16\u8bd1\u7684 C++ \u548c CUDA\uff0812.1\uff09\u4e8c\u8fdb\u5236\u6587\u4ef6\u3002</p>"},{"location":"inference/vllm/getting_started/%E5%AE%89%E8%A3%85/#_2","title":"\u5b89\u88c5\u8981\u6c42","text":"<ul> <li>\u64cd\u4f5c\u7cfb\u7edf\uff1aLinux</li> <li>Python\uff1a3.9 - 3.12</li> <li>GPU\uff1a\u8ba1\u7b97\u80fd\u529b7.0\u6216\u66f4\u9ad8\uff08\u4f8b\u5982V100\u3001T4\u3001RTX20xx\u3001A100\u3001L4\u3001H100\u7b49\uff09</li> </ul>"},{"location":"inference/vllm/getting_started/%E5%AE%89%E8%A3%85/#vllm","title":"\u5b89\u88c5\u5df2\u53d1\u5e03\u7684 <code>vLLM</code> \u7248\u672c","text":"<p>\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 <code>pip</code> \u5b89\u88c5\u5df2\u7ecf\u53d1\u5e03\u7684 vLLM  \u7248\u672c\uff1a</p> Python<pre><code># (Recommended) Create a new conda environment.\nconda create -n myenv python=3.10 -y\nconda activate myenv\n\n# Install vLLM with CUDA 12.1.\npip install vllm\n</code></pre> <p>\u6ce8\u610f</p> <p>\u867d\u7136\u6211\u4eec\u5efa\u8bae\u4f7f\u7528 <code>conda</code> \u6765\u521b\u5efa\u548c\u7ba1\u7406 <code>Python</code> \u73af\u5883\uff0c\u4f46\u5f3a\u70c8\u5efa\u8bae\u4f7f\u7528 pip \u6765\u5b89\u88c5 vLLM\u3002\u8fd9\u662f\u56e0\u4e3a pip \u5b89\u88c5\u7684 torch \u53ef\u4ee5\u4e0e\u5176\u4ed6\u7684\u5e93\u5206\u5f00\u5b89\u88c5\uff0c\u4f8b\u5982 NCCL\u3002\u800c conda \u5219\u4f7f\u7528\u9759\u6001\u94fe\u63a5\u7684\u65b9\u5f0f\u8fdb\u884c\u5b89\u88c5 NCCL\u3002\u5f53 vLLM \u5c1d\u8bd5\u4f7f\u7528 NCCL \u65f6\uff0c\u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4\u95ee\u9898\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u6b64\u95ee\u9898\u3002</p> <p>\u6ce8\u610f</p> <p>\u622a\u81f3\u76ee\u524d\uff0cvLLM \u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u9ed8\u8ba4\u4f7f\u7528 CUDA 12.1 \u548cPyTorch \u516c\u5f00\u53d1\u884c\u7248\u672c\u8fdb\u884c\u7f16\u8bd1\u3002\u6211\u4eec\u8fd8\u63d0\u4f9b\u4f7f\u7528 CUDA 11.8 \u548c PyTorch \u516c\u5171\u53d1\u884c\u7248\u672c\u7f16\u8bd1\u7684 vLLM \u4e8c\u8fdb\u5236\u6587\u4ef6\uff1a Bash<pre><code># Install vLLM with CUDA 11.8.\nexport VLLM_VERSION=0.6.1.post1\nexport PYTHON_VERSION=310\npip install https://github.com/vllm-project/vllm/releases/download/v${VLLM_VERSION}/vllm-${VLLM_VERSION}+cu118-cp${PYTHON_VERSION}-cp${PYTHON_VERSION}-manylinux1_x86_64.whl --extra-index-url https://download.pytorch.org/whl/cu118\n</code></pre> \u4e3a\u4e86\u63d0\u9ad8\u6027\u80fd\uff0cvLLM \u5fc5\u987b\u7f16\u8bd1\u8bb8\u591a cuda \u5185\u6838\u3002\u4e0d\u5e78\u7684\u662f\uff0c\u7f16\u8bd1\u4f1a\u5bfc\u81f4\u4e0e\u5176\u4ed6 CUDA \u7248\u672c, PyTorch \u7248\u672c\u7684\u4ea7\u751f\u4e8c\u8fdb\u5236\u4e0d\u517c\u5bb9\u7684\u95ee\u9898\uff0c\u5373\u4f7f\u5bf9\u4e8e\u5177\u6709\u4e0d\u540c\u6784\u5efa\u914d\u7f6e\u7684\u540c\u4e00\u4e2a PyTorch \u7248\u672c\u4e5f\u662f\u5982\u6b64\u3002 \u56e0\u6b64\uff0c\u5efa\u8bae\u4f7f\u7528\u5168\u65b0\u7684 conda \u73af\u5883\u5b89\u88c5 vLLM\u3002\u5982\u679c\u60a8\u62e5\u6709\u4e0d\u540c\u7684 CUDA \u7248\u672c\u6216\u60f3\u8981\u4f7f\u7528\u73b0\u6709\u7684 PyTorch \u5b89\u88c5\uff0c\u5219\u9700\u8981\u4ece\u6e90\u4ee3\u7801\u6784\u5efa vLLM\u3002\u8bf7\u53c2\u9605\u540e\u7eed\u7684\u4e0b\u6587\u4e86\u89e3\u8bf4\u660e\u3002</p>"},{"location":"inference/vllm/getting_started/%E5%AE%89%E8%A3%85/#_3","title":"\u5b89\u88c5\u6700\u65b0\u7684\u7248\u672c","text":"<p>LLM \u63a8\u7406\u662f\u4e00\u4e2a\u5feb\u901f\u53d1\u5c55\u7684\u9886\u57df\uff0c\u6700\u65b0\u7684\u4ee3\u7801\u53ef\u80fd\u5305\u542b\u95ee\u9898\u4fee\u590d\u3001\u6027\u80fd\u6539\u8fdb\u548c\u5c1a\u672a\u53d1\u5e03\u7684\u65b0\u529f\u80fd\u3002\u4e3a\u4e86\u8ba9\u7528\u6237\u65e0\u9700\u7b49\u5f85\u4e0b\u4e00\u4e2a\u7248\u672c\u5373\u53ef\u5c1d\u8bd5\u6700\u65b0\u4ee3\u7801\uff0cvLLM \u4e3a\u81ea v0.5.3 \u4ee5\u6765\u7684\u6bcf\u6b21\u63d0\u4ea4\u90fd\u63d0\u4f9b\u4e86\u5728 x86 \u5e73\u53f0\u4e0a\u8fd0\u884c\u4e14\u5e26\u6709 CUDA 12 \u7684 Linux \u90e8\u7f72\u5305\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u4e0b\u8f7d\u5e76\u5b89\u88c5\u5b83\uff1a</p> Bash<pre><code>pip install https://vllm-wheels.s3.us-west-2.amazonaws.com/nightly/vllm-1.0.0.dev-cp38-abi3-manylinux1_x86_64.whl\n</code></pre> <p>\u5982\u679c\u60a8\u60f3\u8981\u8bbf\u95ee\u4ee5\u524d\u7684\u63d0\u4ea4\uff0c\u60a8\u53ef\u4ee5\u5728 URL \u4e2d\u6307\u5b9a\u63d0\u4ea4\u54c8\u5e0c\uff1a</p> <p>Bash<pre><code>export VLLM_COMMIT=33f460b17a54acb3b6cc0b03f4a17876cff5eafd # use full commit hash from the main branch\npip install https://vllm-wheels.s3.us-west-2.amazonaws.com/${VLLM_COMMIT}/vllm-1.0.0.dev-cp38-abi3-manylinux1_x86_64.whl\n</code></pre> \u8bf7\u6ce8\u610f\uff0c\u8fd9\u4e9b\u90e8\u7f72\u5305\u662f\u4f7f\u7528 Python 3.8 ABI \u6784\u5efa\u7684\uff08\u6709\u5173 ABI \u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605PEP 425 \uff09\uff0c\u56e0\u6b64\u5b83\u4eec\u4e0e Python 3.8 \u53ca\u66f4\u9ad8\u7248\u672c\u517c\u5bb9\u3002\u8f6e\u5b50\u6587\u4ef6\u540d (1.0.0.dev) \u4e2d\u7684\u7248\u672c\u5b57\u7b26\u4e32\u53ea\u662f\u4e00\u4e2a\u5360\u4f4d\u7b26\uff0c\u7528\u4e8e\u4e3a\u90e8\u7f72\u5305\u63d0\u4f9b\u7edf\u4e00\u7684 URL\u3002\u90e8\u7f72\u5305\u7684\u5b9e\u9645\u7248\u672c\u5305\u542b\u5728\u90e8\u7f72\u5305\u7684\u5143\u6570\u636e\u4e2d\u3002\u867d\u7136\u6211\u4eec\u4e0d\u518d\u652f\u6301 Python 3.8\uff08\u56e0\u4e3a PyTorch 2.5 \u653e\u5f03\u4e86\u5bf9 Python 3.8 \u7684\u652f\u6301\uff09\uff0c\u4f46\u90e8\u7f72\u5305\u4ecd\u7136\u662f\u4f7f\u7528 Python 3.8 ABI \u6784\u5efa\u7684\uff0c\u4ee5\u4fdd\u6301\u4e0e\u4ee5\u524d\u76f8\u540c\u7684\u8f6e\u5b50\u540d\u79f0\u3002</p> <p>\u8bbf\u95ee\u6700\u65b0\u4ee3\u7801\u7684\u53e6\u4e00\u79cd\u65b9\u6cd5\u662f\u4f7f\u7528 docker \u955c\u50cf\uff1a</p> Python<pre><code>export VLLM_COMMIT=33f460b17a54acb3b6cc0b03f4a17876cff5eafd # use full commit hash from the main branch\ndocker pull public.ecr.aws/q9t5s3a7/vllm-ci-test-repo:${VLLM_COMMIT}\n</code></pre> <p>\u8fd9\u4e9b docker \u955c\u50cf\u4ec5\u7528\u4e8e CI \u548c\u6d4b\u8bd5\uff0c\u4e0d\u9002\u7528\u4e8e\u751f\u4ea7\u7528\u9014\u3002\u5b83\u4eec\u5c06\u5728\u51e0\u5929\u540e\u8fc7\u671f\u3002</p> <p>\u6700\u65b0\u4ee3\u7801\u53ef\u80fd\u5b58\u5728bug\uff0c\u4e14\u4e0d\u7a33\u5b9a\uff0c\u8bf7\u8c28\u614e\u4f7f\u7528\u3002</p>"},{"location":"inference/vllm/getting_started/%E5%AE%89%E8%A3%85/#_4","title":"\u6e90\u7801\u7f16\u8bd1","text":""},{"location":"inference/vllm/getting_started/%E5%AE%89%E8%A3%85/#python","title":"\u4ec5 Python \u6784\u5efa(\u4e0d\u5305\u542b\u7f16\u8bd1)","text":"<p>\u5982\u679c\u60a8\u53ea\u9700\u8981\u66f4\u6539 Python \u4ee3\u7801\uff0c\u5219\u53ea\u9700\u6784\u5efa vLLM \u800c\u65e0\u9700\u7f16\u8bd1\u3002</p> <p>\u7b2c\u4e00\u6b65\u662f\u5b89\u88c5\u6700\u65b0\u7684 vLLM \u90e8\u7f72\u5305\uff1a Bash<pre><code>pip install https://vllm-wheels.s3.us-west-2.amazonaws.com/nightly/vllm-1.0.0.dev-cp38-abi3-manylinux1_x86_64.whl\n</code></pre> \u60a8\u53ef\u4ee5\u5728\u4e0a\u9762\u627e\u5230\u6709\u5173 vLLM \u8f6e\u5b50\u7684\u66f4\u591a\u4fe1\u606f\u3002</p> <p>\u9a8c\u8bc1\u5b89\u88c5\u6210\u529f\u540e\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u811a\u672c\uff1a Bash<pre><code>git clone https://github.com/vllm-project/vllm.git\ncd vllm\npython python_only_dev.py\n</code></pre> \u8be5\u811a\u672c\u5c06\uff1a</p> <ul> <li>\u5728\u5f53\u524d\u73af\u5883\u4e2d\u627e\u5230\u5df2\u5b89\u88c5\u7684vLLM\u5305\u3002</li> <li>\u5c06\u6784\u5efa\u7684\u6587\u4ef6\u590d\u5236\u5230\u5f53\u524d\u76ee\u5f55\u3002</li> <li>\u91cd\u547d\u540d\u5df2\u5b89\u88c5\u7684 vLLM \u5305\u3002</li> <li>\u5c06\u5f53\u524d\u76ee\u5f55\u7b26\u53f7\u94fe\u63a5\u5230\u5df2\u5b89\u88c5\u7684 vLLM \u5305\u3002</li> </ul> <p>\u73b0\u5728\uff0c\u60a8\u53ef\u4ee5\u5728\u5f53\u524d\u76ee\u5f55\u4e2d\u7f16\u8f91 Python \u4ee3\u7801\uff0c\u5e76\u4e14\u8fd0\u884c vLLM \u65f6\u5c06\u53cd\u6620\u66f4\u6539\u3002</p> <p>\u4e00\u65e6\u60a8\u5b8c\u6210\u7f16\u8f91\u6216\u8005\u60f3\u8981\u5b89\u88c5\u53e6\u4e00\u4e2a vLLM \u8f6e\u5b50\uff0c\u60a8\u5e94\u8be5\u4f7f\u7528\u5e26\u6709\uff08\u6216\u7b80\u79f0\uff09\u6807\u5fd7\u7684\u76f8\u540c\u811a\u672c\u9000\u51fa\u5f00\u53d1\u73af\u5883\uff1a<code>--quit-dev-q</code></p> Bash<pre><code>python python_only_dev.py --quit-dev\n</code></pre> <p>\u8be5 <code>--quit-dev</code> \u6807\u7b7e\u5c06\uff1a</p> <ul> <li>\u4ece\u5f53\u524d\u76ee\u5f55\u5220\u9664\u5230 vLLM \u5305\u7684\u7b26\u53f7\u94fe\u63a5\u3002</li> <li>\u4ece\u5907\u4efd\u4e2d\u6062\u590d\u539f\u59cb vLLM \u5305\u3002</li> </ul> <p>\u5982\u679c\u60a8\u66f4\u65b0 vLLM \u8f6e\u5b50\u5e76\u4ece\u6e90\u5934\u91cd\u5efa\u4ee5\u8fdb\u884c\u8fdb\u4e00\u6b65\u7684\u7f16\u8f91\uff0c\u5219\u9700\u8981\u518d\u6b21\u91cd\u590d\u4ec5\u9650 Python \u7684\u6784\u5efa\u6b65\u9aa4\u3002</p> <p>\u7b14\u8bb0</p> <p>\u60a8\u7684\u6e90\u4ee3\u7801\u53ef\u80fd\u4e0e\u6700\u65b0\u7684 vLLM wheel \u5177\u6709\u4e0d\u540c\u7684\u63d0\u4ea4 ID\uff0c\u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4\u672a\u77e5\u9519\u8bef\u3002\u5efa\u8bae\u5bf9\u6e90\u4ee3\u7801\u4f7f\u7528\u4e0e\u60a8\u5b89\u88c5\u7684 vLLM wheel \u76f8\u540c\u7684\u63d0\u4ea4 ID\u3002\u6709\u5173\u5982\u4f55\u5b89\u88c5\u6307\u5b9a wheel \u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u9605\u4e0a\u4e00\u8282\u3002</p>"},{"location":"inference/vllm/getting_started/%E5%AE%89%E8%A3%85/#_5","title":"\u5b8c\u6574\u6784\u5efa\uff08\u5e26\u7f16\u8bd1\uff09","text":"<p>\u5982\u679c\u8981\u4fee\u6539 C++ \u6216 CUDA \u4ee3\u7801\uff0c\u5219\u9700\u8981\u4ece\u6e90\u4ee3\u7801\u6784\u5efa vLLM\u3002\u8fd9\u53ef\u80fd\u9700\u8981\u51e0\u5206\u949f\uff1a Bash<pre><code>git clone https://github.com/vllm-project/vllm.git\ncd vllm\npip install -e .\n</code></pre></p> <p>\u63d0\u793a</p> <p>\u4ece\u6e90\u4ee3\u7801\u6784\u5efa\u9700\u8981\u8fdb\u884c\u5927\u91cf\u7f16\u8bd1\u3002\u5982\u679c\u60a8\u8981\u53cd\u590d\u4ece\u6e90\u4ee3\u7801\u6784\u5efa\uff0c\u7f13\u5b58\u7f16\u8bd1\u7ed3\u679c\u4f1a\u66f4\u6709\u6548\u7387\u3002\u4f8b\u5982\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u6216\u5b89\u88c5ccache\u3002\u53ea\u8981\u547d\u4ee4\u53ef\u4ee5\u627e\u5230\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u6784\u5efa\u7cfb\u7edf\u5c31\u4f1a\u81ea\u52a8\u4f7f\u7528\u5b83\u3002\u7b2c\u4e00\u6b21\u6784\u5efa\u540e\uff0c\u540e\u7eed\u6784\u5efa\u5c06\u5feb\u5f97\u591a\u3002conda install ccacheapt install ccachewhich ccacheccache</p>"},{"location":"inference/vllm/getting_started/%E5%AE%89%E8%A3%85/#python_1","title":"\u4f7f\u7528\u73b0\u6709\u7684 Python \u5b89\u88c5","text":"<p>\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0cPyTorch \u4f9d\u8d56\u9879\u65e0\u6cd5\u8f7b\u677e\u901a\u8fc7 pip \u5b89\u88c5\uff0c\u4f8b\u5982\uff1a</p> <ul> <li> <p>\u4f7f\u7528 PyTorch \u6bcf\u665a\u6216\u81ea\u5b9a\u4e49 PyTorch \u6784\u5efa vLLM\u3002</p> </li> <li> <p>\u4f7f\u7528 aarch64 \u548c CUDA (GH200) \u6784\u5efa vLLM\uff0c\u5176\u4e2d PyTorch \u8f6e\u5b50\u5728 PyPI \u4e0a\u4e0d\u53ef\u7528\u3002\u76ee\u524d\uff0c\u53ea\u6709 PyTorch nightly \u6709\u5e26 CUDA \u7684 aarch64 \u8f6e\u5b50\u3002\u60a8\u53ef\u4ee5\u8fd0\u884c\u5b89\u88c5PyTorch nightly\uff0c\u7136\u540e\u5728\u5176\u57fa\u7840\u4e0a\u6784\u5efa vLLM\u3002<code>pip3 install --pre torch torchvision torchaudio --index-url https://download.pytorch.org/whl/nightly/cu124</code></p> </li> </ul> <p>\u8981\u4f7f\u7528\u73b0\u6709\u7684 PyTorch \u5b89\u88c5\u6784\u5efa vLLM\uff1a Bash<pre><code>git clone https://github.com/vllm-project/vllm.git\ncd vllm\npython use_existing_torch.py\npip install -r requirements-build.txt\npip install -e . --no-build-isolation\n</code></pre></p>"},{"location":"inference/vllm/getting_started/%E5%AE%89%E8%A3%85/#_6","title":"\u68c0\u67e5","text":"<p>\u4e3a\u4e86\u907f\u514d\u7cfb\u7edf\u8fc7\u8f7d\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u73af\u5883\u53d8\u91cf\u6765\u9650\u5236\u540c\u65f6\u8fd0\u884c\u7684\u7f16\u8bd1\u4f5c\u4e1a\u7684\u6570\u91cfMAX_JOBS\u3002\u4f8b\u5982\uff1a</p> Bash<pre><code>export MAX_JOBS=6\npip install -e .\n</code></pre> <p>\u8fd9\u5728\u6027\u80fd\u8f83\u5f31\u7684\u673a\u5668\u4e0a\u6784\u5efa\u65f6\u5c24\u5176\u6709\u7528\u3002\u4f8b\u5982\uff0c\u5f53\u60a8\u4f7f\u7528 WSL \u65f6\uff0c\u5b83\u9ed8\u8ba4\u4ec5\u5206\u914d\u603b\u5185\u5b58\u7684 50%\uff0c\u56e0\u6b64\u4f7f\u7528\u53ef\u4ee5\u907f\u514d\u540c\u65f6\u7f16\u8bd1\u591a\u4e2a\u6587\u4ef6\u5e76\u8017\u5c3d\u5185\u5b58\u3002\u526f\u4f5c\u7528\u662f\u6784\u5efa\u8fc7\u7a0b\u4f1a\u6162\u5f97\u591a\u3002export MAX_JOBS=1</p> <p>\u6b64\u5916\uff0c\u5982\u679c\u60a8\u5728\u6784\u5efa vLLM \u65f6\u9047\u5230\u56f0\u96be\uff0c\u6211\u4eec\u5efa\u8bae\u60a8\u4f7f\u7528 NVIDIA PyTorch Docker \u6620\u50cf\u3002</p> Bash<pre><code># Use --ipc=host to make sure the shared memory is large enough.\ndocker run --gpus all -it --rm --ipc=host nvcr.io/nvidia/pytorch:23.10-py3\n</code></pre> <p>\u5982\u679c\u4e0d\u60f3\u4f7f\u7528docker\uff0c\u5efa\u8bae\u5b8c\u6574\u5b89\u88c5CUDA Toolkit\uff0c\u53ef\u4ee5\u4ece\u5b98\u7f51\u4e0b\u8f7d\u5e76\u5b89\u88c5\uff0c\u5b89\u88c5\u5b8c\u6210\u540e\u8bbe\u7f6e\u73af\u5883\u53d8\u91cfCUDA_HOME\u4e3aCUDA Toolkit\u7684\u5b89\u88c5\u8def\u5f84\uff0c\u5e76\u786e\u4fdd\u7f16\u8bd1nvcc\u5668\u5728\u4f60\u7684\u6587\u4ef6\u5939\u4e2dPATH\uff0c\u4f8b\u5982\uff1a</p> Bash<pre><code>export CUDA_HOME=/usr/local/cuda\nexport PATH=\"${CUDA_HOME}/bin:$PATH\"\n</code></pre> <p>\u4ee5\u4e0b\u662f\u4e00\u4e2a\u5065\u5168\u6027\u68c0\u67e5\uff0c\u4ee5\u9a8c\u8bc1 CUDA \u5de5\u5177\u5305\u662f\u5426\u6b63\u786e\u5b89\u88c5\uff1a Bash<pre><code>nvcc --version # verify that nvcc is in your PATH\n${CUDA_HOME}/bin/nvcc --version # verify that nvcc is in your CUDA_HOME\n</code></pre></p>"},{"location":"inference/vllm/getting_started/%E5%AE%89%E8%A3%85/#_7","title":"\u4e0d\u652f\u6301\u7684\u64cd\u4f5c\u7cfb\u7edf","text":"<p>vLLM \u53ea\u80fd\u5728 Linux \u4e0a\u5b8c\u5168\u8fd0\u884c\uff0c\u4f46\u51fa\u4e8e\u5f00\u53d1\u76ee\u7684\uff0c\u60a8\u4ecd\u7136\u53ef\u4ee5\u5728\u5176\u4ed6\u7cfb\u7edf\uff08\u4f8b\u5982 macOS\uff09\u4e0a\u6784\u5efa\u5b83\uff0c\u4ee5\u4fbf\u5bfc\u5165\u548c\u83b7\u5f97\u66f4\u65b9\u4fbf\u7684\u5f00\u53d1\u73af\u5883\u3002\u4e8c\u8fdb\u5236\u6587\u4ef6\u4e0d\u4f1a\u88ab\u7f16\u8bd1\uff0c\u5e76\u4e14\u65e0\u6cd5\u5728\u975e Linux \u7cfb\u7edf\u4e0a\u8fd0\u884c\u3002</p> <p>\u5728\u5b89\u88c5\u4e4b\u524d\u53ea\u9700\u7981\u7528VLLM_TARGET_DEVICE\u73af\u5883\u53d8\u91cf\uff1a Bash<pre><code>export VLLM_TARGET_DEVICE=empty\npip install -e .\n</code></pre></p>"},{"location":"mkdocs/latex/","title":"mkdocs\u4e2d\u4f7f\u7528LaTex","text":"<p>\u5173\u952e\u8bcd\uff1amkdocs, LaTex, \u6570\u5b66\u516c\u5f0f</p> <p>arithmatex</p> <p>MkDocs \u4f7f\u7528 Python Markdown \u8f6c\u5316 Markdown \u6587\u4ef6\u4e3a HTML \u6587\u6863\u3002Python Markdown \u652f\u6301\u5927\u91cf\u683c\u5f0f\u5316\u9875\u9762\u7684\u6269\u5c55\u3002</p> <p>\u5982\u679c\u9700\u8981\u5728\u9875\u9762\u4e0a\u5c55\u793aLaTex\u6570\u5b66\u516c\u5f0f\uff0c\u53ea\u9700\u8981\u5728mkdocs.yaml\u914d\u7f6e\u4e2d\uff0c\u914d\u7f6e\u63d2\u4ef6\u548cjavascript\u6587\u4ef6\u5373\u53ef\u8f7b\u677e\u5b9e\u73b0\u3002</p>"},{"location":"mkdocs/latex/#_1","title":"\u63d2\u4ef6\u914d\u7f6e","text":"<ul> <li> <p>markdown_extensions YAML<pre><code>markdown_extensions:\n  - pymdownx.arithmatex:\n      generic: true\n</code></pre></p> </li> <li> <p>extra_javascript YAML<pre><code>extra_javascript:\n  - https://polyfill.io/v3/polyfill.min.js?features=es6\n  - https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js\n</code></pre></p> </li> </ul>"},{"location":"mkdocs/syntax/","title":"mkdocs \u8bed\u6cd5\u652f\u6301","text":""},{"location":"mkdocs/syntax/#_1","title":"\u53c2\u8003","text":"<ol> <li>https://jejjohnson.github.io/research_journal/resources/mkdocs/</li> </ol>"},{"location":"onnx/api_proto/","title":"Proto \u7c7b\u578b\u5b9a\u4e49","text":"<p>\u4f5c\u8005: \u718a\u54c8\u54c8</p> <p>\u90ae\u7bb1: 915574300@qq.com</p>"},{"location":"onnx/api_proto/#_1","title":"\u80cc\u666f","text":"<p>\u8fd9\u4e9b\u7ed3\u6784\u5728onnx\u4e2d\u4f7f\u7528 protobuf \u534f\u8bae\u5b9a\u4e49\uff0c\u5728 onnx/*.proto \u6587\u4ef6\u4e2d\u3002\u5efa\u8bae\u4f7f\u7528<code>onnx.helper</code> \u6a21\u5757\u4e2d\u7684\u51fd\u6570\u6765\u521b\u5efa\u5b83\u4eec\uff0c\u800c\u4e0d\u662f\u76f4\u63a5\u5b9e\u4f8b\u5316\u5b83\u4eec\u3002\u6bcf\u4e2a\u7ed3\u6784\u90fd\u53ef\u4ee5\u7528\u51fd\u6570\u6253\u5370print\u5e76\u5448\u73b0\u4e3a json \u5b57\u7b26\u4e32\u3002</p> <p>\u5f53\u6211\u4eec\u52a0\u8f7d\u4e86\u4e00\u4e2aONNX \u6a21\u578b\u4e4b\u540e\uff0c\u6211\u4eec\u83b7\u5f97\u7684\u5c31\u662f\u4e00\u4e2a <code>ModelProto</code>\uff0c\u5b83\u5305\u542b\u4e86\u4e00\u4e9b\u7248\u672c\u4fe1\u606f\uff0c\u751f\u4ea7\u8005\u4fe1\u606f\u548c\u4e00\u4e2a <code>GraphProto</code>\u3002\u5728 <code>GraphProto</code>\u91cc\u9762\u53c8\u5305\u542b\u4e86\u56db\u4e2arepeated\u6570\u7ec4\uff0c\u5b83\u4eec\u5206\u522b\u662f <code>node</code>(<code>NodeProto</code>\u7c7b\u578b)\uff0c<code>input</code>(<code>ValueInfoProto</code>\u7c7b\u578b)\uff0c<code>output</code>(<code>ValueInfoProto</code>\u7c7b\u578b)\u548c<code>initializer</code>(<code>TensorProto</code>\u7c7b\u578b)\uff0c\u5176\u4e2d </p> <ul> <li><code>node</code> \u4e2d\u5b58\u653e\u4e86\u6a21\u578b\u4e2d\u6240\u6709\u7684\u8ba1\u7b97\u8282\u70b9\uff0c</li> <li><code>input</code> \u5b58\u653e\u4e86\u6a21\u578b\u7684\u8f93\u5165\u8282\u70b9\uff0c</li> <li><code>output</code> \u5b58\u653e\u4e86\u6a21\u578b\u4e2d\u6240\u6709\u7684\u8f93\u51fa\u8282\u70b9\uff0c</li> <li><code>initializer</code> \u5b58\u653e\u4e86\u6a21\u578b\u7684\u6240\u6709\u6743\u91cd\u53c2\u6570\u3002</li> </ul> <p>onnx\u6587\u4ef6\u7684\u7ed3\u6784\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p>"},{"location":"onnx/api_proto/#modelproto","title":"ModelProto","text":"<p><code>ModelProto</code> \u8fd9\u4e2a\u7c7b\u8fd9\u5b9a\u4e49\u4e86\u4e00\u4e2aONNX\u6a21\u578b\u3002\u8fd9\u662f\u6bcf\u4e2a\u8f6c\u6362\u5e93\u5728\u8f6c\u6362\u673a\u5668\u5b66\u4e60\u6a21\u578b\u540e\u8fd4\u56de\u7684\u7c7b\u578b\u3002<code>ModelProto</code> \u662f\u4e00\u79cd\u9876\u5c42\u6587\u4ef6/\u5bb9\u5668\u683c\u5f0f\uff0c\u7528\u4e8e\u6784\u5efa ML \u6a21\u578b\u5e76\u5c06\u5176\u8ba1\u7b97\u56fe\u4e0e\u5143\u6570\u636e\u5173\u8054\u8d77\u6765\u3002\u6a21\u578b\u7684\u8bed\u4e49\u7531\u5173\u8054\u7684 <code>GraphProto</code> \u63cf\u8ff0\u3002</p> \u5c5e\u6027 \u7c7b\u578b \u542b\u4e49 doc_string onnx.ModelProto.doc_string domain onnx.ModelProto.domain functions onnx.ModelProto.functions graph onnx.ModelProto.graph ir_version onnx.ModelProto.ir_version metadata_props onnx.ModelProto.metadata_props model_version onnx.ModelProto.model_version opset_import onnx.ModelProto.opset_import producer_name onnx.ModelProto.producer_name producer_version onnx.ModelProto. Producer_version training_info onnx.ModelProto.training_info"},{"location":"onnx/api_proto/#attributeproto","title":"AttributeProto","text":"<p>\u8fd9\u4e2a\u7c7b\u7528\u4e8e\u5b9a\u4e49\u7531 NodeProto \u81ea\u8eab\u5b9a\u4e49\u7684\u7b97\u5b50\u5c5e\u6027\u3002\u5b83\u662f\u4e00\u4e2a\u547d\u540d\u5c5e\u6027\uff0c\u5305\u542b\u5355\u4e2a\u6d6e\u70b9\u6570\u3001\u6574\u6570\u3001\u5b57\u7b26\u4e32\u3001\u56fe\u548c\u5f20\u91cf\u503c\uff0c\u6216\u91cd\u590d\u7684\u6d6e\u70b9\u6570\u3001\u6574\u6570\u3001\u5b57\u7b26\u4e32\u3001\u56fe\u548c\u5f20\u91cf\u503c\u3002<code>AttributeProto</code> \u5fc5\u987b\u5305\u542b \u540d\u79f0 \u5b57\u6bb5\uff0c\u5e76\u4e14\u53ea\u80fd\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\u5b57\u6bb5\u4e4b\u4e00\uff0c\u4ece\u800c\u6709\u6548\u5730\u5f3a\u5236\u6267\u884c C/C++ \u8054\u5408\u7b49\u6548\u9879\u3002</p> \u5c5e\u6027 \u7c7b\u578b \u542b\u4e49 DESCRIPTOR \u6b64\u6d88\u606f\u7c7b\u578b\u7684google.protobuf.descriptor.Descriptor\u3002 doc_string onnx.AttributeProto.doc_string \u53d8\u91cf\u7684\u5907\u6ce8\u8bf4\u660e f onnx.AttributeProto.f floats onnx.AttributeProto.floats g onnx.AttributeProto.g graphs onnx.AttributeProto.graphs i onnx.AttributeProto.i ints onnx.AttributeProto.ints name onnx.AttributeProto.name ref_attr_name onnx.AttributeProto.ref_attr_name s onnx.AttributeProto.s sparse_tensor onnx.AttributeProto.sparse_tensor sparse_tensors onnx.AttributeProto.sparse_tensors strings onnx.AttributeProto.strings t onnx.AttributeProto.t tensors onnx.AttributeProto.tensors tp onnx.AttributeProto.tp type onnx.AttributeProto.type type_protos onnx.AttributeProto.type_protos"},{"location":"onnx/api_proto/#functionproto","title":"FunctionProto","text":"<p>\u8fd9\u5b9a\u4e49\u4e86\u4e00\u4e2a\u51fd\u6570\u3002\u5b83\u4e0d\u662f\u6a21\u578b\uff0c\u4f46\u53ef\u7528\u4e8e\u5b9a\u4e49\u6a21\u578b\u4e2d\u4f7f\u7528\u7684\u81ea\u5b9a\u4e49\u8fd0\u7b97\u7b26\u3002</p> \u5c5e\u6027 \u7c7b\u578b \u542b\u4e49 DESCRIPTOR attribute onnx.FunctionProto.attribute attribute_proto onnx.FunctionProto.attribute_proto doc_string onnx.FunctionProto.doc_string domain onnx.FunctionProto.domain input onnx.FunctionProto.input metadata_props onnx.FunctionProto.metadata_props name onnx.FunctionProto.name node onnx.FunctionProto.node opset_import onnx.FunctionProto.opset_import output onnx.FunctionProto.output overload onnx.FunctionProto.overload value_info onnx.FunctionProto.value_info"},{"location":"onnx/api_proto/#graphproto","title":"GraphProto","text":"<p>\u8fd9\u5b9a\u4e49\u4e86\u4e00\u4e2a\u56fe\u6216\u4e00\u7ec4\u4ece\u5faa\u73af\u6216\u6d4b\u8bd5\u4e2d\u8c03\u7528\u7684\u8282\u70b9\u3002\u56fe\u5b9a\u4e49\u4e86\u6a21\u578b\u7684\u8ba1\u7b97\u903b\u8f91\uff0c\u7531\u53c2\u6570\u5316\u7684\u8282\u70b9\u5217\u8868\u7ec4\u6210\uff0c\u8fd9\u4e9b\u8282\u70b9\u6839\u636e\u5176\u8f93\u5165\u548c\u8f93\u51fa\u5f62\u6210\u6709\u5411\u65e0\u73af\u56fe DAG\u3002\u8fd9\u76f8\u5f53\u4e8e\u8bb8\u591a\u6df1\u5ea6\u5b66\u4e60\u6846\u67b6\u4e2d\u7684 \u7f51\u7edc \u6216 \u56fe\u3002</p> \u5c5e\u6027 \u7c7b\u578b \u542b\u4e49 DESCRIPTOR doc_string onnx.GraphProto.doc_string initializer onnx.GraphProto.initializer input onnx.GraphProto.input metadata_props onnx.GraphProto.metadata_props name onnx.GraphProto.name node onnx.GraphProto.node output onnx.GraphProto.output quantization_annotation onnx.GraphProto.quantization_annotation sparse_initializer onnx.GraphProto.sparse_initializer value_info onnx.GraphProto.value_info"},{"location":"onnx/api_proto/#mapproto","title":"MapProto","text":"<p>\u8fd9\u5b9a\u4e49\u4e86\u4e00\u4e2a\u6620\u5c04\u6216\u5b57\u5178\u3002\u5b83\u6307\u5b9a\u4e00\u4e2a\u7531\u952e\u548c\u503c\u5b9a\u4e49\u7684\u5173\u8054\u8868\u3002MapProto \u7531\u4e00\u4e2a\u91cd\u590d\u7684\u952e\u5b57\u6bb5\uff08\u7c7b\u578b\u4e3a INT8\u3001INT16\u3001INT32\u3001INT64\u3001UINT8\u3001UINT16\u3001UINT32\u3001UINT64 \u6216 STRING\uff09\u548c\u503c\uff08\u7c7b\u578b\u4e3a TENSOR\u3001SPARSE_TENSOR\u3001SEQUENCE \u6216 MAP\uff09\u7ec4\u6210\u3002\u952e\u7c7b\u578b\u548c\u503c\u7c7b\u578b\u5728 MapProto \u7684\u6574\u4e2a\u5b9e\u4f8b\u5316\u8fc7\u7a0b\u4e2d\u5fc5\u987b\u4fdd\u6301\u4e0d\u53d8\u3002</p> \u5c5e\u6027 \u7c7b\u578b \u542b\u4e49 DESCRIPTOR key_type onnx.MapProto.key_type keys onnx.MapProto.keys name onnx.MapProto.name string_keys onnx.MapProto.string_keys values onnx.MapProto.values"},{"location":"onnx/api_proto/#nodeproto","title":"NodeProto","text":"<p>\u8fd9\u5b9a\u4e49\u4e86\u4e00\u4e2a\u7b97\u5b50\u3002\u6a21\u578b\u662f\u6570\u5b66\u51fd\u6570\u7684\u7ec4\u5408\uff0c\u6bcf\u4e2a\u51fd\u6570\u90fd\u8868\u793a\u4e3a onnx \u7b97\u5b50\uff0c\u5b58\u50a8\u5728 NodeProto \u4e2d\u3002\u8ba1\u7b97\u56fe\u7531\u8282\u70b9\u7684 DAG \u7ec4\u6210\uff0c\u8fd9\u4e9b\u8282\u70b9\u8868\u793a\u673a\u5668\u5b66\u4e60\u6846\u67b6\u4e2d\u901a\u5e38\u79f0\u4e3a\u5c42\u6216\u7ba1\u9053\u9636\u6bb5\u7684\u5185\u5bb9\u3002\u4f8b\u5982\uff0c\u5b83\u53ef\u4ee5\u662fConv\u7c7b\u578b\u7684\u8282\u70b9\uff0c\u5b83\u63a5\u6536\u56fe\u50cf\u3001\u8fc7\u6ee4\u5668\u5f20\u91cf\u548c\u504f\u5dee\u5f20\u91cf\uff0c\u5e76\u4ea7\u751f\u5377\u79ef\u8f93\u51fa\u3002</p> \u5c5e\u6027 \u7c7b\u578b \u542b\u4e49 DESCRIPTOR attribute onnx.NodeProto.attribute doc_string onnx.NodeProto.doc_string domain onnx.NodeProto.domain input onnx.NodeProto.input metadata_props onnx.NodeProto.metadata_props name onnx.NodeProto.name op_type onnx.NodeProto.op_type output onnx.NodeProto.output overload onnx.NodeProto.overload"},{"location":"onnx/api_proto/#operatorproto","title":"OperatorProto","text":"<p>\u7528\u6237\u5f88\u5c11\u4f7f\u7528\u6b64\u7c7b\u3002OperatorProto \u8868\u793a\u7b97\u5b50\u7b7e\u540d\u548c\u8bed\u4e49\u7684\u4e0d\u53ef\u53d8\u89c4\u8303\u3002\u7b97\u5b50\u88ab\u58f0\u660e\u4e3a OperatorSet \u7684\u4e00\u90e8\u5206\uff0c\u5b83\u8fd8\u5b9a\u4e49\u4e86\u96c6\u5408\u7684\u57df\u540d\u3002\u8fd0\u7b97\u7b26\u7531\u4e09\u90e8\u5206\u6807\u8bc6\u7b26\uff08domain\u3001op_type\u3001since_version\uff09\u552f\u4e00\u6807\u8bc6\uff0c\u5176\u4e2d</p> <ul> <li> <p>domain: \u662f\u5305\u542b\u6b64\u7b97\u5b50\u89c4\u8303\u7684\u7b97\u5b50\u96c6\u7684\u57df\u3002</p> </li> <li> <p>op_type: \u662f NodeProto.op_type \u5f15\u7528\u7684\u7b97\u5b50\u7684\u540d\u79f0</p> </li> <li> <p>since_version: \u662f\u6b64\u7b97\u5b50\u6700\u521d\u58f0\u660e\u7684\u7b97\u5b50\u96c6\u7684\u7248\u672c\u3002</p> </li> </ul> \u5c5e\u6027 \u7c7b\u578b \u542b\u4e49 DESCRIPTOR doc_string onnx.OperatorProto.doc_string op_type onnx.OperatorProto.op_type since_version onnx.OperatorProto.since_version status onnx.OperatorProto.status"},{"location":"onnx/api_proto/#operatorsetidproto","title":"OperatorSetIdProto","text":"<p>\u8fd9\u662f ModelProto \u7c7b\u7684\u5c5e\u6027\u7c7b\u578bopset_import\u3002\u6b64\u5c5e\u6027\u6307\u5b9a\u6a21\u578b\u4e2d\u4f7f\u7528\u7684\u8fd0\u7b97\u7b26\u7684\u7248\u672c\u3002\u6bcf\u4e2a\u8fd0\u7b97\u7b26\u6216\u8282\u70b9\u90fd\u5c5e\u4e8e\u4e00\u4e2a\u57df\u3002\u540c\u4e00\u57df\u7684\u6240\u6709\u8fd0\u7b97\u7b26\u5171\u4eab\u540c\u4e00\u7248\u672c\u3002</p> \u5c5e\u6027 \u7c7b\u578b \u542b\u4e49 DESCRIPTOR domain onnx.OperatorSetIdProto.domain version onnx.OperatorSetIdProto.version"},{"location":"onnx/api_proto/#operatorsetproto","title":"OperatorSetProto","text":"<p>OperatorSetProto \u8868\u793a\u4e00\u7ec4\u4e0d\u53ef\u53d8\u7684\u4e0d\u53ef\u53d8\u7b97\u5b50\u89c4\u8303\u3002\u8be5\u96c6\u5408\u7684\u57df (OperatorSetProto.domain) \u662f\u4e00\u4e2a\u53cd\u5411 DNS \u540d\u79f0\uff0c\u7528\u4e8e\u6d88\u9664\u7531\u72ec\u7acb\u5b9e\u4f53\u5b9a\u4e49\u7684\u7b97\u5b50\u7684\u6b67\u4e49\u3002\u8be5\u96c6\u5408\u7684\u7248\u672c (opset_version) \u662f\u4e00\u4e2a\u5355\u8c03\u9012\u589e\u7684\u6574\u6570\uff0c\u8868\u793a\u5bf9\u7b97\u5b50\u96c6\u6210\u5458\u8d44\u683c\u7684\u66f4\u6539\u3002\u7b97\u5b50\u96c6\u7531\u4e24\u90e8\u5206\u6807\u8bc6\u7b26 (domain\u3001opset_version) \u552f\u4e00\u6807\u8bc6\u3002\u4e0e ModelProto \u4e00\u6837\uff0cOperatorSetProto \u65e8\u5728\u7528\u4f5c\u9876\u7ea7\u6587\u4ef6/\u7ebf\u8def\u683c\u5f0f\uff0c\u56e0\u6b64\u9664\u4e86\u7b97\u5b50\u96c6\u4fe1\u606f\u5916\uff0c\u8fd8\u5177\u6709\u6807\u51c6\u683c\u5f0f\u6807\u5934\u3002</p> \u5c5e\u6027 \u7c7b\u578b \u542b\u4e49 DESCRIPTOR doc_string onnx.OperatorSetProto.doc_string domain onnx.OperatorSetProto.domain functions onnx.OperatorSetProto.functions ir_build_metadata onnx.OperatorSetProto.ir_build_metadata ir_version onnx.OperatorSetProto.ir_version ir_version_prerelease onnx.OperatorSetProto.ir_version_prerelease magic onnx.OperatorSetProto.magic <p>|operator| onnx.OperatorSetProto.operator||</p> <p>|opset_version| onnx.OperatorSetProto.opset_version||</p>"},{"location":"onnx/api_proto/#_2","title":"\u53c2\u8003\uff1a","text":"<ol> <li>https://zhuanlan.zhihu.com/p/346511883</li> <li>https://www.cnblogs.com/silence-cho/p/17673812.html</li> <li>https://github.com/open-mmlab/mmdeploy/blob/main/docs/zh_cn/tutorial/05_onnx_model_editing.md</li> <li>https://www.cnblogs.com/vh-pg/p/11736174.html</li> <li>https://tvm-book.readthedocs.io/zh/latest/tutorials/frontend/onnxscript/square-loss.html</li> <li>https://blog.csdn.net/zt1091574181/article/details/126299266</li> </ol>"},{"location":"onnx/introduction/","title":"ONNX \u6982\u5ff5","text":"<p>\u4f5c\u8005: \u718a\u54c8\u54c8</p> <p>\u90ae\u7bb1: 915574300@qq.com</p> <p>ONNX \u53ef\u4ee5\u6bd4\u4f5c\u4e00\u79cd\u4e13\u95e8\u7528\u4e8e\u6570\u5b66\u51fd\u6570\u7684\u7f16\u7a0b\u8bed\u8a00\u3002\u5b83\u5b9a\u4e49\u4e86\u673a\u5668\u5b66\u4e60\u6a21\u578b\u4f7f\u7528\u8be5\u8bed\u8a00(\u6307ONNX)\u5b9e\u73b0\u6a21\u578b\u63a8\u7406\u529f\u80fd\u6240\u9700\u7684\u6240\u6709\u5fc5\u8981\u8fd0\u7b97\u6216\u8005\u79f0\u4e3a\u7b97\u5b50\u3002\u4e00\u4e2a\u7ebf\u6027\u56de\u5f52\u7684\u6a21\u578b\u53ef\u4ee5\u7528\u4ee5\u4e0b\u65b9\u5f0f\u8868\u793a\uff1a</p> <p>\u718a\u54c8\u54c8\u6ce8</p> <p>ONNX (\u5927\u5199)\u8868\u793a\u63cf\u8ff0\u6a21\u578b\u7684\u6807\u51c6</p> <p>onnx (\u5c0f\u5199) ONNX \u6807\u51c6\u7684\u4e00\u79cdpython\u5b9e\u73b0\u65b9\u5f0f\uff0c\u662f\u5b9e\u73b0 ONNX \u7684\u4e00\u4e2a python \u5305</p> Python<pre><code>def onnx_linear_regressor(X):\n    \"ONNX code for a linear regression\"\n    return onnx.Add(onnx.MatMul(X, coefficients), bias)\n</code></pre> <p>\u718a\u54c8\u54c8\u6ce8</p> <p>\u4e0a\u9762\u7ebf\u6027\u56de\u5f52\u6a21\u578b\u7684\u6570\u5b66\u6a21\u578b\u5982\u4e0b\uff1a $$ y = X * A + B $$</p> <p>\u8fd9\u4e2a\u793a\u4f8b\u4e0e\u5f00\u53d1\u4eba\u5458\u7528 <code>Python</code> \u7f16\u5199\u7684\u8868\u8fbe\u5f0f\u975e\u5e38\u76f8\u4f3c\u3002\u5b83\u4e5f\u53ef\u4ee5\u8868\u793a\u4e3a\u4e00\u4e2a\u8ba1\u7b97\u56fe\uff0c\u901a\u8fc7\u8ba1\u7b97\u56fe\u9010\u6b65\u5c55\u793a\u7ebf\u6027\u6a21\u578b\u5982\u4f55\u8f6c\u6362\u7279\u5f81\uff0c\u6700\u540e\u83b7\u5f97\u9884\u6d4b\u7684\u7ed3\u679c\u3002\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u4f7f\u7528 ONNX \u5b9e\u73b0\u7684\u673a\u5668\u5b66\u4e60\u6a21\u578b\u901a\u5e38\u88ab\u79f0\u4e3a ONNX \u56fe\u7684\u539f\u56e0\u3002</p> <p></p> <p>ONNX \u65e8\u5728\u63d0\u4f9b\u4e00\u79cd\u4efb\u4f55\u673a\u5668\u5b66\u4e60\u6846\u67b6\u90fd\u53ef\u4ee5\u7528\u5176\u6765\u63cf\u8ff0\u6a21\u578b\u7684\u901a\u7528\u8bed\u8a00\u3002\u7b2c\u4e00\u4e2a\u573a\u666f\u662f\u8ba9\u5f00\u53d1\u8005\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u90e8\u7f72\u673a\u5668\u5b66\u4e60\u6a21\u578b\u53d8\u5f97\u66f4\u52a0\u5bb9\u6613\u3002\u53ef\u4ee5\u5728\u90e8\u7f72\u8be5\u6a21\u578b\u7684\u73af\u5883\u4e2d\uff0c\u4f7f\u7528\u4e13\u95e8\u5b9e\u73b0\u548c\u4f18\u5316\u7684 ONNX \u6a21\u578b\u89e3\u91ca\u5668\uff08\u6216\u8fd0\u884c\u65f6\u5e93\uff09\u4ee5\u5b8c\u6210\u6b64\u4efb\u52a1\u3002\u501f\u52a9 ONNX\uff0c\u53ef\u4ee5\u6784\u5efa\u4e00\u4e2a\u72ec\u7279\u7684\u6d41\u7a0b\u5728\u751f\u4ea7\u4e2d\u90e8\u7f72\u6a21\u578b\uff0c\u5e76\u4e14\u90e8\u7f72\u6846\u67b6\u53ef\u4ee5\u72ec\u7acb\u4e8e\u7528\u4e8e\u6784\u5efa\u6a21\u578b\u7684\u5b66\u4e60\u6846\u67b6\u3002 python \u7684 <code>onnx</code> \u5e93\u5b9e\u73b0\u4e86\u4e00\u4e2a\u8fd0\u884c\u65f6\u5e93\uff0c\u53ef\u7528\u4e8e\u8bc4\u4f30 ONNX \u6a21\u578b\u4ee5\u53ca\u8bc4\u4f30 ONNX \u7b97\u5b50\u3002 <code>onnx</code> \u7528\u6765\u5728\u9610\u660e ONNX \u7684\u8bed\u4e49\u5e76\u5e2e\u52a9\u7406\u89e3\u548c\u8c03\u8bd5 ONNX \u5de5\u5177\u548c\u8f6c\u6362\u5668\u3002<code>onnx</code> \u4e0d\u9002\u7528\u4e8e\u751f\u4ea7\u73af\u5883\uff0c\u8fd0\u884c\u7684\u6027\u80fd\u4e5f\u4e0d\u662f <code>onnx</code> \u7684\u76ee\u6807\uff08\u53c2\u89c1onnx.reference\uff09\u3002</p>"},{"location":"onnx/introduction/#_1","title":"\u8f93\u5165\u3001\u8f93\u51fa\u3001\u8282\u70b9\u3001\u521d\u59cb\u5316\u5668\u3001\u5c5e\u6027","text":"<p>\u6784\u5efa ONNX \u8ba1\u7b97\u56fe\u610f\u5473\u7740\u4f7f\u7528 ONNX \u8bed\u8a00\u6216\u66f4\u51c6\u786e\u5730\u8bf4\u662f ONNX \u7b97\u5b50\u6765\u5b9e\u73b0\u51fd\u6570\u3002\u7ebf\u6027\u56de\u5f52\u53ef\u4ee5\u4f7f\u7528\u4e0b\u8ff0\u7684\u65b9\u5f0f\u5199\u3002\u4ee5\u4e0b\u51e0\u884c\u4ee3\u7801\u4e0d\u9075\u5faa Python \u8bed\u6cd5\u3002\u5b83\u53ea\u662f\u4e00\u79cd\u7528\u4e8e\u8bf4\u660e\u6a21\u578b\u7684\u4f2a\u4ee3\u7801\u3002</p> Python<pre><code>Input: float[M,K] x, float[K,N] a, float[N] c\nOutput: float[M, N] y\n\nr = onnx.MatMul(x, a)\ny = onnx.Add(r, c)\n</code></pre> <p>\u4e0a\u8ff0\u7684\u4ee3\u7801\u5b9e\u73b0\u4e86\u4e00\u4e2a\u51fd\u6570 \\(f(x, a, c) -&gt; y = x @ a + c\\)\u3002\u5176\u4e2d <code>x</code>\u3001<code>a</code>\u3001<code>c</code>\u662f\u8f93\u5165\uff0c\\(y\\) \u662f\u8f93\u51fa\u3002\\(r\\) \u662f\u4e2d\u95f4\u7ed3\u679c\u3002 <code>MatMul</code> \u548c <code>Add</code> \u662f\u8282\u70b9\u3002\u5b83\u4eec\u4e5f\u6709\u8f93\u5165\u548c\u8f93\u51fa\u3002\u8282\u70b9\u8fd8\u6709\u7c7b\u578b\u3002\u4e0a\u56fe\u662f\u6839\u636e\u7b2c 1 \u8282\u4e2d\u7684\u3010\u4e00\u4e2a\u7b80\u5355\u793a\u4f8b\uff1a\u7ebf\u6027\u56de\u5f52\u3011\u6784\u5efa\u7684\u8ba1\u7b97\u56fe\u3002</p> <p>\u4e0a\u9762\u7684\u8ba1\u7b97\u56fe\u4e5f\u53ef\u4ee5\u6709\u4e00\u4e2a\u521d\u59cb\u5316\u5668\u3002\u5f53\u67d0\u4e00\u4e2a\u8f93\u5165\u8282\u70b9\u6c38\u8fdc\u4e0d\u4f1a\u6539\u53d8\u65f6\uff08\u4f8b\u5982\u7ebf\u6027\u56de\u5f52\u7684\u7cfb\u6570\uff09\uff0c\u5c06\u5176\u8f6c\u6362\u4e3a\u8ba1\u7b97\u56fe\u4e2d\u7684\u5e38\u91cf\u8282\u70b9\u662f\u6700\u6709\u6548\u7684\u3002</p> Python<pre><code>Input: float[M,K] x\nInitializer: float[K,N] a, float[N] c\nOutput: float[M, N] xac\n\nxa = onnx.MatMul(x, a)\nxac = onnx.Add(xa, c)\n</code></pre> <p>\u4ece\u89c6\u89c9\u4e0a\u770b\uff0c\u4e0a\u8ff0\u7684\u4f2a\u4ee3\u7801\u5bf9\u5e94\u7684\u8ba1\u7b97\u56fe\u5982\u4e0b\u56fe\u6240\u793a\u3002\u8ba1\u7b97\u56fe\u4e2d\u7684\u53f3\u4fa7\u63cf\u8ff0\u4e86 \u7b97\u5b50 <code>Add</code>\uff0c\u5176\u4e2d\u7b2c\u4e8c\u4e2a\u8f93\u5165\u5b9a\u4e49\u4e3a\u521d\u59cb\u5316\u5668\u3002\u8be5\u56fe\u662f\u4f7f\u7528\u6b64\u4ee3\u7801\u521d\u59cb\u5316\u5668\uff0c\u9ed8\u8ba4\u503c\u83b7\u5f97\u7684\u3002</p> <p></p> <p>\u5c5e\u6027\u662f\u7b97\u5b50\u7684\u56fa\u5b9a\u53c2\u6570\u3002 <code>Gemm</code> \u7b97\u5b50\u6709\u56db\u4e2a\u5c5e\u6027\uff0c<code>alpha</code>\u3001<code>beta</code>\u3001<code>transA</code>\u3001<code>transB</code>\u3002\u8fd0\u884c\u65f6\u5e93\u4e00\u65e6\u52a0\u8f7d\u4e86 ONNX \u56fe\uff0c\u8fd9\u4e9b\u503c\u5c31\u65e0\u6cd5\u66f4\u6539\uff0c\u5e76\u4e14\u5bf9\u4e8e\u6240\u6709\u9884\u6d4b\u8fc7\u7a0b\u90fd\u4fdd\u6301\u4e0d\u53d8\u3002</p>"},{"location":"onnx/introduction/#protobuf","title":"\u4f7f\u7528 protobuf \u8fdb\u884c\u5e8f\u5217\u5316","text":"<p>\u5c06\u673a\u5668\u5b66\u4e60\u6a21\u578b\u90e8\u7f72\u5230\u751f\u4ea7\u4e2d\u901a\u5e38\u9700\u8981\u590d\u5236\u7528\u4e8e\u8bad\u7ec3\u6a21\u578b\u7684\u6574\u4e2a\u751f\u6001\u7cfb\u7edf\uff0c\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u4f7f\u7528 docker \u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002\u5c06\u6a21\u578b\u8f6c\u6362\u4e3a ONNX \u540e\uff0c\u751f\u4ea7\u73af\u5883\u53ea\u9700\u8981\u8fd0\u884c\u65f6\u6765\u6267\u884c\u4f7f\u7528 ONNX \u7b97\u5b50\u5b9a\u4e49\u7684\u8ba1\u7b97\u56fe\u3002\u8fd0\u884c\u65f6\u53ef\u4ee5\u4f7f\u7528\u4efb\u4f55\u9002\u5408\u751f\u4ea7\u73af\u5883\u4e0b\u5e94\u7528\u7a0b\u5e8f\u7684\u7f16\u7a0b\u8bed\u8a00\u5f00\u53d1\uff0cC\u3001java\u3001python\u3001javascript\u3001C#\u3001Webassembly\u3001ARM.....\u3002</p> <p>\u4f46\u8981\u5b9e\u73b0\u8fd9\u4e00\u70b9\uff0c\u9700\u8981\u4fdd\u5b58 ONNX \u8ba1\u7b97\u56fe\u3002ONNX \u4f7f\u7528 protobuf \u5c06\u8ba1\u7b97\u56fe\u5e8f\u5217\u5316\u4e3a\u4e00\u6574\u4e2a\u6a21\u5757\uff08\u53c2\u89c1\u89e3\u6790\u548c\u5e8f\u5217\u5316\uff09\u3002\u8fd9\u6837\u505a\u7684\u76ee\u7684\u662f\u5728\u5c3d\u53ef\u80fd\u4f18\u5316\u6a21\u578b\u5927\u5c0f\u3002</p>"},{"location":"onnx/introduction/#_2","title":"\u5143\u6570\u636e","text":"<p>\u673a\u5668\u5b66\u4e60\u6a21\u578b\u4e0d\u65ad\u66f4\u65b0\u3002\u8ddf\u8e2a\u6a21\u578b\u7248\u672c\u3001\u6a21\u578b\u4f5c\u8005\u4ee5\u53ca\u6a21\u578b\u7684\u8bad\u7ec3\u65b9\u5f0f\u975e\u5e38\u91cd\u8981\u3002ONNX \u63d0\u4f9b\u4e86\u5728\u6a21\u578b\u672c\u8eab\u4e2d\u5b58\u50a8\u989d\u5916\u6570\u636e\u7684\u53ef\u80fd\u6027\u3002</p> <ul> <li> <p>doc_string\uff1a\u5f53\u524d\u6a21\u578b\u7684\u4eba\u7c7b\u53ef\u8bfb\u6587\u6863\u3002\u5141\u8bb8 Markdown \u683c\u5f0f\u3002</p> </li> <li> <p>domain\uff1a\u7528\u4e8e\u8868\u793a\u6a21\u578b\u547d\u540d\u7a7a\u95f4\u6216\u57df\u7684\u53cd\u5411 DNS \u540d\u79f0\uff0c\u4f8b\u5982\uff0c\u201corg.onnx\u201d</p> </li> <li> <p>metadata_props\uff1a\u5c06\u5143\u6570\u636e\u547d\u540d\u4e3a\u5b57\u5178 <code>map&lt;string,string&gt;</code> \uff0c <code>(values, keys)</code> \u5e94\u8be5\u662f\u4e0d\u540c\u7684\u3002</p> </li> <li> <p>model_author\uff1a\u4ee5\u9017\u53f7\u5206\u9694\u7684\u540d\u79f0\u5217\u8868\uff0c\u6a21\u578b\u4f5c\u8005\u7684\u4e2a\u4eba\u59d3\u540d\u548c/\u6216\u5176\u7ec4\u7ec7\u3002</p> </li> <li> <p>model_license\uff1a\u8bb8\u53ef\u8bc1\u7684\u77e5\u540d\u540d\u79f0\u6216 URL\uff0c\u8be5\u6a21\u578b\u53ef\u4f9b\u4f7f\u7528\u3002</p> </li> <li> <p>model_version\uff1a\u6a21\u578b\u672c\u8eab\u7684\u7248\u672c\uff0c\u4ee5\u6574\u6570\u7f16\u7801\u3002</p> </li> <li> <p>production_name\uff1a\u7528\u4e8e\u751f\u6210\u6a21\u578b\u7684\u5de5\u5177\u540d\u79f0\u3002</p> </li> <li> <p>production_version\uff1a\u751f\u6210\u5de5\u5177\u7684\u7248\u672c\u3002</p> </li> <li> <p>training_info\uff1a\u5305\u542b\u7684\u53ef\u9009\u6269\u5c55\u8bad\u7ec3\u4fe1\u606f\uff08\u53c2\u89c1TrainingInfoProto\uff09</p> </li> </ul>"},{"location":"onnx/introduction/#_3","title":"\u53ef\u7528\u7b97\u5b50\u548c\u57df\u7684\u5217\u8868","text":"<p>\u7b97\u5b50\u4e3b\u8981\u5217\u8868\u5728\u4e0b\u9762\u7684\u94fe\u63a5\u4e2d\uff1aONNX \u8fd0\u7b97\u7b26\u3002ONNX \u878d\u5408\u4e86\u6807\u51c6\u77e9\u9635\u8fd0\u7b97\u7b26\uff08<code>Add</code>\u3001<code>Sub</code>\u3001<code>MatMul</code>\u3001<code>Transpose</code>\u3001<code>Greater</code>\u3001<code>IsNaN</code>\u3001<code>Shape</code>\u3001<code>Reshape</code> ...\uff09\u3001\u7f29\u51cf\uff08<code>ReduceSum</code>\u3001<code>ReduceMin</code>\u3001...\uff09\u56fe\u50cf\u8f6c\u6362\uff08<code>Conv</code>\u3001<code>MaxPool</code>\u3001...\uff09\u3001\u6df1\u5ea6\u795e\u7ecf\u7f51\u7edc\u5c42\uff08<code>RNN</code>\u3001<code>DropOut</code>\u3001...\uff09\u3001\u6fc0\u6d3b\u51fd\u6570\uff08<code>Relu</code>\u3001<code>Softmax</code>\u3001...\uff09\u3002</p> <p>ONNX \u6db5\u76d6\u4e86\u6df1\u5ea6\u673a\u5668\u5b66\u4e60\u63a8\u7406\u529f\u80fd\u6240\u9700\u7684\u5927\u591a\u6570\u7b97\u5b50\u3002ONNX \u5e76\u672a\u5b9e\u73b0\u6240\u6709\u73b0\u6709\u7684\u673a\u5668\u5b66\u4e60\u7b97\u5b50\uff0c\u7b97\u5b50\u5217\u8868\u662f\u65e0\u9650\u7684\u3002</p> <p>\u4e3b\u8981\u7b97\u5b50\u5217\u8868\u7528\u57df <code>ai.onnx</code> \u6807\u8bc6\u3002\u57df \u53ef\u4ee5\u5b9a\u4e49\u4e3a\u4e00\u7ec4\u8fd0\u7b97\u7b26\u3002\u6b64\u5217\u8868\u4e2d\u7684\u4e00\u4e9b\u7b97\u5b50\u4e13\u7528\u4e8e\u6587\u672c\u6655\u7729\uff0c\u4f46\u5b83\u4eec\u51e0\u4e4e\u65e0\u6cd5\u6ee1\u8db3\u9700\u6c42\u3002\u4e3b\u5217\u8868\u8fd8\u7f3a\u5c11\u5728\u6807\u51c6\u673a\u5668\u5b66\u4e60\u4e2d\u975e\u5e38\u6d41\u884c\u7684\u57fa\u4e8e\u6811\u7684\u6a21\u578b\u3002\u8fd9\u4e9b\u662f\u53e6\u4e00\u4e2a\u57df <code>ai.onnx.ml</code> \u7684\u4e00\u90e8\u5206\uff0c\u5b83\u5305\u62ec\u57fa\u4e8e\u6811\u7684\u6a21\u578b\uff08<code>TreeEnsemble Regressor</code>\uff0c...\uff09\u3001\u9884\u5904\u7406\uff08<code>OneHotEncoder</code>\u3001<code>LabelEncoder</code>\uff0c...\uff09\u3001SVM \u6a21\u578b\uff08<code>SVMRegressor</code>\uff0c...\uff09\u3001\u8f93\u5165\u5668\uff08<code>Imputer</code>\uff09\u3002</p> <p>ONNX \u4ec5\u5b9a\u4e49\u4e86\u8fd9\u4e24\u4e2a\u57df\u3002\u4f46\u662f <code>onnx</code> \u5e93\u652f\u6301\u4efb\u4f55\u81ea\u5b9a\u4e49\u57df\u548c\u7b97\u5b50\uff08\u8bf7\u53c2\u9605\u53ef\u6269\u5c55\u6027\uff09\u3002</p>"},{"location":"onnx/introduction/#_4","title":"\u652f\u6301\u7684\u7c7b\u578b","text":"<p>ONNX \u89c4\u8303\u9488\u5bf9\u4f7f\u7528\u5f20\u91cf\u7684\u6570\u503c\u8ba1\u7b97\u8fdb\u884c\u4e86\u4f18\u5316\u3002\u5f20\u91cf\u662f\u4e00\u4e2a\u591a\u7ef4\u6570\u7ec4\u3002\u5b83\u7684\u5b9a\u4e49\u5982\u4e0b\uff1a</p> <ul> <li> <p>\u6570\u636e\u7c7b\u578btype\uff1a\u5f20\u91cf\u4e2d\u5143\u7d20\u7c7b\u578b\uff0c\u5f20\u91cf\u4e2d\u7684\u6240\u6709\u5143\u7d20\u90fd\u76f8\u540c</p> </li> <li> <p>\u5f20\u91cf\u5f62\u72b6shape\uff1a\u4e00\u4e2a\u5305\u542b\u6240\u6709\u7ef4\u5ea6\u7684\u6570\u7ec4\uff0c\u6b64\u6570\u7ec4\u53ef\u4ee5\u4e3a\u7a7a\uff0c\u7ef4\u5ea6\u53ef\u4ee5\u4e3a\u7a7a</p> </li> <li> <p>\u4e00\u4e2a\u8fde\u7eed\u7684\u6570\u7ec4array\uff1a\u6570\u7ec4\u5b58\u50a8\u4e86\u5f20\u91cf\u6240\u6709\u7684\u503c</p> </li> </ul> <p>\u4e0a\u8ff0\u5b9a\u4e49\u4e0d\u5305\u62ec\u6b65\u5e45 <code>strides</code> \u6216\u57fa\u4e8e\u73b0\u6709\u5f20\u91cf\u5b9a\u4e49\u5f20\u91cf\u53ef\u89c6\u5316\u7684\u5c5e\u6027\u3002ONNX \u5f20\u91cf\u662f\u6ca1\u6709\u6b65\u5e45\u7684\u5bc6\u96c6\u6570\u7ec4\u3002</p>"},{"location":"onnx/introduction/#_5","title":"\u5143\u7d20\u7c7b\u578b","text":"<p>ONNX \u6700\u521d\u662f\u4e3a\u4e86\u5e2e\u52a9\u90e8\u7f72\u6df1\u5ea6\u5b66\u4e60\u6a21\u578b\u800c\u5f00\u53d1\u7684\u3002\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u89c4\u8303\u6700\u521d\u662f\u4e3a\u6d6e\u70b9\u6570\uff0832 \u4f4d\uff09\u8bbe\u8ba1\u7684\u3002\u5f53\u524d\u7248\u672c\u652f\u6301\u6240\u6709\u5e38\u89c1\u7c7b\u578b\u3002\u5b57\u5178 <code>TENSOR_TYPE_MAP</code> \u7ed9\u51fa\u4e86 ONNX \u548c numpy \u4e4b\u95f4\u7684\u5bf9\u5e94\u5173\u7cfb\u3002</p> Python<pre><code>import re\nfrom onnx import TensorProto\n\nreg = re.compile('^[0-9A-Z_]+$')\n\nvalues = {}\nfor att in sorted(dir(TensorProto)):\n    if att in {'DESCRIPTOR'}:\n        continue\n    if reg.match(att):\n        values[getattr(TensorProto, att)] = att\nfor i, att in sorted(values.items()):\n    si = str(i)\n    if len(si) == 1:\n        si = \" \" + si\n    print(\"%s: onnx.TensorProto.%s\" % (si, att))\n</code></pre> Bash<pre><code> 0: onnx.TensorProto.UNDEFINED\n 1: onnx.TensorProto.FLOAT\n 2: onnx.TensorProto.UINT8\n 3: onnx.TensorProto.INT8\n 4: onnx.TensorProto.UINT16\n 5: onnx.TensorProto.INT16\n 6: onnx.TensorProto.INT32\n 7: onnx.TensorProto.INT64\n 8: onnx.TensorProto.STRING\n 9: onnx.TensorProto.BOOL\n10: onnx.TensorProto.FLOAT16\n11: onnx.TensorProto.DOUBLE\n12: onnx.TensorProto.UINT32\n13: onnx.TensorProto.UINT64\n14: onnx.TensorProto.COMPLEX64\n15: onnx.TensorProto.COMPLEX128\n16: onnx.TensorProto.BFLOAT16\n17: onnx.TensorProto.FLOAT8E4M3FN\n18: onnx.TensorProto.FLOAT8E4M3FNUZ\n19: onnx.TensorProto.FLOAT8E5M2\n20: onnx.TensorProto.FLOAT8E5M2FNUZ\n21: onnx.TensorProto.UINT4\n22: onnx.TensorProto.INT4\n23: onnx.TensorProto.FLOAT4E2M1\n</code></pre> <p>ONNX \u662f\u5f3a\u7c7b\u578b\u7684\uff0c\u5176\u5b9a\u4e49\u7684\u53d8\u91cf\u4e0d\u652f\u6301\u9690\u5f0f\u8f6c\u6362\u3002\u5373\u4f7f\u5176\u4ed6\u8bed\u8a00\u652f\u6301\uff0c\u4e5f\u65e0\u6cd5\u6dfb\u52a0\u4e24\u4e2a\u4e0d\u540c\u7c7b\u578b\u7684\u5f20\u91cf\u6216\u77e9\u9635\u3002\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u5fc5\u987b\u5728\u56fe\u4e2d\u63d2\u5165\u663e\u5f0f\u8f6c\u6362\u7684\u539f\u56e0\u3002</p>"},{"location":"onnx/introduction/#_6","title":"\u7a00\u758f\u5f20\u91cf","text":"<p>\u7a00\u758f\u5f20\u91cf\u53ef\u7528\u4e8e\u8868\u793a\u5177\u6709\u8bb8\u591a\u7a7a\u503c\u7684\u6570\u7ec4\u3002ONNX \u652f\u6301\u4e8c\u7ef4 2D \u7a00\u758f\u5f20\u91cf\u3002<code>SparseTensorProto</code> \u7c7b\u5b9a\u4e49 <code>dims</code>\u3001<code>indices(int64)</code> \u548c<code>values</code> \u8fd9\u4e09\u4e2a\u5c5e\u6027\u3002</p>"},{"location":"onnx/introduction/#_7","title":"\u5176\u4ed6\u7c7b\u578b","text":"<p>\u9664\u4e86\u5f20\u91cf\u548c\u7a00\u758f\u5f20\u91cf\uff0cONNX \u8fd8\u901a\u8fc7 <code>SequenceProto</code> \u548c <code>MapProto</code> \u7c7b\u578b\u652f\u6301\u5f20\u91cf\u5e8f\u5217\u3001\u5f20\u91cf\u6620\u5c04\u3001\u5f20\u91cf\u6620\u5c04\u5e8f\u5217\u3002\u4e0d\u8fc7\u8fd9\u4e9b\u7c7b\u578b\u5f88\u5c11\u4f7f\u7528\u3002</p>"},{"location":"onnx/introduction/#opset","title":"\u4ec0\u4e48\u662f opset \u7248\u672c\uff1f","text":"<p><code>opset</code> \u53d8\u91cf\u88ab\u6620\u5c04\u5230 <code>onnx</code> \u5305\u7684\u7248\u672c\u3002\u6bcf\u6b21\u6b21\u7248 <code>minor</code> \u672c\u589e\u52a0\u65f6\uff0c <code>opset</code> \u90fd\u4f1a\u589e\u52a0\u3002\u6bcf\u4e2a\u7248\u672c\u90fd\u4f1a\u5e26\u6765\u66f4\u65b0\u6216\u65b0\u7684\u7b97\u5b50\u3002</p> Python<pre><code>import onnx\nprint(onnx.__version__, \" opset=\", onnx.defs.onnx_opset_version())\n</code></pre> Bash<pre><code>1.18.0  opset= 23\n</code></pre> <p>\u6bcf\u4e2a ONNX \u8ba1\u7b97\u56fe\u8fd8\u9644\u52a0\u4e86\u4e00\u4e2a <code>opset</code> \u53d8\u91cf\u503c\u3002\u8fd9\u662f\u4e00\u4e2a\u5168\u5c40\u4fe1\u606f\u3002\u5b83\u5b9a\u4e49\u4e86\u8ba1\u7b97\u56fe\u5185\u6240\u6709\u7b97\u5b50\u7684\u7248\u672c\u3002\u7b97\u5b50 <code>Add</code> \u5728\u7248\u672c 6\u30017\u300113 \u548c 14 \u4e2d\u8fdb\u884c\u4e86\u66f4\u65b0\u3002\u5982\u679c\u8ba1\u7b97\u56fe <code>opset</code>\u4e3a 15\uff0c\u5219\u8868\u793a\u7b97\u5b50 <code>Add</code> \u9075\u5faa\u89c4\u8303\u7248\u672c 14\u3002\u5982\u679c\u8ba1\u7b97\u56fe <code>opset</code>\u4e3a12\uff0c\u5219\u7b97\u5b50 <code>Add</code> \u9075\u5faa\u89c4\u8303\u7248\u672c 7\u3002\u8ba1\u7b97\u56fe\u4e2d\u7684\u7b97\u5b50\u9075\u5faa\u5c0f\u4e8e\uff08\u6216\u7b49\u4e8e\uff09\u5168\u5c40\u8ba1\u7b97\u56fe <code>opset</code> \u5b9a\u4e49\u7684\u7b97\u5b50\u7248\u672c\u3002</p> <p>\u4e00\u4e2a\u8ba1\u7b97\u56fe\u53ef\u80fd\u5305\u542b\u6765\u81ea\u591a\u4e2a\u57df\u7684\u7b97\u5b50\uff0c\u4f8b\u5982\u53ef\u80fd\u5305\u62ec <code>ai.onnx</code> \u548c <code>ai.onnx.ml</code> \u8fd9\u4e24\u4e2a\u57df\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u8ba1\u7b97\u56fe\u5fc5\u987b\u4e3a\u6bcf\u4e2a\u57df\u5b9a\u4e49\u4e00\u4e2a\u5168\u5c40\u7b97\u5b50\u96c6\u5408\u7248\u672c\u3002\u8be5\u89c4\u5219\u9002\u7528\u4e8e\u540c\u4e00\u57df\u5185\u7684\u6bcf\u4e2a\u7b97\u5b50\u3002</p>"},{"location":"onnx/introduction/#_8","title":"\u5b50\u56fe\u3001\u6d4b\u8bd5\u548c\u5faa\u73af","text":"<p>ONNX \u5b9e\u73b0\u6d4b\u8bd5\u548c\u5faa\u73af\u5f15\u7528\u3002\u5b83\u4eec\u90fd\u53ef\u4ee5\u5c06\u53e6\u4e00\u4e2a ONNX \u8ba1\u7b97\u56fe\u4f5c\u4e3a\u5f53\u524d\u8ba1\u7b97\u56fe\u7684\u4e00\u4e2a\u5c5e\u6027\u3002\u8fd9\u4e9b\u7ed3\u6784\u901a\u5e38\u5f88\u6162\u4e14\u5f88\u590d\u6742\u3002\u5982\u679c\u53ef\u80fd\u7684\u8bdd\uff0c\u6700\u597d\u907f\u514d\u4f7f\u7528\u5b83\u4eec\u3002</p>"},{"location":"onnx/introduction/#if","title":"If \u6761\u4ef6\u7b97\u5b50","text":"<p>If \u6761\u4ef6\u7b97\u5b50\u6839\u636e\u6761\u4ef6\u8bc4\u4f30\u60c5\u51b5\u6267\u884c\u4e24\u4e2a\u8ba1\u7b97\u56fe\u4e4b\u4e00\u3002</p> Bash<pre><code>If(condition) then\n    execute this ONNX graph (`then_branch`)\nelse\n    execute this ONNX graph (`else_branch`)\n</code></pre> <p>\u8fd9\u4e24\u4e2a\u8ba1\u7b97\u56fe\u53ef\u4ee5\u4f7f\u7528\u8ba1\u7b97\u56fe\u4e2d\u5df2\u7ecf\u8ba1\u7b97\u51fa\u7684\u4efb\u4f55\u7ed3\u679c\uff0c\u5e76\u4e14\u5fc5\u987b\u4ea7\u751f\u5b8c\u5168\u76f8\u540c\u6570\u91cf\u7684\u8f93\u51fa\u3002\u8fd9\u4e9b\u8f93\u51fa\u5c06\u662f\u6761\u4ef6\u7b97\u5b50 <code>If</code> \u7684\u8f93\u51fa\u3002</p> <p></p>"},{"location":"onnx/introduction/#scan","title":"\u626b\u63cf\u7b97\u5b50 Scan","text":"<p><code>Scan</code> \u7b97\u5b50\u5b9e\u73b0\u4e86\u5177\u6709\u56fa\u5b9a\u8fed\u4ee3\u6b21\u6570\u7684\u5faa\u73af\u3002\u5b83\u5faa\u73af\u904d\u5386\u8f93\u5165\u7684\u884c\uff08\u6216\u4efb\u4f55\u5176\u4ed6\u7ef4\u5ea6\uff09\u5e76\u6cbf\u540c\u4e00\u6570\u636e\u8f74\u8fde\u63a5\u8f93\u51fa\u3002\u8ba9\u6211\u4eec\u770b\u4e00\u4e2a\u5b9e\u73b0\u6210\u5bf9\u8ddd\u79bb \\(M(i, j) = \\|X_{i} - X_{j} \\|^{2}\\)\u7684\u793a\u4f8b\uff1a</p> <p></p> <p>\u5373\u4f7f\u6b64\u5faa\u73af\u6bd4\u6210\u5bf9\u8ddd\u79bb\u7684\u81ea\u5b9a\u4e49\u5b9e\u73b0\u6162\uff0c\u4f46\u5b83\u4ecd\u7136\u5f88\u9ad8\u6548\u3002\u5b83\u5047\u8bbe\u8f93\u5165\u548c\u8f93\u51fa\u90fd\u662f\u5f20\u91cf\uff0c\u5e76\u81ea\u52a8\u5c06\u6bcf\u6b21\u8fed\u4ee3\u7684\u8f93\u51fa\u8fde\u63a5\u6210\u5355\u4e2a\u5f20\u91cf\u3002\u4e0a\u4e00\u4e2a\u793a\u4f8b\u53ea\u6709\u4e00\u4e2a\uff0c\u4f46\u53ef\u4ee5\u6709\u591a\u4e2a\u3002</p>"},{"location":"onnx/introduction/#_9","title":"\u73af\u5f62","text":"<p>\u5faa\u73af\u7b97\u5b50 <code>Loop</code> \u5b9e\u73b0\u4e86 <code>for</code> \u548c <code>while</code> \u5faa\u73af\u3002\u5b83\u53ef\u4ee5\u6267\u884c\u56fa\u5b9a\u6570\u91cf\u7684\u8fed\u4ee3\u5668\u548c/\u6216\u5728\u6761\u4ef6\u4e0d\u518d\u6ee1\u8db3\u65f6\u7ed3\u675f\u3002\u8f93\u51fa\u4ee5\u4e24\u79cd\u4e0d\u540c\u7684\u65b9\u5f0f\u5904\u7406\u3002\u7b2c\u4e00\u79cd\u7c7b\u4f3c\u4e8e\u5faa\u73afScan\uff0c\u8f93\u51fa\u88ab\u8fde\u63a5\u6210\u5f20\u91cf\uff08\u6cbf\u7b2c\u4e00\u4e2a\u7ef4\u5ea6\uff09\u3002\u8fd9\u4e5f\u610f\u5473\u7740\u8fd9\u4e9b\u8f93\u51fa\u5fc5\u987b\u5177\u6709\u517c\u5bb9\u7684\u5f62\u72b6shape\u3002\u7b2c\u4e8c\u79cd\u673a\u5236\u5c06\u5f20\u91cf\u8fde\u63a5\u6210\u5f20\u91cf\u5e8f\u5217\u3002</p>"},{"location":"onnx/introduction/#_10","title":"\u53ef\u6269\u5c55\u6027","text":"<p>ONNX\u5b9a\u4e49\u4e86\u4e00\u7cfb\u5217\u7b97\u5b50\u4f5c\u4e3a\u6807\u51c6\uff1aONNX \u7b97\u5b50\u3002\u4f46\u662f\uff0c\u5728\u8fd9\u4e2a\u57df\u4e0b\u5b9a\u4e49\u81ea\u5df1\u7684\u7b97\u5b50\u6216\u65b0\u7b97\u5b50\u4e5f\u662f\u5b8c\u5168\u6709\u53ef\u80fd\u7684\u3002<code>onnxruntime</code> \u5b9a\u4e49\u4e86\u81ea\u5b9a\u4e49\u8fd0\u7b97\u7b26\u6765\u6539\u8fdb\u63a8\u7406\u3002\u6bcf\u4e2a\u8282\u70b9\u90fd\u6709\u4e00\u4e2a\u7c7b\u578b\u3001\u4e00\u4e2a\u540d\u79f0\u3001\u547d\u540d\u7684\u8f93\u5165\u548c\u8f93\u51fa\u4ee5\u53ca\u5c5e\u6027\u3002\u53ea\u8981\u5728\u8fd9\u4e9b\u7ea6\u675f\u4e0b\u63cf\u8ff0\u8282\u70b9\uff0c\u5c31\u53ef\u4ee5\u5c06\u8282\u70b9\u6dfb\u52a0\u5230\u4efb\u4f55 ONNX \u56fe\u4e2d\u3002</p> <p>\u6210\u5bf9\u8ddd\u79bb\u53ef\u4ee5\u7528 Scan \u7b97\u5b50\u5b9e\u73b0\u3002\u4f46\u662f\uff0c\u4e13\u7528\u8fd0\u7b97\u7b26 CDist \u88ab\u8bc1\u660e\u901f\u5ea6\u660e\u663e\u66f4\u5feb\uff0c\u5feb\u5230\u503c\u5f97\u4e3a\u5b83\u5b9e\u73b0\u4e13\u7528\u7684\u8fd0\u884c\u65f6\u3002</p>"},{"location":"onnx/introduction/#_11","title":"\u51fd\u6570","text":"<p>\u51fd\u6570\u662f\u6269\u5c55 ONNX \u89c4\u8303\u7684\u4e00\u79cd\u65b9\u5f0f\u3002\u67d0\u4e9b\u6a21\u578b\u9700\u8981\u76f8\u540c\u7684\u7b97\u5b50\u7ec4\u5408\u3002\u53ef\u4ee5\u901a\u8fc7\u521b\u5efa\u4e00\u4e2a\u4f7f\u7528\u73b0\u6709 ONNX \u7b97\u5b50\u5b9a\u4e49\u7684\u51fd\u6570\u6765\u907f\u514d\u8fd9\u79cd\u60c5\u51b5\u3002\u4e00\u65e6\u5b9a\u4e49\uff0c\u51fd\u6570\u7684\u884c\u4e3a\u5c31\u4e0e\u4efb\u4f55\u5176\u4ed6\u7b97\u5b50\u4e00\u6837\u3002\u5b83\u5177\u6709\u8f93\u5165\u3001\u8f93\u51fa\u548c\u5c5e\u6027\u3002</p> <p>\u4f7f\u7528\u51fd\u6570\u6709\u4e24\u4e2a\u4f18\u70b9\u3002\u7b2c\u4e00\u4e2a\u4f18\u70b9\u662f\u4ee3\u7801\u66f4\u77ed\uff0c\u66f4\u6613\u4e8e\u9605\u8bfb\u3002\u7b2c\u4e8c\u4e2a\u4f18\u70b9\u662f\u4efb\u4f55 onnxruntime \u90fd\u53ef\u4ee5\u5229\u7528\u8be5\u4fe1\u606f\u66f4\u5feb\u5730\u8fd0\u884c\u9884\u6d4b\u3002\u8fd0\u884c\u65f6\u53ef\u4ee5\u5bf9\u51fd\u6570\u8fdb\u884c\u7279\u5b9a\u5b9e\u73b0\uff0c\u800c\u4e0d\u4f9d\u8d56\u4e8e\u73b0\u6709\u8fd0\u7b97\u7b26\u7684\u5b9e\u73b0\u3002</p>"},{"location":"onnx/introduction/#_12","title":"\u5f62\u72b6\uff08\u548c\u7c7b\u578b\uff09\u63a8\u65ad","text":"<p>\u4e86\u89e3\u7ed3\u679c\u7684\u5f62\u72b6shape\u5bf9\u4e8e\u6267\u884c ONNX \u8ba1\u7b97\u56fe\u6765\u8bf4\u5e76\u4e0d\u662f\u5fc5\u9700\u7684\uff0c\u4f46\u53ef\u4ee5\u4f7f\u7528\u6b64\u4fe1\u606f\u6765\u52a0\u5feb\u6267\u884c\u901f\u5ea6\u3002\u5982\u679c\u60a8\u6709\u4ee5\u4e0b\u56fe\u8868\uff1a</p> Python<pre><code>Add(x, y) -&gt; z\nAbs(z) -&gt; w\n</code></pre> <p>\u5982\u679cx\u548cy\u5177\u6709\u76f8\u540c\u7684\u5f62\u72b6\uff0c\u5219z\u548cw\u4e5f\u5177\u6709\u76f8\u540c\u7684\u5f62\u72b6\u3002\u77e5\u9053\u8fd9\u4e00\u70b9\u540e\uff0c\u5c31\u53ef\u4ee5\u91cd\u7528\u4e3az\u5206\u914d\u7684\u7f13\u51b2\u533a\uff0c\u4ee5\u5c31\u5730\u8ba1\u7b97\u7edd\u5bf9\u503cw\u3002\u5f62\u72b6\u63a8\u65ad\u6709\u52a9\u4e8e\u8fd0\u884c\u65f6\u7ba1\u7406\u5185\u5b58\uff0c\u4ece\u800c\u63d0\u9ad8\u6548\u7387\u3002</p> <p>ONNX \u5305\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u53ef\u4ee5\u5728\u77e5\u9053\u6bcf\u4e2a\u6807\u51c6\u8fd0\u7b97\u7b26\u7684\u8f93\u5165\u5f62\u72b6\u7684\u60c5\u51b5\u4e0b\u8ba1\u7b97\u8f93\u51fa\u5f62\u72b6\u3002\u5bf9\u4e8e\u5b98\u65b9\u5217\u8868\u4e4b\u5916\u7684\u4efb\u4f55\u81ea\u5b9a\u4e49\u8fd0\u7b97\u7b26\uff0c\u5b83\u663e\u7136\u65e0\u6cd5\u505a\u5230\u8fd9\u4e00\u70b9\u3002</p>"},{"location":"onnx/introduction/#_13","title":"\u5de5\u5177","text":"<p>netron \u975e\u5e38\u6709\u52a9\u4e8e\u53ef\u89c6\u5316 ONNX \u8ba1\u7b97\u56fe\u3002\u8fd9\u662f\u552f\u4e00\u4e00\u6b3e\u65e0\u9700\u7f16\u7a0b\u7684\u5de5\u5177\u3002\u7b2c\u4e00\u4e2a\u5c4f\u5e55\u622a\u56fe\u5c31\u662f\u7528\u8fd9\u4e2a\u5de5\u5177\u5236\u4f5c\u7684\u3002</p> <p></p> <p>onnx2py.py \u4ece ONNX \u8ba1\u7b97\u56fe\u521b\u5efa\u4e00\u4e2a python \u6587\u4ef6\u3002\u6b64\u811a\u672c\u53ef\u4ee5\u521b\u5efa\u76f8\u540c\u7684\u8ba1\u7b97\u56fe\u3002\u7528\u6237\u53ef\u4ee5\u4fee\u6539\u5b83\u6765\u66f4\u6539\u8ba1\u7b97\u56fe\u3002</p> <p>zetane \u53ef\u4ee5\u52a0\u8f7d onnx \u6a21\u578b\u5e76\u5728\u6a21\u578b\u6267\u884c\u65f6\u663e\u793a\u4e2d\u95f4\u7ed3\u679c\u3002</p>"},{"location":"onnx/onnx_with_python/","title":"Python \u5904\u7406 ONNX","text":"<p>\u4f5c\u8005\uff1a\u718a\u54c8\u54c8</p> <p>\u90ae\u7bb1: 915574300@qq.com</p>"},{"location":"onnx/onnx_with_python/#_1","title":"\u80cc\u666f","text":"<p>\u63a5\u4e0b\u6765\u7684\u90e8\u5206\uff0c\u91cd\u70b9\u4ecb\u7ecd\u4e86\u5982\u4f55\u4f7f\u7528 <code>onnx</code> \u5305\u63d0\u4f9b\u7684Python API \u6765\u6784\u5efa ONNX \u8ba1\u7b97\u56fe\u6240\u7528\u5230\u7684\u4e3b\u8981\u51fd\u6570\u3002</p>"},{"location":"onnx/onnx_with_python/#_2","title":"\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\uff1a\u7ebf\u6027\u56de\u5f52","text":""},{"location":"onnx/onnx_with_python/#_3","title":"\u7ebf\u6027\u56de\u5f52\u6a21\u578b","text":"<p>\u7ebf\u6027\u56de\u5f52\u662f\u673a\u5668\u5b66\u4e60\u4e2d\u6700\u7b80\u5355\u7684\u6a21\u578b\uff0c\u4ee5\u4e0b\u6570\u5b66\u8868\u8fbe\u5f0f\u63cf\u8ff0\u4e86\u4e00\u4e2a\u7ebf\u6027\u56de\u5f52\u6a21\u578b: \\(Y = X * A + B\\) \u6211\u4eec\u53ef\u4ee5\u628a\u8fd9\u4e2a\u6a21\u578b\u770b\u4f5c\u4e00\u4e2a\u4e09\u53d8\u91cf\u7684\u51fd\u6570 \\(Y = f(X, A, B)\\)\uff0c\u5bf9\u5e94\u7684 ONNX \u8868\u8fbe\u5f0f\u4e3a <code>y = Add(MatMul(X, A), B)</code>\u3002\u8fd9\u5c31\u662f\u6211\u4eec\u9700\u8981\u7528 ONNX \u7b97\u5b50\u8868\u793a\u7684\u5185\u5bb9\u3002\u7b2c\u4e00\u4ef6\u4e8b\u662f\u7528 ONNX \u7b97\u5b50\u5b9e\u73b0\u4e00\u4e2a\u51fd\u6570\u3002ONNX \u662f\u5f3a\u7c7b\u578b\u7684\u3002\u5fc5\u987b\u4e3a\u51fd\u6570\u7684 \u8f93\u5165 \u548c \u8f93\u51fa \u8282\u70b9\u5b9a\u4e49\u5f62\u72b6(shape)\u548c\u7c7b\u578b(type)\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u6211\u4eec\u5728 <code>make_function</code> \u51fd\u6570\u4e2d\u9700\u8981\u7528\u56db\u4e2a\u51fd\u6570\u6765\u6784\u5efa\u8ba1\u7b97\u56fe\u3002</p> <ul> <li> <p><code>make_tensor_value_info</code>\uff1a\u6839\u636e\u5f62\u72b6shape\u548c\u7c7b\u578btype\u58f0\u660e\u4e00\u4e2a\u53d8\u91cf\uff08\u8f93\u5165\u6216\u8f93\u51fa\uff09</p> </li> <li> <p><code>make_node</code>\uff1a\u521b\u5efa\u4e00\u4e2a\u7531\u7b97\u5b50\uff08\u7b97\u5b50\u7c7b\u578b\uff09\u3001\u5176\u8f93\u5165\u548c\u8f93\u51fa\u5b9a\u4e49\u7684\u8282\u70b9</p> </li> <li> <p><code>make_graph</code>\uff1a\u4f7f\u7528\u524d\u4e24\u4e2a\u51fd\u6570\u521b\u5efa\u7684\u5bf9\u8c61\u521b\u5efa ONNX \u8ba1\u7b97\u56fe</p> </li> <li> <p><code>make_model</code>\uff1a\u5c06\u8ba1\u7b97\u56fe\u548c\u9644\u52a0\u5143\u6570\u636e\u878d\u5408\u5728\u4e00\u8d77</p> </li> </ul> <p>\u5728\u521b\u5efa\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u4e3a\u8ba1\u7b97\u56fe\u7684\u6bcf\u4e2a\u8282\u70b9\u7684\u6bcf\u4e2a\u8f93\u5165\u3001\u8f93\u51fa\u547d\u540d\u3002\u8ba1\u7b97\u56fe\u7684\u8f93\u5165\u548c\u8f93\u51fa\u7531 onnx \u5bf9\u8c61\u5b9a\u4e49\uff0c\u5b57\u7b26\u4e32\u7528\u4e8e\u5f15\u7528\u4e2d\u95f4\u7ed3\u679c\u3002\u6784\u5efa\u7684\u8fc7\u7a0b\u5982\u4e0b\u6240\u8ff0\u3002</p>"},{"location":"onnx/onnx_with_python/#onnx","title":"onnx \u4ee3\u7801\u5b9e\u73b0","text":"onnx\u5b9e\u73b0\u7684\u7ebf\u6027\u56de\u5f52\u6a21\u578b Python<pre><code># imports\n\nfrom onnx import TensorProto\nfrom onnx.helper import (\n    make_model, make_node, make_graph,\n    make_tensor_value_info)\nfrom onnx.checker import check_model\n\n# \u7b2c\u4e00\u6b65\uff1a\u6784\u5efa\u6574\u4e2a\u8ba1\u7b97\u56fe\u6240\u6709\u7684\u53d8\u91cf\n# inputs\n\n# 'X' is the name, TensorProto.FLOAT the type, [None, None] the shape\nX = make_tensor_value_info('X', TensorProto.FLOAT, [None, None])\nA = make_tensor_value_info('A', TensorProto.FLOAT, [None, None])\nB = make_tensor_value_info('B', TensorProto.FLOAT, [None, None])\n\n# outputs, the shape is left undefined\n\nY = make_tensor_value_info('Y', TensorProto.FLOAT, [None])\n\n# \u7b2c\u4e8c\u6b65\uff1a\u6839\u636e\u53d8\u91cf\u6784\u5efa\u6240\u6709\u7684\u8282\u70b9\n# nodes\n\n# It creates a node defined by the operator type MatMul,\n# 'X', 'A' are the inputs of the node, 'XA' the output.\nnode1 = make_node('MatMul', ['X', 'A'], ['XA'])\nnode2 = make_node('Add', ['XA', 'B'], ['Y'])\n\n# \u7b2c\u4e09\u6b65\uff1a\u6839\u636e\u8282\u70b9\u6784\u5efa\u8ba1\u7b97\u56fe\n# from nodes to graph\n# the graph is built from the list of nodes, the list of inputs,\n# the list of outputs and a name.\n\ngraph = make_graph([node1, node2],  # nodes\n                    'lr',  # a name\n                    [X, A, B],  # inputs\n                    [Y])  # outputs\n\n# \u7b2c\u56db\u6b65\uff1a\u6839\u636e\u8ba1\u7b97\u56fe\u7b49\u5176\u4ed6\u4fe1\u606f\uff0c\u6784\u5efa\u4e00\u4e2aonnx\u6a21\u578b\n# onnx graph\n# there is no metadata in this case.\n\nonnx_model = make_model(graph)\n\n# \u7b2c\u4e94\u6b65\uff1a\u5bf9\u6a21\u578b\u8fdb\u884c\u6821\u9a8c\n# Let's check the model is consistent,\n# this function is described in section\n# Checker and Shape Inference.\ncheck_model(onnx_model)\n\n# the work is done, let's display it...\nprint(onnx_model)\n</code></pre> <p><code>#################################################################################</code> <code>#################################\u5b8c\u7f8e\u7684\u5206\u5272\u7ebf######################################</code> <code>#################################################################################</code></p>  onnx\u5b9e\u73b0\u7684\u7ebf\u6027\u56de\u5f52\u6a21\u578b\u7f51\u7edc\u7ed3\u679c\uff1ajson\u683c\u5f0f  Text Only<pre><code>ir_version: 11\ngraph {\n  node {\n    input: \"X\"\n    input: \"A\"\n    output: \"XA\"\n    op_type: \"MatMul\"\n  }\n  node {\n    input: \"XA\"\n    input: \"B\"\n    output: \"Y\"\n    op_type: \"Add\"\n  }\n  name: \"lr\"\n  input {\n    name: \"X\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n          dim {\n          }\n        }\n      }\n    }\n  }\n  input {\n    name: \"A\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n          dim {\n          }\n        }\n      }\n    }\n  }\n  input {\n    name: \"B\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n          dim {\n          }\n        }\n      }\n    }\n  }\n  output {\n    name: \"Y\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n        }\n      }\n    }\n  }\n}\nopset_import {\n  version: 23\n}\n</code></pre>"},{"location":"onnx/onnx_with_python/#_4","title":"\u53ef\u89c6\u5316\u663e\u793a","text":"<p>\u4e0a\u8ff0\u7684\u8ba1\u7b97\u56fe\u53ef\u89c6\u5316\u7684\u8868\u793a\u5982\u4e0b\u6240\u793a\uff1a</p> <p></p>"},{"location":"onnx/onnx_with_python/#-shape","title":"\u7279\u6b8a\u8282\u70b9-\u5f62\u72b6shape\u4e3a\u7a7a","text":"<p>\u7a7a\u5f62\u72b6 (shape\u4e3aNone) \u8868\u793a\u4efb\u610f\u5f62\u72b6\uff0c\u5b9a\u4e49\u4e3a <code>[None, None]</code> \u7684\u5f62\u72b6\uff0c\u8868\u793a\u6b64\u5bf9\u8c61\u662f\u4e8c\u7ef4\u5f20\u91cf\uff0c\u65e0\u9700\u8fdb\u4e00\u6b65\u7684\u7cbe\u5ea6\u9650\u5236\u3002\u8fd8\u53ef\u4ee5\u901a\u8fc7\u67e5\u770b\u56fe\u4e2d\u6bcf\u4e2a\u5bf9\u8c61\u7684\u5b57\u6bb5\u6765\u68c0\u67e5 ONNX \u56fe\u3002</p>"},{"location":"onnx/onnx_with_python/#_5","title":"\u6709\u7a7a\u5f62\u72b6\u8282\u70b9\u8ba1\u7b97\u56fe\u6784\u56fe\u4ee3\u7801","text":"\u7a7a\u5f62\u72b6\u8ba1\u7b97\u56fe  Python<pre><code>from onnx import TensorProto\nfrom onnx.helper import (\n    make_model, make_node, make_graph,\n    make_tensor_value_info)\nfrom onnx.checker import check_model\n\ndef shape2tuple(shape):\n    return tuple(getattr(d, 'dim_value', 0) for d in shape.dim)\n\nX = make_tensor_value_info('X', TensorProto.FLOAT, [None, None])\nA = make_tensor_value_info('A', TensorProto.FLOAT, [None, None])\nB = make_tensor_value_info('B', TensorProto.FLOAT, [None, None])\nY = make_tensor_value_info('Y', TensorProto.FLOAT, [None])\nnode1 = make_node('MatMul', ['X', 'A'], ['XA'])\nnode2 = make_node('Add', ['XA', 'B'], ['Y'])\ngraph = make_graph([node1, node2], 'lr', [X, A, B], [Y])\nonnx_model = make_model(graph)\ncheck_model(onnx_model)\n\n# the list of inputs\nprint('** inputs **')\nprint(onnx_model.graph.input)\n\n# in a more nicely format\nprint('** inputs **')\nfor obj in onnx_model.graph.input:\n    print(\"name=%r dtype=%r shape=%r\" % (\n        obj.name, obj.type.tensor_type.elem_type,\n        shape2tuple(obj.type.tensor_type.shape)))\n\n# the list of outputs\nprint('** outputs **')\nprint(onnx_model.graph.output)\n\n# in a more nicely format\nprint('** outputs **')\nfor obj in onnx_model.graph.output:\n    print(\"name=%r dtype=%r shape=%r\" % (\n        obj.name, obj.type.tensor_type.elem_type,\n        shape2tuple(obj.type.tensor_type.shape)))\n\n# the list of nodes\nprint('** nodes **')\nprint(onnx_model.graph.node)\n\n# in a more nicely format\nprint('** nodes **')\nfor node in onnx_model.graph.node:\n    print(\"name=%r type=%r input=%r output=%r\" % (\n        node.name, node.op_type, node.input, node.output))\n</code></pre>  \u6253\u5370json\u683c\u5f0f\u7684onnx\u8ba1\u7b97\u56fe Bash<pre><code>** inputs **\n[name: \"X\"\ntype {\n  tensor_type {\n    elem_type: 1\n    shape {\n      dim {\n      }\n      dim {\n      }\n    }\n  }\n}\n, name: \"A\"\ntype {\n  tensor_type {\n    elem_type: 1\n    shape {\n      dim {\n      }\n      dim {\n      }\n    }\n  }\n}\n, name: \"B\"\ntype {\n  tensor_type {\n    elem_type: 1\n    shape {\n      dim {\n      }\n      dim {\n      }\n    }\n  }\n}\n]\n** inputs **\nname='X' dtype=1 shape=(0, 0)\nname='A' dtype=1 shape=(0, 0)\nname='B' dtype=1 shape=(0, 0)\n** outputs **\n[name: \"Y\"\ntype {\n  tensor_type {\n    elem_type: 1\n    shape {\n      dim {\n      }\n    }\n  }\n}\n]\n** outputs **\nname='Y' dtype=1 shape=(0,)\n** nodes **\n[input: \"X\"\ninput: \"A\"\noutput: \"XA\"\nop_type: \"MatMul\"\n, input: \"XA\"\ninput: \"B\"\noutput: \"Y\"\nop_type: \"Add\"\n]\n** nodes **\nname='' type='MatMul' input=['X', 'A'] output=['XA']\nname='' type='Add' input=['XA', 'B'] output=['Y']\n</code></pre>"},{"location":"onnx/onnx_with_python/#_6","title":"\u5176\u4ed6","text":"<p>\u5f20\u91cf \u7c7b\u578b \u662f\u6574\u6570\uff08=1\uff09\u3002\u8f85\u52a9\u51fd\u6570 <code>onnx.helper.tensor_dtype_to_np_dtype()</code> \u7ed9\u51fa\u4e86 <code>numpy</code> \u5bf9\u5e94\u7c7b\u578b\u7684\u6620\u5c04\u5173\u7cfb\u3002</p> Python<pre><code>from onnx import TensorProto\nfrom onnx.helper import tensor_dtype_to_np_dtype, tensor_dtype_to_string\n\nnp_dtype = tensor_dtype_to_np_dtype(TensorProto.FLOAT)\nprint(f\"The converted numpy dtype for {tensor_dtype_to_string(TensorProto.FLOAT)} is {np_dtype}.\")\n</code></pre> Bash<pre><code>The converted numpy dtype for TensorProto.FLOAT is float32.\n</code></pre>"},{"location":"onnx/onnx_with_python/#_7","title":"\u5e8f\u5217\u5316","text":"<p>ONNX \u5efa\u7acb\u5728 protobuf \u4e4b\u4e0a\u3002ONNX \u6dfb\u52a0\u4e86\u63cf\u8ff0\u673a\u5668\u5b66\u4e60\u6a21\u578b\u6240\u9700\u7684\u5b9a\u4e49\u3002\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0cONNX \u7528\u4e8e\u5e8f\u5217\u5316\u6216\u53cd\u5e8f\u5217\u5316\u4e00\u4e2a\u6a21\u578b\u6a21\u578b\u3002\u7b2c\u4e00\u90e8\u5206\u89e3\u51b3\u4e86\u8fd9\u4e00\u9700\u6c42\uff08\u5982\u4f55\u63cf\u8ff0\u673a\u5668\u5b66\u4e60\u6a21\u578b\uff09\u3002\u7b2c\u4e8c\u90e8\u5206\u4ecb\u7ecd\u4e86\u5f20\u91cf\u3001\u7a00\u758f\u5f20\u91cf\u7b49\u6570\u636e\u7684\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\u3002</p>"},{"location":"onnx/onnx_with_python/#_8","title":"\u6a21\u578b\u5e8f\u5217\u5316","text":"<p>\u9700\u8981\u4fdd\u5b58\u6a21\u578b\u624d\u80fd\u90e8\u7f72\u3002ONNX \u57fa\u4e8e protobuf\u3002\u5b83\u6700\u5927\u9650\u5ea6\u5730\u51cf\u5c11\u4e86\u5728\u78c1\u76d8\u4e0a\u4fdd\u5b58\u56fe\u5f62\u6240\u9700\u7684\u7a7a\u95f4\u3002onnx \u4e2d\u7684\u6bcf\u4e2a\u5bf9\u8c61\uff08\u53c2\u89c1Protos\uff09\u90fd\u53ef\u4ee5\u4f7f\u7528\u65b9\u6cd5 <code>SerializeToString</code> \u5e8f\u5217\u5316\u3002\u6574\u4e2a\u6a21\u578b\u4e5f\u53ef\u4ee5\u64cd\u4f5c\u3002</p>  \u6a21\u578b\u5e8f\u5217\u5316  Python<pre><code>from onnx import TensorProto\nfrom onnx.helper import (\n    make_model, make_node, make_graph,\n    make_tensor_value_info)\nfrom onnx.checker import check_model\n\ndef shape2tuple(shape):\n    return tuple(getattr(d, 'dim_value', 0) for d in shape.dim)\n\nX = make_tensor_value_info('X', TensorProto.FLOAT, [None, None])\nA = make_tensor_value_info('A', TensorProto.FLOAT, [None, None])\nB = make_tensor_value_info('B', TensorProto.FLOAT, [None, None])\nY = make_tensor_value_info('Y', TensorProto.FLOAT, [None])\nnode1 = make_node('MatMul', ['X', 'A'], ['XA'])\nnode2 = make_node('Add', ['XA', 'B'], ['Y'])\ngraph = make_graph([node1, node2], 'lr', [X, A, B], [Y])\nonnx_model = make_model(graph)\ncheck_model(onnx_model)\n\n# The serialization\nwith open(\"linear_regression.onnx\", \"wb\") as f:\n    f.write(onnx_model.SerializeToString())\n\n# display\nprint(onnx_model)\n</code></pre>  \u6a21\u578b\u5e8f\u5217\u5316\u4e4b\u540e\u8f93\u51fa\u7684\u5185\u5bb9\uff1ajson\u683c\u5f0f Bash<pre><code>ir_version: 11\ngraph {\n  node {\n    input: \"X\"\n    input: \"A\"\n    output: \"XA\"\n    op_type: \"MatMul\"\n  }\n  node {\n    input: \"XA\"\n    input: \"B\"\n    output: \"Y\"\n    op_type: \"Add\"\n  }\n  name: \"lr\"\n  input {\n    name: \"X\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n          dim {\n          }\n        }\n      }\n    }\n  }\n  input {\n    name: \"A\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n          dim {\n          }\n        }\n      }\n    }\n  }\n  input {\n    name: \"B\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n          dim {\n          }\n        }\n      }\n    }\n  }\n  output {\n    name: \"Y\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n        }\n      }\n    }\n  }\n}\nopset_import {\n  version: 23\n}\n</code></pre> <p>\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b <code>load</code> \u51fd\u6570\u6062\u590d\u8ba1\u7b97\uff1a Python<pre><code>from onnx import load\n\nwith open(\"linear_regression.onnx\", \"rb\") as f:\n    onnx_model = load(f)\n\n# display\nprint(onnx_model)\n</code></pre></p>  \u53cd\u5e8f\u5217\u5316\u4e4b\u540e\u7684onnx\u6a21\u578b: json\u683c\u5f0f  Text Only<pre><code>ir_version: 11\ngraph {\n  node {\n    input: \"X\"\n    input: \"A\"\n    output: \"XA\"\n    op_type: \"MatMul\"\n  }\n  node {\n    input: \"XA\"\n    input: \"B\"\n    output: \"Y\"\n    op_type: \"Add\"\n  }\n  name: \"lr\"\n  input {\n    name: \"X\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n          dim {\n          }\n        }\n      }\n    }\n  }\n  input {\n    name: \"A\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n          dim {\n          }\n        }\n      }\n    }\n  }\n  input {\n    name: \"B\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n          dim {\n          }\n        }\n      }\n    }\n  }\n  output {\n    name: \"Y\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n        }\n      }\n    }\n  }\n}\nopset_import {\n  version: 23\n}\n</code></pre> <p>\u770b\u8d77\u6765\u5b8c\u5168\u4e00\u6837\u3002\u4efb\u4f55\u6a21\u578b\u90fd\u53ef\u4ee5\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u5e8f\u5217\u5316\uff0c \u9664\u975e\u5b83\u4eec\u5927\u4e8e 2 Gb \u3002protobuf \u7684\u5927\u5c0f\u9650\u5236\u5c0f\u4e8e\u6b64\u9608\u503c\u3002\u4e0b\u4e00\u8282\u5c06\u5c55\u793a\u5982\u4f55\u514b\u670d\u8be5\u9650\u5236\u3002</p> <p><code>#################################################################################</code> <code>###############################onnx\u5751\u7239\u7684\u5730\u65b9\uff0c\u6a21\u578b\u7a7a\u95f4 2G \u9650\u5236######################</code> <code>###############################onnx\u5751\u7239\u7684\u5730\u65b9\uff0c\u6a21\u578b\u7a7a\u95f4 2G \u9650\u5236######################</code> <code>###############################onnx\u5751\u7239\u7684\u5730\u65b9\uff0c\u6a21\u578b\u7a7a\u95f4 2G \u9650\u5236######################</code> <code>#################################################################################</code></p>"},{"location":"onnx/onnx_with_python/#_9","title":"\u6570\u636e\u5e8f\u5217\u5316","text":"<p>\u5f20\u91cf\u7684\u5e8f\u5217\u5316\u901a\u5e38\u5982\u4e0b\u8fdb\u884c\uff1a</p> Python<pre><code>import numpy\nfrom onnx.numpy_helper import from_array\n\nnumpy_tensor = numpy.array([0, 1, 4, 5, 3], dtype=numpy.float32)\nprint(type(numpy_tensor))\n\nonnx_tensor = from_array(numpy_tensor)\nprint(type(onnx_tensor))\n\nserialized_tensor = onnx_tensor.SerializeToString()\nprint(type(serialized_tensor))\n\nwith open(\"saved_tensor.pb\", \"wb\") as f:\n    f.write(serialized_tensor)\n</code></pre> Bash<pre><code>&lt;class 'numpy.ndarray'&gt;\n&lt;class 'onnx.onnx_ml_pb2.TensorProto'&gt;\n&lt;class 'bytes'&gt;\n</code></pre> <p>\u53cd\u5e8f\u5217\u5316\u5982\u4e0b\uff1a</p> Python<pre><code>from onnx import TensorProto\nfrom onnx.numpy_helper import to_array\n\nwith open(\"saved_tensor.pb\", \"rb\") as f:\n    serialized_tensor = f.read()\nprint(type(serialized_tensor))\n\nonnx_tensor = TensorProto()\nonnx_tensor.ParseFromString(serialized_tensor)\nprint(type(onnx_tensor))\n\nnumpy_tensor = to_array(onnx_tensor)\nprint(numpy_tensor)\n</code></pre> <p>Bash<pre><code>&lt;class 'bytes'&gt;\n&lt;class 'onnx.onnx_ml_pb2.TensorProto'&gt;\n[0. 1. 4. 5. 3.]\n</code></pre> \u76f8\u540c\u7684\u6a21\u5f0f\u53ef\u7528\u4e8eTensorProto \uff08\u4f46\u4e0d\u9650\u4e8e\uff09 \uff1a Python<pre><code>import onnx\nimport pprint\npprint.pprint([p for p in dir(onnx)\n               if p.endswith('Proto') and p[0] != '_'])\n</code></pre></p> Bash<pre><code>['AttributeProto',\n 'FunctionProto',\n 'GraphProto',\n 'MapProto',\n 'ModelProto',\n 'NodeProto',\n 'OperatorProto',\n 'OperatorSetIdProto',\n 'OperatorSetProto',\n 'OptionalProto',\n 'SequenceProto',\n 'SparseTensorProto',\n 'StringStringEntryProto',\n 'TensorProto',\n 'TensorShapeProto',\n 'TrainingInfoProto',\n 'TypeProto',\n 'ValueInfoProto']\n</code></pre> <p>\u8be5\u4ee3\u7801\u53ef\u4ee5\u901a\u8fc7\u51fd\u6570 <code>load_tensor_from_string</code> \u7b80\u5316 \uff08\u53c2\u89c1\u52a0\u8f7d Proto\uff09\u3002</p> Python<pre><code>from onnx import load_tensor_from_string\n\nwith open(\"saved_tensor.pb\", \"rb\") as f:\n    serialized = f.read()\nproto = load_tensor_from_string(serialized)\nprint(type(proto))\n</code></pre> Bash<pre><code>&lt;class 'onnx.onnx_ml_pb2.TensorProto'&gt;\n</code></pre>"},{"location":"onnx/onnx_with_python/#_10","title":"\u521d\u59cb\u5316\u7a0b\u5e8f\uff0c\u9ed8\u8ba4\u503c","text":"<p>\u524d\u4e00\u4e2a\u6a21\u578b\u5047\u8bbe\u7ebf\u6027\u56de\u5f52\u7684\u7cfb\u6570\u4e5f\u662f\u6a21\u578b\u7684\u8f93\u5165\u3002\u8fd9\u4e0d\u592a\u65b9\u4fbf\u3002\u5b83\u4eec\u5e94\u8be5\u662f\u6a21\u578b\u672c\u8eab\u7684\u4e00\u90e8\u5206\uff0c\u4f5c\u4e3a\u5e38\u91cf\u6216\u521d\u59cb\u5316\u5668\uff0c\u4ee5\u9075\u5faa onnx \u8bed\u4e49\u3002\u4e0b\u4e00\u4e2a\u793a\u4f8b\u6a21\u578b\u4fee\u6539\u4e86\u524d\u4e00\u4e2a\u793a\u4f8b\uff0c\u5c06\u8f93\u5165 A \u548c B \u66f4\u6539\u4e3a\u521d\u59cb\u5316\u5668\u3002<code>onnx</code> \u5305\u5b9e\u73b0\u4e86\u4e24\u4e2a\u51fd\u6570\uff0c\u7528\u4e8e\u4ece <code>numpy</code> \u4e0e <code>onnx</code> \u4e4b\u95f4\u76f8\u4e92\u8f6c\u6362\uff08\u53c2\u89c1\u6570\u7ec4\uff09\u3002</p> <ul> <li> <p><code>onnx.numpy_helper.to_array</code>\uff1a\u4ece onnx \u8f6c\u6362\u4e3a numpy</p> </li> <li> <p><code>onnx.numpy_helper.from_array</code>\uff1a\u4ece numpy \u8f6c\u6362\u4e3a onnx</p> </li> </ul> Python<pre><code>import numpy\nfrom onnx import numpy_helper, TensorProto\nfrom onnx.helper import (\n    make_model, make_node, make_graph,\n    make_tensor_value_info)\nfrom onnx.checker import check_model\n\n# initializers\nvalue = numpy.array([0.5, -0.6], dtype=numpy.float32)\nA = numpy_helper.from_array(value, name='A')\n\nvalue = numpy.array([0.4], dtype=numpy.float32)\nC = numpy_helper.from_array(value, name='C')\n\n# the part which does not change\nX = make_tensor_value_info('X', TensorProto.FLOAT, [None, None])\nY = make_tensor_value_info('Y', TensorProto.FLOAT, [None])\nnode1 = make_node('MatMul', ['X', 'A'], ['AX'])\nnode2 = make_node('Add', ['AX', 'C'], ['Y'])\ngraph = make_graph([node1, node2], 'lr', [X], [Y], [A, C])\nonnx_model = make_model(graph)\ncheck_model(onnx_model)\n\nprint(onnx_model)\n</code></pre>  \u7ebf\u6027\u6a21\u578b\u7684\u8ba1\u7b97\u56fe: json\u683c\u5f0f  Bash<pre><code>ir_version: 11\ngraph {\n  node {\n    input: \"X\"\n    input: \"A\"\n    output: \"AX\"\n    op_type: \"MatMul\"\n  }\n  node {\n    input: \"AX\"\n    input: \"C\"\n    output: \"Y\"\n    op_type: \"Add\"\n  }\n  name: \"lr\"\n  initializer {\n    dims: 2\n    data_type: 1\n    name: \"A\"\n    raw_data: \"\\000\\000\\000?\\232\\231\\031\\277\"\n  }\n  initializer {\n    dims: 1\n    data_type: 1\n    name: \"C\"\n    raw_data: \"\\315\\314\\314&gt;\"\n  }\n  input {\n    name: \"X\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n          dim {\n          }\n        }\n      }\n    }\n  }\n  output {\n    name: \"Y\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n        }\n      }\n    }\n  }\n}\nopset_import {\n  version: 23\n}\n</code></pre> <p></p> <p>\u518d\u6b21\uff0c\u53ef\u4ee5\u901a\u8fc7 onnx \u7ed3\u6784\u6765\u68c0\u67e5\u521d\u59cb\u5316\u7a0b\u5e8f\u7684\u6837\u5b50\u3002</p> Python<pre><code>import numpy\nfrom onnx import numpy_helper, TensorProto\nfrom onnx.helper import (\n    make_model, make_node, make_graph,\n    make_tensor_value_info)\nfrom onnx.checker import check_model\n\n# initializers\nvalue = numpy.array([0.5, -0.6], dtype=numpy.float32)\nA = numpy_helper.from_array(value, name='A')\n\nvalue = numpy.array([0.4], dtype=numpy.float32)\nC = numpy_helper.from_array(value, name='C')\n\n# the part which does not change\nX = make_tensor_value_info('X', TensorProto.FLOAT, [None, None])\nY = make_tensor_value_info('Y', TensorProto.FLOAT, [None])\nnode1 = make_node('MatMul', ['X', 'A'], ['AX'])\nnode2 = make_node('Add', ['AX', 'C'], ['Y'])\ngraph = make_graph([node1, node2], 'lr', [X], [Y], [A, C])\nonnx_model = make_model(graph)\ncheck_model(onnx_model)\n\nprint('** initializer **')\nfor init in onnx_model.graph.initializer:\n    print(init)\n</code></pre> Bash<pre><code>** initializer **\ndims: 2\ndata_type: 1\nname: \"A\"\nraw_data: \"\\000\\000\\000?\\232\\231\\031\\277\"\n\ndims: 1\ndata_type: 1\nname: \"C\"\nraw_data: \"\\315\\314\\314&gt;\"\n</code></pre> <p>\u7c7b\u578b\u4e5f\u5b9a\u4e49\u4e3a\u6574\u6570\uff0c\u542b\u4e49\u76f8\u540c\u3002\u5728\u7b2c\u4e8c\u4e2a\u793a\u4f8b\u4e2d\uff0c\u53ea\u5269\u4e0b\u4e00\u4e2a\u8f93\u5165\u3002\u8f93\u5165A\u548cB\u88ab\u5220\u9664\u3002\u5f53\u7136\u5b83\u4eec\u4e5f\u53ef\u4ee5\u4fdd\u7559\u3002\u5728\u4fdd\u7559\u60c5\u51b5\u4e0b\uff0c\u5b83\u4eec\u662f\u53ef\u9009\u7684\uff1a\u6bcf\u4e2a\u4e0e\u8f93\u5165\u5171\u4eab\u76f8\u540c\u540d\u79f0\u7684\u521d\u59cb\u5316\u5668\u90fd\u88ab\u89c6\u4e3a\u9ed8\u8ba4\u503c\u3002\u5982\u679c\u6ca1\u6709\u7ed9\u51fa\u8fd9\u4e2a\uff0c\u5b83\u5c06\u66ff\u6362\u8f93\u5165\u3002</p>"},{"location":"onnx/onnx_with_python/#_11","title":"\u5c5e\u6027","text":"<p>\u6709\u4e9b\u7b97\u5b50\u9700\u8981\u5c5e\u6027\uff0c\u4f8b\u5982 <code>Transpose</code> \u7b97\u5b50\u3002\u8fd9\u8ba9\u6211\u4eec\u53ef\u4ee5\u6784\u5efa\u57fa\u4e8e\u8868\u8fbe\u5f0f\u7684\u8ba1\u7b97\u56fe\uff0c\u4f8b\u5982 \\(y = XA^{\\prime} + B\\) \u6216\u8005 <code>y = Add(MatMul(X, Transpose(Z)) + B)</code>\u3002<code>Transpose</code> \u9700\u8981\u4e00\u4e2a\u5b9a\u4e49\u8f74\u6392\u5217\u7684\u5c5e\u6027\uff1a<code>perm=[1, 0]</code>\u3002\u5b83\u4f5c\u4e3a\u547d\u540d\u5c5e\u6027\u6dfb\u52a0\u5230\u51fd\u6570 <code>make_node</code> \u4e2d</p> Python<pre><code>from onnx import TensorProto\nfrom onnx.helper import (\n    make_model, make_node, make_graph,\n    make_tensor_value_info)\nfrom onnx.checker import check_model\n\n# unchanged\nX = make_tensor_value_info('X', TensorProto.FLOAT, [None, None])\nA = make_tensor_value_info('A', TensorProto.FLOAT, [None, None])\nB = make_tensor_value_info('B', TensorProto.FLOAT, [None, None])\nY = make_tensor_value_info('Y', TensorProto.FLOAT, [None])\n\n# added\nnode_transpose = make_node('Transpose', ['A'], ['tA'], perm=[1, 0])\n\n# unchanged except A is replaced by tA\nnode1 = make_node('MatMul', ['X', 'tA'], ['XA'])\nnode2 = make_node('Add', ['XA', 'B'], ['Y'])\n\n# node_transpose is added to the list\ngraph = make_graph([node_transpose, node1, node2],\n                   'lr', [X, A, B], [Y])\nonnx_model = make_model(graph)\ncheck_model(onnx_model)\n\n# the work is done, let's display it...\nprint(onnx_model)\n</code></pre>  \u7ebf\u6027\u6a21\u578b\u7684\u8ba1\u7b97\u56fe: json\u683c\u5f0f  Bash<pre><code>ir_version: 11\ngraph {\n  node {\n    input: \"A\"\n    output: \"tA\"\n    op_type: \"Transpose\"\n    attribute {\n      name: \"perm\"\n      ints: 1\n      ints: 0\n      type: INTS\n    }\n  }\n  node {\n    input: \"X\"\n    input: \"tA\"\n    output: \"XA\"\n    op_type: \"MatMul\"\n  }\n  node {\n    input: \"XA\"\n    input: \"B\"\n    output: \"Y\"\n    op_type: \"Add\"\n  }\n  name: \"lr\"\n  input {\n    name: \"X\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n          dim {\n          }\n        }\n      }\n    }\n  }\n  input {\n    name: \"A\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n          dim {\n          }\n        }\n      }\n    }\n  }\n  input {\n    name: \"B\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n          dim {\n          }\n        }\n      }\n    }\n  }\n  output {\n    name: \"Y\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n        }\n      }\n    }\n  }\n}\nopset_import {\n  version: 23\n}\n</code></pre> <p></p> <p>\u4ee5\u4e0b\u662fmake\u51fd\u6570\u7684\u5b8c\u6574\u5217\u8868\u3002\u5176\u4e2d\u8bb8\u591a\u51fd\u6570\u5728make \u51fd\u6570\u4e00\u8282\u4e2d\u8fdb\u884c\u4e86\u63cf\u8ff0\u3002</p> Python<pre><code>import onnx\nimport pprint\npprint.pprint([k for k in dir(onnx.helper)\n               if k.startswith('make')])\n</code></pre> Bash<pre><code>['make_attribute',\n 'make_attribute_ref',\n 'make_empty_tensor_value_info',\n 'make_function',\n 'make_graph',\n 'make_map',\n 'make_map_type_proto',\n 'make_model',\n 'make_model_gen_version',\n 'make_node',\n 'make_operatorsetid',\n 'make_opsetid',\n 'make_optional',\n 'make_optional_type_proto',\n 'make_sequence',\n 'make_sequence_type_proto',\n 'make_sparse_tensor',\n 'make_sparse_tensor_type_proto',\n 'make_sparse_tensor_value_info',\n 'make_tensor',\n 'make_tensor_sequence_value_info',\n 'make_tensor_type_proto',\n 'make_tensor_value_info',\n 'make_training_info',\n 'make_value_info']\n</code></pre>"},{"location":"onnx/onnx_with_python/#opset","title":"Opset \u548c\u5143\u6570\u636e","text":"<p>\u8ba9\u6211\u4eec\u52a0\u8f7d\u4e4b\u524d\u521b\u5efa\u7684 ONNX \u6587\u4ef6\u5e76\u68c0\u67e5\u5b83\u5177\u6709\u4ec0\u4e48\u6837\u7684\u5143\u6570\u636e\u3002</p> Python<pre><code>from onnx import load\n\nwith open(\"linear_regression.onnx\", \"rb\") as f:\n    onnx_model = load(f)\n\nfor field in ['doc_string', 'domain', 'functions',\n              'ir_version', 'metadata_props', 'model_version',\n              'opset_import', 'producer_name', 'producer_version',\n              'training_info']:\n    print(field, getattr(onnx_model, field))\n</code></pre> <p>Text Only<pre><code>doc_string \ndomain \nfunctions []\nir_version 11\nmetadata_props []\nmodel_version 0\nopset_import [version: 23\n]\nproducer_name \nproducer_version \ntraining_info []\n</code></pre> \u5176\u4e2d\u5927\u90e8\u5206\u90fd\u662f\u7a7a\u7684\uff0c\u56e0\u4e3a\u5728\u521b\u5efa ONNX \u56fe\u65f6\u6ca1\u6709\u586b\u5145\u3002\u5176\u4e2d\u4e24\u4e2a\u6709\u503c\uff1a</p> Python<pre><code>from onnx import load\n\nwith open(\"linear_regression.onnx\", \"rb\") as f:\n    onnx_model = load(f)\n\nprint(\"ir_version:\", onnx_model.ir_version)\nfor opset in onnx_model.opset_import:\n    print(\"opset domain=%r version=%r\" % (opset.domain, opset.version))\n</code></pre> Bash<pre><code>ir_version: 11\nopset domain='' version=23\n</code></pre> <p>IR\u5b9a\u4e49 ONNX \u8bed\u8a00\u7684\u7248\u672c\u3002Opset \u5b9a\u4e49\u6b63\u5728\u4f7f\u7528\u7684\u8fd0\u7b97\u7b26\u7684\u7248\u672c\u3002\u6ca1\u6709\u4efb\u4f55\u7cbe\u5ea6\uff0cONNX \u4f7f\u7528\u5df2\u5b89\u88c5\u5305\u4e2d\u63d0\u4f9b\u7684\u6700\u65b0\u7248\u672c\u3002\u53ef\u4ee5\u4f7f\u7528\u53e6\u4e00\u4e2a\u3002</p> Python<pre><code>from onnx import load\n\nwith open(\"linear_regression.onnx\", \"rb\") as f:\n    onnx_model = load(f)\n\ndel onnx_model.opset_import[:]\nopset = onnx_model.opset_import.add()\nopset.domain = ''\nopset.version = 14\n\nfor opset in onnx_model.opset_import:\n    print(\"opset domain=%r version=%r\" % (opset.domain, opset.version))\n</code></pre> Bash<pre><code>opset domain='' version=14\n</code></pre> <p>\u53ea\u8981\u6240\u6709\u8fd0\u7b97\u7b26\u90fd\u6309\u7167 ONNX \u6307\u5b9a\u7684\u65b9\u5f0f\u5b9a\u4e49\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528\u4efb\u4f55\u64cd\u4f5c\u96c6\u3002\u64cd\u4f5c\u7b26Reshape\u7684\u7b2c 5 \u7248 \u5c06\u5f62\u72b6\u5b9a\u4e49\u4e3a\u8f93\u5165\uff0c\u800c\u4e0d\u662f\u50cf\u7b2c 1 \u7248\u4e2d\u90a3\u6837\u5b9a\u4e49\u4e3a\u5c5e\u6027\u3002\u64cd\u4f5c\u96c6\u8bf4\u660e\u5728\u63cf\u8ff0\u56fe\u5f62\u65f6\u9075\u5faa\u54ea\u4e9b\u89c4\u8303\u3002</p> <p>\u5176\u4ed6\u5143\u6570\u636e\u53ef\u7528\u4e8e\u5b58\u50a8\u4efb\u4f55\u4fe1\u606f\uff0c\u5b58\u50a8\u6709\u5173\u6a21\u578b\u751f\u6210\u65b9\u5f0f\u7684\u4fe1\u606f\uff0c\u4ee5\u53ca\u4f7f\u7528\u7248\u672c\u53f7\u533a\u5206\u4e00\u4e2a\u6a21\u578b\u4e0e\u53e6\u4e00\u4e2a\u6a21\u578b\u7684\u65b9\u5f0f\u3002</p> Python<pre><code>from onnx import load, helper\n\nwith open(\"linear_regression.onnx\", \"rb\") as f:\n    onnx_model = load(f)\n\nonnx_model.model_version = 15\nonnx_model.producer_name = \"something\"\nonnx_model.producer_version = \"some other thing\"\nonnx_model.doc_string = \"documentation about this model\"\nprop = onnx_model.metadata_props\n\ndata = dict(key1=\"value1\", key2=\"value2\")\nhelper.set_model_props(onnx_model, data)\n\nprint(onnx_model)\n</code></pre>  \u7ebf\u6027\u6a21\u578b\u7684\u8ba1\u7b97\u56fe: json \u683c\u5f0f Text Only<pre><code>ir_version: 11\nproducer_name: \"something\"\nproducer_version: \"some other thing\"\nmodel_version: 15\ndoc_string: \"documentation about this model\"\ngraph {\n  node {\n    input: \"X\"\n    input: \"A\"\n    output: \"XA\"\n    op_type: \"MatMul\"\n  }\n  node {\n    input: \"XA\"\n    input: \"B\"\n    output: \"Y\"\n    op_type: \"Add\"\n  }\n  name: \"lr\"\n  input {\n    name: \"X\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n          dim {\n          }\n        }\n      }\n    }\n  }\n  input {\n    name: \"A\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n          dim {\n          }\n        }\n      }\n    }\n  }\n  input {\n    name: \"B\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n          dim {\n          }\n        }\n      }\n    }\n  }\n  output {\n    name: \"Y\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n        }\n      }\n    }\n  }\n}\nopset_import {\n  version: 23\n}\nmetadata_props {\n  key: \"key1\"\n  value: \"value1\"\n}\nmetadata_props {\n  key: \"key2\"\n  value: \"value2\"\n}\n</code></pre> <p>\u5b57\u6bb5training_info\u53ef\u7528\u4e8e\u5b58\u50a8\u9644\u52a0\u56fe\u8868\u3002\u8bf7\u53c2\u9605training_tool_test.py \u4e86\u89e3\u5176\u5de5\u4f5c\u539f\u7406\u3002</p>"},{"location":"onnx/onnx_with_python/#_12","title":"\u5b50\u56fe\uff1a\u6d4b\u8bd5\u548c\u5faa\u73af","text":"<p>\u5b83\u4eec\u901a\u5e38\u88ab\u5f52\u7c7b\u4e3a\u63a7\u5236\u6d41\u3002\u901a\u5e38\u6700\u597d\u907f\u514d\u4f7f\u7528\u5b83\u4eec\uff0c\u56e0\u4e3a\u5b83\u4eec\u7684\u6548\u7387\u4e0d\u5982\u77e9\u9635\u64cd\u4f5c\u5feb\u5f97\u591a\u4e14\u7ecf\u8fc7\u4e86\u4f18\u5316\u3002</p>"},{"location":"onnx/onnx_with_python/#if","title":"\u6761\u4ef6\u7b97\u5b50 IF","text":"<p>\u53ef\u4ee5\u4f7f\u7528\u8fd0\u7b97\u7b26If\u6765\u5b9e\u73b0\u6d4b\u8bd5\u3002\u5b83\u6839\u636e\u4e00\u4e2a\u5e03\u5c14\u503c\u6267\u884c\u4e00\u4e2a\u5b50\u56fe\u6216\u53e6\u4e00\u4e2a\u5b50\u56fe\u3002\u8fd9\u4e0d\u5e38\u7528\uff0c\u56e0\u4e3a\u51fd\u6570\u901a\u5e38\u9700\u8981\u4e00\u6279\u4e2d\u591a\u6b21\u6bd4\u8f83\u7684\u7ed3\u679c\u3002\u4ee5\u4e0b\u793a\u4f8b\u6839\u636e\u7b26\u53f7\u8ba1\u7b97\u77e9\u9635\u4e2d\u6240\u6709\u6d6e\u70b9\u6570\u7684\u603b\u548c\uff0c\u8fd4\u56de 1 \u6216 -1\u3002</p>  \u6761\u4ef6\u7b97\u5b50  Python<pre><code>import numpy\nimport onnx\nfrom onnx.helper import (\n    make_node, make_graph, make_model, make_tensor_value_info)\nfrom onnx.numpy_helper import from_array\nfrom onnx.checker import check_model\nfrom onnxruntime import InferenceSession\n\n# initializers\nvalue = numpy.array([0], dtype=numpy.float32)\nzero = from_array(value, name='zero')\n\n# Same as before, X is the input, Y is the output.\nX = make_tensor_value_info('X', onnx.TensorProto.FLOAT, [None, None])\nY = make_tensor_value_info('Y', onnx.TensorProto.FLOAT, [None])\n\n# The node building the condition. The first one\n# sum over all axes.\nrsum = make_node('ReduceSum', ['X'], ['rsum'])\n# The second compares the result to 0.\ncond = make_node('Greater', ['rsum', 'zero'], ['cond'])\n\n# Builds the graph is the condition is True.\n# Input for then\nthen_out = make_tensor_value_info(\n    'then_out', onnx.TensorProto.FLOAT, None)\n# The constant to return.\nthen_cst = from_array(numpy.array([1]).astype(numpy.float32))\n\n# The only node.\nthen_const_node = make_node(\n    'Constant', inputs=[],\n    outputs=['then_out'],\n    value=then_cst, name='cst1')\n\n# And the graph wrapping these elements.\nthen_body = make_graph(\n    [then_const_node], 'then_body', [], [then_out])\n\n# Same process for the else branch.\nelse_out = make_tensor_value_info(\n    'else_out', onnx.TensorProto.FLOAT, [5])\nelse_cst = from_array(numpy.array([-1]).astype(numpy.float32))\n\nelse_const_node = make_node(\n    'Constant', inputs=[],\n    outputs=['else_out'],\n    value=else_cst, name='cst2')\n\nelse_body = make_graph(\n    [else_const_node], 'else_body',\n    [], [else_out])\n\n# Finally the node If taking both graphs as attributes.\nif_node = onnx.helper.make_node(\n    'If', ['cond'], ['Y'],\n    then_branch=then_body,\n    else_branch=else_body)\n\n# The final graph.\ngraph = make_graph([rsum, cond, if_node], 'if', [X], [Y], [zero])\nonnx_model = make_model(graph)\ncheck_model(onnx_model)\n\n# Let's freeze the opset.\ndel onnx_model.opset_import[:]\nopset = onnx_model.opset_import.add()\nopset.domain = ''\nopset.version = 15\nonnx_model.ir_version = 8\n\n# Save.\nwith open(\"onnx_if_sign.onnx\", \"wb\") as f:\n    f.write(onnx_model.SerializeToString())\n\n# Let's see the output.\nsess = InferenceSession(onnx_model.SerializeToString(),\n                        providers=[\"CPUExecutionProvider\"])\n\nx = numpy.ones((3, 2), dtype=numpy.float32)\nres = sess.run(None, {'X': x})\n\n# It works.\nprint(\"result\", res)\nprint()\n\n# Some display.\nprint(onnx_model)\n</code></pre>  \u6709\u6761\u4ef6\u7b97\u5b50\u7684\u8ba1\u7b97\u56fe: json \u683c\u5f0f Text Only<pre><code>result [array([1.], dtype=float32)]\n\nir_version: 8\ngraph {\n  node {\n    input: \"X\"\n    output: \"rsum\"\n    op_type: \"ReduceSum\"\n  }\n  node {\n    input: \"rsum\"\n    input: \"zero\"\n    output: \"cond\"\n    op_type: \"Greater\"\n  }\n  node {\n    input: \"cond\"\n    output: \"Y\"\n    op_type: \"If\"\n    attribute {\n      name: \"else_branch\"\n      g {\n        node {\n          output: \"else_out\"\n          name: \"cst2\"\n          op_type: \"Constant\"\n          attribute {\n            name: \"value\"\n            t {\n              dims: 1\n              data_type: 1\n              raw_data: \"\\000\\000\\200\\277\"\n            }\n            type: TENSOR\n          }\n        }\n        name: \"else_body\"\n        output {\n          name: \"else_out\"\n          type {\n            tensor_type {\n              elem_type: 1\n              shape {\n                dim {\n                  dim_value: 5\n                }\n              }\n            }\n          }\n        }\n      }\n      type: GRAPH\n    }\n    attribute {\n      name: \"then_branch\"\n      g {\n        node {\n          output: \"then_out\"\n          name: \"cst1\"\n          op_type: \"Constant\"\n          attribute {\n            name: \"value\"\n            t {\n              dims: 1\n              data_type: 1\n              raw_data: \"\\000\\000\\200?\"\n            }\n            type: TENSOR\n          }\n        }\n        name: \"then_body\"\n        output {\n          name: \"then_out\"\n          type {\n            tensor_type {\n              elem_type: 1\n            }\n          }\n        }\n      }\n      type: GRAPH\n    }\n  }\n  name: \"if\"\n  initializer {\n    dims: 1\n    data_type: 1\n    name: \"zero\"\n    raw_data: \"\\000\\000\\000\\000\"\n  }\n  input {\n    name: \"X\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n          dim {\n          }\n        }\n      }\n    }\n  }\n  output {\n    name: \"Y\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n        }\n      }\n    }\n  }\n}\nopset_import {\n  domain: \"\"\n  version: 15\n}\n</code></pre> <p>\u901a\u8fc7\u4e0b\u56fe\u53ef\u4ee5\u66f4\u5bb9\u6613\u5730\u5f62\u8c61\u5316\u6574\u4f53\u3002</p> <p></p> <p>else \u548c then \u5206\u652f\u90fd\u975e\u5e38\u7b80\u5355\u3002\u8282\u70b9If\u751a\u81f3\u53ef\u4ee5\u7528\u8282\u70b9Where\u66ff\u6362\uff0c\u8fd9\u6837\u4f1a\u66f4\u5feb\u3002\u5f53\u4e24\u4e2a\u5206\u652f\u90fd\u8f83\u5927\u65f6\uff0c\u8df3\u8fc7\u4e00\u4e2a\u5206\u652f\u4f1a\u66f4\u6709\u6548\u7387\uff0c\u8fd9\u53d8\u5f97\u5f88\u6709\u8da3\u3002</p>"},{"location":"onnx/onnx_with_python/#scan","title":"\u626b\u63cf\u7b97\u5b50scan","text":"<p>\u9605\u8bfb\u89c4\u8303\u65f6\uff0c\u626b\u63cf\u4f3c\u4e4e\u76f8\u5f53\u590d\u6742\u3002\u5faa\u73af\u904d\u5386\u5f20\u91cf\u7684\u4e00\u7ef4\u5e76\u5c06\u7ed3\u679c\u5b58\u50a8\u5728\u9884\u5206\u914d\u7684\u5f20\u91cf\u4e2d\u5f88\u6709\u7528\u3002</p> <p>\u4ee5\u4e0b\u793a\u4f8b\u4e3a\u56de\u5f52\u95ee\u9898\u5b9e\u73b0\u4e86\u7ecf\u5178\u7684\u6700\u8fd1\u90bb\u7b97\u6cd5\u3002\u7b2c\u4e00\u6b65\u662f\u8ba1\u7b97\u8f93\u5165\u7279\u5f81X\u548c\u8bad\u7ec3\u96c6W\u4e4b\u95f4\u7684\u6210\u5bf9\u8ddd\u79bb\uff1a \u63a5\u4e0b\u6765\u662fTopK\u7b97\u5b50\uff0c\u7528\u4e8e\u63d0\u53d6k \u4e2a\u6700\u8fd1\u90bb\u5c45\u3002</p>  \u626b\u63cf\u7b97\u5b50  Python<pre><code>import numpy\nfrom onnx import numpy_helper, TensorProto\nfrom onnx.helper import (\n    make_model, make_node, set_model_props, make_tensor, make_graph,\n    make_tensor_value_info)\nfrom onnx.checker import check_model\n\n# subgraph\ninitializers = []\nnodes = []\ninputs = []\noutputs = []\n\nvalue = make_tensor_value_info('next_in', 1, [None, 4])\ninputs.append(value)\nvalue = make_tensor_value_info('next', 1, [None])\ninputs.append(value)\n\nvalue = make_tensor_value_info('next_out', 1, [None, None])\noutputs.append(value)\nvalue = make_tensor_value_info('scan_out', 1, [None])\noutputs.append(value)\n\nnode = make_node(\n    'Identity', ['next_in'], ['next_out'],\n    name='cdistd_17_Identity', domain='')\nnodes.append(node)\n\nnode = make_node(\n    'Sub', ['next_in', 'next'], ['cdistdf_17_C0'],\n    name='cdistdf_17_Sub', domain='')\nnodes.append(node)\n\nnode = make_node(\n    'ReduceSumSquare', ['cdistdf_17_C0'], ['cdistdf_17_reduced0'],\n    name='cdistdf_17_ReduceSumSquare', axes=[1], keepdims=0, domain='')\nnodes.append(node)\n\nnode = make_node(\n    'Identity', ['cdistdf_17_reduced0'],\n    ['scan_out'], name='cdistdf_17_Identity', domain='')\nnodes.append(node)\n\ngraph = make_graph(nodes, 'OnnxIdentity',\n                   inputs, outputs, initializers)\n\n# main graph\n\ninitializers = []\nnodes = []\ninputs = []\noutputs = []\n\nopsets = {'': 15, 'ai.onnx.ml': 15}\ntarget_opset = 15  # subgraphs\n\n# initializers\nlist_value = [23.29599822460675, -120.86516699239603, -144.70495899914215, -260.08772982740413,\n              154.65272105889147, -122.23295157108991, 247.45232560871727, -182.83789715805776,\n              -132.92727431421793, 147.48710175784703, 88.27761768038069, -14.87785569894749,\n              111.71487894705504, 301.0518319089629, -29.64235742280055, -113.78493504731911,\n              -204.41218591022718, 112.26561056133608, 66.04032954135549,\n              -229.5428380626701, -33.549262642481615, -140.95737409864623, -87.8145187836131,\n              -90.61397011283958, 57.185488100413366, 56.864151796743855, 77.09054590340892,\n              -187.72501631246712, -42.779503579806025, -21.642642730674076, -44.58517761667535,\n              78.56025104939847, -23.92423223842056, 234.9166231927213, -73.73512816431007,\n              -10.150864499514297, -70.37105466673813, 65.5755688281476, 108.68676290979731, -78.36748960443065]\nvalue = numpy.array(list_value, dtype=numpy.float64).reshape((2, 20))\ntensor = numpy_helper.from_array(\n    value, name='knny_ArrayFeatureExtractorcst')\ninitializers.append(tensor)\n\nlist_value = [1.1394007205963135, -0.6848101019859314, -1.234825849533081, 0.4023416340351105,\n              0.17742614448070526, 0.46278226375579834, -0.4017809331417084, -1.630198359489441,\n              -0.5096521973609924, 0.7774903774261475, -0.4380742907524109, -1.2527953386306763,\n              -1.0485529899597168, 1.950775384902954, -1.420017957687378, -1.7062702178955078,\n              1.8675580024719238, -0.15135720372200012, -0.9772778749465942, 0.9500884413719177,\n              -2.5529897212982178, -0.7421650290489197, 0.653618574142456, 0.8644362092018127,\n              1.5327792167663574, 0.37816253304481506, 1.4693588018417358, 0.154947429895401,\n              -0.6724604368209839, -1.7262825965881348, -0.35955315828323364, -0.8131462931632996,\n              -0.8707971572875977, 0.056165341287851334, -0.5788496732711792, -0.3115525245666504,\n              1.2302906513214111, -0.302302747964859, 1.202379822731018, -0.38732680678367615,\n              2.269754648208618, -0.18718385696411133, -1.4543657302856445, 0.04575851559638977,\n              -0.9072983860969543, 0.12898291647434235, 0.05194539576768875, 0.7290905714035034,\n              1.4940791130065918, -0.8540957570075989, -0.2051582634449005, 0.3130677044391632,\n              1.764052391052246, 2.2408931255340576, 0.40015721321105957, 0.978738009929657,\n              0.06651721894741058, -0.3627411723136902, 0.30247190594673157, -0.6343221068382263,\n              -0.5108051300048828, 0.4283318817615509, -1.18063223361969, -0.02818222902715206,\n              -1.6138978004455566, 0.38690251111984253, -0.21274028718471527, -0.8954665660858154,\n              0.7610377073287964, 0.3336743414402008, 0.12167501449584961, 0.44386324286460876,\n              -0.10321885347366333, 1.4542734622955322, 0.4105985164642334, 0.14404356479644775,\n              -0.8877857327461243, 0.15634897351264954, -1.980796456336975, -0.34791216254234314]\nvalue = numpy.array(list_value, dtype=numpy.float32).reshape((20, 4))\ntensor = numpy_helper.from_array(value, name='Sc_Scancst')\ninitializers.append(tensor)\n\nvalue = numpy.array([2], dtype=numpy.int64)\ntensor = numpy_helper.from_array(value, name='To_TopKcst')\ninitializers.append(tensor)\n\nvalue = numpy.array([2, -1, 2], dtype=numpy.int64)\ntensor = numpy_helper.from_array(value, name='knny_Reshapecst')\ninitializers.append(tensor)\n\n# inputs\nvalue = make_tensor_value_info('input', 1, [None, 4])\ninputs.append(value)\n\n# outputs\nvalue = make_tensor_value_info('variable', 1, [None, 2])\noutputs.append(value)\n\n# nodes\n\nnode = make_node(\n    'Scan', ['input', 'Sc_Scancst'], ['UU032UU', 'UU033UU'],\n    name='Sc_Scan', body=graph, num_scan_inputs=1, domain='')\nnodes.append(node)\n\nnode = make_node(\n    'Transpose', ['UU033UU'], ['Tr_transposed0'],\n    name='Tr_Transpose', perm=[1, 0], domain='')\nnodes.append(node)\n\nnode = make_node(\n    'Sqrt', ['Tr_transposed0'], ['Sq_Y0'],\n    name='Sq_Sqrt', domain='')\nnodes.append(node)\n\nnode = make_node(\n    'TopK', ['Sq_Y0', 'To_TopKcst'], ['To_Values0', 'To_Indices1'],\n    name='To_TopK', largest=0, sorted=1, domain='')\nnodes.append(node)\n\nnode = make_node(\n    'Flatten', ['To_Indices1'], ['knny_output0'],\n    name='knny_Flatten', domain='')\nnodes.append(node)\n\nnode = make_node(\n    'ArrayFeatureExtractor',\n    ['knny_ArrayFeatureExtractorcst', 'knny_output0'], ['knny_Z0'],\n    name='knny_ArrayFeatureExtractor', domain='ai.onnx.ml')\nnodes.append(node)\n\nnode = make_node(\n    'Reshape', ['knny_Z0', 'knny_Reshapecst'], ['knny_reshaped0'],\n    name='knny_Reshape', allowzero=0, domain='')\nnodes.append(node)\n\nnode = make_node(\n    'Transpose', ['knny_reshaped0'], ['knny_transposed0'],\n    name='knny_Transpose', perm=[1, 0, 2], domain='')\nnodes.append(node)\n\nnode = make_node(\n    'Cast', ['knny_transposed0'], ['Ca_output0'],\n    name='Ca_Cast', to=TensorProto.FLOAT, domain='')\nnodes.append(node)\n\nnode = make_node(\n    'ReduceMean', ['Ca_output0'], ['variable'],\n    name='Re_ReduceMean', axes=[2], keepdims=0, domain='')\nnodes.append(node)\n\n# graph\ngraph = make_graph(nodes, 'KNN regressor', inputs, outputs, initializers)\n\n# model\nonnx_model = make_model(graph)\nonnx_model.ir_version = 8\nonnx_model.producer_name = 'skl2onnx'\nonnx_model.producer_version = ''\nonnx_model.domain = 'ai.onnx'\nonnx_model.model_version = 0\nonnx_model.doc_string = ''\nset_model_props(onnx_model, {})\n\n# opsets\ndel onnx_model.opset_import[:]\nfor dom, value in opsets.items():\n    op_set = onnx_model.opset_import.add()\n    op_set.domain = dom\n    op_set.version = value\n\ncheck_model(onnx_model)\nwith open(\"knnr.onnx\", \"wb\") as f:\n    f.write(onnx_model.SerializeToString())\n\nprint(onnx_model)\n</code></pre>   \u6709\u626b\u63cf\u7b97\u5b50\u7684\u8ba1\u7b97\u56fe: json \u683c\u5f0f  Text Only<pre><code>ir_version: 8\nproducer_name: \"skl2onnx\"\nproducer_version: \"\"\ndomain: \"ai.onnx\"\nmodel_version: 0\ndoc_string: \"\"\ngraph {\n  node {\n    input: \"input\"\n    input: \"Sc_Scancst\"\n    output: \"UU032UU\"\n    output: \"UU033UU\"\n    name: \"Sc_Scan\"\n    op_type: \"Scan\"\n    attribute {\n      name: \"body\"\n      g {\n        node {\n          input: \"next_in\"\n          output: \"next_out\"\n          name: \"cdistd_17_Identity\"\n          op_type: \"Identity\"\n          domain: \"\"\n        }\n        node {\n          input: \"next_in\"\n          input: \"next\"\n          output: \"cdistdf_17_C0\"\n          name: \"cdistdf_17_Sub\"\n          op_type: \"Sub\"\n          domain: \"\"\n        }\n        node {\n          input: \"cdistdf_17_C0\"\n          output: \"cdistdf_17_reduced0\"\n          name: \"cdistdf_17_ReduceSumSquare\"\n          op_type: \"ReduceSumSquare\"\n          attribute {\n            name: \"axes\"\n            ints: 1\n            type: INTS\n          }\n          attribute {\n            name: \"keepdims\"\n            i: 0\n            type: INT\n          }\n          domain: \"\"\n        }\n        node {\n          input: \"cdistdf_17_reduced0\"\n          output: \"scan_out\"\n          name: \"cdistdf_17_Identity\"\n          op_type: \"Identity\"\n          domain: \"\"\n        }\n        name: \"OnnxIdentity\"\n        input {\n          name: \"next_in\"\n          type {\n            tensor_type {\n              elem_type: 1\n              shape {\n                dim {\n                }\n                dim {\n                  dim_value: 4\n                }\n              }\n            }\n          }\n        }\n        input {\n          name: \"next\"\n          type {\n            tensor_type {\n              elem_type: 1\n              shape {\n                dim {\n                }\n              }\n            }\n          }\n        }\n        output {\n          name: \"next_out\"\n          type {\n            tensor_type {\n              elem_type: 1\n              shape {\n                dim {\n                }\n                dim {\n                }\n              }\n            }\n          }\n        }\n        output {\n          name: \"scan_out\"\n          type {\n            tensor_type {\n              elem_type: 1\n              shape {\n                dim {\n                }\n              }\n            }\n          }\n        }\n      }\n      type: GRAPH\n    }\n    attribute {\n      name: \"num_scan_inputs\"\n      i: 1\n      type: INT\n    }\n    domain: \"\"\n  }\n  node {\n    input: \"UU033UU\"\n    output: \"Tr_transposed0\"\n    name: \"Tr_Transpose\"\n    op_type: \"Transpose\"\n    attribute {\n      name: \"perm\"\n      ints: 1\n      ints: 0\n      type: INTS\n    }\n    domain: \"\"\n  }\n  node {\n    input: \"Tr_transposed0\"\n    output: \"Sq_Y0\"\n    name: \"Sq_Sqrt\"\n    op_type: \"Sqrt\"\n    domain: \"\"\n  }\n  node {\n    input: \"Sq_Y0\"\n    input: \"To_TopKcst\"\n    output: \"To_Values0\"\n    output: \"To_Indices1\"\n    name: \"To_TopK\"\n    op_type: \"TopK\"\n    attribute {\n      name: \"largest\"\n      i: 0\n      type: INT\n    }\n    attribute {\n      name: \"sorted\"\n      i: 1\n      type: INT\n    }\n    domain: \"\"\n  }\n  node {\n    input: \"To_Indices1\"\n    output: \"knny_output0\"\n    name: \"knny_Flatten\"\n    op_type: \"Flatten\"\n    domain: \"\"\n  }\n  node {\n    input: \"knny_ArrayFeatureExtractorcst\"\n    input: \"knny_output0\"\n    output: \"knny_Z0\"\n    name: \"knny_ArrayFeatureExtractor\"\n    op_type: \"ArrayFeatureExtractor\"\n    domain: \"ai.onnx.ml\"\n  }\n  node {\n    input: \"knny_Z0\"\n    input: \"knny_Reshapecst\"\n    output: \"knny_reshaped0\"\n    name: \"knny_Reshape\"\n    op_type: \"Reshape\"\n    attribute {\n      name: \"allowzero\"\n      i: 0\n      type: INT\n    }\n    domain: \"\"\n  }\n  node {\n    input: \"knny_reshaped0\"\n    output: \"knny_transposed0\"\n    name: \"knny_Transpose\"\n    op_type: \"Transpose\"\n    attribute {\n      name: \"perm\"\n      ints: 1\n      ints: 0\n      ints: 2\n      type: INTS\n    }\n    domain: \"\"\n  }\n  node {\n    input: \"knny_transposed0\"\n    output: \"Ca_output0\"\n    name: \"Ca_Cast\"\n    op_type: \"Cast\"\n    attribute {\n      name: \"to\"\n      i: 1\n      type: INT\n    }\n    domain: \"\"\n  }\n  node {\n    input: \"Ca_output0\"\n    output: \"variable\"\n    name: \"Re_ReduceMean\"\n    op_type: \"ReduceMean\"\n    attribute {\n      name: \"axes\"\n      ints: 2\n      type: INTS\n    }\n    attribute {\n      name: \"keepdims\"\n      i: 0\n      type: INT\n    }\n    domain: \"\"\n  }\n  name: \"KNN regressor\"\n  initializer {\n    dims: 2\n    dims: 20\n    data_type: 11\n    name: \"knny_ArrayFeatureExtractorcst\"\n    raw_data: \",\\\\&amp;\\212\\306K7@\\333z`\\345^7^\\300\\304\\312,\\006\\217\\026b\\300Z9dWgAp\\300.+F\\027\\343Tc@\\203\\330\\264\\255\\350\\216^\\300\\260\\022\\216sy\\356n@\\237h\\263\\r\\320\\332f\\300\\224\\277.;\\254\\235`\\300\\336\\370lV\\226ob@\\261\\201\\362|\\304\\021V@c,[Mv\\301-\\300\\322\\214\\240\\223\\300\\355[@)\\036\\262M\\324\\320r@nE;\\211q\\244=\\300\\021n5`&lt;r\\\\\\300\\207\\211\\201\\2400\\215i\\300H\\232p\\303\\377\\020\\\\@\\317K[\\302\\224\\202P@&amp;\\306\\355\\355^\\261l\\300\\301/\\377&lt;N\\306@\\300#w\\001\\317\\242\\236a\\300$fd\\023!\\364U\\300\\204\\327LIK\\247V\\300J\\211\\366\\022\\276\\227L@\\262\\345\\254\\206\\234nL@f{\\013\\201\\313ES@\\234\\343hU3wg\\300\\3370\\367\\305\\306cE\\300\\336A\\347;\\204\\2445\\300f\\374\\242\\031\\347JF\\300\\325\\2557\\'\\333\\243S@\\331\\354\\345{\\232\\3547\\300\\307o)\\372T]m@#\\005\\000W\\014oR\\300\\'\\025\\227\\034&gt;M$\\300\\310\\252\\022\\\\\\277\\227Q\\300l_\\243\\036\\326dP@\\333kk\\354\\363+[@\\223)\\036\\363\\204\\227S\\300\"\n  }\n  initializer {\n    dims: 20\n    dims: 4\n    data_type: 1\n    name: \"Sc_Scancst\"\n    raw_data: \"\\342\\327\\221?\\267O/\\277\\306\\016\\236\\277\\271\\377\\315&gt;3\\2575&gt;\\314\\361\\354&gt;;\\266\\315\\276W\\252\\320\\277\\221x\\002\\277\\234\\tG?FK\\340\\276\\231[\\240\\277\\3746\\206\\277\\002\\263\\371?&amp;\\303\\265\\277\\020g\\332\\277$\\014\\357?b\\375\\032\\276\\342.z\\277\\3778s?/d#\\300\\207\\376=\\277\\214S\\'?\\261K]?\\0342\\304?\\205\\236\\301&gt;\\363\\023\\274?\\212\\252\\036&gt;^&amp;,\\277\\324\\366\\334\\277Z\\027\\270\\276[*P\\277\\220\\354^\\277\\241\\rf=~/\\024\\277\\320\\203\\237\\276*z\\235?m\\307\\232\\276\\225\\347\\231?\\263O\\306\\276\\251C\\021@ \\255?\\276\\250(\\272\\277Hm;=\\265Dh\\277\\031\\024\\004&gt;\\262\\304T=\\256\\245:?\\374=\\277?\\005\\246Z\\277\\002\\025R\\276iJ\\240&gt;x\\314\\341?\\313j\\017@h\\341\\314&gt;\\223\\216z?.:\\210=6\\271\\271\\276\\231\\335\\232&gt;\\357b\\\"\\277 \\304\\002\\277QN\\333&gt;\\365\\036\\227\\277k\\336\\346\\2744\\224\\316\\277\\026\\030\\306&gt;\\227\\330Y\\276L=e\\277^\\323B?]\\327\\252&gt;\\3000\\371=\\013B\\343&gt;hd\\323\\275\\242%\\272?\\3709\\322&gt;(\\200\\023&gt;\\355Ec\\277\\362\\031 &gt;\\275\\212\\375\\277\\213!\\262\\276\"\n  }\n  initializer {\n    dims: 1\n    data_type: 7\n    name: \"To_TopKcst\"\n    raw_data: \"\\002\\000\\000\\000\\000\\000\\000\\000\"\n  }\n  initializer {\n    dims: 3\n    data_type: 7\n    name: \"knny_Reshapecst\"\n    raw_data: \"\\002\\000\\000\\000\\000\\000\\000\\000\\377\\377\\377\\377\\377\\377\\377\\377\\002\\000\\000\\000\\000\\000\\000\\000\"\n  }\n  input {\n    name: \"input\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n          dim {\n            dim_value: 4\n          }\n        }\n      }\n    }\n  }\n  output {\n    name: \"variable\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n          dim {\n            dim_value: 2\n          }\n        }\n      }\n    }\n  }\n}\nopset_import {\n  domain: \"\"\n  version: 15\n}\nopset_import {\n  domain: \"ai.onnx.ml\"\n  version: 15\n}\n</code></pre> <p>\u4ece\u89c6\u89c9\u4e0a\u770b\uff0c\u5b83\u770b\u8d77\u6765\u5982\u4e0b\u6240\u793a\uff1a </p> <p>\u5b50\u56fe\u7531\u64cd\u4f5c\u7b26Scan\u6267\u884c\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6709\u4e00\u4e2a\u626b\u63cf\u8f93\u5165\uff0c\u8fd9\u610f\u5473\u7740\u64cd\u4f5c\u7b26\u4ec5\u6784\u5efa\u4e00\u4e2a\u8f93\u51fa\u3002</p> Python<pre><code>node = make_node(\n    'Scan', ['X1', 'X2'], ['Y1', 'Y2'],\n    name='Sc_Scan', body=graph, num_scan_inputs=1, domain='')\n</code></pre> <p>\u5728\u7b2c\u4e00\u6b21\u8fed\u4ee3\u4e2d\uff0c\u5b50\u56fe\u5f97\u5230X1\u548cX2\u7684\u7b2c\u4e00\u884c\u3002\u8be5\u56fe\u4ea7\u751f\u4e24\u4e2a\u8f93\u51fa\u3002\u7b2c\u4e00\u4e2a\u5728\u4e0b\u4e00\u6b21\u8fed\u4ee3\u4e2d\u66ff\u6362X1 \uff0c\u7b2c\u4e8c\u4e2a\u5b58\u50a8\u5728\u5bb9\u5668\u4e2d\u5f62\u6210Y2 \u3002\u5728\u7b2c\u4e8c\u6b21\u8fed\u4ee3\u4e2d\uff0c\u5b50\u56fe\u7684\u7b2c\u4e8c\u4e2a\u8f93\u5165\u662fX2\u7684\u7b2c\u4e8c\u884c\u3002\u8fd9\u91cc\u6709\u4e00\u4e2a\u7b80\u77ed\u7684\u603b\u7ed3\u3002\u7eff\u8272\u662f\u7b2c\u4e00\u6b21\u8fed\u4ee3\uff0c\u84dd\u8272\u662f\u7b2c\u4e8c\u6b21\u8fed\u4ee3\u3002</p> <p></p>"},{"location":"onnx/onnx_with_python/#_13","title":"\u51fd\u6570","text":"<p>\u5982\u4e0a\u4e00\u7ae0\u6240\u8ff0\uff0c\u5982\u679c\u5b58\u5728\u51fd\u6570\u7684\u5177\u4f53\u5b9e\u73b0\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528\u51fd\u6570\u6765\u7f29\u77ed\u6784\u5efa\u6a21\u578b\u7684\u4ee3\u7801\uff0c\u5e76\u4e3a\u8fd0\u884c\u65f6\u8fd0\u884c\u9884\u6d4b\u63d0\u4f9b\u66f4\u591a\u53ef\u80fd\u6027\uff0c\u4ece\u800c\u52a0\u5feb\u8fd0\u884c\u901f\u5ea6\u3002\u5982\u679c\u6ca1\u6709\uff0c\u8fd0\u884c\u65f6\u4ecd\u7136\u53ef\u4ee5\u4f7f\u7528\u57fa\u4e8e\u73b0\u6709\u8fd0\u7b97\u7b26\u7684\u9ed8\u8ba4\u5b9e\u73b0\u3002</p> <p>Functionmake_function\u7528\u4e8e\u5b9a\u4e49\u51fd\u6570\u3002\u5b83\u7684\u5de5\u4f5c\u65b9\u5f0f\u7c7b\u4f3c\u4e8e\u7c7b\u578b\u8f83\u5c11\u7684\u56fe\u3002\u5b83\u66f4\u50cf\u4e00\u4e2a\u6a21\u677f\u3002\u6b64 API \u53ef\u80fd\u4f1a\u6f14\u53d8\u3002\u5b83\u4e5f\u4e0d\u5305\u542b\u521d\u59cb\u5316\u7a0b\u5e8f\u3002</p>"},{"location":"onnx/onnx_with_python/#_14","title":"\u6ca1\u6709\u5c5e\u6027\u7684\u51fd\u6570","text":"<p>\u8fd9\u662f\u6bd4\u8f83\u7b80\u5355\u7684\u60c5\u51b5\u3002\u51fd\u6570\u7684\u6bcf\u4e2a\u8f93\u5165\u90fd\u662f\u6267\u884c\u65f6\u5df2\u77e5\u7684\u52a8\u6001\u5bf9\u8c61\u3002</p> Python<pre><code>import numpy\nfrom onnx import numpy_helper, TensorProto\nfrom onnx.helper import (\n    make_model, make_node, set_model_props, make_tensor,\n    make_graph, make_tensor_value_info, make_opsetid,\n    make_function)\nfrom onnx.checker import check_model\n\nnew_domain = 'custom'\nopset_imports = [make_opsetid(\"\", 14), make_opsetid(new_domain, 1)]\n\n# Let's define a function for a linear regression\n\nnode1 = make_node('MatMul', ['X', 'A'], ['XA'])\nnode2 = make_node('Add', ['XA', 'B'], ['Y'])\n\nlinear_regression = make_function(\n    new_domain,            # domain name\n    'LinearRegression',     # function name\n    ['X', 'A', 'B'],        # input names\n    ['Y'],                  # output names\n    [node1, node2],         # nodes\n    opset_imports,          # opsets\n    [])                     # attribute names\n\n# Let's use it in a graph.\n\nX = make_tensor_value_info('X', TensorProto.FLOAT, [None, None])\nA = make_tensor_value_info('A', TensorProto.FLOAT, [None, None])\nB = make_tensor_value_info('B', TensorProto.FLOAT, [None, None])\nY = make_tensor_value_info('Y', TensorProto.FLOAT, [None])\n\ngraph = make_graph(\n    [make_node('LinearRegression', ['X', 'A', 'B'], ['Y1'], domain=new_domain),\n     make_node('Abs', ['Y1'], ['Y'])],\n    'example',\n    [X, A, B], [Y])\n\nonnx_model = make_model(\n    graph, opset_imports=opset_imports,\n    functions=[linear_regression])  # functions to add)\ncheck_model(onnx_model)\n\n# the work is done, let's display it...\nprint(onnx_model)\n</code></pre> Bash<pre><code>ir_version: 11\ngraph {\n  node {\n    input: \"X\"\n    input: \"A\"\n    input: \"B\"\n    output: \"Y1\"\n    op_type: \"LinearRegression\"\n    domain: \"custom\"\n  }\n  node {\n    input: \"Y1\"\n    output: \"Y\"\n    op_type: \"Abs\"\n  }\n  name: \"example\"\n  input {\n    name: \"X\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n          dim {\n          }\n        }\n      }\n    }\n  }\n  input {\n    name: \"A\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n          dim {\n          }\n        }\n      }\n    }\n  }\n  input {\n    name: \"B\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n          dim {\n          }\n        }\n      }\n    }\n  }\n  output {\n    name: \"Y\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n        }\n      }\n    }\n  }\n}\nopset_import {\n  domain: \"\"\n  version: 14\n}\nopset_import {\n  domain: \"custom\"\n  version: 1\n}\nfunctions {\n  name: \"LinearRegression\"\n  input: \"X\"\n  input: \"A\"\n  input: \"B\"\n  output: \"Y\"\n  node {\n    input: \"X\"\n    input: \"A\"\n    output: \"XA\"\n    op_type: \"MatMul\"\n  }\n  node {\n    input: \"XA\"\n    input: \"B\"\n    output: \"Y\"\n    op_type: \"Add\"\n  }\n  opset_import {\n    domain: \"\"\n    version: 14\n  }\n  opset_import {\n    domain: \"custom\"\n    version: 1\n  }\n  domain: \"custom\"\n}\n</code></pre>"},{"location":"onnx/onnx_with_python/#_15","title":"\u5177\u6709\u5c5e\u6027\u7684\u51fd\u6570","text":"<p>\u4ee5\u4e0b\u51fd\u6570\u4e0e\u4e0a\u4e00\u4e2a\u51fd\u6570\u7b49\u6548\uff0c\u53ea\u662f\u8f93\u5165B\u88ab\u8f6c\u6362\u4e3a\u540d\u4e3abias \u7684\u53c2\u6570\u3002\u4ee3\u7801\u51e0\u4e4e\u76f8\u540c\uff0c\u53ea\u662f bias \u73b0\u5728\u662f\u4e00\u4e2a\u5e38\u91cf\u3002\u5728\u51fd\u6570\u5b9a\u4e49\u5185\u90e8\uff0c\u521b\u5efa\u4e86\u4e00\u4e2a\u8282\u70b9Constant\u4ee5\u5c06\u53c2\u6570\u4f5c\u4e3a\u7ed3\u679c\u63d2\u5165\u3002\u5b83\u901a\u8fc7\u5c5e\u6027\u94fe\u63a5\u5230\u53c2\u6570ref_attr_name\u3002 Python<pre><code>import numpy\nfrom onnx import numpy_helper, TensorProto, AttributeProto\nfrom onnx.helper import (\n    make_model, make_node, set_model_props, make_tensor,\n    make_graph, make_tensor_value_info, make_opsetid,\n    make_function)\nfrom onnx.checker import check_model\n\nnew_domain = 'custom'\nopset_imports = [make_opsetid(\"\", 14), make_opsetid(new_domain, 1)]\n\n# Let's define a function for a linear regression\n# The first step consists in creating a constant\n# equal to the input parameter of the function.\ncst = make_node('Constant',  [], ['B'])\n\natt = AttributeProto()\natt.name = \"value\"\n\n# This line indicates the value comes from the argument\n# named 'bias' the function is given.\natt.ref_attr_name = \"bias\"\natt.type = AttributeProto.TENSOR\ncst.attribute.append(att)\n\nnode1 = make_node('MatMul', ['X', 'A'], ['XA'])\nnode2 = make_node('Add', ['XA', 'B'], ['Y'])\n\nlinear_regression = make_function(\n    new_domain,            # domain name\n    'LinearRegression',     # function name\n    ['X', 'A'],             # input names\n    ['Y'],                  # output names\n    [cst, node1, node2],    # nodes\n    opset_imports,          # opsets\n    [\"bias\"])               # attribute names\n\n# Let's use it in a graph.\n\nX = make_tensor_value_info('X', TensorProto.FLOAT, [None, None])\nA = make_tensor_value_info('A', TensorProto.FLOAT, [None, None])\nB = make_tensor_value_info('B', TensorProto.FLOAT, [None, None])\nY = make_tensor_value_info('Y', TensorProto.FLOAT, [None])\n\ngraph = make_graph(\n    [make_node('LinearRegression', ['X', 'A'], ['Y1'], domain=new_domain,\n               # bias is now an argument of the function and is defined as a tensor\n               bias=make_tensor('former_B', TensorProto.FLOAT, [1], [0.67])),\n     make_node('Abs', ['Y1'], ['Y'])],\n    'example',\n    [X, A], [Y])\n\nonnx_model = make_model(\n    graph, opset_imports=opset_imports,\n    functions=[linear_regression])  # functions to add)\ncheck_model(onnx_model)\n\n# the work is done, let's display it...\nprint(onnx_model)\n</code></pre> Bash<pre><code>ir_version: 11\ngraph {\n  node {\n    input: \"X\"\n    input: \"A\"\n    output: \"Y1\"\n    op_type: \"LinearRegression\"\n    attribute {\n      name: \"bias\"\n      t {\n        dims: 1\n        data_type: 1\n        float_data: 0.6700000166893005\n        name: \"former_B\"\n      }\n      type: TENSOR\n    }\n    domain: \"custom\"\n  }\n  node {\n    input: \"Y1\"\n    output: \"Y\"\n    op_type: \"Abs\"\n  }\n  name: \"example\"\n  input {\n    name: \"X\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n          dim {\n          }\n        }\n      }\n    }\n  }\n  input {\n    name: \"A\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n          dim {\n          }\n        }\n      }\n    }\n  }\n  output {\n    name: \"Y\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n          }\n        }\n      }\n    }\n  }\n}\nopset_import {\n  domain: \"\"\n  version: 14\n}\nopset_import {\n  domain: \"custom\"\n  version: 1\n}\nfunctions {\n  name: \"LinearRegression\"\n  input: \"X\"\n  input: \"A\"\n  output: \"Y\"\n  attribute: \"bias\"\n  node {\n    output: \"B\"\n    op_type: \"Constant\"\n    attribute {\n      name: \"value\"\n      type: TENSOR\n      ref_attr_name: \"bias\"\n    }\n  }\n  node {\n    input: \"X\"\n    input: \"A\"\n    output: \"XA\"\n    op_type: \"MatMul\"\n  }\n  node {\n    input: \"XA\"\n    input: \"B\"\n    output: \"Y\"\n    op_type: \"Add\"\n  }\n  opset_import {\n    domain: \"\"\n    version: 14\n  }\n  opset_import {\n    domain: \"custom\"\n    version: 1\n  }\n  domain: \"custom\"\n}\n</code></pre></p>"},{"location":"onnx/onnx_with_python/#_16","title":"\u89e3\u6790","text":"<p>onnx \u6a21\u5757\u63d0\u4f9b\u4e86\u4e00\u79cd\u66f4\u5feb\u7684\u65b9\u5f0f\u6765\u5b9a\u4e49\u56fe\u5f62\uff0c\u5e76\u4e14\u66f4\u5bb9\u6613\u9605\u8bfb\u3002\u5f53\u56fe\u5f62\u662f\u5728\u5355\u4e2a\u51fd\u6570\u4e2d\u6784\u5efa\u65f6\uff0c\u8fd9\u5f88\u5bb9\u6613\u4f7f\u7528\uff0c\u5f53\u56fe\u5f62\u662f\u7531\u8f6c\u6362\u673a\u5668\u5b66\u4e60\u7ba1\u9053\u7684\u6bcf\u4e2a\u90e8\u5206\u7684\u8bb8\u591a\u4e0d\u540c\u51fd\u6570\u6784\u5efa\u65f6\uff0c\u5c31\u4e0d\u90a3\u4e48\u5bb9\u6613\u4e86\u3002</p> Python<pre><code>import onnx.parser\nfrom onnx.checker import check_model\n\ninput = '''\n    &lt;\n        ir_version: 8,\n        opset_import: [ \"\" : 15]\n    &gt;\n    agraph (float[I,J] X, float[I] A, float[I] B) =&gt; (float[I] Y) {\n        XA = MatMul(X, A)\n        Y = Add(XA, B)\n    }\n    '''\nonnx_model = onnx.parser.parse_model(input)\ncheck_model(onnx_model)\n\nprint(onnx_model)\n</code></pre> Bash<pre><code>ir_version: 8\ngraph {\nnode {\n    input: \"X\"\n    input: \"A\"\n    output: \"XA\"\n    op_type: \"MatMul\"\n    domain: \"\"\n}\nnode {\n    input: \"XA\"\n    input: \"B\"\n    output: \"Y\"\n    op_type: \"Add\"\n    domain: \"\"\n}\nname: \"agraph\"\ninput {\n    name: \"X\"\n    type {\n    tensor_type {\n        elem_type: 1\n        shape {\n        dim {\n            dim_param: \"I\"\n        }\n        dim {\n            dim_param: \"J\"\n        }\n        }\n    }\n    }\n}\ninput {\n    name: \"A\"\n    type {\n    tensor_type {\n        elem_type: 1\n        shape {\n        dim {\n            dim_param: \"I\"\n        }\n        }\n    }\n    }\n}\ninput {\n    name: \"B\"\n    type {\n    tensor_type {\n        elem_type: 1\n        shape {\n        dim {\n            dim_param: \"I\"\n        }\n        }\n    }\n    }\n}\noutput {\n    name: \"Y\"\n    type {\n    tensor_type {\n        elem_type: 1\n        shape {\n        dim {\n            dim_param: \"I\"\n        }\n        }\n    }\n    }\n}\n}\nopset_import {\ndomain: \"\"\nversion: 15\n}\n</code></pre> <p>\u8fd9\u79cd\u65b9\u5f0f\u7528\u4e8e\u521b\u5efa\u5c0f\u6a21\u578b\uff0c\u4f46\u5728\u8f6c\u6362\u5e93\u65f6\u5f88\u5c11\u4f7f\u7528\u3002</p>"},{"location":"onnx/onnx_with_python/#_17","title":"\u68c0\u67e5\u5668\u548c\u5f62\u72b6\u63a8\u65ad","text":"<p>onnx \u63d0\u4f9b\u4e86\u4e00\u4e2a\u51fd\u6570\u6765\u68c0\u67e5\u6a21\u578b\u662f\u5426\u6709\u6548\u3002\u53ea\u8981\u68c0\u6d4b\u5230\u4e0d\u4e00\u81f4\uff0c\u5b83\u5c31\u4f1a\u68c0\u67e5\u8f93\u5165\u7c7b\u578b\u6216\u5f62\u72b6\u3002\u4ee5\u4e0b\u793a\u4f8b\u6dfb\u52a0\u4e86\u4e24\u4e2a\u4e0d\u540c\u7c7b\u578b\u7684\u77e9\u9635\uff0c\u8fd9\u662f\u4e0d\u5141\u8bb8\u7684\u3002</p> Python<pre><code>import onnx.parser\nimport onnx.checker\n\ninput = '''\n    &lt;\n        ir_version: 8,\n        opset_import: [ \"\" : 15]\n    &gt;\n    agraph (float[I,4] X, float[4,2] A, int[4] B) =&gt; (float[I] Y) {\n        XA = MatMul(X, A)\n        Y = Add(XA, B)\n    }\n    '''\ntry:\n    onnx_model = onnx.parser.parse_model(input)\n    onnx.checker.check_model(onnx_model)\nexcept Exception as e:\n    print(e)\n</code></pre> Bash<pre><code>b'[ParseError at position (line: 6 column: 44)]\\nError context:     agraph (float[I,4] X, float[4,2] A, int[4] B) =&gt; (float[I] Y) {\\nExpected character ) not found.'\n</code></pre> <p>check_model\u7531\u4e8e\u4e0d\u4e00\u81f4\u800c\u5f15\u53d1\u9519\u8bef\u3002\u8fd9\u9002\u7528\u4e8e\u4e3b\u57df\u6216 ML \u57df\u4e2d\u5b9a\u4e49\u7684\u6240\u6709\u8fd0\u7b97\u7b26\u3002\u5bf9\u4e8e\u4efb\u4f55\u89c4\u8303\u4e2d\u672a\u5b9a\u4e49\u7684\u81ea\u5b9a\u4e49\u8fd0\u7b97\u7b26\uff0c\u5b83\u4fdd\u6301\u6c89\u9ed8\u3002</p> <p>\u5f62\u72b6\u63a8\u65ad\u6709\u4e00\u4e2a\u76ee\u7684\uff1a\u4f30\u8ba1\u4e2d\u95f4\u7ed3\u679c\u7684\u5f62\u72b6\u548c\u7c7b\u578b\u3002\u5982\u679c\u5df2\u77e5\uff0c\u8fd0\u884c\u65f6\u53ef\u4ee5\u9884\u5148\u4f30\u8ba1\u5185\u5b58\u6d88\u8017\u5e76\u4f18\u5316\u8ba1\u7b97\u3002\u5b83\u53ef\u4ee5\u878d\u5408\u4e00\u4e9b\u8fd0\u7b97\u7b26\uff0c\u5b83\u53ef\u4ee5\u8fdb\u884c\u73b0\u573a\u8ba1\u7b97\u2026\u2026</p> Python<pre><code>import onnx.parser\nfrom onnx import helper, shape_inference\n\ninput = '''\n    &lt;\n        ir_version: 8,\n        opset_import: [ \"\" : 15]\n    &gt;\n    agraph (float[I,4] X, float[4,2] A, float[4] B) =&gt; (float[I] Y) {\n        XA = MatMul(X, A)\n        Y = Add(XA, B)\n    }\n    '''\nonnx_model = onnx.parser.parse_model(input)\ninferred_model = shape_inference.infer_shapes(onnx_model)\n\nprint(inferred_model)\n</code></pre> Bash<pre><code>ir_version: 8\ngraph {\n  node {\n    input: \"X\"\n    input: \"A\"\n    output: \"XA\"\n    op_type: \"MatMul\"\n    domain: \"\"\n  }\n  node {\n    input: \"XA\"\n    input: \"B\"\n    output: \"Y\"\n    op_type: \"Add\"\n    domain: \"\"\n  }\n  name: \"agraph\"\n  input {\n    name: \"X\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n            dim_param: \"I\"\n          }\n          dim {\n            dim_value: 4\n          }\n        }\n      }\n    }\n  }\n  input {\n    name: \"A\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n            dim_value: 4\n          }\n          dim {\n            dim_value: 2\n          }\n        }\n      }\n    }\n  }\n  input {\n    name: \"B\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n            dim_value: 4\n          }\n        }\n      }\n    }\n  }\n  output {\n    name: \"Y\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n            dim_param: \"I\"\n          }\n        }\n      }\n    }\n  }\n  value_info {\n    name: \"XA\"\n    type {\n      tensor_type {\n        elem_type: 1\n        shape {\n          dim {\n            dim_param: \"I\"\n          }\n          dim {\n            dim_value: 2\n          }\n        }\n      }\n    }\n  }\n}\nopset_import {\n  domain: \"\"\n  version: 15\n}\n</code></pre> <p>\u6709\u4e00\u4e2a\u65b0\u7684\u5c5e\u6027value_info\u7528\u4e8e\u5b58\u50a8\u63a8\u65ad\u7684\u5f62\u72b6\u3002\u5b57\u6bcdI\u53ef\u4ee5\u770b\u4f5c\u4e00\u4e2a\u53d8\u91cf\u3002\u5b83\u53d6\u51b3\u4e8e\u8f93\u5165\uff0c\u4f46\u51fd\u6570\u80fd\u591f\u5224\u65ad\u54ea\u4e2a\u4e2d\u95f4\u7ed3\u679c\u5c06\u5171\u4eab\u76f8\u540c\u7684\u7ef4\u5ea6\u3002\u5f62\u72b6\u63a8\u65ad\u5e76\u4e0d\u603b\u662f\u6709\u6548\u3002\u4f8b\u5982\uff0cReshape \u8fd0\u7b97\u7b26\u3002\u5f62\u72b6\u63a8\u65ad\u4ec5\u5728\u5f62\u72b6\u6052\u5b9a\u65f6\u624d\u6709\u6548\u3002\u5982\u679c\u4e0d\u662f\u6052\u5b9a\u7684\uff0c\u5219\u9664\u975e\u4ee5\u4e0b\u8282\u70b9\u9700\u8981\u7279\u5b9a\u5f62\u72b6\uff0c\u5426\u5219\u65e0\u6cd5\u8f7b\u677e\u63a8\u65ad\u5f62\u72b6\u3002dim_param: \"I\"</p>"},{"location":"onnx/onnx_with_python/#_18","title":"\u8bc4\u4f30\u548c\u8fd0\u884c\u65f6","text":"<p>ONNX \u6807\u51c6\u5141\u8bb8\u6846\u67b6\u4ee5 ONNX \u683c\u5f0f\u5bfc\u51fa\u7ecf\u8fc7\u8bad\u7ec3\u7684\u6a21\u578b\uff0c\u5e76\u4f7f\u7528\u652f\u6301 ONNX \u683c\u5f0f\u7684\u4efb\u4f55\u540e\u7aef\u8fdb\u884c\u63a8\u7406\u3002onnxruntime \u662f\u4e00\u79cd\u6709\u6548\u7684\u9009\u9879\u3002\u5b83\u9002\u7528\u4e8e\u8bb8\u591a\u5e73\u53f0\u3002\u5b83\u9488\u5bf9\u5feb\u901f\u63a8\u7406\u8fdb\u884c\u4e86\u4f18\u5316\u3002\u53ef\u4ee5\u5728ONNX\u540e\u7aef\u4eea\u8868\u677f\u4e0a\u8ddf\u8e2a\u5176\u8986\u76d6\u8303\u56f4 \u3002onnx \u5b9e\u73b0\u4e86\u4e00\u4e2a\u6709\u52a9\u4e8e\u7406\u89e3\u6a21\u578b\u7684 Python \u8fd0\u884c\u65f6\u3002\u5b83\u4e0d\u9002\u7528\u4e8e\u751f\u4ea7\uff0c\u6027\u80fd\u4e5f\u4e0d\u662f\u76ee\u6807\u3002</p>"},{"location":"onnx/onnx_with_python/#_19","title":"\u7ebf\u6027\u56de\u5f52\u7684\u8bc4\u4f30","text":"<p>\u5b8c\u6574 API \u63cf\u8ff0\u4e8eonnx.reference\u3002\u5b83\u9700\u8981\u4e00\u4e2a\u6a21\u578b\uff08ModelProto\u3001\u6587\u4ef6\u540d\u7b49\uff09\u3002\u65b9\u6cd5run\u8fd4\u56de\u5b57\u5178\u4e2d\u6307\u5b9a\u7684\u4e00\u7ec4\u7ed9\u5b9a\u8f93\u5165\u7684\u8f93\u51fa\u3002</p> <p>Python<pre><code>import numpy\nfrom onnx import numpy_helper, TensorProto\nfrom onnx.helper import (\n    make_model, make_node, set_model_props, make_tensor,\n    make_graph, make_tensor_value_info)\nfrom onnx.checker import check_model\nfrom onnx.reference import ReferenceEvaluator\n\nX = make_tensor_value_info('X', TensorProto.FLOAT, [None, None])\nA = make_tensor_value_info('A', TensorProto.FLOAT, [None, None])\nB = make_tensor_value_info('B', TensorProto.FLOAT, [None, None])\nY = make_tensor_value_info('Y', TensorProto.FLOAT, [None])\nnode1 = make_node('MatMul', ['X', 'A'], ['XA'])\nnode2 = make_node('Add', ['XA', 'B'], ['Y'])\ngraph = make_graph([node1, node2], 'lr', [X, A, B], [Y])\nonnx_model = make_model(graph)\ncheck_model(onnx_model)\n\nsess = ReferenceEvaluator(onnx_model)\n\nx = numpy.random.randn(4, 2).astype(numpy.float32)\na = numpy.random.randn(2, 1).astype(numpy.float32)\nb = numpy.random.randn(1, 1).astype(numpy.float32)\nfeeds = {'X': x, 'A': a, 'B': b}\n\nprint(sess.run(None, feeds))\n</code></pre> Bash<pre><code>[array([[ 3.7574928],\n       [ 1.4951284],\n       [ 1.0837387],\n       [-0.7525861]], dtype=float32)]\n</code></pre></p>"},{"location":"onnx/onnx_with_python/#_20","title":"\u8282\u70b9\u8bc4\u4f30","text":"<p>\u8bc4\u4f30\u8005\u8fd8\u53ef\u4ee5\u8bc4\u4f30\u4e00\u4e2a\u7b80\u5355\u8282\u70b9\u6765\u68c0\u67e5\u64cd\u4f5c\u5458\u5bf9\u7279\u5b9a\u8f93\u5165\u7684\u884c\u4e3a\u3002 Python<pre><code>import numpy\nfrom onnx import numpy_helper, TensorProto\nfrom onnx.helper import make_node\n\nfrom onnx.reference import ReferenceEvaluator\n\nnode = make_node('EyeLike', ['X'], ['Y'])\n\nsess = ReferenceEvaluator(node)\n\nx = numpy.random.randn(4, 2).astype(numpy.float32)\nfeeds = {'X': x}\n\nprint(sess.run(None, feeds))\n</code></pre></p> Bash<pre><code>[array([[1., 0.],\n       [0., 1.],\n       [0., 0.],\n       [0., 0.]], dtype=float32)]\n</code></pre> <p>\u7c7b\u4f3c\u7684\u4ee3\u7801\u4e5f\u9002\u7528\u4e8eGraphProto\u6216FunctionProto\u3002</p>"},{"location":"onnx/onnx_with_python/#_21","title":"\u9010\u6b65\u8bc4\u4f30","text":"<p>\u8f6c\u6362\u5e93\u91c7\u7528\u4f7f\u7528\u673a\u5668\u5b66\u4e60\u6846\u67b6\uff08pytorch\u3001scikit-learn\u7b49\uff09\u8bad\u7ec3\u7684\u73b0\u6709\u6a21\u578b\uff0c\u5e76\u5c06\u8be5\u6a21\u578b\u8f6c\u6362\u4e3a ONNX \u56fe\u3002\u590d\u6742\u6a21\u578b\u901a\u5e38\u4e0d\u4f1a\u5728\u7b2c\u4e00\u6b21\u5c1d\u8bd5\u65f6\u8d77\u4f5c\u7528\uff0c\u67e5\u770b\u4e2d\u95f4\u7ed3\u679c\u53ef\u80fd\u6709\u52a9\u4e8e\u627e\u5230\u8f6c\u6362\u9519\u8bef\u7684\u90e8\u5206\u3002\u53c2\u6570verbose\u663e\u793a\u6709\u5173\u4e2d\u95f4\u7ed3\u679c\u7684\u4fe1\u606f\u3002</p> <p>Python<pre><code>import numpy\nfrom onnx import numpy_helper, TensorProto\nfrom onnx.helper import (\n    make_model, make_node, set_model_props, make_tensor,\n    make_graph, make_tensor_value_info)\nfrom onnx.checker import check_model\nfrom onnx.reference import ReferenceEvaluator\n\nX = make_tensor_value_info('X', TensorProto.FLOAT, [None, None])\nA = make_tensor_value_info('A', TensorProto.FLOAT, [None, None])\nB = make_tensor_value_info('B', TensorProto.FLOAT, [None, None])\nY = make_tensor_value_info('Y', TensorProto.FLOAT, [None])\nnode1 = make_node('MatMul', ['X', 'A'], ['XA'])\nnode2 = make_node('Add', ['XA', 'B'], ['Y'])\ngraph = make_graph([node1, node2], 'lr', [X, A, B], [Y])\nonnx_model = make_model(graph)\ncheck_model(onnx_model)\n\nfor verbose in [1, 2, 3, 4]:\n    print()\n    print(f\"------ verbose={verbose}\")\n    print()\n    sess = ReferenceEvaluator(onnx_model, verbose=verbose)\n\n    x = numpy.random.randn(4, 2).astype(numpy.float32)\n    a = numpy.random.randn(2, 1).astype(numpy.float32)\n    b = numpy.random.randn(1, 1).astype(numpy.float32)\n    feeds = {'X': x, 'A': a, 'B': b}\n\n    print(sess.run(None, feeds))\n</code></pre> Bash<pre><code>------ verbose=1\n\n[array([[-3.0709705],\n       [-3.9643714],\n       [-3.3978167],\n       [-1.5986354]], dtype=float32)]\n\n------ verbose=2\n\nMatMul(X, A) -&gt; XA\nAdd(XA, B) -&gt; Y\n[array([[-1.0014315],\n       [-1.7232705],\n       [-2.908271 ],\n       [-3.8357327]], dtype=float32)]\n\n------ verbose=3\n\n +I X: float32:(4, 2) in [-1.142913579940796, 0.7031221985816956]\n +I A: float32:(2, 1) in [-2.0527687072753906, -0.8769862055778503]\n +I B: float32:(1, 1) in [-0.35991907119750977, -0.35991907119750977]\nMatMul(X, A) -&gt; XA\n + XA: float32:(4, 1) in [-0.6025412678718567, 2.241786003112793]\nAdd(XA, B) -&gt; Y\n + Y: float32:(4, 1) in [-0.9624603390693665, 1.8818669319152832]\n[array([[ 1.8818669 ],\n       [-0.96246034],\n       [ 0.6445193 ],\n       [-0.07070675]], dtype=float32)]\n\n------ verbose=4\n\n +I X: float32:(4, 2):0.3453322649002075,0.5269743800163269,0.43770021200180054,-0.9788240194320679,-0.2000599205493927...\n +I A: float32:(2, 1):[-0.567805826663971, -0.37489286065101624]\n +I B: float32:(1, 1):[0.04381459206342697]\nMatMul(X, A) -&gt; XA\n + XA: float32:(4, 1):[-0.3936406075954437, 0.1184254139661789, 0.5723494291305542, 0.5118365287780762]\nAdd(XA, B) -&gt; Y\n + Y: float32:(4, 1):[-0.34982600808143616, 0.16223999857902527, 0.6161640286445618, 0.5556511282920837]\n[array([[-0.349826 ],\n       [ 0.16224  ],\n       [ 0.616164 ],\n       [ 0.5556511]], dtype=float32)]\n</code></pre></p>"},{"location":"onnx/onnx_with_python/#_22","title":"\u8bc4\u4f30\u81ea\u5b9a\u4e49\u8282\u70b9","text":"<p>\u4e0b\u9762\u7684\u4f8b\u5b50\u4ecd\u7136\u5b9e\u73b0\u7ebf\u6027\u56de\u5f52\uff0c\u4f46\u662f\u5c06\u5355\u4f4d\u77e9\u9635\u6dfb\u52a0\u5230A\uff1a</p> Python<pre><code>import numpy\nfrom onnx import numpy_helper, TensorProto\nfrom onnx.helper import (\n    make_model, make_node, set_model_props, make_tensor,\n    make_graph, make_tensor_value_info)\nfrom onnx.checker import check_model\nfrom onnx.reference import ReferenceEvaluator\n\nX = make_tensor_value_info('X', TensorProto.FLOAT, [None, None])\nA = make_tensor_value_info('A', TensorProto.FLOAT, [None, None])\nB = make_tensor_value_info('B', TensorProto.FLOAT, [None, None])\nY = make_tensor_value_info('Y', TensorProto.FLOAT, [None])\nnode0 = make_node('EyeLike', ['A'], ['Eye'])\nnode1 = make_node('Add', ['A', 'Eye'], ['A1'])\nnode2 = make_node('MatMul', ['X', 'A1'], ['XA1'])\nnode3 = make_node('Add', ['XA1', 'B'], ['Y'])\ngraph = make_graph([node0, node1, node2, node3], 'lr', [X, A, B], [Y])\nonnx_model = make_model(graph)\ncheck_model(onnx_model)\nwith open(\"linear_regression.onnx\", \"wb\") as f:\n    f.write(onnx_model.SerializeToString())\n\nsess = ReferenceEvaluator(onnx_model, verbose=2)\n\nx = numpy.random.randn(4, 2).astype(numpy.float32)\na = numpy.random.randn(2, 2).astype(numpy.float32) / 10\nb = numpy.random.randn(1, 2).astype(numpy.float32)\nfeeds = {'X': x, 'A': a, 'B': b}\n\nprint(sess.run(None, feeds))\n</code></pre> Bash<pre><code>EyeLike(A) -&gt; Eye\nAdd(A, Eye) -&gt; A1\nMatMul(X, A1) -&gt; XA1\nAdd(XA1, B) -&gt; Y\n[array([[ 2.1372705 ,  1.7686903 ],\n       [-0.6369117 , -0.00957918],\n       [ 0.8815058 ,  1.8614801 ],\n       [ 2.529335  ,  3.9602785 ]], dtype=float32)]\n</code></pre> <p>\u5982\u679c\u6211\u4eec\u5c06EyeLike\u548cAdd\u8fd0\u7b97\u7b26\u7ec4\u5408\u6210AddEyeLike\u4f1a\u600e\u6837\uff1f\u8fd9\u4f1a\u4f7f\u5176\u66f4\u52a0\u9ad8\u6548\u3002\u4e0b\u4e00\u4e2a\u793a\u4f8b\u5c06\u8fd9\u4e24\u4e2a\u8fd0\u7b97\u7b26\u66ff\u6362\u4e3a\u57df\u4e2d\u7684\u4e00\u4e2a\u8fd0\u7b97\u7b26'optimized'\u3002</p> Python<pre><code>import numpy\nfrom onnx import numpy_helper, TensorProto\nfrom onnx.helper import (\n    make_model, make_node, set_model_props, make_tensor,\n    make_graph, make_tensor_value_info, make_opsetid)\nfrom onnx.checker import check_model\n\nX = make_tensor_value_info('X', TensorProto.FLOAT, [None, None])\nA = make_tensor_value_info('A', TensorProto.FLOAT, [None, None])\nB = make_tensor_value_info('B', TensorProto.FLOAT, [None, None])\nY = make_tensor_value_info('Y', TensorProto.FLOAT, [None])\n\nnode01 = make_node('AddEyeLike', ['A'], ['A1'], domain='optimized')\n\nnode2 = make_node('MatMul', ['X', 'A1'], ['XA1'])\nnode3 = make_node('Add', ['XA1', 'B'], ['Y'])\ngraph = make_graph([node01, node2, node3], 'lr', [X, A, B], [Y])\n\nonnx_model = make_model(graph, opset_imports=[\n    make_opsetid('', 18), make_opsetid('optimized', 1)\n])\n\ncheck_model(onnx_model)\nwith open(\"linear_regression_improved.onnx\", \"wb\") as f:\n    f.write(onnx_model.SerializeToString())\n</code></pre> <p>\u6211\u4eec\u9700\u8981\u8bc4\u4f30\u8fd9\u4e2a\u6a21\u578b\u662f\u5426\u7b49\u540c\u4e8e\u7b2c\u4e00\u4e2a\u6a21\u578b\u3002\u8fd9\u9700\u8981\u9488\u5bf9\u8fd9\u4e2a\u7279\u5b9a\u8282\u70b9\u8fdb\u884c\u5b9e\u73b0\u3002 Python<pre><code>import numpy\nfrom onnx.reference import ReferenceEvaluator\nfrom onnx.reference.op_run import OpRun\n\nclass AddEyeLike(OpRun):\n\n    op_domain = \"optimized\"\n\n    def _run(self, X, alpha=1.):\n        assert len(X.shape) == 2\n        assert X.shape[0] == X.shape[1]\n        X = X.copy()\n        ind = numpy.diag_indices(X.shape[0])\n        X[ind] += alpha\n        return (X,)\n\nsess = ReferenceEvaluator(\"linear_regression_improved.onnx\", verbose=2, new_ops=[AddEyeLike])\n\nx = numpy.random.randn(4, 2).astype(numpy.float32)\na = numpy.random.randn(2, 2).astype(numpy.float32) / 10\nb = numpy.random.randn(1, 2).astype(numpy.float32)\nfeeds = {'X': x, 'A': a, 'B': b}\n\nprint(sess.run(None, feeds))\n\n# Let's check with the previous model.\n\nsess0 = ReferenceEvaluator(\"linear_regression.onnx\",)\nsess1 = ReferenceEvaluator(\"linear_regression_improved.onnx\", new_ops=[AddEyeLike])\n\ny0 = sess0.run(None, feeds)[0]\ny1 = sess1.run(None, feeds)[0]\nprint(y0)\nprint(y1)\nprint(f\"difference: {numpy.abs(y0 - y1).max()}\")\n</code></pre></p> <p>Bash<pre><code>AddEyeLike(A) -&gt; A1\nMatMul(X, A1) -&gt; XA1\nAdd(XA1, B) -&gt; Y\n[array([[-1.2722642 , -0.1207931 ],\n       [ 0.64181894,  0.47749406],\n       [ 0.47565097,  1.2095331 ],\n       [ 0.2499994 ,  3.6677973 ]], dtype=float32)]\n[[-1.2722642  -0.1207931 ]\n [ 0.64181894  0.47749406]\n [ 0.47565097  1.2095331 ]\n [ 0.2499994   3.6677973 ]]\n[[-1.2722642  -0.1207931 ]\n [ 0.64181894  0.47749406]\n [ 0.47565097  1.2095331 ]\n [ 0.2499994   3.6677973 ]]\ndifference: 0.0\n</code></pre> \u9884\u6d4b\u662f\u76f8\u540c\u7684\u3002\u8ba9\u6211\u4eec\u5728\u4e00\u4e2a\u8db3\u591f\u5927\u7684\u77e9\u9635\u4e0a\u6bd4\u8f83\u4e00\u4e0b\u6027\u80fd\uff0c\u4ee5\u53d1\u73b0\u663e\u8457\u7684\u5dee\u5f02\u3002</p> Python<pre><code>import timeit\nimport numpy\nfrom onnx.reference import ReferenceEvaluator\nfrom onnx.reference.op_run import OpRun\n\nclass AddEyeLike(OpRun):\n\n    op_domain = \"optimized\"\n\n    def _run(self, X, alpha=1.):\n        assert len(X.shape) == 2\n        assert X.shape[0] == X.shape[1]\n        X = X.copy()\n        ind = numpy.diag_indices(X.shape[0])\n        X[ind] += alpha\n        return (X,)\n\nsess = ReferenceEvaluator(\"linear_regression_improved.onnx\", verbose=2, new_ops=[AddEyeLike])\n\nx = numpy.random.randn(4, 100).astype(numpy.float32)\na = numpy.random.randn(100, 100).astype(numpy.float32) / 10\nb = numpy.random.randn(1, 100).astype(numpy.float32)\nfeeds = {'X': x, 'A': a, 'B': b}\n\nsess0 = ReferenceEvaluator(\"linear_regression.onnx\")\nsess1 = ReferenceEvaluator(\"linear_regression_improved.onnx\", new_ops=[AddEyeLike])\n\ny0 = sess0.run(None, feeds)[0]\ny1 = sess1.run(None, feeds)[0]\nprint(f\"difference: {numpy.abs(y0 - y1).max()}\")\nprint(f\"time with EyeLike+Add: {timeit.timeit(lambda: sess0.run(None, feeds), number=1000)}\")\nprint(f\"time with AddEyeLike: {timeit.timeit(lambda: sess1.run(None, feeds), number=1000)}\")\n</code></pre> Bash<pre><code>difference: 0.0\ntime with EyeLike+Add: 0.08985151199999564\ntime with AddEyeLike: 0.0732065079999984\n</code></pre> <p>\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u4f3c\u4e4e\u503c\u5f97\u6dfb\u52a0\u4e00\u4e2a\u4f18\u5316\u8282\u70b9\u3002\u8fd9\u79cd\u4f18\u5316\u901a\u5e38\u79f0\u4e3a\u878d\u5408\u3002\u4e24\u4e2a\u8fde\u7eed\u7684\u8fd0\u7b97\u7b26\u88ab\u878d\u5408\u6210\u4e24\u8005\u7684\u4f18\u5316\u7248\u672c\u3002\u751f\u4ea7\u901a\u5e38\u4f9d\u8d56\u4e8eonnxruntime\uff0c\u4f46\u7531\u4e8e\u4f18\u5316\u4f7f\u7528\u57fa\u672c\u77e9\u9635\u8fd0\u7b97\uff0c\u56e0\u6b64\u5b83\u5e94\u8be5\u5728\u4efb\u4f55\u5176\u4ed6\u8fd0\u884c\u65f6\u4e0a\u5e26\u6765\u76f8\u540c\u7684\u6027\u80fd\u63d0\u5347\u3002</p>"},{"location":"onnx/onnx_with_python/#_23","title":"\u5b9e\u73b0\u7ec6\u8282","text":""},{"location":"onnx/onnx_with_python/#python-c","title":"Python \u548c C++","text":"<p>onnx \u4f9d\u8d56 protobuf \u6765\u5b9a\u4e49\u5176\u7c7b\u578b\u3002\u60a8\u53ef\u80fd\u4f1a\u8ba4\u4e3a python \u5bf9\u8c61\u53ea\u662f\u5185\u90e8\u7ed3\u6784\u4e0a C \u6307\u9488\u7684\u5305\u88c5\u5668\u3002\u56e0\u6b64\uff0c\u5e94\u8be5\u53ef\u4ee5\u4ece\u63a5\u6536\u7c7b\u578b \u7684 python \u5bf9\u8c61\u7684\u51fd\u6570\u8bbf\u95ee\u5185\u90e8\u6570\u636eModelProto\u3002\u4f46\u4e8b\u5b9e\u5e76\u975e\u5982\u6b64\u3002\u6839\u636e Protobuf 4 \u7684\u66f4\u6539\uff0c\u5728\u7248\u672c 4 \u4e4b\u540e\u8fd9\u4e0d\u518d\u53ef\u80fd\uff0c\u66f4\u5b89\u5168\u7684\u5047\u8bbe\u662f\u83b7\u53d6\u5185\u5bb9\u7684\u552f\u4e00\u65b9\u6cd5\u662f\u5c06\u6a21\u578b\u5e8f\u5217\u5316\u4e3a\u5b57\u8282\uff0c\u5c06\u5176\u63d0\u4f9b\u7ed9 C \u51fd\u6570\uff0c\u7136\u540e\u5bf9\u5176\u8fdb\u884c\u53cd\u5e8f\u5217\u5316\u3002\u5728\u4f7f\u7528 C \u4ee3\u7801\u68c0\u67e5\u6a21\u578b\u4e4b\u524d\uff0ccheck_model\u6216\u4e4b \u7c7b\u7684\u51fd\u6570shape_inference\u4f1a\u8c03\u7528SerializeToStringthen \u3002ParseFromString</p>"},{"location":"onnx/onnx_with_python/#_24","title":"\u5c5e\u6027\u548c\u8f93\u5165","text":"<p>\u4e24\u8005\u4e4b\u95f4\u6709\u660e\u663e\u7684\u533a\u522b\u3002\u8f93\u5165\u662f\u52a8\u6001\u7684\uff0c\u6bcf\u6b21\u6267\u884c\u65f6\u90fd\u53ef\u80fd\u53d1\u751f\u53d8\u5316\u3002\u5c5e\u6027\u6c38\u8fdc\u4e0d\u4f1a\u6539\u53d8\uff0c\u4f18\u5316\u5668\u53ef\u4ee5\u5047\u8bbe\u5b83\u6c38\u8fdc\u4e0d\u4f1a\u6539\u53d8\uff0c\u4ece\u800c\u6539\u8fdb\u6267\u884c\u56fe\u3002\u56e0\u6b64\uff0c\u4e0d\u53ef\u80fd\u5c06\u8f93\u5165\u8f6c\u6362\u4e3a\u5c5e\u6027\u3002\u8fd0\u7b97\u7b26Constant\u662f\u552f\u4e00\u5c06\u5c5e\u6027\u8f6c\u6362\u4e3a\u8f93\u5165\u7684\u8fd0\u7b97\u7b26\u3002</p>"},{"location":"onnx/onnx_with_python/#_25","title":"\u6709\u5f62\u6216\u65e0\u5f62","text":"<p>onnx \u901a\u5e38\u5047\u8bbe\u5df2\u77e5\u79e9\uff08\u6216\u7ef4\u6570\uff09\uff0c\u5e76\u671f\u671b\u6bcf\u4e2a\u8f93\u5165\u6216\u8f93\u51fa\u90fd\u6709\u4e00\u4e2a\u5f62\u72b6\u3002\u5982\u679c\u6211\u4eec\u9700\u8981\u4e3a\u6bcf\u4e2a\u7ef4\u5ea6\u521b\u5efa\u4e00\u4e2a\u6709\u6548\u7684\u56fe\u600e\u4e48\u529e\uff1f\u8fd9\u79cd\u60c5\u51b5\u4ecd\u7136\u4ee4\u4eba\u8d39\u89e3\u3002</p> Python<pre><code>import numpy\nfrom onnx import numpy_helper, TensorProto, FunctionProto\nfrom onnx.helper import (\n    make_model, make_node, set_model_props, make_tensor,\n    make_graph, make_tensor_value_info, make_opsetid,\n    make_function)\nfrom onnx.checker import check_model\nfrom onnxruntime import InferenceSession\n\ndef create_model(shapes):\n    new_domain = 'custom'\n    opset_imports = [make_opsetid(\"\", 14), make_opsetid(new_domain, 1)]\n\n    node1 = make_node('MatMul', ['X', 'A'], ['XA'])\n    node2 = make_node('Add', ['XA', 'A'], ['Y'])\n\n    X = make_tensor_value_info('X', TensorProto.FLOAT, shapes['X'])\n    A = make_tensor_value_info('A', TensorProto.FLOAT, shapes['A'])\n    Y = make_tensor_value_info('Y', TensorProto.FLOAT, shapes['Y'])\n\n    graph = make_graph([node1, node2], 'example', [X, A], [Y])\n\n    onnx_model = make_model(graph, opset_imports=opset_imports)\n    # Let models runnable by onnxruntime with a released ir_version\n    onnx_model.ir_version = 8\n\n    return onnx_model\n\nprint(\"----------- case 1: 2D x 2D -&gt; 2D\")\nonnx_model = create_model({'X': [None, None], 'A': [None, None], 'Y': [None, None]})\ncheck_model(onnx_model)\nsess = InferenceSession(onnx_model.SerializeToString(),\n                        providers=[\"CPUExecutionProvider\"])\nres = sess.run(None, {\n    'X': numpy.random.randn(2, 2).astype(numpy.float32),\n    'A': numpy.random.randn(2, 2).astype(numpy.float32)})\nprint(res)\n\nprint(\"----------- case 2: 2D x 1D -&gt; 1D\")\nonnx_model = create_model({'X': [None, None], 'A': [None], 'Y': [None]})\ncheck_model(onnx_model)\nsess = InferenceSession(onnx_model.SerializeToString(),\n                        providers=[\"CPUExecutionProvider\"])\nres = sess.run(None, {\n    'X': numpy.random.randn(2, 2).astype(numpy.float32),\n    'A': numpy.random.randn(2).astype(numpy.float32)})\nprint(res)\n\nprint(\"----------- case 3: 2D x 0D -&gt; 0D\")\nonnx_model = create_model({'X': [None, None], 'A': [], 'Y': []})\ncheck_model(onnx_model)\ntry:\n    InferenceSession(onnx_model.SerializeToString(),\n                     providers=[\"CPUExecutionProvider\"])\nexcept Exception as e:\n    print(e)\n\nprint(\"----------- case 4: 2D x None -&gt; None\")\nonnx_model = create_model({'X': [None, None], 'A': None, 'Y': None})\ntry:\n    check_model(onnx_model)\nexcept Exception as e:\n    print(type(e), e)\nsess = InferenceSession(onnx_model.SerializeToString(),\n                        providers=[\"CPUExecutionProvider\"])\nres = sess.run(None, {\n    'X': numpy.random.randn(2, 2).astype(numpy.float32),\n    'A': numpy.random.randn(2).astype(numpy.float32)})\nprint(res)\nprint(\"----------- end\")\n</code></pre> Bash<pre><code>----------- case 1: 2D x 2D -&gt; 2D\n[array([[-0.88513166, -1.4549615 ],\n       [-0.38629988, -2.4992924 ]], dtype=float32)]\n----------- case 2: 2D x 1D -&gt; 1D\n[array([-1.3339046, -4.186163 ], dtype=float32)]\n----------- case 3: 2D x 0D -&gt; 0D\n[ONNXRuntimeError] : 1 : FAIL : Node () Op (MatMul) [ShapeInferenceError] Input tensors of wrong rank (0).\n----------- case 4: 2D x None -&gt; None\n&lt;class 'onnx.onnx_cpp2py_export.checker.ValidationError'&gt; Field 'shape' of 'type' is required but missing.\n[array([-1.2411526,  1.8771248], dtype=float32)]\n----------- end\n</code></pre>"},{"location":"rag/generation/question/","title":"RAG \u56de\u590d\u751f\u6210\u95ee\u9898","text":""},{"location":"rag/generation/question/#_1","title":"\u80cc\u666f","text":"<p>\u68c0\u7d22\u589e\u5f3a\u751f\u6210\uff08RAG\uff09\u662f\u4e00\u79cd\u5f88\u6709\u524d\u9014\u7684\u51cf\u8f7b\u5927\u578b\u8bed\u8a00\u6a21\u578b\uff08LLM\uff09\u5e7b\u89c9\u7684\u65b9\u6cd5\uff0c\u4f46\u662fRAG\u5e76\u4e0d\u662f\u4e07\u80fd\u7684\u3002\u8bba\u6587 Benchmarking Large Language Models in Retrieval-Augmented Generation \u63d0\u51fa\u4e86 RAG \u5728\u751f\u6210\u9636\u6bb5\u9700\u8981\u9762\u5bf9\u7684\u56db\u79cd\u60c5\u51b5\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> RAG \u751f\u6210\u9762\u4e34\u7684\u95ee\u9898 \u8be6\u7ec6\u60c5\u51b5 \u566a\u58f0\u9c81\u68d2\u6027 LLM \u751f\u6210\u6a21\u578b\u53ef\u4ee5\u4ece\u566a\u58f0\u6587\u6863\u4e2d\u63d0\u53d6\u6709\u7528\u7684\u4fe1\u606f\u3002\u8bba\u6587\u4e2d\uff0c\u5c06\u566a\u58f0\u6587\u6863\u5b9a\u4e49\u4e3a\u4e0e\u95ee\u9898\u76f8\u5173\u4f46\u4e0d\u5305\u542b\u4efb\u4f55\u7b54\u6848\u4fe1\u606f\u7684\u6587\u6863\u3002\u4f8b\u5982\uff0c\u5728\u4e0b\u56fe\u4e2d\uff0c\u4e0e\u3010\u8c01\u88ab\u6388\u4e882022\u5e74\u8bfa\u8d1d\u5c14\u6587\u5b66\u5956\u3011\u95ee\u9898\u76f8\u5173\u7684\u5608\u6742\u6587\u6863\u5305\u62ec\u5173\u4e8e\u30102021\u5e74\u8bfa\u8d1d\u5c14\u6587\u5b66\u5956\u9879\u3011\u7684\u62a5\u9053\u3002\u4e3a\u6b64\uff0c\u566a\u58f0\u9c81\u68d2\u6027\u6d4b\u8bd5\u6570\u636e\u96c6\u4e2d\u6db5\u76d6\u4e86\u4e0d\u540c\u566a\u58f0\u6bd4\u7684\u6570\u636e\u3002 \u5426\u5b9a\u62d2\u7edd \u8fd9\u610f\u5473\u7740\u5f53\u6240\u9700\u7684\u77e5\u8bc6\u4e0d\u5b58\u5728\u4e8e\u4efb\u4f55\u68c0\u7d22\u5230\u7684\u6587\u6863\u4e2d\u65f6\uff0c\u6a21\u578b\u5e94\u8be5\u62d2\u7edd\u56de\u7b54\u95ee\u9898\u3002\u5426\u5b9a\u62d2\u7edd\u7684\u6d4b\u8bd5\u6570\u636e\u96c6\u4e2d\uff0c\u68c0\u7d22\u5230\u7684\u6587\u6863\u4ec5\u5305\u542b\u5608\u6742\u6587\u6863\u7684\u6570\u636e\u3002LLM\u5e94\u6307\u793a\u3010\u4fe1\u606f\u4e0d\u8db3\u3011\u6216\u5176\u4ed6\u62d2\u7edd\u4fe1\u53f7\u3002 \u4fe1\u606f\u96c6\u6210 \u8bc4\u4f30\u6a21\u578b\u662f\u5426\u80fd\u591f\u56de\u7b54\u7528\u6237\u95ee\u9898\u9700\u8981\u96c6\u6210\u591a\u4e2a\u6587\u6863\u4fe1\u606f\u3002\u5bf9\u4e8e\u4e0b\u56fe\u4e2d\u7684\u793a\u4f8b\uff0c\u3010\u9002\u7528\u4e8eiOS\u7684ChatGPT\u5e94\u7528\u7a0b\u5e8f\u548cChatGPT api\u662f\u4f55\u65f6\u542f\u52a8\u7684\uff1f\u3011\u8fd9\u4e00\u95ee\u9898\uff0cLLM\u5e94\u63d0\u4f9b\u6709\u5173iOS\u4e0a\u7684ChatGPT\u5e94\u7528\u7a0b\u5e8f\u548c ChatGPT api \u7684\u542f\u52a8\u65e5\u671f\u7684\u4fe1\u606f\u3002\u4fe1\u606f\u96c6\u6210\u7684\u6d4b\u8bd5\u6570\u636e\u4e2d\uff0c\u4f7f\u7528\u68c0\u7d22\u5230\u7684\u591a\u4e2a\u6587\u6863\u5305\u56de\u7b54\u7528\u6237\u95ee\u9898\u3002 \u53cd\u4e8b\u5b9e\u7a33\u5065\u6027 \u8bc4\u4f30\u5f53LLM\u901a\u8fc7\u6307\u4ee4\u6536\u5230\u5173\u4e8e\u68c0\u7d22\u4fe1\u606f\u4e2d\u6709\u6f5c\u5728\u98ce\u9669\u8fdb\u884c\u8b66\u544a\uff0c\u6a21\u578b\u662f\u5426\u80fd\u591f\u8bc6\u522b\u68c0\u7d22\u6587\u6863\u4e2d\u5df2\u77e5\u4e8b\u5b9e\u9519\u8bef\u7684\u98ce\u9669\u3002\u53cd\u4e8b\u5b9e\u7a33\u5b9a\u6027\u7684\u6d4b\u8bd5\u6570\u636e\u96c6\u4e2d\uff0c\u5305\u62ecLLM\u53ef\u4ee5\u76f4\u63a5\u56de\u7b54\u7684\u7528\u6237\u95ee\u9898\uff0c\u4f46\u5916\u90e8\u6587\u6863\u5305\u542b\u4e8b\u5b9e\u9519\u8bef\u3002 <p>\u5b9a\u4e49\u4e0a\u8ff0\u95ee\u9898\u7684\u56fe\u5982\u4e0b\u6240\u793a\uff1a</p> <p></p>"},{"location":"rag/generation/question/#_2","title":"\u53c2\u8003","text":"<ol> <li>https://arxiv.org/abs/2309.01431</li> <li>https://blog.csdn.net/m0_52695557/article/details/134247484</li> </ol>"},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E5%BC%95%E8%A8%80/","title":"\u5f15\u8a00","text":""},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E5%BC%95%E8%A8%80/#_1","title":"\u52a0\u8f7d\u6570\u636e","text":"<p>LlamaIndex \u4e2d\u6570\u636e\u63d0\u53d6\u7684\u5173\u952e\u662f\u52a0\u8f7d\u5668\u548c\u8f6c\u6362\u3002\u52a0\u8f7d\u6587\u6863\u540e\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u8f6c\u6362\u548c\u8f93\u51fa\u8282\u70b9\u6765\u5904\u7406\u5b83\u4eec\u3002</p> <p>\u5728\u7406\u89e3\u90e8\u5206\u4e86\u89e3\u4e86\u52a0\u8f7d\u6570\u636e\u7684\u57fa\u7840\u77e5\u8bc6\u540e\uff0c\u60a8\u53ef\u4ee5\u7ee7\u7eed\u9605\u8bfb\u4ee5\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff1a</p>"},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E5%BC%95%E8%A8%80/#_2","title":"\u52a0\u8f7d\u5668","text":"<ul> <li><code>SimpleDirectoryReader</code> \u662f Llama-index \u5185\u7f6e\u7684\u52a0\u8f7d\u5668\uff0c\u7528\u4e8e\u4ece\u672c\u5730\u76ee\u5f55\u52a0\u8f7d\u5404\u79cd\u6587\u4ef6\u7c7b\u578b</li> <li><code>LlamaParse</code> \u662f LlamaIndex \u7684\u5b98\u65b9 PDF \u89e3\u6790\u5de5\u5177\uff0c\u53ef\u4f5c\u4e3a\u6258\u7ba1 API \u4f7f\u7528\u3002</li> <li><code>LlamaHub</code> \u662f\u6211\u4eec\u6ce8\u518c\u7684\u6570\u767e\u4e2a\u6570\u636e\u52a0\u8f7d\u5e93\uff0c\u53ef\u4ece\u4efb\u4f55\u6765\u6e90\u63d0\u53d6\u6570\u636e</li> </ul>"},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E5%BC%95%E8%A8%80/#_3","title":"\u53d8\u6362","text":"<p>\u8fd9\u5305\u62ec\u62c6\u5206\u6587\u672c\u7b49\u5e38\u89c1\u64cd\u4f5c\u3002</p> <ul> <li>\u8282\u70b9\u89e3\u6790\u5668\u4f7f\u7528\u6a21\u5f0f\uff0c\u5411\u60a8\u5c55\u793a\u5982\u4f55\u4f7f\u7528\u6211\u4eec\u7684\u8282\u70b9\u89e3\u6790\u5668</li> <li>Node Parser Modules\uff0c\u5c55\u793a\u6211\u4eec\u7684\u6587\u672c\u5206\u5272\u5668\uff08\u53e5\u5b50\u3001\u6807\u8bb0\u3001HTML\u3001JSON\uff09\u548c\u5176\u4ed6\u89e3\u6790\u5668\u6a21\u5757\u3002</li> </ul>"},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E5%BC%95%E8%A8%80/#_4","title":"\u7efc\u5408\u8d77\u6765","text":"<ul> <li>\u63d0\u53d6\u7ba1\u9053\u5141\u8bb8\u60a8\u8bbe\u7f6e\u53ef\u91cd\u590d\u7684\u3001\u7f13\u5b58\u4f18\u5316\u7684\u6570\u636e\u52a0\u8f7d\u8fc7\u7a0b\u3002</li> </ul>"},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E5%BC%95%E8%A8%80/#_5","title":"\u62bd\u8c61","text":"<p>Document \u548c Node \u5bf9\u8c61\u4ee5\u53ca\u5982\u4f55\u9488\u5bf9\u66f4\u9ad8\u7ea7\u7684\u7528\u4f8b\u81ea\u5b9a\u4e49\u5b83\u4eec</p>"},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96/%E5%BC%95%E8%A8%80/","title":"\u6444\u53d6\u7ba1\u9053","text":"<p>\u6570\u636e\u83b7\u53d6 <code>IngestionPipeline</code> \u4f7f\u7528\u53d8\u6362 <code>Transformations</code> \u7684\u6982\u5ff5\u3002\u8fd9\u4e9b\u53d8\u6362 <code>Transformations</code> \u5e94\u7528\u4e8e\u6211\u4eec\u7684\u8f93\u5165\u6570\u636e\uff0c\u5e76\u4e14\u7ed3\u679c\u8282\u70b9\u8981\u4e48\u8fd4\u56de\uff0c\u8981\u4e48\u63d2\u5165\u5230\u77e2\u91cf\u6570\u636e\u5e93\u4e2d\uff08\u5982\u679c\u7ed9\u5b9a\uff09\u3002\u7cfb\u7edf\u7f13\u5b58\u6bcf\u4e2a <code>\u8282\u70b9+\u8f6c\u6362\u5bf9</code> \uff0c\u4ee5\u4fbf\u540e\u7eed\u4f7f\u7528\u76f8\u540c <code>\u8282\u70b9+\u8f6c\u6362</code> \u7ec4\u5408\u7684\u8fd0\u884c\uff08\u5982\u679c\u7f13\u5b58\u88ab\u6301\u4e45\u5316\uff09\u53ef\u4ee5\u4f7f\u7528\u7f13\u5b58\u7ed3\u679c\u5e76\u8282\u7701\u60a8\u7684\u65f6\u95f4\u3002</p> <p>IngestionPipeline\u8981\u67e5\u770b\u6b63\u5728\u4f7f\u7528\u7684\u4ea4\u4e92\u5f0f\u793a\u4f8b\uff0c\u8bf7\u67e5\u770bRAG CLI\u3002</p>"},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96/%E5%BC%95%E8%A8%80/#_2","title":"\u4f7f\u7528\u6a21\u5f0f","text":"<p>\u6700\u7b80\u5355\u7684\u4f7f\u7528 <code>IngestionPipeline</code> \u7684\u65b9\u6cd5\u662f\u50cf\u8fd9\u6837\u5b9e\u4f8b\u5316\uff1a</p> Python<pre><code>from llama_index.core import Document\nfrom llama_index.embeddings.openai import OpenAIEmbedding\nfrom llama_index.core.node_parser import SentenceSplitter\nfrom llama_index.core.extractors import TitleExtractor\nfrom llama_index.core.ingestion import IngestionPipeline, IngestionCache\n\n# create the pipeline with transformations\npipeline = IngestionPipeline(\n    transformations=[\n        SentenceSplitter(chunk_size=25, chunk_overlap=0),\n        TitleExtractor(),\n        OpenAIEmbedding(),\n    ]\n)\n\n# run the pipeline\nnodes = pipeline.run(documents=[Document.example()])\n</code></pre> <p>\u8bf7\u6ce8\u610f\uff0c\u5728\u73b0\u5b9e\u4e16\u754c\u4e2d\uff0c\u60a8\u53ef\u4ee5SimpleDirectoryReader\u4ece Llama Hub \u6216\u5176\u4ed6\u9605\u8bfb\u5668\u83b7\u53d6\u60a8\u7684\u6587\u6863\u3002</p> <p>\u8fde\u63a5\u5230\u77e2\u91cf\u6570\u636e\u5e93# \u8fd0\u884c\u6444\u53d6\u7ba1\u9053\u65f6\uff0c\u60a8\u8fd8\u53ef\u4ee5\u9009\u62e9\u5c06\u751f\u6210\u7684\u8282\u70b9\u81ea\u52a8\u63d2\u5165\u5230\u8fdc\u7a0b\u5411\u91cf\u5b58\u50a8\u4e2d\u3002</p> <p>\u7136\u540e\uff0c\u60a8\u53ef\u4ee5\u7a0d\u540e\u4ece\u8be5\u5411\u91cf\u5b58\u50a8\u6784\u5efa\u7d22\u5f15\u3002</p> <p>from llama_index.core import Document from llama_index.embeddings.openai import OpenAIEmbedding from llama_index.core.node_parser import SentenceSplitter from llama_index.core.extractors import TitleExtractor from llama_index.core.ingestion import IngestionPipeline from llama_index.vector_stores.qdrant import QdrantVectorStore</p> <p>import qdrant_client</p> <p>client = qdrant_client.QdrantClient(location=\":memory:\") vector_store = QdrantVectorStore(client=client, collection_name=\"test_store\")</p> <p>pipeline = IngestionPipeline(     transformations=[         SentenceSplitter(chunk_size=25, chunk_overlap=0),         TitleExtractor(),         OpenAIEmbedding(),     ],     vector_store=vector_store, )</p>"},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96/%E5%BC%95%E8%A8%80/#ingest-directly-into-a-vector-db","title":"Ingest directly into a vector db","text":"<p>pipeline.run(documents=[Document.example()])</p>"},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96/%E5%BC%95%E8%A8%80/#create-your-index","title":"Create your index","text":"<p>from llama_index.core import VectorStoreIndex</p> <p>index = VectorStoreIndex.from_vector_store(vector_store) \u8ba1\u7b97\u7ba1\u9053\u4e2d\u7684\u5d4c\u5165# \u8bf7\u6ce8\u610f\uff0c\u5728\u4e0a\u9762\u7684\u793a\u4f8b\u4e2d\uff0c\u5d4c\u5165\u662f\u4f5c\u4e3a\u7ba1\u9053\u7684\u4e00\u90e8\u5206\u8fdb\u884c\u8ba1\u7b97\u7684\u3002\u5982\u679c\u60a8\u5c06\u7ba1\u9053\u8fde\u63a5\u5230\u5411\u91cf\u5b58\u50a8\uff0c\u5219\u5d4c\u5165\u5fc5\u987b\u662f\u7ba1\u9053\u7684\u4e00\u4e2a\u9636\u6bb5\uff0c\u5426\u5219\u60a8\u7a0d\u540e\u5bf9\u7d22\u5f15\u7684\u5b9e\u4f8b\u5316\u5c06\u5931\u8d25\u3002</p> <p>\u5982\u679c\u60a8\u6ca1\u6709\u8fde\u63a5\u5230\u5411\u91cf\u5b58\u50a8\uff0c\u5219\u53ef\u4ee5\u4ece\u7ba1\u9053\u4e2d\u7701\u7565\u5d4c\u5165\uff0c\u5373\u4ec5\u751f\u6210\u8282\u70b9\u5217\u8868\u3002</p> <p>\u7f13\u5b58# \u5728 \u4e2dIngestionPipeline\uff0c\u6bcf\u4e2a\u8282\u70b9 + \u8f6c\u6362\u7ec4\u5408\u90fd\u7ecf\u8fc7\u54c8\u5e0c\u5904\u7406\u5e76\u7f13\u5b58\u3002\u8fd9\u53ef\u4ee5\u8282\u7701\u4f7f\u7528\u76f8\u540c\u6570\u636e\u7684\u540e\u7eed\u8fd0\u884c\u7684\u65f6\u95f4\u3002</p> <p>\u4ee5\u4e0b\u90e8\u5206\u4ecb\u7ecd\u4e86\u4e00\u4e9b\u6709\u5173\u7f13\u5b58\u7684\u57fa\u672c\u7528\u6cd5\u3002</p> <p>\u672c\u5730\u7f13\u5b58\u7ba1\u7406# \u4e00\u65e6\u60a8\u6709\u4e86\u7ba1\u9053\uff0c\u60a8\u53ef\u80fd\u60f3\u8981\u5b58\u50a8\u548c\u52a0\u8f7d\u7f13\u5b58\u3002</p>"},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96/%E5%BC%95%E8%A8%80/#save","title":"save","text":"<p>pipeline.persist(\"./pipeline_storage\")</p>"},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96/%E5%BC%95%E8%A8%80/#load-and-restore-state","title":"load and restore state","text":"<p>new_pipeline = IngestionPipeline(     transformations=[         SentenceSplitter(chunk_size=25, chunk_overlap=0),         TitleExtractor(),     ], ) new_pipeline.load(\"./pipeline_storage\")</p>"},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96/%E5%BC%95%E8%A8%80/#will-run-instantly-due-to-the-cache","title":"will run instantly due to the cache","text":"<p>nodes = pipeline.run(documents=[Document.example()]) \u5982\u679c\u7f13\u5b58\u592a\u5927\uff0c\u4f60\u53ef\u4ee5\u6e05\u9664\u5b83</p>"},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96/%E5%BC%95%E8%A8%80/#delete-all-context-of-the-cache","title":"delete all context of the cache","text":"<p>cache.clear() \u8fdc\u7a0b\u7f13\u5b58\u7ba1\u7406# \u6211\u4eec\u652f\u6301\u591a\u4e2a\u7f13\u5b58\u8fdc\u7a0b\u5b58\u50a8\u540e\u7aef</p> <p>RedisCache MongoDBCache FirestoreCache \u8fd9\u91cc\u4f7f\u7528\u4ee5\u4e0b\u793a\u4f8bRedisCache\uff1a</p> <p>from llama_index.core import Document from llama_index.embeddings.openai import OpenAIEmbedding from llama_index.core.node_parser import SentenceSplitter from llama_index.core.extractors import TitleExtractor from llama_index.core.ingestion import IngestionPipeline, IngestionCache from llama_index.storage.kvstore.redis import RedisKVStore as RedisCache</p> <p>ingest_cache = IngestionCache(     cache=RedisCache.from_host_and_port(host=\"127.0.0.1\", port=6379),     collection=\"my_test_cache\", )</p> <p>pipeline = IngestionPipeline(     transformations=[         SentenceSplitter(chunk_size=25, chunk_overlap=0),         TitleExtractor(),         OpenAIEmbedding(),     ],     cache=ingest_cache, )</p>"},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96/%E5%BC%95%E8%A8%80/#ingest-directly-into-a-vector-db_1","title":"Ingest directly into a vector db","text":"<p>nodes = pipeline.run(documents=[Document.example()]) \u8fd9\u91cc\u4e0d\u9700\u8981\u6301\u4e45\u6b65\u9aa4\uff0c\u56e0\u4e3a\u6240\u6709\u5185\u5bb9\u90fd\u4f1a\u5728\u6307\u5b9a\u7684\u8fdc\u7a0b\u96c6\u5408\u4e2d\u88ab\u7f13\u5b58\u3002</p> <p>\u5f02\u6b65\u652f\u6301# \u8fd8\u652f\u6301IngestionPipeline\u5f02\u6b65\u64cd\u4f5c</p> <p>nodes = await pipeline.arun(documents=documents) \u6587\u6863\u7ba1\u7406# \u9644\u52a0docstore\u5230\u6444\u53d6\u7ba1\u9053\u5c06\u542f\u7528\u6587\u6863\u7ba1\u7406\u3002</p> <p>\u4f7f\u7528document.doc_id\u6216node.ref_doc_id\u4f5c\u4e3a\u63a5\u5730\u70b9\uff0c\u6444\u53d6\u7ba1\u9053\u5c06\u4e3b\u52a8\u5bfb\u627e\u91cd\u590d\u7684\u6587\u6863\u3002</p> <p>\u5b83\u7684\u5de5\u4f5c\u539f\u7406\u662f\uff1a</p> <p>doc_id\u5b58\u50a8-&gt;\u7684\u5730\u56fedocument_hash \u5982\u679c\u9644\u52a0\u4e86\u5411\u91cf\u5b58\u50a8\uff1a \u5982\u679c\u68c0\u6d4b\u5230\u91cd\u590ddoc_id\uff0c\u5e76\u4e14\u54c8\u5e0c\u503c\u5df2\u66f4\u6539\uff0c\u5219\u5c06\u91cd\u65b0\u5904\u7406\u5e76\u66f4\u65b0\u6587\u6863 \u5982\u679c\u68c0\u6d4b\u5230\u91cd\u590ddoc_id\u4e14\u54c8\u5e0c\u503c\u672a\u6539\u53d8\uff0c\u5219\u8df3\u8fc7\u8be5\u8282\u70b9 \u5982\u679c\u4ec5\u672a\u9644\u52a0\u5411\u91cf\u5b58\u50a8\uff1a \u68c0\u67e5\u6bcf\u4e2a\u8282\u70b9\u7684\u6240\u6709\u73b0\u6709\u54c8\u5e0c\u503c \u5982\u679c\u53d1\u73b0\u91cd\u590d\uff0c\u5219\u8df3\u8fc7\u8be5\u8282\u70b9 \u5426\u5219\uff0c\u8282\u70b9\u88ab\u5904\u7406 \u6ce8\u610f\uff1a\u5982\u679c\u6211\u4eec\u4e0d\u9644\u52a0\u5411\u91cf\u5b58\u50a8\uff0c\u6211\u4eec\u53ea\u80fd\u68c0\u67e5\u5e76\u5220\u9664\u91cd\u590d\u7684\u8f93\u5165\u3002</p> <p>from llama_index.core.ingestion import IngestionPipeline from llama_index.core.storage.docstore import SimpleDocumentStore</p> <p>pipeline = IngestionPipeline(     transformations=[...], docstore=SimpleDocumentStore() ) \u5b8c\u6574\u7684\u6f14\u7ec3\u53ef\u4ee5\u5728\u6211\u4eec\u7684\u6f14\u793a\u7b14\u8bb0\u672c\u4e2d\u627e\u5230\u3002</p> <p>\u53e6\u8bf7\u67e5\u770b\u53e6\u4e00\u4e2a\u4f7f\u7528Redis \u4f5c\u4e3a\u6211\u4eec\u6574\u4e2a\u6444\u53d6\u5806\u6808\u7684\u6307\u5357\u3002</p> <p>\u5e76\u884c\u5904\u7406# \u8be5run\u65b9\u6cd5IngestionPipeline\u53ef\u4ee5\u7528\u5e76\u884c\u8fdb\u7a0b\u6267\u884c\u3002\u5b83\u901a\u8fc7\u5c06multiprocessing.Pool\u8282\u70b9\u6279\u6b21\u5206\u5e03\u5230\u5404\u4e2a\u5904\u7406\u5668\u6765\u5b9e\u73b0\u3002</p> <p>\u8981\u4f7f\u7528\u5e76\u884c\u5904\u7406\u6267\u884c\uff0c\u8bf7\u8bbe\u7f6enum_workers\u60a8\u60f3\u8981\u4f7f\u7528\u7684\u8fdb\u7a0b\u6570\uff1a</p> <p>from llama_index.core.ingestion import IngestionPipeline</p> <p>pipeline = IngestionPipeline(     transformations=[...], ) pipeline.run(documents=[...], num_workers=4) \u6a21\u5757# \u8f6c\u578b\u6307\u5357 \u9ad8\u7ea7\u6444\u53d6\u7ba1\u9053 \u5f02\u6b65\u6444\u53d6\u7ba1\u9053 \u6587\u6863\u7ba1\u7406\u6d41\u7a0b Redis \u63d0\u53d6\u7ba1\u9053 Google Drive \u63d0\u53d6\u7ba1\u9053 \u5e76\u884c\u6267\u884c\u7ba1\u9053</p>"},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E6%96%87%E6%A1%A3%E5%92%8C%E8%8A%82%E7%82%B9/%E5%85%83%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96/","title":"\u5143\u6570\u636e\u63d0\u53d6","text":""},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E6%96%87%E6%A1%A3%E5%92%8C%E8%8A%82%E7%82%B9/%E5%85%83%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96/#_1","title":"\u5143\u6570\u636e\u63d0\u53d6\u4f7f\u7528\u6a21\u5f0f","text":"<p>\u60a8\u53ef\u4ee5\u4f7f\u7528 LLM \u901a\u8fc7\u6211\u4eec\u7684 <code>Metadata Extractor</code> \u6a21\u5757\u81ea\u52a8\u63d0\u53d6\u5143\u6570\u636e\u3002</p> <p>\u6211\u4eec\u7684\u5143\u6570\u636e\u63d0\u53d6\u5668\u6a21\u5757\u5305\u62ec\u4ee5\u4e0b\u201c\u7279\u5f81\u63d0\u53d6\u5668\u201d\uff1a</p> <ul> <li><code>SummaryExtractor</code>: \u81ea\u52a8\u63d0\u53d6\u4e00\u7ec4\u8282\u70b9\u7684\u6458\u8981</li> <li><code>QuestionsAnsweredExtractor</code>: \u63d0\u53d6\u4e00\u7ec4\u6bcf\u4e2a\u8282\u70b9\u90fd\u53ef\u4ee5\u56de\u7b54\u7684\u95ee\u9898</li> <li><code>TitleExtractor</code>: \u63d0\u53d6\u6bcf\u4e2a\u8282\u70b9\u4e0a\u4e0b\u6587\u7684\u6807\u9898</li> <li><code>EntityExtractor</code>: \u63d0\u53d6\u6bcf\u4e2a\u8282\u70b9\u5185\u5bb9\u4e2d\u63d0\u5230\u7684\u5b9e\u4f53\uff08\u5373\u5730\u70b9\uff0c\u4eba\u7269\uff0c\u4e8b\u7269\u7684\u540d\u79f0\uff09</li> </ul> <p>\u7136\u540e\u4f60\u53ef\u4ee5\u5c06 <code>Metadata Extractors</code> \u4e0e\u6211\u4eec\u7684\u8282\u70b9\u89e3\u6790\u5668\u94fe\u63a5\u8d77\u6765\uff1a</p> Python<pre><code>from llama_index.core.extractors import (\n    TitleExtractor,\n    QuestionsAnsweredExtractor,\n)\nfrom llama_index.core.node_parser import TokenTextSplitter\n\ntext_splitter = TokenTextSplitter(\n    separator=\" \", chunk_size=512, chunk_overlap=128\n)\ntitle_extractor = TitleExtractor(nodes=5)\nqa_extractor = QuestionsAnsweredExtractor(questions=3)\n\n# assume documents are defined -&gt; extract nodes\nfrom llama_index.core.ingestion import IngestionPipeline\n\npipeline = IngestionPipeline(\n    transformations=[text_splitter, title_extractor, qa_extractor]\n)\n\nnodes = pipeline.run(\n    documents=documents,\n    in_place=True,\n    show_progress=True,\n)\n</code></pre> <p>\u6216\u63d2\u5165\u7d22\u5f15\uff1a</p> Python<pre><code>from llama_index.core import VectorStoreIndex\n\nindex = VectorStoreIndex.from_documents(\n    documents, transformations=[text_splitter, title_extractor, qa_extractor]\n)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E6%96%87%E6%A1%A3%E5%92%8C%E8%8A%82%E7%82%B9/%E5%85%83%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96/#_2","title":"\u8d44\u6e90","text":"<ul> <li>SEC \u6587\u4ef6\u5143\u6570\u636e\u63d0\u53d6</li> <li>LLM \u8c03\u67e5\u63d0\u53d6</li> <li>\u5b9e\u4f53\u63d0\u53d6</li> <li>Marvin \u5143\u6570\u636e\u63d0\u53d6</li> <li>Pydantic \u5143\u6570\u636e\u63d0\u53d6</li> </ul>"},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E6%96%87%E6%A1%A3%E5%92%8C%E8%8A%82%E7%82%B9/%E5%BC%95%E8%A8%80/","title":"\u5f15\u8a00","text":""},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E6%96%87%E6%A1%A3%E5%92%8C%E8%8A%82%E7%82%B9/%E5%BC%95%E8%A8%80/#_1","title":"\u6587\u6863/\u8282\u70b9","text":""},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E6%96%87%E6%A1%A3%E5%92%8C%E8%8A%82%E7%82%B9/%E5%BC%95%E8%A8%80/#_2","title":"\u6982\u5ff5","text":"<p><code>Document</code> \u548c <code>Node</code> \u5bf9\u8c61\u662f LlamaIndex \u4e2d\u7684\u6838\u5fc3\u62bd\u8c61\u3002</p> <p>\u6587\u6863(Document) \u662f\u4efb\u4f55\u6570\u636e\u6e90\uff08\u4f8b\u5982 PDF\u3001API \u8f93\u51fa\u6216\u4ece\u6570\u636e\u5e93\u68c0\u7d22\u7684\u6570\u636e\uff09\u7684\u901a\u7528\u5bb9\u5668\u3002\u5b83\u4eec\u53ef\u4ee5\u624b\u52a8\u6784\u5efa\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7Llama-index\u7684\u6570\u636e\u52a0\u8f7d\u5668\u81ea\u52a8\u521b\u5efa\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6587\u6863\u4f1a\u5b58\u50a8 \u6587\u672c \u4ee5\u53ca \u5176\u4ed6\u4e00\u4e9b\u5c5e\u6027\u3002\u4e0b\u9762\u5217\u51fa\u4e86\u5176\u4e2d\u4e00\u4e9b\u5c5e\u6027\u3002</p> <ul> <li>metadata: \u53ef\u4ee5\u9644\u52a0\u5230\u6587\u672c\u7684\u6ce8\u91ca\u8bcd\u5178\u3002</li> <li>relationships: \u5305\u542b\u4e0e \u5176\u4ed6\u6587\u6863/\u8282\u70b9 \u7684 \u5173\u7cfb \u7684\u5b57\u5178\u3002</li> </ul> <p>\u8282\u70b9\u8868\u793a\u6e90\u6587\u6863\u7684\u201c\u5757\u201d\uff0c\u53ef\u4ee5\u662f\u6587\u672c\u5757\u3001\u56fe\u50cf\u6216\u5176\u4ed6\u3002\u4e0e\u6587\u6863\u7c7b\u4f3c\uff0c\u5b83\u4eec\u5305\u542b\u5143\u6570\u636e\u548c\u4e0e\u5176\u4ed6\u8282\u70b9\u7684\u5173\u7cfb\u4fe1\u606f\u3002</p> <p>\u8282\u70b9(Node)\u662f LlamaIndex \u4e2d\u7684\u4e00\u7b49\u516c\u6c11\u3002\u60a8\u53ef\u4ee5\u9009\u62e9\u76f4\u63a5\u5b9a\u4e49\u8282\u70b9\u53ca\u5176\u6240\u6709\u5c5e\u6027\u3002\u60a8\u4e5f\u53ef\u4ee5\u9009\u62e9\u901a\u8fc7\u6211\u4eec\u7684 <code>NodeParser</code> \u7c7b\u5c06\u6e90\u6587\u6863\u201c\u89e3\u6790\u201d\u4e3a\u8282\u70b9\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4ece\u6587\u6863\u6d3e\u751f\u7684\u6bcf\u4e2a\u8282\u70b9\u90fd\u5c06\u4ece\u8be5\u6587\u6863\u7ee7\u627f\u76f8\u540c\u7684\u5143\u6570\u636e\uff08\u4f8b\u5982\uff0c\u6587\u6863\u4e2d\u5f52\u6863\u7684\u201cfile_name\u201d\u4f1a\u4f20\u64ad\u5230\u6bcf\u4e2a\u8282\u70b9\uff09\u3002</p>"},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E6%96%87%E6%A1%A3%E5%92%8C%E8%8A%82%E7%82%B9/%E5%BC%95%E8%A8%80/#_3","title":"\u4f7f\u7528\u6a21\u5f0f","text":"<p>\u4ee5\u4e0b\u662f\u4e00\u4e9b\u6709\u5173\u6587\u6863\u548c\u8282\u70b9\u7684\u7b80\u5355\u4ee3\u7801\u7247\u6bb5\u3002</p>"},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E6%96%87%E6%A1%A3%E5%92%8C%E8%8A%82%E7%82%B9/%E5%BC%95%E8%A8%80/#documents","title":"\u6587\u6863 Documents","text":"Python<pre><code>from llama_index.core import Document, VectorStoreIndex\n\ntext_list = [text1, text2, ...]\ndocuments = [Document(text=t) for t in text_list]\n\n# build index\nindex = VectorStoreIndex.from_documents(documents)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E6%96%87%E6%A1%A3%E5%92%8C%E8%8A%82%E7%82%B9/%E5%BC%95%E8%A8%80/#nodes","title":"\u8282\u70b9 Nodes","text":"Python<pre><code>from llama_index.core.node_parser import SentenceSplitter\n\n# load documents\n...\n\n# parse nodes\nparser = SentenceSplitter()\nnodes = parser.get_nodes_from_documents(documents)\n\n# build index\nindex = VectorStoreIndex(nodes)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E6%96%87%E6%A1%A3%E5%92%8C%E8%8A%82%E7%82%B9/%E5%BC%95%E8%A8%80/#_4","title":"\u6587\u6863/\u8282\u70b9\u4f7f\u7528\u65b9\u5f0f","text":"<p>\u8bf7\u67e5\u770b\u6211\u4eec\u7684\u6df1\u5165\u6307\u5357\uff0c\u4e86\u89e3\u6709\u5173\u5982\u4f55\u4f7f\u7528\u6587\u6863/\u8282\u70b9\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\u3002</p> <ul> <li>\u4f7f\u7528\u6587\u6863</li> <li>\u4f7f\u7528\u8282\u70b9</li> <li>\u63d2\u5165\u5230\u6d41\u7a0b</li> </ul>"},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E6%96%87%E6%A1%A3%E5%92%8C%E8%8A%82%E7%82%B9/%E8%8A%82%E7%82%B9%E4%BD%BF%E7%94%A8/","title":"\u8282\u70b9\u4f7f\u7528","text":""},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E6%96%87%E6%A1%A3%E5%92%8C%E8%8A%82%E7%82%B9/%E8%8A%82%E7%82%B9%E4%BD%BF%E7%94%A8/#_1","title":"\u5b9a\u4e49\u548c\u81ea\u5b9a\u4e49\u8282\u70b9","text":"<p>\u8282\u70b9\u4ee3\u8868\u6e90\u6587\u6863\u7684 \u201c\u5757(chunks)\u201d\uff0c\u53ef\u4ee5\u662f\u6587\u672c\u5757\u3001\u56fe\u50cf\u7b49\u3002\u5b83\u4eec\u8fd8\u5305\u542b\u5143\u6570\u636e\u4ee5\u53ca\u4e0e\u5176\u4ed6\u8282\u70b9\u548c\u7d22\u5f15\u7ed3\u6784\u7684\u5173\u7cfb\u4fe1\u606f\u3002</p> <p>\u8282\u70b9\u662f LlamaIndex \u4e2d\u7684\u4e00\u7b49\u516c\u6c11\u3002\u60a8\u53ef\u4ee5\u9009\u62e9\u76f4\u63a5\u5b9a\u4e49\u8282\u70b9\u53ca\u5176\u6240\u6709\u5c5e\u6027\u3002\u60a8\u4e5f\u53ef\u4ee5\u9009\u62e9\u901a\u8fc7\u6211\u4eec\u7684 <code>NodeParser</code> \u7c7b\u5c06\u6e90\u6587\u6863 \u201c\u89e3\u6790\u201d \u4e3a\u8282\u70b9\u3002</p> <p>\u4f8b\u5982\uff0c\u4f60\u53ef\u4ee5\u8fd9\u6837\u505a</p> Python<pre><code>from llama_index.core.node_parser import SentenceSplitter\n\nparser = SentenceSplitter()\n\nnodes = parser.get_nodes_from_documents(documents)\n</code></pre> <p>\u4f60\u4e5f\u53ef\u4ee5\u9009\u62e9\u624b\u52a8\u6784\u9020 Node \u5bf9\u8c61\u5e76\u8df3\u8fc7\u7b2c\u4e00\u90e8\u5206\u3002\u4f8b\u5982\uff0c</p> Python<pre><code>from llama_index.core.schema import TextNode, NodeRelationship, RelatedNodeInfo\n\nnode1 = TextNode(text=\"&lt;text_chunk&gt;\", id_=\"&lt;node_id&gt;\")\nnode2 = TextNode(text=\"&lt;text_chunk&gt;\", id_=\"&lt;node_id&gt;\")\n# set relationships\nnode1.relationships[NodeRelationship.NEXT] = RelatedNodeInfo(\n    node_id=node2.node_id\n)\nnode2.relationships[NodeRelationship.PREVIOUS] = RelatedNodeInfo(\n    node_id=node1.node_id\n)\nnodes = [node1, node2]\n</code></pre> <p>\u5982\u679c\u9700\u8981\uff0c\u8be5\u7c7b <code>RelatedNodeInfo</code> \u8fd8\u53ef\u4ee5\u5b58\u50a8\u5176\u4ed6\u5185\u5bb9 <code>metadata</code>\uff1a</p> Python<pre><code>node2.relationships[NodeRelationship.PARENT] = RelatedNodeInfo(\n    node_id=node1.node_id, metadata={\"key\": \"val\"}\n)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/%E6%96%87%E6%A1%A3%E5%92%8C%E8%8A%82%E7%82%B9/%E8%8A%82%E7%82%B9%E4%BD%BF%E7%94%A8/#id","title":"\u81ea\u5b9a\u4e49 ID","text":"<p>\u6bcf\u4e2a\u8282\u70b9\u90fd\u6709\u4e00\u4e2a <code>node_id</code> \u5c5e\u6027\uff0c\u5982\u679c\u672a\u624b\u52a8\u6307\u5b9a\uff0c\u5219\u4f1a\u81ea\u52a8\u751f\u6210\u3002\u6b64 ID \u53ef\u7528\u4e8e\u591a\u79cd\u7528\u9014\uff1b\u5305\u62ec\u80fd\u591f\u66f4\u65b0\u5b58\u50a8\u4e2d\u7684\u8282\u70b9\u3001\u80fd\u591f\u5b9a\u4e49\u8282\u70b9\u4e4b\u95f4\u7684\u5173\u7cfb\uff08\u901a\u8fc7IndexNode\uff09\u7b49\u7b49\u3002</p> <p>\u60a8\u8fd8\u53ef\u4ee5\u76f4\u63a5\u83b7\u53d6\u548c\u8bbe\u7f6e <code>node_id</code> \u4efb\u4f55\u7684 <code>TextNode</code>\u3002</p> Python<pre><code>print(node.node_id)\nnode.node_id = \"My new node_id!\"\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E5%BC%95%E8%A8%80/","title":"\u5f15\u8a00","text":""},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E5%BC%95%E8%A8%80/#query","title":"\u67e5\u8be2 query","text":"<p>\u67e5\u8be2\u662f LLM \u5e94\u7528\u4e2d\u6700\u91cd\u8981\u7684\u90e8\u5206\u3002\u8981\u4e86\u89e3\u6709\u5173\u83b7\u53d6\u53ef\u90e8\u7f72\u7684\u6700\u7ec8\u4ea7\u54c1\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u67e5\u770b \u67e5\u8be2\u5f15\u64ce\u3001\u804a\u5929\u5f15\u64ce\u3002</p> <p>\u5982\u679c\u60a8\u5e0c\u671b\u5c06\u9ad8\u7ea7\u63a8\u7406\u4e0e\u5de5\u5177\u4f7f\u7528\u76f8\u7ed3\u5408\uff0c\u8bf7\u67e5\u770b\u6211\u4eec\u7684\u4ee3\u7406\u6307\u5357\u3002</p>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E5%BC%95%E8%A8%80/#_1","title":"\u67e5\u8be2\u5de5\u4f5c\u6d41","text":"<p>\u60a8\u53ef\u4ee5\u4f7f\u7528\u6211\u4eec\u7684\u4e8b\u4ef6\u9a71\u52a8\u754c\u9762\u8f7b\u677e\u521b\u5efa\u67e5\u8be2\u5de5\u4f5c\u6d41 Workflow\u3002\u67e5\u770b\u6211\u4eec\u7684\u5de5\u4f5c\u6d41\u6307\u5357\u4e86\u89e3\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\u3002</p> <p>\u5426\u5219\uff0c\u8bf7\u67e5\u770b\u5982\u4f55\u5c06\u6211\u4eec\u7684\u67e5\u8be2\u6a21\u5757\u7528\u4f5c\u72ec\u7acb\u7ec4\u4ef6\u3002</p>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E5%BC%95%E8%A8%80/#_2","title":"\u67e5\u8be2\u6a21\u5757","text":"<ul> <li>\u67e5\u8be2\u5f15\u64ce</li> <li>\u804a\u5929\u5f15\u64ce</li> <li>\u4ee3\u7406</li> <li>\u68c0\u7d22</li> <li>\u54cd\u5e94\u5408\u6210\u5668</li> <li>\u8def\u7531\u5668</li> <li>\u8282\u70b9\u540e\u5904\u7406\u5668</li> <li>\u7ed3\u6784\u5316\u8f93\u51fa</li> </ul>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E6%A3%80%E7%B4%A2/%E5%BC%95%E8%A8%80/","title":"\u5f15\u8a00","text":""},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E6%A3%80%E7%B4%A2/%E5%BC%95%E8%A8%80/#_1","title":"\u68c0\u7d22","text":""},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E6%A3%80%E7%B4%A2/%E5%BC%95%E8%A8%80/#_2","title":"\u6982\u5ff5","text":"<p>\u68c0\u7d22\u5668\u8d1f\u8d23\u6839\u636e\u7528\u6237\u67e5\u8be2\uff08\u6216\u804a\u5929\u6d88\u606f\uff09\u83b7\u53d6\u6700\u76f8\u5173\u7684\u4e0a\u4e0b\u6587\u3002</p> <p>\u5b83\u53ef\u5efa\u7acb\u5728\u7d22\u5f15\u4e4b\u4e0a\uff0c\u4f46\u4e5f\u53ef\u72ec\u7acb\u5b9a\u4e49\u3002\u5b83\u53ef\u7528\u4f5c\u67e5\u8be2\u5f15\u64ce\uff08\u548c\u804a\u5929\u5f15\u64ce\uff09\u4e2d\u68c0\u7d22\u76f8\u5173\u4e0a\u4e0b\u6587\u7684\u5173\u952e\u6784\u5efa\u5757\u3002</p> <p>\u63d0\u793a</p> <p>\u4e0d\u6e05\u695a\u68c0\u7d22\u5668\u5728 RAG \u5de5\u4f5c\u6d41\u7a0b\u4e2d\u7684\u4f4d\u7f6e\uff1f\u9605\u8bfb\u6709\u5173\u9ad8\u7ea7\u6982\u5ff5\u7684\u5185\u5bb9</p> <p>\u4f7f\u7528\u6a21\u5f0f# \u5f00\u59cb\u4f7f\u7528\uff1a</p> <p>retriever = index.as_retriever() nodes = retriever.retrieve(\"Who is Paul Graham?\") \u7acb\u5373\u5f00\u59cb# \u4ece\u7d22\u5f15\u4e2d\u83b7\u53d6\u68c0\u7d22\u5668\uff1a</p> <p>retriever = index.as_retriever() \u68c0\u7d22\u95ee\u9898\u7684\u76f8\u5173\u4e0a\u4e0b\u6587\uff1a</p> <p>nodes = retriever.retrieve(\"Who is Paul Graham?\") \u6ce8\u610f\uff1a\u8981\u4e86\u89e3\u5982\u4f55\u5efa\u7acb\u7d22\u5f15\uff0c\u8bf7\u53c2\u9605\u7d22\u5f15</p> <p>\u9ad8\u7ea7 API# \u9009\u62e9\u730e\u72ac# \u60a8\u53ef\u4ee5\u901a\u8fc7 \u9009\u62e9\u7279\u5b9a\u4e8e\u7d22\u5f15\u7684\u68c0\u7d22\u5668\u7c7bretriever_mode\u3002\u4f8b\u5982\uff0c\u4f7f\u7528SummaryIndex\uff1a</p> <p>retriever = summary_index.as_retriever(     retriever_mode=\"llm\", ) \u8fd9\u4f1a\u5728\u6458\u8981\u7d22\u5f15\u4e4b\u4e0a\u521b\u5efa\u4e00\u4e2aSummaryIndexLLMRetriever \u3002</p> <p>\u8bf7\u53c2\u9605\u68c0\u7d22\u5668\u6a21\u5f0f\u4ee5\u83b7\u53d6\uff08\u7d22\u5f15\u7279\u5b9a\u7684\uff09\u68c0\u7d22\u5668\u6a21\u5f0f\u53ca\u5176\u6620\u5c04\u5230\u7684\u68c0\u7d22\u5668\u7c7b\u7684\u5b8c\u6574\u5217\u8868\u3002</p> <p>\u914d\u7f6e\u68c0\u7d22\u5668# \u540c\u6837\u5730\uff0c\u60a8\u53ef\u4ee5\u4f20\u9012 kwargs \u6765\u914d\u7f6e\u6240\u9009\u7684\u68c0\u7d22\u5668\u3002</p> <p>\u6ce8\u610f\uff1a\u67e5\u770b\u6240\u9009\u68c0\u7d22\u5668\u7c7b\u7684\u6784\u9020\u51fd\u6570\u53c2\u6570\u7684 API \u53c2\u8003\uff0c\u4ee5\u83b7\u53d6\u6709\u6548 kwargs \u5217\u8868\u3002</p> <p>\u4f8b\u5982\uff0c\u5982\u679c\u6211\u4eec\u9009\u62e9\u201cllm\u201d\u68c0\u7d22\u5668\u6a21\u5f0f\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a</p> <p>retriever = summary_index.as_retriever(     retriever_mode=\"llm\",     choice_batch_size=5, ) \u4f4e\u7ea7\u7ec4\u5408 API# \u5982\u679c\u60a8\u9700\u8981\u66f4\u7cbe\u7ec6\u7684\u63a7\u5236\uff0c\u53ef\u4ee5\u4f7f\u7528\u4f4e\u7ea7\u7ec4\u5408 API\u3002</p> <p>\u4e3a\u4e86\u5b9e\u73b0\u4e0e\u4e0a\u8ff0\u76f8\u540c\u7684\u7ed3\u679c\uff0c\u60a8\u53ef\u4ee5\u76f4\u63a5\u5bfc\u5165\u5e76\u6784\u5efa\u6240\u9700\u7684\u68c0\u7d22\u5668\u7c7b\uff1a</p> <p>from llama_index.core.retrievers import SummaryIndexLLMRetriever</p> <p>retriever = SummaryIndexLLMRetriever(     index=summary_index,     choice_batch_size=5, ) \u793a\u4f8b# \u8bf7\u53c2\u9605\u730e\u72ac\u6307\u5357\u4e2d\u7684\u66f4\u591a\u793a\u4f8b\u3002</p>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E5%93%8D%E5%BA%94%E5%90%88%E6%88%90/","title":"\u54cd\u5e94\u5408\u6210","text":""},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E5%93%8D%E5%BA%94%E5%90%88%E6%88%90/#_1","title":"\u54cd\u5e94\u5408\u6210\u5668","text":""},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E5%93%8D%E5%BA%94%E5%90%88%E6%88%90/#_2","title":"\u6982\u5ff5","text":"<p>\u54cd\u5e94\u5408\u6210 <code>Response Synthesizer</code> \u662f\u4f7f\u7528\u7528\u6237\u67e5\u8be2\u548c\u7ed9\u5b9a\u7684\u4e00\u7ec4\u6587\u672c\u5757\u4ece LLM \u751f\u6210\u54cd\u5e94\u7684\u7ec4\u4ef6\u3002\u54cd\u5e94\u5408\u6210\u5668\u7684\u8f93\u51fa\u662f\u4e00\u4e2a <code>Response</code> \u5bf9\u8c61\u3002</p> <p>\u5b9e\u73b0\u6b64\u76ee\u7684\u7684\u65b9\u6cd5\u6709\u5f88\u591a\u79cd\uff0c\u4ece\u7b80\u5355\u7684\u8fed\u4ee3\u6587\u672c\u5757\u5230\u590d\u6742\u7684\u6784\u5efa\u6811\u3002\u8fd9\u91cc\u7684\u4e3b\u8981\u601d\u60f3\u662f\u7b80\u5316\u4f7f\u7528 LLM \u8de8\u6570\u636e\u751f\u6210\u54cd\u5e94\u7684\u8fc7\u7a0b\u3002</p> <p>\u5728\u67e5\u8be2\u5f15\u64ce\u4e2d\u4f7f\u7528\u65f6\uff0c\u54cd\u5e94\u5408\u6210\u5668\u5728\u4ece\u68c0\u7d22\u5668\u68c0\u7d22\u5230\u8282\u70b9\u4e4b\u540e\u4ee5\u53ca\u8fd0\u884c\u4efb\u4f55\u8282\u70b9\u540e\u5904\u7406\u5668\u4e4b\u540e\u4f7f\u7528\u3002</p> <p>\u63d0\u793a</p> <p>\u4e0d\u6e05\u695a\u54cd\u5e94\u5408\u6210\u5668\u5728 RAG \u5de5\u4f5c\u6d41\u7a0b\u4e2d\u7684\u4f4d\u7f6e\uff1f\u9605\u8bfb\u9ad8\u7ea7\u6982\u5ff5</p>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E5%93%8D%E5%BA%94%E5%90%88%E6%88%90/#_3","title":"\u4f7f\u7528\u6a21\u5f0f","text":"<p>\u4f7f\u7528\u5355\u72ec\u7684\u54cd\u5e94\u5408\u6210\u5668\uff1a</p> <p>Python<pre><code>from llama_index.core.data_structs import Node\nfrom llama_index.core.response_synthesizers import ResponseMode\nfrom llama_index.core import get_response_synthesizer\n\nresponse_synthesizer = get_response_synthesizer(\n    response_mode=ResponseMode.COMPACT\n)\n\nresponse = response_synthesizer.synthesize(\n    \"query text\", nodes=[Node(text=\"text\"), ...]\n)\n</code></pre> \u6216\u8005\u5728\u521b\u5efa\u7d22\u5f15\u4e4b\u540e\u5728\u67e5\u8be2\u5f15\u64ce\u4e2d\uff1a</p> Python<pre><code>query_engine = index.as_query_engine(response_synthesizer=response_synthesizer)\nresponse = query_engine.query(\"query_text\")\n</code></pre> <p>\u60a8\u53ef\u4ee5\u5728\u4e0b\u9762\u627e\u5230\u6709\u5173\u6240\u6709\u53ef\u7528\u7684\u54cd\u5e94\u5408\u6210\u5668\u3001\u6a21\u5f0f\u4ee5\u53ca\u5982\u4f55\u6784\u5efa\u81ea\u5df1\u7684\u54cd\u5e94\u5408\u6210\u5668\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\u3002</p>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E5%93%8D%E5%BA%94%E5%90%88%E6%88%90/#_4","title":"\u4f7f\u7528\u6a21\u5f0f","text":""},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E5%93%8D%E5%BA%94%E5%90%88%E6%88%90/#_5","title":"\u7acb\u5373\u5f00\u59cb","text":"<p>\u4f7f\u7528\u4ee5\u4e0b\u65b9\u6cd5\u914d\u7f6e\u67e5\u8be2\u5f15\u64ce\u7684\u54cd\u5e94\u5408\u6210\u5668response_mode\uff1a</p> Python<pre><code>from llama_index.core.data_structs import Node\nfrom llama_index.core.schema import NodeWithScore\nfrom llama_index.core import get_response_synthesizer\n\nresponse_synthesizer = get_response_synthesizer(response_mode=\"compact\")\n\nresponse = response_synthesizer.synthesize(\n    \"query text\", nodes=[NodeWithScore(node=Node(text=\"text\"), score=1.0), ...]\n)\n</code></pre> <p>\u6216\u8005\uff0c\u66f4\u5e38\u89c1\u7684\u662f\uff0c\u5728\u67e5\u8be2\u5f15\u64ce\u4e2d\u521b\u5efa\u7d22\u5f15\u540e\uff1a</p> Python<pre><code>query_engine = index.as_query_engine(response_synthesizer=response_synthesizer)\nresponse = query_engine.query(\"query_text\")\n</code></pre> <p>\u63d0\u793a</p> <p>\u8981\u4e86\u89e3\u5982\u4f55\u5efa\u7acb\u7d22\u5f15\uff0c\u8bf7\u53c2\u9605\u7d22\u5f15</p>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E5%93%8D%E5%BA%94%E5%90%88%E6%88%90/#_6","title":"\u914d\u7f6e\u54cd\u5e94\u6a21\u5f0f","text":"<p>\u54cd\u5e94\u5408\u6210\u5668\u901a\u5e38\u901a\u8fc7 kwarg \u8bbe\u7f6e\u6307\u5b9aresponse_mode\u3002</p> <p>LlamaIndex \u4e2d\u5df2\u7ecf\u5b9e\u73b0\u4e86\u51e0\u4e2a\u54cd\u5e94\u5408\u6210\u5668\uff1a</p> <ul> <li>refine\uff1a\u901a\u8fc7\u4f9d\u6b21\u6d4f\u89c8\u6bcf\u4e2a\u68c0\u7d22\u5230\u7684\u6587\u672c\u5757\u6765\u521b\u5efa\u548c\u5b8c\u5584\u7b54\u6848\u3002\u8fd9\u4f1a\u4e3a\u6bcf\u4e2a\u8282\u70b9/\u68c0\u7d22\u5230\u7684\u5757\u8fdb\u884c\u5355\u72ec\u7684 LLM \u8c03\u7528\u3002</li> <li>\u8be6\u7ec6\u4fe1\u606f\uff1a\u7b2c\u4e00\u4e2a\u5757\u7528\u4e8e\u4f7f\u7528 text_qa_template\u63d0\u793a\u7684\u67e5\u8be2\u3002\u7136\u540e\u7b54\u6848\u548c\u4e0b\u4e00\u4e2a\u5757\uff08\u4ee5\u53ca\u539f\u59cb\u95ee\u9898\uff09\u7528\u4e8e\u53e6\u4e00\u4e2a\u5e26\u6709refine_template\u63d0\u793a\u7684\u67e5\u8be2\u3002\u4f9d\u6b64\u7c7b\u63a8\uff0c\u76f4\u5230\u6240\u6709\u5757\u90fd\u5df2\u89e3\u6790\u3002</li> </ul> <p>\u5982\u679c\u67d0\u4e2a\u5757\u592a\u5927\u800c\u65e0\u6cd5\u653e\u5165\u7a97\u53e3\uff08\u8003\u8651\u63d0\u793a\u5927\u5c0f\uff09\uff0c\u5219\u4f7f\u7528 \u8fdb\u884c\u62c6\u5206TokenTextSplitter \uff08\u5141\u8bb8\u5757\u4e4b\u95f4\u6709\u4e00\u4e9b\u6587\u672c\u91cd\u53e0\uff09\uff0c\u5e76\u4e14\u5c06\uff08\u65b0\u7684\uff09\u9644\u52a0\u5757\u89c6\u4e3a\u539f\u59cb\u5757\u96c6\u5408\u7684\u5757\uff08\u56e0\u6b64\u4e5f\u4f7f\u7528 \u8fdb\u884c\u67e5\u8be2refine_template\uff09\u3002</p> <p>\u5e0c\u671b\u80fd\u5f97\u5230\u66f4\u8be6\u7ec6\u7684\u7b54\u6848\u3002</p> <p>compact\uff08\u9ed8\u8ba4\uff09\uff1a\u7c7b\u4f3c\u4e8erefine\u4f46\u9884\u5148\u538b\u7f29\uff08\u8fde\u63a5\uff09\u5757\uff0c\u4ece\u800c\u51cf\u5c11 LLM \u8c03\u7528\u3002 \u8be6\u7ec6\u4fe1\u606f\uff1a\u586b\u5145\u5c3d\u53ef\u80fd\u591a\u7684\u6587\u672c\uff08\u4ece\u68c0\u7d22\u5230\u7684\u5757\u4e2d\u8fde\u63a5/\u6253\u5305\uff09\uff0c\u4f7f\u5176\u9002\u5408\u4e0a\u4e0b\u6587\u7a97\u53e3\uff08\u8003\u8651text_qa_template\u548c\u4e4b\u95f4\u7684\u6700\u5927\u63d0\u793a\u5927\u5c0frefine_template\uff09\u3002\u5982\u679c\u6587\u672c\u592a\u957f\u800c\u65e0\u6cd5\u5bb9\u7eb3\u5728\u4e00\u4e2a\u63d0\u793a\u4e2d\uff0c\u5219\u4f1a\u6839\u636e\u9700\u8981\u5c06\u5176\u62c6\u5206\u4e3a\u5c3d\u53ef\u80fd\u591a\u7684\u90e8\u5206\uff08\u4f7f\u7528TokenTextSplitter\u548c\uff0c\u4ece\u800c\u5141\u8bb8\u6587\u672c\u5757\u4e4b\u95f4\u6709\u4e00\u4e9b\u91cd\u53e0\uff09\u3002</p> <p>\u6bcf\u4e2a\u6587\u672c\u90e8\u5206\u90fd\u88ab\u89c6\u4e3a\u4e00\u4e2a\u201c\u5757\u201d\u5e76\u88ab\u53d1\u9001\u5230refine\u5408\u6210\u5668\u3002</p> <p>\u7b80\u800c\u8a00\u4e4b\uff0c\u5b83\u7c7b\u4f3c\u4e8erefine\uff0c\u4f46\u662f LLM \u8c03\u7528\u8f83\u5c11\u3002</p> <p>tree_summarizesummary_template\uff1a\u4f7f\u7528\u63d0\u793a\u6839\u636e\u9700\u8981\u591a\u6b21\u67e5\u8be2 LLM \uff0c\u4ee5\u4fbf\u67e5\u8be2\u6240\u6709\u8fde\u63a5\u7684\u5757\uff0c\u4ece\u800c\u4ea7\u751f\u5c3d\u53ef\u80fd\u591a\u7684\u7b54\u6848\uff0c\u8fd9\u4e9b\u7b54\u6848\u672c\u8eab\u5728tree_summarizeLLM \u8c03\u7528\u4e2d\u9012\u5f52\u7528\u4f5c\u5757\uff0c\u4f9d\u6b64\u7c7b\u63a8\uff0c\u76f4\u5230\u53ea\u5269\u4e0b\u4e00\u4e2a\u5757\uff0c\u56e0\u6b64\u53ea\u6709\u4e00\u4e2a\u6700\u7ec8\u7b54\u6848\u3002 \u8be6\u7ec6\u4fe1\u606f\uff1a\u4f7f\u7528\u63d0\u793a\u5c3d\u53ef\u80fd\u591a\u5730\u8fde\u63a5\u5757\u4ee5\u9002\u5e94\u4e0a\u4e0b\u6587\u7a97\u53e3summary_template\uff0c\u5e76\u5728\u9700\u8981\u65f6\u62c6\u5206\u5b83\u4eec\uff08\u518d\u6b21\u4f7f\u7528TokenTextSplitter\u548c\u4e00\u4e9b\u6587\u672c\u91cd\u53e0\uff09\u3002\u7136\u540e\uff0c\u67e5\u8be2\u6bcf\u4e2a\u7ed3\u679c\u5757/\u62c6\u5206 summary_template\uff08\u6ca1\u6709\u7ec6\u5316\u67e5\u8be2\uff01\uff09\u5e76\u83b7\u5f97\u5c3d\u53ef\u80fd\u591a\u7684\u7b54\u6848\u3002</p> <p>\u5982\u679c\u53ea\u6709\u4e00\u4e2a\u7b54\u6848\uff08\u56e0\u4e3a\u53ea\u6709\u4e00\u4e2a\u5757\uff09\uff0c\u90a3\u4e48\u5b83\u5c31\u662f\u6700\u7ec8\u7b54\u6848\u3002</p> <p>\u5982\u679c\u6709\u591a\u4e2a\u7b54\u6848\uff0c\u8fd9\u4e9b\u7b54\u6848\u672c\u8eab\u5c06\u88ab\u89c6\u4e3a\u5757\u5e76\u9012\u5f52\u53d1\u9001\u5230tree_summarize\u6d41\u7a0b\uff08\u8fde\u63a5/\u62c6\u5206\u4ee5\u9002\u5e94/\u67e5\u8be2\uff09\u3002</p> <p>\u6709\u5229\u4e8e\u603b\u7ed3\u76ee\u7684\u3002</p> <p>simple_summarize\uff1a\u622a\u65ad\u6240\u6709\u6587\u672c\u5757\u4ee5\u9002\u5408\u5355\u4e2a LLM \u63d0\u793a\u3002\u9002\u5408\u5feb\u901f\u603b\u7ed3\uff0c\u4f46\u53ef\u80fd\u4f1a\u56e0\u622a\u65ad\u800c\u4e22\u5931\u7ec6\u8282\u3002 no_text\uff1a\u4ec5\u8fd0\u884c\u68c0\u7d22\u5668\u6765\u83b7\u53d6\u672c\u5e94\u53d1\u9001\u5230 LLM \u7684\u8282\u70b9\uff0c\u800c\u4e0d\u5b9e\u9645\u53d1\u9001\u5b83\u4eec\u3002\u7136\u540e\u53ef\u4ee5\u901a\u8fc7\u68c0\u67e5\u6765\u68c0\u67e5response.source_nodes\u3002 context_only\uff1a\u8fd4\u56de\u6240\u6709\u6587\u672c\u5757\u7684\u8fde\u63a5\u5b57\u7b26\u4e32\u3002 accumulate\uff1a\u7ed9\u5b9a\u4e00\u7ec4\u6587\u672c\u5757\u548c\u67e5\u8be2\uff0c\u5c06\u67e5\u8be2\u5e94\u7528\u4e8e\u6bcf\u4e2a\u6587\u672c\u5757\uff0c\u540c\u65f6\u5c06\u54cd\u5e94\u7d2f\u79ef\u5230\u6570\u7ec4\u4e2d\u3002\u8fd4\u56de\u6240\u6709\u54cd\u5e94\u7684\u8fde\u63a5\u5b57\u7b26\u4e32\u3002\u5f53\u60a8\u9700\u8981\u9488\u5bf9\u6bcf\u4e2a\u6587\u672c\u5757\u5206\u522b\u8fd0\u884c\u76f8\u540c\u7684\u67e5\u8be2\u65f6\uff0c\u8fd9\u79cd\u65b9\u6cd5\u975e\u5e38\u6709\u7528\u3002 compact_accumulate\uff1a\u4e0e\u7d2f\u79ef\u76f8\u540c\uff0c\u4f46\u5c06\u201c\u538b\u7f29\u201d\u7c7b\u4f3c\u4e8e\u7684\u6bcf\u4e2a LLM \u63d0\u793a compact\uff0c\u5e76\u5bf9\u6bcf\u4e2a\u6587\u672c\u5757\u8fd0\u884c\u76f8\u540c\u7684\u67e5\u8be2\u3002</p>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E5%93%8D%E5%BA%94%E5%90%88%E6%88%90/#_7","title":"\u81ea\u5b9a\u4e49\u54cd\u5e94\u5408\u6210\u5668","text":"<p>\u6bcf\u4e2a\u54cd\u5e94\u5408\u6210\u5668\u90fd\u7ee7\u627f\u81ea <code>llama_index.response_synthesizers.base.BaseSynthesizer</code>\u3002\u57fa\u7840 <code>API</code> \u975e\u5e38\u7b80\u5355\uff0c\u53ef\u4ee5\u8f7b\u677e\u521b\u5efa\u81ea\u5df1\u7684\u54cd\u5e94\u5408\u6210\u5668\u3002</p> <p>\u4e5f\u8bb8\u6211\u4eec\u60f3\u8981\u5728\u6bcf\u4e2a <code>tree_summarize</code> \u6b65\u9aa4\u4e2d\u81ea\u5b9a\u4e49\u4f7f\u7528\u7684\u6a21\u677f\uff0c\u6216\u8005\u4e5f\u8bb8\u6709\u4e00\u7bc7\u65b0\u7684\u7814\u7a76\u8bba\u6587\u8be6\u7ec6\u4ecb\u7ecd\u4e86\u4e00\u79cd\u751f\u6210\u67e5\u8be2\u54cd\u5e94\u7684\u65b0\u65b9\u6cd5\uff0c\u60a8\u53ef\u4ee5\u521b\u5efa\u81ea\u5df1\u7684\u54cd\u5e94\u5408\u6210\u5668\u5e76\u5c06\u5176\u63d2\u5165\u4efb\u4f55\u67e5\u8be2\u5f15\u64ce\u6216\u5355\u72ec\u4f7f\u7528\u5b83\u3002</p> <p>\u4e0b\u9762\u6211\u4eec\u5c55\u793a\u4e86\u8be5\u521d\u59cb\u5316 <code>__init__()</code> \u51fd\u6570\u4ee5\u53ca\u6bcf\u4e2a\u54cd\u5e94\u5408\u6210\u5668\u5fc5\u987b\u5b9e\u73b0\u7684\u4e24\u4e2a\u62bd\u8c61\u65b9\u6cd5\u3002\u57fa\u672c\u8981\u6c42\u662f\u5904\u7406\u67e5\u8be2\u548c\u6587\u672c\u5757\uff0c\u5e76\u8fd4\u56de\u5b57\u7b26\u4e32\uff08\u6216\u5b57\u7b26\u4e32\u751f\u6210\u5668\uff09\u54cd\u5e94\u3002</p> Python<pre><code>from llama_index.core import Settings\n\n\nclass BaseSynthesizer(ABC):\n    \"\"\"Response builder class.\"\"\"\n\n    def __init__(\n        self,\n        llm: Optional[LLM] = None,\n        streaming: bool = False,\n    ) -&gt; None:\n        \"\"\"Init params.\"\"\"\n        self._llm = llm or Settings.llm\n        self._callback_manager = Settings.callback_manager\n        self._streaming = streaming\n\n    @abstractmethod\n    def get_response(\n        self,\n        query_str: str,\n        text_chunks: Sequence[str],\n        **response_kwargs: Any,\n    ) -&gt; RESPONSE_TEXT_TYPE:\n        \"\"\"\u540c\u6b65\u63a5\u53e3Get response.\"\"\"\n        ...\n\n    @abstractmethod\n    async def aget_response(\n        self,\n        query_str: str,\n        text_chunks: Sequence[str],\n        **response_kwargs: Any,\n    ) -&gt; RESPONSE_TEXT_TYPE:\n        \"\"\"\u5f02\u6b65\u63a5\u53e3Get response.\"\"\"\n        ...\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E5%93%8D%E5%BA%94%E5%90%88%E6%88%90/#_8","title":"\u4f7f\u7528\u7ed3\u6784\u5316\u7b54\u6848\u8fc7\u6ee4\u3001","text":"<p>\u5f53\u4f7f\u7528 \"<code>refine</code>\" \u6216 \"<code>compact</code>\" \u54cd\u5e94\u5408\u6210\u6a21\u5757\u65f6\uff0c\u60a8\u53ef\u80fd\u4f1a\u53d1\u73b0\u5c1d\u8bd5 <code>structured_answer_filtering</code> \u9009\u9879\u5f88\u6709\u76ca\u3002</p> Python<pre><code>from llama_index.core import get_response_synthesizer\n\nresponse_synthesizer = get_response_synthesizer(structured_answer_filtering=True)\n</code></pre> <p>\u8bbe\u7f6e <code>structured_answer_filtering</code> \u4e3a <code>True</code> \u540e\uff0c\u6211\u4eec\u7684\u4f18\u5316\u6a21\u5757\u80fd\u591f\u8fc7\u6ee4\u6389\u4e0e\u6240\u63d0\u95ee\u9898\u65e0\u5173\u7684\u4efb\u4f55\u8f93\u5165\u8282\u70b9\u3002\u8fd9\u5bf9\u4e8e\u57fa\u4e8e RAG \u7684\u95ee\u7b54\u7cfb\u7edf\u5c24\u5176\u6709\u7528\uff0c\u56e0\u4e3a\u8be5\u7cfb\u7edf\u9700\u8981\u4ece\u5916\u90e8\u5411\u91cf\u5b58\u50a8\u4e2d\u68c0\u7d22\u7ed9\u5b9a\u7528\u6237\u67e5\u8be2\u7684\u6587\u672c\u5757\u3002</p> <p>\u5982\u679c\u60a8\u4f7f\u7528\u652f\u6301\u51fd\u6570\u8c03\u7528\u7684 OpenAI \u6a21\u578b\uff0c\u5219\u6b64\u9009\u9879\u7279\u522b\u6709\u7528\u3002\u5176\u4ed6 LLM \u63d0\u4f9b\u7a0b\u5e8f\u6216\u4e0d\u652f\u6301\u672c\u673a\u51fd\u6570\u8c03\u7528\u7684\u6a21\u578b\u5728\u751f\u6210\u6b64\u529f\u80fd\u6240\u4f9d\u8d56\u7684\u7ed3\u6784\u5316\u54cd\u5e94\u65f6\u53ef\u80fd\u4e0d\u592a\u53ef\u9760\u3002</p>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E5%93%8D%E5%BA%94%E5%90%88%E6%88%90/#_9","title":"\u4f7f\u7528\u81ea\u5b9a\u4e49\u63d0\u793a\u6a21\u677f\uff08\u5e26\u6709\u9644\u52a0\u53d8\u91cf\uff09","text":"<p>\u60a8\u53ef\u80fd\u5e0c\u671b\u81ea\u5b9a\u4e49\u6211\u4eec\u7684\u54cd\u5e94\u5408\u6210\u5668\u4e2d\u4f7f\u7528\u7684\u63d0\u793a\uff0c\u5e76\u5728\u67e5\u8be2\u65f6\u6dfb\u52a0\u5176\u4ed6\u53d8\u91cf\u3002</p> <p><code>**kwargs</code> \u60a8\u53ef\u4ee5\u5728 <code>for</code> \u4e2d\u6307\u5b9a\u8fd9\u4e9b\u9644\u52a0\u53d8\u91cf <code>get_response</code>\u3002</p> <p>\u4f8b\u5982\uff0c</p> Python<pre><code>from llama_index.core import PromptTemplate\nfrom llama_index.core.response_synthesizers import TreeSummarize\n\n# NOTE: we add an extra tone_name variable here\nqa_prompt_tmpl = (\n    \"Context information is below.\\n\"\n    \"---------------------\\n\"\n    \"{context_str}\\n\"\n    \"---------------------\\n\"\n    \"Given the context information and not prior knowledge, \"\n    \"answer the query.\\n\"\n    \"Please also write the answer in the tone of {tone_name}.\\n\"\n    \"Query: {query_str}\\n\"\n    \"Answer: \"\n)\nqa_prompt = PromptTemplate(qa_prompt_tmpl)\n\n# initialize response synthesizer\nsummarizer = TreeSummarize(verbose=True, summary_template=qa_prompt)\n\n# get response\nresponse = summarizer.get_response(\n    \"who is Paul Graham?\", [text], tone_name=\"a Shakespeare play\"\n)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E5%93%8D%E5%BA%94%E5%90%88%E6%88%90/#_10","title":"\u6a21\u5757","text":"<p>\u8bf7\u53c2\u9605\u5b8c\u6574\u7684\u6a21\u5757\u6307\u5357\u4ee5\u4e86\u89e3\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\u3002</p>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E5%BC%95%E8%A8%80/","title":"\u5f15\u8a00","text":""},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E5%BC%95%E8%A8%80/#_1","title":"\u7ed3\u6784\u5316\u8f93\u51fa","text":"<p>LLM \u751f\u6210\u7ed3\u6784\u5316\u8f93\u51fa\u7684\u80fd\u529b\u5bf9\u4e0b\u6e38\u5e94\u7528\u7a0b\u5e8f\u975e\u5e38\u91cd\u8981\uff0c\u4e0b\u6e38\u7684\u5e94\u7528\u7a0b\u5e8f\u5728\u6267\u884c\u7684\u8fc7\u7a0b\u4e2d\u4f9d\u8d56\u53ef\u9760\u89e3\u6790\u8f93\u51fa\u7684\u7ed3\u6784\u5316\u5185\u5bb9\u3002LlamaIndex \u672c\u8eab\u4e5f\u4ee5\u4ee5\u4e0b\u65b9\u5f0f\u4f9d\u8d56\u7ed3\u6784\u5316\u8f93\u51fa\u3002</p> <ul> <li>\u6587\u6863\u68c0\u7d22\uff1aLlamaIndex \u4e2d\u7684\u8bb8\u591a\u6570\u636e\u7ed3\u6784\u90fd\u4f9d\u8d56\u4e8e\u5177\u6709\u7279\u5b9a\u67b6\u6784\u7684 LLM \u8c03\u7528\u6765\u8fdb\u884c\u6587\u6863\u68c0\u7d22\u3002\u4f8b\u5982\uff0c\u6811\u7d22\u5f15\u8981\u6c42 LLM \u8c03\u7528\u91c7\u7528\u201cANSWER: (number)\u201d\u683c\u5f0f\u3002</li> <li>\u54cd\u5e94\u5408\u6210\uff1a\u7528\u6237\u53ef\u80fd\u671f\u671b\u6700\u7ec8\u54cd\u5e94\u5305\u542b\u4e00\u5b9a\u7a0b\u5ea6\u7684\u7ed3\u6784\uff08\u4f8b\u5982 JSON \u8f93\u51fa\u3001\u683c\u5f0f\u5316\u7684 SQL \u67e5\u8be2\u7b49\uff09</li> </ul> <p>LlamaIndex \u63d0\u4f9b\u5404\u79cd\u6a21\u5757\uff0c\u4f7f LLM \u80fd\u591f\u4ee5\u7ed3\u6784\u5316\u7684\u683c\u5f0f\u751f\u6210\u8f93\u51fa\u5185\u5bb9\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u7684 LLM \u7c7b\u63d0\u4f9b\u7ed3\u6784\u5316\u8f93\u51fa\u3002\u6211\u4eec\u8fd8\u63d0\u4f9b\u8f83\u4f4e\u7ea7\u522b\u7684\u6a21\u5757\uff1a</p> <ul> <li><code>Pydantic</code> \u7a0b\u5e8f\uff1a\u8fd9\u4e9b\u662f\u901a\u7528\u6a21\u5757\uff0c\u5c06\u8f93\u5165\u63d0\u793a prompt \u6620\u5c04\u5230\u7ed3\u6784\u5316\u8f93\u51fa\uff0c\u7531 <code>Pydantic</code> \u5bf9\u8c61\u8868\u793a\u3002\u5b83\u4eec\u53ef\u4ee5\u4f7f\u7528\u51fd\u6570\u8c03\u7528 API \u6216\u6587\u672c\u8865\u5168 API + \u8f93\u51fa\u89e3\u6790\u5668\u8fd9\u79cd\u5f62\u5f0f\u3002\u5b83\u4eec\u4e5f\u53ef\u4ee5\u4e0e\u67e5\u8be2\u5f15\u64ce\u96c6\u6210\u3002</li> <li>\u9884\u5b9a\u4e49\u7684 <code>Pydantic</code> \u7a0b\u5e8f\uff1a\u6211\u4eec\u6709\u9884\u5b9a\u4e49\u7684 <code>Pydantic</code> \u7a0b\u5e8f\uff0c\u5c06\u8f93\u5165\u6620\u5c04\u5230\u7279\u5b9a\u7684\u8f93\u51fa\u7c7b\u578b\uff08\u5982\u6570\u636e\u6846\uff09\u3002</li> <li>\u8f93\u51fa\u89e3\u6790\u5668\uff1a\u8fd9\u4e9b\u6a21\u5757\u5728 LLM \u6587\u672c\u5b8c\u6210\u7aef\u70b9\u4e4b\u524d\u548c\u4e4b\u540e\u8fd0\u884c\u3002\u5b83\u4eec\u4e0d\u4e0e LLM \u51fd\u6570\u8c03\u7528\u7aef\u70b9\u4e00\u8d77\u4f7f\u7528\uff08\u56e0\u4e3a\u5b83\u4eec\u5305\u542b\u5f00\u7bb1\u5373\u7528\u7684\u7ed3\u6784\u5316\u8f93\u51fa\uff09\u3002 \u8bf7\u53c2\u9605\u4ee5\u4e0b\u90e8\u5206\u4ee5\u4e86\u89e3\u8f93\u51fa\u89e3\u6790\u5668\u548c Pydantic \u7a0b\u5e8f\u7684\u6982\u8ff0\u3002</li> </ul>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E5%BC%95%E8%A8%80/#_2","title":"\u7ed3\u6784\u5316\u8f93\u51fa\u51fd\u6570\u7684\u5256\u6790","text":"<p>\u8fd9\u91cc\u6211\u4eec\u63cf\u8ff0\u4e86 LLM \u652f\u6301\u7684\u7ed3\u6784\u5316\u8f93\u51fa\u51fd\u6570\u7684\u4e0d\u540c\u7ec4\u4ef6\u3002\u7ba1\u9053\u53d6\u51b3\u4e8e\u60a8\u4f7f\u7528\u7684\u662f\u901a\u7528 LLM \u6587\u672c\u5b8c\u6210 API\u8fd8\u662fLLM \u51fd\u6570\u8c03\u7528 API\u3002</p> <p></p> <p>\u4e0e\u8865\u5168\u7684API\u4e00\u8d77\uff0c\u8f93\u5165\u548c\u8f93\u51fa\u7531\u6587\u672c\u63d0\u793a\u5904\u7406\u3002\u8f93\u51fa\u89e3\u6790\u5668\u5728 LLM \u8c03\u7528\u4e4b\u524d\u548c\u4e4b\u540e\u53d1\u6325\u4f5c\u7528\uff0c\u786e\u4fdd\u8f93\u51fa\u7ed3\u6784\u5316\u3002\u5728 LLM \u8c03\u7528\u4e4b\u524d\uff0c\u8f93\u51fa\u89e3\u6790\u5668\u53ef\u4ee5\u5c06\u683c\u5f0f\u6307\u4ee4\u9644\u52a0\u5230\u63d0\u793a\u3002\u5728 LLM \u8c03\u7528\u4e4b\u540e\uff0c\u8f93\u51fa\u89e3\u6790\u5668\u53ef\u4ee5\u5c06\u8f93\u51fa\u89e3\u6790\u4e3a\u6307\u5b9a\u7684\u6307\u4ee4\u3002</p> <p>\u4f7f\u7528\u51fd\u6570\u8c03\u7528 API\uff0c\u8f93\u51fa\u672c\u8d28\u4e0a\u662f\u7ed3\u6784\u5316\u7684\u683c\u5f0f\uff0c\u8f93\u5165\u53ef\u4ee5\u91c7\u7528\u6240\u9700\u5bf9\u8c61\u7684\u7b7e\u540d\u3002\u7ed3\u6784\u5316\u8f93\u51fa\u53ea\u9700\u8f6c\u6362\u4e3a\u6b63\u786e\u7684\u5bf9\u8c61\u683c\u5f0f\uff08\u4f8b\u5982 Pydantic\uff09\u3002</p>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E5%BC%95%E8%A8%80/#_3","title":"\u5165\u95e8\u6307\u5357","text":"<p>\u7ed3\u6784\u5316\u8f93\u51fa\u7b80\u5355\u6307\u5357</p>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E5%BC%95%E8%A8%80/#_4","title":"\u5176\u4ed6\u8d44\u6e90","text":"<ul> <li>Pydantic \u7a0b\u5e8f</li> <li>\u7ed3\u6784\u5316\u8f93\u51fa + \u67e5\u8be2\u5f15\u64ce</li> <li>\u8f93\u51fa\u89e3\u6790\u5668</li> </ul>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E7%BB%93%E5%90%88guidance%E4%B8%8EPydantic%E7%BC%96%E7%A8%8B/","title":"\u7ed3\u5408 guidance \u4e0e Pydantic \u7f16\u7a0b","text":"<p>\u901a\u8fc7 LlamaIndex \u7ed3\u5408 guidance \u751f\u6210\u7ed3\u6784\u5316\u6570\u636e\u3002</p> <p>\u4f7f\u7528 guidance \u5e93\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5f3a\u5236 LLM \u8f93\u51fa \u6240\u9700 \u7684 token \u6765\u4fdd\u8bc1\u8f93\u51fa\u7ed3\u6784\u6b63\u786e\u3002 \u8fd9\u5728\u60a8\u4f7f\u7528\u53c2\u6570\u91cf\u8f83\u4f4e\u7684\u6a21\u578b\uff08\u4f8b\u5982\u5f53\u524d\u7684\u5f00\u6e90\u6a21\u578b\uff09\u65f6\u5c24\u5176\u6709\u7528\uff0c\u5426\u5219\u8fd9\u4e9b\u6a21\u578b\u5c06\u5f88\u96be\u751f\u6210\u7b26\u5408\u6240\u9700\u8f93\u51fa\u67b6\u6784\u7684\u6709\u6548\u8f93\u51fa\u3002</p> <p>\u5982\u679c\u60a8\u5728 colab \u4e0a\u6253\u5f00\u6b64\u5e26\u963f\u7c73\uff0c\u5219\u53ef\u80fd\u9700\u8981\u5b89\u88c5 LlamaIndex \ud83e\udd99\u3002</p> Bash<pre><code>pip install llama-index-program-guidance\npip install llama-index\n</code></pre> <p>\u4f7f\u7528 <code>python</code> \u7684\u4ee3\u7801\u9700\u8981\u5bfc\u5165\u76f8\u5173\u7684\u5e93\uff1a</p> Python<pre><code>from pydantic import BaseModel\nfrom typing import List\nfrom guidance.llms import OpenAI\n\nfrom llama_index.program.guidance import GuidancePydanticProgram\n</code></pre> <p>\u5b9a\u4e49\u8f93\u51fa\u5b57\u6bb5\u5185\u5bb9</p> Python<pre><code>class Song(BaseModel):\n    title: str\n    length_seconds: int\n\n\nclass Album(BaseModel):\n    name: str\n    artist: str\n    songs: List[Song]\n</code></pre> <p>\u5b9a\u4e49\u6307\u5bfc pydantic \u7a0b\u5e8f</p> <p>program  =  GuidancePydanticProgram \uff08     output_cls = Album \uff0c     prompt_template_str = \uff08         \u201c\u751f\u6210\u4e00\u4e2a\u793a\u4f8b\u4e13\u8f91\uff0c\u5176\u4e2d\u5305\u542b\u827a\u672f\u5bb6\u548c\u6b4c\u66f2\u5217\u8868\u3002\u4f7f\u7528\u201d          \u201c\u7535\u5f71{{movie_name}}\u4f5c\u4e3a\u7075\u611f\u201d      \uff09\uff0c     guide_llm = OpenAI \uff08\u201ctext-davinci-003\u201d \uff09\uff0c     verbose = True \uff0c \uff09 \u8fd0\u884c\u7a0b\u5e8f\u4ee5\u83b7\u53d6\u7ed3\u6784\u5316\u8f93\u51fa\u3002 \u84dd\u8272\u7a81\u51fa\u663e\u793a\u7684\u6587\u672c\u662f\u6211\u4eec\u6307\u5b9a\u7684\u53d8\u91cf\uff0c\u7eff\u8272\u7a81\u51fa\u663e\u793a\u7684\u6587\u672c\u7531 LLM \u751f\u6210\u3002</p> <p>\u8f93\u51fa = \u7a0b\u5e8f\uff08\u7535\u5f71\u540d\u79f0= \u201c\u95ea\u7075\u201d \uff09 \u751f\u6210\u4e00\u5f20\u793a\u4f8b\u4e13\u8f91\uff0c\u5176\u4e2d\u5305\u542b\u827a\u672f\u5bb6\u548c\u6b4c\u66f2\u5217\u8868\u3002\u4ee5\u7535\u5f71\u300a\u95ea\u7075\u300b\u4e3a\u7075\u611f JSON<pre><code>{\n  \"name\": \"\u95ea\u7075\",\n  \u201c\u827a\u672f\u5bb6\u201d\uff1a\u201c\u6770\u514b\u00b7\u6258\u4f26\u65af\u201d\uff0c\n  \u201c\u6b4c\u66f2\u201d\uff1a[{\n  \"title\": \"\u53ea\u5de5\u4f5c\u4e0d\u73a9\u800d\",\n  \"length_seconds\": \" 180 \",\n} \uff0c {\n  \"title\": \"\u77ad\u671b\u9152\u5e97\",\n  \"length_seconds\": \" 240 \",\n} \uff0c {\n  \"title\": \"\u95ea\u7075\",\n  \"length_seconds\": \" 210 \",\n} ],\n}\n</code></pre> \u8f93\u51fa\u662f\u4e00\u4e2a\u6709\u6548\u7684 Pydantic \u5bf9\u8c61\uff0c\u7136\u540e\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5b83\u6765\u8c03\u7528\u51fd\u6570/API\u3002</p> <p>\u8f93\u51fa \u4e13\u8f91\uff08\u540d\u79f0='The Shining'\uff0c\u827a\u672f\u5bb6='Jack Torrance'\uff0c\u6b4c\u66f2=[\u6b4c\u66f2\uff08\u6807\u9898='All Work and No Play'\uff0c\u957f\u5ea6\u79d2\u6570=180\uff09\uff0c\u6b4c\u66f2\uff08\u6807\u9898='The Overlook Hotel'\uff0c\u957f\u5ea6\u79d2\u6570=240\uff09\uff0c\u6b4c\u66f2\uff08\u6807\u9898='The Shining'\uff0c\u957f\u5ea6\u79d2\u6570=210\uff09]\uff09</p>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA%E7%9A%84%E7%AE%80%E5%8D%95%E6%8C%87%E5%8D%97/","title":"\u7ed3\u6784\u5316\u8f93\u51fa\u7b80\u5355\u6307\u5357","text":""},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA%E7%9A%84%E7%AE%80%E5%8D%95%E6%8C%87%E5%8D%97/#_1","title":"\u7ed3\u6784\u5316\u8f93\u51fa\u7684\u7b80\u5355\u6307\u5357","text":"<p>\u5728 Colab \u4e2d\u6253\u5f00</p> <p>\u8fd9\u662f\u4f7f\u7528 LLM \u8fdb\u884c\u7ed3\u6784\u5316\u8f93\u51fa\u7684\u7b80\u5355\u6307\u5357\u3002\u4ece\u9ad8\u5c42\u6b21\u4e0a\u8bb2\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06 <code>Pydantic</code> \u7c7b\u9644\u52a0\u5230\u4efb\u4f55 LLM \u5e94\u7528\u4e0a\uff0c\u5e76\u4f7f\u8f93\u51fa\u683c\u5f0f\u5177\u6709\u539f\u751f\u7ed3\u6784\u5316\u5f62\u5f0f\uff0c\u5373\u4f7f LLM \u7528\u4e8e\u4e0a\u6e38\u6a21\u5757\u3002</p> <p>\u6211\u4eec\u4ece LLM \u7684\u7b80\u5355\u8bed\u6cd5\u5f00\u59cb\uff0c\u7136\u540e\u4ecb\u7ecd\u5982\u4f55\u5c06\u5176\u63d2\u5165\u67e5\u8be2\u7ba1\u9053\uff0c\u4ee5\u53ca\u5982\u4f55\u5c06\u5176\u63d2\u5165\u67e5\u8be2\u5f15\u64ce\u548c\u4ee3\u7406\u7b49\u66f4\u9ad8\u7ea7\u522b\u7684\u6a21\u5757\u3002</p> <p>\u7ed3\u6784\u5316\u8f93\u51fa\u7684\u8bb8\u591a\u5e95\u5c42\u884c\u4e3a\u5747\u7531\u6211\u4eec\u7684 <code>Pydantic</code> \u7a0b\u5e8f\u6a21\u5757\u63d0\u4f9b\u652f\u6301\u3002\u67e5\u770b\u6211\u4eec\u7684\u6df1\u5165\u7ed3\u6784\u5316\u8f93\u51fa\u6307\u5357\u4ee5\u4e86\u89e3\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\u3002</p> Python<pre><code>import nest_asyncio\n\nnest_asyncio.apply()\n\nfrom llama_index.llms.openai import OpenAI\nfrom llama_index.embeddings.openai import OpenAIEmbedding\nfrom llama_index.core import Settings\n\nllm = OpenAI(model=\"gpt-4o\")\nembed_model = OpenAIEmbedding(model=\"text-embedding-3-small\")\nSettings.llm = llm\nSettings.embed_model = embed_model\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA%E7%9A%84%E7%AE%80%E5%8D%95%E6%8C%87%E5%8D%97/#1","title":"1. \u7b80\u5355\u7ed3\u6784\u5316\u63d0\u53d6","text":"<p>\u60a8\u53ef\u4ee5\u901a\u8fc7\u5c06\u8f93\u51fa\u7c7b\u6dfb\u52a0\u5230\u4efb\u4f55 LLM \u5e76\u5c06\u5176\u8f6c\u6362\u4e3a\u201c\u7ed3\u6784\u5316 LLM\u201d\uff0c\u901a\u8fc7\u8c03\u7528 <code>as_structured_llm</code> \u63a5\u53e3\u5b9e\u73b0\u3002</p> <p>\u8fd9\u91cc\u6211\u4eec\u4f20\u9012\u4e00\u4e2a <code>Album</code> \u7c7b\uff0c\u5305\u542b\u6b4c\u66f2\u5217\u8868\u3002\u7136\u540e\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u6b63\u5e38\u7684 LLM \u7aef\u70b9\uff0c\u5982 chat/complete`\u3002</p> <p>\u6ce8\u610f\uff1a\u652f\u6301\u5f02\u6b65\u4f46\u6d41\u5f0f\u4f20\u8f93\u5373\u5c06\u63a8\u51fa\u3002</p> Python<pre><code>from typing import List\nfrom pydantic import BaseModel, Field\n\n\nclass Song(BaseModel):\n    \"\"\"Data model for a song.\"\"\"\n\n    title: str\n    length_seconds: int\n\n\nclass Album(BaseModel):\n    \"\"\"Data model for an album.\"\"\"\n\n    name: str\n    artist: str\n    songs: List[Song]\n</code></pre> Python<pre><code>from llama_index.core.llms import ChatMessage\n\nsllm = llm.as_structured_llm(output_cls=Album)\ninput_msg = ChatMessage.from_str(\"Generate an example album from The Shining\")\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA%E7%9A%84%E7%AE%80%E5%8D%95%E6%8C%87%E5%8D%97/#_2","title":"\u540c\u6b65","text":"Python<pre><code>output = sllm.chat([input_msg])\n# get actual object\noutput_obj = output.raw\n</code></pre> Python<pre><code>print(str(output))\nprint(output_obj)\n</code></pre> Bash<pre><code>assistant: {\"name\": \"The Shining: Original Soundtrack\", \"artist\": \"Various Artists\", \"songs\": [{\"title\": \"Main Title\", \"length_seconds\": 180}, {\"title\": \"Rocky Mountains\", \"length_seconds\": 210}, {\"title\": \"Lontano\", \"length_seconds\": 720}, {\"title\": \"Music for Strings, Percussion and Celesta\", \"length_seconds\": 540}, {\"title\": \"Utrenja (Excerpt)\", \"length_seconds\": 300}, {\"title\": \"The Awakening of Jacob\", \"length_seconds\": 480}, {\"title\": \"De Natura Sonoris No. 2\", \"length_seconds\": 540}, {\"title\": \"Home\", \"length_seconds\": 180}, {\"title\": \"Midnight, the Stars and You\", \"length_seconds\": 180}, {\"title\": \"It's All Forgotten Now\", \"length_seconds\": 150}, {\"title\": \"Masquerade\", \"length_seconds\": 180}]}\nname='The Shining: Original Soundtrack' artist='Various Artists' songs=[Song(title='Main Title', length_seconds=180), Song(title='Rocky Mountains', length_seconds=210), Song(title='Lontano', length_seconds=720), Song(title='Music for Strings, Percussion and Celesta', length_seconds=540), Song(title='Utrenja (Excerpt)', length_seconds=300), Song(title='The Awakening of Jacob', length_seconds=480), Song(title='De Natura Sonoris No. 2', length_seconds=540), Song(title='Home', length_seconds=180), Song(title='Midnight, the Stars and You', length_seconds=180), Song(title=\"It's All Forgotten Now\", length_seconds=150), Song(title='Masquerade', length_seconds=180)]\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA%E7%9A%84%E7%AE%80%E5%8D%95%E6%8C%87%E5%8D%97/#_3","title":"\u5f02\u6b65","text":"Python<pre><code>output = await sllm.achat([input_msg])\n# get actual object\noutput_obj = output.raw\nprint(str(output))\n</code></pre> Bash<pre><code>assistant: {\"name\": \"The Shining: Original Soundtrack\", \"artist\": \"Various Artists\", \"songs\": [{\"title\": \"Main Title (The Shining)\", \"length_seconds\": 180}, {\"title\": \"Rocky Mountains\", \"length_seconds\": 210}, {\"title\": \"Lontano\", \"length_seconds\": 240}, {\"title\": \"Music for Strings, Percussion and Celesta\", \"length_seconds\": 300}, {\"title\": \"Utrenja (Excerpt)\", \"length_seconds\": 180}, {\"title\": \"The Awakening of Jacob\", \"length_seconds\": 150}, {\"title\": \"De Natura Sonoris No. 2\", \"length_seconds\": 270}, {\"title\": \"Home\", \"length_seconds\": 200}, {\"title\": \"Heartbeats and Worry\", \"length_seconds\": 160}, {\"title\": \"The Overlook\", \"length_seconds\": 220}]}\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA%E7%9A%84%E7%AE%80%E5%8D%95%E6%8C%87%E5%8D%97/#_4","title":"\u6d41\u5f0f","text":"Python<pre><code>from IPython.display import clear_output\nfrom pprint import pprint\n\nstream_output = sllm.stream_chat([input_msg])\nfor partial_output in stream_output:\n    clear_output(wait=True)\n    pprint(partial_output.raw.dict())\n\noutput_obj = partial_output.raw\nprint(str(output))\n</code></pre> Bash<pre><code>{'artist': 'Various Artists',\n 'name': 'The Shining: Original Soundtrack',\n 'songs': [{'length_seconds': 180, 'title': 'Main Title'},\n           {'length_seconds': 210, 'title': 'Rocky Mountains'},\n           {'length_seconds': 240, 'title': 'Lontano'},\n           {'length_seconds': 540,\n            'title': 'Music for Strings, Percussion and Celesta'},\n           {'length_seconds': 300, 'title': 'Utrenja (Excerpt)'},\n           {'length_seconds': 360, 'title': 'The Awakening of Jacob'},\n           {'length_seconds': 420, 'title': 'De Natura Sonoris No. 2'},\n           {'length_seconds': 180, 'title': 'Home'},\n           {'length_seconds': 180, 'title': 'Midnight, the Stars and You'},\n           {'length_seconds': 150, 'title': \"It's All Forgotten Now\"},\n           {'length_seconds': 120, 'title': 'Masquerade'}]}\nassistant: {\"name\": \"The Shining: Original Soundtrack\", \"artist\": \"Various Artists\", \"songs\": [{\"title\": \"Main Title (The Shining)\", \"length_seconds\": 180}, {\"title\": \"Rocky Mountains\", \"length_seconds\": 210}, {\"title\": \"Lontano\", \"length_seconds\": 240}, {\"title\": \"Music for Strings, Percussion and Celesta\", \"length_seconds\": 300}, {\"title\": \"Utrenja (Excerpt)\", \"length_seconds\": 180}, {\"title\": \"The Awakening of Jacob\", \"length_seconds\": 150}, {\"title\": \"De Natura Sonoris No. 2\", \"length_seconds\": 270}, {\"title\": \"Home\", \"length_seconds\": 200}, {\"title\": \"Heartbeats and Worry\", \"length_seconds\": 160}, {\"title\": \"The Overlook\", \"length_seconds\": 220}]}\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA%E7%9A%84%E7%AE%80%E5%8D%95%E6%8C%87%E5%8D%97/#_5","title":"\u5f02\u6b65\u6d41\u5f0f","text":"Python<pre><code>from IPython.display import clear_output\nfrom pprint import pprint\n\nstream_output = await sllm.astream_chat([input_msg])\nasync for partial_output in stream_output:\n    clear_output(wait=True)\n    pprint(partial_output.raw.dict())\n</code></pre> Bash<pre><code>{'artist': 'Various Artists',\n 'name': 'The Shining: Original Soundtrack',\n 'songs': [{'length_seconds': 180, 'title': 'Main Title'},\n           {'length_seconds': 210, 'title': 'Rocky Mountains'},\n           {'length_seconds': 720, 'title': 'Lontano'},\n           {'length_seconds': 540,\n            'title': 'Music for Strings, Percussion and Celesta'},\n           {'length_seconds': 300, 'title': 'Utrenja (Excerpt)'},\n           {'length_seconds': 480, 'title': 'The Awakening of Jacob'},\n           {'length_seconds': 540, 'title': 'De Natura Sonoris No. 2'},\n           {'length_seconds': 180, 'title': 'Home'},\n           {'length_seconds': 180, 'title': 'Midnight, the Stars and You'},\n           {'length_seconds': 180, 'title': \"It's All Forgotten Now\"},\n           {'length_seconds': 180, 'title': 'Masquerade'}]}\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA%E7%9A%84%E7%AE%80%E5%8D%95%E6%8C%87%E5%8D%97/#1b","title":"1.b \u4f7f\u7528\u67e5\u8be2\u7ba1\u9053\u7684\u793a\u4f8b","text":"<p>\u60a8\u53ef\u4ee5\u5728\u67e5\u8be2\u7ba1\u9053\u4e2d\u63d2\u5165\u7ed3\u6784\u5316 LLM - \u8f93\u51fa\u5c06\u76f4\u63a5\u662f\u7ed3\u6784\u5316\u5bf9\u8c61\u3002</p> Python<pre><code># use query pipelines\nfrom llama_index.core.prompts import ChatPromptTemplate\nfrom llama_index.core.query_pipeline import QueryPipeline as QP\nfrom llama_index.core.llms import ChatMessage\n\nchat_prompt_tmpl = ChatPromptTemplate(\n    message_templates=[\n        ChatMessage.from_str(\n            \"Generate an example album from {movie_name}\", role=\"user\"\n        )\n    ]\n)\n\nqp = QP(chain=[chat_prompt_tmpl, sllm])\nresponse = qp.run(movie_name=\"Inside Out\")\nresponse\n</code></pre> Bash<pre><code>Album(name='Inside Out Soundtrack', artist='Various Artists', songs=[Song(title='Bundle of Joy', length_seconds=150), Song(title='Team Building', length_seconds=120), Song(title='Nomanisone Island/National Movers', length_seconds=180), Song(title='Overcoming Sadness', length_seconds=210), Song(title='Free Skating', length_seconds=160), Song(title='First Day of School', length_seconds=140), Song(title='Riled Up', length_seconds=130), Song(title='Goofball No Longer', length_seconds=170), Song(title='Memory Lanes', length_seconds=200), Song(title='The Forgetters', length_seconds=110)])\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA%E7%9A%84%E7%AE%80%E5%8D%95%E6%8C%87%E5%8D%97/#1c-structured_predict","title":"1.c \u4f7f\u7528structured_predict\u51fd\u6570","text":"<p>\u65e0\u9700\u660e\u786e\u6267\u884cllm.as_structured_llm(...)\uff0c\u6bcf\u4e2a LLM \u7c7b\u90fd\u6709\u4e00\u4e2astructured_predict\u51fd\u6570\uff0c\u5141\u8bb8\u60a8\u66f4\u8f7b\u677e\u5730\u4f7f\u7528\u63d0\u793a\u6a21\u677f + \u6a21\u677f\u53d8\u91cf\u8c03\u7528 LLM\uff0c\u4ee5\u5728\u4e00\u884c\u4ee3\u7801\u4e2d\u8fd4\u56de\u7ed3\u6784\u5316\u8f93\u51fa\u3002</p> Python<pre><code># use query pipelines\nfrom llama_index.core.prompts import ChatPromptTemplate\nfrom llama_index.core.llms import ChatMessage\nfrom llama_index.llms.openai import OpenAI\n\nchat_prompt_tmpl = ChatPromptTemplate(\n    message_templates=[\n        ChatMessage.from_str(\n            \"Generate an example album from {movie_name}\", role=\"user\"\n        )\n    ]\n)\n\nllm = OpenAI(model=\"gpt-4o\")\nalbum = llm.structured_predict(\n    Album, chat_prompt_tmpl, movie_name=\"Lord of the Rings\"\n)\nalbum\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA%E7%9A%84%E7%AE%80%E5%8D%95%E6%8C%87%E5%8D%97/#2-rag","title":"2. \u63d2\u5165 RAG \u7ba1\u9053","text":"<p>\u60a8\u8fd8\u53ef\u4ee5\u5c06\u5176\u63d2\u5165 RAG \u7ba1\u9053\u3002\u4e0b\u9762\u6211\u4eec\u5c55\u793a\u4e86 Apple 10K \u62a5\u544a\u4e2d\u7684\u7ed3\u6784\u5316\u63d0\u53d6\u3002</p> Bash<pre><code>mkdir data\nwget \"https://s2.q4cdn.com/470004039/files/doc_financials/2021/q4/_10-K-2021-(As-Filed).pdf\" -O data/apple_2021_10k.pdf\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA%E7%9A%84%E7%AE%80%E5%8D%95%E6%8C%87%E5%8D%97/#1-llamaparse","title":"\u9009\u9879 1\uff1a\u4f7f\u7528 LlamaParse","text":"<p>\u60a8\u9700\u8981\u4e00\u4e2ahttps://cloud.llamaindex.ai/\u5e10\u6237\u548c\u4e00\u4e2a API \u5bc6\u94a5\u624d\u80fd\u4f7f\u7528 LlamaParse\uff08\u6211\u4eec\u7684 10K \u6587\u4ef6\u6587\u6863\u89e3\u6790\u5668\uff09\u3002</p> Python<pre><code>from llama_parse import LlamaParse\n\n# os.environ[\"LLAMA_CLOUD_API_KEY\"] = \"llx-...\"\norig_docs = LlamaParse(result_type=\"text\").load_data(\n    \"./data/apple_2021_10k.pdf\"\n)\n</code></pre> <p>\u5f00\u59cb\u89e3\u6790job_id\u4e3acac11eca-7e00-452f-93f6-19c861b4c130\u4e0b\u7684\u6587\u4ef6</p> Python<pre><code>from copy import deepcopy\nfrom llama_index.core.schema import TextNode\n\n\ndef get_page_nodes(docs, separator=\"\\n---\\n\"):\n    \"\"\"Split each document into page node, by separator.\"\"\"\n    nodes = []\n    for doc in docs:\n        doc_chunks = doc.text.split(separator)\n        for doc_chunk in doc_chunks:\n            node = TextNode(\n                text=doc_chunk,\n                metadata=deepcopy(doc.metadata),\n            )\n            nodes.append(node)\n\n    return nodes\n\n\ndocs = get_page_nodes(orig_docs)\nprint(docs[0].get_content())\n</code></pre> Python<pre><code>UNITED STATES\n                                    SECURITIES AND EXCHANGE COMMISSION\n                                                          Washington, D.C. 20549\n\n                                                               FORM 10-K\n(Mark One)\n        \u2612 ANNUAL REPORT PURSUANT TO SECTION 13 OR 15(d) OF THE SECURITIES EXCHANGE ACT OF 1934\n                                                  For the fiscal year ended September 25, 2021\n                                                                            or\n     \u2610 TRANSITION REPORT PURSUANT TO SECTION 13 OR 15(d) OF THE SECURITIES EXCHANGE ACT OF 1934\n                                                For the transition period from               to          .\n                                                       Commission File Number: 001-36743\n\n                                                               Apple Inc.\n                                              (Exact name of Registrant as specified in its charter)\n\n                            California                                                                          94-2404110\n                     (State or other jurisdiction                                                    (I.R.S. Employer Identification No.)\n                  of incorporation or organization)\n\n                     One Apple Park Way\n                     Cupertino, California                                                                         95014\n              (Address of principal executive offices)                                                            (Zip Code)\n                                                                    (408) 996-1010\n                                                 (Registrant\u2019s telephone number, including area code)\n\n                                               Securities registered pursuant to Section 12(b) of the Act:\n\n                                                                         Trading\n                         Title of each class                            symbol(s)               Name of each exchange on which registered\n      Common Stock, $0.00001 par value per share                         AAPL                       The Nasdaq Stock Market LLC\n                    1.000% Notes due 2022                                   \u2014                       The Nasdaq Stock Market LLC\n                    1.375% Notes due 2024                                   \u2014                       The Nasdaq Stock Market LLC\n                    0.000% Notes due 2025                                   \u2014                       The Nasdaq Stock Market LLC\n                    0.875% Notes due 2025                                   \u2014                       The Nasdaq Stock Market LLC\n                    1.625% Notes due 2026                                   \u2014                       The Nasdaq Stock Market LLC\n                    2.000% Notes due 2027                                   \u2014                       The Nasdaq Stock Market LLC\n                    1.375% Notes due 2029                                   \u2014                       The Nasdaq Stock Market LLC\n                    3.050% Notes due 2029                                   \u2014                       The Nasdaq Stock Market LLC\n                    0.500% Notes due 2031                                   \u2014                       The Nasdaq Stock Market LLC\n                    3.600% Notes due 2042                                   \u2014                       The Nasdaq Stock Market LLC\n\n                                           Securities registered pursuant to Section 12(g) of the Act: None\n\nIndicate by check mark if the Registrant is a well-known seasoned issuer, as defined in Rule 405 of the Securities Act.\n                                                                    Yes \u2612      No \u2610\nIndicate by check mark if the Registrant is not required to file reports pursuant to Section 13 or Section 15(d) of the Act.\n                                                                   Yes \u2610      No \u2612\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA%E7%9A%84%E7%AE%80%E5%8D%95%E6%8C%87%E5%8D%97/#2-simpledirectoryreader","title":"\u9009\u9879 2\uff1a\u4f7f\u7528 <code>SimpleDirectoryReader</code>","text":"<p>\u60a8\u8fd8\u53ef\u4ee5\u9009\u62e9\u4f7f\u7528\u6211\u4eec\u7684\u6346\u7ed1\u514d\u8d39 PDF \u89e3\u6790\u5668 <code>SimpleDirectoryReader</code>\u3002</p> Python<pre><code># # OPTION 2: Use SimpleDirectoryReader\n# from llama_index.core import SimpleDirectoryReader\n\n# reader = SimpleDirectoryReader(input_files=[\"apple_2021_10k.pdf\"])\n# docs = reader.load_data()\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA%E7%9A%84%E7%AE%80%E5%8D%95%E6%8C%87%E5%8D%97/#rag","title":"\u6784\u5efa RAG \u7ba1\u9053\uff0c\u5b9a\u4e49\u7ed3\u6784\u5316\u8f93\u51fa\u6a21\u5f0f","text":"<p>\u6211\u4eec\u5229\u7528\u53ef\u9760\u7684 <code>VectorStoreIndex</code> \u548c <code>reranker</code> \u6a21\u5757\u6784\u5efa RAG \u7ba1\u9053\u3002\u7136\u540e\uff0c\u6211\u4eec\u5c06\u8f93\u51fa\u5b9a\u4e49\u4e3a Pydantic \u6a21\u578b\u3002\u8fd9\u4f7f\u6211\u4eec\u80fd\u591f\u521b\u5efa\u5e26\u6709\u8f93\u51fa\u7c7b\u7684\u7ed3\u6784\u5316 LLM\u3002</p> Python<pre><code>from llama_index.core import VectorStoreIndex\n\n# skip chunking since we're doing page-level chunking\nindex = VectorStoreIndex(docs)\n\nfrom llama_index.postprocessor.flag_embedding_reranker import (\n    FlagEmbeddingReranker,\n)\n\nreranker = FlagEmbeddingReranker(\n    top_n=5,\n    model=\"BAAI/bge-reranker-large\",\n)\n\nfrom pydantic import BaseModel, Field\nfrom typing import List\n\n\nclass Output(BaseModel):\n    \"\"\"Output containing the response, page numbers, and confidence.\"\"\"\n\n    response: str = Field(..., description=\"The answer to the question.\")\n    page_numbers: List[int] = Field(\n        ...,\n        description=\"The page numbers of the sources used to answer this question. Do not include a page number if the context is irrelevant.\",\n    )\n    confidence: float = Field(\n        ...,\n        description=\"Confidence value between 0-1 of the correctness of the result.\",\n    )\n    confidence_explanation: str = Field(\n        ..., description=\"Explanation for the confidence score\"\n    )\n\n\nsllm = llm.as_structured_llm(output_cls=Output)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E6%9F%A5%E8%AF%A2/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA%E7%9A%84%E7%AE%80%E5%8D%95%E6%8C%87%E5%8D%97/#_6","title":"\u8fd0\u884c\u67e5\u8be2","text":"Python<pre><code>query_engine = index.as_query_engine(\n    similarity_top_k=5,\n    node_postprocessors=[reranker],\n    llm=sllm,\n    response_mode=\"tree_summarize\",  # you can also select other modes like `compact`, `refine`\n)\n\nresponse = query_engine.query(\"Net sales for each product category in 2021\")\nprint(str(response))\n</code></pre> <p>Bash<pre><code>{\"response\": \"In 2021, the net sales for each product category were as follows: iPhone: $191,973 million, Mac: $35,190 million, iPad: $31,862 million, Wearables, Home and Accessories: $38,367 million, and Services: $68,425 million.\", \"page_numbers\": [21], \"confidence\": 1.0, \"confidence_explanation\": \"The figures are directly taken from the provided data, ensuring high accuracy.\"}\n</code></pre> Python<pre><code>response.response.dict()\n</code></pre></p> Bash<pre><code>{'response': 'In 2021, the net sales for each product category were as follows: iPhone: $191,973 million, Mac: $35,190 million, iPad: $31,862 million, Wearables, Home and Accessories: $38,367 million, and Services: $68,425 million.',\n 'page_numbers': [21],\n 'confidence': 1.0,\n 'confidence_explanation': 'The figures are directly taken from the provided data, ensuring high accuracy.'}\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%85%83%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96/","title":"\u5143\u6570\u636e\u63d0\u53d6","text":""},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%85%83%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96/#_1","title":"\u5143\u6570\u636e\u63d0\u53d6","text":""},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%85%83%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96/#_2","title":"\u4ecb\u7ecd","text":"<p>\u5728\u8bb8\u591a\u60c5\u51b5\u4e0b\uff0c\u5c24\u5176\u662f\u957f\u6587\u6863\u4e2d\uff0c\u4e00\u4e2a\u7247\u6bb5 <code>chunk</code> \u6587\u672c\u53ef\u80fd\u7f3a\u5c11\u5fc5\u8981\u7684\u4e0a\u4e0b\u6587\uff0c\u5c06\u8be5\u7247\u6bb5 <code>chunk</code> \u6587\u672c\u4e0e\u5176\u4ed6\u7c7b\u4f3c\u7684\u6587\u672c\u7247\u6bb5 <code>chunk</code> \u533a\u5206\u5f00\u6765\u3002</p> <p>\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u4f7f\u7528 LLM \u6765\u63d0\u53d6\u4e0e\u6587\u6863\u76f8\u5173\u7684\u67d0\u4e9b\u4e0a\u4e0b\u6587\u4fe1\u606f\uff0c\u4ee5\u4fbf\u66f4\u597d\u5730\u63d0\u5347\u68c0\u7d22\u6548\u679c\uff0c\u5e2e\u52a9\u8bed\u8a00\u6a21\u578b\u533a\u5206\u54ea\u4e9b\u770b\u8d77\u6765\u76f8\u4f3c\u7684\u6bb5\u843d <code>chunk</code>\u3002</p> <p>\u6211\u4eec\u5728\u793a\u4f8b\u7b14\u8bb0\u672c\u4e2d\u5c55\u793a\u4e86\u8fd9\u4e00\u70b9\uff0c\u5e76\u8bc1\u660e\u4e86\u5176\u5728\u5904\u7406\u957f\u6587\u6863\u65b9\u9762\u7684\u6548\u679c\u3002</p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%85%83%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96/#_3","title":"\u7528\u6cd5","text":"<p>\u9996\u5148\uff0c\u6211\u4eec\u5b9a\u4e49\u4e00\u4e2a\u5143\u6570\u636e\u63d0\u53d6\u5668\uff0c\u8fd9\u4e2a\u63d0\u53d6\u5668\u63a5\u6536\u4e00\u7cfb\u5217\u7684\u5c0f\u7684\u7279\u5f81\u5143\u6570\u636e\u63d0\u53d6\u5668\uff0c\u901a\u8fc7\u8fd9\u4e9b\u7279\u5f81\u5904\u7406\u5668\u987a\u5e8f\u5904\u7406\u4f20\u5165\u7684\u8282\u70b9\u3002</p> <p>\u7136\u540e\u6211\u4eec\u5c06\u5176\u63d0\u4f9b\u7ed9\u8282\u70b9\u89e3\u6790\u5668\uff0c\u5b83\u5c06\u6309\u7167\u987a\u5e8f\u5730\u5411\u6bcf\u4e2a\u8282\u70b9\u6dfb\u52a0\u989d\u5916\u7684\u5143\u6570\u636e\u3002</p> Python<pre><code>from llama_index.core.node_parser import SentenceSplitter\nfrom llama_index.core.extractors import (\n    SummaryExtractor,\n    QuestionsAnsweredExtractor,\n    TitleExtractor,\n    KeywordExtractor,\n)\n\nfrom llama_index.extractors.entity import EntityExtractor\n\n# \u7b2c\u4e00\u4e2a\u53d8\u6362\u662f\u53e5\u5b50\u62c6\u5206\n# \u4ece\u7b2c\u4e8c\u4e2a\u5f00\u59cb\u90fd\u662f\u5143\u6570\u636e\u63d0\u53d6\u5668\ntransformations = [\n    SentenceSplitter(),\n    TitleExtractor(nodes=5),\n    QuestionsAnsweredExtractor(questions=3),\n    SummaryExtractor(summaries=[\"prev\", \"self\"]),\n    KeywordExtractor(keywords=10),\n    EntityExtractor(prediction_threshold=0.5),\n]\n</code></pre> <p>\u7136\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u8f93\u5165\u6587\u6863\u6216\u8282\u70b9\u4e0a\u8fd0\u884c\u5143\u6570\u636e\u63d0\u53d6\u64cd\u4f5c\uff1a</p> Python<pre><code>from llama_index.core.ingestion import IngestionPipeline\n\npipeline = IngestionPipeline(transformations=transformations)\n\nnodes = pipeline.run(documents=documents)\n</code></pre> <p>\u4ee5\u4e0b\u662f\u63d0\u53d6\u7684\u5143\u6570\u636e\u7684\u793a\u4f8b\uff1a</p> Python<pre><code>{'page_label': '2',\n 'file_name': '10k-132.pdf',\n 'document_title': 'Uber Technologies, Inc. 2019 Annual Report: Revolutionizing Mobility and Logistics Across 69 Countries and 111 Million MAPCs with $65 Billion in Gross Bookings',\n 'questions_this_excerpt_can_answer': '\\n\\n1. How many countries does Uber Technologies, Inc. operate in?\\n2. What is the total number of MAPCs served by Uber Technologies, Inc.?\\n3. How much gross bookings did Uber Technologies, Inc. generate in 2019?',\n 'prev_section_summary': \"\\n\\nThe 2019 Annual Report provides an overview of the key topics and entities that have been important to the organization over the past year. These include financial performance, operational highlights, customer satisfaction, employee engagement, and sustainability initiatives. It also provides an overview of the organization's strategic objectives and goals for the upcoming year.\",\n 'section_summary': '\\nThis section discusses a global tech platform that serves multiple multi-trillion dollar markets with products leveraging core technology and infrastructure. It enables consumers and drivers to tap a button and get a ride or work. The platform has revolutionized personal mobility with ridesharing and is now leveraging its platform to redefine the massive meal delivery and logistics industries. The foundation of the platform is its massive network, leading technology, operational excellence, and product expertise.',\n 'excerpt_keywords': '\\nRidesharing, Mobility, Meal Delivery, Logistics, Network, Technology, Operational Excellence, Product Expertise, Point A, Point B'}\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%85%83%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96/#_4","title":"\u81ea\u5b9a\u4e49\u63d0\u53d6\u5668","text":"<p>\u5982\u679c\u63d0\u4f9b\u7684\u63d0\u53d6\u5668\u4e0d\u80fd\u6ee1\u8db3\u60a8\u7684\u9700\u6c42\uff0c\u60a8\u8fd8\u53ef\u4ee5\u5b9a\u4e49\u81ea\u5b9a\u4e49\u63d0\u53d6\u5668\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> Python<pre><code>from llama_index.core.extractors import BaseExtractor\n\n\nclass CustomExtractor(BaseExtractor):\n    async def aextract(self, nodes) -&gt; List[Dict]:\n        metadata_list = [\n            {\n                \"custom\": node.metadata[\"document_title\"]\n                + \"\\n\"\n                + node.metadata[\"excerpt_keywords\"]\n            }\n            for node in nodes\n        ]\n        return metadata_list\n</code></pre> <p><code>extractor.extract()</code> \u5c06\u81ea\u52a8 <code>aextract()</code> \u5728\u540e\u53f0\u8c03\u7528\uff0c\u4ee5\u63d0\u4f9b\u540c\u6b65\u548c\u5f02\u6b65\u5165\u53e3\u70b9\u3002</p> <p>\u5728\u66f4\u9ad8\u7ea7\u7684\u793a\u4f8b\u4e2d\uff0c\u5b83\u8fd8\u53ef\u4ee5\u5229\u7528llm\u4ece\u8282\u70b9\u5185\u5bb9\u548c\u73b0\u6709\u5143\u6570\u636e\u4e2d\u63d0\u53d6\u7279\u5f81\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u63d0\u4f9b\u7684\u5143\u6570\u636e\u63d0\u53d6\u5668\u7684\u6e90\u4ee3\u7801\u3002</p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%85%83%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96/#_5","title":"\u6a21\u5757","text":"<p>\u4e0b\u9762\u60a8\u5c06\u627e\u5230\u5404\u79cd\u5143\u6570\u636e\u63d0\u53d6\u5668\u7684\u6307\u5357\u548c\u6559\u7a0b\u3002</p> <ul> <li>SEC \u6587\u4ef6\u5143\u6570\u636e\u63d0\u53d6</li> <li>LLM \u8c03\u67e5\u63d0\u53d6</li> <li>\u5b9e\u4f53\u63d0\u53d6</li> <li>Marvin \u5143\u6570\u636e\u63d0\u53d6</li> <li>Pydantic \u5143\u6570\u636e\u63d0\u53d6</li> </ul>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%90%91%E9%87%8F%E7%B4%A2%E5%BC%95/","title":"\u5411\u91cf\u7d22\u5f15","text":""},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%90%91%E9%87%8F%E7%B4%A2%E5%BC%95/#vectorstoreindex","title":"\u4f7f\u7528\u5411\u91cf\u7d22\u5f15 VectorStoreIndex","text":"<p>\u5411\u91cf\u5b58\u50a8\u662f\u68c0\u7d22\u589e\u5f3a\u751f\u6210 (RAG) \u7684\u5173\u952e\u7ec4\u4ef6\uff0c\u56e0\u6b64\u60a8\u6700\u7ec8\u4f1a\u5728\u4f7f\u7528 LlamaIndex \u5f00\u53d1\u7684\u51e0\u4e4e\u6bcf\u4e2a\u5e94\u7528\u7a0b\u5e8f\u4e2d\u76f4\u63a5\u6216\u95f4\u63a5\u5730\u4f7f\u7528\u5b83\u4eec\u3002</p> <p>\u5411\u91cf\u5b58\u50a8\u63a5\u53d7 <code>Node</code> \u5bf9\u8c61\u5217\u8868\uff0c\u5e76\u5c06\u6839\u636e\u8fd9\u4e9b <code>Node</code> \u5bf9\u8c61\u5217\u8868\u6784\u5efa\u7d22\u5f15</p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%90%91%E9%87%8F%E7%B4%A2%E5%BC%95/#_1","title":"\u5c06\u6570\u636e\u52a0\u8f7d\u5230\u7d22\u5f15\u4e2d","text":""},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%90%91%E9%87%8F%E7%B4%A2%E5%BC%95/#_2","title":"\u57fa\u672c\u7528\u6cd5","text":"<p>\u4f7f\u7528\u5411\u91cf\u5b58\u50a8 <code>Vector Store</code> \u7684\u6700\u7b80\u5355\u65b9\u6cd5\u662f\u52a0\u8f7d\u4e00\u7ec4\u6587\u6863\u5e76\u4f7f\u7528 <code>from_documents</code> \u65b9\u6cd5\u6784\u5efa\u7d22\u5f15\uff1a</p> Python<pre><code>from llama_index.core import VectorStoreIndex, SimpleDirectoryReader\n\n# Load documents and build index\ndocuments = SimpleDirectoryReader(\n    \"../../examples/data/paul_graham\"\n).load_data()\nindex = VectorStoreIndex.from_documents(documents)\n</code></pre> <p>\u6ce8\u610f</p> <p>\u5982\u679c\u60a8\u5728\u547d\u4ee4\u884c\u4e0a\u4f7f\u7528 <code>from_documents</code>\uff0c\u53ef\u4ee5\u65b9\u4fbf\u5730 <code>show_progress=True</code>\u5728\u7d22\u5f15\u6784\u5efa\u671f\u95f4\u663e\u793a\u8fdb\u5ea6\u6761\u3002</p> <p>\u5f53\u6211\u4eec\u4f7f\u7528 <code>from_documents</code> \u65f6\uff0c\u6587\u6863\u5c06\u88ab\u5206\u6210\u7247\u6bb5 <code>chunk</code> \u5e76\u89e3\u6790\u4e3a <code>Node</code>\u5bf9\u8c61\uff0c\u8fd9\u662f\u5bf9\u6587\u672c\u5b57\u7b26\u4e32\u7684\u8f7b\u91cf\u7ea7\u62bd\u8c61\uff0c\u7528\u4e8e\u8ddf\u8e2a\u5143\u6570\u636e\u548c\u5173\u7cfb\u3002</p> <p>\u6709\u5173\u5982\u4f55\u52a0\u8f7d\u6587\u6863\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u7406\u89e3\u52a0\u8f7d\u3002</p> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c<code>VectorStoreIndex</code> \u5c06\u6240\u6709\u5185\u5bb9\u5b58\u50a8\u5728\u5185\u5b58\u4e2d\u3002\u6709\u5173\u5982\u4f55\u4f7f\u7528\u6301\u4e45\u6027\u5411\u91cf\u5b58\u50a8\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u4e0b\u9762\u7684\u4f7f\u7528\u5411\u91cf\u5b58\u50a8\u3002</p> <p>\u63d0\u793a</p> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c<code>VectorStoreIndex</code> \u5c06\u4ee5 2048 \u4e2a\u8282\u70b9\u4e3a\u4e00\u6279\u751f\u6210\u548c\u63d2\u5165\u5411\u91cf\u3002\u5982\u679c\u60a8\u7684\u5185\u5b58\u6709\u9650\uff08\u6216\u5185\u5b58\u8fc7\u5269\uff09\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u4f20\u9012<code>insert_batch_size=2048</code> \u6240\u9700\u7684\u6279\u5927\u5c0f\u6765\u4fee\u6539\u6b64\u8bbe\u7f6e\u3002 \u5f53\u60a8\u63d2\u5165\u8fdc\u7a0b\u6258\u7ba1\u7684\u77e2\u91cf\u6570\u636e\u5e93\u65f6\u8fd9\u7279\u522b\u6709\u7528\u3002</p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%90%91%E9%87%8F%E7%B4%A2%E5%BC%95/#_3","title":"\u4f7f\u7528\u63d2\u5165\u7ba1\u9053\u521b\u5efa\u8282\u70b9","text":"<p>\u5982\u679c\u60a8\u60f3\u8981\u66f4\u597d\u5730\u63a7\u5236\u6587\u6863\u7684\u7d22\u5f15\u65b9\u5f0f\uff0c\u6211\u4eec\u5efa\u8bae\u60a8\u4f7f\u7528\u63d0\u53d6\u7ba1\u9053\u3002\u8fd9\u5141\u8bb8\u60a8\u81ea\u5b9a\u4e49\u8282\u70b9\u7684\u5206\u5757\u3001\u5143\u6570\u636e\u548c\u5d4c\u5165\u3002</p> Python<pre><code>from llama_index.core import Document\nfrom llama_index.embeddings.openai import OpenAIEmbedding\nfrom llama_index.core.node_parser import SentenceSplitter\nfrom llama_index.core.extractors import TitleExtractor\nfrom llama_index.core.ingestion import IngestionPipeline, IngestionCache\n\n# create the pipeline with transformations\npipeline = IngestionPipeline(\n    transformations=[\n        SentenceSplitter(chunk_size=25, chunk_overlap=0),\n        TitleExtractor(),\n        OpenAIEmbedding(),\n    ]\n)\n\n# run the pipeline\nnodes = pipeline.run(documents=[Document.example()])\n</code></pre> <p>\u63d0\u793a</p> <p>\u60a8\u53ef\u4ee5\u4e86\u89e3\u6709\u5173\u5982\u4f55\u4f7f\u7528\u6444\u53d6\u7ba1\u9053\u7684\u66f4\u591a\u4fe1\u606f\u3002</p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%90%91%E9%87%8F%E7%B4%A2%E5%BC%95/#_4","title":"\u76f4\u63a5\u521b\u5efa\u548c\u7ba1\u7406\u8282\u70b9","text":"<p>\u5982\u679c\u60a8\u60f3\u8981\u5b8c\u5168\u63a7\u5236\u7d22\u5f15\uff0c\u60a8\u53ef\u4ee5\u624b\u52a8\u521b\u5efa\u548c\u5b9a\u4e49\u8282\u70b9\u5e76\u5c06\u5b83\u4eec\u76f4\u63a5\u4f20\u9012\u7ed9\u7d22\u5f15\u6784\u9020\u51fd\u6570\uff1a</p> Python<pre><code>from llama_index.core.schema import TextNode\n\nnode1 = TextNode(text=\"&lt;text_chunk&gt;\", id_=\"&lt;node_id&gt;\")\nnode2 = TextNode(text=\"&lt;text_chunk&gt;\", id_=\"&lt;node_id&gt;\")\nnodes = [node1, node2]\nindex = VectorStoreIndex(nodes)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%90%91%E9%87%8F%E7%B4%A2%E5%BC%95/#_5","title":"\u5904\u7406\u6587\u6863\u66f4\u65b0","text":"<p>\u76f4\u63a5\u7ba1\u7406\u7d22\u5f15\u65f6\uff0c\u60a8\u5c06\u9700\u8981\u5904\u7406\u968f\u65f6\u95f4\u53d8\u5316\u7684\u6570\u636e\u6e90\u3002Index\u7c7b\u5177\u6709 \u63d2\u5165\uff0c\u5220\u9664\uff0c\u66f4\u65b0 \u548c \u5237\u65b0 \u64cd\u4f5c\uff0c\u60a8\u53ef\u4ee5\u5728\u4e0b\u9762\u4e86\u89e3\u6709\u5173\u5b83\u4eec\u7684\u66f4\u591a\u4fe1\u606f\uff1a</p> <ul> <li>\u5143\u6570\u636e\u63d0\u53d6</li> <li>\u6587\u6863\u7ba1\u7406</li> </ul>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%90%91%E9%87%8F%E7%B4%A2%E5%BC%95/#_6","title":"\u5b58\u50a8\u5411\u91cf\u7d22\u5f15","text":"<p>LlamaIndex \u652f\u6301\u51e0\u5341\u4e2a\u5411\u91cf\u5b58\u50a8\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7\u4f20\u5165\u4e00\u4e2a\u6765\u6307\u5b9a\u4f7f\u7528\u54ea\u4e00\u4e2a <code>StorageContext</code>\uff0c\u7136\u540e\u5728\u5176\u4e0a\u6307\u5b9a <code>vector_store</code> \u53c2\u6570\uff0c\u5982\u672c\u4f8b\u4e2d\u4f7f\u7528 Pinecone \u7684\u793a\u4f8b\uff1a</p> Python<pre><code>import pinecone\nfrom llama_index.core import (\n    VectorStoreIndex,\n    SimpleDirectoryReader,\n    StorageContext,\n)\nfrom llama_index.vector_stores.pinecone import PineconeVectorStore\n\n# init pinecone\npinecone.init(api_key=\"&lt;api_key&gt;\", environment=\"&lt;environment&gt;\")\npinecone.create_index(\n    \"quickstart\", dimension=1536, metric=\"euclidean\", pod_type=\"p1\"\n)\n\n# construct vector store and customize storage context\nstorage_context = StorageContext.from_defaults(\n    vector_store=PineconeVectorStore(pinecone.Index(\"quickstart\"))\n)\n\n# Load documents and build index\ndocuments = SimpleDirectoryReader(\n    \"../../examples/data/paul_graham\"\n).load_data()\nindex = VectorStoreIndex.from_documents(\n    documents, storage_context=storage_context\n)\n</code></pre> <p>\u6709\u5173\u5982\u4f55\u4f7f\u7528 <code>VectorStoreIndex</code> \u7684\u66f4\u591a\u793a\u4f8b\uff0c\u8bf7\u53c2\u9605\u6211\u4eec\u7684\u5411\u91cf\u5b58\u50a8\u7d22\u5f15\u4f7f\u7528\u793a\u4f8b\u7b14\u8bb0\u672c\u3002</p> <p>\u6709\u5173\u5982\u4f55\u5c06 <code>VectorStoreIndex</code> \u4e0e\u7279\u5b9a\u5411\u91cf\u5b58\u50a8\u4e00\u8d77\u4f7f\u7528\u7684\u793a\u4f8b\uff0c\u8bf7\u67e5\u770b\u5b58\u50a8\u90e8\u5206\u4e0b\u7684\u5411\u91cf\u5b58\u50a8\u3002</p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%90%91%E9%87%8F%E7%B4%A2%E5%BC%95/#_7","title":"\u7ec4\u5408\u68c0\u7d22\u53ec\u56de","text":"<p><code>VectorStoreIndex</code> (\u4ee5\u53ca\u4efb\u4f55\u5176\u4ed6\u7d22\u5f15/\u68c0\u7d22\u5668)\u80fd\u591f\u68c0\u7d22\u901a\u7528\u5bf9\u8c61\uff0c\u5305\u62ec</p> <ul> <li>\u8282\u70b9\u5f15\u7528</li> <li>\u67e5\u8be2\u5f15\u64ce</li> <li>\u53ec\u56de\u5668</li> <li>\u67e5\u8be2\u7ba1\u9053</li> </ul> <p>\u5982\u679c\u8fd9\u4e9b\u5bf9\u8c61\u662f\u53ef\u4ee5\u88ab\u68c0\u7d22\u5230\uff0c\u5b83\u4eec\u5c06\u4f7f\u7528\u63d0\u4f9b\u7684\u67e5\u8be2\u81ea\u52a8\u8fd0\u884c\u3002</p> <p>\u4f8b\u5982\uff1a</p> Python<pre><code>from llama_index.core.schema import IndexNode\n\nquery_engine = other_index.as_query_engine\nobj = IndexNode(\n    text=\"A query engine describing X, Y, and Z.\",\n    obj=query_engine,\n    index_id=\"my_query_engine\",\n)\n\nindex = VectorStoreIndex(nodes=nodes, objects=[obj])\nretriever = index.as_retriever(verbose=True)\n</code></pre> <p>\u5982\u679c\u68c0\u7d22\u5230\u5305\u542b\u67e5\u8be2\u5f15\u64ce\u7684\u7d22\u5f15\u8282\u70b9\uff0c\u5219\u5c06\u8fd0\u884c\u67e5\u8be2\u5f15\u64ce\u5e76\u5c06\u751f\u6210\u7684\u54cd\u5e94\u4f5c\u4e3a\u8282\u70b9\u8fd4\u56de\u3002</p> <p>\u6b32\u4e86\u89e3\u66f4\u591a\u8be6\u60c5\uff0c\u8bf7\u67e5\u770b\u6307\u5357</p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%AE%9E%E4%BD%93%E5%85%83%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96/","title":"\u5b9e\u4f53\u5143\u6570\u636e\u63d0\u53d6","text":""},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%AE%9E%E4%BD%93%E5%85%83%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96/#_1","title":"\u5b9e\u4f53\u5143\u6570\u636e\u63d0\u53d6","text":"<p>\u5728\u6b64\u6f14\u793a\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528 <code>newEntityExtractor</code> \u4ece\u6bcf\u4e2a\u8282\u70b9\u63d0\u53d6\u5b9e\u4f53\uff0c\u5b58\u50a8\u5728\u5143\u6570\u636e\u4e2d\u3002\u9ed8\u8ba4\u6a21\u578b\u662f\uff0c\u5b83\u662f\u4ece <code>HuggingFacetomaarsen/span-marker-mbert-base-multinerd</code> \u4e0b\u8f7d\u5e76\u5728\u672c\u5730\u8fd0\u884c\u7684\u3002</p> <p>\u6709\u5173 LlamaIndex \u4e2d\u5143\u6570\u636e\u63d0\u53d6\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u6211\u4eec\u7684\u6587\u6863\u3002</p> <p>\u5982\u679c\u60a8\u5728 colab \u4e0a\u6253\u5f00\u6b64\u7b14\u8bb0\u672c\uff0c\u5219\u53ef\u80fd\u9700\u8981\u5b89\u88c5 LlamaIndex \ud83e\udd99\u3002</p> Bash<pre><code>pip install llama-index-llms-openai\npip install llama-index-extractors-entity\npip install llama-index\n</code></pre> Python<pre><code># Needed to run the entity extractor\n# !pip install span_marker\n\nimport os\n\nos.environ[\"OPENAI_API_KEY\"] = \"YOUR_API_KEY\"\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%AE%9E%E4%BD%93%E5%85%83%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96/#_2","title":"\u8bbe\u7f6e\u5b9e\u4f53\u63d0\u53d6\u5668\u548c\u89e3\u6790\u5668","text":"Python<pre><code>from llama_index.extractors.entity import EntityExtractor\nfrom llama_index.core.node_parser import SentenceSplitter\n\nentity_extractor = EntityExtractor(\n    prediction_threshold=0.5,\n    label_entities=False,  # include the entity label in the metadata (can be erroneous)\n    device=\"cpu\",  # set to \"cuda\" if you have a GPU\n)\n\nnode_parser = SentenceSplitter()\n\ntransformations = [node_parser, entity_extractor]\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%AE%9E%E4%BD%93%E5%85%83%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96/#_3","title":"\u52a0\u8f7d\u6570\u636e","text":"<p>\u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u5c06\u4e0b\u8f7d 2023 \u5e74 IPPC \u6c14\u5019\u62a5\u544a - \u7b2c 3 \u7ae0\u6d77\u6d0b\u548c\u6cbf\u6d77\u751f\u6001\u7cfb\u7edf\uff08172 \u9875\uff09</p> Bash<pre><code>curl https://www.ipcc.ch/report/ar6/wg2/downloads/report/IPCC_AR6_WGII_Chapter03.pdf --output IPCC_AR6_WGII_Chapter03.pdf\n</code></pre> <p>\u63a5\u4e0b\u6765\uff0c\u52a0\u8f7d\u6587\u6863\u3002</p> <p>\u4ece llama_index.core \u5bfc\u5165 SimpleDirectoryReader</p> Python<pre><code>from llama_index.core import SimpleDirectoryReader\n\ndocuments = SimpleDirectoryReader(\n    input_files=[\"./IPCC_AR6_WGII_Chapter03.pdf\"]\n).load_data()\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%AE%9E%E4%BD%93%E5%85%83%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96/#_4","title":"\u63d0\u53d6\u5143\u6570\u636e","text":"<p>\u73b0\u5728\uff0c\u8fd9\u662f\u4e00\u4e2a\u76f8\u5f53\u957f\u7684\u6587\u6863\u3002\u7531\u4e8e\u6211\u4eec\u4e0d\u5728 CPU \u4e0a\u8fd0\u884c\uff0c\u56e0\u6b64\u76ee\u524d\u6211\u4eec\u53ea\u4f1a\u5728\u90e8\u5206\u6587\u6863\u4e0a\u8fd0\u884c\u3002\u4e0d\u8fc7\uff0c\u60a8\u53ef\u4ee5\u81ea\u884c\u5728\u6240\u6709\u6587\u6863\u4e0a\u8fd0\u884c\u5b83\uff01</p> Python<pre><code>from llama_index.core.ingestion import IngestionPipeline\n\nimport random\n\nrandom.seed(42)\n# comment out to run on all documents\n# 100 documents takes about 5 minutes on CPU\ndocuments = random.sample(documents, 100)\n\npipeline = IngestionPipeline(transformations=transformations)\n\nnodes = pipeline.run(documents=documents)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%AE%9E%E4%BD%93%E5%85%83%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96/#_5","title":"\u68c0\u67e5\u8f93\u51fa","text":"Python<pre><code>samples = random.sample(nodes, 5)\nfor node in samples:\n    print(node.metadata)\n</code></pre> Python<pre><code>{'page_label'\uff1a'387'\uff0c'file_name'\uff1a'IPC\u200b\u200bC_AR6_WGII_Chapter03.pdf'}\n{'page_label'\uff1a'410'\uff0c'file_name'\uff1a'IPC\u200b\u200bC_AR6_WGII_Chapter03.pdf'\uff0c'entities'\uff1a{'Parmesan'\uff0c'Boyd'\uff0c'Riebesell'\uff0c'Gattuso'}}\n{'page_label'\uff1a'391'\uff0c'file_name'\uff1a'IPC\u200b\u200bC_AR6_WGII_Chapter03.pdf'\uff0c'\u5b9e\u4f53'\uff1a{'Gulev'\uff0c'Fox-Kemper'}}\n{'page_label': '430', 'file_name': 'IPCC_AR6_WGII_Chapter03.pdf', 'entities': {'Kessouri', 'van der Sleen', 'Brodeur', 'Siedlecki', 'Fiechter', 'Ramajo', '\u5361\u7f57\u624e'}}\n{'page_label'\uff1a'388'\uff0c'file_name'\uff1a'IPC\u200b\u200bC_AR6_WGII_Chapter03.pdf'}\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%AE%9E%E4%BD%93%E5%85%83%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96/#_6","title":"\u5c1d\u8bd5\u67e5\u8be2","text":"Python<pre><code>from llama_index.core import VectorStoreIndex\nfrom llama_index.llms.openai import OpenAI\nfrom llama_index.core import Settings\n\nSettings.llm = OpenAI(model=\"gpt-3.5-turbo\", temperature=0.2)\n\nindex = VectorStoreIndex(nodes=nodes)\n</code></pre> Bash<pre><code>According to the provided context information, Fox-Kemper is mentioned in relation to the observed and projected trends of ocean warming and marine heatwaves. It is stated that Fox-Kemper et al. (2021) reported that ocean warming has increased on average by 0.88\u00b0C from 1850-1900 to 2011-2020. Additionally, it is mentioned that Fox-Kemper et al. (2021) projected that ocean warming will continue throughout the 21st century, with the rate of global ocean warming becoming scenario-dependent from the mid-21st century. Fox-Kemper is also cited as a source for the information on the increasing frequency, intensity, and duration of marine heatwaves over the 20th and early 21st centuries, as well as the projected increase in frequency of marine heatwaves in the future.\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%AE%9E%E4%BD%93%E5%85%83%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96/#_7","title":"\u65e0\u5143\u6570\u636e\u7684\u5bf9\u6bd4","text":"<p>\u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u91cd\u65b0\u6784\u5efa\u7d22\u5f15\uff0c\u4f46\u6ca1\u6709\u5143\u6570\u636e</p> Python<pre><code>for node in nodes:\n    node.metadata.pop(\"entities\", None)\n\nprint(nodes[0].metadata)\n</code></pre> Bash<pre><code>{'page_label'\uff1a'542'\uff0c'file_name'\uff1a'IPC\u200b\u200bC_AR6_WGII_Chapter03.pdf'}\n</code></pre> Python<pre><code>index = VectorStoreIndex(nodes=nodes)\nquery_engine = index.as_query_engine()\nresponse = query_engine.query(\"What is said by Fox-Kemper?\")\nprint(response)\n</code></pre> Bash<pre><code>According to the provided context information, Fox-Kemper is mentioned in relation to the decline of the AMOC (Atlantic Meridional Overturning Circulation) over the 21st century. The statement mentions that there is high confidence in the decline of the AMOC, but low confidence for quantitative projections.\n</code></pre> <p>\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c\u6211\u4eec\u7684\u5143\u6570\u636e\u4e30\u5bcc\u7d22\u5f15\u80fd\u591f\u83b7\u53d6\u66f4\u591a\u76f8\u5173\u4fe1\u606f\u3002</p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%B1%9E%E6%80%A7%E5%9B%BE%E7%B4%A2%E5%BC%95/","title":"\u5c5e\u6027\u56fe\u7d22\u5f15","text":""},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%B1%9E%E6%80%A7%E5%9B%BE%E7%B4%A2%E5%BC%95/#_1","title":"\u4f7f\u7528\u5c5e\u6027\u56fe\u8c31\u7d22\u5f15","text":"<p>\u5c5e\u6027\u56fe\u8c31\u662f\u5e26\u6807\u7b7e\uff08\u5373\u5143\u6570\u636e\uff09\u8282\u70b9\u5c5e\u6027\uff08\u5373\u5b9e\u4f53\u7c7b\u522b\u3001\u6587\u672c\u6807\u7b7e\u7b49\uff09\u7684\u77e5\u8bc6\u96c6\u5408\uff0c\u901a\u8fc7\u5173\u7cfb\u8fde\u63a5\u5728\u4e00\u8d77\u5f62\u6210\u7ed3\u6784\u5316\u8def\u5f84\u3002</p> <p>\u5728 LlamaIndex \u4e2d\uff0c<code>PropertyGraphIndex</code> \u6784\u5efa\u4e86\u4e0b\u9762\u4e24\u4e2a\u7684\u5c5e\u6027\u56fe\u8c31\u7f16\u6392\u80fd\u529b\uff1a</p> <ul> <li>\u6784\u5efa\u56fe\u8c31</li> <li>\u67e5\u8be2\u56fe\u8c31</li> </ul>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%B1%9E%E6%80%A7%E5%9B%BE%E7%B4%A2%E5%BC%95/#_2","title":"\u7528\u6cd5","text":"<p>\u53ea\u9700\u5bfc\u5165\u5c5e\u6027\u56fe\u8c31\u7c7b\uff0c\u4fbf\u53ef\u627e\u5230\u4f7f\u7528\u8fd9\u4e2a\u7c7b\u7684\u57fa\u672c\u7528\u6cd5\uff1a</p> Python<pre><code>from llama_index.core import PropertyGraphIndex\n\n# \u521b\u5efa\u77e5\u8bc6\u56fe\u8c31\u7d22\u5f15\nindex = PropertyGraphIndex.from_documents(\n\n\n# \u4f7f\u7528\u8fd9\u4e2a\u7d22\u5f15\nretriever = index.as_retriever(\n    include_text=True,  # include source chunk with matching paths\n    similarity_top_k=2,  # top k for vector kg node retrieval\n)\nnodes = retriever.retrieve(\"Test\")\n\nquery_engine = index.as_query_engine(\n    include_text=True,  # include source chunk with matching paths\n    similarity_top_k=2,  # top k for vector kg node retrieval\n)\nresponse = query_engine.query(\"Test\")\n\n# save and load\nindex.storage_context.persist(persist_dir=\"./storage\")\n\nfrom llama_index.core import StorageContext, load_index_from_storage\n\nindex = load_index_from_storage(\n    StorageContext.from_defaults(persist_dir=\"./storage\")\n)\n\n# loading from existing graph store (and optional vector store)\n# load from existing graph/vector store\nindex = PropertyGraphIndex.from_existing(\n    property_graph_store=graph_store, vector_store=vector_store, ...\n)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%B1%9E%E6%80%A7%E5%9B%BE%E7%B4%A2%E5%BC%95/#_3","title":"\u6784\u9020\u5c5e\u6027\u56fe\u8c31","text":"<p>LlamaIndex \u4e2d\u7684\u5c5e\u6027\u56fe\u8c31\u7684\u6784\u9020\u662f\u901a\u8fc7\u5bf9\u6bcf\u4e2achunk\u6267\u884c\u4e00\u7cfb\u5217 <code>kg_extractors</code> \u64cd\u4f5c\uff0c\u5e76\u5c06\u5b9e\u4f53\u548c\u5173\u7cfb\u4f5c\u4e3a\u5143\u6570\u636e\u9644\u52a0\u5230\u6bcf\u4e2a llama-index \u8282\u70b9\u6765\u5b9e\u73b0\u3002\u60a8\u53ef\u4ee5\u5728\u6b64\u5904\u4f7f\u7528\u4efb\u610f\u6570\u91cf\u7684\u5c5e\u6027\u56fe\uff0c\u5b83\u4eec\u90fd\u4f1a\u5f97\u5230\u5e94\u7528\u3002</p> <p>\u5982\u679c\u60a8\u5df2\u7ecf\u5728\u6444\u53d6\u7ba1\u9053\u4e2d\u4f7f\u7528\u8fc7\u8f6c\u6362\u6216\u5143\u6570\u636e\u63d0\u53d6\u5668\uff0c\u90a3\u4e48\u8fd9\u5c06\u975e\u5e38\u719f\u6089\uff08\u5e76\u4e14\u8fd9\u4e9b <code>kg_extractors</code> \u4e0e\u6444\u53d6\u7ba1\u9053\u517c\u5bb9\uff09\uff01</p> <p>\u4f7f\u7528\u9002\u5f53\u7684\u53c2\u6570 <code>kwarg</code> \u8bbe\u7f6e\u63d0\u53d6\u5668\uff1a</p> Python<pre><code>index = PropertyGraphIndex.from_documents(\n    documents,\n    kg_extractors=[extractor1, extractor2, ...],\n)\n\n# insert additional documents / nodes\nindex.insert(document)\nindex.insert_nodes(nodes)\n</code></pre> <p>\u82e5\u672a\u63d0\u4f9b\u77e5\u8bc6\u56fe\u8c31\u63d0\u53d6\u5668\uff0c\u5219\u9ed8\u8ba4\u503c\u4e3a <code>SimpleLLMPathExtractor</code> \u548c <code>ImplicitPathExtractor</code> \u8fd9\u4e24\u4e2a\u77e5\u8bc6\u56fe\u8c31\u63d0\u53d6\u5668\u4e00\u8d77\u4f7f\u7528\u3002</p> <p>\u63a5\u4e0b\u6765\u5c06\u5bf9 <code>kg_extractors</code> \u8fdb\u884c\u8be6\u7ec6\u8bf4\u660e\u3002</p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%B1%9E%E6%80%A7%E5%9B%BE%E7%B4%A2%E5%BC%95/#simplellmpathextractor","title":"SimpleLLMPathExtractor (\u9ed8\u8ba4\u4f7f\u7528)","text":"<p>\u4f7f\u7528 LLM \u63d0\u53d6\u7b80\u77ed\u8bed\u53e5\u6765\u63d0\u793a\u548c\u89e3\u6790\u683c\u5f0f\u4e3a <code>(entity1, relation, entity2)</code> \u7684\u5355\u8df3\u8def\u5f84</p> Python<pre><code>from llama_index.core.indices.property_graph import SimpleLLMPathExtractor\n\nkg_extractor = SimpleLLMPathExtractor(\n    llm=llm,\n    max_paths_per_chunk=10,\n    num_workers=4,\n    show_progress=False,\n)\n</code></pre> <p>\u5982\u679c\u60a8\u613f\u610f\uff0c\u60a8\u8fd8\u53ef\u4ee5\u81ea\u5b9a\u4e49\u63d0\u793a <code>prompt</code> \u548c\u7528\u4e8e\u89e3\u6790\u8def\u5f84\u7684\u51fd\u6570\u3002</p> <p>\u8fd9\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\uff1a</p> Python<pre><code>prompt = (\n    \"Some text is provided below. Given the text, extract up to \"\n    \"{max_paths_per_chunk} \"\n    \"knowledge triples in the form of `subject,predicate,object` on each line. Avoid stopwords.\\n\"\n)\n\n\ndef parse_fn(response_str: str) -&gt; List[Tuple[str, str, str]]:\n    lines = response_str.split(\"\\n\")\n    triples = [line.split(\",\") for line in lines]\n    return triples\n\n\nkg_extractor = SimpleLLMPathExtractor(\n    llm=llm,\n    extract_prompt=prompt,\n    parse_fn=parse_fn,\n)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%B1%9E%E6%80%A7%E5%9B%BE%E7%B4%A2%E5%BC%95/#implicitpathextractor","title":"ImplicitPathExtractor \uff08\u9ed8\u8ba4\u4f7f\u7528\uff09","text":"<p>\u4f7f\u7528\u6bcf\u4e2a llama-index \u8282\u70b9\u5bf9\u8c61\u4e0a\u7684\u5c5e\u6027\u63d0\u53d6\u8def\u5f84 <code>node.relationships</code>\u3002</p> <p>\u8be5\u63d0\u53d6\u5668\u4e0d\u9700\u8981 LLM \u6216\u5d4c\u5165\u6a21\u578b\u6765\u8fd0\u884c\uff0c\u56e0\u4e3a\u5b83\u4ec5\u4ec5\u89e3\u6790 llama-index \u8282\u70b9\u5bf9\u8c61\u4e0a\u5df2\u7ecf\u5b58\u5728\u7684\u5c5e\u6027\u3002</p> Python<pre><code>from llama_index.core.indices.property_graph import ImplicitPathExtractor\n\nkg_extractor = ImplicitPathExtractor()\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%B1%9E%E6%80%A7%E5%9B%BE%E7%B4%A2%E5%BC%95/#dynamicllmpathextractor","title":"DynamicLLMPathExtractor","text":"<p>\u5c06\u6839\u636e\u53ef\u9009\u7684\u5141\u8bb8\u5b9e\u4f53\u7c7b\u578b\u548c\u5173\u7cfb\u7c7b\u578b\u5217\u8868\u63d0\u53d6\u8def\u5f84\uff08\u5305\u62ec\u5b9e\u4f53\u7c7b\u578b\uff01\uff09\u3002\u5982\u679c\u6ca1\u6709\u63d0\u4f9b\uff0c\u5219 LLM \u5c06\u6839\u636e\u5176\u8ba4\u4e3a\u5408\u9002\u7684\u65b9\u5f0f\u5206\u914d\u7c7b\u578b\u3002\u5982\u679c\u63d0\u4f9b\u4e86\uff0c\u5b83\u5c06\u6709\u52a9\u4e8e\u6307\u5bfc LLM\uff0c\u4f46\u4e0d\u4f1a\u5f3a\u5236\u6267\u884c\u8fd9\u4e9b\u7c7b\u578b\u3002</p> Python<pre><code>from llama_index.core.indices.property_graph import DynamicLLMPathExtractor\n\nkg_extractor = DynamicLLMPathExtractor(\n    llm=llm,\n    max_triplets_per_chunk=20,\n    num_workers=4,\n    allowed_entity_types=[\"POLITICIAN\", \"POLITICAL_PARTY\"],\n    allowed_relation_types=[\"PRESIDENT_OF\", \"MEMBER_OF\"],\n)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%B1%9E%E6%80%A7%E5%9B%BE%E7%B4%A2%E5%BC%95/#schemallmpathextractor","title":"SchemaLLMPathExtractor","text":"<p>\u6309\u7167\u5141\u8bb8\u7684\u5b9e\u4f53\u3001\u5173\u7cfb\u4ee5\u53ca\u54ea\u4e9b\u5b9e\u4f53\u53ef\u4ee5\u8fde\u63a5\u5230\u54ea\u4e9b\u5173\u7cfb\u7684\u4e25\u683c\u6a21\u5f0f\u63d0\u53d6\u8def\u5f84\u3002</p> <p>\u4f7f\u7528 pydantic\u3001LLM \u7684\u7ed3\u6784\u5316\u8f93\u51fa\u548c\u4e00\u4e9b\u5de7\u5999\u7684\u9a8c\u8bc1\uff0c\u6211\u4eec\u53ef\u4ee5\u52a8\u6001\u6307\u5b9a\u6a21\u5f0f\u5e76\u9a8c\u8bc1\u6bcf\u4e2a\u8def\u5f84\u7684\u63d0\u53d6\u3002</p> Python<pre><code>from typing import Literal\nfrom llama_index.core.indices.property_graph import SchemaLLMPathExtractor\n\n# recommended uppercase, underscore separated\nentities = Literal[\"PERSON\", \"PLACE\", \"THING\"]\nrelations = Literal[\"PART_OF\", \"HAS\", \"IS_A\"]\nschema = {\n    \"PERSON\": [\"PART_OF\", \"HAS\", \"IS_A\"],\n    \"PLACE\": [\"PART_OF\", \"HAS\"],\n    \"THING\": [\"IS_A\"],\n}\n\nkg_extractor = SchemaLLMPathExtractor(\n    llm=llm,\n    possible_entities=entities,\n    possible_relations=relations,\n    kg_validation_schema=schema,\n    strict=True,  # if false, will allow triplets outside of the schema\n    num_workers=4,\n    max_triplets_per_chunk=10,\n)\n</code></pre> <p>\u8fd9\u4e2a\u63d0\u53d6\u5668\u662f\u9ad8\u5ea6\u53ef\u5b9a\u5236\u7684\uff0c\u5e76\u4e14\u5177\u6709\u53ef\u5b9a\u5236\u7684\u9009\u9879 - \u6a21\u5f0f\u7684\u5404\u4e2a\u65b9\u9762\uff08\u5982\u4e0a\u6240\u793a\uff09 - <code>extract_prompt</code> \u4e0e <code>strict=False</code>\uff0c<code>strict=True</code> \u5141\u8bb8\u6a21\u5f0f\u4e4b\u5916\u7684\u4e09\u5143\u7ec4\u6216\u4e0d\u5141\u8bb8 -<code>kg_schema_cls</code> \u5982\u679c\u60a8\u662f pydantic \u4e13\u4e1a\u4eba\u58eb\u5e76\u60f3\u521b\u5efa\u81ea\u5df1\u7684\u5e26\u6709\u81ea\u5b9a\u4e49\u9a8c\u8bc1\u7684 pydantic \u7c7b\uff0c\u5219\u53ef\u4ee5\u4f20\u9012\u60a8\u81ea\u5df1\u7684\u81ea\u5b9a\u4e49\u3002</p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%B1%9E%E6%80%A7%E5%9B%BE%E7%B4%A2%E5%BC%95/#_4","title":"\u68c0\u7d22\u548c\u67e5\u8be2","text":"<p>\u5e26\u6807\u7b7e\u7684\u5c5e\u6027\u56fe\u8c31\u53ef\u4ee5\u901a\u8fc7\u591a\u79cd\u65b9\u5f0f\u67e5\u8be2\u4ee5\u68c0\u7d22\u8282\u70b9\u548c\u8def\u5f84\u3002\u5728 LlamaIndex \u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u540c\u65f6\u7ec4\u5408\u591a\u79cd\u8282\u70b9\u68c0\u7d22\u65b9\u6cd5\uff01</p> <p>Python<pre><code># create a retriever\nretriever = index.as_retriever(sub_retrievers=[retriever1, retriever2, ...])\n\n# create a query engine\nquery_engine = index.as_query_engine(\n    sub_retrievers=[retriever1, retriever2, ...]\n)\n</code></pre> \u5982\u679c\u6ca1\u6709\u63d0\u4f9b\u5b50\u68c0\u7d22\u5668\uff0c\u5219\u9ed8\u8ba4\u503c\u4e3a <code>LLMSynonymRetriever</code> \u548c <code>VectorContextRetriever</code>\uff08\u5982\u679c\u542f\u7528\u4e86\u5d4c\u5165\uff09\u3002</p> <p>\u6240\u6709\u68c0\u7d22\u5668\u76ee\u524d\u5305\u62ec\uff1a  * <code>LLMSynonymRetriever</code> \u6839\u636e LLM \u751f\u6210\u7684\u5173\u952e\u5b57/\u540c\u4e49\u8bcd\u8fdb\u884c\u68c0\u7d22  * <code>VectorContextRetriever</code>  \u6839\u636e\u5d4c\u5165\u7684\u56fe\u8c31\u8282\u70b9\u8fdb\u884c\u68c0\u7d22  * <code>TextToCypherRetriever</code>  \u8981\u6c42 LLM \u6839\u636e\u5c5e\u6027\u56fe\u8c31\u7684\u6a21\u5f0f\u751f\u6210\u5bc6\u7801  * <code>CypherTemplateRetriever</code>  \u4f7f\u7528\u7531 LLM \u63a8\u65ad\u51fa\u7684\u5e26\u6709\u53c2\u6570\u7684\u5bc6\u7801\u6a21\u677f  * <code>CustomPGRetriever</code>  \u6613\u4e8e\u5b50\u7c7b\u5316\u548c\u5b9e\u73b0\u81ea\u5b9a\u4e49\u68c0\u7d22\u903b\u8f91</p> <p>\u901a\u5e38\uff0c\u60a8\u53ef\u4ee5\u5b9a\u4e49\u4e00\u4e2a\u6216\u591a\u4e2a\u8fd9\u6837\u7684\u5b50\u68c0\u7d22\u5668\u5e76\u5c06\u5b83\u4eec\u4f20\u9012\u7ed9PGRetriever\uff1a</p> Python<pre><code>from llama_index.core.indices.property_graph import (\n    PGRetriever,\n    VectorContextRetriever,\n    LLMSynonymRetriever,\n)\n\nsub_retrievers = [\n    VectorContextRetriever(index.property_graph_store, ...),\n    LLMSynonymRetriever(index.property_graph_store, ...),\n]\n\nretriever = PGRetriever(sub_retrievers=sub_retrievers)\n\nnodes = retriever.retrieve(\"&lt;query&gt;\")\n</code></pre> <p>\u8bf7\u7ee7\u7eed\u9605\u8bfb\u4e0b\u6587\u6765\u4e86\u89e3\u6709\u5173\u6240\u6709\u730e\u72ac\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\u3002</p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%B1%9E%E6%80%A7%E5%9B%BE%E7%B4%A2%E5%BC%95/#llmsynonymretriever","title":"<code>LLMSynonymRetriever</code> (\u9ed8\u8ba4\u4f7f\u7528)","text":"<p>\u63a5\u53d7 <code>LLMSynonymRetriever</code> \u67e5\u8be2\uff0c\u5e76\u5c1d\u8bd5\u751f\u6210\u5173\u952e\u5b57\u548c\u540c\u4e49\u8bcd\u6765\u68c0\u7d22\u8282\u70b9\uff08\u4ee5\u53ca\u8fde\u63a5\u5230\u8fd9\u4e9b\u8282\u70b9\u7684\u8def\u5f84\uff09\u3002</p> <p>\u660e\u786e\u58f0\u660e\u68c0\u7d22\u5668\u5141\u8bb8\u60a8\u81ea\u5b9a\u4e49\u591a\u4e2a\u9009\u9879\u3002\u4ee5\u4e0b\u662f\u9ed8\u8ba4\u8bbe\u7f6e\uff1a</p> Python<pre><code>from llama_index.core.indices.property_graph import LLMSynonymRetriever\n\nprompt = (\n    \"Given some initial query, generate synonyms or related keywords up to {max_keywords} in total, \"\n    \"considering possible cases of capitalization, pluralization, common expressions, etc.\\n\"\n    \"Provide all synonyms/keywords separated by '^' symbols: 'keyword1^keyword2^...'\\n\"\n    \"Note, result should be in one-line, separated by '^' symbols.\"\n    \"----\\n\"\n    \"QUERY: {query_str}\\n\"\n    \"----\\n\"\n    \"KEYWORDS: \"\n)\n\n\ndef parse_fn(self, output: str) -&gt; list[str]:\n    matches = output.strip().split(\"^\")\n\n    # capitalize to normalize with ingestion\n    return [x.strip().capitalize() for x in matches if x.strip()]\n\n\nsynonym_retriever = LLMSynonymRetriever(\n    index.property_graph_store,\n    llm=llm,\n    # include source chunk text with retrieved paths\n    include_text=False,\n    synonym_prompt=prompt,\n    output_parsing_fn=parse_fn,\n    max_keywords=10,\n    # the depth of relations to follow after node retrieval\n    path_depth=1,\n)\n\nretriever = index.as_retriever(sub_retrievers=[synonym_retriever])\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%B1%9E%E6%80%A7%E5%9B%BE%E7%B4%A2%E5%BC%95/#vectorcontextretriever","title":"<code>VectorContextRetriever</code> (\u5982\u679c\u652f\u6301\u7684\u8bdd\u5219\u9ed8\u8ba4\u4f7f\u7528)","text":"<p>\u6839\u636e\u5411\u91cf\u76f8\u4f3c\u6027\u68c0\u7d22 <code>VectorContextRetriever</code> \u8282\u70b9\uff0c\u7136\u540e\u83b7\u53d6\u8fde\u63a5\u5230\u8fd9\u4e9b\u8282\u70b9\u7684\u8def\u5f84\u3002</p> <p>\u5982\u679c\u60a8\u7684\u56fe\u5b58\u50a8\u652f\u6301\u5411\u91cf\uff0c\u90a3\u4e48\u60a8\u53ea\u9700\u8981\u7ba1\u7406\u8be5\u56fe\u5b58\u50a8\u5373\u53ef\u3002\u5426\u5219\uff0c\u9664\u4e86\u56fe\u5b58\u50a8\u4e4b\u5916\uff0c\u60a8\u8fd8\u9700\u8981\u63d0\u4f9b\u4e00\u4e2a\u5411\u91cf\u5b58\u50a8\uff08\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4f7f\u7528\u5185\u5b58SimpleVectorStore\uff09\u3002</p> Python<pre><code>from llama_index.core.indices.property_graph import VectorContextRetriever\n\nvector_retriever = VectorContextRetriever(\n    index.property_graph_store,\n    # only needed when the graph store doesn't support vector queries\n    # vector_store=index.vector_store,\n    embed_model=embed_model,\n    # include source chunk text with retrieved paths\n    include_text=False,\n    # the number of nodes to fetch\n    similarity_top_k=2,\n    # the depth of relations to follow after node retrieval\n    path_depth=1,\n    # can provide any other kwargs for the VectorStoreQuery class\n    ...,\n)\n\nretriever = index.as_retriever(sub_retrievers=[vector_retriever])\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%B1%9E%E6%80%A7%E5%9B%BE%E7%B4%A2%E5%BC%95/#texttocypherretriever","title":"<code>TextToCypherRetriever</code>","text":"<p>\u4f7f\u7528 <code>TextToCypherRetriever</code> \u56fe\u5f62\u5b58\u50a8\u6a21\u5f0f\u3001\u60a8\u7684\u67e5\u8be2\u548c\u6587\u672c\u5230\u5bc6\u7801\u7684\u63d0\u793a\u6a21\u677f\u6765\u751f\u6210\u548c\u6267\u884c\u5bc6\u7801\u67e5\u8be2\u3002</p> <p>\u6ce8\u610f\uff1a\u7531\u4e8e\u5b83 <code>SimplePropertyGraphStore</code> \u5b9e\u9645\u4e0a\u4e0d\u662f\u4e00\u4e2a\u56fe\u5f62\u6570\u636e\u5e93\uff0c\u56e0\u6b64\u5b83\u4e0d\u652f\u6301\u5bc6\u7801\u67e5\u8be2\u3002</p> <p>\u60a8\u53ef\u4ee5\u4f7f\u7528 \u68c0\u67e5\u67b6\u6784 <code>index.property_graph_store.get_schema_str()</code>\u3002</p> <p>Python<pre><code>from llama_index.core.indices.property_graph import TextToCypherRetriever\n\nDEFAULT_RESPONSE_TEMPLATE = (\n    \"Generated Cypher query:\\n{query}\\n\\n\" \"Cypher Response:\\n{response}\"\n)\nDEFAULT_ALLOWED_FIELDS = [\"text\", \"label\", \"type\"]\n\nDEFAULT_TEXT_TO_CYPHER_TEMPLATE = (\n    index.property_graph_store.text_to_cypher_template,\n)\n\n\ncypher_retriever = TextToCypherRetriever(\n    index.property_graph_store,\n    # customize the LLM, defaults to Settings.llm\n    llm=llm,\n    # customize the text-to-cypher template.\n    # Requires `schema` and `question` template args\n    text_to_cypher_template=DEFAULT_TEXT_TO_CYPHER_TEMPLATE,\n    # customize how the cypher result is inserted into\n    # a text node. Requires `query` and `response` template args\n    response_template=DEFAULT_RESPONSE_TEMPLATE,\n    # an optional callable that can clean/verify generated cypher\n    cypher_validator=None,\n    # allowed fields in the resulting\n    allowed_output_field=DEFAULT_ALLOWED_FIELDS,\n)\n</code></pre> \u6ce8\u610f\uff1a\u6267\u884c\u4efb\u610f\u5bc6\u7801\u6709\u98ce\u9669\u3002\u8bf7\u786e\u4fdd\u91c7\u53d6\u5fc5\u8981\u63aa\u65bd\uff08\u53ea\u8bfb\u89d2\u8272\u3001\u6c99\u76d2\u73af\u5883\u7b49\uff09\u4ee5\u786e\u4fdd\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u5b89\u5168\u4f7f\u7528\u3002</p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%B1%9E%E6%80%A7%E5%9B%BE%E7%B4%A2%E5%BC%95/#cyphertemplateretriever","title":"CypherTemplateRetriever","text":"<p>\u8fd9\u662f \u7684\u66f4\u53d7\u7ea6\u675f\u7684\u7248\u672cTextToCypherRetriever\u3002\u6211\u4eec\u53ef\u4ee5\u63d0\u4f9b\u4e00\u4e2a\u5bc6\u7801\u6a21\u677f\uff0c\u8ba9 LLM \u586b\u5199\u7a7a\u767d\uff0c\u800c\u4e0d\u662f\u8ba9 LLM \u81ea\u7531\u751f\u6210\u4efb\u4f55\u5bc6\u7801\u8bed\u53e5\u3002</p> <p>\u4e3a\u4e86\u8bf4\u660e\u8fd9\u662f\u5982\u4f55\u5de5\u4f5c\u7684\uff0c\u8fd9\u91cc\u6709\u4e00\u4e2a\u5c0f\u4f8b\u5b50\uff1a</p> Python<pre><code># NOTE: current v1 is needed\nfrom pydantic import BaseModel, Field\nfrom llama_index.core.indices.property_graph import CypherTemplateRetriever\n\n# write a query with template params\ncypher_query = \"\"\"\nMATCH (c:Chunk)-[:MENTIONS]-&gt;(o)\nWHERE o.name IN $names\nRETURN c.text, o.name, o.label;\n\"\"\"\n\n\n# create a pydantic class to represent the params for our query\n# the class fields are directly used as params for running the cypher query\nclass TemplateParams(BaseModel):\n    \"\"\"Template params for a cypher query.\"\"\"\n\n    names: list[str] = Field(\n        description=\"A list of entity names or keywords to use for lookup in a knowledge graph.\"\n    )\n\n\ntemplate_retriever = CypherTemplateRetriever(\n    index.property_graph_store, TemplateParams, cypher_query\n)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%B1%9E%E6%80%A7%E5%9B%BE%E7%B4%A2%E5%BC%95/#_5","title":"\u5b58\u50a8","text":"<p>\u76ee\u524d\uff0c\u652f\u6301\u7684\u5c5e\u6027\u56fe\u7684\u56fe\u5f62\u5b58\u50a8\u5305\u62ec\uff1a</p> \u5185\u5b58\u4e2d \u672c\u673a\u5d4c\u5165\u652f\u6301 \u5f02\u6b65 \u57fa\u4e8e\u670d\u52a1\u5668\u8fd8\u662f\u57fa\u4e8e\u78c1\u76d8\uff1f \u7b80\u5355\u5c5e\u6027\u56fe\u5b58\u50a8 \u2705 \u274c \u274c Neo4jPropertyGraphStore \u274c \u2705 \u274c NebulaPropertyGraphStore \u274c \u274c \u274c TiDBPropertyGraphStore \u274c \u2705 \u274c FalkorDBPropertyGraphStore \u274c \u2705 \u274c"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%B1%9E%E6%80%A7%E5%9B%BE%E7%B4%A2%E5%BC%95/#_6","title":"\u4fdd\u5b58\u5230\u78c1\u76d8/\u4ece\u78c1\u76d8\u4fdd\u5b58","text":"<p>\u9ed8\u8ba4\u5c5e\u6027\u56fe\u5b58\u50a8 <code>SimplePropertyGraphStore</code> \u5c06\u6240\u6709\u5185\u5bb9\u5b58\u50a8\u5728\u5185\u5b58\u4e2d\u5e76\u6301\u4e45\u4fdd\u5b58\u5e76\u4ece\u78c1\u76d8\u52a0\u8f7d\u3002</p> <p>\u4ee5\u4e0b\u662f\u4f7f\u7528\u9ed8\u8ba4\u56fe\u5f62\u5b58\u50a8\u4fdd\u5b58/\u52a0\u8f7d\u7d22\u5f15\u7684\u793a\u4f8b\uff1a</p> Python<pre><code>from llama_index.core import StorageContext, load_index_from_storage\nfrom llama_index.core.indices import PropertyGraphIndex\n\n# create\nindex = PropertyGraphIndex.from_documents(documents)\n\n# save\nindex.storage_context.persist(\"./storage\")\n\n# load\nstorage_context = StorageContext.from_defaults(persist_dir=\"./storage\")\nindex = load_index_from_storage(storage_context)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%B1%9E%E6%80%A7%E5%9B%BE%E7%B4%A2%E5%BC%95/#_7","title":"\u4f7f\u7528\u96c6\u6210\u4fdd\u5b58\u548c\u52a0\u8f7d","text":"<p>\u96c6\u6210\u901a\u5e38\u4f1a\u81ea\u52a8\u4fdd\u5b58\u3002\u6709\u4e9b\u56fe\u5f62\u5b58\u50a8\u4f1a\u652f\u6301\u5411\u91cf\uff0c\u6709\u4e9b\u5219\u53ef\u80fd\u4e0d\u652f\u6301\u3002\u60a8\u4e5f\u53ef\u4ee5\u59cb\u7ec8\u5c06\u56fe\u5f62\u5b58\u50a8\u4e0e\u5916\u90e8\u5411\u91cf\u6570\u636e\u5e93\u76f8\u7ed3\u5408\u3002</p> <p>\u6b64\u793a\u4f8b\u663e\u793a\u5982\u4f55\u4f7f\u7528 <code>Neo4j</code> \u548c <code>Qdrant</code> \u4fdd\u5b58/\u52a0\u8f7d\u5c5e\u6027\u56fe\u7d22\u5f15\u3002</p> <p>\u6ce8\u610f\uff1a\u5982\u679c\u672a\u4f20\u5165 <code>qdrant</code>\uff0c<code>neo4j</code> \u5c06\u81ea\u884c\u5b58\u50a8\u548c\u4f7f\u7528\u5d4c\u5165\u3002\u6b64\u793a\u4f8b\u8bf4\u660e\u4e86\u9664\u6b64\u4e4b\u5916\u7684\u7075\u6d3b\u6027\u3002</p> Bash<pre><code>pip install llama-index-graph-stores-neo4j llama-index-vector-stores-qdrant\n</code></pre> Python<pre><code>from llama_index.core import StorageContext, load_index_from_storage\nfrom llama_index.core.indices import PropertyGraphIndex\nfrom llama_index.graph_stores.neo4j import Neo4jPropertyGraphStore\nfrom llama_index.vector_stores.qdrant import QdrantVectorStore\nfrom qdrant_client import QdrantClient, AsyncQdrantClient\n\nvector_store = QdrantVectorStore(\n    \"graph_collection\",\n    client=QdrantClient(...),\n    aclient=AsyncQdrantClient(...),\n)\n\ngraph_store = Neo4jPropertyGraphStore(\n    username=\"neo4j\",\n    password=\"&lt;password&gt;\",\n    url=\"bolt://localhost:7687\",\n)\n\n# creates an index\nindex = PropertyGraphIndex.from_documents(\n    documents,\n    property_graph_store=graph_store,\n    # optional, neo4j also supports vectors directly\n    vector_store=vector_store,\n    embed_kg_nodes=True,\n)\n\n# load from existing graph/vector store\nindex = PropertyGraphIndex.from_existing(\n    property_graph_store=graph_store,\n    # optional, neo4j also supports vectors directly\n    vector_store=vector_store,\n    embed_kg_nodes=True,\n)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%B1%9E%E6%80%A7%E5%9B%BE%E7%B4%A2%E5%BC%95/#property-graph-store","title":"\u76f4\u63a5\u4f7f\u7528 <code>Property Graph Store</code>","text":"<p>\u5c5e\u6027\u56fe\u7684\u57fa\u672c\u5b58\u50a8\u7c7b\u662f <code>PropertyGraphStore</code>\u3002\u8fd9\u4e9b\u5c5e\u6027\u56fe\u5b58\u50a8\u4f7f\u7528\u4e0d\u540c\u7c7b\u578b\u7684\u5bf9\u8c61\u6784\u5efaLabeledNode\uff0c\u5e76\u4f7f\u7528\u5bf9\u8c61\u8fde\u63a5Relation\u3002</p> <p>\u6211\u4eec\u53ef\u4ee5\u81ea\u5df1\u521b\u9020\u8fd9\u4e9b\uff0c\u4e5f\u53ef\u4ee5\u81ea\u5df1\u63d2\u5165\uff01</p> <p>Python<pre><code>from llama_index.core.graph_stores import (\n    SimplePropertyGraphStore,\n    EntityNode,\n    Relation,\n)\nfrom llama_index.core.schema import TextNode\n\ngraph_store = SimplePropertyGraphStore()\n\nentities = [\n    EntityNode(name=\"llama\", label=\"ANIMAL\", properties={\"key\": \"val\"}),\n    EntityNode(name=\"index\", label=\"THING\", properties={\"key\": \"val\"}),\n]\n\nrelations = [\n    Relation(\n        label=\"HAS\",\n        source_id=entities[0].id,\n        target_id=entities[1].id,\n        properties={},\n    )\n]\n\ngraph_store.upsert_nodes(entities)\ngraph_store.upsert_relations(relations)\n\n# optionally, we can also insert text chunks\nsource_chunk = TextNode(id_=\"source\", text=\"My llama has an index.\")\n\n# create relation for each of our entities\nsource_relations = [\n    Relation(\n        label=\"HAS_SOURCE\",\n        source_id=entities[0].id,\n        target_id=\"source\",\n    ),\n    Relation(\n        label=\"HAS_SOURCE\",\n        source_id=entities[1].id,\n        target_id=\"source\",\n    ),\n]\ngraph_store.upsert_llama_nodes([source_chunk])\ngraph_store.upsert_relations(source_relations)\n</code></pre> \u56fe\u5f62\u5b58\u50a8\u4e0a\u7684\u5176\u4ed6\u6709\u7528\u65b9\u6cd5\u5305\u62ec\uff1a  - <code>graph_store.get(ids=[])</code>  \u6839\u636e id \u83b7\u53d6\u8282\u70b9  - <code>graph_store.get(properties={\"key\": \"val\"})</code>  \u6839\u636e\u5339\u914d\u5c5e\u6027\u83b7\u53d6\u8282\u70b9  - <code>graph_store.get_rel_map([entity_node], depth=2)</code> \u83b7\u53d6\u8fbe\u5230\u4e00\u5b9a\u6df1\u5ea6\u7684\u4e09\u5143\u7ec4  - <code>graph_store.get_llama_nodes(['id1'])</code> \u83b7\u53d6\u539f\u59cb\u6587\u672c\u8282\u70b9  - <code>graph_store.delete(ids=['id1'])</code> \u6839\u636e id \u5220\u9664  - <code>graph_store.delete(properties={\"key\": \"val\"})</code> \u6839\u636e\u5c5e\u6027\u5220\u9664  - <code>graph_store.structured_query(\"&lt;cypher query&gt;\")</code> \u8fd0\u884c\u5bc6\u7801\u67e5\u8be2\uff08\u5047\u8bbe\u56fe\u5f62\u5b58\u50a8\u652f\u6301\u5b83\uff09</p> <p>\u6b64\u5916\uff0c\u6240\u6709\u8fd9\u4e9b\u90fd\u5b58\u5728\u7528\u4e8e\u5f02\u6b65\u652f\u6301\u7684\u7248\u672c\uff08\u5373aget\uff0cadelete\u7b49\u7b49\uff09\u3002</p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%B1%9E%E6%80%A7%E5%9B%BE%E7%B4%A2%E5%BC%95/#_8","title":"\u9ad8\u7ea7\u5b9a\u5236","text":"<p>\u4e0e LlamaIndex \u4e2d\u7684\u6240\u6709\u7ec4\u4ef6\u4e00\u6837\uff0c\u60a8\u53ef\u4ee5\u5bf9\u6a21\u5757\u8fdb\u884c\u5b50\u7c7b\u5316\u5e76\u81ea\u5b9a\u4e49\u5176\u5de5\u4f5c\u65b9\u5f0f\uff0c\u4ee5\u4fbf\u5b8c\u5168\u6309\u7167\u60a8\u7684\u9700\u8981\u5de5\u4f5c\uff0c\u6216\u8005\u5c1d\u8bd5\u65b0\u7684\u60f3\u6cd5\u5e76\u7814\u7a76\u65b0\u7684\u6a21\u5757\uff01</p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%B1%9E%E6%80%A7%E5%9B%BE%E7%B4%A2%E5%BC%95/#_9","title":"\u5b50\u7c7b\u63d0\u53d6\u5668","text":"<p>LlamaIndex \u4e2d\u7684\u56fe\u5f62\u63d0\u53d6\u5668\u662f\u8be5\u7c7b\u7684\u5b50TransformComponent\u7c7b\u3002\u5982\u679c\u60a8\u4ee5\u524d\u4f7f\u7528\u8fc7\u6444\u53d6\u7ba1\u9053\uff0c\u90a3\u4e48\u60a8\u4f1a\u5f88\u719f\u6089\u5b83\uff0c\u56e0\u4e3a\u5b83\u662f\u540c\u4e00\u4e2a\u7c7b\u3002</p> <p>\u63d0\u53d6\u5668\u7684\u8981\u6c42\u662f\u5c06\u56fe\u5f62\u6570\u636e\u63d2\u5165\u5230\u8282\u70b9\u7684\u5143\u6570\u636e\u4e2d\uff0c\u7136\u540e\u7a0d\u540e\u7531\u7d22\u5f15\u8fdb\u884c\u5904\u7406\u3002</p> <p>\u4ee5\u4e0b\u662f\u901a\u8fc7\u5b50\u7c7b\u5316\u521b\u5efa\u81ea\u5b9a\u4e49\u63d0\u53d6\u5668\u7684\u4e00\u4e2a\u5c0f\u4f8b\u5b50\uff1a</p> Python<pre><code>from llama_index.core.graph_store.types import (\n    EntityNode,\n    Relation,\n    KG_NODES_KEY,\n    KG_RELATIONS_KEY,\n)\nfrom llama_index.core.schema import BaseNode, TransformComponent\n\n\nclass MyGraphExtractor(TransformComponent):\n    # the init is optional\n    # def __init__(self, ...):\n    #     ...\n\n    def __call__(\n        self, llama_nodes: list[BaseNode], **kwargs\n    ) -&gt; list[BaseNode]:\n        for llama_node in llama_nodes:\n            # be sure to not overwrite existing entities/relations\n\n            existing_nodes = llama_node.metadata.pop(KG_NODES_KEY, [])\n            existing_relations = llama_node.metadata.pop(KG_RELATIONS_KEY, [])\n\n            existing_nodes.append(\n                EntityNode(\n                    name=\"llama\", label=\"ANIMAL\", properties={\"key\": \"val\"}\n                )\n            )\n            existing_nodes.append(\n                EntityNode(\n                    name=\"index\", label=\"THING\", properties={\"key\": \"val\"}\n                )\n            )\n\n            existing_relations.append(\n                Relation(\n                    label=\"HAS\",\n                    source_id=\"llama\",\n                    target_id=\"index\",\n                    properties={},\n                )\n            )\n\n            # add back to the metadata\n\n            llama_node.metadata[KG_NODES_KEY] = existing_nodes\n            llama_node.metadata[KG_RELATIONS_KEY] = existing_relations\n\n        return llama_nodes\n\n    # optional async method\n    # async def acall(self, llama_nodes: list[BaseNode], **kwargs) -&gt; list[BaseNode]:\n    #    ...\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%B1%9E%E6%80%A7%E5%9B%BE%E7%B4%A2%E5%BC%95/#_10","title":"\u5b50\u68c0\u7d22\u5668","text":"<p>\u68c0\u7d22\u5668\u6bd4\u63d0\u53d6\u5668\u7a0d\u5fae\u590d\u6742\u4e00\u4e9b\uff0c\u5e76\u4e14\u6709\u81ea\u5df1\u7684\u7279\u6b8a\u7c7b\uff0c\u4ee5\u5e2e\u52a9\u66f4\u5bb9\u6613\u5730\u8fdb\u884c\u5b50\u7c7b\u5316\u3002</p> <p>\u68c0\u7d22\u7684\u8fd4\u56de\u7c7b\u578b\u975e\u5e38\u7075\u6d3b\u3002\u5b83\u53ef\u4ee5\u662f  - \u5b57\u7b26\u4e32  - \u4e00\u4e2a <code>TextNode</code>  - \u4e00\u4e2a <code>NodeWithScore</code> \u4e0a\u8ff0\u4e4b\u4e00\u7684\u5217\u8868</p> <p>\u4ee5\u4e0b\u662f\u521b\u5efa\u81ea\u5b9a\u4e49\u68c0\u7d22\u5668\u7684\u5b50\u7c7b\u5316\u7684\u4e00\u4e2a\u5c0f\u4f8b\u5b50\uff1a</p> <p>Python<pre><code>from llama_index.core.indices.property_graph import (\n    CustomPGRetriever,\n    CUSTOM_RETRIEVE_TYPE,\n)\n\n\nclass MyCustomRetriever(CustomPGRetriever):\n    def init(self, my_option_1: bool = False, **kwargs) -&gt; None:\n        \"\"\"Uses any kwargs passed in from class constructor.\"\"\"\n        self.my_option_1 = my_option_1\n        # optionally do something with self.graph_store\n\n    def custom_retrieve(self, query_str: str) -&gt; CUSTOM_RETRIEVE_TYPE:\n        # some some operation with self.graph_store\n        return \"result\"\n\n    # optional async method\n    # async def acustom_retrieve(self, query_str: str) -&gt; str:\n    #     ...\n\n\ncustom_retriever = MyCustomRetriever(graph_store, my_option_1=True)\n\nretriever = index.as_retriever(sub_retrievers=[custom_retriever])\n</code></pre> \u5bf9\u4e8e\u66f4\u590d\u6742\u7684\u5b9a\u5236\u548c\u7528\u4f8b\uff0c\u5efa\u8bae\u68c0\u67e5\u6e90\u4ee3\u7801\u5e76\u76f4\u63a5\u8fdb\u884c\u5b50\u7c7b\u5316BasePGRetriever\u3002</p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%B1%9E%E6%80%A7%E5%9B%BE%E7%B4%A2%E5%BC%95/#_11","title":"\u793a\u4f8b","text":"<p>\u4e0b\u9762\uff0c\u60a8\u53ef\u4ee5\u627e\u5230\u4e00\u4e9b\u793a\u4f8b\u7b14\u8bb0\u672c\uff0c\u5c55\u793a\u4e86PropertyGraphIndex</p> <ul> <li>\u57fa\u672c\u7528\u6cd5</li> <li>\u4f7f\u7528 Neo4j</li> <li>\u4f7f\u7528 Nebula</li> <li>Neo4j \u548c\u672c\u5730\u6a21\u578b\u7684\u9ad8\u7ea7\u7528\u6cd5</li> <li>\u4f7f\u7528\u5c5e\u6027\u56fe\u5b58\u50a8</li> <li>\u521b\u5efa\u81ea\u5b9a\u4e49\u56fe\u5f62\u68c0\u7d22\u5668</li> <li>\u6bd4\u8f83 KG \u8403\u53d6\u5668</li> </ul>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%BC%95%E8%A8%80/","title":"\u5f15\u8a00","text":""},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%BC%95%E8%A8%80/#_1","title":"\u7d22\u5f15","text":""},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%BC%95%E8%A8%80/#_2","title":"\u6982\u5ff5","text":"<p>\u7d22\u5f15 <code>Index</code> \u4e00\u79cd\u6570\u636e\u7ed3\u6784\uff0c\u53ef\u8ba9\u6211\u4eec\u6839\u636e\u7528\u6237\u7684\u67e5\u8be2query\u5feb\u901f\u68c0\u7d22\u5230\u76f8\u5173\u7684\u4e0a\u4e0b\u6587\u3002\u5bf9\u4e8e LlamaIndex \u800c\u8a00\uff0c\u5b83\u662f\u68c0\u7d22\u589e\u5f3a\u751f\u6210 (RAG) \u6838\u5fc3\u6a21\u5757\u3002</p> <p>\u4ece\u9ad8\u5c42\u6b21\u4e0a\u8bb2\uff0cIndexes \u7531\u6587\u6863 <code>Document</code> \u6784\u5efa\u7684\u3002\u7d22\u5f15 <code>Index</code> \u7528\u4e8e\u6784\u5efa\u67e5\u8be2\u5f15\u64ce\u548c\u804a\u5929\u5f15\u64ce \uff0c\u4ece\u800c\u5b9e\u73b0\u5bf9\u6570\u636e\u7684\u95ee\u7b54\u548c\u804a\u5929\u3002</p> <p>\u5728\u5e95\u5c42\uff0c<code>Indexes</code> \u5c06\u6570\u636e\u5b58\u50a8\u5728 <code>Node</code> \u5bf9\u8c61\uff08\u4ee3\u8868\u539f\u59cb\u6587\u6863\u7684\u7247\u6bb5 <code>chunks</code> \uff09\u4e2d\uff0c\u901a\u8fc7\u66b4\u9732\u51fa <code>Retriever</code> \u63a5\u53e3\uff0c\u901a\u8fc7\u8be5\u63a5\u53e3\u652f\u6301\u989d\u5916\u914d\u7f6e\u548c\u81ea\u52a8\u5316\u5904\u7406\u3002</p> <p>\u76ee\u524d\u6700\u5e38\u89c1\u7684\u7d22\u5f15\u662f <code>VectorStoreIndex</code>\uff1b\u6700\u597d\u7684\u5f00\u59cb\u70b9\u4e5f\u662f<code>VectorStoreIndex</code> \u4f7f\u7528\u6587\u6863\u5f00\u59cb\u3002</p> <p>\u5bf9\u4e8e\u5176\u4ed6\u7d22\u5f15\u65b9\u6cd5\uff0c\u8bf7\u67e5\u770b\u6211\u4eec\u7684\u6bcf\u4e2a\u7d22\u5f15\u5982\u4f55\u5de5\u4f5c\u5bf9\u5e94\u7684\u6587\u6863\uff0c\u4ee5\u5e2e\u52a9\u60a8\u786e\u5b9a\u54ea\u4e2a\u7d22\u5f15\u9002\u5408\u60a8\u7684\u7528\u4f8b\u3002</p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%BC%95%E8%A8%80/#_3","title":"\u5176\u4ed6\u6307\u6570\u8d44\u6e90","text":"<p>\u53c2\u89c1\u6a21\u5757\u6307\u5357</p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E5%BC%95%E8%A8%80/#_4","title":"\u53c2\u8003\uff1a","text":"<ol> <li>https://docs.llamaindex.ai/en/stable/module_guides/indexing/</li> </ol>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E6%96%87%E6%A1%A3%E7%AE%A1%E7%90%86/","title":"\u6587\u6863\u7ba1\u7406","text":""},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E6%96%87%E6%A1%A3%E7%AE%A1%E7%90%86/#_1","title":"\u6587\u6863\u7ba1\u7406","text":"<p>\u5927\u591a\u6570 <code>LlamaIndex</code> \u7d22\u5f15\u7ed3\u6784\u5141\u8bb8 \u63d2\u5165\u3001\u5220\u9664\u3001\u66f4\u65b0 \u548c \u5237\u65b0 \u64cd\u4f5c\u3002</p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E6%96%87%E6%A1%A3%E7%AE%A1%E7%90%86/#_2","title":"\u63d2\u5165","text":"<p>\u6211\u4eec\u53ef\u4ee5\u5728\u521d\u59cb\u6784\u5efa\u7d22\u5f15\u540e\u5c06\u65b0\u6587\u6863 \u201c\u63d2\u5165\u201d \u5230\u4efb\u4f55\u7d22\u5f15\u6570\u636e\u7ed3\u6784\u4e2d\u3002\u8be5\u6587\u6863\u5c06\u88ab\u5206\u89e3\u4e3a\u8282\u70b9\u5e76\u88ab\u63d2\u5165\u7d22\u5f15\u4e2d\u3002</p> <p>\u63d2\u5165\u80cc\u540e\u7684\u5e95\u5c42\u673a\u5236\u53d6\u51b3\u4e8e\u7d22\u5f15\u7ed3\u6784\u3002\u4f8b\u5982\uff0c\u5bf9\u4e8e\u6458\u8981\u7d22\u5f15\uff0c\u4f1a\u5c06\u65b0\u6587\u6863\u4f5c\u4e3a\u5217\u8868\u4e2d\u7684\u9644\u52a0\u8282\u70b9\u63d2\u5165\u3002\u5bf9\u4e8e\u5411\u91cf\u5b58\u50a8\u7d22\u5f15\uff0c\u4f1a\u5c06\u65b0\u6587\u6863\uff08\u548c\u5d4c\u5165\uff09\u63d2\u5165\u5230\u5e95\u5c42\u6587\u6863/\u5d4c\u5165\u5b58\u50a8\u4e2d\u3002</p> <p>\u4e0b\u9762\u7ed9\u51fa\u4e86\u4e00\u4e2a\u793a\u4f8b\u4ee3\u7801\u7247\u6bb5\uff1a</p> Python<pre><code>from llama_index.core import SummaryIndex, Document\n\nindex = SummaryIndex([])\ntext_chunks = [\"text_chunk_1\", \"text_chunk_2\", \"text_chunk_3\"]\n\ndoc_chunks = []\nfor i, text in enumerate(text_chunks):\n    doc = Document(text=text, id_=f\"doc_id_{i}\")\n    doc_chunks.append(doc)\n\n# insert\nfor doc_chunk in doc_chunks:\n    index.insert(doc_chunk)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E6%96%87%E6%A1%A3%E7%AE%A1%E7%90%86/#_3","title":"\u5220\u9664","text":"<p>\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u6307\u5b9a <code>document_id</code> \u4ece\u5927\u591a\u6570\u7d22\u5f15\u6570\u636e\u7ed3\u6784\u4e2d \u201c\u5220\u9664\u201d \u6587\u6863\u3002\uff08\u6ce8\u610f\uff1a\u6811\u7d22\u5f15\u76ee\u524d\u4e0d\u652f\u6301\u5220\u9664\uff09\u3002\u4e0e\u6587\u6863\u5bf9\u5e94\u7684\u6240\u6709\u8282\u70b9\u90fd\u5c06\u88ab\u5220\u9664\u3002</p> Python<pre><code>index.delete_ref_doc(\"doc_id_0\", delete_from_docstore=True)\n</code></pre> <p>\u5982\u679c\u60a8\u5728\u4f7f\u7528\u76f8\u540c\u6587\u6863\u5e93\u7684\u7d22\u5f15\u4e4b\u95f4\u5171\u4eab\u8282\u70b9\uff0c<code>delete_from_docstore</code> \u9ed8\u8ba4\u4e3aFalse\u3002\u4f46\u662f\uff0c\u5f53\u8bbe\u7f6e\u4e3aFalse\u65f6\uff0c\u67e5\u8be2\u65f6\u4e0d\u4f1a\u4f7f\u7528\u8fd9\u4e9b\u8282\u70b9\uff0c\u56e0\u4e3a\u5b83\u4eec\u5c06\u4ece <code>index_struct</code> \u7d22\u5f15\u4e2d\u5220\u9664\uff0c\u7d22\u5f15\u4f1a\u8ddf\u8e2a\u54ea\u4e9b\u8282\u70b9\u53ef\u7528\u4e8e\u67e5\u8be2\u3002</p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E6%96%87%E6%A1%A3%E7%AE%A1%E7%90%86/#_4","title":"\u66f4\u65b0","text":"<p>\u5982\u679c\u6587\u6863\u5df2\u5b58\u5728\u4e8e\u7d22\u5f15\u4e2d\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528\u76f8\u540c\u7684\u6587\u6863\u201c\u66f4\u65b0\u201d\u6587\u6863 <code>id_</code>\uff08\u4f8b\u5982\uff0c\u5982\u679c\u6587\u6863\u4e2d\u7684\u4fe1\u606f\u5df2\u66f4\u6539\uff09\u3002</p> Python<pre><code># NOTE: the document has a `doc_id` specified\ndoc_chunks[0].text = \"Brand new document text\"\nindex.update_ref_doc(doc_chunks[0])\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E6%96%87%E6%A1%A3%E7%AE%A1%E7%90%86/#_5","title":"\u5237\u65b0","text":"<p>\u5982\u679c\u60a8\u5728\u52a0\u8f7d\u6570\u636e\u65f6\u8bbe\u7f6e\u6bcf\u4e2a\u6587\u6863\u7684\u6587\u6863 <code>id_</code>\uff0c\u60a8\u8fd8\u53ef\u4ee5\u81ea\u52a8\u5237\u65b0\u7d22\u5f15\u3002</p> <p>\u8be5 <code>refresh()</code> \u51fd\u6570\u53ea\u4f1a\u66f4\u65b0\u5177\u6709\u76f8\u540c <code>doc_id_</code>\uff0c\u4f46\u4e0d\u540c\u6587\u672c\u5185\u5bb9\u7684\u6587\u6863\u3002\u7d22\u5f15\u4e2d\u4e0d\u5b58\u5728\u7684\u4efb\u4f55\u6587\u6863\u4e5f\u5c06\u88ab\u63d2\u5165\u3002</p> <p><code>refresh()</code> \u8fd8\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u5217\u8868\uff0c\u6307\u793a\u8f93\u5165\u4e2d\u7684\u54ea\u4e9b\u6587\u6863\u5df2\u5728\u7d22\u5f15\u4e2d\u5237\u65b0\u3002</p> Python<pre><code># modify first document, with the same doc_id\ndoc_chunks[0] = Document(text=\"Super new document text\", id_=\"doc_id_0\")\n\n# add a new document\ndoc_chunks.append(\n    Document(\n        text=\"This isn't in the index yet, but it will be soon!\",\n        id_=\"doc_id_3\",\n    )\n)\n\n# refresh the index\nrefreshed_docs = index.refresh_ref_docs(doc_chunks)\n\n# refreshed_docs[0] and refreshed_docs[-1] should be true\n</code></pre> <p>\u518d\u6b21\uff0c\u6211\u4eec\u4f20\u9012\u4e86\u4e00\u4e9b\u989d\u5916\u7684 kwargs \u6765\u786e\u4fdd\u6587\u6863\u4ece\u6587\u6863\u5e93\u4e2d\u5220\u9664\u3002\u8fd9\u5f53\u7136\u662f\u53ef\u9009\u7684\u3002</p> <p>\u5982\u679c\u60a8print()\u8f93\u51farefresh()\uff0c\u60a8\u5c06\u770b\u5230\u54ea\u4e9b\u8f93\u5165\u6587\u6863\u5df2\u88ab\u5237\u65b0\uff1a</p> Python<pre><code>print(refreshed_docs)\n# &gt; [True, False, False, True]\n</code></pre> <p>\u5f53\u60a8\u4ece\u4e0d\u65ad\u66f4\u65b0\u65b0\u4fe1\u606f\u7684\u76ee\u5f55\u4e2d\u8bfb\u53d6\u6570\u636e\u65f6\uff0c\u8fd9\u975e\u5e38\u6709\u7528\u3002</p> <p>id_\u82e5\u8981\u5728\u4f7f\u7528\u65f6\u81ea\u52a8\u8bbe\u7f6e\u6587\u6863SimpleDirectoryReader\uff0c\u60a8\u53ef\u4ee5\u8bbe\u7f6efilename_as_id\u6807\u5fd7\u3002\u60a8\u53ef\u4ee5\u4e86\u89e3\u6709\u5173\u81ea\u5b9a\u4e49\u6587\u6863\u7684\u66f4\u591a\u4fe1\u606f\u3002</p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E6%96%87%E6%A1%A3%E7%AE%A1%E7%90%86/#_6","title":"\u6587\u6863\u8ffd\u8e2a","text":"<p>\u4efb\u4f55\u4f7f\u7528\u6587\u6863\u5b58\u50a8\u7684\u7d22\u5f15\uff08\u5373\u9664\u4e86\u5927\u591a\u6570\u5411\u91cf\u5b58\u50a8\u96c6\u6210\u4e4b\u5916\u7684\u6240\u6709\u7d22\u5f15\uff09\uff0c\u60a8\u8fd8\u53ef\u4ee5\u770b\u5230\u5df2\u63d2\u5165\u5230\u6587\u6863\u5b58\u50a8\u4e2d\u7684\u6587\u6863\u3002</p> Python<pre><code>print(index.ref_doc_info)\n\"\"\"\n&gt; {'doc_id_1': RefDocInfo(node_ids=['071a66a8-3c47-49ad-84fa-7010c6277479'], metadata={}),\n   'doc_id_2': RefDocInfo(node_ids=['9563e84b-f934-41c3-acfd-22e88492c869'], metadata={}),\n   'doc_id_0': RefDocInfo(node_ids=['b53e6c2f-16f7-4024-af4c-42890e945f36'], metadata={}),\n   'doc_id_3': RefDocInfo(node_ids=['6bedb29f-15db-4c7c-9885-7490e10aa33f'], metadata={})}\n\"\"\"\n</code></pre> <p>\u8f93\u51fa\u4e2d\u7684\u6bcf\u4e2a\u6761\u76ee\u90fd\u5c06\u6444\u53d6\u7684\u6587\u6863\u663e\u793aid_\u4e3a\u952e\uff0c\u5e76\u5c06\u5176node_ids\u4e0e\u5206\u5272\u6210\u7684\u8282\u70b9\u5173\u8054\u3002</p> <p>metadata\u6700\u540e\uff0c\u8fd8\u4f1a\u8ddf\u8e2a\u6bcf\u4e2a\u8f93\u5165\u6587\u6863\u7684\u539f\u59cb\u8bcd\u5178\u3002\u60a8\u53ef\u4ee5metadata\u5728\u81ea\u5b9a\u4e49\u6587\u6863\u4e2d\u9605\u8bfb\u6709\u5173\u8be5\u5c5e\u6027\u7684\u66f4\u591a\u4fe1\u606f\u3002</p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E7%B4%A2%E5%BC%95%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/","title":"\u7d22\u5f15\u5165\u95e8\u6307\u5357","text":""},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E7%B4%A2%E5%BC%95%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/#_1","title":"\u6bcf\u4e2a\u7d22\u5f15\u7684\u5de5\u4f5c\u539f\u7406","text":"<p>\u672c\u6307\u5357\u901a\u8fc7\u56fe\u8868\u63cf\u8ff0\u4e86\u6bcf\u4e2a\u7d22\u5f15\u5982\u4f55\u5de5\u4f5c\u3002</p> <p>\u4e86\u89e3\u7d22\u5f15\u4e4b\u524d\u9700\u8981\u5b9a\u4e49\u4e00\u4e9b\u672f\u8bed\uff1a</p> <ul> <li><code>Node</code>\uff1a\u5bf9\u5e94\u4e8e <code>Document</code> \u4e2d\u7684\u4e00\u6bb5\u6587\u672c\u3002LlamaIndex \u63a5\u6536 <code>Document</code> \u5bf9\u8c61\u5e76\u5728\u5185\u90e8\u5c06\u5176 \u3010\u89e3\u6790/\u5206\u5757\u3011\u4e3a <code>Node</code> \u5bf9\u8c61\u3002</li> <li>\u54cd\u5e94\u5408\u6210\uff1a\u6211\u4eec\u7684\u6a21\u5757\u6839\u636e\u68c0\u7d22\u5230\u7684\u8282\u70b9\u5408\u6210\u54cd\u5e94\u3002\u60a8\u53ef\u4ee5\u770b\u5230\u5982\u4f55\u6307\u5b9a\u4e0d\u540c\u7684\u54cd\u5e94\u6a21\u5f0f\u3002</li> </ul>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E7%B4%A2%E5%BC%95%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/#_2","title":"\u6458\u8981\u7d22\u5f15\uff08\u4ee5\u524d\u79f0\u4e3a\u5217\u8868\u7d22\u5f15)","text":"<p>\u6458\u8981\u7d22\u5f15\u53ea\u662f\u5c06\u8282\u70b9\u5b58\u50a8\u4e3a\u987a\u5e8f\u94fe\u3002 </p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E7%B4%A2%E5%BC%95%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/#_3","title":"\u67e5\u8be2","text":"<p>\u5728\u67e5\u8be2\u671f\u95f4\uff0c\u5982\u679c\u6ca1\u6709\u6307\u5b9a\u5176\u4ed6\u67e5\u8be2\u53c2\u6570\uff0cLlamaIndex \u53ea\u4f1a\u5c06\u5217\u8868\u4e2d\u7684\u6240\u6709\u8282\u70b9\u52a0\u8f7d\u5230\u6211\u4eec\u7684\u54cd\u5e94\u5408\u6210\u6a21\u5757\u4e2d\u3002 </p> <p>\u6458\u8981\u7d22\u5f15\u65b9\u5f0f\u786e\u5b9e\u63d0\u4f9b\u4e86\u591a\u79cd\u67e5\u8be2\u68c0\u7d22\u5230\u6458\u8981\u7d22\u5f15\u7684\u65b9\u6cd5\uff0c\u4ece\u57fa\u4e8e\u5d4c\u5165\u7684\u67e5\u8be2\uff08\u5c06\u83b7\u53d6\u524d k \u4e2a\u90bb\u5c45\uff09\u6216\u6dfb\u52a0\u5173\u952e\u5b57\u8fc7\u6ee4\u5668\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <p></p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E7%B4%A2%E5%BC%95%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/#_4","title":"\u5411\u91cf\u5b58\u50a8\u7d22\u5f15","text":"<p>\u5411\u91cf\u5b58\u50a8\u7d22\u5f15\u5c06\u6bcf\u4e2a\u8282\u70b9\u548c\u76f8\u5e94\u7684\u5d4c\u5165\u5b58\u50a8\u5728\u5411\u91cf\u6570\u636e\u5e93\u4e2d\u3002</p> <p></p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E7%B4%A2%E5%BC%95%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/#_5","title":"\u67e5\u8be2","text":"<p>\u67e5\u8be2\u4e00\u4e2a\u5411\u91cf\u6570\u636e\u5e93\u4e2d\u7684\u7d22\u5f15\u6d89\u53ca\u68c0\u7d22\u524d k \u4e2a\u6700\u76f8\u4f3c\u7684\u8282\u70b9\uff0c\u5e76\u5c06\u5b83\u4eec\u4f20\u9012\u5230\u6211\u4eec\u7684\u54cd\u5e94\u5408\u6210\u6a21\u5757\u4e2d\u3002</p> <p></p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E7%B4%A2%E5%BC%95%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/#_6","title":"\u6811\u7d22\u5f15","text":"<p>\u6811\u7d22\u5f15\u4ece\u4e00\u7ec4\u8282\u70b9\uff08\u6210\u4e3a\u8be5\u6811\u4e2d\u7684\u53f6\u8282\u70b9\uff09\u6784\u5efa\u4e00\u4e2a\u5c42\u6b21\u6811\u3002</p> <p></p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E7%B4%A2%E5%BC%95%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/#_7","title":"\u67e5\u8be2","text":"<p>\u67e5\u8be2\u6811\u5f62\u7d22\u5f15\u6d89\u53ca\u4ece\u6839\u8282\u70b9\u5411\u4e0b\u904d\u5386\u5230\u53f6\u8282\u70b9\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\uff08child_branch_factor=1\uff09\uff0c\u67e5\u8be2\u5728\u7ed9\u5b9a\u7236\u8282\u70b9\u7684\u60c5\u51b5\u4e0b\u9009\u62e9\u4e00\u4e2a\u5b50\u8282\u70b9\u3002\u5982\u679cchild_branch_factor=2\uff0c\u67e5\u8be2\u6bcf\u7ea7\u9009\u62e9\u4e24\u4e2a\u5b50\u8282\u70b9\u3002 </p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E7%B4%A2%E5%BC%95%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/#_8","title":"\u5173\u952e\u5b57\u8868\u7d22\u5f15","text":"<p>\u5173\u952e\u5b57\u8868\u7d22\u5f15\u4ece\u6bcf\u4e2a\u8282\u70b9\u63d0\u53d6\u5173\u952e\u5b57\uff0c\u6784\u5efa\u4e00\u4e2a\u4ece\u5173\u952e\u5b57\u5230\u8be5\u5173\u952e\u5b57\u5bf9\u5e94\u8282\u70b9\u4e4b\u95f4\u7684\u6620\u5c04\u5173\u7cfb\u3002 </p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E7%B4%A2%E5%BC%95%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/#_9","title":"\u67e5\u8be2","text":"<p>\u5728\u67e5\u8be2\u65f6\uff0c\u6211\u4eec\u4ece\u67e5\u8be2\u4e2d\u63d0\u53d6\u76f8\u5173\u5173\u952e\u5b57\uff0c\u5e76\u5c06\u5176\u4e0e\u9884\u5148\u63d0\u53d6\u7684\u8282\u70b9\u5173\u952e\u5b57\u8fdb\u884c\u5339\u914d\u4ee5\u83b7\u53d6\u76f8\u5e94\u7684\u8282\u70b9\u3002\u63d0\u53d6\u7684\u8282\u70b9\u88ab\u4f20\u9012\u7ed9\u6211\u4eec\u7684\u54cd\u5e94\u5408\u6210\u6a21\u5757\u3002</p> <p></p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E7%B4%A2%E5%BC%95%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/#_10","title":"\u5c5e\u6027\u56fe\u7d22\u5f15","text":"<p>\u5c5e\u6027\u56fe\u7d22\u5f15 \u7684\u5de5\u4f5c\u539f\u7406\u662f\u9996\u5148\u6784\u5efa\u4e00\u4e2a\u5305\u542b \u6807\u8bb0\u8282\u70b9 \u548c \u5173\u7cfb \u7684\u77e5\u8bc6\u56fe\u8c31\u3002\u6b64\u56fe\u8c31\u7684\u6784\u5efa\u9ad8\u5ea6\u53ef\u5b9a\u5236\uff0c\u8303\u56f4\u4e0a\u4ece\u8ba9 LLM \u63d0\u53d6\u5176\u60f3\u8981\u7684\u4efb\u4f55\u5185\u5bb9\uff0c\u5230\u4f7f\u7528\u4e25\u683c\u6a21\u5f0f\u63d0\u53d6\uff0c\u751a\u81f3\u5b9e\u73b0\u6211\u4eec\u81ea\u5df1\u7684\u63d0\u53d6\u6a21\u5757\u3002</p> <p>\u53e6\u5916\uff0c\u8fd8\u53ef\u4ee5\u5d4c\u5165\u8282\u70b9\u4ee5\u4fbf\u7a0d\u540e\u68c0\u7d22\u3002</p> <p>\u60a8\u8fd8\u53ef\u4ee5\u8df3\u8fc7\u521b\u5efa\uff0c\u5e76\u4f7f\u7528 Neo4j \u7b49\u96c6\u6210\u8fde\u63a5\u5230\u73b0\u6709\u77e5\u8bc6\u56fe\u3002</p>"},{"location":"rag/llama_index/components_guides/%E7%B4%A2%E5%BC%95/%E7%B4%A2%E5%BC%95%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/#_11","title":"\u67e5\u8be2","text":"<p>\u67e5\u8be2\u5c5e \u6027\u56fe\u7d22\u5f15 \u4e5f\u975e\u5e38\u7075\u6d3b\u3002\u68c0\u7d22\u901a\u8fc7\u4f7f\u7528\u591a\u4e2a\u5b50\u68c0\u7d22\u5668\u5e76\u5408\u5e76\u7ed3\u679c\u6765\u5b9e\u73b0\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4f7f\u7528 \u3010\u5173\u952e\u5b57 + \u540c\u4e49\u8bcd\u6269\u5c55\u3011\u4ee5\u53ca \u5411\u91cf\u68c0\u7d22\uff08\u5982\u679c\u60a8\u7684\u56fe\u662f\u5d4c\u5165\u7684\uff09\u6765\u68c0\u7d22\u76f8\u5173\u4e09\u5143\u7ec4\u3002</p> <p>\u9664\u4e86\u68c0\u7d22\u5230\u7684\u4e09\u5143\u7ec4\u4e4b\u5916\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u9009\u62e9\u8fd8\u5305\u542b\u6e90\u6587\u672c\uff08\u5bf9\u4e8e\u5728 LlamaIndex \u4e4b\u5916\u521b\u5efa\u7684\u56fe\u8868\u4e0d\u53ef\u7528\uff09\u3002</p> <p>\u66f4\u591a\u5185\u5bb9\u8bf7\u53c2\u9605\u5c5e\u6027\u56fe\u7684\u5b8c\u6574\u6307\u5357\u3002</p>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E5%BC%95%E8%A8%80/","title":"\u5f15\u8a00","text":""},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E5%BC%95%E8%A8%80/#_1","title":"\u8282\u70b9\u89e3\u6790\u5668\u4f7f\u7528\u6a21\u5f0f","text":"<p>\u8282\u70b9\u89e3\u6790\u5668\u662f\u4e00\u79cd\u7b80\u5355\u7684\u62bd\u8c61\uff0c\u5b83\u83b7\u53d6\u6587\u6863\u5217\u8868\uff0c\u5e76\u5c06\u5b83\u4eec \u5206\u5757\u6210Node\u5bf9\u8c61\uff0c\u8fd9\u6837\u6bcf\u4e2a\u8282\u70b9\u90fd\u662f\u7236\u6587\u6863\u7684\u7279\u5b9a\u5757\u3002\u5f53\u6587\u6863\u88ab\u5206\u89e3\u6210\u8282\u70b9\u65f6\uff0c\u5b83\u7684\u6240\u6709\u5c5e\u6027\u90fd\u4f1a\u88ab\u7ee7\u627f\u5230\u5b50\u8282\u70b9\uff08\u5373metadata\u6587\u672c\u548c\u5143\u6570\u636e\u6a21\u677f\u7b49\uff09\u3002\u60a8\u53ef\u4ee5\u5728\u6b64\u5904\u9605\u8bfb\u6709\u5173Node\u548cDocument\u5c5e\u6027\u7684\u66f4\u591a\u4fe1\u606f\u3002</p>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E5%BC%95%E8%A8%80/#_2","title":"\u5165\u95e8","text":""},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E5%BC%95%E8%A8%80/#_3","title":"\u72ec\u7acb\u4f7f\u7528","text":"<p>\u8282\u70b9\u89e3\u6790\u5668\u53ef\u4ee5\u5355\u72ec\u4f7f\u7528\uff1a</p> Python<pre><code>from llama_index.core import Document\nfrom llama_index.core.node_parser import SentenceSplitter\n\nnode_parser = SentenceSplitter(chunk_size=1024, chunk_overlap=20)\n\nnodes = node_parser.get_nodes_from_documents(\n    [Document(text=\"long text\")], show_progress=False\n)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E5%BC%95%E8%A8%80/#_4","title":"\u8f6c\u6362\u7528\u6cd5","text":"<p>\u8282\u70b9\u89e3\u6790\u5668\u53ef\u4ee5\u5305\u542b\u5728\u5177\u6709\u6444\u53d6\u7ba1\u9053\u7684\u4efb\u4f55\u4e00\u7ec4\u8f6c\u6362\u4e2d\u3002</p> Python<pre><code>from llama_index.core import SimpleDirectoryReader\nfrom llama_index.core.ingestion import IngestionPipeline\nfrom llama_index.core.node_parser import TokenTextSplitter\n\ndocuments = SimpleDirectoryReader(\"./data\").load_data()\n\npipeline = IngestionPipeline(transformations=[TokenTextSplitter(), ...])\n\nnodes = pipeline.run(documents=documents)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E5%BC%95%E8%A8%80/#_5","title":"\u7d22\u5f15\u7528\u6cd5","text":"<p>\u5728\u6784\u5efa\u7d22\u5f15\u65f6\uff0c\u5728\u5185\u90e8\u8bbe\u7f6e <code>transformations</code> \u6216\u8005\u5c40\u8bbe\u7f6e\u53ef\u4ee5\u81ea\u52a8\u4f7f <code>.from_documents()</code> \u6784\u5efa\u7d22\u5f15\uff1a</p> Python<pre><code>from llama_index.core import SimpleDirectoryReader, VectorStoreIndex\nfrom llama_index.core.node_parser import SentenceSplitter\n\ndocuments = SimpleDirectoryReader(\"./data\").load_data()\n\n# global\nfrom llama_index.core import Settings\n\nSettings.text_splitter = SentenceSplitter(chunk_size=1024, chunk_overlap=20)\n\n# per-index\nindex = VectorStoreIndex.from_documents(\n    documents,\n    transformations=[SentenceSplitter(chunk_size=1024, chunk_overlap=20)],\n)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E5%BC%95%E8%A8%80/#_6","title":"\u6a21\u5757","text":"<p>\u67e5\u770b\u5b8c\u6574\u7684\u6a21\u5757\u6307\u5357\u3002</p>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/","title":"\u8282\u70b9\u89e3\u6790\u4f7f\u7528\u6a21\u5f0f","text":""},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/#node","title":"Node \u89e3\u6790\u5668\u6a21\u5757","text":""},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/#_1","title":"\u57fa\u4e8e\u6587\u4ef6\u7684\u8282\u70b9\u89e3\u6790\u5668","text":"<p>\u6709\u51e0\u79cd\u57fa\u4e8e\u6587\u4ef6\u7684\u8282\u70b9\u89e3\u6790\u5668\uff0c\u5b83\u4eec\u662f\u6839\u636e\u6b63\u5728\u89e3\u6790\u7684\u5185\u5bb9\u7c7b\u578b\uff08JSON\u3001Markdown \u7b49\uff09\u521b\u5efa\u8282\u70b9\u3002</p> <p>\u6700\u7b80\u5355\u7684\u6d41\u7a0b\u662f\u5c06 <code>SimpleFileNodeParser</code> \u4e0e <code>FlatFileReader</code> \u7ed3\u5408\u8d77\u6765\uff0c\u81ea\u52a8\u4e3a\u6bcf\u79cd\u7c7b\u578b\u7684\u5185\u5bb9\u4f7f\u7528\u6700\u4f73\u8282\u70b9\u89e3\u6790\u5668\u3002\u7136\u540e\uff0c\u60a8\u53ef\u80fd\u5e0c\u671b\u5c06 \u57fa\u4e8e\u6587\u4ef6 \u7684\u8282\u70b9\u89e3\u6790\u5668\u4e0e \u57fa\u4e8e\u6587\u672c \u7684\u8282\u70b9\u89e3\u6790\u5668\u94fe\u63a5\u8d77\u6765\uff0c\u4ee5\u8003\u8651\u6587\u672c\u7684\u5b9e\u9645\u957f\u5ea6\u3002</p>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/#_2","title":"\u7b80\u5355\u6587\u4ef6\u8282\u70b9\u89e3\u6790\u5668","text":"<p>\u718a\u54c8\u54c8\u6ce8</p> <p>\u5728 Llama-index \u4e2d <code>SimpleFileNodeParser</code> \u7528\u4e8e\u89e3\u6790\u6587\u4ef6\u5185\u5bb9\uff0c\u5176\u771f\u6b63\u7684\u5b9e\u73b0\u662f <code>SentenceSplitter</code>\u3002</p> Python<pre><code># from llama_index.core.node_parser import SentenceSplitter as SimpleSentenceSplitter\nfrom llama_index.core.node_parser import SimpleFileNodeParser\nfrom llama_index.readers.file import FlatReader\nfrom pathlib import Path\n\nmd_docs = FlatReader().load_data(Path(\"./test.md\"))\n\nparser = SimpleFileNodeParser()\nmd_nodes = parser.get_nodes_from_documents(md_docs)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/#html","title":"HTML\u8282\u70b9\u89e3\u6790\u5668","text":"<p>\u8be5\u8282\u70b9\u89e3\u6790\u5668\u7528\u4e8e <code>beautifulsoup</code> \u89e3\u6790\u539f\u59cb <code>HTML</code>\u3002</p> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5b83\u5c06\u89e3\u6790\u9009\u5b9a\u7684 HTML \u6807\u7b7e\u5b50\u96c6\uff0c\u4f46\u60a8\u53ef\u4ee5\u8986\u76d6\u6b64\u529f\u80fd\u3002</p> <p>\u9ed8\u8ba4\u6807\u7b7e\u4e3a\uff1a<code>[\"p\", \"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\", \"li\", \"b\", \"i\", \"u\", \"section\"]</code></p> Python<pre><code>from llama_index.core.node_parser import HTMLNodeParser\n\nparser = HTMLNodeParser(tags=[\"p\", \"h1\"])  # optional list of tags\nnodes = parser.get_nodes_from_documents(html_docs)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/#jsonnode","title":"JSONNode\u89e3\u6790\u5668","text":"<p><code>JSONNodeParser</code> \u539f\u59cb JSON\u3002</p> Python<pre><code>from llama_index.core.node_parser import JSONNodeParser\n\nparser = JSONNodeParser()\n\nnodes = parser.get_nodes_from_documents(json_docs)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/#markdown","title":"Markdown\u8282\u70b9\u89e3\u6790\u5668","text":"<p><code>MarkdownNodeParser</code> \u89e3\u6790\u539f\u59cb <code>markdown</code> \u6587\u672c\u3002</p> Python<pre><code>from llama_index.core.node_parser import MarkdownNodeParser\n\nparser = MarkdownNodeParser()\n\nnodes = parser.get_nodes_from_documents(markdown_docs)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/#_3","title":"\u6587\u672c\u5206\u5272\u5668","text":""},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/#_4","title":"\u4ee3\u7801\u5206\u5272\u5668","text":"<p>\u6839\u636e\u7f16\u5199\u8bed\u8a00\u6765\u5206\u5272\u539f\u59cb\u4ee3\u7801\u6587\u672c\u3002</p> <p>\u8bf7\u5728\u6b64\u5904\u67e5\u770b\u652f\u6301\u7684\u8bed\u8a00\u7684\u5b8c\u6574\u5217\u8868\u3002</p> Python<pre><code>from llama_index.core.node_parser import CodeSplitter\n\nsplitter = CodeSplitter(\n    language=\"python\",\n    chunk_lines=40,  # lines per chunk\n    chunk_lines_overlap=15,  # lines overlap between chunks\n    max_chars=1500,  # max chars per chunk\n)\nnodes = splitter.get_nodes_from_documents(documents)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/#langchainnode","title":"LangchainNode\u89e3\u6790\u5668","text":"<p>\u60a8\u8fd8\u53ef\u4ee5\u4f7f\u7528\u8282\u70b9\u89e3\u6790\u5668\u5305\u88c5 langchain \u7684\u6587\u672c\u5206\u5272\u5668\u3002</p> Python<pre><code>from langchain.text_splitter import RecursiveCharacterTextSplitter\nfrom llama_index.core.node_parser import LangchainNodeParser\n\nparser = LangchainNodeParser(RecursiveCharacterTextSplitter())\nnodes = parser.get_nodes_from_documents(documents)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/#sentencesplitter","title":"\u53e5\u5b50\u5206\u5272\u5668 <code>SentenceSplitter</code>","text":"<p>llama_index \u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4f1a\u4ee5 <code>SentenceSplitter</code> \u4f5c\u4e3a\u7684\u5206\u5272\u5668\uff0c\u8be5\u5206\u5272\u5668\u4ee5\u5b8c\u6574\u53e5\u5b50\u4f5c\u4e3a\u5355\u4f4d\u5207\u5272\u6587\u6863 <code>Document</code>\u3002\u5207\u5272\u7684\u8fc7\u7a0b\u4e2d, <code>SentenceSplitter</code> \u9ed8\u8ba4\u4ee5 1024 \u4e2a token \u4f5c\u4e3a\u8fb9\u754c\u8fdb\u884cchunk\u5207\u5206, \u6bcf\u4e2achunk \u5f00\u59cb\u7684\u90e8\u5206\u4f1a\u4e0e\u4e0a\u4e00\u4e2a\u7247\u6bb5 200 \u4e2a token \u7684\u90e8\u5206\u91cd\u53e0\u3002\u5b9e\u9645\u5904\u7406\u7684\u8fc7\u7a0b\u4e2d\u6709\u5f88\u591a\u7ec6\u8282\u9700\u8981\u6ce8\u610f\uff0c\u4ee5\u4e0b\u90e8\u5206\u9488\u5bf9 <code>SentenceSplitter</code> \u7684\u5904\u7406\u8fc7\u7a0b\u8fdb\u884c\u7ec6\u8282\u8bf4\u660e\u3002</p>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/#_5","title":"\u5207\u5272\u53c2\u6570","text":"<p>\u4f7f\u7528 <code>SentenceSplitter</code> \u8fdb\u884c\u5207\u5272\u65f6\u53ef\u4ee5\u914d\u7f6e\u7684\u53c2\u6570\u5982\u4e0b\uff1a</p> Python<pre><code>chunk_size=1024,    # \u5207\u7247 token \u6578\u9650\u5236\nchunk_overlap=200,  # \u5207\u7247\u958b\u982d\u8207\u524d\u4e00\u7247\u6bb5\u5c3e\u7aef\u7684\u91cd\u8907 token \u6578\nparagraph_separator='\\n\\n\\n', # \u6bb5\u843d\u7684\u5206\u754c\nsecondary_chunking_regex='[^,.;\u3002\uff1f\uff01]+[,.;\u3002\uff1f\uff01]?' # \u55ae\u4e00\u53e5\u5b50\u7684\u6a23\u5f0f\nseparator=' ', # \u6700\u5c0f\u5207\u5272\u7684\u5206\u754c\u5b57\u5143\n</code></pre> <p>\u5f53\u7136\u4e5f\u53ef\u4ee5\u5148\u6784\u5efa <code>SentenceSplitter</code> \u7684\u5bf9\u8c61\uff0c\u7136\u540e\u901a\u8fc7 <code>SentenceSplitter</code> \u7684\u5c6c\u6027\u4fee\u6539\u4e0a\u9762\u7684\u53c2\u6570\u3002</p> <p>\u718a\u54c8\u54c8\u6ce8</p> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f, \u6bcf\u4e00\u4e2a\u5207\u7247\u90fd\u4f1a\u4fdd\u5b58\u5143\u6570\u636e <code>metadata</code>\uff0c\u6bcf\u4e00\u4e2a\u5207\u7247\u771f\u6b63\u7684 <code>token</code> \u6570\u76ee\u8981\u51cf\u53bb\u5143\u6570\u636e <code>metadata</code> \u7684token\u6570\uff0c\u624d\u662f\u6587\u672c\u5185\u5bb9\u5bf9\u5e94\u7684 <code>token</code> \u6570\u76ee\u3002\u53ef\u4ee5\u901a\u8fc7\u4f18\u5316 <code>SentenceSplitter</code> \u7684\u4ee3\u7801\u6d88\u9664\u8fd9\u4e2a\u5f71\u54cd\u3002</p> <p>\u4f7f\u7528 <code>SimpleDirectoryReader</code> \u52a0\u8f7d\u5668\u8bfb\u53d6\u6587\u4ef6\u5939\u5185\u7684\u6240\u6709\u6587\u6863\u65f6\uff0c\u5143\u6570\u636e\u7684\u5185\u5bb9\u662f <code>filepath: \u6587\u6863\u8def\u5f84</code>\uff1b\u5982\u679c\u76f4\u63a5\u4f20\u5165\u6587\u6863\u7684\u540d\u79f0\uff0c\u90a3\u4e48\u5143\u6570\u636e <code>metadata</code> \u7684\u5185\u5bb9\u662f <code>filepath: \u7edd\u5bf9\u8def\u5f84</code>\u3002</p>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/#_6","title":"\u5206\u5272\u6b65\u9aa4","text":"<p><code>SentenceSplitter</code> \u5b9e\u9645\u5206\u5272\u7684\u8fc7\u7a0b\u5305\u62ec\u5206\u5272\u4e0e\u5408\u5e76\u4e24\u4e2a\u8fc7\u7a0b\uff1a</p>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/#_7","title":"\u5206\u5272","text":"<ol> <li>\u5982\u679c\u6574\u4e2a\u6587\u6863 <code>Document</code>  token \u6570\u76ee\u5c0f\u4e8e\u76ee\u6807 <code>token</code> \u7684\u6570\u76ee\uff0c\u90a3\u4e48\u4e0d\u8fdb\u884c\u5207\u5206\u3002</li> <li>\u5982\u679c\u6570\u76ee\u5927\u4e8e <code>Document</code> \u7684 token \u5927\u4e8e\u9884\u8bbe\u7684 <code>chunk_size</code> \u6570\u76ee\uff0c\u90a3\u4e48\u9996\u5148\u4f1a\u5c1d\u8bd5\u4ee5 <code>paragraph_separator</code> \u5b57\u7b26\u4e32\u8fdb\u884c\u5206\u6bb5\uff0c\u5f53\u524d\u7684 <code>paragraph_separator</code> \u5b57\u7b26\u4e32\u662f <code>\\n\\n\\n</code>\u3002</li> <li>\u5982\u679c\u5206\u5272\u51fa\u7684\u6bb5\u843d\u7684 <code>token</code> \u8d85\u8fc7 <code>chunk_size</code>, \u90a3\u4e48\u4f7f\u7528 <code>SentenceSplitter</code> \u4e2d\u8bbe\u7f6e\u7684\u5206\u53e5\u51fd\u6570 <code>chunking_tokennizer_fn</code> \u8fdb\u884c\u5206\u53e5\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4f7f\u7528 <code>nltk</code> \u5185\u7f6e\u7684\u5206\u53e5\u51fd\u6570\u8fdb\u884c\u5904\u7406\uff0c\u5bf9\u4e8e\u4e2d\u6587\u6765\u8bf4\u662f\u4e0d\u5408\u9002\u7684\uff0c\u9700\u8981\u989d\u5916\u7684\u4f20\u5165\u5206\u53e5\u7684\u51fd\u6570\u3002</li> <li>\u5982\u679c\u5206\u5272\u51fa\u7684\u5355\u4e00\u53e5\u5b50\u8fd8\u662f\u8d85\u8fc7 <code>token</code> \u6578\u9650\u5236, \u5c31\u7528 <code>secondary_chunking_regex</code> \u5c5e\u6027\u8bbe\u5b9a\u7684\u89c4\u5219\u518d\u6b21\u5207\u5272\u4e3a\u77ed\u7684\u53e5\u5b50\u3002\u5f53\u524d\u7684\u5206\u9694\u7b26\u53f7\u4e3a\uff1a<code>[^,.;\u3002\uff1f\uff01]+[,.;\u3002\uff1f\uff01]?</code>, \u76ee\u524d\u77ed\u7684\u53e5\u5b50\u8fd8\u662f\u5b8c\u6574\u7684\u53e5\u5b50\u3002</li> <li>\u5982\u679c\u77ed\u53e5\u5b50\u8fd8\u662f\u8d85\u8fc7 <code>chunk_size</code> \u9650\u5236, \u5c31\u4f7f\u7528 <code>separator</code> \u5c5e\u6027\u518d\u6b21\u8fdb\u884c\u5207\u5272\uff0c\u5f53\u524d\u7684\u5206\u9694\u7b26\u53f7\u662f\u7a7a\u683c \u3010<code></code>\u3011\u3002</li> <li>\u5982\u679c\u77ed\u53e5\u5b50\u4ecd\u7136\u8d85\u8fc7 <code>chunk_size</code> \u9650\u5236, \u5c31\u4ee5\u5b57\u7b26\u4e3a\u5355\u4f4d\u8fdb\u884c\u5207\u5272\u3002</li> <li>\u6700\u540e\u5207\u5272\u51fa\u6765\u7684\u6bcf\u4e00\u4e2a\u5c0f\u7247\u6bb5\u6210\u4e3a <code>split</code>\u3002\u8fd9\u6837\u5207\u5272\u51fa\u6765\u7684\u65b9\u6cd5\uff0c\u53ef\u4ee5\u4fdd\u7559\u5b8c\u6574\u7684\u6bb5\u843d\uff0c\u6216\u8005\u662f\u5b8c\u6574\u7684\u53e5\u5b50\u3002\u8fd9\u6837\u5207\u5272\u51fa\u6765\u53ef\u4ee5\u4fdd\u7559\u5b8c\u6574\u7684\u8bed\u4e49\u4fe1\u606f\uff0c\u53ea\u6709\u5728\u4e0d\u5f97\u5df2\u7684\u60c5\u51b5\u4e0b\uff0c\u624d\u4f1a\u628a\u53e5\u5b50\u7684\u8bed\u4e49\u5207\u5272\u5206\u9694\u5f00\u6765\u3002</li> </ol>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/#_8","title":"\u5408\u5e76","text":"<ol> <li>\u6bcf\u4e00\u4e2a <code>split</code> \u548c\u4e0e\u4e0b\u4e00\u4e2a <code>split</code> \u8fdb\u884c\u5408\u5e76, \u76f4\u5230\u5408\u5e76\u5e76\u8d85\u8fc7 <code>chunk_size</code> \u9650\u5236\uff0c\u5408\u5e76\u4e4b\u540e\u6574\u7406\u4e3a\u4e00\u4e2a <code>chunk</code>\u3002</li> <li>\u5728\u7b2c\u4e8c\u4e2a <code>chunk</code> \u7684\u5f00\u59cb\uff0c\u4f1a\u4ece\u4e0a\u4e00\u4e2a <code>chunk</code> \u6700\u540e\u4e00\u4e2a <code>split</code> \u5f00\u59cb\uff0c\u5f80\u56de\u5408\u5e76 <code>split</code>\uff0c\u4e00\u76f4\u5230 <code>split</code> \u7684 token \u7684\u6570\u76ee\u8d85\u8fc7 <code>overlap</code>\u4e3a\u6b62\u3002\u8fd9\u90e8\u5206\u7684 <code>split</code> \u4f1a\u653e\u5728\u4e0b\u4e00\u4e2a <code>chunk</code> \u7684\u5f00\u59cb\u90e8\u5206\uff0c\u4e5f\u5c31\u662f\u9664\u4e86\u7b2c\u4e00\u4e2a <code>chunk</code> \u5916\uff0c\u6bcf\u4e00\u4e2a <code>chunk</code> \u90fd\u4f1a\u4e0e\u524d\u4e00\u4e2a <code>chunk</code> \u7684\u5c3e\u90e8\u7684 <code>split</code> \u5185\u5bb9\u91cd\u53e0\u3002</li> <li>\u6bcf\u4e00\u4e2a\u65b0\u7684 <code>chunk</code> \u9664\u4e86\u91cd\u590d\u524d\u4e00\u4e2a <code>chunk</code> \u7684\u90e8\u5206\u5916\uff0c\u81f3\u5c11\u4f1a\u628a\u4e0b\u4e00\u4e2a <code>split</code> \u7684\u52a0\u5165\u5230\u5f53\u524d\u7684 <code>chunk</code>\uff0c\u4e0d\u8bba\u662f\u5426\u4f1a\u8d85\u8fc7 <code>chunk_size</code> \u7684\u9650\u5236\u3002</li> <li>\u8fd9\u6837\u5408\u5e76\u5b8c\u7684\u7ed3\u679c\uff0c\u5c31\u662f\u4f1a\u5c3d\u53ef\u80fd\u4ee5\u8bed\u4e49\u5b8c\u6574\u7684\u4f4d\u7f6e\u5207\u5272\u51fa\u6700\u957f\u7684\u7247\u6bb5, \u800c\u4e14\u6bcf\u4e2a\u7247\u6bb5\u90fd\u5f00\u5934\u90fd\u6db5\u76d6\u524d\u4e00\u4e2a\u7247\u6bb5\u7684\u5c3e\u7aef\u5185\u5bb9, \u4fdd\u7559\u524d\u540e\u6587\u7684\u8109\u7edc\u3002</li> </ol> <p>\u718a\u54c8\u54c8\u6ce8</p> <p>\u6700\u540e\u5207\u5272\u51fa\u6765\u7684\u6bcf\u4e00\u4e2a\u5c0f\u7247\u6bb5 <code>chunk</code> \u6210\u4e3a <code>TextNode</code> \u5bf9\u8c61, \u5728<code>TextNode</code> \u4e2d\u9664\u4e86\u4fdd\u7559 \u6587\u5b57\u7247\u6bb5 \u4ee5\u5916, \u8fd8\u6709\u5f53\u524d\u6587\u6863\u7684\u4e00\u4e9b \u5143\u6570\u636e\u3001\u8be5\u6587\u672c\u5728\u6574\u4e2a\u6587\u6863\u4e2d\u7684 \u8d77\u59cb\u70b9 \u4f4d\u7f6e\u4fe1\u606f\u7b49\u3002</p>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/#_9","title":"\u793a\u4f8b\u4ee3\u7801","text":"<p>\u5c1d\u8bd5 <code>SentenceSplitter</code> \u5728\u5c0a\u91cd\u53e5\u5b50\u754c\u9650\u7684\u540c\u65f6\u5206\u5272\u6587\u672c\u3002</p> Python<pre><code>from llama_index.core.node_parser import SentenceSplitter\n\nsplitter = SentenceSplitter(\n    chunk_size=1024,\n    chunk_overlap=20,\n)\nnodes = splitter.get_nodes_from_documents(documents)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/#_10","title":"\u53c2\u8003\uff1a","text":"<ol> <li>https://hackmd.io/@meebox/HJNuQ_YRa?utm_source=preview-mode&amp;utm_medium=rec</li> </ol>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/#_11","title":"\u53c2\u8003","text":""},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/#_12","title":"\u53e5\u5b50\u7a97\u53e3\u8282\u70b9\u89e3\u6790\u5668","text":"<p>\u4e0e\u5176\u4ed6\u8282\u70b9\u89e3\u6790\u5668\u7c7b\u4f3c <code>SentenceWindowNodeParser</code>\uff0c\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\u5b83\u5c06\u6240\u6709\u6587\u6863\u62c6\u5206\u4e3a\u5355\u4e2a\u53e5\u5b50\u3002\u751f\u6210\u7684\u8282\u70b9\u8fd8\u5305\u542b\u5143\u6570\u636e\u4e2d\u6bcf\u4e2a\u8282\u70b9\u5468\u56f4\u7684\u53e5\u5b50\u201c\u7a97\u53e3\u201d\u3002\u8bf7\u6ce8\u610f\uff0c\u6b64\u5143\u6570\u636e\u5bf9 LLM \u6216\u5d4c\u5165\u6a21\u578b\u4e0d\u53ef\u89c1\u3002</p> <p>\u8fd9\u5bf9\u4e8e\u751f\u6210\u5177\u6709\u975e\u5e38\u7279\u5b9a\u8303\u56f4\u7684\u5d4c\u5165\u975e\u5e38\u6709\u7528\u3002\u7136\u540e\uff0c\u7ed3\u5408 <code>MetadataReplacementNodePostProcessor</code>\uff0c\u60a8\u53ef\u4ee5\u5728\u5c06\u8282\u70b9\u53d1\u9001\u5230 LLM \u4e4b\u524d\u7528\u5176\u5468\u56f4\u7684\u4e0a\u4e0b\u6587\u66ff\u6362\u53e5\u5b50\u3002</p> <p>\u4e0b\u9762\u662f\u4f7f\u7528\u9ed8\u8ba4\u8bbe\u7f6e\u8bbe\u7f6e\u89e3\u6790\u5668\u7684\u793a\u4f8b\u3002\u5b9e\u9645\u4e0a\uff0c\u60a8\u901a\u5e38\u53ea\u60f3\u8c03\u6574\u53e5\u5b50\u7684\u7a97\u53e3\u5927\u5c0f\u3002</p> Python<pre><code>from llama_index.core.node_parser import SentenceWindowNodeParser\n\nnode_parser = SentenceWindowNodeParser.from_defaults(\n    # how many sentences on either side to capture\n    window_size=3,\n    # the metadata key that holds the window of surrounding sentences\n    window_metadata_key=\"window\",\n    # the metadata key that holds the original sentence\n    original_text_metadata_key=\"original_sentence\",\n)\n</code></pre> <p>\u7ed3\u5408 <code>MetadataReplacementNodePostProcessor</code> \u53ef\u4ee5\u5728\u6b64\u5904\u627e\u5230\u5b8c\u6574\u7684\u793a\u4f8b\u3002</p>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/#_13","title":"\u8bed\u4e49\u5206\u5272\u8282\u70b9\u89e3\u6790\u5668","text":"<p>\u3010\u8bed\u4e49\u5206\u5757\u3011\u662f Greg Kamradt \u5728\u4ed6\u7684\u5173\u4e8e 5 \u4e2aembedding\u5206\u5757\u65b9\u6cd5\u4e2d\u63d0\u51fa\u7684\u4e00\u4e2a\u65b0\u6982\u5ff5\uff0c\u89c6\u9891\u5730\u5740\uff1ahttps://youtu.be/8OJC21T2SL4?t=1933</p> <p>\u8bed\u4e49\u5206\u5272\u5668\u4e0d\u4f1a\u4f7f\u7528\u56fa\u5b9a\u7684\u5757\u5927\u5c0f\u5bf9\u6587\u672c\u8fdb\u884c\u5206\u5757\uff0c\u800c\u662f \u4f7f\u7528\u5d4c\u5165\u76f8\u4f3c\u6027\u81ea\u9002\u5e94\u5730\u9009\u62e9\u53e5\u5b50\u4e4b\u95f4\u7684\u65ad\u70b9\u3002\u8fd9\u786e\u4fdd\u4e86\u201c\u5757\u201d\u5305\u542b\u8bed\u4e49\u4e0a\u76f8\u4e92\u76f8\u5173\u7684\u53e5\u5b50\u3002</p> <p>!!! \u6ce8\u610f\u4e8b\u9879\uff1a     * \u8be5\u6b63\u5219\u8868\u8fbe\u5f0f\u4e3b\u8981\u9002\u7528\u4e8e\u82f1\u8bed\u53e5\u5b50     * \u53ef\u80fd\u9700\u8981\u8c03\u6574\u65ad\u70b9\u767e\u5206\u4f4d\u9608\u503c\u3002</p> Python<pre><code>from llama_index.core.node_parser import SemanticSplitterNodeParser\nfrom llama_index.embeddings.openai import OpenAIEmbedding\n\nembed_model = OpenAIEmbedding()\nsplitter = SemanticSplitterNodeParser(\n    buffer_size=1, breakpoint_percentile_threshold=95, embed_model=embed_model\n)\n</code></pre> <p>\u5b8c\u6574\u7684\u793a\u4f8b\u53ef\u5728\u6211\u4eec\u7684\u4f7f\u7528\u6307\u5357SemanticSplitterNodeParser\u4e2d\u627e\u5230\u3002</p>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/#token-tokentextsplitter","title":"\u57fa\u4e8e token \u7684\u5206\u5272\u5668 <code>TokenTextSplitter</code>","text":"<p><code>TokenTextSplitter</code> \u57fa\u4e8e Token \u8fdb\u884c\u5206\u5272\uff0c\u901a\u5e38\u4e0e\u8bed\u8a00\u6a21\u578b\u7684\u8f93\u5165\u7ed3\u6784\u76f8\u7ed3\u5408\u3002\u7528\u6237\u53ef\u4ee5\u6307\u5b9a\u6bcf\u4e2a\u7247\u6bb5\u7684\u6700\u5927Token\u6570\u3002</p> <p>\u5728 llama-index \u4e2d\u4e0e langchain \u4e2d\u7684 token \u5207\u5206\u65b9\u5f0f\u662f\u4e0d\u4e00\u6837\u7684\u3002 * llama-index \u4e2d\u4f7f\u7528\u7a7a\u683c\uff0c\u6362\u884c\u7b26\uff0c\u5b57\u7b26\u7c92\u5ea6\u8fdb\u884c\u5206\u8bcd\u3002 * langchain \u4e2dopenai \u7684tiktoken \u8fdb\u884c\u5206\u8bcd\u3002</p> <ul> <li>\u4f18\u7f3a\u70b9</li> <li>\u4f18\u70b9\uff1a<ul> <li>\u9002\u5408\u5927\u591a\u6570\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4efb\u52a1\uff0c\u53ef\u4ee5\u6709\u6548\u4fdd\u7559\u4e0a\u4e0b\u6587\u4fe1\u606f\u3002</li> <li>\u5206\u5272\u540e\u7684\u7247\u6bb5\u5927\u5c0f\u66f4\u7b26\u5408\u6a21\u578b\u7684\u8f93\u5165\u8981\u6c42\u3002</li> </ul> </li> <li> <p>\u7f3a\u70b9\uff1a</p> <ul> <li>\u5bf9\u4e8e\u975e\u82f1\u8bed\u6587\u672c\u6216\u7279\u5b9a\u9886\u57df\u6587\u672c\uff0cToken\u5316\u6548\u679c\u53ef\u80fd\u4e0d\u4f73\u3002</li> <li>\u9700\u8981\u6839\u636e\u6a21\u578b\u7684Token\u9650\u5236\u8fdb\u884c\u8c03\u6574\u3002</li> </ul> </li> <li> <p>\u9002\u7528\u573a\u666f\uff1a\u9002\u5408\u4e0e\u5927\u8bed\u8a00\u6a21\u578b\u914d\u5408\u4f7f\u7528\u7684\u573a\u666f\uff0c\u7279\u522b\u662f\u9700\u8981\u9ad8\u4fdd\u771f\u5ea6\u7684\u8bed\u4e49\u89e3\u6790\u65f6\u3002</p> </li> </ul> Python<pre><code>from llama_index.core.node_parser import TokenTextSplitter\n\nsplitter = TokenTextSplitter(\n    chunk_size=1024,\n    chunk_overlap=20,\n    separator=\" \",\n)\nnodes = splitter.get_nodes_from_documents(documents)\n</code></pre>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/#_14","title":"\u53c2\u8003\uff1a","text":"<ol> <li>https://ithelp.ithome.com.tw/articles/10326395</li> <li>https://developer.aliyun.com/article/1628078</li> </ol>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/#_15","title":"\u57fa\u4e8e\u5173\u7cfb\u7684\u8282\u70b9\u89e3\u6790\u5668","text":""},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/#_16","title":"\u5c42\u6b21\u8282\u70b9\u89e3\u6790\u5668","text":"<p>\u6b64\u8282\u70b9\u89e3\u6790\u5668\u5c06\u628a\u8282\u70b9\u5206\u5757\u4e3a\u5206\u5c42\u8282\u70b9\u3002\u8fd9\u610f\u5473\u7740\u5355\u4e2a\u8f93\u5165\u5c06\u88ab\u5206\u5757\u4e3a\u591a\u4e2a\u5757\u5927\u5c0f\u7684\u5c42\u6b21\u7ed3\u6784\uff0c\u6bcf\u4e2a\u8282\u70b9\u90fd\u5305\u542b\u5bf9\u5176\u7236\u8282\u70b9\u7684\u5f15\u7528\u3002</p> <p>\u4e0e <code>AutoMergingRetriever</code> \u7ed3\u5408\u4f7f\u7528\u65f6\uff0c\u8fd9\u4f7f\u6211\u4eec\u80fd\u591f\u5728\u68c0\u7d22\u5230\u5927\u591a\u6570\u5b50\u8282\u70b9\u65f6\u81ea\u52a8\u7528\u7236\u8282\u70b9\u66ff\u6362\u68c0\u7d22\u5230\u7684\u8282\u70b9\u3002\u6b64\u8fc7\u7a0b\u4e3a LLM \u63d0\u4f9b\u4e86\u66f4\u5b8c\u6574\u7684\u54cd\u5e94\u5408\u6210\u4e0a\u4e0b\u6587\u3002</p> Python<pre><code>from llama_index.core.node_parser import HierarchicalNodeParser\n\nnode_parser = HierarchicalNodeParser.from_defaults(\n    chunk_sizes=[2048, 512, 128]\n)\n</code></pre> <p>\u7ed3\u5408 <code>AutoMergingRetriever</code> \u53ef\u4ee5\u5728\u6b64\u5904\u627e\u5230\u5b8c\u6574\u7684\u793a\u4f8b\u3002</p>"},{"location":"rag/llama_index/components_guides/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%96%87%E6%A1%A3%E5%88%87%E5%88%86/%E8%8A%82%E7%82%B9%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97/#_17","title":"\u53c2\u8003","text":"<ol> <li>https://baoyu.io/translations/rag/5-levels-of-text-splitting#google_vignette</li> <li>https://www.aneasystone.com/archives/2024/06/advanced-rag-notes.html</li> </ol>"},{"location":"rag/llama_index/learn/%E6%9E%84%E5%BB%BARAG%E7%9A%84%E6%B5%81%E7%A8%8B/LlamaIndex%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83/","title":"LlamaHub\u6ce8\u518c\u4e2d\u5fc3","text":""},{"location":"rag/llama_index/learn/%E6%9E%84%E5%BB%BARAG%E7%9A%84%E6%B5%81%E7%A8%8B/LlamaIndex%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83/#llamaindex","title":"LlamaIndex \u6ce8\u518c\u4e2d\u5fc3","text":"<p>\u6211\u4eec\u7684\u6570\u636e\u8fde\u63a5\u5668\u901a\u8fc7 LlamaHub \ud83e\udd99\u63d0\u4f9b\u3002LlamaHub \u5305\u542b\u5f00\u6e90\u6570\u636e\u8fde\u63a5\u5668\u6ce8\u518c\u8868\uff0c\u60a8\u53ef\u4ee5\u8f7b\u677e\u5730\u5c06\u5176\u63d2\u5165\u4efb\u4f55 LlamaIndex \u5e94\u7528\u7a0b\u5e8f\uff08\u4ee5\u53ca\u4ee3\u7406\u5de5\u5177\u548c Llama \u5305\uff09\u3002</p>"},{"location":"rag/llama_index/learn/%E6%9E%84%E5%BB%BARAG%E7%9A%84%E6%B5%81%E7%A8%8B/LlamaIndex%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83/#_1","title":"\u4f7f\u7528\u6a21\u5f0f","text":"<p>\u5f00\u59cb\u4f7f\u7528\uff1a</p> Python<pre><code>from llama_index.core import download_loader\n\nfrom llama_index.readers.google import GoogleDocsReader\n\nloader = GoogleDocsReader()\ndocuments = loader.load_data(document_ids=[...])\n</code></pre>"},{"location":"rag/llama_index/learn/%E6%9E%84%E5%BB%BARAG%E7%9A%84%E6%B5%81%E7%A8%8B/LlamaIndex%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83/#simpledirectoryreader","title":"\u5185\u7f6e\u52a0\u8f7d\u5668\uff1aSimpleDirectoryReader","text":"<p><code>SimpleDirectoryReader</code> \u53ef\u4ee5\u652f\u6301\u89e3\u6790\u591a\u79cd\u6587\u4ef6\u7c7b\u578b\uff0c\u5305\u62ec <code>.md</code>,<code>.pdf</code>, <code>.jpq</code>, <code>.png</code>, <code>.docx</code> \u4ee5\u53ca\u97f3\u9891\u548c\u89c6\u9891\u7c7b\u578b\u3002\u5b83\u53ef\u76f4\u63a5\u4f5c\u4e3a LlamaIndex \u7684\u4e00\u90e8\u5206\u4f7f\u7528</p> Python<pre><code>from llama_index.core import SimpleDirectoryReader\n\ndocuments = SimpleDirectoryReader(\"./data\").load_data()\n</code></pre>"},{"location":"rag/llama_index/learn/%E6%9E%84%E5%BB%BARAG%E7%9A%84%E6%B5%81%E7%A8%8B/LlamaIndex%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83/#_2","title":"\u53ef\u7528\u8fde\u63a5\u5668","text":"<p>\u76f4\u63a5\u6d4f\u89c8 LlamaHub\u5373\u53ef\u67e5\u770b\u6570\u767e\u79cd\u53ef\u7528\u7684\u8fde\u63a5\u5668\uff0c\u5176\u4e2d\u5305\u62ec\uff1a</p> <ul> <li>Notion( NotionPageReader)</li> <li>Google Docs( GoogleDocsReader)</li> <li>Slack( SlackReader)</li> <li>Discord( DiscordReader)</li> <li>Apify Actors\uff08ApifyActor\uff09\u3002\u53ef\u4ee5\u6293\u53d6\u7f51\u7edc\u3001\u6293\u53d6\u7f51\u9875\u3001\u63d0\u53d6\u6587\u672c\u5185\u5bb9\u3001\u4e0b\u8f7d\u6587\u4ef6\uff0c\u5305\u62ec <code>.pdf</code>, <code>.jpg</code>, <code>.png</code>, <code>.docx</code> \u7b49\u3002</li> </ul>"},{"location":"rag/llama_index/learn/%E6%9E%84%E5%BB%BARAG%E7%9A%84%E6%B5%81%E7%A8%8B/%E5%8A%A0%E8%BD%BD%E5%92%8C%E6%8F%90%E5%8F%96%E6%95%B0%E6%8D%AE/","title":"\u52a0\u8f7d\u6570\u636e\uff08\u63d0\u53d6\uff09","text":"<p>\u5728\u6211\u4eec\u9009\u62e9\u7684 LLM \u5bf9\u6211\u4eec\u7684\u539f\u59cb\u6570\u636e\u8fdb\u884c\u5904\u7406\u4e4b\u524d\uff0c\u6211\u4eec\u9996\u5148\u9700\u8981\u5bf9\u539f\u59cb\u6570\u636e\u8fdb\u884c\u7b80\u5355\u5904\u7406\u5e76\u52a0\u8f7d\u539f\u59cb\u6570\u636e\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u7c7b\u4f3c\u4e8e ML \u4e16\u754c\u4e2d\u7684\u6570\u636e\u6e05\u7406/\u7279\u5f81\u5de5\u7a0b\u6d41\u7a0b\uff0c\u6216\u4f20\u7edf\u6570\u636e\u8bbe\u7f6e\u4e2d\u7684 ETL \u7ba1\u9053\u3002</p> <p>\u6570\u636e\u63d0\u53d6\u6d41\u7a0b\u901a\u5e38\u7531\u4e09\u4e2a\u4e3b\u8981\u9636\u6bb5\u7ec4\u6210\uff1a</p> <ul> <li>\u52a0\u8f7d\u6570\u636e</li> <li>\u8f6c\u6362\u6570\u636e</li> <li>\u7d22\u5f15\u5e76\u5b58\u50a8\u6570\u636e</li> </ul> <p>\u6211\u4eec\u5c06\u5728\u540e\u7eed\u7ae0\u8282\u4e2d\u4ecb\u7ecd\u7d22\u5f15/\u5b58\u50a8\u3002\u5728\u672c\u5c0f\u8282\u4e2d\uff0c\u6211\u4eec\u4e3b\u8981\u8ba8\u8bba\u52a0\u8f7d\u5668\u548c\u8f6c\u6362\u8fc7\u7a0b\u3002</p>"},{"location":"rag/llama_index/learn/%E6%9E%84%E5%BB%BARAG%E7%9A%84%E6%B5%81%E7%A8%8B/%E5%8A%A0%E8%BD%BD%E5%92%8C%E6%8F%90%E5%8F%96%E6%95%B0%E6%8D%AE/#_2","title":"\u52a0\u8f7d\u5668","text":"<p>\u5728\u6211\u4eec\u9009\u62e9\u7684 LLM \u5bf9\u6211\u4eec\u7684\u539f\u59cb\u6570\u636e\u8fdb\u884c\u5904\u7406\u4e4b\u524d\uff0c\u6211\u4eec\u9700\u8981\u52a0\u8f7d\u539f\u59cb\u6570\u636e\u3002LlamaIndex \u6267\u884c\u6b64\u64cd\u4f5c\u7684\u65b9\u5f0f\u662f\u901a\u8fc7 \u6570\u636e\u8fde\u63a5\u5668\uff08\u4e5f\u79f0\u4e3a <code>Reader</code> \uff09\u3002\u6570\u636e\u8fde\u63a5\u5668 \u4ece\u4e0d\u540c\u7684\u6570\u636e\u6e90\u63d0\u63d0\u53d6\u6570\u636e\u5e76\u5c06\u6570\u636e\u683c\u5f0f\u5316\u4e3a <code>Document</code> \u5bf9\u8c61\u3002<code>Document</code> \u662f\u6570\u636e\u548c\u6709\u5173\u8be5\u6570\u636e\u7684\u5143\u6570\u636e\u7684\u96c6\u5408\u3002</p>"},{"location":"rag/llama_index/learn/%E6%9E%84%E5%BB%BARAG%E7%9A%84%E6%B5%81%E7%A8%8B/%E5%8A%A0%E8%BD%BD%E5%92%8C%E6%8F%90%E5%8F%96%E6%95%B0%E6%8D%AE/#simpledirectoryreader","title":"\u4f7f\u7528 <code>SimpleDirectoryReader</code> \u52a0\u8f7d","text":"<p>\u6700\u5bb9\u6613\u4f7f\u7528\u7684\u52a0\u8f7d\u5668\u662f <code>SimpleDirectoryReader</code>\uff0c\u5b83\u53ef\u4ee5\u4ece\u7ed9\u5b9a\u76ee\u5f55\u4e2d\u7684 \u6bcf\u4e2a\u6587\u4ef6 \u521b\u5efa\u6587\u6863 <code>Document</code> \u5bf9\u8c61\u3002\u5b83\u5185\u7f6e\u4e8e LlamaIndex \u4e2d\uff0c\u53ef\u4ee5\u8bfb\u53d6\u5404\u79cd\u683c\u5f0f\uff0c\u5305\u62ec <code>Markdown</code>\u3001<code>PDF</code>\u3001<code>Word</code> \u6587\u6863\u3001<code>PowerPoint</code> \u6f14\u793a\u6587\u7a3f\u3001\u56fe\u50cf\u3001\u97f3\u9891\u548c\u89c6\u9891\u3002</p> Python<pre><code>from llama_index.core import SimpleDirectoryReader\n\ndocuments = SimpleDirectoryReader(\"./data\").load_data()\n</code></pre>"},{"location":"rag/llama_index/learn/%E6%9E%84%E5%BB%BARAG%E7%9A%84%E6%B5%81%E7%A8%8B/%E5%8A%A0%E8%BD%BD%E5%92%8C%E6%8F%90%E5%8F%96%E6%95%B0%E6%8D%AE/#llamahub","title":"\u4f7f\u7528 LlamaHub \u7684\u9605\u8bfb\u5668","text":"<p>\u7531\u4e8e\u83b7\u53d6\u6570\u636e\u7684\u5730\u65b9\u592a\u591a\uff0c\u56e0\u6b64\u5e76\u975e\u6240\u6709\u6570\u636e\u90fd\u5185\u7f6e\u3002\u76f8\u53cd\uff0c\u60a8\u53ef\u4ee5\u4ece\u6211\u4eec\u7684\u6570\u636e\u8fde\u63a5\u5668\u6ce8\u518c\u4e2d\u5fc3 <code>LlamaHub</code> \u4e0b\u8f7d\u5b83\u4eec\u3002</p> <p>\u5728\u6b64\u793a\u4f8b\u4e2d\uff0cLlamaIndex \u4e0b\u8f7d\u5e76\u5b89\u88c5\u540d\u4e3a <code>DatabaseReader</code> \u7684\u8fde\u63a5\u5668\uff0c\u8be5\u8fde\u63a5\u5668\u9488\u5bf9 SQL \u6570\u636e\u5e93\u8fd0\u884c\u67e5\u8be2\u5e76\u5c06\u7ed3\u679c\u7684\u6bcf\u4e00\u884c\u8fd4\u56de\u4e3aDocument\uff1a</p> Python<pre><code>from llama_index.core import download_loader\n\nfrom llama_index.readers.database import DatabaseReader\n\nreader = DatabaseReader(\n    scheme=os.getenv(\"DB_SCHEME\"),\n    host=os.getenv(\"DB_HOST\"),\n    port=os.getenv(\"DB_PORT\"),\n    user=os.getenv(\"DB_USER\"),\n    password=os.getenv(\"DB_PASS\"),\n    dbname=os.getenv(\"DB_NAME\"),\n)\n\nquery = \"SELECT * FROM users\"\ndocuments = reader.load_data(query=query)\n</code></pre> <p>LlamaHub\u4e0a\u6709\u6570\u767e\u79cd\u8fde\u63a5\u5668\u53ef\u4f9b\u4f7f\u7528\uff01</p>"},{"location":"rag/llama_index/learn/%E6%9E%84%E5%BB%BARAG%E7%9A%84%E6%B5%81%E7%A8%8B/%E5%8A%A0%E8%BD%BD%E5%92%8C%E6%8F%90%E5%8F%96%E6%95%B0%E6%8D%AE/#_3","title":"\u76f4\u63a5\u521b\u5efa\u6587\u6863","text":"<p>\u9664\u4e86\u4f7f\u7528\u52a0\u8f7d\u5668\u4e4b\u5916\uff0c\u60a8\u8fd8\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 <code>Document</code>\u3002</p> Python<pre><code>from llama_index.core import Document\n\ndoc = Document(text=\"text\")\n</code></pre>"},{"location":"rag/llama_index/learn/%E6%9E%84%E5%BB%BARAG%E7%9A%84%E6%B5%81%E7%A8%8B/%E5%8A%A0%E8%BD%BD%E5%92%8C%E6%8F%90%E5%8F%96%E6%95%B0%E6%8D%AE/#_4","title":"\u6570\u636e\u8f6c\u6362","text":"<p>\u52a0\u8f7d\u6570\u636e\u540e\uff0c\u60a8\u9700\u8981\u5904\u7406\u548c\u8f6c\u6362\u6570\u636e\uff0c\u7136\u540e\u5c06\u5176\u653e\u5165\u5b58\u50a8\u7cfb\u7edf\u3002\u8fd9\u4e9b\u8f6c\u6362\u5305\u62ec \u5206\u5757\u3001\u63d0\u53d6\u5143\u6570\u636e \u548c \u5bf9\u6bcf\u4e2a\u5757\u63d0\u53d6embedding\u3002\u8fd9\u662f\u786e\u4fdd LLM \u80fd\u591f\u68c0\u7d22\u548c\u6700\u4f73\u4f7f\u7528\u6570\u636e\u6240\u5fc5\u9700\u7684\u3002</p> <p>\u8f6c\u6362\u8f93\u5165/\u8f93\u51fa\u662fNode\u5bf9\u8c61\uff08\u4e00\u4e2a <code>Document</code> \u662f\u5bf9\u5e94 <code>Node</code> \u7684\u5b50\u7c7b\uff09\u3002\u8f6c\u6362\u4e5f\u53ef\u4ee5\u5806\u53e0\u548c\u91cd\u65b0\u6392\u5e8f\u3002</p> <p>\u6211\u4eec\u6709\u7528\u4e8e\u8f6c\u6362\u6587\u6863\u7684\u9ad8\u7ea7 API \u548c\u4f4e\u7ea7 API\u3002</p>"},{"location":"rag/llama_index/learn/%E6%9E%84%E5%BB%BARAG%E7%9A%84%E6%B5%81%E7%A8%8B/%E5%8A%A0%E8%BD%BD%E5%92%8C%E6%8F%90%E5%8F%96%E6%95%B0%E6%8D%AE/#api","title":"\u9ad8\u7ea7\u8f6c\u6362 API","text":"<p>\u7d22\u5f15\u6709\u4e00\u4e2a <code>.from_documents()</code> \u65b9\u6cd5\uff0c\u5b83\u63a5\u53d7\u4e00\u4e2a <code>Document</code> \u5bf9\u8c61\u6570\u7ec4\uff0c\u5e76\u6b63\u786e\u5730\u89e3\u6790\u548c\u5206\u5757\u5b83\u4eec\u3002\u4f46\u662f\uff0c\u6709\u65f6\u4f60\u4f1a\u5e0c\u671b\u66f4\u597d\u5730\u63a7\u5236\u6587\u6863\u7684\u62c6\u5206\u65b9\u5f0f\u3002</p> Python<pre><code>from llama_index.core import VectorStoreIndex\n\nvector_index = VectorStoreIndex.from_documents(documents)\nvector_index.as_query_engine()\n</code></pre> <p>\u5728\u5e95\u5c42\uff0c\u8fd9\u4f1a\u5c06\u60a8\u7684\u6587\u6863\u62c6\u5206\u4e3a\u8282\u70b9\u5bf9\u8c61\uff0c\u8fd9\u4e9b\u5bf9\u8c61\u7c7b\u4f3c\u4e8e\u6587\u6863\uff08\u5b83\u4eec\u5305\u542b\u6587\u672c\u548c\u5143\u6570\u636e\uff09\u4f46\u4e0e\u5176\u7236\u6587\u6863\u6709\u5173\u7cfb\u3002</p> <p>\u5982\u679c\u60a8\u60f3\u8981\u81ea\u5b9a\u4e49\u6838\u5fc3\u7ec4\u4ef6\uff0c\u6bd4\u5982\u6587\u672c\u5206\u5272\u5668\uff0c\u901a\u8fc7\u8fd9\u4e2a\u62bd\u8c61\uff0c\u60a8\u53ef\u4ee5\u4f20\u5165\u81ea\u5b9a\u4e49 <code>transformations</code> \u5217\u8868\u6216\u5e94\u7528\u5230\u5168\u5c40 <code>Settings</code>\uff1a</p> Python<pre><code>from llama_index.core.node_parser import SentenceSplitter\n\ntext_splitter = SentenceSplitter(chunk_size=512, chunk_overlap=10)\n\n# global\nfrom llama_index.core import Settings\n\nSettings.text_splitter = text_splitter\n\n# per-index\nindex = VectorStoreIndex.from_documents(\n    documents, transformations=[text_splitter]\n)\n</code></pre>"},{"location":"rag/llama_index/learn/%E6%9E%84%E5%BB%BARAG%E7%9A%84%E6%B5%81%E7%A8%8B/%E5%8A%A0%E8%BD%BD%E5%92%8C%E6%8F%90%E5%8F%96%E6%95%B0%E6%8D%AE/#api_1","title":"\u4f4e\u7ea7\u8f6c\u6362 API","text":"<p>\u60a8\u8fd8\u53ef\u4ee5\u663e\u5f0f\u5b9a\u4e49\u8fd9\u4e9b\u6b65\u9aa4\u3002</p> <p>\u60a8\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528\u6211\u4eec\u7684\u8f6c\u6362\u6a21\u5757\uff08\u6587\u672c\u5206\u5272\u5668\u3001\u5143\u6570\u636e\u63d0\u53d6\u5668\u7b49\uff09\u4f5c\u4e3a\u72ec\u7acb\u7ec4\u4ef6\u6765\u5b9e\u73b0\u8fd9\u4e00\u70b9\uff0c\u6216\u8005\u5728\u6211\u4eec\u7684\u58f0\u660e\u6027\u8f6c\u6362\u6d41\u7a0b\u63a5\u53e3\u4e2d\u7ec4\u5408\u5b83\u4eec\u3002</p> <p>\u8ba9\u6211\u4eec\u6765\u770b\u770b\u4e0b\u9762\u7684\u6b65\u9aa4\u3002</p>"},{"location":"rag/llama_index/learn/%E6%9E%84%E5%BB%BARAG%E7%9A%84%E6%B5%81%E7%A8%8B/%E5%8A%A0%E8%BD%BD%E5%92%8C%E6%8F%90%E5%8F%96%E6%95%B0%E6%8D%AE/#_5","title":"\u5c06\u6587\u6863\u62c6\u5206\u6210\u8282\u70b9","text":"<p>\u5904\u7406\u6587\u6863\u7684\u5173\u952e\u6b65\u9aa4\u662f\u5c06\u5b83\u4eec\u62c6\u5206\u4e3a \u201c\u5757\u201d/<code>Node</code> \u5bf9\u8c61\u3002\u5173\u952e\u601d\u60f3\u662f\u5c06\u6570\u636e\u5904\u7406\u6210\u53ef\u4ee5\u68c0\u7d22/\u63d0\u4f9b\u7ed9 LLM \u7684\u5c0f\u5757\u3002</p> <p>LlamaIndex \u652f\u6301\u5404\u79cd\u6587\u672c\u5206\u5272\u5668\uff0c\u4ece\u57fa\u4e8e\u6bb5\u843d/\u53e5\u5b50/\u6807\u8bb0\u7684\u5206\u5272\u5668\u5230\u57fa\u4e8e\u6587\u4ef6\u7684\u5206\u5272\u5668\uff0c\u5982 HTML\u3001JSON\u3002</p> <p>\u5b83\u4eec\u53ef\u4ee5\u5355\u72ec\u4f7f\u7528\uff0c\u4e5f\u53ef\u4ee5\u4f5c\u4e3a\u6444\u53d6\u7ba1\u9053\u7684\u4e00\u90e8\u5206\u4f7f\u7528\u3002</p> Python<pre><code>from llama_index.core import SimpleDirectoryReader\nfrom llama_index.core.ingestion import IngestionPipeline\nfrom llama_index.core.node_parser import TokenTextSplitter\n\ndocuments = SimpleDirectoryReader(\"./data\").load_data()\n\npipeline = IngestionPipeline(transformations=[TokenTextSplitter(), ...])\n\nnodes = pipeline.run(documents=documents)\n</code></pre>"},{"location":"rag/llama_index/learn/%E6%9E%84%E5%BB%BARAG%E7%9A%84%E6%B5%81%E7%A8%8B/%E5%8A%A0%E8%BD%BD%E5%92%8C%E6%8F%90%E5%8F%96%E6%95%B0%E6%8D%AE/#_6","title":"\u6dfb\u52a0\u5143\u6570\u636e","text":"<p>\u6211\u4eec\u8fd8\u53ef\u4ee5\u9009\u62e9\u5c06\u5143\u6570\u636e\u6dfb\u52a0\u5230\u6587\u6863\u548c\u8282\u70b9\u3002\u8fd9\u53ef\u4ee5\u624b\u52a8\u5b8c\u6210\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u81ea\u52a8\u5143\u6570\u636e\u63d0\u53d6\u5668\u5b8c\u6210\u3002</p> <p>\u4e0b\u9762\u7684\u6307\u5357\u4ecb\u7ecd\u4e86 1\uff09\u5982\u4f55\u81ea\u5b9a\u4e49\u6587\u6863\u548c 2\uff09\u5982\u4f55\u81ea\u5b9a\u4e49\u8282\u70b9\u3002</p> Python<pre><code>document = Document(\n    text=\"text\",\n    metadata={\"filename\": \"&lt;doc_file_name&gt;\", \"category\": \"&lt;category&gt;\"},\n)\n</code></pre>"},{"location":"rag/llama_index/learn/%E6%9E%84%E5%BB%BARAG%E7%9A%84%E6%B5%81%E7%A8%8B/%E5%8A%A0%E8%BD%BD%E5%92%8C%E6%8F%90%E5%8F%96%E6%95%B0%E6%8D%AE/#embedding","title":"\u6dfb\u52a0\u5d4c\u5165embedding","text":"<p>\u8981\u5c06\u8282\u70b9\u63d2\u5165\u5411\u91cf\u7d22\u5f15\uff0c\u5b83\u5e94\u8be5\u5177\u6709\u5d4c\u5165embedding\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u6211\u4eec\u7684\u63d0\u53d6\u7ba1\u9053\u6216\u5d4c\u5165\u6307\u5357\u3002</p>"},{"location":"rag/llama_index/learn/%E6%9E%84%E5%BB%BARAG%E7%9A%84%E6%B5%81%E7%A8%8B/%E5%8A%A0%E8%BD%BD%E5%92%8C%E6%8F%90%E5%8F%96%E6%95%B0%E6%8D%AE/#_7","title":"\u76f4\u63a5\u521b\u5efa\u5e76\u4f20\u9012\u8282\u70b9","text":"<p>\u5982\u679c\u6211\u4eec\u613f\u610f\uff0c\u60a8\u53ef\u4ee5\u76f4\u63a5\u521b\u5efa\u8282\u70b9\u5e76\u5c06\u8282\u70b9\u5217\u8868\u76f4\u63a5\u4f20\u9012\u7ed9\u7d22\u5f15\u5668\uff1a</p> Python<pre><code>from llama_index.core.schema import TextNode\n\nnode1 = TextNode(text=\"&lt;text_chunk&gt;\", id_=\"&lt;node_id&gt;\")\nnode2 = TextNode(text=\"&lt;text_chunk&gt;\", id_=\"&lt;node_id&gt;\")\n\nindex = VectorStoreIndex([node1, node2])\n</code></pre>"},{"location":"rag/sft/chatml/","title":"ChatML","text":"<p>\u5728 ChatML \u4e2d\uff0c\u5bf9\u8bdd\u88ab\u5206\u4e3a\u4ee5\u4e0b\u51e0\u5c42\u6216\u89d2\u8272\uff1a</p> <ul> <li>\u7cfb\u7edf system</li> <li>\u52a9\u624b assistant</li> <li>\u7528\u6237 user</li> </ul> <p>\u8fd9\u53ea\u662f ChatML \u7684 0 \u7248\u672c\uff0c\u6211\u4eec\u627f\u8bfa\u5c06\u5bf9\u8be5\u8bed\u8a00\u8fdb\u884c\u91cd\u5927\u5f00\u53d1\u3002</p> <p>ChatML \u4e2d\u5bb9\u7eb3\u7684\u6709\u6548\u8f7d\u8377\u76ee\u524d\u4ec5\u4e3a\u6587\u672c\u3002OpenAI \u9884\u8ba1\u5c06\u5f15\u5165\u5176\u4ed6\u6570\u636e\u7c7b\u578b\u3002\u8fd9\u7b26\u5408\u5927\u578b\u57fa\u7840\u6a21\u578b\u7684\u6982\u5ff5\uff0c\u5373\u5c06\u5f00\u59cb\u7ed3\u5408\u6587\u672c\u3001\u56fe\u50cf\u3001\u58f0\u97f3\u7b49\u3002</p> <p>\u7528\u6237\u4ecd\u7136\u53ef\u4ee5\u4f7f\u7528\u4e0d\u5b89\u5168\u7684\u539f\u59cb\u5b57\u7b26\u4e32\u683c\u5f0f\u3002\u4f46\u8fd9\u79cd\u683c\u5f0f\u672c\u8eab\u5c31\u5141\u8bb8\u6ce8\u5165\u3002</p> <p>OpenAI \u5904\u4e8e\u4ee5\u8d1f\u8d23\u4efb\u7684\u65b9\u5f0f\u5f15\u5bfc\u548c\u7ba1\u7406 LLM \u9886\u57df\u7684\u7406\u60f3\u4f4d\u7f6e\u3002\u4e3a\u521b\u5efa\u5e94\u7528\u7a0b\u5e8f\u5236\u5b9a\u57fa\u7840\u6807\u51c6\u3002</p> <p>ChatML \u5411\u6a21\u578b\u660e\u786e\u4e86\u6bcf\u6bb5\u6587\u672c\u7684\u6765\u6e90\uff0c\u5e76\u7279\u522b\u663e\u793a\u4e86\u4eba\u7c7b\u6587\u672c\u548c\u4eba\u5de5\u667a\u80fd\u6587\u672c\u4e4b\u95f4\u7684\u754c\u9650\u3002</p> <p>\u8fd9\u63d0\u4f9b\u4e86\u7f13\u89e3\u5e76\u6700\u7ec8\u89e3\u51b3\u6ce8\u5165\u95ee\u9898\u7684\u673a\u4f1a\uff0c\u56e0\u4e3a\u6a21\u578b\u53ef\u4ee5\u5206\u8fa8\u51fa\u54ea\u4e9b\u6307\u4ee4\u6765\u81ea\u5f00\u53d1\u4eba\u5458\u3001\u7528\u6237\u6216\u5176\u81ea\u5df1\u7684\u8f93\u5165\u3002\u301cOpenAI</p>"},{"location":"rag/sft/chatml/#chatml_1","title":"ChatML \u793a\u4f8b\u4ee3\u7801","text":"<p>system\u4e0b\u9762\u662f ChatML \u793a\u4f8b JSON \u6587\u4ef6\uff0c\u5176\u4e2d\u5b9a\u4e49\u4e86\u3001user\u548c\u7684\u89d2\u8272assistant\u3002</p> JSON<pre><code>[ { \"role\" :  \"system\" ,  \n      \"content\"  :  \"\u60a8\u662f ChatGPT\uff0c\u8fd9\u662f OpenAI \u8bad\u7ec3\u7684\u5927\u578b\u8bed\u8a00\u6a21\u578b\u3002\u8bf7\u5c3d\u53ef\u80fd\u7b80\u6d01\u5730\u56de\u7b54\u3002\\n\u77e5\u8bc6\u622a\u6b62\u65f6\u95f4\uff1a2021-09-01\\n\u5f53\u524d\u65e5\u671f\uff1a2023-03-02\" } , \n { \"role\" :  \"user\" ,  \n      \"content\"  :  \"\u60a8\u597d\u5417\uff1f\" } , \n { \"role\" :  \"assistant\" , \"  \n      content\"  :  \"\u6211\u5f88\u597d\" } , \n { \"role\" :  \"user\" ,  \n      \"content\"  :  \"OpenAI \u516c\u53f8\u7684\u4f7f\u547d\u662f\u4ec0\u4e48\uff1f\" } ]\n</code></pre> <p>\u6709\u6548\u7684 Python \u4ee3\u7801\u7247\u6bb5\u5982\u4e0b\uff1a Bash<pre><code>pip install openai \n</code></pre></p> <p>Python<pre><code>import os \nimport openai \nopenai.api_key = \"xxxxxxxxxxxxxxxxxxxxxxxxxxxxx\"\n\n finish = openai.ChatCompletion.create( \n  model= \"gpt-3.5-turbo\" , \n  messages = [{ \"role\" : \"system\" , \"content\" : \"\u60a8\u662f ChatGPT\uff0c\u8fd9\u662f\u7531 OpenAI \u8bad\u7ec3\u7684\u5927\u578b\u8bed\u8a00\u6a21\u578b\u3002\u8bf7\u5c3d\u53ef\u80fd\u7b80\u6d01\u5730\u56de\u7b54\u3002\\n\u77e5\u8bc6\u622a\u6b62\uff1a2021-09-01\\n\u5f53\u524d\u65e5\u671f\uff1a2023-03-02\" }, \n{ \"role\" : \"user\" , \"content\" : \"\u60a8\u597d\u5417\uff1f\" }, \n{ \"role\" : \"assistant\" , \"content\" : \"\u6211\u5f88\u597d\" }, \n{ \"role\" : \"user\" , \"content\" : \"OpenAI \u516c\u53f8\u7684\u4f7f\u547d\u662f\u4ec0\u4e48\uff1f\" }] \n) \n#print(completion) \nprint (completion)\n</code></pre> \u901a\u8fc7\u4e0b\u9762\u7684\u8f93\u51fa\uff0c\u6ce8\u610f\u5b9a\u4e49\u7684\u89d2\u8272\u3001\u6a21\u578b\u7ec6\u8282gpt-3.5-turbo-0301\u548c\u5176\u4ed6\u7ec6\u8282\u3002</p> JSON<pre><code>{\n  \"choices\": [\n    {\n      \"finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"content\": \"The mission of OpenAI is to ensure that artificial intelligence (AI) benefits humanity as a whole, by developing and promoting friendly AI for everyone, researching and mitigating risks associated with AI, and helping shape the policy and discourse around AI.\",\n        \"role\": \"assistant\"\n      }\n    }\n  ],\n  \"created\": 1677751157,\n  \"id\": \"chatcmpl-6pa0TlU1OFiTKpSrTRBbiGYFIl0x3\",\n  \"model\": \"gpt-3.5-turbo-0301\",\n  \"object\": \"chat.completion\",\n  \"usage\": {\n    \"completion_tokens\": 50,\n    \"prompt_tokens\": 84,\n    \"total_tokens\": 134\n  }\n}\n</code></pre>"},{"location":"rag/sft/chatml/#_1","title":"\u7ed3\u675f\u8bed","text":"<p>\u6784\u5efa\u57fa\u4e8e LLM \u7684\u5bf9\u8bdd\u754c\u9762\u7684\u6311\u6218\u4e4b\u4e00\u662f\u5c06\u63d0\u793a\u8282\u70b9\u6392\u5e8f\u6210\u94fe\u7684\u6982\u5ff5\u3002</p> <p>\u7531\u4e8e\u8f93\u5165\u7684\u975e\u7ed3\u6784\u5316\u6027\u8d28\uff0c\u8282\u70b9\u4e4b\u95f4\u7684\u8fb9\u5f88\u96be\u7ba1\u7406\u3002\u8f93\u5165\u901a\u5e38\u662f\u81ea\u7136\u8bed\u8a00\u6216\u5bf9\u8bdd\uff0c\u672c\u8d28\u4e0a\u662f\u975e\u7ed3\u6784\u5316\u7684\u3002</p> <p>ChatML \u5c06\u6781\u5927\u5730\u5e2e\u52a9\u521b\u5efa\u63d0\u4ea4\u5230\u94fe\u7684\u6570\u636e\u8f6c\u6362\u7684\u6807\u51c6\u76ee\u6807\u3002</p>"},{"location":"rag/sft/chatml/#_2","title":"\u53c2\u8003","text":"<ol> <li>https://cobusgreyling.medium.com/the-introduction-of-chat-markup-language-chatml-is-important-for-a-number-of-reasons-5061f6fe2a85</li> <li>https://zhuanlan.zhihu.com/p/666461139</li> </ol>"},{"location":"rewrite/introduction/","title":"\u5f15\u8a00","text":""},{"location":"rewrite/introduction/#_2","title":"\u80cc\u666f","text":"<p>\u5f53\u524d\u7684\u5bf9\u8bdd\u7cfb\u7edf\u5728\u5904\u7406\u5355\u8f6e\u5bf9\u8bdd\u95ee\u9898\u4e0a\u6548\u679c\u975e\u5e38\u597d\uff0c\u800c\u5728\u5904\u7406\u591a\u8f6e\u6216\u8005\u4e0e\u4e0a\u6587\u76f8\u5173\u7684\u7528\u6237\u95ee\u9898\u65f6\uff0c\u5f53\u524d\u5bf9\u8bdd\u7cfb\u7edf\u5219\u8868\u73b0\u4e00\u822c\uff0c\u4e3b\u8981\u539f\u56e0\u662f\u4eba\u4eec\u7684\u65e5\u5e38\u5bf9\u8bdd\u4e2d\u6bcf\u4e2a\u8f6e\u6b21\u4e4b\u95f4\u5e76\u975e\u5b64\u7acb\u7684\uff0c\u800c\u662f\u6bcf\u4e00\u8f6e\u5bf9\u8bdd\u90fd\u53ef\u80fd\u5b58\u5728\u6307\u4ee3(pronoun)\u6216\u8005\u7701\u7565(ellipsis)\u7684\u60c5\u51b5\u3002 \u8fd9\u65f6\u5982\u679c\u53ea\u57fa\u4e8e\u7528\u6237\u5f53\u524d\u8f6e\u7684\u8f93\u5165\u8fdb\u884c\u56de\u590d\uff0c\u5219\u4f1a\u5ffd\u7565\u6389\u4e0a\u6587\u7684\u4e00\u4e9b\u91cd\u8981\u4fe1\u606f\uff0c\u5bfc\u81f4\u56de\u590d\u7684\u7ed3\u679c\u4e0d\u7b26\u5408\u4e0a\u4e0b\u6587\u8bed\u5883\u3002</p>"},{"location":"rewrite/introduction/#_3","title":"\u95ee\u9898","text":"<p>Non-Sentential Utterances(NSUs) \u8868\u793a\u5bf9\u8bdd\u8fc7\u7a0b\u4e2d\u5b58\u5728\u7701\u7565\u548c\u6307\u4ee3\uff0c\u4e14\u4e0d\u5177\u5907\u5b8c\u5907\u8bed\u4e49\u4fe1\u606f\u7684\u53e5\u5b50\u3002\u4e0b\u8868\u4e2d\u5217\u4e3e\u4e86\u5bf9\u8bdd\u7cfb\u7edf\u4e2d\u6307\u4ee3\u548c\u7701\u7565\u9020\u6210NSUs\u7684\u793a\u4f8b\uff1a</p> \u7c7b\u578b \u793a\u4f8b \u6307\u4ee3 A1: \u6885\u897f\u6709\u591a\u9ad8  B1: \u5b98\u65b9\u8bf4\u4ed6\u7684\u8eab\u9ad8\u662f5\u82f1\u5c3a7\u82f1\u5bf8\u3002 A2: \u4ed6\u548cC\u7f57\u8c01\u662f\u6700\u597d\u7684\u7403\u5458? \u7701\u7565 A1: \u4f60\u559c\u6b22\u4ec0\u4e48\u7535\u5f71?  B1: \u6cf0\u5766\u5c3c\u514b\u3002  A2: \u4e3a\u4ec0\u4e48\u5462? <p>\u5728\u6307\u4ee3\u793a\u4f8b\u4e2d\uff0cA2\u4e2d\u7684\u3010\u4ed6\u3011\u6307A1\u4e2d\u7684\u3010\u6885\u897f\u3011\u3002</p> <p>\u5728\u7701\u7565\u793a\u4f8b\u4e2d\uff0cA2\u4e2d\u7701\u7565\u4e86\u3010\u559c\u6b22\u6cf0\u5766\u5c3c\u514b\u3011\u3002</p>"},{"location":"rewrite/introduction/#_4","title":"\u76ee\u6807","text":"<p>\u5bf9\u4e8e NSUs \u95ee\u9898\uff0c\u6539\u5199\u4efb\u52a1\u7684\u76ee\u6807\u662f\u5c06\u6700\u540e\u4e00\u53e5\u8bdd\u6062\u590d\u5230\u5177\u5907\u5b8c\u6574\u8bed\u4e49\u4fe1\u606f\u7684\u53e5\u5b50\u3002\u5728\u6307\u4ee3\u793a\u4f8b\u4e2d\uff0cA2\u6062\u590d\u5230\u5177\u5907\u5b8c\u6574\u8bed\u4e49\u4fe1\u606f\u7684\u53e5\u5b50\uff0c\u5373\u3010\u6885\u897f\u548cC\u7f57\u8c01\u662f\u6700\u597d\u7684\u7403\u5458\uff1f\u3011\u3002\u5728\u7701\u7565\u793a\u4f8b\u4e2d\uff0cA2\u6062\u590d\u5230\u5177\u5907\u5b8c\u6574\u8bed\u4e49\u4fe1\u606f\u7684\u53e5\u5b50\uff0c\u5373\u3010\u4f60\u4e3a\u4ec0\u4e48\u559c\u6b22\u6cf0\u5766\u5c3c\u514b\uff1f\u3011\u3002</p> <p>\u53e5\u5b50\u6062\u590d\u5230\u5177\u5907\u5b8c\u6574\u8bed\u4e49\u4fe1\u606f\u540e\uff0c\u5bf9\u8bdd\u7cfb\u7edf\u7684\u7406\u89e3\u6a21\u5757\u5c06\u5176\u4f5c\u4e3a\u8f93\u5165\uff0c\u65e0\u9700\u901a\u8fc7\u4e0a\u4e0b\u6587\u8fdb\u884c\u5efa\u6a21\uff0c\u4fbf\u53ef\u4ee5\u51c6\u786e\u5730\u7406\u89e3\u7528\u6237\u7684\u95ee\u9898\u3002</p>"},{"location":"rewrite/introduction/#_5","title":"\u4efb\u52a1\u63cf\u8ff0","text":"<p>\u5bf9\u8f6e\u5bf9\u8bdd NSUs \u7684\u6539\u5199\u95ee\u9898\uff0c\u53ef\u4ee5\u63cf\u8ff0\u4e3a\u5982\u4e0b\u5f62\u5f0f\uff1a</p> \\[ (H, U_{n} \\rightarrow R), H=\\{U_{1}, U_{2}, U_{3}, \\cdots, U_{n-1}\\} \\] <p>\u5176\u4e2d\uff1a </p> <ul> <li>\\(U_{n}\\) \u8868\u793a\u5728\u65f6\u95f4 \\(n\\) \u65f6\u523b\u7684\u5bf9\u8bdd\u6587\u672c\uff0c\u5c5e\u4e8e NSUs \u7684\u8f93\u5165\uff1b</li> <li>\\(H\\) \u8868\u793a\u5728\u65f6\u95f4 \\(n\\) \u4e4b\u524d\u7684\u4f1a\u8bdd\u5386\u53f2\uff0c\u4e00\u5171 \\(n-1\\) \u8f6e\u5bf9\u8bdd\uff1b</li> <li>\\(R\\) \u8868\u793a \\(U_{n}\\) \u7ecf\u8fc7\u6539\u5199\u4e4b\u540e\u5f97\u5230\u7684\u6587\u672c\u3002</li> </ul> <p>\u4e3a\u4e86\u4fdd\u8bc1\u80fd\u4e3a\u81ea\u7136\u8bed\u8a00\u7406\u89e3\u6a21\u5757\u63d0\u4f9b\u5b8c\u6574\u7684\u4fe1\u606f\u8f93\u5165\uff0c\u8981\u6c42\u6539\u5199\u5f97\u5230\u7684 \\(R\\) \u5177\u5907\u5b8c\u6574\u7684\u5bf9\u8bdd\u5386\u53f2\u4fe1\u606f\uff0c\u540c\u4e8b\u9700\u8981\u4fdd\u8bc1 \\(R\\) \u7684\u6d41\u7a0b\u6027\u548c\u5408\u7406\u6027\u3002</p> <p>\u6539\u5199\u4efb\u52a1\u7684\u76ee\u6807\u662f\u5b66\u4e60\u5f97\u5230\u7684\u6a21\u578b \\(P(R | (H, U_{n}))\\)\uff0c\u80fd\u591f\u5224\u65ad\u662f\u5426\u9700\u8981\u6539\u5199\uff0c\u5982\u679c\u9700\u8981\uff0c\u5219\u8fd4\u56de\u5676\u5199\u540e\u7684\u6587\u672c\u5e8f\u5217\u3002</p>"},{"location":"speech/asr/sherpa-ncnn%E9%83%A8%E7%BD%B2/","title":"sherpa-ncnn \u90e8\u7f72","text":""},{"location":"speech/asr/sherpa-ncnn%E9%83%A8%E7%BD%B2/#ios","title":"IOS\u90e8\u7f72","text":"<p>\u5728\u672c\u8282\u4e2d\uff0c\u6211\u4eec\u5c06\u4ecb\u7ecd\u5982\u4f55\u6784\u5efa\u7528\u4e8e\u8bed\u97f3\u7684 iOS \u5e94\u7528\u7a0b\u5e8f \u4f7f\u7528 sherpa-ncnn \u8fdb\u884c\u8bc6\u522b\u5e76\u5728 Mac \u4e0a\u7684\u6a21\u62df\u5668\u4e2d\u8fd0\u884c\u5b83\uff0c \u5728\u60a8\u7684 iPhone \u6216 iPad \u4e0a\u8fd0\u884c\u5b83\u3002real-time</p> <p>\u6211\u4eec\u8fd8\u63d0\u4f9b\u5b9e\u65f6\u8bed\u97f3\u8bc6\u522b\u7684\u89c6\u9891\u6f14\u793a\u3002</p> <p>\u63d0\u793a</p> <p>\u5728\u8bed\u97f3\u8bc6\u522b\u8fc7\u7a0b\u4e2d\uff0c\u5b83\u4e0d\u9700\u8981\u8bbf\u95ee Internet\u3002 \u6bcf\u4e2a Bug \u90fd\u5728\u60a8\u7684 iPhone \u6216 iPad \u4e0a\u672c\u5730\u5904\u7406\u3002</p> <p>\u89c6\u9891\u6f14\u793a \u89c6\u9891 1\uff1aiPhone 14 Pro \u4e2d\u6587 + \u82f1\u6587\uff08\u6a21\u62df\u5668\uff09 \u89c6\u9891 2\uff1aiPad 11 Pro \u4e0a\u7684\u4e2d\u6587 + \u82f1\u6587\uff08\u6a21\u62df\u5668\uff09 \u6784\u5efa\u9002\u7528\u4e8e iOS \u7684 sherpa-ncnn \u8981\u6c42 \u4e0b\u8f7d sherpa-ncnn \u6784\u5efa sherpa-ncnn\uff08\u5728\u547d\u4ee4\u884c\u4e2d\uff0cC++ \u90e8\u5206\uff09 \u6784\u5efa sherpa-ncnn\uff08\u5728 Xcode \u4e2d\uff09 \u5728 iPhone/iPad \u4e0a\u8fd0\u884c sherpa-ncnn \u5bf9\u4e8e\u66f4\u597d\u5947\u7684 \u8fd0\u884c ./build-ios.sh \u751f\u6210\u7684\u6587\u4ef6 openmp.xc\u6846\u67b6 sherpa-ncnn.xc\u6846\u67b6 \u5982\u4f55\u5728 Xcode \u4e2d\u4f7f\u7528 ./build-ios.sh \u751f\u6210\u7684\u6587\u4ef6</p>"},{"location":"speech/asr/%E5%BC%95%E8%A8%80/","title":"\u8bed\u97f3\u8bc6\u522b","text":"<p>\u5728\u90e8\u7f72\u8bed\u97f3\u8bc6\u522b\u7684\u65f6\u5019\uff0c\u4f7f\u7528\u5c0f\u7c73\u5f00\u6e90\u7684sherpa\u6846\u67b6\u90e8\u7f72\u4e0d\u540c\u7684\u5ba2\u6237\u7aef\uff0c\u5305\u62ec\u5b89\u5353\u548cios\u7684\u5ba2\u6237\u7aef\u3002</p>"},{"location":"speech/asr/%E5%BC%95%E8%A8%80/#sherpa","title":"sherpa \u4ecb\u7ecd","text":"<p>Sherpa \u662f\u4e0b\u4e00\u4ee3kaldi\u9879\u76ee\u7684\u90e8\u7f72\u6846\u67b6 Sherpa \u652f\u6301\u5728\u5404\u79cd\u5e73\u53f0\u4e0a\u90e8\u7f72\u8bed\u97f3\u76f8\u5173\u7684\u9884\u8bad\u7ec3\u6a21\u578b\u3002</p> <p>\u5982\u679c\u60a8\u5bf9\u5982\u4f55\u8bad\u7ec3\u81ea\u5df1\u7684\u6a21\u578b\u6216\u5fae\u8c03\u9884\u8bad\u7ec3\u7684\u6a21\u578b\u611f\u5174\u8da3\uff0c\u8bf7\u53c2\u8003 Icefall \u8fd9\u4e2a\u9879\u76ee\u3002</p> <p>\u76ee\u524d\uff0csherpa\u6709\u4ee5\u4e0b\u5b50\u9879\u76ee\uff1a</p> <ul> <li>k2-fsa/sherpa</li> <li>k2-fsa/sherpa-onnx</li> <li>k2-fsa/sherpa-ncnn</li> </ul> <p>\u4e0a\u9762\u8fd9\u4e9b\u9879\u76ee\u4e4b\u95f4\u7684\u5dee\u5f02\u5982\u4e0b\u8868\u6240\u793a\uff1a</p> k2/sherpa k2/sherpa-onnx k2/sherpa-ncnn \u5b89\u88c5\u7684\u56f0\u96be\u7a0b\u5ea6 \u56f0\u96be \u5bb9\u6613 \u5bb9\u6613 \u795e\u7ecf\u7f51\u7edc\u4f9d\u8d56\u5e93 Pytorch onnxruntime ncnn CPU \u652f\u6301 x86 x86_64 x86\u3001x86_64\u3001 arm32,arm64 x86, x86_64, arm32, arm64, RISC-V GPU \u652f\u6301 \u662f\u7684\uff08\u9002\u7528\u4e8e NVIDIA GPU\uff09CUDA \u662f\u7684 \u662f\u7684\uff08\u9002\u7528\u4e8e ARM GPU\uff09Vulkan \u64cd\u4f5c\u7cfb\u7edf\u652f\u6301 Linux\u7684\uff0c Windows\u7684\uff0c macOS \u7684 Linux\u7684\uff0c Windows\u7684\uff0c macOS\u3001 \u3001iOS Android Linux\u7684\uff0c Windows\u7684\uff0c macOS\u3001 \u3001iOS Android \u652f\u6301 batch_size &gt; 1 \u662f\u7684 \u662f\u7684 No \u63d0\u4f9b\u7684 API C++\u3001Python C\u3001C++\u3001Python\u3001 C#\u3001Java\u3001Kotlin \u548c \u65af\u5a01\u592b\u7279\u3001Go\u3001 JavaScript\u3001Dart \u5e15\u65af\u5361\uff0cRust C\u3001C++\u3001Python\u3001 C#\u3001Kotlin\u3001 Swift, Go \u652f\u6301\u7684\u529f\u80fd \u6d41\u5f0f\u8bed\u97f3\u8bc6\u522b / \u975e\u6d41\u5f0f\u8bed\u97f3\u8bc6\u522b \u6d41\u5f0f\u8bed\u97f3\u8bc6\u522b / \u975e\u6d41\u5f0f\u8bed\u97f3\u8bc6\u522b / \u6587\u672c\u8f6c\u8bed\u97f3\uff0c \u8bf4\u8bdd\u4eba\u5206\u7c7b / \u8bf4\u8bdd\u4eba\u8bc6\u522b / \u8bf4\u8bdd\u4eba\u9a8c\u8bc1 / \u53e3\u8bed\u8bc6\u522b / \u97f3\u9891\u6807\u8bb0\uff0c VAD / \u5173\u952e\u8bcd\u8bc6\u522b\uff0c \u6d41\u5f0f\u8bed\u97f3\u8bc6\u522b / VAD <p>\u6211\u4eec\u4e5f\u652f\u6301 Triton\u3002\u8bf7\u53c2\u9605 Triton\u3002</p>"},{"location":"speech/asr/%E5%BC%95%E8%A8%80/#_2","title":"\u53c2\u8003\uff1a","text":"<ol> <li>https://k2-fsa.github.io/sherpa/intro.html</li> </ol>"},{"location":"speech_and_language_processing/regular_expressions_text_normalization_ddit_distance/","title":"\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u6587\u672c\u5f52\u4e00\u5316\uff0c\u7f16\u8f91\u8ddd\u79bb","text":""},{"location":"speech_and_language_processing/jsgf/jsgf/","title":"JSGF(JSpeech Gramar Format)\u6587\u6cd5\u683c\u5f0f","text":"<p>Jsgf \u662f\u4e00\u79cd\u6587\u6cd5\u683c\u5f0f\uff0c\u7528\u4e8e\u63cf\u8ff0\u8bed\u97f3\u8bc6\u522b\u5668\u5e94\u8be5\u542c\u4ec0\u4e48\u3002\u8fd9\u4e2a\u683c\u5f0f\u662fsun\u516c\u53f8\u7ed9w3c\u63d0\u4ea4\u7684java\u8bed\u97f3\u8bc6\u522b\u547d\u4ee4\u89e3\u6790\u6807\u51c6\u3002</p> <p>Success</p> <p>\u4e0b\u9762\u7684\u5185\u5bb9\u662f\u5bf9w3c\u4e2djsgf\u6587\u6863\u7684\u7ffb\u8bd1\u3002</p>"},{"location":"speech_and_language_processing/jsgf/jsgf/#_1","title":"\u80cc\u666f","text":"<ul> <li>\u6700\u540e\u7684\u63d0\u4ea4\u65e5\u671f\uff1aW3C \u8bf4\u660e 2000 \u5e74 6 \u6708 5 \u65e5</li> <li>\u6700\u540e\u63d0\u4ea4\u7684\u6b64\u7248\u672c\uff1ahttp://www.w3.org/TR/2000/NOTE-jsgf-20000605</li> <li>\u6700\u65b0\u7248\u672c\uff1ahttp://www.w3.org/TR/jsgf</li> <li>\u4f5c\u8005\uff1aAndrew Hunt\uff0cSpeech Works International &lt; andrew.hunt@speechworks.com &gt;</li> </ul> <p>\u7248\u6743\u6240\u6709 \u00a92000 Sun Microsystems, Inc. Sun\u3001Sun Microsystems, Inc.\u3001Java \u548c\u6240\u6709\u57fa\u4e8e Java \u7684\u6807\u8bb0\u548c\u5fbd\u6807\u662f Sun Microsystems, Inc. \u5728\u7f8e\u56fd\u548c\u5176\u4ed6\u56fd\u5bb6/\u5730\u533a\u7684\u5546\u6807\u6216\u6ce8\u518c\u5546\u6807\u3002</p>"},{"location":"speech_and_language_processing/jsgf/jsgf/#_2","title":"\u6458\u8981","text":"<p>JSpeech \u6587\u6cd5\u683c\u5f0f (JSGF) \u662f\u4e00\u79cd\u5e73\u53f0\u65e0\u5173\u3001\u6280\u672f\u63d0\u4f9b\u8005\u65e0\u5173\u7684\u6587\u6cd5\u6587\u672c\u8868\u793a\uff0c\u7528\u4e8e\u8bed\u97f3\u8bc6\u522b\u3002\u8bed\u97f3\u8bc6\u522b\u6a21\u5757\u4f7f\u7528\u6587\u6cd5\u6765\u786e\u5b9a\u8bed\u97f3\u8bc6\u522b\u6a21\u5757\u5e94\u8be5\u542c\u4ec0\u4e48\uff0c\u4ece\u800c\u63cf\u8ff0\u7528\u6237\u53ef\u80fd\u8bf4\u7684\u6587\u672c\u5185\u5bb9\u3002\u9664\u4e86\u4f7f\u7528\u4f20\u7edf\u7684\u8bed\u6cd5\u7b26\u53f7\u5916\uff0c JSGF \u8fd8\u91c7\u7528\u4e86 Java <sup>TM</sup> \u7f16\u7a0b\u8bed\u8a00\u7684\u98ce\u683c\u548c\u4e60\u60ef\u3002</p> <p>\u672c\u6587\u6863\u6e90\u81ea Java <sup>TM</sup> Speech API Grammar Format\uff08\u7248\u672c 1.0\uff0c1998 \u5e74 10 \u6708\uff09\uff0c\u53ef\u4ece Sun Microsystems \u7684\u7f51\u7ad9\u83b7\u53d6\uff1a http://java.sun.com/products/java-media/speech/\u3002</p> <p>Sun Microsystems \u5e0c\u671b\u5c06\u672c\u6587\u6863\u63d0\u4ea4\u7ed9 W3C \u8bed\u97f3\u6d4f\u89c8\u5668\u5de5\u4f5c\u7ec4\uff0c\u4ee5\u4fbf\u5236\u5b9a\u8bed\u97f3\u6280\u672f\u7684\u4e92\u8054\u7f51\u6807\u51c6\u3002\u6211\u4eec\u671f\u671b\u7531\u6b64\u4ea7\u751f\u7684 W3C \u5efa\u8bae\u5bf9\u5f00\u53d1\u8005\u793e\u533a\u5177\u6709\u91cd\u8981\u610f\u4e49\u3002</p> <p>\u6709\u5173\u77e5\u8bc6\u4ea7\u6743\u7684\u58f0\u660e\u8bf7\u53c2\u9605 Sun\u63d0\u4ea4\u7684\u6587\u4ef6\u3002</p>"},{"location":"speech_and_language_processing/jsgf/jsgf/#_3","title":"\u672c\u6587\u6863\u7684\u72b6\u6001","text":"<p>\u672c\u6587\u6863\u662f Sun Microsystems, Inc. \u5411\u4e07\u7ef4\u7f51\u8054\u76df\u63d0\u4ea4\u7684\u4e00\u4efd\u6587\u4ef6\uff08\u8bf7\u53c2\u9605\u63d0\u4ea4\u8bf7\u6c42\u3001W3C \u5de5\u4f5c\u4eba\u5458\u610f\u89c1\uff09\u3002\u6240\u6709\u5df2\u786e\u8ba4\u63d0\u4ea4\u6587\u4ef6\u7684\u5217\u8868\uff0c\u8bf7\u53c2\u9605\u5df2\u786e\u8ba4\u63d0\u4ea4\u7ed9 W3C \u7684\u6587\u4ef6\u3002</p> <p>\u672c\u6587\u6863\u662f W3C \u63d0\u4f9b\u7684\u4e00\u4efd\u6ce8\u91ca\uff0c\u4ec5\u4f9b\u8ba8\u8bba\u3002\u8fd9\u9879\u5de5\u4f5c\u5e76\u4e0d\u610f\u5473\u7740 W3C \u6210\u5458\u7684\u8ba4\u53ef\u6216\u5171\u8bc6\uff0c\u4e5f\u4e0d\u610f\u5473\u7740 W3C \u5df2\u7ecf\u3001\u6b63\u5728\u6216\u5c06\u8981\u4e3a\u672c\u6ce8\u91ca\u4e2d\u89e3\u51b3\u7684\u95ee\u9898\u5206\u914d\u4efb\u4f55\u8d44\u6e90\u3002\u672c\u6587\u6863\u662f\u4e00\u9879\u6b63\u5728\u8fdb\u884c\u7684\u5de5\u4f5c\uff0c\u53ef\u80fd\u4f1a\u968f\u65f6\u88ab\u5176\u4ed6\u6587\u6863\u66f4\u65b0\u3001\u66ff\u6362\u6216\u6dd8\u6c70\u3002</p> <p>\u672c\u6587\u6863\u6e90\u81ea Sun \u53d1\u5e03\u7684\u73b0\u6709\u89c4\u8303\uff0c\u8be5\u89c4\u8303\u7531 Sun \u4e0e\u5171\u540c\u7f16\u5199 Java <sup>TM</sup> Speech API \u7684\u516c\u53f8\u5171\u540c\u5f00\u53d1\u3002\u8be5\u89c4\u8303\u79f0\u4e3a Java Speech API Grammar Format\uff0c\u53ef\u4ece http://java.sun.com/products/java-media/speech/ (\u8fd9\u4e2a\u8fde\u63a5\u5df2\u7ecf\u65e0\u6cd5\u8bbf\u95ee) \u83b7\u5f97\u53c2\u8003\u3002\u9664\u4e86\u89c4\u8303\u540d\u79f0\u548c\u89c4\u8303\u4e2d\u76f8\u5e94\u7684\u5f15\u7528\u6709\u6240\u66f4\u6539\u5916\uff0c\u672c\u6587\u6863\u5728\u6280\u672f\u4e0a\u4e0e\u4ee5\u524d\u53d1\u5e03\u7684\u6587\u6863\u5b8c\u5168\u76f8\u540c\u3002\u6211\u4eec\u66f4\u6539\u540d\u79f0\u53ea\u662f\u4e3a\u4e86\u4fdd\u62a4 Sun \u5546\u6807\u3002\u65e0\u8bba\u5982\u4f55\uff0c\u6211\u4eec\u9884\u8ba1\u8054\u76df\u5236\u5b9a\u7684\u4efb\u4f55\u6d3e\u751f\u89c4\u8303\u90fd\u4f1a\u6709\u4e0d\u540c\u7684\u540d\u79f0\u3002</p> <p>\u5982\u679c\u9700\u8981\u5bf9\u6587\u6863\u8fdb\u884c\u4efb\u4f55\u66f4\u6539\uff0c\u6211\u4eec\u5e0c\u671b\u672a\u6765\u7248\u672c\u7531 W3C \u6d41\u7a0b\u5236\u4f5c\u3002Sun \u4fdd\u7559 JSGF \u89c4\u8303\u7684\u6240\u6709\u6743\uff0c\u5e76\u4fdd\u7559\u72ec\u7acb\u7ef4\u62a4\u548c\u53d1\u5c55 JSGF \u89c4\u8303\u7684\u6743\u5229\uff0c\u6b64\u7c7b\u72ec\u7acb\u7ef4\u62a4\u548c\u53d1\u5c55\u5e94\u5f52 Sun \u6240\u6709\u3002</p> <p>\u5f53\u524d W3C \u6280\u672f\u6587\u6863\u7684\u5217\u8868\u53ef\u5728\u6280\u672f\u62a5\u544a\u9875\u9762\u627e\u5230\u3002</p>"},{"location":"speech_and_language_processing/jsgf/jsgf/#_4","title":"\u5185\u5bb9","text":""},{"location":"speech_and_language_processing/jsgf/jsgf/#_5","title":"\u524d\u8a00","text":""},{"location":"speech_and_language_processing/jsgf/jsgf/#_6","title":"\u8303\u56f4","text":"<p>\u4ee5\u4e0b\u5185\u5bb9\u88ab\u89c6\u4e3a\u7a0b\u5e8f\u5e94\u8be5\u5904\u7406\u7684\u95ee\u9898\uff0c\u53ef\u4ee5\u901a\u8fc7\u8bed\u97f3\u8bc6\u522b\u5668\u7684 API \u8fdb\u884c\u5904\u7406\uff1a</p> <ul> <li>\u7528\u4e8e\u5728\u8bed\u97f3\u8bc6\u522b\u6a21\u5757\u4e2d\u52a0\u8f7d\u3001\u521b\u5efa\u548c\u5220\u9664\u8bed\u6cd5\u3001\u8bed\u97f3\u8bc6\u522b\u7528\u4e8e\u6fc0\u6d3b\u7684\u8bed\u6cd5\u4ee5\u53ca\u5176\u4ed6\u8bed\u6cd5\u7ba1\u7406\u529f\u80fd\u3002</li> <li>\u52a0\u8f7d\u8bed\u6cd5\u7684\u7ea6\u5b9a\uff1a\u4f8b\u5982\uff0c\u901a\u8fc7\u7f51\u7ad9\u4e0a\u7684 URL\u3002</li> <li>\u63a5\u6536\u8bed\u6cd5\u8bc6\u522b\u7ed3\u679c\u5e76\u5904\u7406\u8fd9\u4e9b\u7ed3\u679c\u7684\u673a\u5236\u3002</li> <li>\u5bf9\u8bed\u6cd5\u4e0a\u4e0d\u6b63\u786e\u7684\u8bed\u6cd5\u5b9a\u4e49\u7684\u9519\u8bef\u5904\u7406\u3002</li> <li>\u8bcd\u6c47\u7ba1\u7406\uff0c\u5305\u62ec\u6807\u8bb0\u53d1\u97f3\u7684\u5904\u7406\u3002</li> </ul>"},{"location":"speech_and_language_processing/jsgf/jsgf/#_7","title":"\u8d21\u732e","text":"<p>Sun Microsystems, Inc. \u6536\u5230\u4e86\u6765\u81ea Apple Computer, Inc.\u3001AT&amp;T\u3001Dragon Systems, Inc.\u3001IBM Corporation\u3001Novell, Inc.\u3001Philips Speech Processing \u548c Texas Instruments Incorporated \u4ee5\u53ca\u8bb8\u591a\u4e92\u8054\u7f51\u8bc4\u8bba\u8005\u5bf9\u6b64\u89c4\u8303\u7684\u8d21\u732e\u3002</p>"},{"location":"speech_and_language_processing/jsgf/jsgf/#jspeech","title":"JSpeech\u8bed\u6cd5\u683c\u5f0f\u89c4\u8303","text":""},{"location":"speech_and_language_processing/jsgf/jsgf/#1","title":"1. \u7b80\u4ecb","text":"<p>\u8bed\u97f3\u8bc6\u522b\u7cfb\u7edf\u4f7f\u8ba1\u7b97\u673a\u80fd\u591f\u8046\u542c\u7528\u6237\u8bed\u97f3\u5e76\u786e\u5b9a\u6240\u8bf4\u7684\u5185\u5bb9\u3002\u5f53\u524d\u7684\u6280\u672f\u5c1a\u4e0d\u652f\u6301 \u4e0d\u53d7\u7ea6\u675f\u7684\u8bed\u97f3\u8bc6\u522b\uff1a\u80fd\u591f\u8046\u542c\u4efb\u4f55\u8bed\u5883\u4e2d\u7684\u4efb\u4f55\u8bed\u97f3\u5e76\u51c6\u786e\u8f6c\u5f55\u3002\u4e3a\u4e86\u5b9e\u73b0\u5408\u7406\u7684\u8bc6\u522b\u51c6\u786e\u5ea6\u548c\u54cd\u5e94\u65f6\u95f4\uff0c\u5f53\u524d\u7684\u8bed\u97f3\u8bc6\u522b\u5668\u4f7f\u7528\u8bed\u6cd5\u6765\u9650\u5236\u6240\u542c\u5185\u5bb9\u3002</p> <p>JSpeech \u8bed\u6cd5\u683c\u5f0f ( JSGF) \u5b9a\u4e49\u4e86\u4e00\u79cd\u72ec\u7acb\u4e8e\u5e73\u53f0\u3001\u72ec\u7acb\u4e8e\u4f9b\u5e94\u5546\u7684\u65b9\u5f0f\u6765\u63cf\u8ff0\u4e00\u79cd\u8bed\u6cd5\uff0c\u5373\u89c4\u5219\u8bed\u6cd5\uff08\u4e5f\u79f0\u4e3a\u547d\u4ee4\u548c\u63a7\u5236\u8bed\u6cd5\u6216\u5e38\u89c4\u8bed\u6cd5\uff09\u3002\u5b83\u4f7f\u7528\u5f00\u53d1\u4eba\u5458\u548c\u8ba1\u7b97\u673a\u5747\u53ef\u8bfb\u53d6\u548c\u7f16\u8f91\u7684\u6587\u672c\u8868\u793a\uff0c\u5e76\u4e14\u53ef\u4ee5\u5305\u542b\u5728\u6e90\u4ee3\u7801\u4e2d\u3002\u672c\u6587\u4e0d\u8ba8\u8bba \u53e6\u4e00\u79cd\u4e3b\u8981\u8bed\u6cd5\u7c7b\u578b\uff0c\u5373\u542c\u5199\u8bed\u6cd5\u3002</p> <p>\u89c4\u5219\u8bed\u6cd5\u6307\u5b9a\u7528\u6237\u53ef\u80fd\u8bf4\u51fa\u7684\u8bdd\u8bed \u7c7b\u578b\uff08\u53e3\u5934\u8bdd\u8bed\u7c7b\u4f3c\u4e8e\u4e66\u9762\u53e5\u5b50\uff09\u3002\u4f8b\u5982\uff0c\u7b80\u5355\u7684\u7a97\u53e3\u63a7\u5236\u8bed\u6cd5\u53ef\u80fd\u4f1a\u76d1\u542c\u201c\u6253\u5f00\u6587\u4ef6\u201d\u3001\u201c\u5173\u95ed\u7a97\u53e3\u201d\u7b49\u7c7b\u4f3c\u547d\u4ee4\u3002</p> <p>\u7528\u6237\u80fd\u8bf4\u4ec0\u4e48\u53d6\u51b3\u4e8e\u4e0a\u4e0b\u6587\uff1a\u7528\u6237\u662f\u5728\u63a7\u5236\u7535\u5b50\u90ae\u4ef6\u5e94\u7528\u7a0b\u5e8f\u3001\u8bfb\u4fe1\u7528\u5361\u53f7\u8fd8\u662f\u9009\u62e9\u5b57\u4f53\uff1f\u5e94\u7528\u7a0b\u5e8f\u77e5\u9053\u4e0a\u4e0b\u6587\uff0c\u56e0\u6b64\u5e94\u7528\u7a0b\u5e8f\u8d1f\u8d23\u4e3a\u8bed\u97f3\u8bc6\u522b\u5668\u63d0\u4f9b\u9002\u5f53\u7684\u8bed\u6cd5\u3002</p> <p>\u672c\u6587\u6863\u662f JSpeech \u8bed\u6cd5\u683c\u5f0f\u7684\u89c4\u8303\u3002\u9996\u5148\uff0c\u63cf\u8ff0\u4e86\u57fa\u672c\u547d\u540d\u548c\u7ed3\u6784\u673a\u5236\u3002\u7136\u540e\uff0c\u63cf\u8ff0\u4e86\u8bed\u6cd5\u7684\u57fa\u672c\u7ec4\u6210\u90e8\u5206\uff0c\u5373\u8bed\u6cd5\u5934\u548c\u8bed\u6cd5\u4e3b\u4f53\u3002\u8bed\u6cd5\u5934\u58f0\u660e\u4e86\u8bed\u6cd5\u540d\u79f0\u5e76\u5217\u51fa\u4e86 \u5bfc\u5165\u7684\u89c4\u5219\u548c\u8bed\u6cd5\u3002\u8bed\u6cd5\u4e3b\u4f53\u5c06\u6b64\u8bed\u6cd5\u7684\u89c4\u5219\u5b9a\u4e49\u4e3a\u53ef\u6717\u8bfb\u6587\u672c\u548c\u5bf9\u5176\u4ed6\u89c4\u5219\u7684\u5f15\u7528\u7684\u7ec4\u5408\u3002\u6700\u540e\uff0c\u63d0\u4f9b\u4e86\u4e00\u4e9b\u8bed\u6cd5\u58f0\u660e\u7684\u7b80\u5355\u793a\u4f8b\u3002</p>"},{"location":"speech_and_language_processing/jsgf/jsgf/#11","title":"1.1 \u76f8\u5173\u6587\u6863","text":"<p>\u4ee5\u4e0b\u662f\u53ef\u80fd\u6709\u52a9\u4e8e\u7406\u89e3\u548c\u4f7f\u7528 JSpeech \u8bed\u6cd5\u683c\u5f0f\u7684\u76f8\u5173\u6587\u6863\u5217\u8868\u3002</p> <p>JSpeech \u8bed\u6cd5\u683c\u5f0f\u91c7\u7528\u4e86 Java TM\u7f16\u7a0b\u8bed\u8a00 \u7684\u4e00\u4e9b\u98ce\u683c\u548c\u60ef\u4f8b\u3002\u5bf9\u5168\u9762\u89c4\u8303\u611f\u5174\u8da3\u7684\u8bfb\u8005\u53ef\u4ee5\u53c2\u9605 \u300aJava TM\u8bed\u8a00\u89c4\u8303\u300b\uff0cGosling\u3001Joy \u548c Steele\uff0cAddison Wesley\uff0c1996 \u5e74 (GJS96)\u3002</p> <p>JSpeech \u8bed\u6cd5\u683c\u5f0f\u4e2d\u7684\u8bed\u6cd5\u53ef\u4ee5\u7528 Unicode \u5b57\u7b26\u96c6\u7f16\u5199\uff0c\u5982\u300aUnicode \u6807\u51c6\u300b2.0 \u7248\uff08 Unicode Consortium\u3001Addison-Wesley Developers Press\u30011996 \u5e74\uff09\uff08Uni96\uff09\u4e2d\u6240\u5b9a\u4e49\u3002</p>"},{"location":"speech_and_language_processing/jsgf/jsgf/#2","title":"2. \u5b9a\u4e49","text":""},{"location":"speech_and_language_processing/jsgf/jsgf/#21","title":"2.1 \u8bed\u6cd5\u540d\u79f0\u548c\u5305\u540d\u79f0","text":"<p>JSpeech \u8bed\u6cd5\u683c\u5f0f\u5b9a\u4e49\u7684\u6bcf\u4e2a\u8bed\u6cd5\u89c4\u5219\u90fd\u6709\u4e00\u4e2a\u552f\u4e00\u7684\u540d\u79f0\uff0c\u8be5\u540d\u79f0\u5728\u8bed\u6cd5\u5934\u4e2d\u58f0\u660e\u3002\u8bed\u6cd5\u540d\u79f0\u7684\u5408\u6cd5\u7ed3\u6784\u4e3a\uff1a</p> Java<pre><code>packageName.simpleGrammarName   // \u7b2c\u4e00\u79cd\u5f62\u5f0f\uff1a\u5168\u540d\u79f0\ngrammarName                     // \u7b2c\u4e8c\u79cd\u5f62\u5f0f\uff1a\u7b80\u79f0\n</code></pre> <p>\u7b2c\u4e00\u79cd\u5f62\u5f0f\uff08\u5305\u540d+\u7b80\u5355\u8bed\u6cd5\u540d\uff09\u662f\u5b8c\u6574\u8bed\u6cd5\u540d\u3002\u7b2c\u4e8c\u79cd\u5f62\u5f0f\u662f\u7b80\u5355\u8bed\u6cd5\u540d\uff08\u53ea\u6709\u8bed\u6cd5\u540d\uff09\u3002\u5b8c\u6574\u8bed\u6cd5\u540d\u548c\u7b80\u5355\u8bed\u6cd5\u540d\u7684\u793a\u4f8b\u5305\u62ec\uff1a</p> Java<pre><code>com.sun.speech.apps.numbers\nedu.unsw.med.people\nexamples\n</code></pre> <p>\u5305\u540d\u548c\u8bed\u6cd5\u540d\u7684\u683c\u5f0f\u4e0e Java <sup>TM</sup> \u7f16\u7a0b\u8bed\u8a00\u4e2d\u7684\u5305\u548c\u7c7b\u76f8\u540c\u3002\u5b8c\u6574\u7684\u8bed\u6cd5\u540d\u662f\u7528\u70b9\u5206\u9694\u7684\u6807\u8bc6\u7b26\uff08\u8bf7\u53c2\u9605\u201cJava \u8bed\u8a00\u89c4\u8303\u201d\uff0cGosling\u3001Joy \u548c Steele\uff0cAddison Wesley\uff0c1996 \u5e74\uff0c(GJS96) \u00a73.8 \u548c \u00a76.5\uff09\u3002</p> <p>JSGF \u8bed\u6cd5\u547d\u540d\u7ea6\u5b9a\u4e5f\u9075\u5faa Java \u7f16\u7a0b\u8bed\u8a00\u4e2d\u7c7b\u7684\u547d\u540d\u7ea6\u5b9a\uff08\u53c2\u89c1 GJS96\uff09\u3002\u8be5\u7ea6\u5b9a\u6700\u5927\u9650\u5ea6\u5730\u51cf\u5c11\u4e86\u547d\u540d\u51b2\u7a81\u7684\u53ef\u80fd\u6027\u3002 \u5305\u540d\u79f0\u5e94\u4e3a\uff1a</p> Java<pre><code>reversedDomainName\u3002localPackaging\n</code></pre> <p>\u4f8b\u5982\uff0c<code>\u5bf9\u4e8ecom.sun.speech.apps.numbers</code>\uff0c\u5176\u4e2d * <code>com.sun</code> \u90e8\u5206\u662f Sun \u7684\u53cd\u5411 Internet \u57df\u540d\uff0c * <code>speech.apps</code> \u662f Sun \u8303\u56f4\u5185\u5212\u5206\u540d\u79f0\u7a7a\u95f4\u7684\u672c\u5730\u5305\u540d\u79f0\uff0c * <code>numbers</code> \u662f\u7b80\u5355\u8bed\u6cd5\u540d\u79f0\u3002</p>"},{"location":"speech_and_language_processing/jsgf/jsgf/#22","title":"2.2 \u89c4\u5219\u540d\u79f0","text":"<p>\u8bed\u6cd5\u7531\u4e00\u7ec4\u89c4\u5219\u7ec4\u6210\uff0c\u8fd9\u4e9b\u89c4\u5219\u5171\u540c\u5b9a\u4e49\u4e86\u7528\u6237\u53ef\u80fd\u8bf4\u51fa\u7684\u5185\u5bb9\u3002\u89c4\u5219\u7531\u53ef\u80fd\u8bf4\u51fa\u7684\u6587\u672c\u4e0e\u5bf9\u5176\u4ed6\u89c4\u5219\u7684\u5f15\u7528\u7ec4\u5408\u3002\u6bcf\u6761\u89c4\u5219\u90fd\u6709\u4e00\u4e2a\u552f\u4e00\u7684 \u89c4\u5219\u540d\u79f0\u3002\u5bf9\u89c4\u5219\u7684\u5f15\u7528\u7528 <code>&lt;&gt;</code> \u5305\u542b\u89c4\u5219\u540d\u79f0\u5b57\u7b26\uff08\u5c0f\u4e8e\u548c\u5927\u4e8e\uff09\u6765\u8868\u793a\u3002</p> <p>\u5408\u6cd5\u89c4\u5219\u540d\u79f0\u7c7b\u4f3c\u4e8e Java \u7f16\u7a0b\u8bed\u8a00\u4e2d\u7684\u6807\u8bc6\u7b26\uff0c\u4f46\u5141\u8bb8\u4f7f\u7528\u5176\u4ed6\u989d\u5916\u7b26\u53f7\u3002\u5408\u6cd5\u89c4\u5219\u540d\u79f0\u662f\u65e0\u9650\u957f\u5ea6 Unicode \u5b57\u7b26\u5e8f\u5217\uff0c\u9700\u8981\u6ee1\u8db3\u4ee5\u4e0b2\u4e2a\u89c4\u5219\uff1a</p> <ul> <li>Java \u7f16\u7a0b\u8bed\u8a00\u6807\u8bc6\u7b26\u4e2d\u5408\u6cd5\u7684\u4efb\u4f55\u5b57\u7b26\u3002</li> <li>\u4ee5\u4e0b\u9644\u52a0\u6807\u70b9\u7b26\u53f7\uff1a<code>+ - : ; , = | / \\ ( ) [ ] @ # % ! ^ &amp; ~</code></li> </ul> <p>\u8bed\u6cd5\u5f00\u53d1\u4eba\u5458\u5e94\u8be5\u6ce8\u610f\u4e24\u4e2a\u7279\u5b9a\u7684\u9650\u5236\u3002\u9996\u5148\uff0c\u89c4\u5219\u540d\u79f0\u4e0e\u7cbe\u786e\u7684 Unicode \u5b57\u7b26\u4e32\u5339\u914d\u8fdb\u884c\u6bd4\u8f83\uff0c\u56e0\u6b64\u5927\u5c0f\u5199\u5f88\u91cd\u8981\u3002\u4f8b\u5982\uff0c<code>&lt;Name&gt;</code> \u548c<code>&lt;NAME&gt;</code> \u662f <code>&lt;name&gt;</code> \u4e0d\u540c\u7684\u3002\u5176\u6b21\uff0c\u89c4\u5219\u540d\u79f0\u4e2d\u4e0d\u5141\u8bb8\u4f7f\u7528 <code>\u7a7a\u683c</code> \u3002</p> <p>\u89c4\u5219\u540d\u79f0 <code>&lt;NULL&gt;</code> \u548c <code>&lt;VOID&gt;</code> \u662f\u4fdd\u7559\u7684\u3002\u8fd9\u4e9b\u7279\u6b8a\u89c4\u5219\u5c06\u5728\u672c\u8282\u540e\u9762\u8ba8\u8bba\u3002</p> <p>Unicode \u5b57\u7b26\u96c6\u6db5\u76d6\u4e86\u4e16\u754c\u4e0a\u5927\u591a\u6570\u73b0\u5b58\u8bed\u8a00\u7684\u4e66\u5199\u811a\u672c\uff0c\u56e0\u6b64\u89c4\u5219\u540d\u79f0\u53ef\u4ee5\u7528\u4e2d\u6587\u3001\u65e5\u8bed\u3001\u97e9\u8bed\u3001\u6cf0\u8bed\u3001\u963f\u62c9\u4f2f\u8bed\u3001\u6b27\u6d32\u8bed\u8a00\u7b49\u591a\u79cd\u8bed\u8a00\u4e66\u5199\u3002\u4ee5\u4e0b\u662f\u89c4\u5219\u540d\u79f0\u7684\u793a\u4f8b\u3002</p> <ul> <li><code>&lt;hell&gt;</code></li> <li><code>&lt;Z\u00fcrich&gt;</code></li> <li><code>&lt;user_test&gt;</code></li> <li><code>&lt;$100&gt;</code></li> <li><code>&lt;1+2=3&gt;</code></li> <li>\\(&lt;\\pi\\alpha\\beta&gt;\\)</li> </ul>"},{"location":"speech_and_language_processing/jsgf/jsgf/#221","title":"2.2.1 \u9650\u5b9a\u540d\u79f0\u548c\u5b8c\u5168\u9650\u5b9a\u540d\u79f0","text":"<p>\u5c3d\u7ba1\u89c4\u5219\u540d\u79f0\u5728\u8bed\u6cd5\u4e2d\u662f\u552f\u4e00\u7684\uff0c\u4f46\u4e0d\u540c\u7684\u8bed\u6cd5\u53ef\u80fd\u4f1a\u91cd\u7528\u76f8\u540c\u7684\u7b80\u5355\u89c4\u5219\u540d\u79f0\u3002\u540e\u9762\u7684\u90e8\u5206\u5c06\u4ecb\u7ecd <code>import</code> \u8bed\u53e5\uff0c\u5b83\u5141\u8bb8\u4e00\u4e2a\u8bed\u6cd5\u5f15\u7528\u53e6\u4e00\u4e2a\u8bed\u6cd5\u4e2d\u7684\u89c4\u5219\u3002\u5f53\u4e24\u4e2a\u8bed\u6cd5\u4f7f\u7528\u76f8\u540c\u7684\u89c4\u5219\u540d\u79f0\u65f6\uff0c\u5bf9\u8be5\u89c4\u5219\u540d\u79f0\u7684\u5f15\u7528\u53ef\u80fd\u4f1a\u4ea7\u751f\u6b67\u4e49\u3002\u9650\u5b9a\u540d\u79f0 \u548c \u5b8c\u5168\u9650\u5b9a\u540d\u79f0 \u7528\u4e8e\u5728\u8bed\u6cd5\u4e4b\u95f4\u8fdb\u884c\u65e0\u6b67\u4e49\u7684\u5f15\u7528\u3002</p> <p>\u5b8c\u5168\u9650\u5b9a\u89c4\u5219\u540d\u79f0\u5305\u62ec \u5b8c\u6574\u8bed\u6cd5\u540d\u79f0 \u548c \u7b80\u5355\u89c4\u5219\u540d\u79f0\u3002\u4f8b\u5982\uff1a</p> Java<pre><code>&lt;com.sun.greetings.english.hello&gt;\n&lt;com.sun.greetings.deutsch.gutenTag&gt;\n</code></pre> <p>\u9650\u5b9a\u89c4\u5219\u540d\u79f0\u4ec5\u5305\u542b\u7b80\u5355\u8bed\u6cd5\u540d\u79f0\u548c\u89c4\u5219\u540d\u79f0\u662f\u4e00\u79cd\u6709\u7528\u7684\u7b80\u5199\u8868\u793a\u3002\u4f8b\u5982\uff1a</p> Java<pre><code>&lt;english.hello&gt;\n&lt;deutsch.gutenTag&gt;\n</code></pre> <p>\u89c4\u5219\u540d\u79f0\u7684\u4f7f\u7528\u9700\u9075\u5b88\u4ee5\u4e0b\u6761\u4ef6\uff1a</p> <ul> <li>\u9650\u5b9a\u7684\u548c\u5b8c\u5168\u9650\u5b9a\u7684\u89c4\u5219\u540d\u79f0\u4e0d\u80fd\u7528\u5728\u89c4\u5219\u5b9a\u4e49\u7684\u5de6\u4fa7\u3002</li> <li>\u5bfc\u5165\u8bed\u53e5\u5fc5\u987b\u4f7f\u7528\u5b8c\u5168\u9650\u5b9a\u7684\u89c4\u5219\u540d\u79f0\u3002</li> <li>\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u5f62\u5f0f\u901a\u8fc7\u9650\u5b9a\u540d\u79f0\u548c\u5b8c\u5168\u9650\u5b9a\u540d\u79f0\u6765\u5f15\u7528\u672c\u5730\u89c4\u5219 <code>&lt;localGrammarName.ruleName&gt;</code>\u3002</li> </ul> <p>2.2.2 \u89e3\u6790\u89c4\u5219\u540d\u79f0 \u4f7f\u7528\u5bf9\u89c4\u5219\u540d\u79f0\u7684\u6a21\u7cca\u5f15\u7528\u662f\u9519\u8bef\u7684\u3002\u4ee5\u4e0b\u5b9a\u4e49\u4e86\u89e3\u6790\u5f15\u7528\u7684\u884c\u4e3a\uff1a</p> <p>\u672c\u5730\u89c4\u5219\u4f18\u5148\u3002\u5982\u679c\u672c\u5730\u89c4\u5219\u548c\u4e00\u4e2a\u6216\u591a\u4e2a\u5bfc\u5165\u89c4\u5219\u5177\u6709\u76f8\u540c\u7684\u540d\u79f0\uff0c\u5219\u5bf9\u7684\u7b80\u5355\u89c4\u5219\u5f15\u7528\u5c31\u662f\u5bf9\u672c\u5730\u89c4\u5219\u7684\u5f15\u7528\u3002 \u5982\u679c\u4e24\u4e2a\u6216\u591a\u4e2a\u5bfc\u5165\u89c4\u5219\u5177\u6709\u76f8\u540c\u7684\u540d\u79f0\uff0c\u4f46\u6ca1\u6709\u540c\u540d\u7684\u672c\u5730\u89c4\u5219\uff0c\u5219\u5bf9\u7684\u7b80\u5355\u89c4\u5219\u5f15\u7528\u4f1a\u4ea7\u751f\u6b67\u4e49\u5e76\u4e14\u4f1a\u51fa\u9519\u3002\u8981\u89e3\u51b3\u8fd9\u79cd\u6b67\u4e49\uff0c\u5fc5\u987b\u4f7f\u7528\u5176\u9650\u5b9a\u6216\u5b8c\u5168\u9650\u5b9a\u7684\u540d\u79f0\u6765\u5f15\u7528\u8fd9\u4e9b\u5bfc\u5165\u89c4\u5219\u3002 \u5982\u679c\u4e24\u4e2a\u6216\u591a\u4e2a\u5bfc\u5165\u89c4\u5219\u5177\u6709\u76f8\u540c\u7684\u540d\u79f0\uff0c\u5e76\u4e14\u6765\u81ea\u5177\u6709\u76f8\u540c\u7b80\u5355\u8bed\u6cd5\u540d\u79f0\uff08\u4f46\u5305\u540d\u79f0\u5fc5\u7136\u4e0d\u540c\uff09\u7684\u8bed\u6cd5\uff0c\u5219\u7b80\u5355\u89c4\u5219\u5f15\u7528\u6216\u9650\u5b9a\u89c4\u5219\u5f15\u7528\u4f1a\u4ea7\u751f\u6b67\u4e49\uff0c\u5e76\u4e14\u4f1a\u4ea7\u751f\u9519\u8bef\u3002\u8fd9\u4e9b\u5bfc\u5165\u89c4\u5219\u5fc5\u987b\u901a\u8fc7\u5176\u5b8c\u5168\u9650\u5b9a\u540d\u79f0\u6765\u5f15\u7528\u3002 \u5b8c\u5168\u9650\u5b9a\u89c4\u5219\u540d\u79f0\u7684\u5f15\u7528\u6c38\u8fdc\u4e0d\u4f1a\u4ea7\u751f\u6b67\u4e49\u3002 \u5f53\u89c4\u5219\u540d\u79f0\u5f15\u7528\u65e0\u6cd5\u89e3\u6790\uff08\u672a\u5728\u672c\u5730\u5b9a\u4e49\u4e14\u4e0d\u662f\u5bfc\u5165\u8bed\u6cd5\u7684\u516c\u5171\u89c4\u5219\uff09\u65f6\uff0c\u8be5\u5f15\u7528\u7684\u5904\u7406\u7531\u8bc6\u522b\u5668\u7684\u8f6f\u4ef6\u63a5\u53e34 \u5b9a\u4e49\u3002 <p>2.2.3 \u7279\u6b8a\u89c4\u5219\u540d JSpeech \u8bed\u6cd5\u683c\u5f0f\u5b9a\u4e49\u4e86\u4e24\u4e2a\u7279\u6b8a\u89c4\u5219\uff0c\u548c \u3002\u8fd9\u4e9b\u89c4\u5219\u662f\u901a\u7528\u5b9a\u4e49\u7684 - \u5b83\u4eec\u53ef\u7528\u4e8e\u4efb\u4f55\u8bed\u6cd5\uff0c\u65e0\u9700\u663e\u5f0f\u5bfc\u5165\u8bed\u53e5 - \u5e76\u4e14\u65e0\u6cd5\u91cd\u65b0\u5b9a\u4e49\u3002\u8fd9\u4e24\u4e2a\u540d\u79f0\u90fd\u662f\u5b8c\u5168\u9650\u5b9a\u7684\uff0c\u56e0\u6b64\u4e0d\u9700\u8981\u9650\u5b9a\u8bed\u6cd5\u540d\u79f0\u3002 <p>\u5b9a\u4e49\u81ea\u52a8\u5339\u914d\u7684\u89c4\u5219\uff1a\u5373\u65e0\u9700\u7528\u6237\u8bf4\u4efb\u4f55\u8bdd\u5c31\u8fdb\u884c\u5339\u914d\u3002 <p>\u5b9a\u4e49\u4e00\u6761\u6c38\u8fdc\u4e0d\u80fd\u8bf4\u51fa\u6765\u7684\u89c4\u5219\u3002\u63d2\u5165\u5e8f\u5217\u4f1a\u81ea\u52a8\u4f7f\u8be5\u5e8f\u5217\u65e0\u6cd5\u8bf4\u51fa\u67655\u3002 <p>\u548c \u89c4\u5219\u901a\u5e38\u7528\u4e8e\u7279\u6b8a\u60c5\u51b5\u3002\u5b83\u4eec\u53ef\u7528\u4e8e\u963b\u6b62\u548c\u542f\u7528\u90e8\u5206\u8bed\u6cd5\u3001\u63a7\u5236\u9012\u5f52\u4ee5\u53ca\u6267\u884c\u5176\u4ed6\u9ad8\u7ea7\u4efb\u52a1\u3002 \u548c \u7684\u7528\u9014\u5c06\u5728\u672c\u6587\u6863\u540e\u9762\u4ecb\u7ecd\u3002 <p>2.3 \u4ee3\u5e01 \u6807\u8bb0\uff08\u6709\u65f6\u79f0\u4e3a\u7ec8\u7aef\u7b26\u53f7\uff09\u662f\u8bed\u6cd5\u7684\u4e00\u90e8\u5206\uff0c\u7528\u4e8e\u5b9a\u4e49\u7528\u6237\u53ef\u4ee5\u8bf4\u51fa\u7684\u5185\u5bb9\u3002\u901a\u5e38\uff0c\u6807\u8bb0\u76f8\u5f53\u4e8e\u5355\u8bcd\u3002\u6807\u8bb0\u53ef\u4ee5\u5355\u72ec\u51fa\u73b0\uff0c\u4f8b\u5982\uff0c</p> <p>\u4f60\u597d \u4f60\u4eca\u5929 \u6216\u8005\u4ee5\u7a7a\u683c\u5b57\u7b26\u5206\u9694\u7684\u6807\u8bb0\u5e8f\u5217\uff0c\u4f8b\u5982\uff0c</p> <p>\u8fd9\u662f\u4e00\u4e2a\u6d4b\u8bd5 \u6253\u5f00\u76ee\u5f55 \u5728 JSpeech \u8bed\u6cd5\u683c\u5f0f\u4e2d\uff0c\u6807\u8bb0\u662f\u7531\u7a7a\u683c\u3001\u5f15\u53f7\u6216\u8bed\u6cd5\u4e2d\u91cd\u8981\u7684\u5176\u4ed6\u7b26\u53f7\u5206\u9694\u7684\u5b57\u7b26\u5e8f\u5217\uff1a</p> <p>; = | * + &lt;&gt; () [] {} / / // \u6807\u8bb0\u662f\u5bf9\u8bc6\u522b\u5668\u8bcd\u6c47\u8868 \u4e2d\u6761\u76ee\u7684\u5f15\u7528\uff0c\u901a\u5e38\u79f0\u4e3a\u8bcd\u5178\u3002\u8bc6\u522b\u5668\u7684\u8bcd\u6c47\u8868\u5b9a\u4e49\u4e86\u6807\u8bb0\u7684\u53d1\u97f3\u3002\u6709\u4e86\u53d1\u97f3\uff0c\u8bc6\u522b\u5668\u5c31\u53ef\u4ee5\u542c\u53d6\u8be5\u6807\u8bb0\u3002</p> <p>JSpeech \u8bed\u6cd5\u683c\u5f0f\u5141\u8bb8\u591a\u8bed\u8a00\u8bed\u6cd5\uff0c\u5373\u5305\u542b\u6765\u81ea\u591a\u79cd\u8bed\u8a00\u7684\u6807\u8bb0\u7684\u8bed\u6cd5\u3002\u4f46\u662f\uff0c\u5927\u591a\u6570\u8bc6\u522b\u5668\u90fd\u4ee5\u5355\u8bed\u65b9\u5f0f\u8fd0\u884c\uff0c\u56e0\u6b64\u5178\u578b\u7684\u8bed\u6cd5\u5c06\u4ec5\u5305\u542b\u4e00\u79cd\u8bed\u8a00\u3002\u5c06\u8bed\u6cd5\u52a0\u8f7d\u5230\u8bc6\u522b\u5668\u4e2d\u7684\u5e94\u7528\u7a0b\u5e8f\u6709\u8d23\u4efb\u786e\u4fdd\u5176\u5177\u6709\u9002\u5f53\u7684\u8bed\u8a00\u652f\u6301\u3002\u4f8b\u5982\uff0c\u4ee5\u4e0b\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u591a\u8bed\u8a00\u89c4\u5219\u3002</p> <p>&lt;\u5426&gt; = \u5426 |\u4e0d |\u5948\u5965 |\u975e |\u5185\u59c6\uff1b \u5927\u591a\u6570\u8bc6\u522b\u5668\u90fd\u4e3a\u6240\u652f\u6301\u7684\u6bcf\u79cd\u8bed\u8a00\u63d0\u4f9b\u4e86\u5168\u9762\u7684\u8bcd\u6c47\u8868\u3002\u4f46\u662f\uff0c\u4e0d\u53ef\u80fd 100% \u5730\u6db5\u76d6\u67d0\u79cd\u8bed\u8a00\u3002\u4f8b\u5982\uff0c\u8bcd\u6c47\u8868\u4e2d\u7ecf\u5e38\u7f3a\u5c11\u540d\u79f0\u3001\u6280\u672f\u672f\u8bed\u548c\u5916\u6765\u8bcd\u3002\u5bf9\u4e8e\u8bcd\u6c47\u8868\u4e2d\u7f3a\u5c11\u7684\u6807\u8bb0\uff0c\u6709\u4e09\u79cd\u53ef\u80fd\u6027\uff1a</p> <p>\u5e94\u7528\u7a0b\u5e8f\u6216\u7528\u6237\u53ef\u4ee5\u5c06\u6807\u8bb0\u548c\u53d1\u97f3\u6dfb\u52a0\u5230\u8bc6\u522b\u5668\u7684\u8bcd\u6c47\u8868\u4e2d\uff0c\u4ee5\u786e\u4fdd\u4e00\u81f4\u7684\u8bc6\u522b\u3002 \u597d\u7684\u8bc6\u522b\u5668\u80fd\u591f\u731c\u51fa\u8bcd\u6c47\u8868\u4e2d\u6ca1\u6709\u7684\u8bb8\u591a\u5355\u8bcd\u7684\u53d1\u97f3\u3002 \u5982\u679c\u4ee5\u4e0a\u4e24\u70b9\u90fd\u4e0d\u9002\u7528\uff0c\u5219\u884c\u4e3a\u7531\u8bc6\u522b\u5668\u7684\u8f6f\u4ef6\u63a5\u53e3\u51b3\u5b9a\u3002\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u672a\u5b9a\u4e49\u7684\u6807\u8bb0\u5c06\u65e0\u6cd5\u53d1\u97f3\uff08\u76f8\u5f53\u4e8e\uff09\uff0c\u6216\u8005\u4f1a\u5bfc\u81f4\u9519\u8bef\u6216\u5f02\u5e38\u3002 \u6807\u8bb0\u4e0d\u5fc5\u662f\u8bed\u8a00\u7684\u6b63\u5e38\u4e66\u5199\u5355\u8bcd\uff0c\u53ea\u8981\u6807\u8bb0\u5728\u8bc6\u522b\u5668\u8bcd\u6c47\u8868\u4e2d\u6b63\u786e\u5b9a\u4e49\u5373\u53ef\u3002\u4f8b\u5982\uff0c\u4e3a\u4e86\u5904\u7406\u201cread\u201d\u7684\u4e24\u79cd\u53d1\u97f3\uff08\u8fc7\u53bb\u65f6\u542c\u8d77\u6765\u50cf\u201cred\u201d\uff0c\u73b0\u5728\u65f6\u542c\u8d77\u6765\u50cf\u201creed\u201d\uff09\uff0c\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u5b9a\u4e49\u4e24\u4e2a\u5355\u72ec\u7684\u6807\u8bb0\u201cread_past\u201d\u548c\u201cread_present\u201d\uff0c\u5e76\u8d4b\u4e88\u5176\u9002\u5f53\u7684\u53d1\u97f3\u3002 <p>2.3.1 \u5f15\u7528\u4ee3\u5e01 \u6807\u8bb0\u4e0d\u4e00\u5b9a\u662f\u5355\u8bcd\u3002\u6807\u8bb0\u53ef\u4ee5\u662f\u5355\u8bcd\u5e8f\u5217\u6216\u7b26\u53f7\u3002\u53ef\u4ee5\u4f7f\u7528\u5f15\u53f7\u5c06\u591a\u5355\u8bcd\u6807\u8bb0\u548c\u7279\u6b8a\u7b26\u53f7\u62ec\u8d77\u6765\u3002\u4f8b\u5982\uff1a</p> <p>\u201c\u7ebd\u7ea6\u201d\u5730\u94c1 \u201c+\u201d \u5f53\u5355\u8bcd\u7684\u53d1\u97f3\u56e0\u4e0a\u4e0b\u6587\u800c\u5f02\u65f6\uff0c\u591a\u8bcd\u6807\u8bb0\u5f88\u6709\u7528\u3002\u591a\u8bcd\u6807\u8bb0\u8fd8\u53ef\u7528\u4e8e\u7b80\u5316\u7ed3\u679c\u5904\u7406\uff0c\u4f8b\u5982\uff0c\u83b7\u53d6\u201c\u7ebd\u7ea6\u201d\u3001\u201c\u6089\u5c3c\u201d\u548c\u201c\u91cc\u7ea6\u70ed\u5185\u5362\u201d\u7684\u5355\u8bcd\u6807\u8bb0\u7ed3\u679c\u3002</p> <p>\u5e26\u5f15\u53f7\u7684\u6807\u8bb0\u53ef\u4ee5\u50cf\u4efb\u4f55\u5176\u4ed6\u6807\u8bb0\u4e00\u6837\u5305\u542b\u5728\u8bc6\u522b\u5668\u7684\u8bcd\u6c47\u8868\u4e2d\u3002\u5982\u679c\u8bcd\u6c47\u8868\u4e2d\u672a\u627e\u5230\u591a\u8bcd\u5e26\u5f15\u53f7\u7684\u6807\u8bb0\uff0c\u5219\u9ed8\u8ba4\u884c\u4e3a\u662f\u786e\u5b9a\u5f15\u53f7\u5185\u6bcf\u4e2a\u7a7a\u683c\u5206\u9694\u7684\u6807\u8bb0\u7684\u53d1\u97f3\uff0c\u5426\u5219\u5c06\u5f15\u53f7\u5185\u7684\u6587\u672c\u89c6\u4e3a\u5355\u4e2a\u6807\u8bb0\u3002</p> <p>\u8981\u5728\u6807\u8bb0\u4e2d\u5305\u542b\u5f15\u53f7\u7b26\u53f7\uff0c\u5fc5\u987b\u4f7f\u7528\u5f15\u53f7\uff0c\u5e76\u4e14\u6807\u8bb0\u5185\u7684\u5f15\u53f7\u524d\u9762\u5fc5\u987b\u6709\u4e00\u4e2a\u53cd\u659c\u6760\u201c\\\u201d\u3002\u540c\u6837\uff0c\u8981\u5728\u5e26\u5f15\u53f7\u7684\u6807\u8bb0\u4e2d\u5305\u542b\u53cd\u659c\u6760\uff0c\u5219\u5e94\u5728\u5176\u524d\u9762\u52a0\u4e0a\u53e6\u4e00\u4e2a\u53cd\u659c\u6760\u3002\u4f8b\u5982\uff0c\u4ee5\u4e0b\u662f\u4e24\u4e2a\u8868\u793a\u5355\u4e2a\u53cd\u659c\u6760\u548c\u5355\u4e2a\u5f15\u53f7\u5b57\u7b26\u7684\u6807\u8bb0\u3002</p> <p>\u201c\\\u201d \u201c\\\u201d\u201d \u5f15\u7528\u7684\u6807\u8bb0\u4e2d\u7684\u7a7a\u767d\u975e\u5e38\u91cd\u8981\u3002</p> <p>2.3.2 \u7b26\u53f7\u548c\u6807\u70b9 \u5927\u591a\u6570\u8bed\u97f3\u8bc6\u522b\u5668\u90fd\u80fd\u591f\u5904\u7406\u5e38\u89c1\u7b26\u53f7\u548c\u6807\u70b9\u7b26\u53f7\u3002\u4f8b\u5982\uff0c\u82f1\u8bed\u8bc6\u522b\u5668\u901a\u5e38\u4f1a\u5904\u7406\u6487\u53f7\uff08\u201cMary's\u201d\u3001\u201cit's\u201d\uff09\u548c\u8fde\u5b57\u7b26\uff08\u201cnew-age\u201d\uff09\u3002</p> <p>\u7136\u800c\uff0c\u6709\u8bb8\u591a\u6587\u672c\u5f62\u5f0f\u5bf9\u4e8e\u8bc6\u522b\u5668\u6765\u8bf4\u5f88\u96be\u660e\u786e\u5904\u7406\u3002\u5728\u8fd9\u4e9b\u60c5\u51b5\u4e0b\uff0c\u8bed\u6cd5\u5f00\u53d1\u4eba\u5458\u5e94\u4f7f\u7528\u5c3d\u53ef\u80fd\u63a5\u8fd1\u4eba\u4eec\u8bf4\u8bdd\u65b9\u5f0f\u4e14\u53ef\u80fd\u5185\u7f6e\u4e8e\u8bcd\u6c47\u8868\u4e2d\u7684\u6807\u8bb0\u3002\u4ee5\u4e0b\u662f\u5e38\u89c1\u793a\u4f8b\u3002</p> <p>\u6570\u5b57\uff1a\u201c0 1 2\u201d\u5e94\u6269\u5c55\u4e3a\u201c\u96f6\u4e00\u4e8c\u201d\u6216\u201c\u54e6\u4e00\u4e8c\u201d\u3002\u540c\u6837\uff0c\u201ccall 555 1234\u201d\u5e94\u6269\u5c55\u4e3a\u201ccall five five five one two three four\u201d\u3002 \u65e5\u671f\uff1a\u201c1997 \u5e74 12 \u6708 25 \u65e5\u201d\u5e94\u5199\u4e3a\u201c1997 \u5e74 12 \u6708 25 \u65e5\u201d\u3002 \u7f29\u5199\u548c\u9996\u5b57\u6bcd\u7f29\u7565\u8bcd\uff1a\u201cMr.\u201d\u5e94\u5199\u4e3a\u201cmister\u201d\uff0c\u201cSt\u201d\u5e94\u5199\u4e3a\u201cstreet\u201d\u3002 \u7279\u6b8a\u7b26\u53f7\uff1a<code>&amp;' \u8868\u793a\u201c\u4e0e\u53f7\u201d\u6216\u201c\u548c\u201d\uff0c</code>+' \u8868\u793a\u201c\u52a0\u53f7\u201d\uff0c\u7b49\u7b49\u3002 2.4 \u8bc4\u8bba \u6ce8\u91ca\u53ef\u4ee5\u51fa\u73b0\u5728\u5934\u90e8\u548c\u4e3b\u4f53\u4e2d\u3002\u91c7\u7528 Java \u7f16\u7a0b\u8bed\u8a00\u7684\u6ce8\u91ca\u6837\u5f0f\uff08\u53c2\u89c1 GJS96\uff09\u3002\u6ce8\u91ca\u6709\u4e24\u79cd\u5f62\u5f0f\u3002</p> <p>/ \u6587\u672c /    \u4f20\u7edf\u6ce8\u91ca\u3002/ \u548c / \u4e4b\u95f4\u7684\u6240\u6709\u6587\u672c\u90fd\u5c06\u88ab\u5ffd\u7565\u3002 // \u6587\u672c   \u5355\u884c\u6ce8\u91ca\u3002\u4ece // \u5230\u884c\u5c3e\u7684\u6240\u6709\u6587\u672c\u90fd\u5c06\u88ab\u5ffd\u7565\u3002 \u6ce8\u91ca\u4e0d\u80fd\u5d4c\u5957\u3002\u6b64\u5916\uff0c//\u5728\u4ee5 \u5f00\u5934\u7684\u6ce8\u91ca\u4e2d\uff0c\u6ca1\u6709\u7279\u6b8a\u542b\u4e49/\u3002\u540c\u6837\uff0c/\u5728\u4ee5 \u5f00\u5934\u7684\u6ce8\u91ca\u4e2d\uff0c\u6ca1\u6709\u7279\u6b8a\u542b\u4e49//\u3002</p> <p>\u6ce8\u91ca\u53ef\u4ee5\u51fa\u73b0\u5728\u8bed\u6cd5\u5b9a\u4e49\u4e2d\u7684\u4efb\u4f55\u4f4d\u7f6e\uff0c\u9664\u4e86\u6807\u8bb0\u3001\u5f15\u7528\u7684\u6807\u8bb0\u3001\u89c4\u5219\u540d\u79f0\u3001\u6807\u7b7e\u548c\u6743\u91cd\u5185\u3002</p> <p>JSpeech \u8bed\u6cd5\u683c\u5f0f\u652f\u6301\u4e0e Java \u7f16\u7a0b\u8bed\u8a00 (GJS96, \u00a718) \u7684\u6587\u6863\u6ce8\u91ca\u98ce\u683c\u7c7b\u4f3c\u7684\u6587\u6863\u6ce8\u91ca\u3002\u8fd9\u4e9b\u7279\u6b8a\u6ce8\u91ca\u5728\u201c\u6587\u6863\u6ce8\u91ca\u201d\u4e00\u8282 \u4e2d\u5b9a\u4e49\u3002</p> <ol> <li>\u8bed\u6cd5\u6807\u9898 \u5355\u4e2a\u6587\u4ef6\u5b9a\u4e49\u5355\u4e2a\u8bed\u6cd5\u3002\u5b9a\u4e49\u8bed\u6cd5\u5305\u542b\u4e24\u90e8\u5206\uff1a\u8bed\u6cd5\u5934\u548c\u8bed\u6cd5\u4e3b\u4f53\u3002\u8bed\u6cd5\u5934\u5305\u62ec\u4e00\u4e2a\u81ea\u6807\u8bc6\u5934\uff0c\u58f0\u660e\u8bed\u6cd5\u7684\u540d\u79f0\u5e76\u58f0\u660e\u4ece\u5176\u4ed6\u8bed\u6cd5\u5bfc\u5165\u89c4\u5219\u3002\u4e3b\u4f53\u5b9a\u4e49\u8bed\u6cd5\u7684\u89c4\u5219\uff0c\u5176\u4e2d\u4e00\u4e9b\u89c4\u5219\u53ef\u80fd\u662f\u516c\u5f00\u7684\u3002</li> </ol> <p>3.1 \u81ea\u8bc6\u522b\u6807\u5934 JSpeech \u8bed\u6cd5\u683c\u5f0f\u6587\u6863\u4ee5\u81ea\u6807\u8bc6\u6807\u5934\u5f00\u5934\u3002\u6b64\u6807\u5934\u6807\u8bc6\u6587\u6863\u5305\u542b JSGF\uff0c\u5e76\u6307\u793a\u6b63\u5728\u4f7f\u7528\u7684 JSGF \u7248\u672c\uff08\u5f53\u524d\u4e3a\u201cV1.0\u201d\uff09\u3002\u63a5\u4e0b\u6765\uff0c\u6807\u5934\u53ef\u9009\u5730\u6307\u5b9a\u6587\u6863\u4e2d\u4f7f\u7528\u7684\u5b57\u7b26\u7f16\u7801\u3002\u6807\u5934\u8fd8\u53ef\u4ee5\u53ef\u9009\u5730\u6307\u5b9a\u6587\u6863\u4e2d\u6307\u5b9a\u7684\u8bed\u6cd5\u7684\u8bed\u8a00\u73af\u5883\u3002\u8bed\u8a00\u73af\u58836\u6307\u5b9a\u8bed\u6cd5\u652f\u6301\u7684\u8bed\u8a00\u548c\u53ef\u9009\u7684\u56fd\u5bb6\u6216\u5730\u533a\u53d8\u4f53\u3002\u6807\u5934\u4ee5\u5206\u53f7\u5b57\u7b26\u548c\u6362\u884c\u7b26\u7ed3\u675f\u3002</p> <p>\u6807\u9898\u683c\u5f0f\u4e3a\uff1a</p>"},{"location":"speech_and_language_processing/jsgf/jsgf/#jsgf-char-encoding-locale","title":"JSGF \u7248\u672c char-encoding locale\uff1b","text":"<p>\u4ee5\u4e0b\u662f\u81ea\u8bc6\u522b\u6807\u9898\u7684\u793a\u4f8b\u3002</p>"},{"location":"speech_and_language_processing/jsgf/jsgf/#jsgf-v10","title":"JSGF V1.0\uff1b","text":""},{"location":"speech_and_language_processing/jsgf/jsgf/#jsgf-v10-iso8859-5","title":"JSGF V1.0 ISO8859-5\uff1b","text":""},{"location":"speech_and_language_processing/jsgf/jsgf/#jsgf-v10-jis-ja","title":"JSGF V1.0 JIS ja;","text":"<p>\u7b2c\u4e00\u4e2a\u4f8b\u5b50\u6ca1\u6709\u63d0\u4f9b\u5b57\u7b26\u7f16\u7801\u6216\u8bed\u8a00\u73af\u5883\uff0c\u56e0\u6b64\u4f1a\u5047\u5b9a\u4e00\u4e2a\u5408\u7406\u7684\u9ed8\u8ba4\u503c\u3002\u5728\u7f8e\u56fd\uff0c\u9ed8\u8ba4\u503c\u53ef\u80fd\u662f ISO8859-1\uff08\u6807\u51c6\u5b57\u7b26\u96c6\uff09\u548c\u201cen\u201d\uff08\u82f1\u8bed\u7b26\u53f7\uff09\u3002\u7b2c\u4e8c\u4e2a\u793a\u4f8b\u5b9a\u4e49\u4e86 ISO8859-5 \u96c6\uff08\u897f\u91cc\u5c14\u6587\uff09\uff0c\u4f46\u5047\u5b9a\u4e86\u9ed8\u8ba4\u8bed\u8a00\u73af\u5883\u3002\u6700\u540e\u4e00\u4e2a\u4f8b\u5b50\u5b9a\u4e49\u4e86\u201cJIS\u201d\u5b57\u7b26\u96c6\uff08\u65e5\u8bed\u5b57\u7b26\u96c6\u4e4b\u4e00\uff09\uff0c\u5e76\u5c06\u8bed\u8a00\u5b9a\u4e49\u4e3a\u201cja\u201d\uff08\u65e5\u8bed\uff09\u3002</p> <p>\u4e95\u53f7 (`#') \u5fc5\u987b\u662f\u6587\u6863\u4e2d\u7684\u7b2c\u4e00\u4e2a\u5b57\u7b26\uff0c\u5e76\u4e14\u81ea\u8bc6\u522b\u6807\u9898\u4e2d\u7684\u6240\u6709\u5b57\u7b26\u5fc5\u987b\u5c5e\u4e8e\u6240\u7528\u7f16\u7801\u7684 ASCII \u5b50\u96c6\u3002</p> <p>3.2 \u8bed\u200b\u200b\u6cd5\u540d\u79f0\u58f0\u660e \u8bed\u6cd5\u7684\u540d\u79f0\u5fc5\u987b\u58f0\u660e\u4e3a\u8be5\u8bed\u6cd5\u7684\u7b2c\u4e00\u4e2a\u8bed\u53e5\u3002\u58f0\u660e\u5fc5\u987b\u4f7f\u7528\u5b8c\u6574\u7684\u8bed\u6cd5\u540d\u79f0\uff08\u5305\u540d\u79f0 + \u7b80\u5355\u8bed\u6cd5\u540d\u79f0\uff09\u3002\u56e0\u6b64\uff0c\u58f0\u660e\u683c\u5f0f\u4e3a\u4ee5\u4e0b\u4efb\u4e00\u683c\u5f0f\uff1a</p> <p>\u8bed\u6cd5packageName.simpleGrammarName; \u8bed\u6cd5grammarName; \u5305\u548c\u8bed\u6cd5\u7684\u547d\u540d\u5728\u8bed\u6cd5\u540d\u79f0\u548c\u5305\u540d\u79f0 \u90e8\u5206\u4e2d\u63cf\u8ff0\u3002</p> <p>\u4f8b\u5982\uff1a</p> <p>\u8bed\u6cd5 com.sun.speech.apps.numbers; \u8bed\u6cd5 edu.unsw.med.people\uff1b \u8bed\u6cd5\u4f8b\u53e5\uff1b 3.3 \u5bfc\u5165 \u8bed\u6cd5\u5934\u53ef\u4ee5\u9009\u62e9\u6027\u5730\u5305\u542b\u5bfc\u5165\u58f0\u660e\u3002\u5bfc\u5165\u58f0\u660e\u4f4d\u4e8e\u8bed\u6cd5\u58f0\u660e\u4e4b\u540e\uff0c\u5e76\u4e14\u5fc5\u987b\u4f4d\u4e8e\u8bed\u6cd5\u4e3b\u4f53\uff08\u89c4\u5219\u5b9a\u4e49\uff09\u4e4b\u524d\u3002\u5bfc\u5165\u58f0\u660e\u5141\u8bb8\u5728\u672c\u5730\u5f15\u7528\u53e6\u4e00\u4e2a\u8bed\u6cd5\u7684\u4e00\u6761\u6216\u6240\u6709\u516c\u5171\u89c4\u5219\u3002\u5bfc\u5165\u8bed\u53e5\u7684\u683c\u5f0f\u5982\u4e0b</p> <p>\u5bfc\u5165&lt; fullyQualifiedRuleName&gt;\uff1b \u5bfc\u5165 &lt; fullGrammarName.*&gt;; \u4f8b\u5982\uff0c</p> <p>\u5bfc\u5165; \u5bfc\u5165 ; \u7b2c\u4e00\u4e2a\u4f8b\u5b50\u662f\u901a\u8fc7\u5176\u5b8c\u5168\u9650\u5b9a\u89c4\u5219\u540d\u5bfc\u5165\u5355\u4e2a\u89c4\u5219\uff1a&lt;1stTo31st&gt;\u6765\u81ea\u8bed\u6cd5\u7684\u89c4\u5219com.sun.speech.app.index\u3002\u5bfc\u5165\u7684\u89c4\u5219&lt;1stTo31st&gt;\u5fc5\u987b\u662f\u5bfc\u5165\u8bed\u6cd5\u7684\u516c\u5171\u89c4\u5219\u3002 <p>\u7b2c\u4e8c\u4e2a\u5bfc\u5165\u8bed\u53e5\u4e2d\u7684\u661f\u53f7\u7684\u4f7f\u7528\u8bf7\u6c42\u5bfc\u5165numbers\u8bed\u6cd5\u7684\u6240\u6709\u516c\u5171\u89c4\u5219\u3002\u4f8b\u5982\uff0c\u5982\u679c\u8be5\u8bed\u6cd5\u5b9a\u4e49\u4e86\u4e09\u4e2a\u516c\u5171\u89c4\u5219\uff0c\uff0c\uff0c\u90a3\u4e48\u6240\u6709,\u8fd9\u4e09\u4e2a\u89c4\u5219\u90fd\u53ef\u4ee5\u5728\u672c\u5730\u5f15\u7528\u3002 <p>\u8bf7\u6ce8\u610f\uff0c\u7531\u4e8e\u8bed\u6cd5\u540d\u79f0\u548c\u89c4\u5219\u540d\u79f0\u6216\u661f\u53f7\u90fd\u662f\u5fc5\u9700\u7684\uff0c\u56e0\u6b64\u5bfc\u5165\u8bed\u53e5\u6c38\u8fdc\u4e0d\u4f1a\u91c7\u7528\u4ee5\u4e0b\u5f62\u5f0f\uff1a</p> <p>import ; // \u4e0d\u5408\u6cd5 \u5bfc\u5165\u7684\u89c4\u5219\u53ef\u4ee5\u901a\u8fc7\u4e09\u79cd\u65b9\u5f0f\u5f15\u7528\uff1a\u901a\u8fc7\u5176\u7b80\u5355\u89c4\u5219\u540d\u79f0\uff08\u4f8b\u5982 \uff09\uff0c\u901a\u8fc7\u5176\u9650\u5b9a\u89c4\u5219\u540d\u79f0\uff08\u4f8b\u5982\uff09\uff0c\u6216\u8005\u901a\u8fc7\u5176\u5b8c\u5168\u9650\u5b9a\u89c4\u5219\u540d\u79f0\uff08\uff09\u3002 <p>\u540d\u79f0\u89e3\u6790\u884c\u4e3a\u5df2\u5728\u672c\u6587\u6863\u524d\u9762\u7684\u89e3\u6790\u89c4\u5219\u540d\u79f0\u4e2d\u5b9a\u4e49\u3002\u8bf7\u6ce8\u610f\uff0c\u5f53\u5bfc\u5165\u7684\u89c4\u5219\u59cb\u7ec8\u7531\u5176\u5b8c\u5168\u9650\u5b9a\u7684\u89c4\u5219\u540d\u79f0\u5f15\u7528\u65f6\uff0c\u5bfc\u5165\u8bed\u53e5\u662f\u53ef\u9009\u7684\u3002</p> <p>// \u5bfc\u5165 com.sun.speech.app.numbers \u662f\u53ef\u9009\u7684 &lt;\u89c4\u5219&gt; = ;"},{"location":"speech_and_language_processing/jsgf/jsgf/#4","title":"4. \u8bed\u6cd5\u4e3b\u4f53","text":""},{"location":"speech_and_language_processing/jsgf/jsgf/#41","title":"4.1 \u89c4\u5219\u5b9a\u4e49","text":"<p>\u8bed\u6cd5\u4e3b\u4f53\u5b9a\u4e49\u89c4\u5219\u3002\u6bcf\u6761\u89c4\u5219\u5728\u89c4\u5219\u5b9a\u4e49\u4e2d\u5b9a\u4e49\u3002\u89c4\u5219\u5728\u8bed\u6cd5\u4e2d\u5b9a\u4e49\u4e00\u6b21\u3002\u89c4\u5219\u5b9a\u4e49\u7684\u987a\u5e8f\u5e76\u4e0d\u91cd\u8981\u3002</p> <p>\u89c4\u5219\u5b9a\u4e49\u7684\u4e24\u79cd\u6a21\u5f0f\u662f\uff1a</p> Java<pre><code>&lt;ruleName&gt; = ruleExpansion\uff1b\npublic &lt; ruleName&gt; = ruleExpansion;\n</code></pre> <p>\u89c4\u5219\u5b9a\u4e49\u7684\u7ec4\u6210\u90e8\u5206\u5305\u62ec : * (1) \u53ef\u9009\u7684\u516c\u5171\u58f0\u660e public\u3001 * (2) \u6240\u5b9a\u4e49\u89c4\u5219\u7684\u540d\u79f0\u3001 * (3) \u7b49\u53f7 <code>=</code> * (4)\u89c4\u5219\u7684\u6269\u5c55 * (5) \u7ed3\u675f\u5206\u53f7 <code>;</code>\u3002</p> <p>\u5b9a\u4e49\u4e4b\u524d\u3001public \u5173\u952e\u5b57\u4e0e\u89c4\u5219\u540d\u79f0\u4e4b\u95f4\u3001\u7b49\u53f7\u5b57\u7b26\u5468\u56f4\u4ee5\u53ca\u5206\u53f7\u5468\u56f4\u7684\u7a7a\u683c\u5c06\u88ab\u5ffd\u7565\u3002\u89c4\u5219\u6269\u5c55\u4e2d\u7684\u7a7a\u683c\u5f88\u91cd\u8981\u3002</p> <p>\u89c4\u5219\u6269\u5c55\u5b9a\u4e49\u4e86\u89c4\u5219\u7684\u8868\u8ff0\u65b9\u5f0f\u3002\u5b83\u662f\u6807\u8bb0\uff08\u53ef\u4ee5\u8868\u8ff0\u7684\u6587\u672c\uff09\u548c\u5bf9\u5176\u4ed6\u89c4\u5219\u7684\u5f15\u7528\u7684\u903b\u8f91\u7ec4\u5408\u3002\u4f7f\u7528\u672f\u8bed\u201c\u6269\u5c55\u201d\u662f\u56e0\u4e3a\u6269\u5c55\u5b9a\u4e49\u4e86\u89c4\u5219\u5728\u8868\u8ff0\u65f6\u5982\u4f55\u6269\u5c55 - \u5355\u4e2a\u89c4\u5219\u53ef\u4ee5\u6269\u5c55\u4e3a\u8bb8\u591a\u8868\u8ff0\u5355\u8bcd\u52a0\u4e0a\u672c\u8eab\u88ab\u6269\u5c55\u7684\u5176\u4ed6\u89c4\u5219\u3002\u540e\u9762\u7684\u90e8\u5206\u5b9a\u4e49\u4e86\u5408\u6cd5\u6269\u5c55\u3002</p>"},{"location":"speech_and_language_processing/jsgf/jsgf/#411","title":"4.1.1 \u516c\u5171\u89c4\u5219","text":"<p>\u8bed\u6cd5\u4e2d\u7684\u4efb\u4f55\u89c4\u5219\u90fd\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528\u5173\u952e\u5b57\u58f0\u660e\u4e3a\u516c\u5171\u89c4\u5219public \u3002\u516c\u5171\u89c4\u5219\u6709\u4e09\u79cd\u53ef\u80fd\u7684\u7528\u9014\uff1a</p> <ul> <li>\u5b83\u53ef\u4ee5\u5728\u53e6\u4e00\u4e2a\u8bed\u6cd5\u7684\u89c4\u5219\u5b9a\u4e49\u4e2d\u901a\u8fc7\u5176\u5b8c\u5168\u9650\u5b9a\u540d\u79f0\u6216\u5bfc\u5165\u58f0\u660e\u548c\u660e\u786e\u7684\u5f15\u7528\u5f62\u5f0f\u8fdb\u884c\u5f15\u7528\u3002</li> <li>\u5b83\u53ef\u4ee5\u7528\u4f5c\u8bc6\u522b\u7684\u6709\u6548\u89c4\u5219\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u8bc6\u522b\u5668\u53ef\u4ee5\u4f7f\u7528\u8be5\u89c4\u5219\u6765\u786e\u5b9a\u53ef\u4ee5\u8bf4\u51fa\u4ec0\u4e48\u3002</li> <li>\u5b83\u53ef\u4ee5\u88ab\u672c\u5730\u5f15\u7528\uff1a\u5373\u88ab\u540c\u4e00\u8bed\u6cd5\u4e2d\u5b9a\u4e49\u7684\u4efb\u4f55\u516c\u5171\u6216\u975e\u516c\u5171\u89c4\u5219\u5f15\u7528\u3002</li> </ul> <p>\u5982\u679c\u6ca1\u6709\u516c\u5171\u58f0\u660e\uff0c\u89c4\u5219\u5c06\u9690\u5f0f\u4e3a\u79c1\u6709\u76848\u5e76\u4e14\u53ea\u80fd\u5728\u672c\u5730\u8bed\u6cd5\u4e2d\u7684\u89c4\u5219\u5b9a\u4e49\u4e2d\u5f15\u7528\u3002</p>"},{"location":"speech_and_language_processing/jsgf/jsgf/#42","title":"4.2 \u89c4\u5219\u6269\u5c55","text":"<p>\u6700\u7b80\u5355\u7684\u89c4\u5219\u6269\u5c55\u662f\u5bf9 <code>token</code> \u7684\u5f15\u7528\u4e0e\u5bf9\u5176\u4ed6\u89c4\u5219\u7684\u5f15\u7528\u3002\u4f8b\u5982\uff0c</p> Java<pre><code>&lt;a&gt; = elephant\uff1b\n&lt;b&gt; = &lt;x&gt;\uff1b\n&lt;c&gt; = &lt;com.acme.grammar.y&gt;;\n</code></pre> <p>\u8be5\u89c4\u5219 <code>&lt;a&gt;</code> \u6269\u5c55\u4e3a\u5355\u4e2a\u6807\u8bb0 \"<code>elephant</code>\"\u3002\u56e0\u6b64\uff0c\u8981\u8bf4\u8bdd\uff0c<code>&lt;a&gt;</code> \u7528\u6237\u5fc5\u987b\u8bf4\u51fa\u5355\u8bcd \"<code>elephant</code>\"\u3002</p> <p>\u8be5\u89c4\u5219 <code>&lt;b&gt;</code> \u6269\u5c55\u4e3a <code>&lt;x&gt;</code>\u3002\u8fd9\u610f\u5473\u7740\u8981\u8bf4 <code>&lt;b&gt;</code>\uff0c\u7528\u6237\u5fc5\u987b\u8bf4\u4e00\u4e9b\u7b26\u5408\u89c4\u5219 <code>&lt;x&gt;</code> \u7684\u5185\u5bb9\u3002\u540c\u6837\uff0c\u8981\u8bf4 \u89c4\u5219 <code>&lt;c&gt;</code>\uff0c\u7528\u6237\u5fc5\u987b\u8bf4\u4e00\u4e9b\u7b26\u5408\u89c4\u5219 <code>&lt;com.acme.grammar.y&gt;</code> \u7684\u5185\u5bb9\u3002</p> <p>\u66f4\u6b63\u5f0f\u5730\u8bf4\uff0c\u4ee5\u4e0b\u662f\u5408\u6cd5\u7684\u6269\u5c55\u3002</p> <ul> <li>\u4efb\u4f55 token\u3002</li> <li>\u5bf9\u540c\u4e00\u8bed\u6cd5\u4e2d\u5b9a\u4e49\u7684\u4efb\u4f55\u516c\u5171\u6216\u975e\u516c\u5171\u89c4\u5219\u7684\u5f15\u7528\u3002</li> <li>\u5bf9\u5df2\u5bfc\u5165\u5f53\u524d\u8bed\u6cd5\u7684\u53e6\u4e00\u4e2a\u8bed\u6cd5\u7684\u4efb\u4f55\u516c\u5171\u89c4\u5219\u7684\u5f15\u7528\u3002</li> <li>\u5bf9\u5df2\u5bfc\u5165\u5f53\u524d\u8bed\u6cd5\u7684\u53e6\u4e00\u4e2a\u8bed\u6cd5\u7684\u516c\u5171\u89c4\u5219\u7684\u5f15\u7528\uff0c\u5f53\u4f7f\u7528\u5176\u5b8c\u5168\u9650\u5b9a\u89c4\u5219\u540d\uff08\u5e26\u6216\u4e0d\u5e26\u5bfc\u5165\uff09\u65f6\u3002</li> </ul> <p>\u8fd9\u4e9b\u5f15\u7528\u7b56\u7565\u662f\u672c\u5730\u5b9a\u4e49\u7684\uff0c\u5373\u7531\u5f53\u524d\u89c4\u5219\u7684\u8303\u56f4\u5b9a\u4e49\u3002\u4f8b\u5982\uff0c<code>grammar1</code> \u4e2d\u7684\u89c4\u5219\u53ef\u4ee5\u5408\u6cd5\u5730\u5f15\u7528 <code>grammar2</code> \u7684\u516c\u5171\u89c4\u5219\uff0c\u800c\u540e\u8005\u53c8\u5f15\u7528\u975e\u516c\u5171\u89c4\u5219 <code>grammar2</code>\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u4e00\u4e2a\u89c4\u5219\u53ef\u4ee5\u901a\u8fc7\u53e6\u4e00\u4e2a\u8bed\u6cd5\u7684\u516c\u5171\u89c4\u5219\u95f4\u63a5\u5f15\u7528\u53e6\u4e00\u4e2a\u8bed\u6cd5\u7684\u79c1\u6709\u89c4\u5219\u3002</p> <p>\u7a7a\u5b9a\u4e49\u662f\u4e0d\u5408\u6cd5\u7684\u3002 Java<pre><code>&lt;d&gt; = ; // \u4e0d\u5408\u6cd5\n</code></pre></p> <p>\u5c06\u89c4\u5219\u5b9a\u4e49\u4e3a \"<code>&lt;NULL&gt;</code>\"\u4e0e <code>&lt;VOID&gt;</code> \u90fd\u662f\u5408\u6cd5\u7684\u3002</p> Java<pre><code>&lt;e&gt; = &lt;NULL&gt;; //\u5408\u6cd5\n&lt;f&gt; = &lt;VOID&gt;; //\u5408\u6cd5\n</code></pre> <p>\u4ee5\u4e0b\u5404\u8282\u89e3\u91ca\u4e86\u5982\u4f55\u4f7f\u7528\u5408\u6cd5\u6269\u5c55\u7684\u903b\u8f91\u7ec4\u5408\u6765\u5b9a\u4e49\u66f4\u590d\u6742\u7684\u89c4\u5219\uff1a</p> <ul> <li>\u7ec4\u6210\uff1a\u6269\u5c55\u5e8f\u5217\u548c\u66ff\u4ee3\u6269\u5c55\u96c6\u3002</li> <li>\u5206\u7ec4\uff1a\u4f7f\u7528\u5706\u62ec\u53f7\u548c\u65b9\u62ec\u53f7\u3002</li> <li>\u4e00\u5143\u8fd0\u7b97\u7b26\uff1a\u7528\u4e8e\u91cd\u590d\u6269\u5c55\u7684 \u3002</li> <li>\u5c06\u7279\u5b9a\u5e94\u7528\u7a0b\u5e8f\u7684\u6807\u7b7e\u9644\u52a0\u5230\u6269\u5c55\u4e2d\u3002</li> </ul>"},{"location":"speech_and_language_processing/jsgf/jsgf/#43","title":"4.3 \u7ec4\u6210","text":""},{"location":"speech_and_language_processing/jsgf/jsgf/#431","title":"4.3.1 \u5e8f\u5217","text":"<p>\u89c4\u5219\u53ef\u4ee5\u7531\u4e00\u7cfb\u5217\u6269\u5c55\u5b9a\u4e49\u3002\u5408\u6cd5\u6269\u5c55\u5e8f\u5217\u672c\u8eab\u5c31\u662f\u5408\u6cd5\u6269\u5c55\uff0c\u6bcf\u4e2a\u6269\u5c55\u90fd\u7531\u7a7a\u683c\u5206\u9694\u3002\u4f8b\u5982\uff0c\u7531\u4e8e\u6807\u8bb0 token \u548c\u89c4\u5219\u5f15\u7528\u90fd\u662f\u5408\u6cd5\u6269\u5c55\uff0c\u56e0\u6b64\u4ee5\u4e0b\u662f\u5408\u6cd5\u7684\u89c4\u5219\u5b9a\u4e49\u3002</p> Java<pre><code>&lt;where&gt; = I live in Boston;\n&lt;statement&gt; = this &lt;object&gt; is &lt;OK&gt;\uff1b\n</code></pre> <p>\u8981\u8bf4\u51fa\u4e00\u4e2a\u5e8f\u5217\uff0c\u5fc5\u987b\u6309\u7167\u5b9a\u4e49\u7684\u987a\u5e8f\u8bf4\u51fa\u5e8f\u5217\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\u3002 * \u5728\u7b2c\u4e00\u4e2a\u793a\u4f8b\u4e2d\uff0c\u8981\u8bf4\u51fa\u89c4\u5219 <code>&lt;where&gt;</code>\uff0c\u8bf4\u8bdd\u8005\u5fc5\u987b\u6309\u7167\u8be5\u987a\u5e8f\u8bf4\u51fa\u5355\u8bcd \"<code>I live in Boston</code>\"\u3002 * \u7b2c\u4e8c\u4e2a\u793a\u4f8b\u5c06 token \u4e0e\u89c4\u5219 <code>&lt;object&gt;</code> \u548c <code>&lt;OK&gt;</code> \u5f15\u7528\u6df7\u5408\u5728\u4e00\u8d77\u3002\u8981\u8bf4\u51fa\u89c4\u5219 <code>&lt;statement&gt;</code>\uff0c\u7528\u6237\u5fc5\u987b\u5728\u8bf4\u5b8c \"<code>this</code>\" \u540e\uff0c\u8bf4\u51fa\u4e0e\u5339\u914d <code>&lt;object&gt;</code> \u7684\u5185\u5bb9\uff0c\u7136\u540e\u8bf4 \"<code>is</code>\"\uff0c\u6700\u540e\u8bf4\u4e0e <code>&lt;OK&gt;</code> \u5339\u914d\u7684\u5185\u5bb9\u3002</p> <p>\u5e8f\u5217\u4e2d\u7684\u5143\u7d20\u53ef\u4ee5\u662f\u4efb\u4f55\u5408\u6cd5\u7684\u6269\u5c55\u3002\u8fd9\u5305\u62ec\u4e0b\u6587\u63cf\u8ff0\u7684\u66ff\u4ee3\u9879\u3001\u7ec4\u7b49\u7ed3\u6784\u3002</p>"},{"location":"speech_and_language_processing/jsgf/jsgf/#432","title":"4.3.2 \u66ff\u4ee3\u65b9\u6848","text":"<p>\u89c4\u5219\u53ef\u4ee5\u5b9a\u4e49\u4e3a\u4e00\u7ec4\u7531\u7ad6\u7ebf\u5b57\u7b26 \"<code>|</code>\" \u5206\u9694\u7684\u5907\u9009\u6269\u5c55\uff0c\u4e5f\u53ef\u4ee5\u7531\u7a7a\u683c\u5206\u9694\u3002\u4f8b\u5982\uff1a</p> Java<pre><code>&lt;name&gt; = Michael | Yuriko | Mary | Duke | &lt;otherNames&gt;;\n</code></pre> <p>\u8981\u8bf4\u51fa\u89c4\u5219 <code>&lt;name&gt;</code>\uff0c\u8bf4\u8bdd\u8005\u5fc5\u987b\u8bf4\u51fa\u5907\u9009\u96c6\u5408\u4e2d\u7684\u4e00\u4e2a\u4e14\u53ea\u80fd\u8bf4\u51fa\u4e00\u4e2a\u3002\u4f8b\u5982\uff0c\u8bf4\u8bdd\u8005\u53ef\u4ee5\u8bf4 \"<code>Michael</code>\"\u3001\"<code>Yuriko</code>\"\u3001\"<code>Mary</code>\"\u3001\"<code>Duke</code>\" \u6216\u4efb\u4f55\u7b26\u5408\u89c4\u5219 <code>&lt;otherNames&gt;</code>\u7684\u8bcd\u3002\u4f46\u662f\uff0c\u8bf4\u8bdd\u8005\u4e0d\u80fd\u8bf4 \"<code>Mary Duke</code>\"\u3002</p> <p>\u5e8f\u5217\u7684\u4f18\u5148\u7ea7\u9ad8\u4e8e\u66ff\u4ee3\u65b9\u6848\u3002\u4f8b\u5982:</p> Java<pre><code>&lt;country&gt;= South Africa | New Zealand | Papua New Guinea;\n</code></pre> <p>\u4e0a\u9762\u7684\u89c4\u5219\u662f\u4e00\u7ec4\u4e09\u4e2a\u5907\u9009\u65b9\u6848\uff0c\u6bcf\u4e2a\u65b9\u6848\u6307\u5b9a\u4e00\u4e2a\u56fd\u5bb6\u3002</p> <p>\u7a7a\u5185\u5bb9\u7684\u66ff\u4ee3\u65b9\u6848\u662f\u4e0d\u5408\u6cd5\u3002</p> Java<pre><code>&lt;name&gt; = Michael | | Mary; // \u4e0d\u5408\u6cd5\n&lt;name&gt; = Michael | Mary | ; // \u4e0d\u5408\u6cd5\n</code></pre>"},{"location":"speech_and_language_processing/jsgf/jsgf/#433","title":"4.3.3 \u6743\u91cd","text":"<p>\u5e76\u975e\u6240\u6709\u7684\u8bed\u6cd5\u8bcd\u8bed\u90fd\u5177\u6709\u540c\u7b49\u6982\u7387\u3002\u53ef\u4ee5\u5c06\u6743\u91cd\u9644\u52a0\u5230\u5907\u9009\u96c6\u7684\u5143\u7d20\u4e0a\uff0c\u4ee5\u8868\u793a\u6bcf\u4e2a\u5907\u9009\u88ab\u8bf4\u51fa\u6765\u7684\u53ef\u80fd\u6027\u3002\u6743\u91cd\u662f\u4e00\u4e2a\u6d6e\u70b9\u6570\uff0c\u5468\u56f4\u662f\u6b63\u659c\u6760\uff0c\u4f8b\u5982 /3.14/\u3002\u6743\u91cd\u8d8a\u9ad8\uff0c\u5143\u7d20\u88ab\u8bf4\u51fa\u6765\u7684\u53ef\u80fd\u6027\u5c31\u8d8a\u5927\u3002\u6743\u91cd\u653e\u5728\u5907\u9009\u96c6\u7684\u6bcf\u4e2a\u5143\u7d20\u4e4b\u524d\u3002\u4f8b\u5982\uff1a</p> Bash<pre><code>&lt;size&gt; = /10/ small | /2/ medium | /1/ large;\n&lt;color&gt; = /0.5/ red | /0.1/ navy blue | /0.2/ sea green;\n&lt;action&gt; = please (/20/ save files | /1/ delete all files);\n&lt;place&gt; = /20/ &lt;city&gt; | /5/ &lt;country&gt;;\n</code></pre> <p>\u6743\u91cd\u5e94\u8be5\u53cd\u6620\u4e00\u7ec4\u5907\u9009\u8bcd\u7684\u5143\u7d20\u7684\u51fa\u73b0\u6a21\u5f0f\u3002\u5728\u7b2c\u4e00\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u8bed\u6cd5\u4f5c\u8005\u6307\u51fa <code>small</code>\u88ab\u8bf4\u51fa\u7684\u53ef\u80fd\u6027\u662f <code>large</code> \u7684 10 \u500d\uff0c\u662f <code>medium</code> \u7684 5 \u500d\u3002</p> <p>\u6307\u5b9a\u6743\u91cd\u65f6\u5fc5\u987b\u6ee1\u8db3\u4ee5\u4e0b\u6761\u4ef6\uff1a</p> <ul> <li>\u5982\u679c\u4e3a\u5907\u9009\u65b9\u6848\u96c6\u5408\u4e2d\u7684\u4e00\u4e2a\u9879\u76ee\u6307\u5b9a\u4e86\u6743\u91cd\uff0c\u5219\u5fc5\u987b\u4e3a\u6bcf\u4e2a\u9879\u76ee\u6307\u5b9a\u4e00\u4e2a\u6743\u91cd\uff08\u5168\u6709\u6216\u5168\u65e0\u89c4\u5219\uff09\u3002</li> <li>\u6743\u91cd\u662f\u6d6e\u70b9\u6570\u3002\u4f8b\u5982\uff0c56\u30010.056\u30013.14e3\u30018f\u3002</li> <li>\u659c\u7ebf\u5185\u53ea\u5141\u8bb8\u4f7f\u7528\u6d6e\u70b9\u6570\u548c\u7a7a\u683c\u3002</li> <li>\u6743\u91cd\u5fc5\u987b\u4e3a\u96f6\u6216\u66f4\u5927\u3002\u96f6\u6743\u91cd\u8868\u793a\u8be5\u9879\u76ee\u6c38\u8fdc\u4e0d\u80fd\u88ab\u8bf4\u51fa\uff1a\u76f8\u5f53\u4e8e\u7528\u66ff\u6362\u8be5\u9879\u76ee <code>&lt;VOID&gt;</code>\u3002\uff08\u96f6\u6743\u91cd\u5728\u5f00\u53d1\u8bed\u6cd5\u65f6\u5f88\u6709\u7528\u3002\uff09</li> <li>\u81f3\u5c11\u9700\u8981\u4e00\u4e2a\u975e\u96f6\u6b63\u6743\u91cd\u3002 \u9002\u5f53\u7684\u6743\u91cd\u5f88\u96be\u786e\u5b9a\uff0c\u731c\u6d4b\u6743\u91cd\u5e76\u4e0d\u603b\u662f\u80fd\u63d0\u9ad8\u8bc6\u522b\u6027\u80fd\u3002\u6709\u6548\u7684\u6743\u91cd\u901a\u5e38\u662f\u901a\u8fc7\u7814\u7a76\u771f\u5b9e\u7684\u8bed\u97f3\u548c\u6587\u672c\u6570\u636e\u83b7\u5f97\u7684\u3002</li> </ul> <p>\u5e76\u975e\u6240\u6709\u8bc6\u522b\u6a21\u5757\u90fd\u4f1a\u5728\u8bc6\u522b\u8fc7\u7a0b\u4e2d\u4f7f\u7528\u6743\u91cd\u3002\u4f46\u662f\uff0c\u8bc6\u522b\u6a21\u5757\u81f3\u5c11\u9700\u8981\u786e\u4fdd\u4e0d\u4f1a\u8bf4\u51fa\u4efb\u4f55\u6743\u91cd\u4e3a\u96f6\u7684\u66ff\u4ee3\u8bcd\u3002</p>"},{"location":"speech_and_language_processing/jsgf/jsgf/#44","title":"4.4 \u5206\u7ec4","text":""},{"location":"speech_and_language_processing/jsgf/jsgf/#441","title":"4.4.1 \u5706\u62ec\u53f7()","text":"<p>\u4efb\u4f55\u5408\u6cd5\u7684\u6269\u5c55\u90fd\u53ef\u4ee5\u4f7f\u7528\u5706\u62ec\u53f7 <code>()</code> \u8fdb\u884c\u660e\u786e\u5206\u7ec4\u3002\u5206\u7ec4\u5177\u6709\u8f83\u9ad8\u7684\u4f18\u5148\u7ea7\uff0c\u56e0\u6b64\u53ef\u7528\u4e8e\u786e\u4fdd\u89c4\u5219\u7684\u6b63\u786e\u89e3\u91ca\u3002\u5b83\u8fd8\u6709\u52a9\u4e8e\u63d0\u9ad8\u6e05\u6670\u5ea6\u3002\u4f8b\u5982\uff0c\u7531\u4e8e\u5e8f\u5217\u7684\u4f18\u5148\u7ea7\u9ad8\u4e8e\u66ff\u4ee3\u9879\uff0c\u56e0\u6b64\u5728\u4ee5\u4e0b\u89c4\u5219\u5b9a\u4e49\u4e2d\u9700\u8981\u4f7f\u7528\u62ec\u53f7\uff0c\u4ee5\u4fbf <code>please close</code> \u548c <code>please delete</code> \u662f\u5408\u6cd5\u7684\u3002</p> Bash<pre><code>&lt;action&gt; = please (open | close | delete);\n</code></pre> <p>\u4e0b\u9762\u7684\u793a\u4f8b\u663e\u793a\u4e86\u4e09\u4e2a\u5143\u7d20\u7684\u5e8f\u5217\uff0c\u6bcf\u4e2a\u5143\u7d20\u90fd\u662f\u4e00\u7ec4\u7528\u62ec\u53f7\u62ec\u8d77\u6765\u7684\u66ff\u4ee3\u89c4\u5219\uff0c\u4ee5\u786e\u4fdd\u6b63\u786e\u5206\u7ec4\u3002</p> Bash<pre><code>&lt;command&gt; = (open | close) (windows | doors) \n(immediately | later);\n</code></pre> <p>\u8981\u8bf4\u51fa\u5339\u914d\u7684 <code>&lt;command&gt;</code> \u5185\u5bb9\uff0c\u8bf4\u8bdd\u8005\u5fc5\u987b\u4ece\u4e09\u7ec4\u5907\u9009\u65b9\u6848\u4e2d\u5404\u8bf4\u51fa\u4e00\u4e2a\u5355\u8bcd\uff1a\u4f8b\u5982\uff0c<code>open windows immediately</code>  \u6216 <code>close doors later</code>\u3002</p> <p>\u5982\u679c\u5206\u7ec4\u56f4\u7ed5\u5355\u4e2a\u6269\u5c55\uff0c\u5219\u5b9e\u4f53\u88ab\u5b9a\u4e49\u4e3a\u4e00\u4e2a\u9879\u76ee11\u7684\u5e8f\u5217\u3002\u4f8b\u5982\uff1a</p> Text Only<pre><code>( start )\n( &lt;end&gt; )\n</code></pre> <p>\u7a7a\u62ec\u53f7\u4e0d\u5408\u6cd5\u3002 Text Only<pre><code>() // \u4e0d\u5408\u6cd5\n</code></pre></p>"},{"location":"speech_and_language_processing/jsgf/jsgf/#442","title":"4.4.2 \u65b9\u62ec\u53f7 []","text":"<p>\u65b9\u62ec\u53f7\u53ef\u4ee5\u653e\u5728\u4efb\u4f55\u89c4\u5219\u5b9a\u4e49\u5468\u56f4\uff0c\u4ee5\u8868\u660e\u5185\u5bb9\u662f\u53ef\u9009\u7684\u3002\u5728\u5176\u4ed6\u65b9\u9762\uff0c\u5b83\u76f8\u5f53\u4e8e\u5206\u7ec4\u7528\u7684\u5706\u62ec\u53f7\uff0c\u5e76\u4e14\u5177\u6709\u76f8\u540c\u7684\u4f18\u5148\u7ea7\u3002</p> <p>\u4f8b\u5982\uff0c</p> Bash<pre><code>&lt;polite&gt; = please | kindly |oh mighty computer;\npublic &lt;command&gt; = [ &lt;polite&gt; ] don't crash;\n</code></pre> <p>\u5141\u8bb8\u7528\u6237\u8bf4 <code>don't crash</code>\uff0c\u5e76\u53ef\u9009\u62e9\u6dfb\u52a0\u4e00\u79cd\u793c\u8c8c\u5f62\u5f0f\uff0c\u4f8b\u5982 <code>oh mighty computer don't crash</code>\u201d\u6216\u201c<code>kindly don't crash</code>\u3002</p> <p>\u7a7a\u62ec\u53f7\u4e0d\u5408\u6cd5\u3002</p> Bash<pre><code>[ ] // \u4e0d\u5408\u6cd5\n</code></pre>"},{"location":"speech_and_language_processing/jsgf/jsgf/#45","title":"4.5 \u4e00\u5143\u8fd0\u7b97\u7b26","text":"<p>JSpeech \u6587\u6cd5\u683c\u5f0f\u4e2d\u6709\u4e09\u4e2a\u4e00\u5143\u8fd0\u7b97\u7b26\uff1a<code>Kleene \u95ed\u5305</code>\u3001\u52a0\u6cd5\u8fd0\u7b97\u7b26\u548c\u6807\u7b7e\u3002\u4e00\u5143\u8fd0\u7b97\u7b26\u5177\u6709\u4ee5\u4e0b\u5171\u540c\u7279\u70b9\uff1a</p> <ul> <li>\u4e00\u5143\u8fd0\u7b97\u7b26\u53ef\u4ee5\u6dfb\u52a0\u5230\u4efb\u4f55\u5408\u6cd5\u7684\u89c4\u5219\u6269\u5c55\u3002</li> <li>\u5b83\u4eec\u5177\u6709\u5f88\u9ad8\u7684\u4f18\u5148\u7ea7\uff1a\u5b83\u4eec\u6dfb\u52a0\u5230\u7d27\u63a5\u5728\u524d\u7684\u89c4\u5219\u6269\u5c55\u3002</li> <li>\u4efb\u4f55\u89c4\u5219\u6269\u5c55\u53ea\u80fd\u9644\u52a0\u4e00\u4e2a\u4e00\u5143\u8fd0\u7b97\u7b26\uff08\u6807\u7b7e\u7684\u6b64\u89c4\u5219\u6709\u4e2a\u4f8b\u5916\uff09\u3002</li> <li>\u89c4\u5219\u6269\u5c55\u548c\u9644\u52a0\u8fd0\u7b97\u7b26\u4e4b\u95f4\u7684\u7a7a\u683c\u5c06\u88ab\u5ffd\u7565\u3002</li> </ul> <p>\u7531\u4e8e\u4e00\u5143\u8fd0\u7b97\u7b26\u7684\u4f18\u5148\u7ea7\u9ad8\u4e8e\u5e8f\u5217\u548c\u66ff\u4ee3\u9879\u7684\u4f18\u5148\u7ea7\uff0c\u56e0\u6b64\u5fc5\u987b\u4f7f\u7528\u62ec\u53f7\u5c06\u5e8f\u5217\u6216\u66ff\u4ee3\u9879\u96c6\u62ec\u8d77\u6765\uff0c\u4ee5\u5c06\u8fd0\u7b97\u7b26\u9644\u52a0\u5230\u6574\u4e2a\u5b9e\u4f53\u3002</p>"},{"location":"speech_and_language_processing/jsgf/jsgf/#451-kleene","title":"4.5.1 Kleene \u95ed\u5305\u8fd0\u7b97\u7b26 *","text":"<p>\u6269\u5c55\u540e\u7684\u89c4\u5219\u8ddf\u7740\u661f\u53f7\u7b26\u53f7\uff0c\u8868\u793a\u6269\u5c55\u7684\u89c4\u5219\u53ef\u80fd\u88ab\u8bf4\u51fa\u96f6\u6b21\u6216\u591a\u6b21\u3002\u661f\u53f7\u7b26\u53f7\u88ab\u79f0\u4e3a <code>Kleene \u661f\u53f7</code>\uff08\u4ee5 Stephen Cole Kleene \u547d\u540d\uff0c\u4ed6\u662f\u8be5\u7b26\u53f7\u7684\u9996\u521b\u8005\uff09\u3002\u4f8b\u5982\uff1a</p> Bash<pre><code>&lt;command&gt; = &lt;polite&gt;* don't crash;\n</code></pre> <p>\u5141\u8bb8\u7528\u6237\u8bf4 <code>please don't crash</code>\u3001<code>oh mighty computer please please don't crash</code> \u4e4b\u7c7b\u7684\u8bdd\uff0c\u6216\u8005\u7528 <code>don't crash</code> \u6765\u5ffd\u7565\u793c\u8c8c\u3002</p> <p>\u4f5c\u4e3a\u4e00\u5143\u8fd0\u7b97\u7b26\uff0c\u6b64\u7b26\u53f7\u5177\u6709\u9ad8\u4f18\u5148\u7ea7\u3002\u4f8b\u5982\uff0c\u5728</p> Bash<pre><code>&lt;song&gt; = sing New York *;\n</code></pre> <p>\u8be5\u8fd0\u7b97\u7b26\u9002\u7528\u4e8e\u6700\u76f4\u63a5\u7684\u5408\u6cd5\u6269\u5c55\uff1a\u6807\u8bb0 <code>York</code>\u3002\u56e0\u6b64\uff0c<code>&lt;song&gt;</code> \u7528\u6237\u53ef\u4ee5\u8bf4 <code>sing New York</code>\u3001<code>sing New</code> \u548c <code>sing New York York York</code>\uff0c\u4f46\u4e0d\u80fd\u8bf4 <code>sing New York New York</code>\u3002\u5f15\u53f7\u6216\u62ec\u53f7\u53ef\u7528\u4e8e\u4fee\u6539 * \u8fd0\u7b97\u7b26\u7684\u8303\u56f4\u3002\u4f8b\u5982\uff0c</p> Bash<pre><code>&lt;song&gt; = sing ( New York )*;\n</code></pre> <p>\u786e\u5b9e\u5339\u914d <code>sing New York *;</code>\u3002</p>"},{"location":"speech_and_language_processing/jsgf/jsgf/#452","title":"4.5.2 \u52a0\u53f7\u8fd0\u7b97\u7b26 +","text":"<p>\u89c4\u5219\u6269\u5c55\u540e\u8ddf\u52a0\u53f7\uff0c\u8868\u793a\u8be5\u6269\u5c55\u53ef\u80fd\u4f1a\u88ab\u8bf4\u4e00\u6b21\u6216\u591a\u6b21\u3002\u4f8b\u5982\uff0c</p> Bash<pre><code>&lt;command&gt; = &lt;polite&gt;+ don't crash;\n</code></pre> <p>\u9700\u8981\u81f3\u5c11\u4e00\u79cd\u793c\u8c8c\u5f62\u5f0f\u3002\u56e0\u6b64\uff0c\u5b83\u5141\u8bb8\u7528\u6237\u8bf4\u201c\u8bf7\u4e0d\u8981\u5d29\u6e83\u201d\u3002\u4f46\u662f\uff0c\u201c\u4e0d\u8981\u5d29\u6e83\u201d\u662f\u4e0d\u5408\u6cd5\u7684\u3002</p>"},{"location":"speech_and_language_processing/jsgf/jsgf/#46","title":"4.6 \u6807\u7b7e","text":"<p>\u6807\u7b7e\u4e3a\u8bed\u6cd5\u7f16\u5199\u8005\u63d0\u4f9b\u4e86\u4e00\u79cd\u673a\u5236\uff0c\u53ef\u4ee5\u5c06\u7279\u5b9a\u4e8e\u5e94\u7528\u7a0b\u5e8f\u7684\u4fe1\u606f\u9644\u52a0\u5230\u89c4\u5219\u5b9a\u4e49\u7684\u90e8\u5206\u3002\u5e94\u7528\u7a0b\u5e8f\u901a\u5e38\u4f7f\u7528\u6807\u7b7e\u6765\u7b80\u5316\u6216\u589e\u5f3a\u8bc6\u522b\u7ed3\u679c\u7684\u5904\u7406\u3002</p> <p>\u6807\u7b7e\u9644\u4ef6\u4e0d\u4f1a\u5f71\u54cd\u8bed\u6cd5\u7684\u8bc6\u522b\u3002\u76f8\u53cd\uff0c\u6807\u7b7e\u4f1a\u9644\u52a0\u5230\u8bc6\u522b\u5668\u8fd4\u56de\u7ed9\u5e94\u7528\u7a0b\u5e8f\u7684\u7ed3\u679c\u5bf9\u8c61\u4e0a\u3002\u8bc6\u522b\u5668\u7684\u8f6f\u4ef6\u63a5\u53e3\u5b9a\u4e49\u4e86\u63d0\u4f9b\u6807\u7b7e\u7684\u673a\u523612\u3002</p> <p>\u6807\u7b7e\u662f\u4e00\u5143\u8fd0\u7b97\u7b26\u3002\u56e0\u6b64\uff0c\u5b83\u53ef\u4ee5\u9644\u52a0\u5230\u4efb\u4f55\u5408\u6cd5\u7684\u89c4\u5219\u6269\u5c55\u4e2d\u3002\u6807\u7b7e\u662f\u4e00\u4e2a\u7531\u82b1\u62ec\u53f7 <code>{}</code> \u5206\u9694\u7684\u5b57\u7b26\u4e32\u3002\u62ec\u53f7\u5185\u7684\u6240\u6709\u5b57\u7b26\u90fd\u88ab\u89c6\u4e3a\u6807\u7b7e\u7684\u4e00\u90e8\u5206\uff0c\u5305\u62ec\u7a7a\u683c\u3002\u7a7a\u62ec\u53f7 <code>{}</code> \u662f\u5408\u6cd5\u6807\u7b7e\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6807\u7b7e\u5e94\u88ab\u89e3\u91ca\u4e3a\u96f6\u957f\u5ea6\u5b57\u7b26\u4e32\uff08Java \u7f16\u7a0b\u8bed\u8a00\u4e2d\u7684\u201c\u201d\uff09\u3002</p> <p>\u8981\u5728\u5f15\u53f7\u4e2d\u5305\u542b\u7ed3\u675f\u62ec\u53f7\u5b57\u7b26\uff0c\u5fc5\u987b\u4f7f\u7528\u53cd\u659c\u6760 <code>\\</code> \u5b57\u7b26\u5bf9\u5176\u8fdb\u884c\u8f6c\u4e49\u3002\u8981\u5305\u542b\u53cd\u659c\u6760\u5b57\u7b26\uff0c\u4e5f\u5fc5\u987b\u4f7f\u7528\u53cd\u659c\u6760\u5bf9\u5176\u8fdb\u884c\u8f6c\u4e49\u3002\u4f8b\u5982\uff0c</p> Bash<pre><code>{ {nasty \\\\looking\\\\ tag\\} }\n</code></pre> <p>\u88ab\u5904\u7406\u4e3a\u4ee5\u4e0b\u5b57\u7b26\u4e32\uff1a</p> Bash<pre><code>{nasty \\looking\\ tag}\n</code></pre> <p>\u8be5\u6807\u7b7e\u9644\u52a0\u5230\u7d27\u63a5\u5728\u524d\u7684\u89c4\u5219\u6269\u5c55\uff08\u4e2d\u95f4\u7684\u7a7a\u683c\u5c06\u88ab\u5ffd\u7565\uff09\u3002\u4f8b\u5982\uff1a Bash<pre><code>&lt;rule&gt; = &lt;action&gt; {tag in here};\n&lt;command&gt;= please (open {OPEN} | close {CLOSE}) the file;\n&lt;country&gt; = Australia {Oz} | (United States) {USA} |\nAmerica  {USA}  | (U S of A) {USA};\n</code></pre></p> <p>\u4f5c\u4e3a\u4e00\u5143\u8fd0\u7b97\u7b26\uff0c\u6807\u7b7e\u9644\u52a0\u7684\u4f18\u5148\u7ea7\u9ad8\u4e8e\u5e8f\u5217\u548c\u66ff\u4ee3\u9879\u3002\u4f8b\u5982\uff0c\u5728</p> Bash<pre><code>&lt;action&gt; = book | magazine | newspaper {thing};\n</code></pre> <p><code>thing</code> \u6807\u7b7e\u4ec5\u9644\u52a0\u5230\u201cnewspaper\u201d\u6807\u8bb0\u3002\u53ef\u4ee5\u4f7f\u7528\u62ec\u53f7\u6765\u4fee\u6539\u6807\u7b7e\u9644\u52a0\uff1a</p> Bash<pre><code>&lt;action&gt; = (book | magazine | newspaper) {thing};\n</code></pre> <p>\u4e0e\u5176\u4ed6\u4e00\u5143\u8fd0\u7b97\u7b26\u4e0d\u540c\uff0c\u89c4\u5219\u6269\u5c55\u540e\u53ef\u4ee5\u6709\u591a\u4e2a\u6807\u7b7e\u3002\u4f8b\u5982\uff0c Bash<pre><code>&lt;OKRule&gt; = &lt;action&gt; {tag1} {tag2} {tag3}; // legal\n</code></pre></p> <p>\u8fd9\u88ab\u89e3\u91ca\u4e3a\u597d\u50cf\u4f7f\u7528\u4e86\u62ec\u53f7\uff1a Bash<pre><code>&lt;OKRule&gt; = ((&lt;action&gt; {tag1}) {tag2}) {tag3}; //\u5408\u6cd5\n</code></pre></p> <p>\u6b64\u8bed\u6cd5\u4fbf\u5229\u4ec5\u5141\u8bb8\u7528\u4e8e\u6807\u7b7e\u3002\u4ee5\u4e0b\u60c5\u51b5\u4e0d\u5141\u8bb8\uff1a Bash<pre><code>&lt;badRule&gt; = &lt;action&gt; * {tag1}; // \u4e0d\u5408\u6cd5\n&lt;badRule&gt; = &lt;action&gt; {tag1} +; // \u4e0d\u5408\u6cd5\n</code></pre></p>"},{"location":"speech_and_language_processing/jsgf/jsgf/#461","title":"4.6.1 \u4f7f\u7528\u6807\u7b7e","text":"<p>\u6807\u7b7e\u53ef\u4ee5\u7b80\u5316\u8bc6\u522b\u7ed3\u679c\u7684\u5904\u7406\uff0c\u4ece\u800c\u7b80\u5316\u5e94\u7528\u7a0b\u5e8f\u7684\u7f16\u5199\u3002\u6807\u7b7e\u7684\u5185\u5bb9\u4ee5\u53ca\u6807\u7b7e\u7684\u4f7f\u7528\u5b8c\u5168\u7531\u5f00\u53d1\u4eba\u5458\u81ea\u884c\u51b3\u5b9a\u3002</p> <p>\u6807\u7b7e\u7684\u4e00\u4e2a\u91cd\u8981\u7528\u9014\u662f\u56fd\u9645\u5316\u5e94\u7528\u7a0b\u5e8f\u3002\u4ee5\u4e0b\u662f\u56db\u79cd\u8bed\u6cd5\u7684\u89c4\u5219\u5b9a\u4e49\u793a\u4f8b\uff0c\u6bcf\u79cd\u8bed\u6cd5\u9488\u5bf9\u4e00\u79cd\u8bed\u8a00\u3002\u5e94\u7528\u7a0b\u5e8f\u5c06\u7528\u6237\u6240\u8bf4\u8bed\u8a00\u7684\u8bed\u6cd5\u52a0\u8f7d\u5230\u9002\u5f53\u7684\u8bc6\u522b\u5668\u4e2d\u3002\u6807\u7b7e\u5728\u6240\u6709\u8bed\u8a00\u4e2d\u90fd\u4fdd\u6301\u4e0d\u53d8\uff0c\u4ece\u800c\u7b80\u5316\u4e86\u5904\u7406\u7ed3\u679c\u7684\u5e94\u7528\u7a0b\u5e8f\u8f6f\u4ef6\u3002\u901a\u5e38\uff0c\u8bed\u6cd5\u540d\u79f0\u5c06\u5305\u542b\u8bed\u8a00\u6807\u8bc6\u7b26\uff0c\u4ee5\u4fbf\u53ef\u4ee5\u901a\u8fc7\u7f16\u7a0b\u65b9\u5f0f\u5b9a\u4f4d\u548c\u52a0\u8f7d\u5b83\u3002</p> <p>\u5728\u82f1\u8bed\u8bed\u6cd5\u4e2d\uff1a Bash<pre><code>&lt;greeting&gt;= (howdy | good morning) {hi};\n</code></pre> \u5728\u65e5\u8bed\u8bed\u6cd5\u4e2d\uff1a</p> <p>Bash<pre><code>&lt;greeting&gt;= (ohayo | ohayogozaimasu) {hi};\n</code></pre> \u5728\u5fb7\u8bed\u8bed\u6cd5\u4e2d\uff1a Bash<pre><code>&lt;greeting&gt;= (guten tag) {hi};\n</code></pre> \u5728\u6cd5\u8bed\u8bed\u6cd5\u4e2d\uff1a Bash<pre><code>&lt;greeting&gt;= (bon jour) {hi};\n</code></pre></p>"},{"location":"speech_and_language_processing/jsgf/jsgf/#47","title":"4.7 \u4f18\u5148\u7ea7","text":"<p>\u4ee5\u4e0b\u5b9a\u4e49\u4e86 JSpeech \u8bed\u6cd5\u683c\u5f0f\u4e2d\u89c4\u5219\u6269\u5c55\u5b9e\u4f53\u7684\u76f8\u5bf9\u4f18\u5148\u7ea7\u3002\u5217\u8868\u4ece\u6700\u9ad8\u4f18\u5148\u7ea7\u5230\u6700\u4f4e\u4f18\u5148\u7ea7\u6392\u5217\u3002</p> <p>\u89c4\u5219\u540d\u79f0\u5305\u542b\u5728\u5c16\u62ec\u53f7\u5185\uff0c\u4ee5\u53ca\u5e26\u5f15\u53f7\u6216\u4e0d\u5e26\u5f15\u53f7\u7684\u6807\u8bb0\u3002 <code>()' \u62ec\u53f7\u7528\u4e8e\u5206\u7ec4\uff0c</code>[]' \u62ec\u53f7\u7528\u4e8e\u53ef\u9009\u5206\u7ec4\u3002 \u4e00\u5143\u8fd0\u7b97\u7b26\uff08\u201c+\u201d\u3001\u201c*\u201d\u548c\u6807\u7b7e\u9644\u4ef6\uff09\u9002\u7528\u4e8e\u6700\u7d27\u5bc6\u7684\u7d27\u63a5\u524d\u7f6e\u89c4\u5219\u6269\u5c55\u3002\uff08\u8981\u5c06\u5b83\u4eec\u5e94\u7528\u4e8e\u5e8f\u5217\u6216\u66ff\u4ee3\u9879\uff0c\u8bf7\u4f7f\u7528\u201c()\u201d\u6216\u201c[]\u201d\u5206\u7ec4\u3002\uff09 \u89c4\u5219\u6269\u5c55\u7684\u5e8f\u5217\u3002 '|' \u5206\u9694\u66ff\u4ee3\u89c4\u5219\u6269\u5c55\u96c6\u3002 4.8 \u9012\u5f52 \u9012\u5f52\u662f\u89c4\u5219\u672c\u8eab\u7684\u5b9a\u4e49\u3002\u9012\u5f52\u662f\u4e00\u79cd\u5f3a\u5927\u7684\u5de5\u5177\uff0c\u53ef\u4ee5\u8868\u793a\u53e3\u8bed\u4e2d\u51fa\u73b0\u7684\u8bb8\u591a\u590d\u6742\u8bed\u6cd5\u5f62\u5f0f\u3002\u652f\u6301 JSpeech \u8bed\u6cd5\u683c\u5f0f\u7684\u8bc6\u522b\u5668\u5141\u8bb8\u53f3\u9012\u5f52\u3002\u5728\u53f3\u9012\u5f52\u4e2d\uff0c\u89c4\u5219\u5c06\u81ea\u8eab\u4f5c\u4e3a\u5176\u5b9a\u4e49\u7684\u6700\u540e\u4e00\u90e8\u5206\u3002\u4f8b\u5982\uff1a</p> <p>&lt;\u547d\u4ee4&gt; = &lt;\u52a8\u4f5c&gt; | (&lt;\u52a8\u4f5c&gt; \u548c &lt;\u547d\u4ee4&gt;); &lt;\u52a8\u4f5c&gt; = \u505c\u6b62 | \u5f00\u59cb | \u6682\u505c | \u6062\u590d | \u5b8c\u6210\uff1b \u5141\u8bb8\u4ee5\u4e0b\u547d\u4ee4\uff1a\u201c\u505c\u6b62\u201d\u3001\u201c\u505c\u6b62\u5e76\u5b8c\u6210\u201d\u3001\u201c\u5f00\u59cb\u5e76\u6062\u590d\u5e76\u5b8c\u6210\u201d\u3002</p> <p>\u5d4c\u5957\u53f3\u9012\u5f52\u4e5f\u662f\u5141\u8bb8\u7684\u3002\u5d4c\u5957\u53f3\u9012\u5f52\u662f\u6307\u4e00\u6761\u89c4\u5219\u7684\u5b9a\u4e49\u5f15\u7528\u4e86\u53e6\u4e00\u6761\u89c4\u5219\uff0c\u800c\u8be5\u89c4\u5219\u53c8\u5f15\u7528\u4e86\u7b2c\u4e00\u6761\u89c4\u5219\uff0c\u6bcf\u4e2a\u9012\u5f52\u5f15\u7528\u90fd\u662f\u5b9a\u4e49\u7684\u6700\u540e\u4e00\u90e8\u5206\u3002\u4f8b\u5982\uff0c</p> <p> = \u67d0\u7269 | ;  = \u53e6\u4e00\u4ef6\u4e8b \uff1b \u5d4c\u5957\u53f3\u9012\u5f52\u53ef\u80fd\u51fa\u73b0\u5728\u8bed\u6cd5\u4e2d\u3002\u7136\u800c\uff0c\u5f3a\u70c8\u4e0d\u5efa\u8bae\u8fd9\u6837\u505a\uff0c\u56e0\u4e3a\u5b83\u4f1a\u5e26\u6765\u4e0d\u5fc5\u8981\u7684\u590d\u6742\u6027\u548c\u6f5c\u5728\u7684\u7ef4\u62a4\u95ee\u9898\u3002 <p>\u4efb\u4f55\u53f3\u9012\u5f52\u89c4\u5219\u90fd\u53ef\u4ee5\u4f7f\u7528 Kleene \u661f\u53f7\u201c*\u201d\u548c/\u6216\u52a0\u53f7\u8fd0\u7b97\u7b26\u201c+\u201d\u91cd\u5199\u3002\u4f8b\u5982\uff0c\u4ee5\u4e0b\u89c4\u5219\u5b9a\u4e49\u662f\u7b49\u6548\u7684\uff1a</p> <p>&lt;\u547d\u4ee4&gt; = &lt;\u52a8\u4f5c&gt; | (&lt;\u52a8\u4f5c&gt; \u548c &lt;\u547d\u4ee4&gt;); &lt;\u547d\u4ee4&gt; = &lt;\u52a8\u4f5c&gt; (\u548c &lt;\u52a8\u4f5c&gt;) ; \u5c3d\u7ba1\u53ef\u4ee5\u4f7f\u7528\u201c+\u201d\u548c\u201c\u201d\u8fd0\u7b97\u7b26\u91cd\u5199\u53f3\u9012\u5f52\u8bed\u6cd5\uff0c\u4f46\u5141\u8bb8\u4f7f\u7528\u9012\u5f52\u5f62\u5f0f\uff0c\u56e0\u4e3a\u5b83\u5141\u8bb8\u66f4\u7b80\u5355\u3001\u66f4\u4f18\u96c5\u5730\u8868\u793a\u67d0\u4e9b\u8bed\u6cd5\u3002\u4e0d\u652f\u6301\u5176\u4ed6\u5f62\u5f0f\u7684\u9012\u5f52\uff08\u5de6\u9012\u5f52\u3001\u5d4c\u5165\u5f0f\u9012\u5f52\uff09\uff0c\u56e0\u4e3a\u65e0\u6cd5\u4fdd\u8bc1\u91cd\u5199\u6761\u4ef613\u3002</p> <p>4.9  \u548c  \u7684\u4f7f\u7528 \u672c\u6587\u6863\u524d\u9762\u5b9a\u4e49\u7684 \u4e24\u4e2a\u7279\u6b8a\u89c4\u5219\u540d\u79f0-\u548c - \u5177\u6709\u8bb8\u591a\u9ad8\u7ea7\u7528\u9014\u3002 <p>\u4f5c\u4e3a\u4efb\u4f55\u89c4\u5219\u6269\u5c55\u7684\u66ff\u4ee3\uff0c\u5f15\u7528\u4e0e\u4f7f\u7528\u53ef\u9009\u5206\u7ec4\u76f8\u540c\u3002\u56e0\u6b64\uff0c\u4ee5\u4e0b\u662f\u7b49\u6548\u5b9a\u4e49\uff1a <p> = a | &lt;\u7a7a&gt;\uff1b  = [ \u4e00 ]; Kleene \u661f\u53f7\u548c\u53f3\u9012\u5f52\u53ef\u4ee5\u6620\u5c04\u5982\u4e0b\uff1a <p> =  | \u4e00\u4e2a\uff1b  = a*; \u5bf9\u4e8e\u524d\u4e24\u79cd\u60c5\u51b5\uff0c\u8bed\u6cd5\u662f\u76f8\u540c\u7684\uff0c\u56e0\u4e3a\u7528\u6237\u53ef\u80fd\u4f1a\u8bf4\u51fa\u5b8c\u5168\u76f8\u540c\u7684\u8bdd\u8bed\u3002\u4f46\u662f\uff0c\u5f53\u7528\u6237\u8bf4\u51fa\u4e0e\u8bed\u6cd5\u5339\u914d\u7684\u5185\u5bb9\u65f6\uff0c\u8bc6\u522b\u5668\u751f\u6210\u7684\u7ed3\u679c\u8868\u793a\u53ef\u80fd\u4f1a\u5b58\u5728\u7a0b\u5e8f\u4e0a\u7684\u5dee\u5f02\u3002 <p>\u548c \u7684\u6700\u540e\u4e00\u79cd\u7528\u9014\u662f\u95e8\u63a7\u3002\u8981\u6253\u5f00\u548c\u5173\u95ed\u8bed\u6cd5\u7684\u7279\u5b9a\u90e8\u5206\uff0c\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u5b9a\u4e49\u89c4\u5219\uff0c\u5c06\u5176\u653e\u5728\u8981\u6253\u5f00\u548c\u5173\u95ed\u7684\u8bed\u6cd5\u90e8\u5206\u4e4b\u524d\uff0c\u5e76\u5728\u4ee5\u4e0b\u4e24\u8005\u4e4b\u95f4\u4ea4\u66ff\u5b9a\u4e49\uff1a <p>&lt;\u95e8&gt; = &lt;\u7a7a&gt;\uff1b &lt;\u95e8&gt; = &lt;\u865a\u7a7a&gt;; \u5f53 \u65f6\uff0c\u5b83\u662f\u4e0d\u53ef\u8bf4\u7684\uff0c\u5e76\u4e14\u8bed\u6cd5\u533a\u57df\u88ab\u5173\u95ed\u3002 <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u4e3a\u4e86\u6709\u6548\u5de5\u4f5c\uff0c\u6b64\u6280\u672f\u9700\u8981\u4e00\u4e2a\u80fd\u591f\u5728\u66f4\u6539\u5b9a\u4e49\u540e\u6709\u6548\u5730\u91cd\u65b0\u7f16\u8bd1\u8bed\u6cd5\u7684\u8bc6\u522b\u5668\u3002\u5e76\u975e\u6240\u6709\u8bc6\u522b\u5668\u90fd\u80fd\u6709\u6548\u5730\u6267\u884c\u6b64\u91cd\u65b0\u7f16\u8bd1\u3002 <p>4.10 \u6587\u6863\u6ce8\u91ca JSpeech \u8bed\u6cd5\u683c\u5f0f\u652f\u6301\u4e0e Java \u7f16\u7a0b\u8bed\u8a00 (GJS96, \u00a718) \u7684\u6587\u6863\u6ce8\u91ca\u98ce\u683c\u7c7b\u4f3c\u7684\u6587\u6863\u6ce8\u91ca\u3002\u6b64\u7c7b\u6ce8\u91ca\u53ef\u4ee5\u51fa\u73b0\u5728\u8bed\u6cd5\u58f0\u660e\u4e4b\u524d\u3001\u5bfc\u5165\u8bed\u53e5\u4e4b\u524d\u4ee5\u53ca\u4efb\u4f55\u89c4\u5219\u7684\u5b9a\u4e49\u4e4b\u524d\u3002\u53ef\u4ee5\u4ece\u8fd9\u4e9b\u6ce8\u91ca\u4e2d\u81ea\u52a8\u751f\u6210\u8d85\u6587\u672c\u7f51\u9875\u548c\u5176\u4ed6\u5f62\u5f0f\u7684\u6587\u6863\u3002</p> <p>\u6587\u6863\u6ce8\u91ca\u4ee5\u5b57\u7b26\u5f00\u59cb/\u5e76\u4ee5\u7ed3\u675f/\u3002\u5728\u6bcf\u4e2a\u6ce8\u91ca\u884c\u4e0a\uff0c\u524d\u5bfc\u5b57\u7b26\u548c\u4efb\u4f55\u524d\u9762\u7684\u7a7a\u683c\u90fd\u5c06\u88ab\u5ffd\u7565\u3002</p> <p>\u6ce8\u91ca\u7684\u7b2c\u4e00\u53e5\uff08\u4ee5\u7b2c\u4e00\u4e2a\u53e5\u53f7\u7ed3\u675f\uff09\u5e94\u5f53\u662f\u4e00\u4e2a\u603b\u7ed3\u53e5\uff0c\u5bf9\u6240\u6ce8\u91ca\u7684\u5b9e\u4f53\u8fdb\u884c\u7b80\u6d01\u7684\u63cf\u8ff0\u3002</p> <p>\u4e0e Java \u7f16\u7a0b\u8bed\u8a00\u4e2d\u7684\u6587\u6863\u6ce8\u91ca\u4e0d\u540c\uff0cJSpeech \u8bed\u6cd5\u683c\u5f0f\u4e2d\u7684\u6587\u6863\u6ce8\u91ca\u4e0d\u5141\u8bb8\u4f7f\u7528 HTML \u6807\u8bb0\u3002\u8fd9\u662f\u56e0\u4e3a HTML \u6807\u8bb0\u548c JSGF \u89c4\u5219\u540d\u79f0\u5f15\u7528\u4f7f\u7528\u76f8\u540c\u7684\u683c\u5f0f\u3002\u4f8b\u5982\uff0c\u662f\u89c4\u5219\u540d\u79f0\u8fd8\u662f HTML \u4ee3\u7801\uff1f <p>\u5e26\u6807\u8bb0\u7684\u6bb5\u843d \u7531\u4e00\u884c\u6587\u6863\u6ce8\u91ca\u6807\u8bb0\uff0c\u8be5\u6ce8\u91ca\u4ee5 @ \u5b57\u7b26\u5f00\u5934\uff0c\u540e\u8ddf\u4e0b\u9762\u5b9a\u4e49\u7684\u5173\u952e\u5b57\u4e4b\u4e00\u3002\u5e26\u6807\u8bb0\u7684\u6bb5\u843d\u5305\u62ec\u6ce8\u91ca\u7684\u4ee5\u4e0b\u51e0\u884c\uff0c\u76f4\u5230\u4e0b\u4e00\u4e2a\u5e26\u6807\u8bb0\u7684\u6bb5\u843d\u7684\u5f00\u5934\u6216\u6587\u6863\u6ce8\u91ca\u7684\u7ed3\u5c3e\u3002\uff08\u6587\u6863\u6807\u8bb0\u4e0e\u89c4\u5219\u5b9a\u4e49\u4e2d\u7684\u6807\u8bb0\u65e0\u5173\u3002\uff09</p> <p>\u4ee5\u4e0b\u793a\u4f8b\u663e\u793a\u4e86\u6587\u6863\u6ce8\u91ca\u7684\u57fa\u672c\u7ed3\u6784\u3002 \u793a\u4f8b 3\uff1a\u6587\u6863\u6ce8\u91ca\u663e\u793a\u4e86\u7b80\u5355\u8bed\u6cd5\u7684\u6ce8\u91ca\u793a\u4f8b\u3002</p> <p>/*     * \u7b2c\u4e00\u53e5\u8bdd\u63d0\u4f9b\u4e86\u6458\u8981\u3002     * \u53ef\u4ee5\u63d2\u5165\u9644\u52a0\u6587\u672c\u548c\u6bb5\u843d\u3002     *     * @tag \u4e0b\u9762\u5b9a\u4e49\u4e86\u51e0\u79cd\u7c7b\u578b\u7684\u6807\u7b7e     / 4.10.1 @author \u6807\u7b7e \u8be5@author\u6807\u7b7e\u53ef\u7528\u4e8e\u8bed\u6cd5\u58f0\u660e\u7684\u6587\u6863\u6ce8\u91ca\u4e2d\u3002\u5c3d\u7ba1\u8be5\u6807\u7b7e\u6ca1\u6709\u660e\u786e\u7684\u7ed3\u6784@author\uff0c\u4f46\u5efa\u8bae\u5c06\u6bcf\u4f4d\u4f5c\u8005\u5217\u5728\u5355\u72ec\u7684\u6807\u7b7e\u4e2d\u3002@author\u5355\u4e2a\u6ce8\u91ca\u4e2d\u53ef\u4ee5\u5305\u542b\u591a\u4e2a\u6807\u7b7e\u3002</p> <p>\u4f8b\u5982\uff0c</p> <p>@author \u8a79\u59c6\u65af\u90a6\u5fb7 @author Jose Alvarez 4.10.2 @version\u6807\u7b7e \u8bed\u6cd5\u58f0\u660e\u7684\u6587\u6863\u6ce8\u91ca\u4e2d\u53ef\u4ee5\u5305\u542b\u5355\u4e2a@version\u6807\u7b7e\u3002\u6ca1\u6709\u5b9a\u4e49\u7684\u7ed3\u6784\u6216\u683c\u5f0f\u3002\u4f8b\u5982\uff0c @version \u7248\u672c\u4fe1\u606f 4.10.3 @see \u6807\u7b7e \u4efb\u4f55\u6587\u6863\u6ce8\u91ca\u4e2d\u90fd\u53ef\u4ee5\u4f7f\u7528\u4efb\u610f\u6570\u91cf\u7684@see\u6807\u7b7e\u3002\u6807\u7b7e\u8868\u793a\u5bf9\u53e6\u4e00\u6761\u89c4\u5219\uff08\u672c\u5730\u6216\u5bfc\u5165\uff09\u6216\u53e6\u4e00\u8bed\u6cd5\u7684\u4ea4\u53c9\u5f15\u7528\u3002\u540e\u7f00.*\u8868\u793a\u5f15\u7528\u7684\u662f\u8bed\u6cd5\u3002 @see  @see  @see  4.10.4 @example \u6807\u7b7e \u53ef\u4ee5\u5728\u89c4\u5219\u58f0\u660e\u7684\u6587\u6863\u6ce8\u91ca\u4e2d\u63d0\u4f9b\u6807\u7b7e@example\uff0c\u4ee5\u63d0\u4f9b\u89c4\u5219\u5982\u4f55\u8868\u8ff0\u7684\u793a\u4f8b\u3002\u9002\u5f53\u7684\u793a\u4f8b\u4f7f\u8bed\u6cd5\u548c\u89c4\u5219\u66f4\u5bb9\u6613\u7406\u89e3\u3002\u793a\u4f8b\u6587\u672c\u8fd8\u53ef\u4ee5\u88ab\u8bed\u6cd5\u5de5\u5177\u7528\u6765\u9a8c\u8bc1\u8bed\u6cd5\u7684\u6b63\u786e\u6027\u3002 @example\u8bf7\u8bf4\u51fa\u4f60\u7684\u59d3\u540d\u548c\u5e74\u9f84 @example \u6211\u559c\u6b22\u201c\u5357\u7f8e\u6d32\u201d \u9f13\u52b1\u5f00\u53d1\u4eba\u5458\u5728\u793a\u4f8b\u4e2d\u4f7f\u7528\u4e0e\u89c4\u5219\u5b9a\u4e49\u4e2d\u76f8\u540c\u7684\u6807\u8bb0\u5316\u3002\u4f8b\u5982\uff0c\u4e0a\u9762\u7684\u7b2c\u4e8c\u4e2a\u793a\u4f8b\u5e94\u88ab\u89e3\u91ca\u4e3a\u4e24\u4e2a\u6807\u8bb0\uff0c\u56e0\u4e3a\u201csouth america\u201d\u5468\u56f4\u6709\u5f15\u53f7\u3002\u4f46\u662f\uff0c\u5de5\u5177\u5f00\u53d1\u4eba\u5458\u5e94\u8003\u8651\u793a\u4f8b\u6587\u672c\u53ef\u80fd\u5305\u542b\u4eba\u7c7b\u53ef\u8bfb\u7684\u683c\u5f0f\uff0c\u4ee5\u4fbf\u6e05\u6670\u7406\u89e3\u3002\u5bf9\u4e8e\u82f1\u8bed\uff0c\u8fd9\u53ef\u80fd\u5305\u62ec\u6807\u70b9\u7b26\u53f7\uff08\u53e5\u53f7\u3001\u9017\u53f7\u3001\u95ee\u53f7\u3001\u611f\u53f9\u53f7\u7b49\uff09\u3001\u67d0\u4e9b\u6807\u8bb0\u7684\u5927\u5199\u3001\u4fee\u6539\u540e\u7684\u6807\u8bb0\u5316\uff08\u4f8b\u5982\u7f3a\u5c11\u5f15\u53f7\uff09\u3002 <p>\u6807\u7b7e@example\u53ef\u80fd\u5305\u542b\u89c4\u5219\u540d\u79f0\u5f15\u7528\u3002\u4f8b\u5982\uff0c</p> <p>@example \u6211\u60f3\u8981\u4e00\u4e2a\u5e26\u6709  \u7684\u62ab\u8428 \u5c06\u968f\u7740\u4e3a\u89c4\u5219\u5b9a\u4e49\u7684\u6bcf\u4e2a\u793a\u4f8b\u6807\u7b7e\u800c\u6269\u5c55\uff08\u201c\u6211\u60f3\u8981\u4e00\u4e2a\u610f\u5927\u5229\u8fa3\u9999\u80a0\u62ab\u8428\u201d\u3001\u201c\u6211\u60f3\u8981\u4e00\u4e2a\u8611\u83c7\u62ab\u8428\u201d\u7b49\u7b49\uff09\u3002 <p>5.\u793a\u4f8b \u901a\u8fc7\u5c06\u7b80\u5355\u7684\u89c4\u5219\u7ec4\u5408\u5728\u4e00\u8d77\uff0c\u53ef\u4ee5\u6784\u5efa\u590d\u6742\u7684\u8bed\u6cd5\u6765\u6355\u6349\u7528\u6237\u6240\u8bf4\u7684\u5185\u5bb9\u3002\u4ee5\u4e0b\u662f\u5177\u6709\u5b8c\u6574\u6807\u9898\u548c\u6b63\u6587\u7684\u8bed\u6cd5\u793a\u4f8b\u3002</p> <p>5.1 \u793a\u4f8b 1\uff1a\u7b80\u5355\u7684\u547d\u4ee4\u548c\u63a7\u5236 \u6b64\u793a\u4f8b\u663e\u793a\u4e86\u5b9a\u4e49\u63a7\u5236\u7a97\u53e3\u7684\u53e3\u5934\u547d\u4ee4\u7684\u4e24\u4e2a\u57fa\u672c\u8bed\u6cd5\u3002\u5176\u4e2d\u5305\u62ec\u53ef\u9009\u7684\u793c\u8c8c\u6027\uff0c\u4ee5\u663e\u793a\u5982\u4f55\u4f7f\u8bed\u97f3\u4ea4\u4e92\u66f4\u52a0\u81ea\u7136\u548c\u5bf9\u8bdd\u6027\u66f4\u5f3a\u3002</p>"},{"location":"speech_and_language_processing/jsgf/jsgf/#jsgf-v10_1","title":"JSGF V1.0\uff1b","text":"<p>\u8bed\u6cd5 com.acme.politeness\uff1b</p> <p>// \u8eab\u4f53 public  = (\u8bf7 | \u8bf7 | \u4f60\u80fd | \u54e6\uff0c\u5f3a\u5927\u7684\u8ba1\u7b97\u673a) *; public  = [ \u8bf7 | \u8c22\u8c22 | \u8c22\u8c22\u4f60 ]; \u8bed\u6cd5politeness\u672c\u8eab\u5e76\u6ca1\u6709\u4ec0\u4e48\u7528\uff0c\u4f46\u5bfc\u5165 commands\u8bed\u6cd5\u53ef\u4ee5\u589e\u52a0\u5bf9\u8bdd\u98ce\u683c\u3002"},{"location":"speech_and_language_processing/jsgf/jsgf/#jsgf-v10-iso8859-1","title":"JSGF V1.0 ISO8859-1 \u82f1\u6587;","text":"<p>\u8bed\u6cd5 com.acme.commands; \u5bfc\u5165 \uff1b \u5bfc\u5165 \uff1b <p>/*   * \u57fa\u672c\u547d\u4ee4\u3002   * @example \u8bf7\u79fb\u52a8\u7a97\u53e3   * @example \u6253\u5f00\u4e00\u4e2a\u6587\u4ef6   /</p> <p>\u516c\u5171 =  &lt;\u547d\u4ee4&gt; ; <p>&lt;\u547d\u4ee4&gt; = &lt;\u52a8\u4f5c&gt; &lt;\u5bf9\u8c61&gt;; &lt;\u52a8\u4f5c&gt; = /10/\u6253\u5f00|/2/\u5173\u95ed|/1/\u5220\u9664|/1/\u79fb\u52a8\uff1b &lt;\u5bf9\u8c61&gt; = \u8fd9\u4e2a|\u4e00\u4e2a\uff1b \u8be5commands\u8bed\u6cd5\u5b9a\u4e49\u4e86\u4e00\u6761public\u89c4\u5219\uff0c\u5b83\u7531\u4e24\u6761\u5bfc\u5165\u89c4\u5219\u548c\u4ee5\u53ca\u4e09\u6761\u79c1\u6709\u89c4\u5219\u7ec4\u6210\uff0c\u548c\u3002 \u548c\u89c4\u5219\u90fd\u662f\u5907\u9009\u8bcd\u96c6\uff0c\u64cd\u4f5c\u5217\u8868\u5177\u6709\u6743\u91cd\uff0c\u8868\u660e\u201copen\u201d\u6bd4\u5176\u4ed6\u8bcd\u66f4\u6709\u53ef\u80fd\u51fa\u73b0\u3002\u89c4\u5219\u5b9a\u4e49\u4e86\u4e00\u4e2a\u5e8f\u5217\uff0c\u5176\u4e2d\u540e\u9762\u53ef\u9009\u5730\u8ddf\u7740\u201cthe\u201d\u6216\u201ca\u201d\uff0c\u5e76\u4e14\u603b\u662f\u8ddf\u7740\u4e00\u4e2a\u3002"},{"location":"speech_and_language_processing/jsgf/jsgf/#jsgf-v10_2","title":"jsgf","text":""},{"location":"speech_and_language_processing/jsgf/jsgf/#jsgf-10-iso8559-1","title":"jsgf","text":""},{"location":"speech_and_language_processing/jsgf/jsgf/#_8","title":"jsgf","text":""},{"location":"todo/todo/","title":"TODO","text":""},{"location":"todo/todo/#_1","title":"\u5f85\u529e","text":"<ol> <li>TOD\u4ecb\u7ecd</li> <li>\u5b66\u672f\u7248GPT</li> <li>CPU\u8bbe\u8ba1</li> <li>cmake\u5b66\u4e60</li> <li>scaling law</li> <li>https://arthurchiao.art/blog/llama-paper-zh/</li> <li>https://www.aminer.org/research_report/64d9cb367cb68b460f1739af</li> <li>https://www.jiqizhixin.com/articles/2024-02-27-3</li> <li>https://github.com/km1994/llms_paper</li> <li>https://zhuanlan.zhihu.com/p/684955373</li> <li>https://zhuanlan.zhihu.com/p/687278237</li> <li>https://zhuanlan.zhihu.com/p/663524611</li> <li>https://ai.meta.com/blog/meta-llama-3/</li> <li>https://zhuanlan.zhihu.com/p/660580871</li> <li>https://qwenlm.github.io/zh/blog/qwen-moe/</li> <li>https://python3-cookbook.readthedocs.io/zh-cn/latest/c10/p04_split_module_into_multiple_files.html</li> <li>https://dlsyscourse.org/assignments/</li> <li>https://www.bilibili.com/video/BV1ZC4y177Tw/?spm_id_from=333.788&amp;vd_source=5d036d17b16d6367c25a00641a169e1f</li> <li>https://search.bilibili.com/all?vt=15763804&amp;keyword=%E6%8A%95%E6%9C%BA%E9%87%87%E6%A0%B7&amp;from_source=webtop_search&amp;spm_id_from=333.1007&amp;search_source=5</li> <li>https://www.bilibili.com/video/BV1oQ4y197tQ/?spm_id_from=333.337.search-card.all.click&amp;vd_source=5d036d17b16d6367c25a00641a169e1f</li> <li>https://www.bilibili.com/video/BV1Q24y1S7ve/?p=1&amp;vd_source=5d036d17b16d6367c25a00641a169e1f</li> <li>https://www.bilibili.com/video/BV1f5411i78C/?spm_id_from=autoNext&amp;vd_source=5d036d17b16d6367c25a00641a169e1f</li> <li>https://www.bilibili.com/video/BV1214y1X7Aq/?spm_id_from=pageDriver&amp;vd_source=5d036d17b16d6367c25a00641a169e1f</li> <li>https://programmercarl.com/0239.%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E6%9C%80%E5%A4%A7%E5%80%BC.html#%E6%80%9D%E8%B7%AF</li> <li>https://www.promptingguide.ai/zh</li> <li>https://space.bilibili.com/517221395/search/video?tid=0&amp;pn=3&amp;keyword=%E8%AE%A1%E7%AE%97%E5%9B%BE&amp;order=pubdate</li> <li>https://www.bilibili.com/video/BV1cG411E7gV/?spm_id_from=333.999.0.0&amp;vd_source=5d036d17b16d6367c25a00641a169e1f</li> <li>https://www.bilibili.com/video/BV1Bv4y1J7QT/?p=2&amp;spm_id_from=pageDriver&amp;vd_source=5d036d17b16d6367c25a00641a169e1f</li> <li>https://www.bilibili.com/video/BV1aF411v7Va/?spm_id_from=333.788.recommend_more_video.2&amp;vd_source=5d036d17b16d6367c25a00641a169e1f</li> <li>https://www.bilibili.com/video/BV1Ds4y1k7yr/?spm_id_from=333.337.search-card.all.click&amp;vd_source=5d036d17b16d6367c25a00641a169e1f</li> <li>https://space.bilibili.com/517221395/search/video?tid=0&amp;pn=3&amp;keyword=%E8%AE%A1%E7%AE%97%E5%9B%BE&amp;order=pubdate</li> <li>https://mkdocs-like-code.readthedocs.io/zh-cn/latest/get-started/deploy/#github-pages</li> <li>https://zhuanlan.zhihu.com/p/649731916</li> <li>https://blog.csdn.net/u010159842/article/details/78959515</li> <li>https://www.bilibili.com/video/BV1AW4y1F7EK/?p=2&amp;spm_id_from=pageDriver&amp;vd_source=5d036d17b16d6367c25a00641a169e1f</li> <li>https://www.bilibili.com/video/BV17g4y1g7S6/?spm_id_from=333.788&amp;vd_source=5d036d17b16d6367c25a00641a169e1f</li> <li>https://search.bilibili.com/all?keyword=qlora%E8%AE%AD%E7%BB%83&amp;from_source=webtop_search&amp;spm_id_from=333.1007&amp;search_source=5</li> <li>https://www.bilibili.com/video/BV1Hb421b72f/?spm_id_from=333.1007.tianma.1-2-2.click&amp;vd_source=5d036d17b16d6367c25a00641a169e1f</li> <li>https://juejin.cn/post/7350510977052229668</li> <li>https://huggingface.co/learn/nlp-course/zh-CN/chapter6/3</li> <li>https://www.huaxiaozhuan.com/%E5%B7%A5%E5%85%B7/huggingface_transformer/chapters/1_tokenizer.html</li> <li>https://huggingface.co/docs/transformers/main/zh/main_classes/tokenizer</li> <li>https://tvm.hyper.ai/docs/arch/arch/pass_infra/</li> <li>https://tvm.hyper.ai/docs/</li> <li>https://yangzhang.site/Note/mkdocs/practice/</li> <li>https://github.com/hellotransformers/Natural_Language_Processing_with_Transformers/tree/main</li> </ol>"},{"location":"tokenizer/bpe/","title":"BPE \u7b97\u6cd5","text":"<p>BPE \u7b97\u6cd5\u7684\u5168\u79f0\u662f Byte-Pair Encoding, \u8be5\u7b97\u6cd5\u6700\u65e9\u662f 1994 \u5e74\u63d0\u51fa\u5e94\u7528\u4e8e \u6570\u636e\u538b\u7f29 \u4efb\u52a1\u3002\u5728 2015 \u5e74, Neural Machine Translation of Rare Words with Subword Units \u63d0\u51fa\u5c06\u5176\u5ef6\u7533\u81f3 \u6587\u672c\u5206\u8bcd \u4efb\u52a1, \u540c\u65f6\u6ca1\u6709\u6539\u53d8\u7b97\u6cd5\u7684\u540d\u79f0\u3002(\u5982\u679c\u4f60\u4e0d\u4e86\u89e3\u4e4b\u524d\u7684\u6570\u636e\u538b\u7f29\u7b97\u6cd5, \u53ef\u80fd\u4f1a\u597d\u5947\u4e3a\u4ec0\u4e48\u662f\u8fd9\u4e2a\u540d\u5b57)\u3002</p> <p>OpenAI \u5173\u4e8e GPT \u7684\u4e00\u7cfb\u5217\u5de5\u4f5c, \u4ee5\u53ca Meta \u5173\u4e8e LLaMA \u7684\u4e00\u7cfb\u5217\u5de5\u4f5c\u90fd\u662f\u4f7f\u7528\u8fd9\u79cd\u5206\u8bcd\u65b9\u5f0f\u3002OpenAI \u867d\u7136\u6ca1\u6709\u5f00\u6e90 GPT-3 \u6a21\u578b\u7684\u53c2\u6570\u6743\u91cd, \u4f46\u662f\u5f00\u6e90\u4e86\u5206\u8bcd\u5e93 tiktoken, \u5e2e\u52a9\u7528\u6237\u5728\u8c03\u7528\u63a5\u53e3\u524d\u8ba1\u7b97 token \u6570\u3002</p> <p>\u4e0b\u9762\u5c31\u8ba9\u6211\u4eec\u770b\u770b\u8fd9\u4e2a\u7b97\u6cd5\u3002\u9996\u5148\u6765\u770b\u770b \"\u8bad\u7ec3\" \u8fc7\u7a0b:</p> <ul> <li> <p>\u7b2c\u4e00\u6b65\uff1a\u4f7f\u7528 \u7a7a\u683c \u5bf9\u8bed\u6599\u5e93\u4e2d\u7684\u6240\u6709\u53e5\u5b50\u8fdb\u884c\u62c6\u5206\uff0c\u5f97\u5230\u6240\u6709\u53ef\u80fd\u7684 <code>word</code>\u3002</p> </li> <li> <p>\u7b2c\u4e8c\u6b65\uff1a\u5c06\u8bed\u6599\u5e93\u4e2d\u6240\u6709\u7684 <code>word</code> \u4ee5\u5b57\u7b26 (\u6700\u5c0f\u9897\u7c92) \u4e3a\u5355\u4f4d\u8fdb\u884c\u62c6\u5206, \u6bcf\u4e00\u4e2a\u5b57\u7b26\u4f5c\u4e3a\u4e00\u4e2a subword\u3002\u6bd4\u65b9\u8bf4, \u5355\u8bcd\"<code>best</code>\" \u88ab\u62c6\u5206\u6210 \"<code>b e s t</code>\" \u56db\u4e2a\u5b57\u7c92\u5ea6 subword (\u7528 \u7a7a\u683c \u4f5c\u4e3a\u5206\u9694\u7b26)\u3002</p> </li> <li> <p>\u7b2c\u4e09\u6b65, \u521d\u59cb\u5316 \u8bcd\u8868 \u548c \u5408\u5e76\u89c4\u5219\u5217\u8868\u3002\u5176\u4e2d, \u8bcd\u8868 \u5c31\u662f\u6240\u6709\u53ef\u80fd\u7684 subword \u96c6\u5408, \u4e5f\u5c31\u662f\u521d\u59cb\u5316\u6210\u8bed\u6599\u5e93\u4e2d\u6240\u6709\u53ef\u80fd\u7684\u5b57\u7b26\u96c6\u5408\u3002</p> </li> <li> <p>\u7b2c\u56db\u6b65, \u904d\u5386 <code>word</code> \u4e2d\u6240\u6709\u53ef\u80fd\u7684 subword pair, \u7edf\u8ba1\u4ed6\u4eec\u51fa\u73b0\u7684\u9891\u6570\u3002\u7136\u540e\u5c06\u6570\u636e\u96c6\u4e2d \u9891\u6570\u6700\u9ad8 \u7684\u90a3\u4e00\u4e2a subword pair \u5408\u5e76\u5728\u4e00\u8d77, \u5408\u5e76\u540e\u7684 subword \u52a0\u5165 \u8bcd\u8868 \u4e2d, \u5408\u5e76\u89c4\u5219\u52a0\u5165 \u5408\u5e76\u89c4\u5219\u5217\u8868 \u4e2d\u3002</p> <p>\u4e3e\u4f8b\u6765\u8bf4, \"<code>b e s t</code>\" \u73b0\u5728\u6709\u4e09\u79cd\u53ef\u80fd\u7684 subword pair: \"<code>b e</code>\", \"<code>e s</code>\" \u548c \"<code>s t</code>\"\u3002\u7edf\u8ba1\u5b8c\u6210\u540e, \u53d1\u73b0\u5728\u8bed\u6599\u5e93\u4e2d, \"<code>s t</code>\" \u51fa\u73b0\u7684\u9891\u6570\u6700\u9ad8\u3002\u90a3\u4e48, \u6211\u4eec\u5c31\u5c06\u6574\u4e2a\u6570\u636e\u96c6\u4e2d\u7684 \"<code>s t</code>\" \u5408\u5e76\u8d77\u6765, \u53d8\u6210 \"<code>st</code>\"\u3002\u6b64\u65f6 <code>best</code> \u7684\u62c6\u5206\u7ed3\u679c\u5c31\u662f \"<code>b e st</code>\", \u4ece\u56db\u4e2a subword \u53d8\u6210\u4e09\u4e2a subword\u3002</p> <p>\u540c\u65f6, \u5c06 \"<code>st</code>\" \u8fd9\u4e2a subword \u52a0\u5165 \u8bcd\u8868 \u4e2d, \u5c06 (\"<code>s t</code>\", \"<code>st</code>\") \u52a0\u5165 \u5408\u5e76\u89c4\u5219\u5217\u8868 \u4e2d\u3002</p> </li> <li> <p>\u7b2c\u4e94\u6b65, \u4e00\u76f4\u91cd\u590d \u7b2c\u4e09\u6b65 \u7684\u64cd\u4f5c, \u76f4\u81f3 \u8bcd\u8868 \u8fbe\u5230\u9884\u8bbe\u7684\u5927\u5c0f\u5373\u53ef\u3002</p> </li> </ul> <p>\u6574\u4e2a\u8bad\u7ec3\u8fc7\u7a0b\u5c31\u662f\u4e0d\u65ad\u5730\u53bb\u5bfb\u627e\u8bed\u6599\u5e93\u4e2d\u9891\u6570\u6700\u9ad8\u7684 subword pair, \u7136\u540e\u5408\u5e76\u6210\u4e00\u4e2a subword, \u8fd9\u4e2a\u8fc7\u7a0b\u548c \u6570\u636e\u538b\u7f29 \u7b97\u6cd5\u4e2d\u7684\u6838\u5fc3\u601d\u60f3\u662f\u4e00\u81f4\u7684\u3002</p> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f, subword pair \u7684\u5408\u5e76\u6b21\u6570\u5e76\u4e0d\u4e00\u5b9a\u7b49\u4e8e\u5176\u9891\u6570\u3002\u4e3e\u4f8b\u6765\u8bf4, \u5bf9\u4e8e \"<code>x x x</code>\" \u6765\u8bf4, \u5176\u4e2d \"<code>x x</code>\" \u51fa\u73b0\u4e86\u4e24\u6b21, \u4f46\u662f\u6211\u4eec\u5408\u5e76\u65f6\u53ea\u80fd\u5408\u5e76\u4e00\u4e2a, \u5373 \"<code>xx x</code>\"\u3002</p> <p>\u90a3\u4e48, \u6211\u4eec\u600e\u4e48\u5bf9 word \u8fdb\u884c\u5206\u8bcd\u5462? \u9996\u5148, \u5c06 word \u4ee5\u5b57\u7b26\u7c92\u5ea6\u4e3a\u5355\u4f4d\u8fdb\u884c\u62c6\u5206, \u4e00\u4e2a\u5b57\u7b26\u4f5c\u4e3a\u4e00\u4e2a subword\u3002\u7136\u540e\u6309\u7167 \u5408\u5e76\u89c4\u5219\u5217\u8868 \u4e2d\u7684\u987a\u5e8f, \u5982\u679c\u51fa\u73b0\u4e86 subword pair, \u5c31\u8fdb\u884c\u5408\u5e76\u3002\u6700\u540e\u5269\u4e0b\u7684 subword \u5217\u8868\u5c31\u662f\u6700\u7ec8\u7684\u5206\u8bcd\u7ed3\u679c\u3002</p> <p>\u6574\u4f53\u4e0a\u7684\u65b9\u6848\u5c31\u662f\u8fd9\u6837, \u53ef\u4ee5\u8bf4\u975e\u5e38\u5de7\u5999\u3002\u8fd9\u4e2a\u7b97\u6cd5\u5f00\u6e90\u5728 subword-nmt \u9879\u76ee\u4e2d\u3002</p> <p>\u73b0\u5728, \u5f88\u591a\u8bba\u6587\u4e2d\u90fd\u8bf4\u5176\u4f7f\u7528\u4e86 Byte-Level BPE (BBPE), \u5c31\u662f\u5c06\u7b2c\u56db\u90e8\u5206\u6240\u8bf4\u7684 byte-level \u65b9\u6848\u548c BPE \u7ed3\u5408\u8d77\u6765, \u6700\u521d\u662f OpenAI \u5728 GPT-2 \u5de5\u4f5c\u4e2d\u63d0\u51fa\u3002\u7f51\u4e0a\u5f88\u591a\u535a\u5ba2\u5728\u4ecb\u7ecd BBPE \u65f6, \u5f15\u7528\u7684\u8bba\u6587\u662f Meta \u7684 Neural Machine Translation with Byte-Level Subwords, \u5176\u53d1\u5e03\u6bd4 GPT-2 \u665a\u534a\u5e74, \u4e0d\u8981\u5f04\u9519\u5173\u7cfb\u4e86\u3002</p>"},{"location":"tokenizer/bpe/#_1","title":"\u8bad\u7ec3","text":""},{"location":"tokenizer/bpe/#_2","title":"\u7b2c\u4e00\u6b65\uff1a\u4f7f\u7528\u7a7a\u683c\u5bf9\u8bed\u6599\u5e93\u4e2d\u7684\u6240\u6709\u53e5\u5b50\u8fdb\u884c\u62c6\u5206","text":"<p>\u9996\u5148, \u6211\u4eec\u9700\u8981\u51c6\u5907\u4e00\u4e2a\u8bad\u7ec3\u8bed\u6599\u5e93\uff0c\u4f7f\u7528 \u7a7a\u683c\u8fdb\u884c\u5206\u8bcd\uff0c\u5728 subword-nmt \u4e2d\u5b9e\u73b0\u7684\u4ee3\u7801\u5982\u4e0b\uff1a \u7b2c\u4e00\u6b65: \u4f7f\u7528\u7a7a\u683c\u5bf9\u8bed\u6599\u5e93\u4e2d\u7684\u6240\u6709\u53e5\u5b50\u8fdb\u884c\u62c6\u5206<pre><code># \u7edf\u8ba1\u8bed\u6599\u5e93\u4e2d\u6240\u6709\u5355\u8bcd\u51fa\u73b0\u7684\u9891\u6570\nfor i, line in enumerate(fobj):\n    # \u4f7f\u7528\u7a7a\u683c\u5206\u5272\n    for word in line.strip('\\r\\n ').split(' '):\n        if word:\n            vocab[word] += 1\n</code></pre></p>"},{"location":"tokenizer/bpe/#word","title":"\u7b2c\u4e8c\u6b65\uff1a\u5c06 word \u4ee5\u5b57\u7b26\u4e3a\u5355\u4f4d\u8fdb\u884c\u62c6\u5206","text":"<p>\u5c06\u8bed\u6599\u5e93\u4e2d\u6240\u6709\u7684 <code>word</code> \u4ee5\u5b57\u7b26 (\u6700\u5c0f\u9897\u7c92) \u4e3a\u5355\u4f4d\u8fdb\u884c\u62c6\u5206\uff0c\u6bcf\u4e00\u4e2a\u5b57\u7b26\u4f5c\u4e3a\u4e00\u4e2a subword\uff0c\u5e76\u4e14\u5728\u6700\u540e\u4e00\u4e2a\u5b57\u7b26\u540e\u9762\u6dfb\u52a0\u4e00\u4e2a <code>&lt;/w&gt;</code> \u5f62\u6210\u65b0\u7684\u5b57\u7b26\u3002\u6bd4\u65b9\u8bf4, \"<code>best</code>\" \u88ab\u62c6\u5206\u6210 \"<code>b e s t&lt;/w&gt;\"</code> \u56db\u4e2a subword (\u7528 \u7a7a\u683c \u4f5c\u4e3a\u5206\u9694\u7b26)\u3002</p> <p>\u5728 subword-nmt \u4e2d\u5b9e\u73b0\u7684\u4ee3\u7801\u5982\u4e0b\uff1a</p> \u7b2c\u4e8c\u6b65\uff1a\u5c06 word \u4ee5\u5b57\u7b26\u4e3a\u5355\u4f4d\u8fdb\u884c\u62c6\u5206<pre><code># \u5c06\u5355\u8bcd\u62c6\u5206\u6210\u5b57\u7b26\uff0c\u5e76\u6dfb\u52a0 &lt;/w&gt; \u6807\u8bb0\nvocab = dict([(tuple(x[:-1]) + (x[-1] + '&lt;/w&gt;',) ,y) for (x, y) in vocab.items()])\n</code></pre>"},{"location":"tokenizer/bpe/#_3","title":"\u7b2c\u4e09\u6b65\uff1a\u6839\u636e\u5b57\u7b26\u7684\u9891\u6570\u8fdb\u884c\u964d\u5e8f\u6392\u5e8f","text":"<p>\u83b7\u53d6\u5b57\u7b26\u7684\u9891\u7387\u4e4b\u540e\uff0c\u6839\u636e\u5b57\u7b26\u7684\u5e8f\u5217\u8fdb\u884c\u964d\u5e8f\u6392\u5e8f\uff0c\u5f97\u5230\u5b57\u7b26\u7684\u6392\u5e8f\u5e8f\u5217\uff0c\u5229\u4e8e\u540e\u7eed\u7684\u5408\u5e76\u3002</p> \u7b2c\u4e09\u6b65\uff1a\u6839\u636e\u5b57\u7b26\u7684\u9891\u6570\u8fdb\u884c\u964d\u5e8f\u6392\u5e8f<pre><code>sorted_vocab = sorted(vocab.items(), key=lambda x: x[1], reverse=True)\n</code></pre>"},{"location":"tokenizer/bpe/#bi-gram","title":"\u7b2c\u56db\u6b65\uff1a\u7edf\u8ba1\u6240\u6709\u5355\u8bcd\u4e2dbi-gram\u7684\u9891\u6570","text":"<p>\u5728\u8bad\u7ec3\u8bed\u6599\u7684\u6240\u6709\u5355\u8bcd\u4e2d\uff0c\u7edf\u8ba1\u6240\u6709\u5355\u8bcd\u4e2dbi-gram\u7684\u9891\u6570\uff0c\u5177\u4f53\u7684\u5b9e\u73b0\u4ee3\u7801\u5982\u4e0b\uff1a</p> \u7b2c\u56db\u6b65\uff1a\u7edf\u8ba1\u6240\u6709\u5355\u8bcd\u4e2dbi-gram\u7684\u9891\u6570<pre><code>def get_pair_statistics(vocab):\n    \"\"\"Count frequency of all symbol pairs, and create index\"\"\"\n\n    # data structure of pair frequencies\n    stats = defaultdict(int)\n\n    #index from pairs to words\n    indices = defaultdict(lambda: defaultdict(int))\n\n    for i, (word, freq) in enumerate(vocab):\n        prev_char = word[0]\n        for char in word[1:]:\n            stats[prev_char, char] += freq\n            indices[prev_char, char][i] += 1\n            prev_char = char\n\n    return stats, indices\n</code></pre>"},{"location":"tokenizer/bpe/#bi-gram_1","title":"\u7b2c\u4e94\u6b65\uff1a\u5408\u5e76\u9891\u7387\u6700\u9ad8\u7684bi-gram","text":"<p>\u5728\u7b2c 4 \u6b65\u4e2d\uff0c\u7edf\u8ba1\u4e86\u6240\u6709\u5355\u8bcd\u4e2dbi-gram\u7684\u9891\u6570\uff0c\u7136\u540e\u6839\u636e\u9891\u7387\u8fdb\u884c\u964d\u5e8f\u6392\u5e8f\uff0c\u53d6\u51fa\u9891\u7387\u6700\u9ad8\u7684bi-gram\uff0c\u5408\u5e76\u6210\u65b0\u7684\u5b57\u7b26\uff0c\u5c06\u8bad\u7ec3\u8bed\u6599\u4e2d\u6240\u6709\u51fa\u73b0\u8be5bi-gram\u90fd\u8fdb\u884c\u5408\u5e76\uff1a \u7b2c\u4e94\u6b65\uff1a\u5408\u5e76\u9891\u7387\u6700\u9ad8\u7684bi-gram<pre><code>def replace_pair(pair, vocab, indices):\n    \"\"\"\n    \u5c06\u51fa\u73b0\u7684\u6240\u6709\u7684('A', 'B')\u66ff\u6362\u6210'AB'\u3002\n    Args:\n        pair: \u4e00\u4e2a\u7531\u4e24\u4e2a\u5143\u7d20\u7ec4\u6210\u7684\u5143\u7ec4\uff0c\u4ee3\u8868\u5f85\u66ff\u6362\u7684\u7b26\u53f7\u5bf9\uff0c\u5f62\u5982 ('A', 'B')\u3002\n        vocab: \u4e00\u4e2a\u7531\u8bcd\u53ca\u5176\u8bcd\u9891\u7ec4\u6210\u7684\u5217\u8868\uff0c\u5176\u4e2d\u6bcf\u4e2a\u5143\u7d20\u90fd\u662f\u4e00\u4e2a\u5143\u7ec4\uff0c\n               \u5f62\u5982 (word, freq)\uff0c\u5176\u4e2d word \u662f\u4e00\u4e2a\u7531\u5355\u8bcd\u7ec4\u6210\u7684\u5143\u7ec4\uff0cfreq \u662f\u8be5\u8bcd\u7684\u8bcd\u9891\u3002\n        indices: \u4e00\u4e2a\u5b57\u5178\uff0c\u7528\u4e8e\u5b58\u50a8\u7b26\u53f7\u5bf9\u5728 vocab \u4e2d\u7684\u7d22\u5f15\u3002\n\n    Returns:\n        \u4e00\u4e2a\u5217\u8868\uff0c\u5305\u542b\u66ff\u6362\u8fc7\u7a0b\u4e2d\u53d1\u751f\u7684\u53d8\u5316\uff0c\u6bcf\u4e2a\u5143\u7d20\u90fd\u662f\u4e00\u4e2a\u56db\u5143\u7ec4\uff0c\u5f62\u5982 (j, new_word, word, freq)\uff0c\n        \u5176\u4e2d j \u662f\u66ff\u6362\u540e\u7684\u8bcd\u5728 vocab \u4e2d\u7684\u7d22\u5f15\uff0cnew_word \u662f\u66ff\u6362\u540e\u7684\u8bcd\uff0cword \u662f\u66ff\u6362\u524d\u7684\u8bcd\uff0cfreq \u662f\u8be5\u8bcd\u7684\u8bcd\u9891\u3002\n\n    \"\"\"\n    first, second = pair\n    pair_str = ''.join(pair)    # \u5c06\u5e7f\u4e49\u7684bi-graim\u5408\u5e76\u5728\u4e00\u8d77\uff0c\u5f62\u5982 ('A', 'B') -&gt; 'AB'\n    pair_str = pair_str.replace('\\\\','\\\\\\\\')\n    changes = []\n    # \u8fd9\u4e2a\u6b63\u5219\u8868\u8fbe\u5f0f\u7528\u4e8e\u5339\u914d\u5b57\u7b26\u4e32\u4e2d\u7531 first \u548c second \u7ec4\u6210\u7684\uff0c\u524d\u540e\u4e0d\u63a5\u89e6\u5176\u4ed6\u975e\u7a7a\u767d\u5b57\u7b26\u7684\u6a21\u5f0f\u3002\n    pattern = re.compile(r'(?&lt;!\\S)' + re.escape(first + ' ' + second) + r'(?!\\S)')\n    if sys.version_info &lt; (3, 0):\n        iterator = indices[pair].iteritems()\n    else:\n        # \u83b7\u53d6bi-gram\u5728indices\u5b57\u5178\u4e2d\u7684\u7d22\u5f15\n        # bi-gram\u7684\u7d22\u5f15\uff0c\u8868\u793a\u7684\u662f\u8be5\u5b57\u7b26\u5bf9\u51fa\u73b0\u7684\u4f4d\u7f6e\u4ee5\u53ca\u8be5\u4f4d\u7f6e\u4e0a\u51fa\u73b0\u7684\u9891\u7387\n        iterator = indices[pair].items()\n\n    # j \u8868\u793apari\u51fa\u73b0\u7684\u4f4d\u7f6e\uff0cfreq \u8868\u793apair\u5728\u8be5\u4f4d\u7f6e\u4e0a\u51fa\u73b0\u7684\u9891\u7387\n    for j, freq in iterator:\n        if freq &lt; 1:\n            continue\n        word, freq = vocab[j]\n        new_word = ' '.join(word)\n        new_word = pattern.sub(pair_str, new_word)\n        new_word = tuple(new_word.split(' '))\n\n        vocab[j] = (new_word, freq)\n        changes.append((j, new_word, word, freq))\n\n    return changes\n</code></pre></p>"},{"location":"tokenizer/bpe/#bi-gram_2","title":"\u7b2c\u516d\u6b65\uff1a\u91cd\u65b0\u8ba1\u7b97bi-gram\u7684\u9891\u7387","text":"<p>\u5728\u7b2c\u4e94\u6b65\u4e2d\uff0c\u5c06\u6240\u6709\u7684bi-gram\u90fd\u5408\u5e76\u6210\u65b0\u7684\u5b57\u7b26\uff0c\u90a3\u4e48\u5c31\u9700\u8981\u91cd\u65b0\u8ba1\u7b97\u6bcf\u4e2a\u5b57\u7b26\u7684\u9891\u7387\uff0c\u8ba1\u7b97\u7684\u4ee3\u7801\u5982\u4e0b\u6240\u793a\uff1a</p> \u7b2c\u516d\u6b65\uff1a\u91cd\u65b0\u8ba1\u7b97bi-gram\u7684\u9891\u7387<pre><code>def update_pair_statistics(pair, changed, stats, indices):\n    \"\"\"\n    \u66f4\u65b0\u7b26\u53f7\u5bf9\u7684\u7d22\u5f15\u548c\u9891\u7387\n    \u5982\u679c\u5408\u5e76\u4e86\u7b26\u53f7\uff0c\u90a3\u4e48\u53ea\u9700\u8981\u66f4\u65b0\u6240\u6709\u5305\u542b\u8be5\u7b26\u53f7\u7684\u7b26\u53f7\u5bf9\u3002\n\n    Args:\n        pair (tuple): \u9700\u8981\u5408\u5e76\u7684\u7b26\u53f7\u5bf9\n        changed (list): \u5305\u542b\u53d1\u751f\u53d8\u5316\u7684\u56db\u5143\u7ec4 (j, word, old_word, freq)\uff0c\n                        \u5176\u4e2d j \u4e3a\u53d8\u5316\u4f4d\u7f6e\uff0cword \u4e3a\u53d8\u5316\u540e\u7684\u5355\u8bcd\uff0cold_word \u4e3a\u53d8\u5316\u524d\u7684\u5355\u8bcd\uff0cfreq \u4e3a\u53d8\u5316\u9891\u7387\n        stats (dict): \u7b26\u53f7\u5bf9\u7684\u9891\u7387\u7edf\u8ba1\n        indices (dict): \u7b26\u53f7\u5bf9\u7684\u7d22\u5f15\u7edf\u8ba1\n\n    Returns:\n        None\n\n    \"\"\"\n    stats[pair] = 0\n    indices[pair] = defaultdict(int)\n    first, second = pair\n    new_pair = first + second\n    for j, word, old_word, freq in changed:\n\n        # find all instances of pair, and update frequency/indices around it\n        i = 0\n        while True:\n            # find first symbol\n            try:\n                # \u5728\u8001\u7684 word \u4e2d\u627e\u7b2c\u4e00\u4e2a first \u51fa\u73b0\u7684\u4f4d\u7f6e\n                i = old_word.index(first, i)\n            except ValueError:\n                break\n            # if first symbol is followed by second symbol, we've found an occurrence of pair (old_word[i:i+2])\n            # \u5982\u679c\u627e\u5230\u5bf9\u5e94\u7684bi-gram, \u66f4\u65b0\u9891\u7387\u548c\u7d22\u5f15\n            if i &lt; len(old_word) - 1 and old_word[i + 1] == second:\n                # assuming a symbol sequence \"A B C\", if \"B C\" is merged, reduce the frequency of \"A B\"\n                if i:   # \u8868\u793ai\u4e0d\u662f0\uff0ci-1&gt;=0\uff0c\u5047\u8bbe\u662f\u539f\u59cb\u7684\u5e8f\u5217\u53ef\u80fd\u662f('A', 'B', 'C'), ('B', 'C') \u662f\u8981\u5408\u5e76\u7684\u5e8f\u5217\n                    prev = old_word[i-1:i+1]    # \u53d6\u51fa ('A', 'B')\uff0c\u56e0\u4e3a('B', 'C')\u8981\u5408\u5e76\u4e86\uff0c\u56e0\u6b64\u4e0d\u5b58\u5728('A', 'B') \u7ec4\u5408\uff0c\u4f1a\u4ea7\u751f\u65b0\u7684('A', 'BC')\n                    stats[prev] -= freq         # \u7edf\u8ba1\u4fe1\u606f\u4e2d\u53bb\u6389\u5f53\u524d word \u4e2d ('A', 'B') \u7684\u9891\u7387\n                    indices[prev][j] -= 1       # \u7d22\u5f15\u4e2d\u53bb\u6389\u5f53\u524d word \u4e2d ('A', 'B') \u7684\u7d22\u5f15\n                if i &lt; len(old_word) - 2:\n                    # assuming a symbol sequence \"A B C B\", if \"B C\" is merged, reduce the frequency of \"C B\".\n                    # however, skip this if the sequence is A B C B C, because the frequency of \"C B\" will be reduced by the previous code block\n                    # 1. \u4e0d\u662f (A, B, C, B) \u5e8f\u5217\n                    # 2. \u5982\u679c\u662f (A, B, C, B) \u5e8f\u5217\uff0c\u90a3\u4e48\u5f53\u524d\u7684(B, C, B) \u662f\u6574\u4e2a\u5e8f\u5217\u7684\u6700\u540e\u4e09\u4e2a\u5b57\u7b26\n                    # 3. \u5982\u679c\u662f (A, B, C, B) \u5e8f\u5217\uff0c\u90a3\u4e48\u5f53\u524d\u7684(B, C, B) \u4e0d\u662f\u6574\u4e2a\u5e8f\u5217\u7684\u6700\u540e\u4e09\u4e2a\u5b57\u7b26\uff0c\u90a3\u4e48\u4e0d\u80fd\u662f(A, B, C, B, C) \u8fd9\u79cd\u60c5\u5f62\n                    if old_word[i + 2] != first or i &gt;= len(old_word) - 3 or old_word[i + 3] != second:\n                        # \u83b7\u53d6\u4e0b\u4e00\u4e2abi-gram\uff0c\u5047\u8bbe\u5f53\u524d\u7684\u5e8f\u5217\u662f ('A', 'B', 'C', 'D')\uff0c\n                        # \u7531\u4e8e\u5408\u5e76\u4e86 ('B', 'C')\uff0c\u90a3\u4e48\u4e0b\u4e00\u4e2abi-gram\u662f ('C', 'D')\uff0c\u8be5\u53e5\u5b50\u4e0a\u5f53\u524d\u4f4d\u7f6e\u4e00\u5b9a\u4e0d\u4f1a\u518d\u51fa\u73b0('C', 'D')\u4e86\n                        # \u8fd9\u662f\u56e0\u4e3a\u5f53\u524d\u7684('C') \u88ab('B', 'C') \u5408\u5e76\u4e86\uff0c\u5e94\u8be5\u51fa\u73b0\u7684\u662f('A', 'BC') \u4e0e ('BC', 'D')\n                        nex = old_word[i + 1:i + 3] # \u53d6\u51fa ('C', 'D')\n                        stats[nex] -= freq          # \u79fb\u9664\u5f53\u524d\u53e5\u5b50\u4e2d\u8be5\u4f4d\u7f6e\u8d21\u732e\u7684 ('C', 'D') \u7684\u9891\u7387\n                        indices[nex][j] -= 1\n                i += 2  # \u8df3\u8fc7 ('B', 'C')\n            else:\n                # \u53ef\u80fd\u51fa\u73b0 ('B', 'B', 'C')  \u8fd9\u79cd\u60c5\u51b5\uff0c\u627e\u5230\u7b2c\u4e00\u4e2a ('B') \u4e4b\u540e\u5e76\u4e0d\u6ee1\u8db3\u6761\u4ef6\uff0c\u8df3\u8fc7\uff0c\u7ee7\u7eed\u627e\u4e0b\u4e00\u4e2a ('B')\n                # \u76f4\u5230\u627e\u5230 ('B', 'C') \u6ee1\u8db3\u6761\u4ef6\uff0c\u8fdb\u5165\u5230\u4e0a\u9762\u7684 if \u5757\u4e2d\n                i += 1\n\n        i = 0\n        while True:\n            try:\n                # find new pair\n                # \u5728\u65b0\u7684 word \u4e2d\u627e\u7b2c\u4e00\u4e2a new_pair \u51fa\u73b0\u7684\u4f4d\u7f6e\n                i = word.index(new_pair, i)\n            except ValueError:\n                break\n            # assuming a symbol sequence \"A BC D\", if \"B C\" is merged, increase the frequency of \"A BC\"\n            if i:   # \u65b0\u7684\u7b26\u53f7\u4e0d\u662f\u5728\u53e5\u9996\n                prev = word[i - 1:i + 1]    # \u53d6\u51fa ('A', 'BC')\n                stats[prev] += freq         # \u7edf\u8ba1\u4fe1\u606f\u4e2d\u589e\u52a0\u5f53\u524d word \u4e2d ('A', 'BC') \u7684\u9891\u7387\n                indices[prev][j] += 1       # \u7d22\u5f15\u4e2d\u589e\u52a0\u5f53\u524d word \u4e2d ('A', 'BC') \u7684\u7d22\u5f15\n\n            # assuming a symbol sequence \"A BC B\", if \"B C\" is merged, increase the frequency of \"BC B\"\n            # however, if the sequence is A BC BC, skip this step because the count of \"BC BC\" will be incremented by the previous code block\n            # \u5982\u679c\u5408\u5e76\u4e86 ('B', 'C')\uff0c\u90a3\u4e48\u5f53\u524d\u4f4d\u7f6e\u7684\u4e0b\u4e00\u4e2a\u5b57\u7b26\u662f 'D'\uff0c\u90a3\u4e48 ('BC', 'D') \u5e94\u8be5\u88ab\u589e\u52a0\u5230\u8bcd\u5178\u4e2d\n            # \u5982\u679c\u5f53\u524d\u4f4d\u7f6e\u7684\u4e0b\u4e00\u4e2a\u5b57\u7b26\u662f 'BC'\uff0c\u90a3\u4e48 ('BC', 'BC') \u4e0d\u5904\u7406\n            # \u8fd9\u662f\u56e0\u4e3a\u5728\u627e\u4e0b\u4e00\u4e2a ('BC')\u7684\u65f6\u5019\uff0c\u4f1a\u901a\u8fc7\u7edf\u8ba1 ('BC', 'BC') \u4f5c\u4e3a prev \u6dfb\u52a0\u5230\u7edf\u8ba1\u4fe1\u606f\u4e2d\uff0c\n            # \u5982\u679c\u901a\u8fc7 nex \u6dfb\u52a0\uff0c\u90a3\u4e48\u4e0b\u9762\u901a\u8fc7 prev \u4f1a\u91cd\u590d\u8ba1\u7b97\n            if i &lt; len(word) - 1 and word[i + 1] != new_pair:   \n                nex = word[i:i + 2]     # \u53d6\u51fa ('BC', 'D')\n                stats[nex] += freq      # \u7edf\u8ba1\u4fe1\u606f\u4e2d\u589e\u52a0\u5f53\u524d word \u4e2d ('BC', 'D') \u7684\u9891\u7387\n                indices[nex][j] += 1    # \u7d22\u5f15\u4e2d\u589e\u52a0\u5f53\u524d word \u4e2d ('BC', 'D') \u7684\u7d22\u5f15\n            i += 1\n</code></pre>"},{"location":"tokenizer/bpe/#_4","title":"\u7b2c\u4e03\u6b65\uff1a\u526a\u679d","text":"<p>\u5728\u8bcd\u5178\u4e2d\u53bb\u6389\u4e0d\u7b26\u5408\u8981\u6c42\u7684\u8bcd\uff0c\u6bd4\u5982\u9891\u7387\u8fc7\u4f4e\u7684\u8bcd\uff0c\u5b9e\u73b0\u7684\u4ee3\u7801\u5982\u4e0b\uff1a \u526a\u679d<pre><code>def prune_stats(stats, big_stats, threshold):\n    \"\"\"\n    \u6839\u636e\u9608\u503c\u4fee\u526a\u7edf\u8ba1\u5b57\u5178\uff0c\u4ee5\u63d0\u9ad8max()\u64cd\u4f5c\u7684\u6548\u7387\u3002\n    \u4e3a\u4e86\u4f18\u5316max()\u7684\u6548\u7387\uff0c\u4fee\u526a\u7edf\u8ba1\u5b57\u5178\n\n    \u7b26\u53f7\u5bf9\u7684\u9891\u7387\u6c38\u8fdc\u4e0d\u4f1a\u589e\u52a0\uff0c\u56e0\u6b64\u4fee\u526a\u901a\u5e38\u662f\u5b89\u5168\u7684\n    \uff08\u76f4\u5230\u6211\u4eec\u53d1\u73b0\u6700\u9891\u7e41\u7684\u7b26\u53f7\u5bf9\u6bd4\u4e4b\u524d\u4fee\u526a\u8fc7\u7684\u7b26\u53f7\u5bf9\u7684\u9891\u7387\u8fd8\u8981\u4f4e\uff09\n    big_stats\u4fdd\u7559\u4e86\u5b8c\u6574\u7684\u7edf\u8ba1\u4fe1\u606f\uff0c\u4ee5\u4fbf\u5728\u6211\u4eec\u9700\u8981\u8bbf\u95ee\u88ab\u4fee\u526a\u7684\u9879\u65f6\u4f7f\u7528\n\n    Args:\n        stats (dict): \u7b26\u53f7\u5bf9\u7edf\u8ba1\u5b57\u5178\u3002\n        big_stats (dict): \u5b8c\u6574\u7684\u7b26\u53f7\u5bf9\u7edf\u8ba1\u5b57\u5178\uff0c\u7528\u4e8e\u8bbf\u95ee\u5df2\u4fee\u526a\u7684\u9879\u3002\n        threshold (int): \u4fee\u526a\u9608\u503c\uff0c\u5c0f\u4e8e\u8be5\u503c\u7684\u7b26\u53f7\u5bf9\u5c06\u88ab\u4fee\u526a\u3002\n\n    Returns:\n        None\n\n    \u6ce8\u610f\uff1a\n        \u7b26\u53f7\u5bf9\u7684\u9891\u7387\u6c38\u8fdc\u4e0d\u4f1a\u589e\u52a0\uff0c\u56e0\u6b64\u4fee\u526a\u901a\u5e38\u662f\u5b89\u5168\u7684\uff08\u76f4\u5230\u6700\u9891\u7e41\u7684\u7b26\u53f7\u5bf9\u7684\u9891\u7387\u4f4e\u4e8e\u4e4b\u524d\u4fee\u526a\u7684\u7b26\u53f7\u5bf9\u7684\u9891\u7387\uff09\u3002\n        big_stats\u4fdd\u5b58\u5b8c\u6574\u7684\u7edf\u8ba1\u4fe1\u606f\uff0c\u4ee5\u4fbf\u5728\u9700\u8981\u65f6\u8bbf\u95ee\u5df2\u4fee\u526a\u7684\u9879\u3002\n    \"\"\"\n    for item, freq in list(stats.items()):\n        # \u5220\u9664\u9891\u7387\u5c0f\u4e8e\u9608\u503c\u7684\u9879\n        if freq &lt; threshold:\n            del stats[item]\n            if freq &lt; 0:\n                big_stats[item] += freq\n            else:\n                big_stats[item] = freq\n</code></pre></p>"},{"location":"tokenizer/bpe/#_5","title":"\u63a8\u7406","text":""},{"location":"tokenizer/introduction/","title":"\u4ecb\u7ecd","text":""},{"location":"tokenizer/introduction/#1-tokenizer","title":"1. \u4ec0\u4e48\u662ftokenizer","text":"<p>\u5bf9\u6587\u672c\u8fdb\u884c\u5206\u8bcd\u5c31\u662f\u5c06\u4e00\u6bb5\u6587\u672c\u5206\u5272\u6210\u5f88\u591a\u5355\u8bcd\u6216\u8005\u5b50\u5355\u8bcd\uff0c\u8fd9\u4e9b\u5355\u8bcd\u6216\u8005\u5b50\u5355\u8bcd\u7136\u540e\u4f1a\u901a\u8fc7\u4e00\u4e2a\u67e5\u8be2\u8868\u683c\u88ab\u8f6c\u6362\u5230 <code>id</code>\u3002\u5c06\u5355\u8bcd\u6216\u8005\u5b50\u5355\u8bcd\u8f6c\u6362\u5230id\u662f\u5f88\u76f4\u622a\u4e86\u5f53\u7684\uff0c\u4e5f\u5c31\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u6620\u5c04\u3002\u6240\u4ee5\u8fd9\u4e48\u6765\u770b\uff0c\u6211\u4eec\u4e3b\u8981\u5173\u6ce8\u5c06\u4e00\u6bb5\u6587\u672c\u5206\u5272\u6210\u5f88\u591a\u5355\u8bcd\u6216\u8005\u5f88\u591a\u5b50\u5355\u8bcd\uff08\u50cf\uff1a\u5bf9\u4e00\u6bb5\u6587\u672c\u8fdb\u884c\u5206\u8bcd\uff09\u3002\u66f4\u52a0\u51c6\u786e\u7684\u6765\u8bf4\uff0c\u6211\u4eec\u5c06\u5173\u6ce8\u5728\ud83e\udd17 Transformers\u5185\u7528\u5230\u7684\u4e09\u79cd\u4e3b\u8981\u7c7b\u578b\u7684\u5206\u8bcd\u5668\uff1a<code>Byte-Pair Encoding (BPE)</code>, <code>WordPiece</code>, \u548c <code>SentencePiece</code>\uff0c\u5e76\u4e14\u7ed9\u51fa\u4e86\u793a\u4f8b\uff0c\u54ea\u4e2a\u6a21\u578b\u7528\u5230\u4e86\u54ea\u79cd\u7c7b\u578b\u7684\u5206\u8bcd\u5668\u3002</p> <p>\u6ce8\u610f\u5230\u5728\u6bcf\u4e2a\u6a21\u578b\u7684\u4e3b\u9875\uff0c\u4f60\u53ef\u4ee5\u67e5\u770b\u6587\u6863\u4e0a\u76f8\u5173\u7684\u5206\u8bcd\u5668\uff0c\u5c31\u53ef\u4ee5\u77e5\u9053\u9884\u8bad\u7ec3\u6a21\u578b\u4f7f\u7528\u4e86\u54ea\u79cd\u7c7b\u578b\u7684\u5206\u8bcd\u5668\u3002 \u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5982\u679c\u6211\u4eec\u67e5\u770b <code>BertTokenizer</code>\uff0c\u6211\u4eec\u5c31\u80fd\u770b\u5230\u6a21\u578b\u4f7f\u7528\u4e86 <code>WordPiece</code>\u3002</p> <p>\u5c06\u4e00\u6bb5\u6587\u672c\u5206\u8bcd\u5230\u5c0f\u5757\u662f\u4e00\u4e2a\u6bd4\u5b83\u770b\u8d77\u6765\u66f4\u52a0\u56f0\u96be\u7684\u4efb\u52a1\uff0c\u5e76\u4e14\u6709\u5f88\u591a\u65b9\u5f0f\u6765\u5b9e\u73b0\u5206\u8bcd\u3002 \u4e3e\u4e2a\u4f8b\u5b50\uff0c\u8ba9\u6211\u4eec\u770b\u770b\u8fd9\u4e2a\u53e5\u5b50 <code>\"Don't you love \ud83e\udd17 Transformers? We sure do.\"</code>\uff0c\u5bf9\u8fd9\u6bb5\u6587\u672c\u5206\u8bcd\u7684\u4e00\u4e2a\u7b80\u5355\u65b9\u5f0f\uff0c\u5c31\u662f\u4f7f\u7528\u7a7a\u683c\u6765\u5206\u8bcd\uff0c\u5f97\u5230\u7684\u7ed3\u679c\u662f\uff1a</p> Bash<pre><code>[\"Don\", \"'\", \"t\", \"you\", \"love\", \"\ud83e\udd17\", \"Transformers\", \"?\", \"We\", \"sure\", \"do\", \".\"]\n</code></pre> <p>\u5206\u8bcd\u7684\u7ed3\u679c\u66f4\u597d\u4e86\uff0c\u7136\u800c\uff0c\u8fd9\u4e48\u505a\u4e5f\u662f\u4e0d\u597d\u7684\uff0c\u5206\u8bcd\u600e\u4e48\u5904\u7406\u5355\u8bcd <code>\"Don't\"</code>\u3002<code>\"Don't\"</code>\u7684\u542b\u4e49\u662f<code>\"do not\"</code>\uff0c\u6240\u4ee5\u8fd9\u4e48\u5206\u8bcd <code>[\"Do\", \"n't\"]</code> \u4f1a\u66f4\u597d\u3002\u73b0\u5728\u5f00\u59cb\u4e8b\u60c5\u5c31\u5f00\u59cb\u53d8\u5f97\u590d\u6742\u8d77\u6765\u4e86\uff0c\u90e8\u5206\u7684\u539f\u56e0\u662f\u6bcf\u4e2a\u6a21\u578b\u90fd\u6709\u5b83\u81ea\u5df1\u7684\u5206\u8bcd\u7c7b\u578b\u3002\u4f9d\u8d56\u4e8e\u6211\u4eec\u5e94\u7528\u5728\u6587\u672c\u5206\u8bcd\u4e0a\u7684\u89c4\u5219\uff0c\u76f8\u540c\u7684\u6587\u672c\u4f1a\u4ea7\u751f\u4e0d\u540c\u7684\u5206\u8bcd\u8f93\u51fa\u3002\u7528\u5728\u8bad\u7ec3\u6570\u636e\u4e0a\u7684\u5206\u8bcd\u89c4\u5219\uff0c\u88ab\u7528\u6765\u5bf9\u8f93\u5165\u505a\u5206\u8bcd\u64cd\u4f5c\uff0c\u4e00\u4e2a\u9884\u8bad\u7ec3\u6a21\u578b\u624d\u4f1a\u6b63\u786e\u7684\u6267\u884c\u3002</p> <p><code>spaCy</code> \u548c <code>Moses</code> \u662f\u4e24\u4e2a\u53d7\u6b22\u8fce\u7684\u57fa\u4e8e\u89c4\u5219\u7684\u5206\u8bcd\u5668\u3002\u5c06\u8fd9\u4e24\u4e2a\u5206\u8bcd\u5668\u5e94\u7528\u5728\u793a\u4f8b\u6587\u672c\u4e0a\uff0c<code>spaCy</code> \u548c <code>Moses</code> \u4f1a\u8f93\u51fa\u7c7b\u4f3c\u4e0b\u9762\u7684\u7ed3\u679c\uff1a</p> Bash<pre><code>[\"Do\", \"n't\", \"you\", \"love\", \"\ud83e\udd17\", \"Transformers\", \"?\", \"We\", \"sure\", \"do\", \".\"]\n</code></pre> <p>\u53ef\u89c1\u4e0a\u9762\u7684\u5206\u8bcd\u4f7f\u7528\u5230\u4e86\u7a7a\u683c\u548c\u6807\u70b9\u7b26\u53f7\u7684\u5206\u8bcd\u65b9\u5f0f\uff0c\u4ee5\u53ca\u57fa\u4e8e\u89c4\u5219\u7684\u5206\u8bcd\u65b9\u5f0f\u3002\u7a7a\u683c\u548c\u6807\u70b9\u7b26\u53f7\u5206\u8bcd\u4ee5\u53ca\u57fa\u4e8e\u89c4\u5219\u7684\u5206\u8bcd\u90fd\u662f\u5355\u8bcd\u5206\u8bcd\u7684\u4f8b\u5b50\u3002 \u4e0d\u90a3\u4e48\u4e25\u683c\u7684\u6765\u8bf4\uff0c\u5355\u8bcd\u5206\u8bcd\u7684\u5b9a\u4e49\u5c31\u662f\u5c06\u53e5\u5b50\u5206\u5272\u5230\u5f88\u591a\u5355\u8bcd\u3002\u7136\u800c\u5c06\u6587\u672c\u5206\u5272\u5230\u66f4\u5c0f\u7684\u5757\u662f\u7b26\u5408\u76f4\u89c9\u7684\uff0c\u5f53\u5904\u7406\u5927\u578b\u6587\u672c\u8bed\u6599\u5e93\u65f6\uff0c\u4e0a\u9762\u7684\u5206\u8bcd\u65b9\u6cd5\u4f1a\u5bfc\u81f4\u5f88\u591a\u95ee\u9898\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u7a7a\u683c\u548c\u6807\u70b9\u7b26\u53f7\u5206\u8bcd\u901a\u5e38\u4f1a\u4ea7\u751f\u4e00\u4e2a\u975e\u5e38\u5927\u7684\u8bcd\u5178\uff08\u4f7f\u7528\u5230\u7684\u6240\u6709\u4e0d\u91cd\u590d\u7684\u5355\u8bcd\u548ctokens\u7684\u96c6\u5408\uff09\u3002 \u50cf\uff1a<code>Transformer XL</code> \u4f7f\u7528\u7a7a\u683c\u548c\u6807\u70b9\u7b26\u53f7\u5206\u8bcd\uff0c\u7ed3\u679c\u4f1a\u4ea7\u751f\u4e00\u4e2a\u5927\u5c0f\u662f267,735\u7684\u8bcd\u5178\uff01</p> <p>\u8fd9\u4e48\u5927\u7684\u4e00\u4e2a\u8bcd\u5178\u5bb9\u91cf\uff0c\u8feb\u4f7f\u6a21\u578b\u6709\u7740\u4e00\u4e2a\u5de8\u5927\u7684embedding\u77e9\u9635\uff0c\u4ee5\u53ca\u5de8\u5927\u7684\u8f93\u5165\u548c\u8f93\u51fa\u5c42\uff0c\u8fd9\u4f1a\u589e\u52a0\u5185\u5b58\u4f7f\u7528\u91cf\uff0c\u4e5f\u4f1a\u63d0\u9ad8\u65f6\u95f4\u590d\u6742\u5ea6\u3002\u901a\u5e38\u60c5\u51b5\u4e0b\uff0ctransformers\u6a21\u578b\u51e0\u4e4e\u6ca1\u6709\u8bcd\u5178\u5bb9\u91cf\u5927\u4e8e <code>50,000</code> \u7684\uff0c\u7279\u522b\u662f\u53ea\u5728\u4e00\u79cd\u8bed\u8a00\u4e0a\u9884\u8bad\u7ec3\u7684\u6a21\u578b\u3002</p> <p>\u6240\u4ee5\u5982\u679c\u7b80\u5355\u7684\u7a7a\u683c\u548c\u6807\u70b9\u7b26\u53f7\u5206\u8bcd\u8ba9\u4eba\u4e0d\u6ee1\u610f\uff0c\u4e3a\u4ec0\u4e48\u4e0d\u7b80\u5355\u7684\u5bf9\u5b57\u7b26\u5206\u8bcd\uff1f</p> <p>\u5c3d\u7ba1\u5b57\u7b26\u5206\u8bcd\u662f\u975e\u5e38\u7b80\u5355\u7684\uff0c\u5e76\u4e14\u80fd\u6781\u5927\u7684\u51cf\u5c11\u5185\u5b58\u4f7f\u7528\uff0c\u964d\u4f4e\u65f6\u95f4\u590d\u6742\u5ea6\uff0c\u4f46\u662f\u8fd9\u6837\u505a\u4f1a\u8ba9\u6a21\u578b\u5f88\u96be\u5b66\u5230\u6709\u610f\u4e49\u7684\u8f93\u5165\u8868\u8fbe\u3002\u50cf\uff1a \u6bd4\u8d77\u5b66\u5230\u5355\u8bcd <code>\"today\"</code> \u7684\u4e00\u4e2a\u6709\u610f\u4e49\u7684\u4e0a\u4e0b\u6587\u72ec\u7acb\u7684\u8868\u8fbe\uff0c\u5b66\u5230\u5b57\u6bcd <code>\"t\"</code> \u7684\u4e00\u4e2a\u6709\u610f\u4e49\u7684\u4e0a\u4e0b\u6587\u72ec\u7acb\u7684\u8868\u8fbe\u662f\u76f8\u5f53\u56f0\u96be\u7684\u3002\u56e0\u6b64\uff0c \u5b57\u7b26\u5206\u8bcd\u7ecf\u5e38\u4f1a\u4f34\u968f\u7740\u6027\u80fd\u7684\u4e0b\u964d\u3002\u6240\u4ee5\u4e3a\u4e86\u83b7\u5f97\u6700\u597d\u7684\u7ed3\u679c\uff0ctransformers\u6a21\u578b\u5728\u5355\u8bcd\u7ea7\u522b\u5206\u8bcd\u548c\u5b57\u7b26\u7ea7\u522b\u5206\u8bcd\u4e4b\u95f4\u4f7f\u7528\u4e86\u4e00\u4e2a\u6298\u4e2d\u7684\u65b9\u6848\u88ab\u79f0\u4f5c \u5b50\u8bcd\u5206\u8bcd \u3002</p>"},{"location":"tokenizer/introduction/#2","title":"2. \u4ec0\u4e48\u662f\u5b50\u8bcd\u5206\u8bcd","text":"<p>\u5b50\u8bcd\u5206\u8bcd\u7b97\u6cd5\u4f9d\u8d56\u8fd9\u6837\u7684\u539f\u5219\uff1a\u9891\u7e41\u4f7f\u7528\u7684\u5355\u8bcd\u4e0d\u5e94\u8be5\u88ab\u5206\u5272\u6210\u66f4\u5c0f\u7684\u5b50\u8bcd\uff0c\u4f46\u662f\u5f88\u5c11\u4f7f\u7528\u7684\u5355\u8bcd\u5e94\u8be5\u88ab\u5206\u89e3\u5230\u6709\u610f\u4e49\u7684\u5b50\u8bcd\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff1a <code>\"annoyingly\"</code> \u80fd\u88ab\u770b\u4f5c\u4e00\u4e2a\u5f88\u5c11\u4f7f\u7528\u7684\u5355\u8bcd\uff0c\u80fd\u88ab\u5206\u89e3\u6210 <code>\"annoying\"</code> \u548c <code>\"ly\"</code>\u3002<code>\"annoying\"</code> \u548c <code>\"ly\"</code> \u4f5c\u4e3a\u72ec\u7acb\u5730\u5b50\u8bcd\uff0c\u51fa\u73b0\u7684\u6b21\u6570\u90fd\u5f88\u9891\u7e41\u3002\u4e0e\u6b64\u540c\u65f6\u5355\u8bcd <code>\"annoyingly\"</code> \u7684\u542b\u4e49\u53ef\u4ee5\u901a\u8fc7\u7ec4\u5408 <code>\"annoying\"</code> \u548c <code>\"ly\"</code> \u7684\u542b\u4e49\u6765\u83b7\u5f97\u3002\u5728\u7c98\u5408\u548c\u80f6\u6c34\u8bed\u79cd\u4e0a\uff0c \u50cf\u571f\u8033\u5176\u8bed\uff0c\u8fd9\u4e48\u505a\u662f\u76f8\u5f53\u6709\u7528\u7684\uff0c\u5728\u8fd9\u6837\u7684\u8bed\u8a00\u91cc\uff0c\u901a\u8fc7\u7ebf\u6027\u7ec4\u5408\u5b50\u8bcd\uff0c\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u4f60\u80fd\u5f62\u6210\u4efb\u610f\u957f\u7684\u590d\u6742\u7684\u5355\u8bcd\u3002</p> <p>\u5b50\u8bcd\u5206\u8bcd\u5141\u8bb8\u6a21\u578b\u6709\u4e00\u4e2a\u5408\u7406\u7684\u8bcd\u5178\u5927\u5c0f\uff0c\u800c\u4e14\u80fd\u5b66\u5230\u6709\u610f\u4e49\u7684\u4e0a\u4e0b\u6587\u72ec\u7acb\u5730\u8868\u8fbe\u3002\u9664\u6b64\u4ee5\u5916\uff0c\u5b50\u8bcd\u5206\u8bcd\u53ef\u4ee5\u8ba9\u6a21\u578b\u5904\u7406\u4ee5\u524d\u4ece\u6765\u6ca1\u89c1\u8fc7\u7684\u5355\u8bcd\uff0c \u65b9\u5f0f\u662f\u901a\u8fc7\u5206\u89e3\u8fd9\u4e9b\u5355\u8bcd\u5230\u5df2\u77e5\u7684\u5b50\u8bcd\uff0c\u4e3e\u4e2a\u4f8b\u5b50\uff1a<code>BertTokenizer</code> \u5bf9\u53e5\u5b50 <code>\"I have a new GPU!\"</code> \u5206\u8bcd\u7684\u7ed3\u679c\u5982\u4e0b\uff1a</p> <p>Python<pre><code>from transformers import BertTokenizer\n\ntokenizer = BertTokenizer.from_pretrained(\"google-bert/bert-base-uncased\")\ntokenizer.tokenize(\"I have a new GPU!\")\n</code></pre> Bash<pre><code>[\"i\", \"have\", \"a\", \"new\", \"gp\", \"##u\", \"!\"]\n</code></pre> \u56e0\u4e3a\u6211\u4eec\u6b63\u5728\u8003\u8651\u4e0d\u533a\u5206\u5927\u5c0f\u5199\u7684\u6a21\u578b\uff0c\u53e5\u5b50\u9996\u5148\u88ab\u8f6c\u6362\u6210\u5c0f\u5199\u5b57\u6bcd\u5f62\u5f0f\u3002\u6211\u4eec\u53ef\u4ee5\u89c1\u5230\u5355\u8bcd <code>[\"i\", \"have\", \"a\", \"new\"]</code> \u5728\u5206\u8bcd\u5668\u7684\u8bcd\u5178\u5185\uff0c\u4f46\u662f\u8fd9\u4e2a\u5355\u8bcd <code>\"gpu\"</code> \u4e0d\u5728\u8bcd\u5178\u5185\u3002\u6240\u4ee5\uff0c\u5206\u8bcd\u5668\u5c06 <code>\"gpu\"</code> \u5206\u5272\u6210\u5df2\u77e5\u7684\u5b50\u8bcd <code>[\"gp\" and \"##u\"]</code> \u3002<code>\"##\"</code> \u610f\u5473\u7740\u5269\u4e0b\u7684 token\u5e94\u8be5\u9644\u7740\u5728\u524d\u9762\u90a3\u4e2atoken\u7684\u540e\u9762\uff0c\u4e0d\u5e26\u7a7a\u683c\u7684\u9644\u7740\uff08\u5206\u8bcd\u7684\u89e3\u7801\u6216\u8005\u53cd\u5411\uff09\u3002</p> <p>\u53e6\u5916\u4e00\u4e2a\u4f8b\u5b50\uff0c<code>XLNetTokenizer</code> \u5bf9\u524d\u9762\u7684\u6587\u672c\u4f8b\u5b50\u5206\u8bcd\u7ed3\u679c\u5982\u4e0b\uff1a</p> Python<pre><code>from transformers import XLNetTokenizer\n\ntokenizer = XLNetTokenizer.from_pretrained(\"xlnet/xlnet-base-cased\")\ntokenizer.tokenize(\"Don't you love \ud83e\udd17 Transformers? We sure do.\")\n</code></pre> Bash<pre><code>[\"\u2581Don\", \"'\", \"t\", \"\u2581you\", \"\u2581love\", \"\u2581\", \"\ud83e\udd17\", \"\u2581\", \"Transform\", \"ers\", \"?\", \"\u2581We\", \"\u2581sure\", \"\u2581do\", \".\"]\n</code></pre> <p>\u5f53\u6211\u4eec\u67e5\u770b <code>SentencePiece</code> \u65f6\u4f1a\u56de\u8fc7\u5934\u6765\u89e3\u91ca\u8fd9\u4e9b <code>\"\u2581\"</code> \u7b26\u53f7\u7684\u542b\u4e49\u3002\u6b63\u5982\u4f60\u80fd\u89c1\u5230\u7684\uff0c\u5f88\u5c11\u4f7f\u7528\u7684\u5355\u8bcd <code>\"Transformers\"</code> \u80fd\u88ab\u5206\u5272\u5230\u66f4\u52a0\u9891\u7e41\u4f7f\u7528\u7684\u5b50\u8bcd <code>\"Transform\"</code> \u548c <code>\"ers\"</code> \u3002</p> <p>\u73b0\u5728\u8ba9\u6211\u4eec\u6765\u770b\u770b\u4e0d\u540c\u7684\u5b50\u8bcd\u5206\u5272\u7b97\u6cd5\u662f\u600e\u4e48\u5de5\u4f5c\u7684\uff0c\u6ce8\u610f\u5230\u6240\u6709\u7684\u8fd9\u4e9b\u5206\u8bcd\u7b97\u6cd5\u4f9d\u8d56\u4e8e\u67d0\u4e9b\u8bad\u7ec3\u7684\u65b9\u5f0f\uff0c\u8fd9\u4e9b\u8bad\u7ec3\u901a\u5e38\u5728\u8bed\u6599\u5e93\u4e0a\u5b8c\u6210\uff0c \u76f8\u5e94\u7684\u6a21\u578b\u4e5f\u662f\u5728\u8fd9\u4e2a\u8bed\u6599\u5e93\u4e0a\u8bad\u7ec3\u7684\u3002</p>"},{"location":"tokenizer/introduction/#3-bpe","title":"3. BPE\u7b97\u6cd5","text":"<p>Byte-Pair Encoding (BPE)\u6765\u81ea\u4e8e <code>Neural Machine Translation of Rare Words with Subword Units (Sennrich et al., 2015)</code>\u3002BPE\u4f9d\u8d56\u4e8e\u4e00\u4e2a\u9884\u5206\u8bcd\u5668\uff0c\u8fd9\u4e2a\u9884\u5206\u8bcd\u5668\u4f1a\u5c06\u8bad\u7ec3\u6570\u636e\u5206\u5272\u6210\u5355\u8bcd\u3002\u9884\u5206\u8bcd\u53ef\u4ee5\u662f\u7b80\u5355\u7684\u7a7a\u683c\u5206\u8bcd\uff0c\u50cf\uff1a<code>GPT-2</code>\uff0c<code>RoBERTa</code>\u3002\u66f4\u52a0\u5148\u8fdb\u7684\u9884\u5206\u8bcd\u65b9\u5f0f\u5305\u62ec\u4e86\u57fa\u4e8e\u89c4\u5219\u7684\u5206\u8bcd\uff0c\u50cf\uff1a <code>XLM</code>\uff0c<code>FlauBERT</code>\u3002<code>FlauBERT</code> \u5728\u5927\u591a\u6570\u8bed\u8a00\u4f7f\u7528\u4e86 <code>Moses</code>\uff0c\u6216\u8005 <code>GPT</code>\u3002<code>GPT</code> \u4f7f\u7528\u4e86 <code>Spacy</code> \u548c <code>ftfy</code>\uff0c\u7edf\u8ba1\u4e86\u8bad\u7ec3\u8bed\u6599\u5e93\u4e2d\u6bcf\u4e2a\u5355\u8bcd\u7684\u9891\u6b21\u3002</p> <p>\u5728\u9884\u5206\u8bcd\u4ee5\u540e\uff0c\u751f\u6210\u4e86\u5355\u8bcd\u7684\u96c6\u5408\uff0c\u4e5f\u786e\u5b9a\u4e86\u8bad\u7ec3\u6570\u636e\u4e2d\u6bcf\u4e2a\u5355\u8bcd\u51fa\u73b0\u7684\u9891\u6b21\u3002\u4e0b\u4e00\u6b65\uff0cBPE\u4ea7\u751f\u4e86\u4e00\u4e2a\u57fa\u7840\u8bcd\u5178\uff0c\u5305\u542b\u4e86\u96c6\u5408\u4e2d\u6240\u6709\u7684\u7b26\u53f7\uff0c BPE\u5b66\u4e60\u878d\u5408\u7684\u89c4\u5219-\u7ec4\u5408\u57fa\u7840\u8bcd\u5178\u4e2d\u7684\u4e24\u4e2a\u7b26\u53f7\u6765\u5f62\u6210\u4e00\u4e2a\u65b0\u7684\u7b26\u53f7\u3002BPE\u4f1a\u4e00\u76f4\u5b66\u4e60\u76f4\u5230\u8bcd\u5178\u7684\u5927\u5c0f\u6ee1\u8db3\u4e86\u671f\u671b\u7684\u8bcd\u5178\u5927\u5c0f\u7684\u8981\u6c42\u3002\u6ce8\u610f\u5230 \u671f\u671b\u7684\u8bcd\u5178\u5927\u5c0f\u662f\u4e00\u4e2a\u8d85\u53c2\u6570\uff0c\u5728\u8bad\u7ec3\u8fd9\u4e2a\u5206\u8bcd\u5668\u4ee5\u524d\u5c31\u9700\u8981\u4eba\u4e3a\u6307\u5b9a\u3002</p> <p>\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u8ba9\u6211\u4eec\u5047\u8bbe\u5728\u9884\u5206\u8bcd\u4ee5\u540e\uff0c\u4e0b\u9762\u7684\u5355\u8bcd\u96c6\u5408\u4ee5\u53ca\u4ed6\u4eec\u7684\u9891\u6b21\u90fd\u5df2\u7ecf\u786e\u5b9a\u597d\u4e86\uff1a</p> Bash<pre><code>(\"hug\", 10), (\"pug\", 5), (\"pun\", 12), (\"bun\", 4), (\"hugs\", 5)\n</code></pre> <p>\u6240\u4ee5\uff0c\u57fa\u7840\u7684\u8bcd\u5178\u662f <code>[\"b\", \"g\", \"h\", \"n\", \"p\", \"s\", \"u\"]</code>\u3002\u5c06\u6240\u6709\u5355\u8bcd\u5206\u5272\u6210\u57fa\u7840\u8bcd\u5178\u5185\u7684\u7b26\u53f7\uff0c\u5c31\u53ef\u4ee5\u83b7\u5f97: Bash<pre><code>(\"h\" \"u\" \"g\", 10), (\"p\" \"u\" \"g\", 5), (\"p\" \"u\" \"n\", 12), (\"b\" \"u\" \"n\", 4), (\"h\" \"u\" \"g\" \"s\", 5)\n</code></pre></p> <p>BPE\u63a5\u7740\u4f1a\u7edf\u8ba1\u6bcf\u4e2a\u53ef\u80fd\u7684\u7b26\u53f7\u5bf9\u7684\u9891\u6b21\uff0c\u7136\u540e\u6311\u51fa\u51fa\u73b0\u6700\u9891\u7e41\u7684\u7684\u7b26\u53f7\u5bf9\uff0c\u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c<code>\"h\"</code> \u8ddf\u4e86 <code>\"u\"</code> \u51fa\u73b0\u4e86 <code>10 + 5 = 15</code> \u6b21 \uff0810\u6b21\u662f\u51fa\u73b0\u4e8610\u6b21 <code>\"hug\"</code> \uff0c5\u6b21\u662f\u51fa\u73b0\u4e865\u6b21 <code>\"hugs\"</code>\uff09\u3002\u7136\u800c\uff0c\u6700\u9891\u7e41\u7684\u7b26\u53f7\u5bf9\u662f <code>\"u\"</code> \u540e\u9762\u8ddf\u4e86\u4e2a <code>\"g\"</code>\uff0c\u603b\u5171\u51fa\u73b0\u4e86 <code>10 + 5 + 5 = 20</code> \u6b21\u3002\u56e0\u6b64\uff0c\u5206\u8bcd\u5668\u5b66\u5230\u7684\u7b2c\u4e00\u4e2a\u878d\u5408\u89c4\u5219\u662f\u7ec4\u5408\u6240\u6709\u7684 <code>\"u\"</code> \u540e\u9762\u8ddf\u4e86\u4e2a <code>\"g\"</code> \u7b26\u53f7\u3002\u4e0b\u4e00\u6b65\uff0c<code>\"ug\"</code> \u88ab\u52a0\u5165\u5230\u4e86\u8bcd\u5178\u5185\u3002\u5355\u8bcd\u7684\u96c6\u5408\u5c31\u53d8\u6210\u4e86\uff1a</p> <p>Bash<pre><code>(\"h\" \"ug\", 10), (\"p\" \"ug\", 5), (\"p\" \"u\" \"n\", 12), (\"b\" \"u\" \"n\", 4), (\"h\" \"ug\" \"s\", 5)\n</code></pre> \u5047\u8bbe\uff0cthe Byte-Pair Encoding\u5728\u8fd9\u4e2a\u65f6\u5019\u505c\u6b62\u8bad\u7ec3\uff0c\u5b66\u5230\u7684\u878d\u5408\u89c4\u5219\u5e76\u5e94\u7528\u5230\u5176\u4ed6\u65b0\u7684\u5355\u8bcd\u4e0a\uff08\u53ea\u8981\u8fd9\u4e9b\u65b0\u5355\u8bcd\u4e0d\u5305\u62ec\u4e0d\u5728\u57fa\u7840\u8bcd\u5178\u5185\u7684\u7b26\u53f7 \u5c31\u884c\uff09\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5355\u8bcd <code>\"bug\"</code> \u4f1a\u88ab\u5206\u8bcd\u5230 <code>[\"b\", \"ug\"]</code>\uff0c\u4f46\u662f <code>\"mug\"</code> \u4f1a\u88ab\u5206\u8bcd\u5230 <code>[\"&lt;unk&gt;\", \"ug\"]</code>\uff0c\u56e0\u4e3a\u7b26\u53f7 <code>\"m\"</code> \u4e0d\u5728\u57fa\u7840\u8bcd\u5178\u5185\u3002 \u901a\u5e38\u6765\u770b\u7684\u8bdd\uff0c\u5355\u4e2a\u5b57\u6bcd\u50cf <code>\"m\"</code> \u4e0d\u4f1a\u88ab <code>\"&lt;unk&gt;\"</code> \u7b26\u53f7\u66ff\u6362\u6389\uff0c\u56e0\u4e3a\u8bad\u7ec3\u6570\u636e\u901a\u5e38\u5305\u62ec\u4e86\u6bcf\u4e2a\u5b57\u6bcd\uff0c\u6bcf\u4e2a\u5b57\u6bcd\u81f3\u5c11\u51fa\u73b0\u4e86\u4e00\u6b21\uff0c\u4f46\u662f\u5728\u7279\u6b8a\u7684\u7b26\u53f7 \u4e2d\u4e5f\u53ef\u80fd\u53d1\u751f\u50cf <code>emojis</code>\u3002</p> <p>\u5c31\u50cf\u4e4b\u524d\u63d0\u5230\u7684\u90a3\u6837\uff0c\u8bcd\u5178\u7684\u5927\u5c0f\uff0c\u5373\u57fa\u7840\u8bcd\u5178\u7684\u5927\u5c0f + \u878d\u5408\u7684\u6570\u91cf\uff0c\u662f\u4e00\u4e2a\u9700\u8981\u914d\u7f6e\u7684\u8d85\u53c2\u6570\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff1a<code>GPT</code> \u7684\u8bcd\u5178\u5927\u5c0f\u662f <code>40,478</code>\uff0c\u56e0\u4e3aGPT\u6709\u7740 <code>478</code> \u4e2a\u57fa\u7840\u8bcd\u5178\u5185\u7684\u5b57\u7b26\uff0c\u5728 <code>40,000</code> \u6b21\u878d\u5408\u4ee5\u540e\u9009\u62e9\u4e86\u505c\u6b62\u8bad\u7ec3\u3002</p>"},{"location":"tokenizer/introduction/#4-byte-level-bpe","title":"4. Byte-level BPE","text":"<p>\u4e00\u4e2a\u5305\u542b\u4e86\u6240\u6709\u53ef\u80fd\u7684\u57fa\u7840\u5b57\u7b26\u7684\u57fa\u7840\u5b57\u5178\u53ef\u80fd\u4f1a\u975e\u5e38\u5927\uff0c\u5982\u679c\u8003\u8651\u5c06\u6240\u6709\u7684unicode\u5b57\u7b26\u4f5c\u4e3a\u57fa\u7840\u5b57\u7b26\u3002\u4e3a\u4e86\u62e5\u6709\u4e00\u4e2a\u66f4\u597d\u7684\u57fa\u7840\u8bcd\u5178\uff0cGPT-2\u4f7f\u7528\u4e86\u5b57\u8282 \u4f5c\u4e3a\u57fa\u7840\u8bcd\u5178\uff0c\u8fd9\u662f\u4e00\u4e2a\u975e\u5e38\u806a\u660e\u7684\u6280\u5de7\uff0c\u8feb\u4f7f\u57fa\u7840\u8bcd\u5178\u662f256\u5927\u5c0f\uff0c\u800c\u4e14\u786e\u4fdd\u4e86\u6240\u6709\u57fa\u7840\u5b57\u7b26\u5305\u542b\u5728\u8fd9\u4e2a\u8bcd\u5178\u5185\u3002\u4f7f\u7528\u4e86\u5176\u4ed6\u7684\u89c4\u5219\u6765\u5904\u7406\u6807\u70b9\u7b26\u53f7\uff0c\u8fd9\u4e2aGPT2\u7684\u5206\u8bcd\u5668\u80fd\u5bf9\u6bcf\u4e2a\u6587\u672c\u8fdb\u884c\u5206\u8bcd\uff0c\u4e0d\u9700\u8981\u4f7f\u7528\u5230 <code>&lt;unk&gt;</code> \u7b26\u53f7\u3002GPT-2\u6709\u4e00\u4e2a\u5927\u5c0f\u662f50,257 \u7684\u8bcd\u5178\uff0c\u5bf9\u5e94\u5230256\u5b57\u8282\u7684\u57fa\u7840tokens\uff0c\u4e00\u4e2a\u7279\u6b8a\u7684\u6587\u672c\u7ed3\u675ftoken\uff0c\u8fd9\u4e9b\u7b26\u53f7\u7ecf\u8fc7\u4e8650,000\u6b21\u878d\u5408\u5b66\u4e60\u3002</p>"},{"location":"tokenizer/introduction/#5-word-level","title":"5. Word-level","text":"<p>WordPiece\u662f\u5b50\u8bcd\u5206\u8bcd\u7b97\u6cd5\uff0c\u88ab\u7528\u5728BERT\uff0cDistilBERT\uff0c\u548cElectra\u3002 \u8fd9\u4e2a\u7b97\u6cd5\u53d1\u5e03\u5728Japanese and Korean Voice Search (Schuster et al., 2012) \u548cBPE\u975e\u5e38\u76f8\u4f3c\u3002WordPiece\u9996\u5148\u521d\u59cb\u5316\u4e00\u4e2a\u8bcd\u5178\uff0c\u8fd9\u4e2a\u8bcd\u5178\u5305\u542b\u4e86\u51fa\u73b0\u5728\u8bad\u7ec3\u6570\u636e\u4e2d\u7684\u6bcf\u4e2a\u5b57\u7b26\uff0c\u7136\u540e\u9012\u8fdb\u7684\u5b66\u4e60\u4e00\u4e2a\u7ed9\u5b9a\u6570\u91cf\u7684\u878d\u5408\u89c4\u5219\u3002\u548cBPE\u76f8\u6bd4\u8f83\uff0c WordPiece\u4e0d\u4f1a\u9009\u62e9\u51fa\u73b0\u9891\u6b21\u6700\u5927\u7684\u7b26\u53f7\u5bf9\uff0c\u800c\u662f\u9009\u62e9\u4e86\u52a0\u5165\u5230\u5b57\u5178\u4ee5\u540e\u80fd\u6700\u5927\u5316\u8bad\u7ec3\u6570\u636e\u4f3c\u7136\u503c\u7684\u7b26\u53f7\u5bf9\u3002</p> <p>\u6240\u4ee5\u8fd9\u5230\u5e95\u610f\u5473\u7740\u4ec0\u4e48\uff1f\u53c2\u8003\u524d\u9762\u7684\u4f8b\u5b50\uff0c\u6700\u5927\u5316\u8bad\u7ec3\u6570\u636e\u7684\u4f3c\u7136\u503c\uff0c\u7b49\u4ef7\u4e8e\u627e\u5230\u4e00\u4e2a\u7b26\u53f7\u5bf9\uff0c\u5b83\u4eec\u7684\u6982\u7387\u9664\u4ee5\u8fd9\u4e2a\u7b26\u53f7\u5bf9\u4e2d\u7b2c\u4e00\u4e2a\u7b26\u53f7\u7684\u6982\u7387\uff0c\u63a5\u7740\u9664\u4ee5\u7b2c\u4e8c\u4e2a\u7b26\u53f7\u7684\u6982\u7387\uff0c\u5728\u6240\u6709\u7684\u7b26\u53f7\u5bf9\u4e2d\u5546\u6700\u5927\u3002\u50cf\uff1a\u5982\u679c <code>\"ug\"</code> \u7684\u6982\u7387\u9664\u4ee5 <code>\"u\"</code> \u9664\u4ee5 <code>\"g\"</code> \u7684\u6982\u7387\u7684\u5546\uff0c\u6bd4\u5176\u4ed6\u4efb\u4f55\u7b26\u53f7\u5bf9\u66f4\u5927\uff0c \u8fd9\u4e2a\u65f6\u5019\u624d\u80fd\u878d\u5408\"u\"\u548c\"g\"\u3002\u76f4\u89c9\u4e0a\uff0cWordPiece\uff0c\u548cBPE\u6709\u70b9\u70b9\u4e0d\u540c\uff0cWordPiece\u662f\u8bc4\u4f30\u878d\u5408\u4e24\u4e2a\u7b26\u53f7\u4f1a\u5931\u53bb\u7684\u91cf\uff0c\u6765\u786e\u4fdd\u8fd9\u4e48\u505a\u662f\u503c\u5f97\u7684\u3002</p>"},{"location":"tokenizer/introduction/#6-unigram","title":"6. Unigram","text":"<p>Unigram\u662f\u4e00\u4e2a\u5b50\u8bcd\u5206\u8bcd\u5668\u7b97\u6cd5\uff0c\u4ecb\u7ecd\u89c1Subword Regularization: Improving Neural Network Translation Models with Multiple Subword Candidates (Kudo, 2018)\u3002\u548cBPE\u6216\u8005WordPiece\u76f8\u6bd4\u8f83 \uff0cUnigram\u4f7f\u7528\u5927\u91cf\u7684\u7b26\u53f7\u6765\u521d\u59cb\u5316\u5b83\u7684\u57fa\u7840\u5b57\u5178\uff0c\u7136\u540e\u9010\u6e10\u7684\u7cbe\u7b80\u6bcf\u4e2a\u7b26\u53f7\u6765\u83b7\u5f97\u4e00\u4e2a\u66f4\u5c0f\u7684\u8bcd\u5178\u3002\u4e3e\u4f8b\u6765\u770b\u57fa\u7840\u8bcd\u5178\u80fd\u591f\u5bf9\u5e94\u6240\u6709\u7684\u9884\u5206\u8bcd \u7684\u5355\u8bcd\u4ee5\u53ca\u6700\u5e38\u89c1\u7684\u5b50\u5b57\u7b26\u4e32\u3002Unigram\u6ca1\u6709\u76f4\u63a5\u7528\u5728\u4efb\u4f55transformers\u7684\u4efb\u4f55\u6a21\u578b\u4e2d\uff0c\u4f46\u662f\u548cSentencePiece\u4e00\u8d77\u8054\u5408\u4f7f\u7528\u3002</p> <p>\u5728\u6bcf\u4e2a\u8bad\u7ec3\u7684\u6b65\u9aa4\uff0cUnigram\u7b97\u6cd5\u5728\u5f53\u524d\u8bcd\u5178\u7684\u8bad\u7ec3\u6570\u636e\u4e0a\u5b9a\u4e49\u4e86\u4e00\u4e2a\u635f\u5931\u51fd\u6570\uff08\u7ecf\u5e38\u5b9a\u4e49\u4e3alog\u4f3c\u7136\u51fd\u6570\u7684\uff09\uff0c\u8fd8\u5b9a\u4e49\u4e86\u4e00\u4e2aunigram\u8bed\u8a00\u6a21\u578b\u3002 \u7136\u540e\uff0c\u5bf9\u8bcd\u5178\u5185\u7684\u6bcf\u4e2a\u7b26\u53f7\uff0c\u7b97\u6cd5\u4f1a\u8ba1\u7b97\u5982\u679c\u8fd9\u4e2a\u7b26\u53f7\u4ece\u8bcd\u5178\u5185\u79fb\u9664\uff0c\u603b\u7684\u635f\u5931\u4f1a\u5347\u9ad8\u591a\u5c11\u3002Unigram\u7136\u540e\u4f1a\u79fb\u9664\u767e\u5206\u4e4bp\u7684\u7b26\u53f7\uff0c\u8fd9\u4e9b\u7b26\u53f7\u7684loss \u5347\u9ad8\u662f\u6700\u4f4e\u7684\uff08p\u901a\u5e38\u662f10%\u6216\u800520%\uff09\uff0c\u50cf\uff1a\u8fd9\u4e9b\u5728\u8bad\u7ec3\u6570\u636e\u4e0a\u5bf9\u603b\u7684\u635f\u5931\u5f71\u54cd\u6700\u5c0f\u7684\u7b26\u53f7\u3002\u91cd\u590d\u8fd9\u4e2a\u8fc7\u7a0b\uff0c\u76f4\u5230\u8bcd\u5178\u5df2\u7ecf\u8fbe\u5230\u4e86\u671f\u671b\u7684\u5927\u5c0f\u3002 \u4e3a\u4e86\u4efb\u4f55\u5355\u8bcd\u90fd\u80fd\u88ab\u5206\u8bcd\uff0cUnigram\u7b97\u6cd5\u603b\u662f\u4fdd\u7559\u57fa\u7840\u7684\u5b57\u7b26\u3002</p> <p>\u56e0\u4e3aUnigram\u4e0d\u662f\u57fa\u4e8e\u878d\u5408\u89c4\u5219\uff08\u548cBPE\u4ee5\u53caWordPiece\u76f8\u6bd4\u8f83\uff09\uff0c\u5728\u8bad\u7ec3\u4ee5\u540e\u7b97\u6cd5\u6709\u51e0\u79cd\u65b9\u5f0f\u6765\u5206\u8bcd\uff0c\u5982\u679c\u4e00\u4e2a\u8bad\u7ec3\u597d\u7684Unigram\u5206\u8bcd\u5668 \u7684\u8bcd\u5178\u662f\u8fd9\u4e2a\uff1a</p> <p>Bash<pre><code>[\"b\", \"g\", \"h\", \"n\", \"p\", \"s\", \"u\", \"ug\", \"un\", \"hug\"],\n</code></pre> \"hugs\"\u53ef\u4ee5\u88ab\u5206\u8bcd\u6210[\"hug\", \"s\"], [\"h\", \"ug\", \"s\"]\u6216\u8005[\"h\", \"u\", \"g\", \"s\"]\u3002\u6240\u4ee5\u9009\u62e9\u54ea\u4e00\u4e2a\u5462\uff1fUnigram\u5728\u4fdd\u5b58 \u8bcd\u5178\u7684\u65f6\u5019\u8fd8\u4f1a\u4fdd\u5b58\u8bad\u7ec3\u8bed\u6599\u5e93\u5185\u6bcf\u4e2atoken\u7684\u6982\u7387\uff0c\u6240\u4ee5\u5728\u8bad\u7ec3\u4ee5\u540e\u53ef\u4ee5\u8ba1\u7b97\u6bcf\u4e2a\u53ef\u80fd\u7684\u5206\u8bcd\u7ed3\u679c\u7684\u6982\u7387\u3002\u5b9e\u9645\u4e0a\u7b97\u6cd5\u7b80\u5355\u7684\u9009\u62e9\u6982\u7387 \u6700\u5927\u7684\u90a3\u4e2a\u5206\u8bcd\u7ed3\u679c\uff0c\u4f46\u662f\u4e5f\u4f1a\u63d0\u4f9b\u6982\u7387\u6765\u6839\u636e\u5206\u8bcd\u7ed3\u679c\u7684\u6982\u7387\u6765\u91c7\u6837\u4e00\u4e2a\u53ef\u80fd\u7684\u5206\u8bcd\u7ed3\u679c\u3002</p> <p>\u5206\u8bcd\u5668\u5728\u635f\u5931\u51fd\u6570\u4e0a\u8bad\u7ec3\uff0c\u8fd9\u4e9b\u635f\u5931\u51fd\u6570\u5b9a\u4e49\u4e86\u8fd9\u4e9b\u6982\u7387\u3002\u5047\u8bbe\u8bad\u7ec3\u6570\u636e\u5305\u542b\u4e86\u8fd9\u4e9b\u5355\u8bcd \\(x{1}\\), \\(\\dots\\), \\(x{N}\\)\uff0c\u4e00\u4e2a\u5355\u8bcd\\(x{i}\\) \u7684\u6240\u6709\u53ef\u80fd\u7684\u5206\u8bcd\u7ed3\u679c\u7684\u96c6\u5408\u5b9a\u4e49\u4e3a\\(S(x{i})\\)\uff0c\u7136\u540e\u603b\u7684\u635f\u5931\u5c31\u53ef\u4ee5\u5b9a\u4e49\u4e3a\uff1a</p>"},{"location":"tokenizer/introduction/#7-sentencepiece","title":"7. SentencePiece","text":"<p>\u76ee\u524d\u4e3a\u6b62\u63cf\u8ff0\u7684\u6240\u6709\u5206\u8bcd\u7b97\u6cd5\u90fd\u6709\u76f8\u540c\u7684\u95ee\u9898\uff1a\u5b83\u4eec\u90fd\u5047\u8bbe\u8f93\u5165\u7684\u6587\u672c\u4f7f\u7528\u7a7a\u683c\u6765\u5206\u5f00\u5355\u8bcd\u3002\u7136\u800c\uff0c\u4e0d\u662f\u6240\u6709\u7684\u8bed\u8a00\u90fd\u4f7f\u7528\u7a7a\u683c\u6765\u5206\u5f00\u5355\u8bcd\u3002 \u4e00\u4e2a\u53ef\u80fd\u7684\u89e3\u51b3\u65b9\u6848\u662f\u4f7f\u7528\u67d0\u79cd\u8bed\u8a00\u7279\u5b9a\u7684\u9884\u5206\u8bcd\u5668\u3002\u50cf\uff1aXLM\u4f7f\u7528\u4e86\u4e00\u4e2a\u7279\u5b9a\u7684\u4e2d\u6587\u3001\u65e5\u8bed\u548cThai\u7684\u9884\u5206\u8bcd\u5668\u3002 \u4e3a\u4e86\u66f4\u52a0\u5e7f\u6cdb\u7684\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0cSentencePiece: A simple and language independent subword tokenizer and detokenizer for Neural Text Processing (Kudo et al., 2018) \u5c06\u8f93\u5165\u6587\u672c\u770b\u4f5c\u4e00\u4e2a\u539f\u59cb\u7684\u8f93\u5165\u6d41\uff0c\u56e0\u6b64\u4f7f\u7528\u7684\u7b26\u5408\u96c6\u5408\u4e2d\u4e5f\u5305\u62ec\u4e86\u7a7a\u683c\u3002SentencePiece\u7136\u540e\u4f1a\u4f7f\u7528BPE\u6216\u8005unigram\u7b97\u6cd5\u6765\u4ea7\u751f\u5408\u9002\u7684 \u8bcd\u5178\u3002</p> <p>\u4e3e\u4f8b\u6765\u8bf4\uff0cXLNetTokenizer\u4f7f\u7528\u4e86SentencePiece\uff0c\u8fd9\u4e5f\u662f\u4e3a\u4ec0\u4e48\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\"\u2581\"\u7b26\u53f7\u5305\u542b\u5728\u8bcd\u5178\u5185\u3002SentencePiece\u89e3\u7801\u662f\u975e\u5e38\u5bb9\u6613\u7684\uff0c\u56e0\u4e3a\u6240\u6709\u7684tokens\u80fd\u88abconcatenate\u8d77\u6765\uff0c\u7136\u540e\u5c06\"\u2581\"\u66ff\u6362\u6210\u7a7a\u683c\u3002</p> <p>\u5e93\u5185\u6240\u6709\u4f7f\u7528\u4e86SentencePiece\u7684transformers\u6a21\u578b\uff0c\u4f1a\u548cunigram\u7ec4\u5408\u8d77\u6765\u4f7f\u7528\uff0c\u50cf\uff1a\u4f7f\u7528\u4e86SentencePiece\u7684\u6a21\u578b\u662fALBERT, XLNet\uff0cMarian\uff0c\u548cT5\u3002</p>"},{"location":"tokenizer/introduction/#_2","title":"\u53c2\u8003","text":"<ol> <li>https://huggingface.co/docs/transformers/v4.41.1/zh/tokenizer_summary</li> </ol>"},{"location":"tokenizer/tokenizer%E5%85%A5%E9%97%A8/","title":"LLM \u5206\u8bcd\u7b97\u6cd5 (BPE, WordPiece, Unigram)","text":""},{"location":"tokenizer/tokenizer%E5%85%A5%E9%97%A8/#_1","title":"\u4e00\u3001\u524d\u8a00","text":"<p>\u5728\u81ea\u7136\u8bed\u8a00\u5904\u7406\u9886\u57df, \u8bcd\u8bed \u548c \u53e5\u5b50 \u7684\u5212\u5206\u4e00\u76f4\u662f\u4e00\u5927\u96be\u9898\u3002</p> <ul> <li>\u53e5\u5b50 \u662f\u6a21\u578b\u8f93\u5165\u7684\u6700\u5c0f\u5355\u5143</li> <li>\u8bcd\u8bed(token) \u662f\u6a21\u578b\u5904\u7406\u7684\u6700\u5c0f\u5355\u5143\u3002</li> </ul> <p>\u5728\u76ee\u524d Transformer + \u5927\u8bed\u8a00\u6a21\u578b \u7684\u65f6\u4ee3, \u79d1\u7814\u754c\u5bf9 \u5206\u53e5 \u7684\u7814\u7a76\u51e0\u4e4e\u6ca1\u6709\u4e86, \u8f6c\u800c\u53d8\u6210\u4e86\u5bf9 \u6587\u672c\u5411\u91cf\u68c0\u7d22 (Dense Passage Retrieval) \u548c \u957f\u5ea6\u5916\u63a8\u6027 (Length Extrapolation) \u7684\u7814\u7a76\u3002\u800c\u5bf9\u4e8e\u90e8\u5206\u5de5\u4e1a\u754c\u7684\u4efb\u52a1\u6765\u8bf4, \u8fd9\u5c5e\u4e8e\u843d\u5730\u7684\u96be\u70b9\u4e4b\u4e00, \u9700\u8981\u7ed3\u5408\u5177\u4f53\u7684\u4efb\u52a1, \u914d\u5408\u5927\u91cf\u7684\u4eba\u5de5\u89c4\u5219\u6765\u5904\u7406\u3002</p> <p>\u540c\u65f6, \u5728\u5927\u6a21\u578b\u548c\u5927\u6570\u636e\u7684\u52a0\u6301\u4e0b, \u5206\u8bcd(tokenize) \u7b97\u6cd5\u7684\u51c6\u786e\u7387\u5bf9\u6a21\u578b\u6027\u80fd\u7684\u5f71\u54cd\u4e5f\u5927\u5927\u964d\u4f4e\u4e86\u3002\u5373\u4f7f\u5206\u8bcd\u4e0d\u5408\u7406\u6216\u8005\u5206\u9519\u4e86, \u6a21\u578b\u4e5f\u80fd\u591f \"\u7406\u89e3\" \u53e5\u5b50\u7684\u542b\u4e49, \u56e0\u6b64\u76f8\u5173\u9886\u57df\u7684\u7814\u7a76\u4e5f\u4e0d\u662f\u7279\u522b\u591a\u3002\u672c\u6587\u5c31\u6765\u804a\u4e00\u804a\u5927\u6a21\u578b\u65f6\u4ee3\u7684\u5206\u8bcd\u7b97\u6cd5\u3002</p> <p>\u6309\u7167\u8bed\u8a00\u4f53\u7cfb, \u5206\u8bcd\u7b97\u6cd5\u5927\u4f53\u4e0a\u53ef\u4ee5\u5206\u6210\u4e24\u79cd:</p> <ul> <li>\u4e2d\u6587\u5206\u8bcd: \u53e5\u5b50\u4e2d\u8bcd\u4e0e\u8bcd\u4e4b\u95f4\u6ca1\u6709\u5206\u9694\u7b26, \u6bd4\u65b9\u8bf4 \u6c49\u8bed, \u65e5\u8bed, \u97e9\u8bed\u3002</li> <li>\u82f1\u6587\u5206\u8bcd : \u53e5\u5b50\u4e2d\u7528 \u7a7a\u683c \u4f5c\u4e3a\u8bcd\u4e0e\u8bcd\u4e4b\u95f4\u7684\u5206\u9694\u7b26, \u6bd4\u65b9\u8bf4 \u82f1\u8bed, \u6cd5\u8bed, \u5fb7\u8bed\u3002</li> </ul> <p>\u4e0b\u9762, \u6211\u4eec\u5148\u5206\u522b\u4e86\u89e3\u4e00\u4e0b\u4e24\u79cd\u4f53\u7cfb\u7684\u5206\u8bcd\u65b9\u5f0f\u3002</p>"},{"location":"tokenizer/tokenizer%E5%85%A5%E9%97%A8/#_2","title":"\u4e8c\u3001\u4e2d\u6587\u5206\u8bcd","text":"<p>\u4e2d\u6587\u5206\u8bcd \u662f\u4e00\u4e2a\u72ec\u7acb\u7684 NLP \u4efb\u52a1, \u4e5f\u662f\u5165\u95e8 NLP \u5f88\u597d\u7684\u65b9\u5f0f\u4e4b\u4e00, \u4e3b\u8981\u7684\u65b9\u5f0f\u6709:</p> <ul> <li>\u57fa\u4e8e \u8bcd\u8868\u5339\u914d \u7684\u65b9\u5f0f (\u524d\u7f00\u5b57\u5178\u6811, AC \u81ea\u52a8\u673a)</li> <li>\u57fa\u4e8e n-gram \u7684 \u6982\u7387\u8def\u5f84\u65b9\u5f0f (\u7ef4\u7279\u6bd4\u7b97\u6cd5)</li> <li>\u8f6c\u5316\u4e3a \u5e8f\u5217\u6807\u6ce8 \u4efb\u52a1, \u4f7f\u7528 HMM, CRF \u6216\u8005 token classification \u7b49\u6a21\u578b</li> </ul> <p>\u5176\u4e2d, \u6700\u540e\u4e00\u79cd\u65b9\u5f0f\u9700\u8981\u4eba\u5de5\u6807\u6ce8\u6570\u636e, \u7136\u540e\u8bad\u7ec3\u6a21\u578b\u3002\u524d\u4e24\u79cd\u65b9\u5f0f\u9664\u4e86\u4eba\u5de5\u6807\u6ce8\u6570\u636e\u5916, \u8fd8\u53ef\u4ee5\u901a\u8fc7 \u65e0\u76d1\u7763\u5b66\u4e60 \u7684\u65b9\u5f0f\u751f\u6210\u6240\u9700\u8981 \u8bcd\u5178\u3002\u4e3a\u4e86\u548c\u5e8f\u5217\u6807\u6ce8\u4efb\u52a1\u76f8\u4e92\u5bf9\u5e94, \u6211\u4eec\u5c06 \u751f\u6210\u8bcd\u5178 \u7684\u8fc7\u7a0b\u4e5f\u79f0\u4e3a \"\u8bad\u7ec3\"\u3002</p> <p>\u5bf9\u4e8e\u7b2c\u4e00\u79cd\u65b9\u5f0f, \"\u8bad\u7ec3\" \u7684\u8fc7\u7a0b\u53ea\u9700\u8981\u6784\u5efa\u4e00\u4e2a \u8bcd\u8868 \u5373\u53ef, \u8fd9\u79cd\u7b97\u6cd5\u4e5f\u88ab\u79f0\u4e3a \u65b0\u8bcd\u53d1\u73b0, \u5177\u4f53\u7684\u53ef\u4ee5\u53bb\u770b Matrix67 \u7684\u535a\u5ba2: \u4e92\u8054\u7f51\u65f6\u4ee3\u7684\u793e\u4f1a\u8bed\u8a00\u5b66\uff1a\u57fa\u4e8eSNS\u7684\u6587\u672c\u6570\u636e\u6316\u6398\u3002</p> <p>\u800c\u5bf9\u4e8e\u7b2c\u4e8c\u79cd\u65b9\u5f0f, \"\u8bad\u7ec3\" \u7684\u8fc7\u7a0b\u9664\u4e86\u6784\u5efa \u8bcd\u8868 \u5916, \u8fd8\u8981\u8ba1\u7b97\u76f8\u5bf9\u5e94\u7684 \u6982\u7387\u3002\u5f53\u7136, \u4e0d\u540c\u7684\u5339\u914d\u65b9\u5f0f\u548c\u6982\u7387\u8def\u5f84\u8ba1\u7b97\u65b9\u5f0f, \"\u8bad\u7ec3\" \u8fc7\u7a0b\u662f\u4e0d\u4e00\u6837\u7684\u3002</p> <p>\u4e3a\u4e86\u65b9\u4fbf\u7406\u89e3\u548c\u8bf4\u660e, \u5728\u540e\u6587\u4e2d, \u4e2d\u6587\u5206\u8bcd\u7b97\u6cd5\u7edf\u79f0\u4e3a \u6587\u672c\u5207\u5206\u7b97\u6cd5, \u800c\u524d\u4e24\u79cd\u65b9\u5f0f\u7684\u65e0\u76d1\u7763\u8bad\u7ec3\u65b9\u6cd5\u79f0\u4e3a \u65e0\u76d1\u7763\u7684\u6587\u672c\u5207\u5206\u7b97\u6cd5\u3002</p>"},{"location":"tokenizer/tokenizer%E5%85%A5%E9%97%A8/#_3","title":"\u4e09\u3001\u82f1\u6587\u5206\u8bcd","text":"<p>\u5bf9\u4e8e\u82f1\u6587\u5206\u8bcd\u6765\u8bf4, \u4e00\u822c\u60c5\u51b5\u4e0b, \u57fa\u4e8e \u7a7a\u683c + \u6807\u70b9 \u5206\u8bcd\u5373\u53ef, \u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u5c31\u80fd\u89e3\u51b3\u3002</p> <p>\u4f46\u662f, \u5bf9\u4e8e\u6587\u672c\u751f\u6210\u4efb\u52a1\u6765\u8bf4, \u6211\u4eec\u9700\u8981 \u8bcd\u8868\u7ea7\u522b \u7684\u5206\u7c7b\u4efb\u52a1, \u5373 softmax \u56de\u5f52\u7684\u7c7b\u522b\u6570\u548c\u8bcd\u8868\u7684\u6570\u91cf\u662f\u4e00\u81f4\u7684\u3002\u6b64\u65f6, \u4e3b\u8981\u4f1a\u4ea7\u751f\u4ee5\u4e0b\u4e00\u4e9b\u95ee\u9898:</p> <ul> <li> <p>\u9996\u5148, \u662f\u8bcd\u8868\u8fc7\u5927\u7684\u95ee\u9898\u3002\u4e00\u822c\u60c5\u51b5\u4e0b, \u6bcf\u4e00\u79cd\u8bed\u8a00\u5e38\u7528\u8bcd\u5728 40 \u5230 50 \u4e07\u4e4b\u95f4, \u8fd9\u5c31\u610f\u5473\u7740\u6700\u540e\u7684\u5206\u7c7b\u4efb\u52a1\u7c7b\u522b\u6570\u5728 40 \u5230 50 \u4e07\u4e4b\u95f4, \u8ba1\u7b97\u7684\u5f00\u9500\u975e\u5e38\u4e4b\u5927, \u4f46\u4e5f\u4e0d\u662f\u4e0d\u80fd\u63a5\u53d7\u3002\u5728 word2vec \u4e2d\u4e5f\u6709\u7c7b\u4f3c\u7684\u95ee\u9898, \u53ef\u4ee5\u4f7f\u7528 \u8d1f\u91c7\u6837 (negative sampling) \u7684\u65b9\u5f0f\u6765\u8fd1\u4f3c\u8ba1\u7b97\u3002</p> </li> <li> <p>\u5176\u6b21, \u662f OOV (Out-of-vocabulary) \u7684\u95ee\u9898\u3002\u5bf9\u4e8e\u90a3\u4e9b\u4e0d\u5e38\u89c1\u7684, \u88ab\u6392\u9664\u5728\u8bcd\u8868\u4e4b\u5916\u7684\u8bcd\u8bed, \u6a21\u578b\u6c38\u8fdc\u4e0d\u80fd\u751f\u6210\u3002\u5728\u901a\u7528\u6a21\u578b\u8fc1\u79fb\u5230\u7279\u5b9a\u9886\u57df\u65f6, \u8fd9\u4e2a\u95ee\u9898\u4f1a\u7279\u522b\u660e\u663e\u3002</p> </li> </ul> <p>\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898, \u8bba\u6587\u4e2d\u5bf9\u82f1\u6587\u5206\u8bcd\u8fdb\u884c\u4e86\u4f18\u5316, \u63d0\u51fa\u4e86 subword \u5206\u8bcd \u65b9\u5f0f\u3002</p> <p>\u5176\u6838\u5fc3\u601d\u60f3\u5f88\u7b80\u5355: \u5728\u82f1\u6587\u4e2d, \u4e00\u4e9b\u82f1\u8bed\u5355\u8bcd\u8fd8\u53ef\u4ee5\u7ee7\u7eed\u62c6\u5206, \u62c6\u6210 \u524d\u7f00(prefix), \u8bcd\u6839(stem), \u540e\u7f00(suffix) \u7ec4\u5408\u7684\u5f62\u5f0f\u3002\u8fd9\u4e9b\u62c6\u5206\u51fa\u6765\u7684\u90e8\u5206\u4e00\u822c\u5177\u6709\u901a\u7528\u7684\u542b\u4e49, \u540c\u65f6\u5355\u8bcd\u7684\u542b\u4e49\u4e5f\u4e0e\u4e4b\u6709\u5173\u3002</p> <p>\u90a3\u4e48, \u6211\u4eec\u53ef\u4ee5\u5bf9\u6bcf\u4e00\u4e2a\u82f1\u6587\u5355\u8bcd\u6267\u884c \u6587\u672c\u5207\u5206\u7b97\u6cd5, \u5c06\u5176\u62c6\u5206\u6210\u66f4\u5c0f\u7684 subword, \u4ee5\u51cf\u5c11\u82f1\u6587\u8bcd\u8868\u7684\u6570\u91cf\u3002\u8fd9\u6837, \u5e38\u89c1\u7684\u8bcd\u76f4\u63a5\u5728\u8bcd\u8868\u4e2d, \u4e0d\u5e38\u89c1\u7684\u8bcd\u5219\u62c6\u6210 subword \u7ec4\u5408\u7684\u5f62\u5f0f\u3002\u540c\u65f6, \u8fd9\u4e9b subword \u53ef\u4ee5\u7ec4\u5408\u51fa\u8bad\u7ec3\u96c6\u4e2d\u6ca1\u6709\u82f1\u6587\u5355\u8bcd, \u90a3\u4e48\u5c31\u80fd\u89e3\u51b3 OOV \u7684\u95ee\u9898\u4e86\u3002</p> <p>\u6b64\u65f6, \u5206\u8bcd\u5206\u4e3a\u4e24\u4e2a\u9636\u6bb5:  * (1) \u5bf9\u53e5\u5b50\u4f7f\u7528\u7a7a\u683c + \u6807\u70b9\u5206\u8bcd, \u5206\u6210\u4e00\u4e2a\u4e00\u4e2a word; *  (2) \u5bf9\u6bcf\u4e00\u4e2a word \u4f7f\u7528 \u6587\u672c\u5207\u5206\u7b97\u6cd5, \u5206\u6210\u4e00\u4e2a\u4e00\u4e2a subword, \u4f5c\u4e3a\u6700\u7ec8\u7684\u7ed3\u679c\u3002</p> <p>\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b, \u4f7f\u7528 \u5e8f\u5217\u6807\u6ce8 \u7684\u5207\u5206\u7b97\u6cd5\u5f88\u56f0\u96be, \u56e0\u4e3a\u5176\u9700\u8981\u4eba\u5de5\u6807\u6ce8, \u6211\u4eec\u5f88\u96be\u53bb\u5b9a\u4e49\u5207\u5206\u65b9\u5f0f\u3002\u4e00\u822c\u90fd\u91c7\u7528\u65e0\u76d1\u7763\u7684\u6587\u672c\u5207\u5206\u7b97\u6cd5, \u4e5f\u5c31\u662f\u4f7f\u7528 \u5339\u914d \u6216\u8005 \u6982\u7387\u8def\u5f84 \u7684\u65b9\u5f0f, \u5e76\u901a\u8fc7\u65e0\u76d1\u7763\u7b97\u6cd5\u751f\u6210\u5206\u8bcd\u6240\u9700\u8981\u7684 \u8bcd\u8868 \u4ee5\u53ca \u6982\u7387\u3002\u5e38\u89c1\u7684\u7b97\u6cd5\u5305\u62ec: BPE, WordPiece, Unigram \u7b49\u7b49\u3002</p>"},{"location":"tokenizer/tokenizer%E5%85%A5%E9%97%A8/#_4","title":"\u56db\u3001\u591a\u8bed\u8a00\u5206\u8bcd\u6846\u67b6","text":"<p>\u5728 LLM \u65f6\u4ee3, \u6211\u4eec\u5e0c\u671b\u8bad\u7ec3\u51fa\u6765\u7684\u6a21\u578b\u662f \u8bed\u8a00\u65e0\u5173 \u7684, \u4e5f\u5c31\u610f\u5473\u7740\u652f\u6301\u6240\u6709\u7684\u8bed\u8a00\u3002\u6b64\u65f6, \u4e0a\u4e00\u90e8\u5206\u63d0\u5230\u7684\u4e24\u4e2a\u95ee\u9898\u4f1a\u66f4\u52a0\u7a81\u51fa: \u5168\u7403\u6709 300 \u591a\u79cd\u6587\u5b57\u7cfb\u7edf, \u5982\u679c\u6bcf\u4e00\u79cd\u8bed\u8a00\u6709 5 \u4e07\u4e2a\u5e38\u7528\u8bcd, \u90a3\u4e48\u8bcd\u8868\u5c31\u6709 1500 \u4e07\u4e4b\u591a, \u6b64\u65f6 softmax \u56de\u5f52\u8ba1\u7b97\u5f00\u9500\u5f88\u96be\u63a5\u53d7, \u540c\u65f6 OOV \u95ee\u9898\u4e5f\u5341\u5206\u4e25\u91cd\u3002\u4e00\u822c\u60c5\u51b5\u4e0b, \u6211\u4eec\u671f\u671b\u7684 \u8bcd\u8868 \u5927\u5c0f\u662f\u5728 4 \u4e07\u5230 10 \u4e07\u4e4b\u95f4\u3002</p> <p>\u4e00\u79cd\u53ef\u884c\u7684\u65b9\u5f0f\u662f\u76f4\u63a5\u6309\u7167 \u5b57\u7b26 \u6765\u5206, \u4e00\u4e2a\u5b57\u7b26\u4f5c\u4e3a\u4e00\u4e2a\u8bcd\u8bed, \u540c\u65f6\u82f1\u6587\u4e2d\u7684 \u7a7a\u683c \u4e5f\u5f53\u4f5c\u4e00\u4e2a\u8bcd\u8bed, \u8bcd\u8868\u5c31\u662f unicode \u4e2d\u5b9a\u4e49\u7684 15 \u4e07\u79cd\u5b57\u7b26\u3002\u8fd9\u79cd\u65b9\u5f0f\u5bf9\u4e8e\u4e2d\u6587\u6765\u8bf4\u6bd4\u8f83\u53cb\u597d, \u4f46\u662f\u5bf9\u4e8e\u82f1\u6587\u6765\u8bf4\u6548\u7387\u592a\u4f4e\u4e86: \u5bf9\u4e8e\u81ea\u56de\u5f52\u6a21\u578b\u6765\u8bf4, \u63a8\u7406\u65f6\u662f\u4e00\u4e2a\u4e00\u4e2a\u5b57\u7b26\u8e66\u51fa\u6765\u7684, \u8fd9\u663e\u7136\u4e0d\u80fd\u63a5\u53d7\u3002\u4e0d\u4ec5\u5982\u6b64, \u8bcd\u8868 \u7684\u5927\u5c0f\u4e5f\u4e0d\u7b26\u5408\u6211\u4eec\u7684\u671f\u671b * \u6ce8\u610f\uff1a\u5f53\u524d\uff082024-08-07 \u5f88\u591a\u5927\u6a21\u578b\u7684\u8bcd\u8868\u8d85\u8fc7\u4e8615w\uff0c\u56e0\u6b64\u8bcd\u8868\u6570\u76ee\u572815w\u4e0d\u662f\u4e00\u4e2a\u95ee\u9898\u3002</p> <p>\u90a3\u4e48\u5e94\u8be5\u600e\u4e48\u529e\u5462? \u76ee\u524d\u4e3b\u6d41\u7684\u505a\u6cd5\u662f\u4e0a\u4e00\u90e8\u5206 subword \u5206\u8bcd\u65b9\u5f0f\u7684\u6269\u5c55, \u6d41\u7a0b\u4e5f\u662f\u5206\u4e3a\u4e24\u6b65:</p> <ul> <li> <p>\u7b2c\u4e00\u6b65, \u5c06\u53e5\u5b50\u6309\u7167 \u7a7a\u683c \u5206\u8bcd, \u540c\u65f6\u5c06 \u7a7a\u683c \u4f5c\u4e3a\u8bcd\u8bed\u7684\u4e00\u90e8\u5206, \u6211\u4eec\u79f0\u5176\u4e3a word\u3002\u5982\u679c\u662f\u4e2d\u82f1\u6df7\u5408\u7684\u6587\u672c, \u90a3\u4e48 word \u53ef\u80fd\u662f\u82f1\u6587\u5355\u8bcd, \u4e5f\u53ef\u80fd\u662f\u4e2d\u6587\u7247\u6bb5\u3002\u4e3e\u4f8b\u6765\u8bf4, \"<code>Hello, World \u4f60\u597d\u4e16\u754c</code>\" \u5206\u6210\u4e86 \"<code>Hello,</code>\", \"<code>World</code>\", \"<code>\u4f60\u597d\u4e16\u754c</code>\" \u4e09\u4e2a word\u3002</p> <p>\u9700\u8981\u5f3a\u8c03\u4e00\u70b9, \u8fd9\u91cc\u5c06\u82f1\u6587\u4e2d\u7684 \u7a7a\u683c \u5f53\u4f5c\u8bcd\u8bed\u7684\u4e00\u90e8\u5206, \u8fd9\u610f\u5473\u7740\u82f1\u6587\u7f16\u7801\u548c\u89e3\u7801\u5177\u6709\u53ef\u9006\u6027, \u5373\u82f1\u6587\u7684\u89e3\u7801\u4e0d\u9700\u8981\u518d\u989d\u5916\u6dfb\u52a0 \u7a7a\u683c \u4e86\u3002\u5426\u5219, \u5982\u679c\u6a21\u578b\u751f\u6210\u7684\u6587\u672c\u662f\u4e2d\u82f1\u6df7\u5408\u7684, \u5904\u7406\u8d77\u6765\u4f1a\u975e\u5e38\u9ebb\u70e6\u3002</p> </li> <li> <p>\u7b2c\u4e8c\u6b65, \u5bf9\u6bcf\u4e00\u4e2a word \u91c7\u7528 \u6587\u672c\u5207\u5206\u7b97\u6cd5, \u53d8\u6210\u66f4\u5c0f\u7684 subword:</p> <ul> <li>\u5982\u679c\u662f\u82f1\u6587\u5355\u8bcd, \u4f1a\u88ab\u62c6\u6210\u66f4\u5c0f\u7684\u5b57\u6bcd\u7ec4\u5408, \u6bd4\u65b9\u8bf4, \"<code>Hello,</code>\" \u53ef\u4ee5\u88ab\u5206\u6210 \"<code>He</code>\", \"<code>llo</code>\", \"<code>,</code>\" \u4e09\u4e2a subword</li> <li>\u5982\u679c\u662f\u4e2d\u6587\u7247\u6bb5, \u5219\u4f1a\u88ab\u62c6\u6210\u66f4\u5c0f\u7684\u8bcd\u8bed, \u6bd4\u65b9\u8bf4, \"<code>\u4f60\u597d\u4e16\u754c</code>\" \u53ef\u4ee5\u5206\u6210 \"<code></code>\", \"<code>\u4f60\u597d</code>\", \"<code>\u4e16\u754c</code>\" \u4e09\u4e2a subword</li> </ul> </li> </ul> <p>\u4e00\u822c\u60c5\u51b5\u4e0b, \u6211\u4eec\u4f1a\u5c06\u8bed\u6599\u5e93\u4e2d\u6240\u6709\u7684\u5b57\u7b26\u90fd\u6dfb\u52a0\u5230 \u8bcd\u8868 \u4e2d\u3002\u90a3\u4e48\u5c31\u4e00\u5b9a\u6709 unicode \u652f\u6301\u7684, \u4f46\u662f \u8bcd\u8868 \u4e2d\u6ca1\u6709\u7684\u5b57\u7b26\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u6837\u7684\u95ee\u9898, \u6211\u4eec\u9700\u8981\u5f15\u5165 \u5b57\u8282, \u4e3b\u8981\u7684\u65b9\u5f0f\u6709\u4e24\u79cd:</p> <ul> <li> <p>\u7b2c\u4e00\u79cd: GPT-2 \u4f7f\u7528\u7684\u65b9\u5f0f: \u5c06 word \u76f4\u63a5\u7528 <code>utf-8</code> \u7f16\u7801\u6210 \u5b57\u8282\u6d41, \u7136\u540e\u5728\u5b57\u8282\u6d41\u4e0a\u91c7\u7528 \u6587\u672c\u5207\u5206\u7b97\u6cd5\u3002\u7531\u4e8e \u5b57\u8282 \u7684\u79cd\u7c7b\u6570\u662f\u56fa\u5b9a\u7684 256 \u79cd, \u5bf9 \u8bcd\u8868 \u7684\u5f71\u54cd\u5c31\u975e\u5e38\u5c0f\u4e86\u3002</p> </li> <li> <p>\u7b2c\u4e8c\u79cd: LLaMA \u548c sentencepiece \u4f7f\u7528\u7684\u65b9\u5f0f: \u8fd8\u662f\u5728 word \u4e0a\u9762\u91c7\u7528 \u6587\u672c\u5207\u5206\u7b97\u6cd5, \u540c\u65f6\u5c06 256 \u79cd \u5b57\u8282 \u52a0\u5165 \u8bcd\u8868 \u4e2d\u3002\u5728\u5206\u8bcd\u65f6, \u5982\u679c\u51fa\u73b0\u4e86\u672a\u77e5\u5b57\u7b26, \u90a3\u4e48\u5c06\u672a\u77e5\u5b57\u7b26\u7528 utf-8 \u7f16\u7801\u6210 \u5b57\u8282\u6d41, \u4e00\u4e2a\u5b57\u8282\u4f5c\u4e3a\u4e00\u4e2a subword \u52a0\u5165\u5206\u8bcd\u7ed3\u679c\u4e2d, \u8fd9\u6837\u5c31\u89e3\u51b3 OOV \u7684\u95ee\u9898\u4e86\u3002</p> </li> </ul> <p>\u7531\u4e8e\u5206\u8bcd\u7684\u7ed3\u679c\u4e2d\u5305\u542b \u5b57\u8282, \u73b0\u5728\u7684\u8bba\u6587\u4e2d\u90fd\u4f1a\u5c06\u5176\u79f0\u4e3a <code>byte-level</code>\u3002</p> <p>\u8fd9\u6837\u7684\u5206\u8bcd\u7ed3\u679c\u80af\u5b9a\u4f1a\u6709\u4e0d\u5408\u7406\u7684\u5730\u65b9\u3002\u6bd4\u65b9\u8bf4, \u4e24\u4e2a\u6c49\u5b57\u53ef\u80fd\u4f1a\u88ab\u5206\u6210\u4e09\u4e2a subword, \u6bcf\u4e00\u4e2a subword \u5305\u542b\u4e24\u4e2a\u5b57\u8282\u3002\u4e00\u822c\u60c5\u51b5\u4e0b, \u5728 utf-8 \u4e2d\u4e00\u4e2a\u6c49\u5b57\u5360\u4e09\u4e2a\u5b57\u8282, \u8fd9\u5c31\u610f\u5473\u7740\u4e2d\u95f4\u7684 subword \u662f\u7531\u7b2c\u4e00\u4e2a\u6c49\u5b57\u6700\u540e\u4e00\u4e2a\u5b57\u8282 \u548c \u7b2c\u4e8c\u4e2a\u6c49\u5b57\u7b2c\u4e00\u4e2a\u5b57\u8282\u6784\u6210, \u8fd9\u663e\u7136\u662f\u4e0d\u5408\u7406\u7684\u3002\u4f46\u662f\u5728\u5927\u6a21\u578b\u548c\u5927\u6570\u636e\u7684\u52a0\u6301\u4e0b, \u8fd9\u79cd\u4e0d\u5408\u7406\u7684\u95ee\u9898\u5e76\u4e0d\u5927\u3002</p> <p>\u4e0d\u4ec5\u5982\u6b64, \u751f\u6210\u7684\u6587\u672c\u4e5f\u53ef\u80fd\u4e0d\u5408\u7406, \u6709\u53ef\u80fd\u4f1a\u7ec4\u5408\u51fa unicode \u4e2d\u4e0d\u5b58\u5728\u7684\u5b57\u7b26\u3002\u8fd9\u4e2a\u65f6\u5019, \u6211\u4eec\u53ea\u9700\u8981\u5ffd\u7565\u6389\u9519\u8bef\u7684\u90e8\u5206\u5373\u53ef (\u5728 Python \u4e2d, \u5c06 bytes \u5bf9\u8c61\u4e2d encode \u65b9\u6cd5 \u7684 errors \u53c2\u6570\u8bbe\u7f6e\u4e3a \"ignore\" \u5c31\u80fd\u5b9e\u73b0\u4e86)\u3002\u5982\u679c\u8fd9\u79cd\u60c5\u51b5\u7ecf\u5e38\u51fa\u73b0, \u4f60\u9700\u8981\u8bc4\u4f30\u4e00\u4e0b\u6a21\u578b\u8bad\u7ec3\u7684\u662f\u5426\u5145\u5206\u3002</p> <p>\u81f3\u6b64, \u5206\u8bcd\u7684\u6846\u67b6\u5c31\u642d\u5efa\u5b8c\u6210\u4e86, \u5269\u4e0b\u7684\u5c31\u662f\u5982\u4f55\u8bbe\u8ba1 \u65e0\u76d1\u7763\u7684\u6587\u672c\u5207\u5206\u7b97\u6cd5\u3002\u5e38\u89c1\u7684\u6709 BPE \u548c Unigram \u7b97\u6cd5, \u5e38\u7528\u7684\u5de5\u5177\u6709 sentencepiece \u548c tokenizers\u3002</p> <p>\u4e0b\u9762, \u5c31\u8ba9\u6211\u4eec\u770b\u770b\u5177\u4f53\u7684 \u65e0\u76d1\u7763\u7684\u6587\u672c\u5207\u5206\u7b97\u6cd5\u3002\u4e3a\u4e86\u53d9\u8ff0\u65b9\u4fbf, \u5728\u4e0b\u6587\u4e2d, \u6211\u5c06 \u6587\u672c \u7edf\u79f0\u4e3a word, \u5176\u53ef\u4ee5\u662f \u82f1\u6587\u5355\u8bcd, \u4e2d\u6587\u6587\u672c\u7247\u6bb5, \u4e00\u4e2a\u5b8c\u6574\u7684\u53e5\u5b50, \u5b57\u8282\u6d41\u7b49\u7b49\u3002\u5177\u4f53\u7684\u8981\u770b\u6846\u67b6\u600e\u4e48\u8bbe\u8ba1\u4e86\u3002</p>"},{"location":"tokenizer/tokenizer%E5%85%A5%E9%97%A8/#bpe","title":"\u4e94\u3001BPE \u5206\u8bcd\u7b97\u6cd5","text":"<p>BPE \u7b97\u6cd5\u7684\u5168\u79f0\u662f Byte-Pair Encoding, \u6700\u65e9\u662f 1994 \u5e74\u63d0\u51fa\u5e94\u7528\u4e8e \u6570\u636e\u538b\u7f29 \u4efb\u52a1\u3002\u5728 2015 \u5e74, Neural Machine Translation of Rare Words with Subword Units \u63d0\u51fa\u5c06\u5176\u5ef6\u7533\u81f3 \u6587\u672c\u5206\u8bcd \u4efb\u52a1, \u540c\u65f6\u6ca1\u6709\u6539\u53d8\u7b97\u6cd5\u7684\u540d\u79f0\u3002(\u5982\u679c\u4f60\u4e0d\u4e86\u89e3\u4e4b\u524d\u7684\u6570\u636e\u538b\u7f29\u7b97\u6cd5, \u53ef\u80fd\u4f1a\u597d\u5947\u4e3a\u4ec0\u4e48\u662f\u8fd9\u4e2a\u540d\u5b57)\u3002</p> <p>OpenAI \u5173\u4e8e GPT \u7684\u4e00\u7cfb\u5217\u5de5\u4f5c, \u4ee5\u53ca Meta \u5173\u4e8e LLaMA \u7684\u4e00\u7cfb\u5217\u5de5\u4f5c\u90fd\u662f\u4f7f\u7528\u8fd9\u79cd\u5206\u8bcd\u65b9\u5f0f\u3002OpenAI \u867d\u7136\u6ca1\u6709\u5f00\u6e90 GPT-3 \u6a21\u578b\u7684\u53c2\u6570\u6743\u91cd, \u4f46\u662f\u5f00\u6e90\u4e86\u5206\u8bcd\u5e93 tiktoken, \u5e2e\u52a9\u7528\u6237\u5728\u8c03\u7528\u63a5\u53e3\u524d\u8ba1\u7b97 token \u6570\u3002</p> <p>\u4e0b\u9762\u5c31\u8ba9\u6211\u4eec\u770b\u770b\u8fd9\u4e2a\u7b97\u6cd5\u3002\u9996\u5148\u6765\u770b\u770b \"\u8bad\u7ec3\" \u8fc7\u7a0b:</p> <ul> <li> <p>\u7b2c\u4e00\u6b65, \u5c06\u8bed\u6599\u5e93\u4e2d\u6240\u6709\u7684 <code>word</code> \u4ee5\u5b57\u7b26 (\u6700\u5c0f\u9897\u7c92) \u4e3a\u5355\u4f4d\u8fdb\u884c\u62c6\u5206, \u6bcf\u4e00\u4e2a\u5b57\u7b26\u4f5c\u4e3a\u4e00\u4e2a subword\u3002\u6bd4\u65b9\u8bf4, \"<code>best</code>\" \u88ab\u62c6\u5206\u6210 \"<code>b e s t</code>\" \u56db\u4e2a subword (\u7528 \u7a7a\u683c \u4f5c\u4e3a\u5206\u9694\u7b26)\u3002</p> </li> <li> <p>\u7b2c\u4e8c\u6b65, \u521d\u59cb\u5316 \u8bcd\u8868 \u548c \u5408\u5e76\u89c4\u5219\u5217\u8868\u3002\u5176\u4e2d, \u8bcd\u8868 \u5c31\u662f\u6240\u6709\u53ef\u80fd\u7684 subword \u96c6\u5408, \u4e5f\u5c31\u662f\u521d\u59cb\u5316\u6210\u8bed\u6599\u5e93\u4e2d\u6240\u6709\u53ef\u80fd\u7684\u5b57\u7b26\u96c6\u5408\u3002</p> </li> <li> <p>\u7b2c\u4e09\u6b65, \u904d\u5386 <code>word</code> \u4e2d\u6240\u6709\u53ef\u80fd\u7684 subword pair, \u7edf\u8ba1\u4ed6\u4eec\u51fa\u73b0\u7684\u9891\u6570\u3002\u7136\u540e\u5c06\u6570\u636e\u96c6\u4e2d \u9891\u6570\u6700\u9ad8 \u7684\u90a3\u4e00\u4e2a subword pair \u5408\u5e76\u5728\u4e00\u8d77, \u5408\u5e76\u540e\u7684 subword \u52a0\u5165 \u8bcd\u8868 \u4e2d, \u5408\u5e76\u89c4\u5219\u52a0\u5165 \u5408\u5e76\u89c4\u5219\u5217\u8868 \u4e2d\u3002</p> <p>\u4e3e\u4f8b\u6765\u8bf4, \"<code>b e s t</code>\" \u73b0\u5728\u6709\u4e09\u79cd\u53ef\u80fd\u7684 subword pair: \"<code>b e</code>\", \"<code>e s</code>\" \u548c \"<code>s t</code>\"\u3002\u7edf\u8ba1\u5b8c\u6210\u540e, \u53d1\u73b0\u5728\u8bed\u6599\u5e93\u4e2d, \"<code>s t</code>\" \u51fa\u73b0\u7684\u9891\u6570\u6700\u9ad8\u3002\u90a3\u4e48, \u6211\u4eec\u5c31\u5c06\u6574\u4e2a\u6570\u636e\u96c6\u4e2d\u7684 \"<code>s t</code>\" \u5408\u5e76\u8d77\u6765, \u53d8\u6210 \"<code>st</code>\"\u3002\u6b64\u65f6 <code>best</code> \u7684\u62c6\u5206\u7ed3\u679c\u5c31\u662f \"<code>b e st</code>\", \u4ece\u56db\u4e2a subword \u53d8\u6210\u4e09\u4e2a subword\u3002</p> <p>\u540c\u65f6, \u5c06 \"<code>st</code>\" \u8fd9\u4e2a subword \u52a0\u5165 \u8bcd\u8868 \u4e2d, \u5c06 (\"<code>s t</code>\", \"<code>st</code>\") \u52a0\u5165 \u5408\u5e76\u89c4\u5219\u5217\u8868 \u4e2d\u3002</p> </li> <li> <p>\u7b2c\u56db\u6b65, \u4e00\u81f4\u91cd\u590d \u7b2c\u4e09\u6b65 \u7684\u64cd\u4f5c, \u76f4\u81f3 \u8bcd\u8868 \u8fbe\u5230\u9884\u8bbe\u7684\u5927\u5c0f\u5373\u53ef\u3002</p> </li> </ul> <p>\u6574\u4e2a\u8bad\u7ec3\u8fc7\u7a0b\u5c31\u662f\u4e0d\u65ad\u5730\u53bb\u5bfb\u627e\u8bed\u6599\u5e93\u4e2d\u9891\u6570\u6700\u9ad8\u7684 subword pair, \u7136\u540e\u5408\u5e76\u6210\u4e00\u4e2a subword, \u548c \u6570\u636e\u538b\u7f29 \u7b97\u6cd5\u4e2d\u7684\u6838\u5fc3\u601d\u60f3\u662f\u4e00\u81f4\u7684\u3002</p> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f, subword pair \u7684\u5408\u5e76\u6b21\u6570\u5e76\u4e0d\u4e00\u5b9a\u7b49\u4e8e\u5176\u9891\u6570\u3002\u4e3e\u4f8b\u6765\u8bf4, \u5bf9\u4e8e \"<code>x x x</code>\" \u6765\u8bf4, \u5176\u4e2d \"<code>x x</code>\" \u51fa\u73b0\u4e86\u4e24\u6b21, \u4f46\u662f\u6211\u4eec\u5408\u5e76\u65f6\u53ea\u80fd\u5408\u5e76\u4e00\u4e2a, \u5373 \"<code>xx x</code>\"\u3002</p> <p>\u90a3\u4e48, \u6211\u4eec\u600e\u4e48\u5bf9 word \u8fdb\u884c\u5206\u8bcd\u5462? \u9996\u5148, \u5c06 word \u4ee5\u5b57\u7b26\u4e3a\u5355\u4f4d\u8fdb\u884c\u62c6\u5206, \u4e00\u4e2a\u5b57\u7b26\u4f5c\u4e3a\u4e00\u4e2a subword\u3002\u7136\u540e\u6309\u7167 \u5408\u5e76\u89c4\u5219\u5217\u8868 \u4e2d\u7684\u987a\u5e8f, \u5982\u679c\u51fa\u73b0\u4e86 subword pair, \u5c31\u8fdb\u884c\u5408\u5e76\u3002\u6700\u540e\u5269\u4e0b\u7684 subword \u5217\u8868\u5c31\u662f\u6700\u7ec8\u7684\u5206\u8bcd\u7ed3\u679c\u3002</p> <p>\u6574\u4f53\u4e0a\u7684\u65b9\u6848\u5c31\u662f\u8fd9\u6837, \u53ef\u4ee5\u8bf4\u975e\u5e38\u5de7\u5999\u3002\u8fd9\u4e2a\u7b97\u6cd5\u5f00\u6e90\u5728 subword-nmt \u9879\u76ee\u4e2d\u3002</p> <p>\u73b0\u5728, \u5f88\u591a\u8bba\u6587\u4e2d\u90fd\u8bf4\u5176\u4f7f\u7528\u4e86 Byte-Level BPE (BBPE), \u5c31\u662f\u5c06\u7b2c\u56db\u90e8\u5206\u6240\u8bf4\u7684 byte-level \u65b9\u6848\u548c BPE \u7ed3\u5408\u8d77\u6765, \u6700\u521d\u662f OpenAI \u5728 GPT-2 \u5de5\u4f5c\u4e2d\u63d0\u51fa\u3002\u7f51\u4e0a\u5f88\u591a\u535a\u5ba2\u5728\u4ecb\u7ecd BBPE \u65f6, \u5f15\u7528\u7684\u8bba\u6587\u662f Meta \u7684 Neural Machine Translation with Byte-Level Subwords, \u5176\u53d1\u5e03\u6bd4 GPT-2 \u665a\u534a\u5e74, \u4e0d\u8981\u5f04\u9519\u5173\u7cfb\u4e86\u3002</p>"},{"location":"tokenizer/tokenizer%E5%85%A5%E9%97%A8/#wordpiece","title":"\u516d\u3001WordPiece \u5206\u8bcd\u7b97\u6cd5","text":"<p>WordPiece \u662f\u8c37\u6b4c\u4e8e 2016 \u5e74\u53d1\u5e03\u7684 \u5de5\u4f5c\u3002\u5176\u4ee3\u7801\u6ca1\u6709\u5f00\u6e90, \u51fa\u540d\u7684\u539f\u56e0\u662f\u8c37\u6b4c\u53d1\u5e03\u7684 BERT \u6a21\u578b\u4f7f\u7528\u4e86\u8fd9\u79cd\u5206\u8bcd\u65b9\u5f0f\u3002\u8fd9\u610f\u5473\u7740, WordPiece \u7684 \"\u8bad\u7ec3\" \u4ee3\u7801\u6ca1\u6709\u5f00\u6e90, \u4f46\u662f \"\u5206\u8bcd\" \u4ee3\u7801\u5f00\u6e90\u4e86\u3002\u4ece\u65b9\u6cd5\u4e0a\u6765\u770b, \u5176\u662f BPE \u65b9\u6cd5\u7684\u6539\u8fdb, \u4f46\u662f\u7531\u4e8e\u6ca1\u6709\u5f00\u6e90, \u9664\u4e86\u8c37\u6b4c\u5916, \u6ca1\u6709\u5176\u5b83\u516c\u53f8\u4f7f\u7528\u3002</p> <p>\u76f8\u8f83\u4e8e BPE, \u5176\u6539\u8fdb\u4e3b\u8981\u4f53\u73b0\u5728\u4e0b\u9762\u4e24\u4e2a\u65b9\u9762:</p> <p>\u9996\u5148, \u5728\u8bad\u7ec3\u8fc7\u7a0b\u7684\u7b2c\u4e09\u6b65\u4e2d, \u4e0d\u4ec5\u4ec5\u8ba1\u7b97 subword pair \u7684\u9891\u6570, \u800c\u662f\u8ba1\u7b97\u4e24\u8005\u4e4b\u95f4\u7684 score \u503c, \u8ba1\u7b97\u516c\u5f0f\u5982\u4e0b:</p> <p>\u5176\u4e2d,   \u548c   \u8868\u793a\u4e24\u4e2a subword, \u4ed6\u4eec\u7684\u9891\u6570\u662f   \u548c  \u3002\u800c   \u8868\u793a subword pair \u51fa\u73b0\u7684\u9891\u6570\u3002\u5982\u679c\u5c06\u6240\u6709\u7684 \u9891\u6570 \u9664\u4ee5\u603b\u9891\u6570, \u8f6c\u5316\u6210\u6982\u7387, \u518d\u5bf9\u6bd4\u503c\u53d6\u5bf9\u6570, \u90a3\u4e0d\u5c31\u662f PMI (Pointwise Mutual Information) \u5417? \u5bf9\u6b64\u6709\u7591\u95ee\u7684\u53ef\u4ee5\u53c2\u8003\u6211\u4e4b\u524d\u7684 \u6587\u7ae0\u3002</p> <p>\u4e5f\u5c31\u662f\u8bf4, \u73b0\u5728\u7684\u8bad\u7ec3\u8fc7\u7a0b\u662f\u4e0d\u65ad\u5730\u53bb\u5bfb\u627e\u8bed\u6599\u5e93\u4e2d PMI \u6700\u9ad8\u7684 subword pair, \u7136\u540e\u5408\u5e76\u6210\u4e00\u4e2a subword\u3002\u8fd9\u6837\u505a\u7684\u597d\u5904\u662f\u4ec0\u4e48\u5462? \u6bd4\u65b9\u8bf4, \"un\" \u548c \"able\" \u5728\u8bed\u6599\u5e93\u4e2d\u7684\u9891\u6570\u5f88\u9ad8, \u5982\u679c\u662f BPE \u7b97\u6cd5, \u4e24\u8005\u5c31\u4f1a\u5408\u5e76\u6210\u4e00\u4e2a subword\u3002\u4f46\u662f, \"un\" \u4f5c\u4e3a\u8bcd\u8bed\u524d\u7f00\u7684\u60c5\u51b5\u5f88\u591a, \"able\" \u4f5c\u4e3a\u8bcd\u8bed\u540e\u7f00\u7684\u60c5\u51b5\u5f88\u591a, \u90a3\u4e48\u4ed6\u4eec\u76f8\u5173\u6027\u5c31\u6ca1\u6709\u90a3\u4e48\u9ad8, PMI \u503c\u5c31\u4f1a\u504f\u4f4e, \u90a3\u4e48\u5728 WorldPiece \u7b97\u6cd5\u4e2d, \u4e24\u8005\u5c31\u4e0d\u4f1a\u5408\u5e76\u6210\u4e00\u4e2a subword\u3002</p> <p>\u5176\u6b21, \u662f\u5206\u8bcd\u8fc7\u7a0b\u7684\u4e0d\u540c\u3002\u8fd9\u91cc\u4e0d\u4f7f\u7528 \u5408\u5e76\u89c4\u5219\u5217\u8868 \u6765\u8fdb\u884c\u5206\u8bcd, \u800c\u662f\u76f4\u63a5\u4f7f\u7528 \u8bcd\u8868 \u5206\u8bcd, \u91c7\u7528 \u6b63\u5411\u6700\u957f\u5339\u914d \u7684\u7b56\u7565\u3002\u4e5f\u5c31\u662f\u8bf4, \u4e0d\u65ad\u5bfb\u627e word \u4e2d\u7684\u6700\u957f\u524d\u7f00 subword\u3002\u7528\u4e00\u4e2a\u5177\u4f53\u7684\u4f8b\u5b50\u6765\u8bf4\u660e:</p> <p>\u8bcd\u8868\u4e2d\u6709 \"\u7814\u7a76\", \"\u751f\u547d\", \"\u8d77\u6e90\", \"\u7814\u7a76\u751f\", \u751f \u7b49 subword, \u73b0\u5728\u5bf9 \"\u7814\u7a76\u751f\u547d\u8d77\u6e90\" \u8fd9\u6837\u4e00\u4e2a word \u8fdb\u884c\u5206\u8bcd:</p> <p>\u4ece \"\u7814\" \u5f00\u59cb, \u5339\u914d\u5230\u8bcd\u8868\u4e2d\u6700\u957f\u7684\u524d\u7f00 subword \u662f \"\u7814\u7a76\u751f\" \u4ece \"\u547d\" \u5f00\u59cb, \u5339\u914d\u5230\u8bcd\u8868\u4e2d\u6700\u957f\u7684\u524d\u7f00 subword \u662f \"\u547d\" \u4ece \"\u8d77\" \u5f00\u59cb, \u5339\u914d\u5230\u8bcd\u8868\u4e2d\u6700\u957f\u7684\u524d\u7f00 subword \u662f \"\u8d77\u6e90\" \u90a3\u4e48\u5206\u8bcd\u7ed3\u679c\u5c31\u662f [\"\u7814\u7a76\u751f\", \"\u547d\", \"\u8d77\u6e90\"]\u3002\u8fd9\u663e\u7136\u662f\u4e0d\u5408\u7406\u7684, \u5408\u7406\u7684\u5206\u8bcd\u7ed3\u679c\u5e94\u8be5\u662f [\"\u7814\u7a76\", \"\u751f\u547d\", \"\u8d77\u6e90\"]\u3002</p> <p>\u867d\u7136\u76f4\u63a5\u4e3e\u53cd\u9762\u7684\u4f8b\u5b50\u4e0d\u592a\u597d, \u4f46\u8fd9\u662f \u6b63\u5411\u6700\u957f\u5339\u914d \u4e2d\u5b58\u5728\u7684\u95ee\u9898\u3002\u5982\u679c\u662f \u82f1\u6587\u8bcd\u8bed, \u5728\u4f7f\u7528 PMI \u7b56\u7565\u7684\u60c5\u51b5\u4e0b, \u95ee\u9898\u4e0d\u662f\u5f88\u5927\u3002\u4f46\u662f\u5bf9\u4e8e \u4e2d\u6587\u7247\u6bb5 \u6765\u8bf4, \u5c31\u4f1a\u6709\u5f88\u5927\u95ee\u9898\u4e86\u3002\u56e0\u6b64, \u5728 BERT \u6a21\u578b\u4e2d, \u4e2d\u6587\u90fd\u662f\u5355\u5b57\u6210 subword, \u76f4\u63a5\u5207\u6210\u6700\u5c0f\u9897\u7c92\u3002</p>"},{"location":"tokenizer/tokenizer%E5%85%A5%E9%97%A8/#unigram","title":"\u4e03\u3001Unigram \u5206\u8bcd\u7b97\u6cd5","text":"<p>unigram \u5206\u8bcd\u65b9\u5f0f\u5c5e\u4e8e n-gram \u6982\u7387\u8def\u5f84 \u5206\u8bcd\u65b9\u5f0f\u7684\u4e00\u79cd, \u4e2d\u6587\u540d\u79f0\u662f \u4e00\u5143\u5206\u8bcd\u3002\u5728\u4e2d\u6587\u5206\u8bcd\u4e2d, \u6bd4\u8f83\u5e38\u89c1\u7684\u662f \u4e8c\u5143\u5206\u8bcd (bigram), \u6bd4\u65b9\u8bf4 HanLP V1 \u4e2d\u9ed8\u8ba4\u7684\u5206\u8bcd\u65b9\u5f0f\u5c31\u662f\u8fd9\u79cd\u3002</p> <p>n-gram \u7684\u672c\u8d28\u5c31\u662f \u6807\u51c6\u8bed\u8a00\u6a21\u578b \u7684\u7b80\u5316\u3002\u800c unigram \u662f\u6700\u5f3a\u7684\u5047\u8bbe, \u5373\u6bcf\u4e00\u4e2a\u8bcd\u8bed\u7684\u6982\u7387\u662f\u5b8c\u5168\u72ec\u7acb\u7684, \u548c\u4e4b\u524d\u7684\u6587\u672c\u6ca1\u6709\u5173\u7cfb\u7684\u3002\u90a3\u4e48, \u6211\u4eec\u53ea\u8981\u7edf\u8ba1\u51fa\u6bcf\u4e00\u4e2a\u8bcd\u8bed\u5728\u8bed\u6599\u5e93\u4e2d\u51fa\u73b0\u7684\u6982\u7387 (\u8bcd\u9891 \u9664\u4ee5 \u603b\u8bcd\u9891), \u5c31\u53ef\u4ee5\u4f30\u7b97\u51fa\u4e00\u4e2a\u53e5\u5b50\u4e00\u79cd\u5207\u5206\u65b9\u5f0f\u7684\u6982\u7387\u3002\u63a5\u4e0b\u6765, \u6211\u4eec\u904d\u5386\u4e00\u4e2a\u53e5\u5b50\u6240\u6709\u53ef\u80fd\u7684\u5207\u5206\u65b9\u5f0f, \u627e\u5230\u6982\u7387\u6700\u5927\u7684\u90a3\u4e00\u79cd\u65b9\u5f0f, \u4f5c\u4e3a\u5206\u8bcd\u7ed3\u679c\u3002\u4e00\u4e2a\u4e00\u4e2a\u904d\u5386\u7684\u6210\u672c\u592a\u9ad8\u4e86, \u4e00\u822c\u4f7f\u7528 \u7ef4\u7279\u6bd4\u7b97\u6cd5\u3002</p> <p>\u5bf9\u6b64\u4e0d\u4e86\u89e3\u7684\u53ef\u4ee5\u53bb\u7f51\u4e0a\u641c\u7d22\u76f8\u5173\u7684\u8d44\u6599, \u786e\u4fdd\u7406\u89e3\u4e0a\u9762\u7684\u5185\u5bb9\u3002\u90a3\u4e48\u5e94\u8be5\u5982\u4f55\u6839\u636e\u8bed\u6599\u5e93\u6765\u751f\u6210\u8bcd\u5178\u5462? \u76ee\u524d\u4e3b\u6d41\u7684\u662f\u7528 Subword Regularization \u8bba\u6587\u63d0\u51fa\u7684\u65b9\u6848:</p> <p>\u7b2c\u4e00\u6b65, \u521d\u59cb\u5316 subword \u6982\u7387\u8bcd\u5178: \u5bf9\u4e8e\u6bcf\u4e00\u4e2a word, \u7edf\u8ba1\u6240\u6709\u53ef\u80fd\u7684 subword, \u4ee5\u53ca\u5728 \u8bed\u6599\u5e93 \u79cd\u51fa\u73b0\u7684\u9891\u6570, \u7136\u540e\u4fdd\u7559\u9891\u6570\u6700\u9ad8\u7684   \u4e2a, \u8f6c\u5316\u6210\u4fe1\u606f\u91cf, \u6784\u6210\u8bcd\u5178\u3002</p> <p>\u4e3e\u4f8b\u6765\u8bf4: \"good\" \u4e00\u8bcd\u4e00\u5171\u6709 9 \u79cd\u53ef\u80fd\u7684 subword: \"g\", \"o\", \"d\", \"go\", \"oo\", \"od\", \"goo\", \"ood\" \u548c \"good\" (\u4e00\u822c\u8fd8\u4f1a\u9650\u5236 subword \u7684\u957f\u5ea6, \u8fd9\u91cc\u6ca1\u6709\u4f53\u73b0)\u3002\u6bcf\u4e00\u4e2a word \u90fd\u8fd9\u6837\u5904\u7406, \u7136\u540e\u7edf\u8ba1\u9891\u6570, \u53bb\u9664\u4f4e\u9891\u7684, \u9664\u4ee5 \u603b\u9891\u6570 \u8f6c\u5316\u6210 \u6982\u7387, \u518d\u53d6 \u8d1f\u5bf9\u6570 \u8f6c\u5316\u6210 \u4fe1\u606f\u91cf\u3002</p> <p>\u73b0\u5728, \u6211\u4eec\u53ef\u4ee5\u7528 subword \u6982\u7387\u8bcd\u5178 \u5bf9 word \u8fdb\u884c\u5206\u8bcd, \u540c\u65f6\u53ef\u4ee5\u5f97\u5230\u5206\u8bcd\u65b9\u5f0f\u7684 \u4fe1\u606f\u91cf\u3002\u90a3\u4e48, \u6211\u4eec\u53ef\u4ee5\u7528 subword \u6982\u7387\u8bcd\u5178 \u5bf9\u8bed\u6599\u5e93\u4e2d\u6240\u6709\u7684 word \u8fdb\u884c\u5206\u8bcd, \u7136\u540e\u5c06\u5f97\u5230\u7684 \u4fe1\u606f\u91cf \u6c42\u548c, \u8bb0\u4f5c\u5f53\u524d subword \u6982\u7387\u8bcd\u5178 \u7684 likelihood \u503c\u3002</p> <p>\u7b2c\u4e8c\u6b65, \u5bf9\u4e8e subword \u6982\u7387\u8bcd\u5178 \u4e2d\u7684\u6bcf\u4e00\u4e2a subword, \u6211\u4eec\u8ba1\u7b97\u5728\u53bb\u9664\u5b83\u7684\u60c5\u51b5\u4e0b\u7684 likelihood \u503c, \u8bb0\u4f5c loss \u503c\u3002\u8fd9\u6837, \u6bcf\u4e00\u4e2a subword \u90fd\u6709\u4e00\u4e2a loss \u503c, loss \u503c\u8d8a\u5c0f\u8868\u793a\u5728\u5206\u8bcd\u8fc7\u7a0b\u4e2d\u91cd\u8981\u7a0b\u5ea6\u8d8a\u9ad8\u3002\u7136\u540e\u53ea\u4fdd\u7559 subword \u6982\u7387\u8bcd\u5178 \u4e2d loss \u503c\u6700\u4f4e\u7684   subword, \u5176\u5b83\u90fd\u53bb\u9664\u6389\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f, \u4e3a\u4e86\u907f\u514d OOV \u7684\u95ee\u9898, \u6240\u6709\u5355\u4e2a\u5b57\u7b26\u7684 subword \u90fd\u662f\u4fdd\u7559\u7684\u3002</p> <p>\u7b2c\u4e09\u6b65, \u4e00\u76f4\u91cd\u590d \u7b2c\u4e8c\u6b65 \u7684\u64cd\u4f5c, \u76f4\u5230 subword \u6982\u7387\u8bcd\u5178 \u7684\u5927\u5c0f\u548c\u9884\u5148\u8bbe\u7f6e\u7684 \u8bcd\u8868 \u5927\u5c0f\u4e00\u81f4\u5373\u53ef\u3002</p> <p>\u6574\u4f53\u4e0a\u7684\u65b9\u6848\u5c31\u662f\u8fd9\u6837, \u8fd9\u4e2a\u7b97\u6cd5\u5f00\u6e90\u5728 sentencepiece \u9879\u76ee\u4e2d\u3002</p>"},{"location":"tokenizer/tokenizer%E5%85%A5%E9%97%A8/#_5","title":"\u516b\u3001\u968f\u673a\u5206\u8bcd","text":"<p>\u6211\u4eec\u77e5\u9053, \u5bf9\u4e8e \u6587\u672c\u751f\u6210 \u4efb\u52a1\u6765\u8bf4, \u4e0d\u80fd\u5b8c\u5168\u6309\u7167 \u6982\u7387\u6700\u9ad8 \u7684\u65b9\u5f0f\u6765\u751f\u6210, \u800c\u53ea\u8981\u662f\u5728\u5408\u7406\u533a\u95f4\u5185\u7684\u90fd\u53ef\u4ee5\u3002\u540c\u7406, \u5bf9\u4e8e\u5206\u8bcd\u6765\u8bf4\u4e5f\u662f\u7c7b\u4f3c: \u5206\u8bcd\u65b9\u5f0f\u9700\u8981\u4e00\u5b9a\u7684 \"\u968f\u673a\u6027\"!</p> <p>\u4e3e\u4f8b\u6765\u8bf4, \u5982\u679c\u8bcd\u8868\u4e2d\u6709 \"\u767d\u4e91\", \"\u673a\u573a\", \"\u767d\u4e91\u673a\u573a\" \u7b49\u8bcd\u8bed\u3002\u5728\u5206\u8bcd\u65f6, \"\u5e7f\u5dde\u7684\u767d\u4e91\u673a\u573a\" \u4f1a\u88ab \u56fa\u5b9a \u7684\u5206\u6210: [\"\u5e7f\u5dde\", \"\u7684\", \"\u767d\u4e91\u673a\u573a\"]\u3002\u90a3\u4e48\u4f1a\u51fa\u4ec0\u4e48\u6837\u7684\u95ee\u9898\u5462?</p> <p>\u5bf9\u4e8e \u7eed\u5199 \u4efb\u52a1\u6765\u8bf4, \u5982\u679c\u7528\u6237\u8f93\u5165\u7684\u662f \"\u5e7f\u5dde\u7684\u767d\u4e91\", \u867d\u7136 \"\u673a\u573a\" \u4e00\u8bcd\u5728\u8bcd\u8868\u4e2d, \u4f46\u662f\u6a21\u578b\u4e0d\u4f1a\u5728\u540e\u9762\u63a5 \"\u673a\u573a\" \u8fd9\u6837\u7684\u8bcd\u8bed, \u800c\u4f1a\u63a5\u5bf9 \u4e91\u6735 \u7684\u63cf\u8ff0\u5185\u5bb9, \u6bd4\u65b9\u8bf4 \"\u5f88\u767d\" \u7b49\u7b49\u3002\u8fd9\u662f\u4e3a\u4ec0\u4e48\u5462?</p> <p>\u56e0\u4e3a\u5728\u8bad\u7ec3\u6a21\u578b\u65f6, \"\u767d\u4e91\u673a\u573a\" \u662f\u4e00\u4e2a\u56fa\u5b9a\u7684 token, \u4e0d\u4f1a\u88ab\u5206\u5272\u5f00\u3002\u4e5f\u5c31\u662f\u8bf4, \"\u767d\u4e91\" \u540e\u9762\u4e0d\u4f1a\u51fa\u73b0 \"\u673a\u573a\" \u8fd9\u4e2a token\u3002\u90a3\u4e48\u5e94\u8be5\u600e\u4e48\u89e3\u51b3\u5462? \u7b54\u6848\u662f \u968f\u673a\u5206\u8bcd, \u5373\u7ed9\u4e88\u4e00\u5b9a\u7684\u6982\u7387\u5206\u6210 \"\u767d\u4e91\" \u548c \"\u673a\u573a\" \u4e24\u4e2a token, \u8ba9\u6a21\u578b\u77e5\u9053 \"\u767d\u4e91\" \u540e\u9762\u662f\u6709\u53ef\u80fd\u51fa\u73b0 \"\u673a\u573a\" \u8fd9\u4e2a token \u7684\u3002</p> <p>\u6700\u65e9\u63d0\u51fa\u8fd9\u4e00\u60f3\u6cd5\u7684\u662f Subword Regularization \u8fd9\u7bc7\u8bba\u6587, \u4e5f\u5c31\u662f\u5f00\u6e90 sentencepiece \u7684\u5de5\u4f5c\u3002\u5176\u5c06\u4e0a\u8ff0\u65b9\u5f0f\u79f0\u4e3a subword sampling\u3002</p> <p>\u5bf9\u4e8e\u7b2c\u4e03\u90e8\u5206\u7684 unigram \u5206\u8bcd\u7b97\u6cd5, \u6211\u4eec\u53ef\u4ee5\u91c7\u7528 n-best \u7ef4\u7279\u6bd4\u7b97\u6cd5, \u627e\u51fa\u6700\u4f73\u7684 n \u4e2a\u5206\u8bcd\u8def\u5f84, \u5e76\u8ba1\u7b97\u51fa\u8def\u5f84\u7684\u6982\u7387\u5206\u6570\u3002\u7136\u540e\u6839\u636e\u8def\u5f84\u7684\u6982\u7387\u5206\u6570\u8fdb\u884c \u91c7\u6837, \u9009\u62e9\u5176\u4e2d\u7684\u4e00\u4e2a\u5373\u53ef\u3002</p> <p>\u800c\u5bf9\u4e8e BPE \u7b97\u6cd5, \u6709\u4eba\u63d0\u51fa BPE-Dropout \u65b9\u6848, \u5373\u5728\u5206\u8bcd\u65f6, \u6709   \u7684\u6982\u7387\u4e0d\u8fdb\u884c\u5408\u5e76\u3002</p> <p>\u6cbf\u7528\u7b2c\u4e94\u90e8\u5206\u7684\u4f8b\u5b50, \u5bf9\u4e8e \"x x x\" \u6765\u8bf4, \u73b0\u5728\u8981\u5c06 \"x x\" \u5408\u5e76\u6210 \"xx\"\u3002\u6309\u7167\u539f\u6765\u7684\u65b9\u6848, \u5408\u5e76\u7ed3\u679c\u5e94\u8be5\u662f \"xx x\"\u3002\u800c\u6309\u7167\u73b0\u5728\u7684\u65b9\u6848, \u8fd8\u6709\u53ef\u80fd\u5206\u6210 \"x xx\" (\u7b2c\u4e00\u6b21\u5408\u5e76\u65f6\u89e6\u53d1 dropout, \u6ca1\u6709\u8fdb\u884c\u5408\u5e76); \u4e5f\u6709\u53ef\u80fd\u4fdd\u6301\u539f\u72b6, \u8fd8\u662f x x x (\u4e24\u6b21\u5408\u5e76\u90fd\u89e6\u53d1 dropout)\u3002</p> <p>\u4e2a\u4eba\u89c2\u70b9, \u8fd9\u79cd\u968f\u673a\u5206\u8bcd\u65b9\u5f0f\u5728 LLM \u6a21\u578b\u8bad\u7ec3 \u65f6\u8d77\u7684\u4f5c\u7528\u6bd4\u5728 LLM \u6a21\u578b\u63a8\u7406 \u65f6\u8981\u5927, \u53ef\u4ee5\u589e\u52a0\u6a21\u578b\u7684\u9c81\u68d2\u6027, \u662f\u4e00\u79cd\u975e\u5e38\u597d\u7684 \u9884\u8bad\u7ec3 \u7b56\u7565\u3002</p>"},{"location":"tokenizer/tokenizer%E5%85%A5%E9%97%A8/#_6","title":"\u4e5d\u3001\u603b\u7ed3","text":"<p>\u81f3\u6b64, \u5927\u8bed\u8a00\u6a21\u578b\u5e38\u7528\u7684\u5206\u8bcd\u65b9\u5f0f\u90fd\u4ecb\u7ecd\u5b8c\u6210\u4e86\u3002\u8fd9\u5c5e\u4e8e\u975e\u5e38\u5b8f\u89c2\u7684\u4ecb\u7ecd, \u5bf9\u4e8e\u7ec6\u8282\u7684\u4ecb\u7ecd\u5f88\u5c11\u3002\u4e3b\u8981\u4f53\u73b0\u5728\u4e24\u4e2a\u65b9\u9762\u3002</p> <p>\u9996\u5148, \u4e0d\u540c\u7684\u6a21\u578b\u5728\u5206\u8bcd\u65f6\u4f1a\u6dfb\u52a0\u4e0d\u540c\u7684\u6807\u8bb0\u7b26\u53f7:</p> <p>GPT-2 \u5728\u5c06 word \u7f16\u7801\u6210\u5b57\u8282\u6d41\u540e, \u4f1a\u8f6c\u4e49\u56de\u5b57\u7b26\u4e32, \u540c\u65f6\u786e\u4fdd\u4e0d\u4f1a\u8f6c\u4e49\u6210 \u7a7a\u767d\u5b57\u7b26 sentencepiece \u4e2d, \u82f1\u6587\u8bcd\u8bed\u7684\u7a7a\u683c\u6dfb\u52a0\u5728\u5f00\u5934, \u5e76\u8f6c\u4e49\u6210 \"\\u2581\" BPE \u539f\u59cb\u8bba\u6587\u4e2d, \u82f1\u6587\u8bcd\u8bed\u7684\u7a7a\u683c\u6dfb\u52a0\u5728\u7ed3\u5c3e, \u5e76\u8f6c\u4e49\u6210 \"\" bert \u5f00\u6e90\u7684 wordpiece \u4e2d, \u975e\u8d77\u59cb subword \u90fd\u4f1a\u6dfb\u52a0 \"##\" \u6807\u8bc6, \u95f4\u63a5\u7684\u5c06\u7a7a\u683c\u6dfb\u52a0\u5230 word \u4e2d \u5176\u6b21, \u5b9e\u73b0\u7684\u7ec6\u8282\u4e0d\u540c\u3002\u5982\u679c\u5b8c\u5168\u6309\u7167\u4e0a\u9762\u6240\u8bf4\u7684\u6765, \u8fd0\u884c\u6548\u7387\u4f1a\u975e\u5e38\u4f4e, \u9700\u8981\u4e00\u4e9b\u5b57\u7b26\u4e32\u641c\u7d22\u7b97\u6cd5\u8fdb\u884c\u4f18\u5316\u3002</p> <p>\u603b\u4e4b, \u6574\u4f53\u7684\u5206\u8bcd\u6846\u67b6\u5c31\u662f\u8fd9\u6837\u3002\u5982\u679c\u4e4b\u540e\u6709\u65f6\u95f4, \u53ef\u4ee5\u81ea\u5df1\u5b9e\u73b0\u4e00\u4e2a\u7248\u672c\u3002</p> <p>\u6700\u540e\u804a\u4e00\u70b9\u9898\u5916\u8bdd, \u5173\u4e8e\u4e2d\u6587\u8bed\u6599\u7684\u4e8b\u60c5\u3002</p> <p>\u5982\u679c\u4f60\u5173\u6ce8 LLM \u5f00\u6e90\u9879\u76ee, \u5e94\u8be5\u77e5\u9053\u54c8\u5de5\u5927\u5d14\u4e00\u9e23\u5927\u4f6c\u7684 Chinese-LLaMA-Alpaca \u9879\u76ee\u3002\u8fd9\u4e2a\u9879\u76ee\u662f\u9488\u5bf9 LLaMA \u6a21\u578b\u8fdb\u884c\u4e2d\u6587\u5fae\u8c03\u7684, \u5176\u4e2d\u505a\u4e86\u4e00\u4ef6\u4e8b\u60c5, \u90a3\u5c31\u662f \u4e2d\u6587\u8bcd\u8868\u6269\u5145\u3002</p> <p>\u8bfb\u8fc7 LLaMA \u8bba\u6587\u5e94\u8be5\u77e5\u9053, \u5176\u4f7f\u7528\u7684\u662f sentencepiece \u4e2d\u7684 BPE \u7b97\u6cd5\u8bad\u7ec3\u7684, \u540c\u65f6\u5c06 byte_fallback \u53c2\u6570\u8bbe\u7f6e\u6210 True, \u5177\u4f53\u53ef\u4ee5\u53c2\u8003 issue 621 \u548c issue 1218\u3002</p> <p>\u8bad\u7ec3\u5b8c\u6210\u540e, \u8bcd\u8868\u4e2d\u5305\u542b 32,000 \u4e2a\u8bcd\u8bed\u3002\u5176\u4e2d \u4e2d\u6587\u8bcd\u6c47 \u5360\u6bd4\u5f88\u5c11, \u751a\u81f3\u8fde \"\u6c14\" \u8fd9\u4e2a\u5b57\u90fd\u4e0d\u5728\u8bcd\u8868\u4e2d\u3002\u6b64\u65f6, \u4f60\u6216\u8bb8\u4f1a\u597d\u5947, \u600e\u4e48\u53ef\u80fd\u5462? \u5c31\u7b97\u8bad\u7ec3\u8bed\u6599\u4e2d\u7684\u4e2d\u6587\u5f88\u5c11, 2000 \u4e2a\u5e38\u7528\u5b57\u5e94\u8be5\u662f\u5305\u542b\u7684\u554a\u3002</p> <p>\u540e\u6765, \u6211\u53d1\u73b0 sentencepiece \u7684\u8bad\u7ec3\u53c2\u6570\u4e2d\u6709\u4e00\u4e2a\u662f character_coverage, \u5176\u542b\u4e49\u662f\u968f\u673a\u5220\u9664\u8bed\u6599\u5e93\u4e2d\u4e00\u5b9a\u6bd4\u4f8b\u7684\u5b57\u7b26, \u5177\u4f53\u53ef\u4ee5\u53c2\u8003 issue 412\u3002\u800c\u6ca1\u6709\u51fa\u73b0\u5728\u8bcd\u8868\u4e2d\u7684\u6c49\u5b57\u5927\u6982\u7387\u662f\u88ab\u5220\u9664\u4e86\u3002\u5176\u4e2d, \u9ed8\u8ba4\u7684\u5220\u9664\u6bd4\u4f8b\u662f\u4e07\u5206\u4e4b\u4e94\u3002\u4e0d\u77e5\u9053 LLaMA \u5728\u8bad\u7ec3\u65f6\u6709\u6ca1\u6709\u8c03\u5927\u3002\u6240\u4ee5\u4e2d\u6587\u8bed\u6599\u5360\u6bd4\u662f\u6709\u591a\u4f4e\u554a\u3002</p>"},{"location":"tokenizer/tokenizer%E5%85%A5%E9%97%A8/#_7","title":"\u5341\u3001\u5f15\u7528","text":"<p>\u8bba\u6587:</p> <p>Neural Machine Translation of Rare Words with Subword Units Google\u2019s Neural Machine Translation System: Bridging the Gap between Human and Machine Translation Subword Regularization: Improving Neural Network Translation Models with Multiple Subword Candidates BPE-Dropout: Simple and Effective Subword Regularization \u4ee3\u7801\u548c\u5f00\u6e90\u9879\u76ee:</p> <p>OpenAI \u5f00\u6e90\u7684 tiktoken BPE \u8bba\u6587 \u5f00\u6e90\u7684 subword-nmt Subword Regularization \u8bba\u6587 \u5f00\u6e90\u7684 sentencepiece HuggingFace tokenizers HuggingFace GPT-1 \u5206\u8bcd\u6e90\u7801 HuggingFace GPT-2 \u5206\u8bcd\u6e90\u7801 \u535a\u5ba2\u548c\u6587\u6863:</p> <p>HuggingFace Transformers \u5206\u8bcd\u4ecb\u7ecd\u6587\u6863 HuggingFace NLP Course \u5206\u8bcd\u4ecb\u7ecd\u6587\u6863 \u5927\u8bcd\u8868\u8bed\u8a00\u6a21\u578b\u5728\u7eed\u5199\u4efb\u52a1\u4e0a\u7684\u4e00\u4e2a\u95ee\u9898\u53ca\u5bf9\u7b56 BytePiece\uff1a\u66f4\u7eaf\u7cb9\u3001\u66f4\u9ad8\u538b\u7f29\u7387\u7684Tokenizer \u968f\u673a\u5206\u8bcd\u6d45\u63a2\uff1a\u4eceViterbi Decoding\u5230Viterbi Sampling \u5176\u5b83:</p> <p>Languages of the World</p>"},{"location":"tokenizer/tokenizer%E5%85%A5%E9%97%A8/#_8","title":"\u53c2\u8003","text":"<ol> <li>LLM \u5206\u8bcd\u7b97\u6cd5 (BPE, WordPiece, Unigram) \u7b80\u4ecb</li> </ol>"},{"location":"tokenizer/tokenizer%E5%AE%9E%E7%8E%B0/","title":"Tokenizer \u5b9e\u73b0","text":"<p>tokenizer\u8d1f\u8d23\u51c6\u5907\u8f93\u5165\u4ee5\u4f9b\u6a21\u578b\u4f7f\u7528\u3002huggingface \u7684 <code>Tokenizer</code>\u5e93\u5305\u542b\u6240\u6709\u6a21\u578b\u7684tokenizer\u3002\u5927\u591a\u6570tokenizer\u90fd\u6709\u4e24\u79cd\u7248\u672c\uff1a\u4e00\u4e2a\u662f\u5b8c\u5168\u7684 Python \u5b9e\u73b0\uff0c\u53e6\u4e00\u4e2a\u662f\u57fa\u4e8e Rust \u5e93 \ud83e\udd17 Tokenizers \u7684\u201cFast\u201d\u5b9e\u73b0\u3002\u201cFast\u201d \u5b9e\u73b0\u5141\u8bb8\uff1a</p> <ul> <li>\u5728\u6279\u91cf\u5206\u8bcd\u65f6\u663e\u8457\u63d0\u901f</li> <li>\u5728\u539f\u59cb\u5b57\u7b26\u4e32\uff08\u5b57\u7b26\u548c\u5355\u8bcd\uff09\u548ctoken\u7a7a\u95f4\u4e4b\u95f4\u8fdb\u884c\u6620\u5c04\u7684\u5176\u4ed6\u65b9\u6cd5\uff08\u4f8b\u5982\uff0c\u83b7\u53d6\u5305\u542b\u7ed9\u5b9a\u5b57\u7b26\u7684token\u7684\u7d22\u5f15\u6216\u4e0e\u7ed9\u5b9atoken\u5bf9\u5e94\u7684\u5b57\u7b26\u8303\u56f4\uff09\u3002</li> </ul> <p>\u57fa\u7c7b [<code>PreTrainedTokenizer</code>] \u548c [<code>PreTrainedTokenizerFast</code>] \u5b9e\u73b0\u4e86\u5728\u6a21\u578b\u8f93\u5165\u4e2d\u7f16\u7801\u5b57\u7b26\u4e32\u8f93\u5165\u7684\u5e38\u7528\u65b9\u6cd5\uff08\u89c1\u4e0b\u6587\uff09\uff0c\u5e76\u4ece\u672c\u5730\u6587\u4ef6\u6216\u76ee\u5f55\u6216\u4ece\u5e93\u63d0\u4f9b\u7684\u9884\u8bad\u7ec3\u7684 <code>tokenizer</code> \u5b9e\u4f8b\u5316/\u4fdd\u5b58 python \u548c\u201cFast\u201d tokenizer\u3002\u5b83\u4eec\u90fd\u4f9d\u8d56\u4e8e\u5305\u542b\u5e38\u7528\u65b9\u6cd5\u7684 <code>PreTrainedTokenizerBase</code> \u548c <code>SpecialTokensMixin</code>\u3002</p> <p>\u56e0\u6b64\uff0c<code>PreTrainedTokenizer</code> \u548c <code>PreTrainedTokenizerFast</code> \u5b9e\u73b0\u4e86\u4f7f\u7528\u6240\u6709tokenizers\u7684\u4e3b\u8981\u65b9\u6cd5\uff1a</p> <ul> <li>\u5206\u8bcd\uff08\u5c06\u5b57\u7b26\u4e32\u62c6\u5206\u4e3a\u5b50\u8bcd\u6807\u8bb0\u5b57\u7b26\u4e32\uff09\uff0c\u5c06tokens\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3aid\u5e76\u8f6c\u6362\u56de\u6765\uff0c\u4ee5\u53ca\u7f16\u7801/\u89e3\u7801\uff08\u5373\u6807\u8bb0\u5316\u5e76\u8f6c\u6362\u4e3a\u6574\u6570\uff09\u3002</li> <li>\u4ee5\u72ec\u7acb\u4e8e\u5e95\u5c42\u7ed3\u6784\uff08BPE\u3001SentencePiece .....\uff09\u7684\u65b9\u5f0f\u5411\u8bcd\u6c47\u8868\u4e2d\u6dfb\u52a0\u65b0 tokens\u3002</li> <li>\u7ba1\u7406\u7279\u6b8atokens\uff08\u5982mask\u3001\u53e5\u9996\u7b49\uff09\uff1a\u6dfb\u52a0\u5b83\u4eec\uff0c\u5c06\u5b83\u4eec\u5206\u914d\u7ed9tokenizer\u4e2d\u7684\u5c5e\u6027\u4ee5\u4fbf\u4e8e\u8bbf\u95ee\uff0c\u5e76\u786e\u4fdd\u5b83\u4eec\u5728\u6807\u8bb0\u8fc7\u7a0b\u4e2d\u4e0d\u4f1a\u88ab\u5206\u5272\u3002</li> </ul> <p>BatchEncoding \u5305\u542b PreTrainedTokenizerBase \u7684\u7f16\u7801\u65b9\u6cd5\uff08<code>__call__</code>\u3001<code>encode_plus</code> \u548c <code>batch_encode_plus</code>\uff09\u7684\u8f93\u51fa\uff0c\u5e76\u4e14\u662f\u4ece Python \u5b57\u5178\u6d3e\u751f\u7684\u3002\u5f53tokenizer\u662f\u7eaf Python tokenizer\u65f6\uff0c\u6b64\u7c7b\u7684\u884c\u4e3a\u5c31\u50cf\u6807\u51c6\u7684 Python \u5b57\u5178\u4e00\u6837\uff0c\u5e76\u4fdd\u5b58\u8fd9\u4e9b\u65b9\u6cd5\u8ba1\u7b97\u7684\u5404\u79cd\u6a21\u578b\u8f93\u5165\uff08<code>input_ids</code>\u3001<code>attention_mask</code> \u7b49\uff09\u3002\u5f53\u5206\u8bcd\u5668\u662f\u201cFast\u201d\u5206\u8bcd\u5668\u65f6\uff08\u5373\u7531 HuggingFace \u7684 tokenizers \u5e93\u652f\u6301\uff09\uff0c\u6b64\u7c7b\u8fd8\u63d0\u4f9b\u4e86\u51e0\u79cd\u9ad8\u7ea7\u5bf9\u9f50\u65b9\u6cd5\uff0c\u53ef\u7528\u4e8e\u5728\u539f\u59cb\u5b57\u7b26\u4e32\uff08\u5b57\u7b26\u548c\u5355\u8bcd\uff09\u4e0etoken\u7a7a\u95f4\u4e4b\u95f4\u8fdb\u884c\u6620\u5c04\uff08\u4f8b\u5982\uff0c\u83b7\u53d6\u5305\u542b\u7ed9\u5b9a\u5b57\u7b26\u7684token\u7684\u7d22\u5f15\u6216\u4e0e\u7ed9\u5b9atoken\u5bf9\u5e94\u7684\u5b57\u7b26\u8303\u56f4\uff09\u3002</p>"},{"location":"tokenizer/tokenizer%E5%AE%9E%E7%8E%B0/#_1","title":"\u53c2\u8003","text":"<ol> <li>https://huggingface.co/docs/transformers/v4.41.1/zh/main_classes/tokenizer</li> </ol>"},{"location":"tokenizer/utf8_unicode/","title":"\u5b57\u7b26\u7f16\u7801","text":"<p>Unicode \u7f16\u7801\u4e0e UTF-8 \u7f16\u7801\u5747\u662f\u7531 Unicode \u534f\u4f1a\uff08 The Unicode Consortium\uff09\u5236\u5b9a\u7684\u5bf9\u5404\u56fd\u6587\u5b57\u3001\u7b26\u53f7\u8fdb\u884c\u7edf\u4e00\u7f16\u7801\u7684\u7f16\u7801\u4f53\u7cfb\u3002</p>"},{"location":"tokenizer/utf8_unicode/#unicode","title":"unicode \u7f16\u7801","text":"<p>\u4e3a\u4e86\u65b9\u4fbf\u5168\u7403\u8303\u56f4\u5185\u7684\u6570\u636e\u4ea4\u6362\uff0cUnicode \u534f\u4f1a\u6700\u5148\u63a8\u51fa\u4e86Unicode \u7f16\u7801\uff0c\u5b83\u91c7\u7528 \u4e24\u4e2a\u5b57\u8282 \u6765\u8868\u793a\u4e00\u4e2a\u5b57\u7b26\uff0c\u662f\u4e00\u79cd 16 \u4f4d\u7f16\u7801\u65b9\u5f0f\u3002\u8fd9\u79cd\u7f16\u7801\u65b9\u5f0f\u4e0d\u53ef\u907f\u514d\u5730\u5b58\u5728\u517c\u5bb9\u6027\u95ee\u9898\uff1a\u76ee\u524d\u7f51\u7edc\u8bbe\u5907\u548c\u534f\u8bae\u90fd\u662f\u9488\u5bf9 \u5b57\u8282 \u8fdb\u884c\u5904\u7406\uff0c\u5f53\u7f51\u7edc\u8bbe\u5907\u63a5\u6536\u5230\u4e00\u4e2aUnicode \u65f6\uff0c\u4f1a\u81ea\u52a8\u5c06\u5176\u5207\u5206\u4e3a\u4e24\u4e2a\u5b57\u8282\uff0c\u5e76\u68c0\u67e5\u5176\u4e2d\u662f\u5426\u542b\u6709\u63a7\u5236\u7801\uff0c\u8fd9\u5c06\u4f1a\u4f7f Unicode \u6570\u636e\u53d8\u5f97\u6b8b\u7f3a\u4e0d\u5168\uff0c\u9020\u6210\u6570\u636e\u635f\u5931\u3002</p>"},{"location":"tokenizer/utf8_unicode/#utf8","title":"utf8\u7f16\u7801","text":""},{"location":"tokenizer/utf8_unicode/#utf8_1","title":"utf8\u80cc\u666f","text":"<p>\u4e3a\u4e86\u89e3\u51b3\u4e0a\u8ff0 Unicode \u7f16\u7801\u517c\u5bb9\u6027\u8fd9\u4e00\u95ee\u9898\uff0cUnicode \u534f\u4f1a\u53c8\u5236\u5b9a\u4e86 UTF-8 \u7f16\u7801\uff0c\u5b83 \u91c7\u7528 \u53d8\u957f\u7684\u591a\u5b57\u8282\u4e32 \u6765\u8868\u793a\u5b57\u7b26\uff0c\u53ef\u4ee5\u8bf4\u662f Unicode \u7684 8 \u4f4d\u7f16\u7801\u65b9\u5f0f\u3002\u7531\u4e8e\u8fd9\u4e24\u79cd\u7f16\u7801\u65b9\u5f0f\u540c\u65f6\u5b58\u5728\uff0c\u800c\u4e14\u90fd\u6709\u7740\u5e7f\u6cdb\u7684\u5e94\u7528\uff0c\u5728\u5bf9\u4fe1\u606f\u8fdb\u884c\u5904\u7406\u65f6\uff0c\u6211\u4eec\u7ecf\u5e38\u9700\u8981\u5c06\u8fd9\u4e24\u79cd\u7f16\u7801\u76f8\u4e92\u8f6c\u6362\u3002</p>"},{"location":"tokenizer/utf8_unicode/#utf8_2","title":"utf8\u7f16\u7801\u539f\u5219","text":"<p>\u5728 UTF-8 \u7f16\u7801\u4e2d\uff0c\u6240\u6709\u7684\u5b57\u7b26\u5747\u4f7f\u7528 1 \u5230 6 \u4e2a\u5b57\u8282\u8fdb\u884c\u7f16\u7801\u3002\u5728\u53ea\u5305\u542b 1 \u4e2a\u5b57\u8282\u7684 UTF-8 \u7f16\u7801\u4e2d\uff0c\u5176\u6700\u9ad8\u4f4d\u7f6e\u4e3a 0\uff0c\u5176\u4f59\u7684 7 \u4e2a\u4e8c\u8fdb\u5236\u4f4d\u7528\u6765\u5bf9\u5b57\u7b26\u8fdb\u884c\u7f16\u7801\uff1b\u5728\u542b n\uff08 \\(1 &lt; n \\leq 6\\)\uff09\u4e2a\u5b57\u8282\u7684 UTF-8 \u7f16\u7801\u4e2d\uff0c\u5176\u7b2c\u4e00\u4e2a\u5b57\u8282\u7684\u524d n \u4f4d\u8d4b\u503c\u4e3a 1\uff0c\u7b2c n+1 \u4f4d\u8d4b\u503c\u4e3a 0\uff0c\u8be5\u5b57\u8282\u5269\u4f59\u7684\u5176\u5b83\u4e8c\u8fdb\u5236\u4f4d\u7528\u6765\u5bf9\u5b57\u7b26\u8fdb\u884c\u7f16\u7801\uff0c\u540e\u7eed\u5b57\u8282\u7684\u6700\u9ad8\u4f4d\u5747\u8d4b\u503c\u4e3a 1\uff0c\u6b21\u9ad8\u4f4d\u5747\u8d4b\u503c\u4e3a 0\uff0c\u6bcf\u4e2a\u5b57\u8282\u4e2d\u5269\u4f59\u7684 6 \u4e2a\u4e8c\u8fdb\u5236\u4f4d\u7528\u6765\u5bf9\u5b57\u7b26\u8fdb\u884c\u7f16\u7801\u3002</p> <p>\u4e00\u4e2a\u5b57\u7b26\u7684 UTF-8 \u7f16\u7801\u4e2d\u5305\u542b\u5b57\u8282\u4e2a\u6570\u7684\u591a\u5c11\u662f\u7531\u5176 Unicode \u7f16\u7801\u6240\u5904\u7684\u8303\u56f4\u6765\u51b3\u5b9a\u7684\uff0c\u5177\u4f53\u5982\u8868 1 \u6240\u793a\uff0c\u8be5\u8868\u4e2d\u7ed9\u51fa\u4e86\u4e0d\u540c\u8303\u56f4\u5185\u7684 Unicode \u5b57\u7b26\u5bf9\u5e94\u7684 UTF-8 \u7f16\u7801\u7684\u683c\u5f0f\uff0c\u5176\u4e2d\u5df2\u586b\u5165\u7684 1\u30010 \u6570\u636e\u8868\u793a\u7ea6\u5b9a\u7684\u6807\u8bb0\u4f4d\uff0cx \u8868\u793a\u5bf9\u5b57\u7b26\u7f16\u7801\u65f6\u53ef\u7528\u7684\u4e8c\u8fdb\u5236\u4f4d\u3002\u5c06 Unicode \u7f16\u7801\u7684\u4e8c\u8fdb\u5236\u4f4d\u6309\u7531\u4f4e\u5230\u9ad8\u7684\u6b21\u5e8f\u653e\u5165 x \u8868\u793a\u7684\u7a7a\u4f4d\u4e2d\u5373\u53ef\u5f97\u5230\u5176\u6240\u5bf9\u5e94\u7684UTF-8 \u7f16\u7801\u3002</p> UTF-8 \u5b57\u8282\u6570\u76ee Unicode \u7f16\u7801(\u5341\u516d\u8fdb\u5236) UTF-8 \u7f16\u7801(\u4e8c\u8fdb\u5236) 1 U+0000 0000 - U+0000 007F 0xxxxxxx 2 U+0000 0080 - U+0000 07FF 110xxxxx 10xxxxxx 3 U+0000 0800 - U+0000 FFFF 1110xxxx 10xxxxxx 10xxxxxx 4 U+0001 0000 - U+001F FFFF 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx 5 U+0020 0000 - U+03FF FFFF 111110xx 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx 6 U+0400 0000 - U+7FFF FFFF 1111110x 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx"},{"location":"tokenizer/utf8_unicode/#_2","title":"\u4e2d\u6587\u6c49\u5b57\u7f16\u7801","text":""},{"location":"tutorials/blogs/basic/","title":"basic","text":"<p>\u57fa\u7840</p>"},{"location":"tutorials/blogs/engage/","title":"engage","text":"<p>engage</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/","title":"DeepSeek-R1\uff1a\u901a\u8fc7\u5f3a\u5316\u5b66\u4e60\u6fc0\u53d1LLM\u7684\u63a8\u7406\u80fd\u529b","text":"<p>DeepSeek AI research@deepseek.com</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#_1","title":"\u6458\u8981","text":"<p>\u6211\u4eec\u4ecb\u7ecd\u4e86\u6211\u4eec\u7684\u7b2c\u4e00\u4ee3\u63a8\u7406\u6a21\u578b DeepSeek-R1-Zero \u548c DeepSeek-R1\u3002DeepSeek-R1-Zero\u662f\u4e00\u4e2a\u901a\u8fc7\u5927\u89c4\u6a21\u5f3a\u5316\u5b66\u4e60\uff08RL\uff09\u8bad\u7ec3\u7684\u6a21\u578b\uff0c\u6ca1\u6709\u7ecf\u8fc7\u521d\u6b65\u7684\u76d1\u7763\u5fae\u8c03\uff08SFT\uff09\uff0c\u8868\u73b0\u51fa\u5353\u8d8a\u7684\u63a8\u7406\u80fd\u529b\u3002\u901a\u8fc7RL\uff0cDeepSeek-R1-Zero\u81ea\u7136\u5730\u51fa\u73b0\u4e86\u8bb8\u591a\u5f3a\u5927\u800c\u6709\u8da3\u7684\u63a8\u7406\u884c\u4e3a\u3002\u7136\u800c\uff0c\u5b83\u9047\u5230\u4e86\u53ef\u8bfb\u6027\u5dee\u548c\u8bed\u8a00\u6df7\u5408\u7b49\u6311\u6218\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\u5e76\u8fdb\u4e00\u6b65\u63d0\u9ad8\u63a8\u7406\u6027\u80fd\uff0c\u6211\u4eec\u5f15\u5165\u4e86DeepSeek-R1\uff0c\u5b83\u5728RL\u4e4b\u524d\u7ed3\u5408\u4e86\u591a\u9636\u6bb5\u8bad\u7ec3\u548c\u51b7\u542f\u52a8\u6570\u636e\u3002DeepSeek-R1\u5728\u63a8\u7406\u4efb\u52a1\u4e0a\u7684\u6027\u80fd\u4e0eOpenAI-o1-1217\u76f8\u5f53\u3002\u4e3a\u4e86\u652f\u6301\u7814\u7a76\u793e\u533a\uff0c\u6211\u4eec\u5f00\u6e90\u4e86DeepSeek-R1-Zero\u3001DeepSeek-R1\uff0c\u4ee5\u53ca\u57fa\u4e8eQwen\u548cLlama\u4eceDeepSeek-R2\u4e2d\u63d0\u53d6\u7684\u516d\u4e2a\u5bc6\u96c6\u6a21\u578b\uff081.5B\u30017B\u30018B\u300114B\u300132B\u300170B\uff09\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#1","title":"1 \u5f15\u8a00","text":"<p>\u8fd1\u5e74\u6765\uff0c\u5927\u578b\u8bed\u8a00\u6a21\u578b\uff08LLM\uff09\u6b63\u5728\u7ecf\u5386\u5feb\u901f\u8fed\u4ee3\u548c\u8fdb\u5316\uff08Anthropic\uff0c2024\uff1bGoogle\uff0c2024\uff0cOpenAI\uff0c2024a\uff09\uff0c\u9010\u6e10\u7f29\u5c0f\u4e86\u4e0e\u901a\u7528\u4eba\u5de5\u667a\u80fd\uff08AGI\uff09\u7684\u5dee\u8ddd\u3002</p> <p>\u6700\u8fd1\uff0cpost-training \u5df2\u6210\u4e3a\u5168\u9762\u8bad\u7ec3\u6d41\u7a0b\u7684\u91cd\u8981\u7ec4\u6210\u90e8\u5206\u3002\u5b83\u5df2\u88ab\u8bc1\u660e\u53ef\u4ee5\u63d0\u9ad8\u63a8\u7406\u4efb\u52a1\u7684\u51c6\u786e\u6027\uff0c\u4e0e\u793e\u4f1a\u4ef7\u503c\u89c2\u4fdd\u6301\u4e00\u81f4\uff0c\u5e76\u9002\u5e94\u7528\u6237\u504f\u597d\uff0c\u540c\u65f6\u4e0e\u9884\u8bad\u7ec3\u76f8\u6bd4\u9700\u8981\u76f8\u5bf9\u8f83\u5c11\u7684\u8ba1\u7b97\u8d44\u6e90\u3002\u5728\u63a8\u7406\u80fd\u529b\u65b9\u9762\uff0cOpenAI\u7684o1\uff08OpenAI\uff0c2024b\uff09\u7cfb\u5217\u6a21\u578b\u662f\u7b2c\u4e00\u4e2a\u901a\u8fc7\u589e\u52a0\u601d\u7ef4\u94fe\u63a8\u7406\u8fc7\u7a0b\u7684\u957f\u5ea6\u6765\u5f15\u5165\u63a8\u7406\u65f6\u95f4\u7f29\u653e\u7684\u6a21\u578b\u3002\u8fd9\u79cd\u65b9\u6cd5\u5728\u5404\u79cd\u63a8\u7406\u4efb\u52a1\u4e2d\u53d6\u5f97\u4e86\u91cd\u5927\u6539\u8fdb\uff0c\u5982\u6570\u5b66\u3001\u7f16\u7801\u548c\u79d1\u5b66\u63a8\u7406\u3002\u7136\u800c\uff0c\u6709\u6548\u6d4b\u8bd5\u65f6\u95f4\u7f29\u653e\u7684\u6311\u6218\u4ecd\u7136\u662f\u7814\u7a76\u754c\u7684\u4e00\u4e2a\u60ac\u800c\u672a\u51b3\u7684\u95ee\u9898\u3002\u4e4b\u524d\u7684\u51e0\u9879\u5de5\u4f5c\u63a2\u7d22\u4e86\u5404\u79cd\u65b9\u6cd5\uff0c\u5305\u62ec\u57fa\u4e8e\u8fc7\u7a0b\u7684\u5956\u52b1\u6a21\u578b\uff08Lightman\u7b49\u4eba\uff0c2023\uff1bUesato\u7b49\u4eba\uff0c2022\uff1bWang\u7b49\u4eba\uff0c2023\uff09\u3001\u5f3a\u5316\u5b66\u4e60\uff08Kumar\u7b49\u4eba\uff0c2024\uff09\u4ee5\u53ca\u8499\u7279\u5361\u6d1b\u6811\u641c\u7d22\u548c\u6ce2\u675f\u641c\u7d22\u7b49\u641c\u7d22\u7b97\u6cd5\uff08Feng\u7b49\u4eba\uff0c2024.\uff1bTrinh\u7b49\u4eba\uff0c2024:Xin\u7b49\u4eba\uff0c2024].\uff09\u3002\u7136\u800c\uff0c\u8fd9\u4e9b\u65b9\u6cd5\u90fd\u6ca1\u6709\u8fbe\u5230\u4e0eOpenAI\u7684o1\u7cfb\u5217\u6a21\u578b\u76f8\u5f53\u7684\u4e00\u822c\u63a8\u7406\u6027\u80fd\u3002</p> <p>\u5728\u8fd9\u7bc7\u8bba\u6587\u4e2d\uff0c\u6211\u4eec\u8fc8\u51fa\u4e86\u4f7f\u7528\u7eaf\u5f3a\u5316\u5b66\u4e60\uff08RL\uff09\u63d0\u9ad8\u8bed\u8a00\u6a21\u578b\u63a8\u7406\u80fd\u529b\u7684\u7b2c\u4e00\u6b65\u3002\u6211\u4eec\u7684\u76ee\u6807\u662f\u63a2\u7d22LLM\u5728\u6ca1\u6709\u4efb\u4f55\u76d1\u7763\u6570\u636e\u7684\u60c5\u51b5\u4e0b\u53d1\u5c55\u63a8\u7406\u80fd\u529b\u7684\u6f5c\u529b\uff0c\u4e13\u6ce8\u4e8e\u901a\u8fc7\u7eaf\u7cb9\u7684RL\u8fc7\u7a0b\u8fdb\u884c\u81ea\u6211\u8fdb\u5316\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u6211\u4eec\u4f7f\u7528DeepSeek-V3-Base\u4f5c\u4e3a\u57fa\u7840\u6a21\u578b\uff0c\u5e76\u91c7\u7528GRPO\uff08Shao\u7b49\u4eba\uff0c2024\uff09\u4f5c\u4e3aRL\u6846\u67b6\u6765\u63d0\u9ad8\u63a8\u7406\u4e2d\u7684\u6a21\u578b\u6027\u80fd\u3002\u5728\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\uff0cDeepSeek-R1-Zero\u81ea\u7136\u5730\u51fa\u73b0\u4e86\u8bb8\u591a\u5f3a\u5927\u800c\u6709\u8da3\u7684\u63a8\u7406\u884c\u4e3a\u3002\u7ecf\u8fc7\u6570\u5343\u6b65\u5f3a\u5316\u5b66\u4e60\uff0cDeepSeek-R1-Zero\u5728\u63a8\u7406\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u8868\u73b0\u51fa\u4e86\u5353\u8d8a\u7684\u6027\u80fd\u3002\u4f8b\u5982pass@1AIME 2024\u7684\u5f97\u5206\u4ece15.6%\u4e0a\u5347\u523071.0%\uff0c\u5728\u591a\u6570\u6295\u7968\u7684\u60c5\u51b5\u4e0b\uff0c\u5f97\u5206\u8fdb\u4e00\u6b65\u63d0\u9ad8\u523086.7%\uff0c\u4e0eOpenAI-o1-0912\u7684\u8868\u73b0\u76f8\u5339\u914d\u3002</p> <p>\u7136\u800c\uff0cDeepSeek-R1-Zero\u9047\u5230\u4e86\u53ef\u8bfb\u6027\u5dee\u548c\u8bed\u8a00\u6df7\u5408\u7b49\u6311\u6218\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\u5e76\u8fdb\u4e00\u6b65\u63d0\u9ad8\u63a8\u7406\u6027\u80fd\uff0c\u6211\u4eec\u5f15\u5165\u4e86DeepSeek-R1\uff0c\u5b83\u7ed3\u5408\u4e86\u5c11\u91cf\u7684\u51b7\u542f\u52a8\u6570\u636e\u548c\u591a\u9636\u6bb5\u8bad\u7ec3\u7ba1\u9053\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u6211\u4eec\u9996\u5148\u6536\u96c6\u6570\u5343\u4e2a\u51b7\u542f\u52a8\u6570\u636e\uff0c\u4ee5\u5fae\u8c03DeepSeek-V3-Base\u6a21\u578b\u3002\u5728\u6b64\u4e4b\u540e\uff0c\u6211\u4eec\u6267\u884c\u9762\u5411\u63a8\u7406\u7684RL\uff0c\u5982DeepSeek-R1-Zero\u3002\u5728RL\u8fc7\u7a0b\u63a5\u8fd1\u6536\u655b\u65f6\uff0c\u6211\u4eec\u901a\u8fc7RL\u68c0\u67e5\u70b9\u4e0a\u7684\u62d2\u7edd\u91c7\u6837\u521b\u5efa\u65b0\u7684SFT\u6570\u636e\uff0c\u5e76\u7ed3\u5408DeepSeek-V3\u5728\u5199\u4f5c\u3001\u4e8b\u5b9eQA\u548c\u81ea\u6211\u8ba4\u77e5\u7b49\u9886\u57df\u7684\u76d1\u7763\u6570\u636e\uff0c\u7136\u540e\u91cd\u65b0\u8bad\u7ec3DeepSeek-V3-Base\u6a21\u578b\u3002\u5728\u5bf9\u65b0\u6570\u636e\u8fdb\u884c\u5fae\u8c03\u540e\uff0c\u68c0\u67e5\u70b9\u4f1a\u7ecf\u5386\u4e00\u4e2a\u989d\u5916\u7684RL\u8fc7\u7a0b\uff0c\u540c\u65f6\u8003\u8651\u5230\u6240\u6709\u573a\u666f\u7684\u63d0\u793a\u3002\u7ecf\u8fc7\u8fd9\u4e9b\u6b65\u9aa4\uff0c\u6211\u4eec\u83b7\u5f97\u4e86\u4e00\u4e2a\u540d\u4e3aDeepSeek-R1\u7684\u68c0\u67e5\u70b9\uff0c\u5176\u6027\u80fd\u4e0eOpenAI-o1-1217\u76f8\u5f53\u3002</p> <p>\u6211\u4eec\u8fdb\u4e00\u6b65\u63a2\u7d22\u4e86\u4eceDeepSeek-R1\u5230\u66f4\u5c0f\u5bc6\u5ea6\u6a21\u578b\u7684\u84b8\u998f\u3002\u4f7f\u7528Qwen2.5-32B\uff08Qwen\uff0c2024b\uff09\u4f5c\u4e3a\u57fa\u7840\u6a21\u578b\uff0cDeepSeek-R1\u7684\u76f4\u63a5\u84b8\u998f\u4f18\u4e8e\u5728\u5176\u4e0a\u5e94\u7528RL\u3002\u8fd9\u8868\u660e\uff0c\u8f83\u5927\u57fa\u7840\u6a21\u578b\u53d1\u73b0\u7684\u63a8\u7406\u6a21\u5f0f\u5bf9\u4e8e\u63d0\u9ad8\u63a8\u7406\u80fd\u529b\u81f3\u5173\u91cd\u8981\u3002\u6211\u4eec\u5f00\u6e90\u4e86\u84b8\u998f\u7684Qwen\u548cLlama\uff08Dubey\u7b49\u4eba\uff0c2024\uff09\u7cfb\u5217\u3002\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u6211\u4eec\u63d0\u53d6\u768414B\u6a21\u578b\u5728\u5f88\u5927\u7a0b\u5ea6\u4e0a\u4f18\u4e8e\u6700\u5148\u8fdb\u7684\u5f00\u6e90QwQ-32B\u9884\u89c8\u7248\uff08Qwen\uff0c2024a\uff09\uff0c\u63d0\u53d6\u768432B\u548c70B\u6a21\u578b\u5728\u5bc6\u96c6\u6a21\u578b\u7684\u63a8\u7406\u57fa\u51c6\u4e0a\u521b\u4e0b\u4e86\u65b0\u7eaa\u5f55\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#11","title":"1.1 \u8d21\u732e","text":"<p>post-training\uff1a\u57fa\u4e8e\u57fa\u7840\u6a21\u578b\u7684\u5927\u89c4\u6a21\u5f3a\u5316\u5b66\u4e60\uff1a</p> <ul> <li>\u6211\u4eec\u76f4\u63a5\u5c06RL\u5e94\u7528\u4e8e\u57fa\u7840\u6a21\u578b\uff0c\u800c\u4e0d\u4f9d\u8d56\u4e8e\u76d1\u7763\u5fae\u8c03\uff08SFT\uff09\u4f5c\u4e3a\u521d\u6b65\u6b65\u9aa4\u3002\u8fd9\u79cd\u65b9\u6cd5\u5141\u8bb8\u6a21\u578b\u63a2\u7d22\u89e3\u51b3\u590d\u6742\u95ee\u9898\u7684\u601d\u7ef4\u94fe\uff08CoT\uff09\uff0c\u4ece\u800c\u5f00\u53d1\u4e86DeepSeek-R1-Zero\u3002DeepSeek-R1-Zero\u5c55\u793a\u4e86\u81ea\u6211\u9a8c\u8bc1\u3001\u53cd\u5c04\u548c\u751f\u6210\u957fCoT\u7b49\u529f\u80fd\uff0c\u6807\u5fd7\u7740\u7814\u7a76\u754c\u7684\u4e00\u4e2a\u91cd\u8981\u91cc\u7a0b\u7891\u3002\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u8fd9\u662f\u7b2c\u4e00\u9879\u516c\u5f00\u7814\u7a76\uff0c\u9a8c\u8bc1\u4e86LLM\u7684\u63a8\u7406\u80fd\u529b\u53ef\u4ee5\u5b8c\u5168\u901a\u8fc7RL\u6765\u6fc0\u52b1\uff0c\u800c\u4e0d\u9700\u8981SFT\u3002\u8fd9\u4e00\u7a81\u7834\u4e3a\u8be5\u9886\u57df\u7684\u672a\u6765\u53d1\u5c55\u94fa\u5e73\u4e86\u9053\u8def\u3002</li> <li>\u6211\u4eec\u4ecb\u7ecd\u4e86\u6211\u4eec\u5f00\u53d1DeepSeek-R1\u7684\u7ba1\u9053\u3002\u8be5\u7ba1\u9053\u5305\u542b\u4e24\u4e2aRL\u9636\u6bb5\uff0c\u65e8\u5728\u53d1\u73b0\u6539\u8fdb\u7684\u63a8\u7406\u6a21\u5f0f\u5e76\u4e0e\u4eba\u7c7b\u504f\u597d\u4fdd\u6301\u4e00\u81f4\uff0c\u4ee5\u53ca\u4e24\u4e2aSFT\u9636\u6bb5\uff0c\u4f5c\u4e3a\u6a21\u578b\u63a8\u7406\u548c\u975e\u63a8\u7406\u80fd\u529b\u7684\u79cd\u5b50\u3002\u6211\u4eec\u76f8\u4fe1\uff0c\u901a\u8fc7\u521b\u5efa\u66f4\u597d\u7684\u6a21\u578b\uff0c\u8be5\u7ba1\u9053\u5c06\u4f7f\u884c\u4e1a\u53d7\u76ca\u3002\u00ac</li> </ul> <p>\u84b8\u998f\uff1a\u8f83\u5c0f\u7684\u578b\u53f7\u4e5f\u53ef\u80fd\u5f88\u5f3a\u5927</p> <ul> <li>\u6211\u4eec\u8bc1\u660e\uff0c\u4e0e\u901a\u8fc7RL\u5728\u5c0f\u6a21\u578b\u4e0a\u53d1\u73b0\u7684\u63a8\u7406\u6a21\u5f0f\u76f8\u6bd4\uff0c\u8f83\u5927\u6a21\u578b\u7684\u63a8\u7406\u6a21\u5f0f\u53ef\u4ee5\u88ab\u63d0\u70bc\u6210\u8f83\u5c0f\u7684\u6a21\u578b\uff0c\u4ece\u800c\u83b7\u5f97\u66f4\u597d\u7684\u6027\u80fd\u3002\u5f00\u6e90DeepSeek-R1\u53ca\u5176API\u5c06\u6709\u5229\u4e8e\u7814\u7a76\u793e\u533a\u5728\u672a\u6765\u63d0\u53d6\u66f4\u597d\u7684\u5c0f\u578b\u6a21\u578b\u3002</li> <li>\u4f7f\u7528DeepSeek-R1\u751f\u6210\u7684\u63a8\u7406\u6570\u636e\uff0c\u6211\u4eec\u5bf9\u7814\u7a76\u754c\u5e7f\u6cdb\u4f7f\u7528\u7684\u51e0\u4e2a\u5bc6\u96c6\u6a21\u578b\u8fdb\u884c\u4e86\u5fae\u8c03\u3002\u8bc4\u4f30\u7ed3\u679c\u8868\u660e\uff0c\u84b8\u998f\u51fa\u7684\u8f83\u5c0f\u5bc6\u5ea6\u6a21\u578b\u5728\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u8868\u73b0\u51fa\u8272\u3002DeepSeek-R1-Distill-Qwen-7B\u5728AIME 2024\u4e0a\u53d6\u5f97\u4e8655.5%\u7684\u6210\u7ee9\uff0c\u8d85\u8fc7\u4e86QwQ-32B\u9884\u89c8\u7248\u3002\u6b64\u5916\u00ac\uff0cDeepSeek-R1-Distill-Qwen-32B\u5728AIME 2024\u3001MATH-500\u548cLiveCodeBench\u4e0a\u7684\u5f97\u5206\u5206\u522b\u4e3a72.6%\u300194.3%\u548c57.2%\u3002\u8fd9\u4e9b\u7ed3\u679c\u660e\u663e\u4f18\u4e8e\u4e4b\u524d\u7684\u5f00\u6e90\u6a21\u578b\uff0c\u4e0eo1-mini\u76f8\u5f53\u3002\u6211\u4eec\u57fa\u4e8eQwen2.5\u548cLlama3\u7cfb\u5217\u5411\u793e\u533a\u5f00\u6e90\u4e861.5B\u30017B\u30018B\u300114B\u300132B\u548c70B\u68c0\u67e5\u70b9\u3002</li> </ul>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#12","title":"1.2 \u8bc4\u4f30\u7ed3\u679c\u603b\u7ed3","text":"<ul> <li>\u63a8\u7406\u4efb\u52a1\uff1a\uff081\uff09DeepSeek-R1\u7684\u5f97\u5206\u4e3a79.8%Pass@1\u5728AIME 2024\u4e0a\uff0c\u7565\u5fae\u8d85\u8fc7\u4e86OpenAI-o1-1217\u3002\u5728MATH-500\u4e0a\uff0c\u5b83\u83b7\u5f97\u4e86\u4ee4\u4eba\u5370\u8c61\u6df1\u523b\u768497.3%\u7684\u5206\u6570\uff0c\u4e0eOpenAI-o1-1217\u76f8\u5f53\uff0c\u5e76\u4e14\u660e\u663e\u4f18\u4e8e\u5176\u4ed6\u6a21\u578b\u3002\uff082\uff09 \u5728\u4e0e\u7f16\u7801\u76f8\u5173\u7684\u4efb\u52a1\u4e2d\uff0cDeepSeek-R1\u5728\u4ee3\u7801\u7ade\u8d5b\u4efb\u52a1\u4e2d\u8868\u73b0\u51fa\u4e86\u4e13\u5bb6\u7ea7\u6c34\u5e73\uff0c\u56e0\u4e3a\u5b83\u5728Codeforce\u4e0a\u83b7\u5f97\u4e862029 Elo\u8bc4\u7ea7\uff0c\u8d85\u8fc7\u4e8696.3%\u7684\u4eba\u7c7b\u53c2\u4e0e\u8005\u3002\u5bf9\u4e8e\u4e0e\u5de5\u7a0b\u76f8\u5173\u7684\u4efb\u52a1\uff0cDeepSeek-R1\u7684\u6027\u80fd\u7565\u4f18\u4e8eDeepSeek-V3\uff0c\u8fd9\u53ef\u4ee5\u5e2e\u52a9\u5f00\u53d1\u4eba\u5458\u5b8c\u6210\u73b0\u5b9e\u4e16\u754c\u7684\u4efb\u52a1\u3002</li> <li>\u77e5\u8bc6\uff1a\u5728MMLU\u3001MMLU Pro\u548cGPQA Diamond\u7b49\u57fa\u51c6\u6d4b\u8bd5\u4e2d\uff0cDeepSeek-R1\u53d6\u5f97\u4e86\u51fa\u8272\u7684\u6210\u7ee9\uff0c\u660e\u663e\u4f18\u4e8eDeepSeek-V3\uff0cMMLU\u5f97\u5206\u4e3a90.8%\uff0cMMLU Pro\u5f97\u5206\u4e3a84.0%\uff0cGPQA Diamonds\u5f97\u5206\u4e3a71.5%\u3002\u5c3d\u7ba1\u5728\u8fd9\u4e9b\u57fa\u51c6\u6d4b\u8bd5\u4e2d\uff0cDeepSeek-R1\u7684\u6027\u80fd\u7565\u4f4e\u4e8eOpenAI-o1-1217\uff0c\u4f46\u5b83\u8d85\u8d8a\u4e86\u5176\u4ed6\u95ed\u6e90\u6a21\u578b\uff0c\u5c55\u793a\u4e86\u5176\u5728\u6559\u80b2\u4efb\u52a1\u4e2d\u7684\u7ade\u4e89\u4f18\u52bf\u3002\u5728\u4e8b\u5b9e\u57fa\u51c6SimpleQA\u4e0a\uff0cDeepSeek-R1\u7684\u8868\u73b0\u4f18\u4e8eDeepSeek-V3\uff0c\u5c55\u793a\u4e86\u5176\u5904\u7406\u57fa\u4e8e\u4e8b\u5b9e\u7684\u67e5\u8be2\u7684\u80fd\u529b\u3002\u5728\u8fd9\u4e2a\u57fa\u51c6\u6d4b\u8bd5\u4e2d\uff0cOpenAI-o1\u8d85\u8fc7\u4e864o\uff0c\u4e5f\u89c2\u5bdf\u5230\u4e86\u7c7b\u4f3c\u7684\u8d8b\u52bf\u3002</li> <li>\u5176\u4ed6\uff1aDeepSeek-R1\u4e5f\u64c5\u957f\u5404\u79cd\u4efb\u52a1\uff0c\u5305\u62ec\u521b\u610f\u5199\u4f5c\u3001\u4e00\u822c\u95ee\u7b54\u3001\u7f16\u8f91\u3001\u603b\u7ed3\u7b49\u3002\u5b83\u5728AlpacaEval 2.0\u4e0a\u5b9e\u73b0\u4e86\u4ee4\u4eba\u5370\u8c61\u6df1\u523b\u768487.6%\u7684\u957f\u5ea6\u63a7\u5236\u80dc\u7387\uff0c\u5728Are-naHard\u4e0a\u5b9e\u73b0\u4e8692.3%\u7684\u80dc\u7387\uff0c\u5c55\u793a\u4e86\u5176\u667a\u80fd\u5904\u7406\u975e\u9762\u5411\u8003\u8bd5\u7684\u67e5\u8be2\u7684\u5f3a\u5927\u80fd\u529b\u3002\u6b64\u5916\uff0cDeepSeek-R1\u5728\u9700\u8981\u957f\u4e0a\u4e0b\u6587\u7406\u89e3\u7684\u4efb\u52a1\u4e0a\u8868\u73b0\u51fa\u8272\uff0c\u5728\u957f\u4e0a\u4e0b\u6587\u57fa\u51c6\u6d4b\u8bd5\u4e0a\u5927\u5927\u4f18\u4e8eDeepSeek-V3\u3002</li> </ul>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#2","title":"2 \u65b9\u6cd5","text":""},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#21","title":"2.1 \u6982\u8ff0","text":"<p>\u4e4b\u524d\u7684\u5de5\u4f5c\u5728\u5f88\u5927\u7a0b\u5ea6\u4e0a\u4f9d\u8d56\u4e8e\u5927\u91cf\u7684\u76d1\u7763\u6570\u636e\u6765\u63d0\u9ad8\u6a21\u578b\u6027\u80fd\u3002\u5728\u8fd9\u9879\u7814\u7a76\u4e2d\uff0c\u6211\u4eec\u8bc1\u660e\u4e86\u5373\u4f7f\u4e0d\u4f7f\u7528\u76d1\u7763\u5fae\u8c03\uff08SFT\uff09\u4f5c\u4e3a\u51b7\u542f\u52a8\uff0c\u901a\u8fc7\u5927\u89c4\u6a21\u5f3a\u5316\u5b66\u4e60\uff08RL\uff09\u4e5f\u53ef\u4ee5\u663e\u8457\u63d0\u9ad8\u63a8\u7406\u80fd\u529b\u3002\u6b64\u5916\uff0c\u901a\u8fc7\u5305\u542b\u5c11\u91cf\u51b7\u542f\u52a8\u6570\u636e\uff0c\u53ef\u4ee5\u8fdb\u4e00\u6b65\u63d0\u9ad8\u6027\u80fd\u3002\u5728\u4ee5\u4e0b\u90e8\u5206\u4e2d\uff0c\u6211\u4eec\u5c06\u4ecb\u7ecd\uff1a</p> <ul> <li>\uff081\uff09DeepSeek-R1-Zero\uff0c\u5b83\u5c06RL\u76f4\u63a5\u5e94\u7528\u4e8e\u57fa\u7840\u6a21\u578b\uff0c\u800c\u4e0d\u9700\u8981\u4efb\u4f55SFT\u6570\u636e\uff0c\u4ee5\u53ca</li> <li>\uff082\uff09 DeepSeek-R1\uff0c\u5b83\u4ece\u4e00\u4e2a\u68c0\u67e5\u70b9\u5f00\u59cb\u5e94\u7528RL\uff0c\u8be5\u68c0\u67e5\u70b9\u7ecf\u8fc7\u6570\u5343\u4e2a\u957f\u94fe\u601d\u7ef4\uff08CoT\uff09\u793a\u4f8b\u7684\u5fae\u8c03\u3002</li> <li>\uff083\uff09 \u5c06DeepSeek-R1\u7684\u63a8\u7406\u80fd\u529b\u63d0\u53d6\u5230\u5c0f\u578b\u5bc6\u96c6\u6a21\u578b\u4e2d\u3002</li> </ul>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#22-deepseek-r1-zero","title":"2.2 DeepSeek-R1-Zero\uff1a\u57fa\u4e8e\u57fa\u7840\u6a21\u578b\u7684\u5f3a\u5316\u5b66\u4e60","text":"<p>\u5f3a\u5316\u5b66\u4e60\u5728\u63a8\u7406\u4efb\u52a1\u4e2d\u8868\u73b0\u51fa\u4e86\u663e\u8457\u7684\u6709\u6548\u6027\uff0c\u6b63\u5982\u6211\u4eec\u4e4b\u524d\u7684\u5de5\u4f5c\u6240\u8bc1\u660e\u7684\u90a3\u6837\uff08Shao\u7b49\u4eba\uff0c2024\uff1bWang\u7b49\u4eba\uff0c2023\uff09\u3002\u7136\u800c\uff0c\u8fd9\u4e9b\u5de5\u4f5c\u5728\u5f88\u5927\u7a0b\u5ea6\u4e0a\u4f9d\u8d56\u4e8e\u76d1\u7763\u6570\u636e\uff0c\u800c\u8fd9\u4e9b\u6570\u636e\u7684\u6536\u96c6\u9700\u8981\u8017\u8d39\u5927\u91cf\u65f6\u95f4\u3002\u5728\u672c\u8282\u4e2d\uff0c\u6211\u4eec\u5c06\u63a2\u8ba8LLM\u5728\u00ac\u6ca1\u6709\u4efb\u4f55\u76d1\u7763\u6570\u636e\u7684\u60c5\u51b5\u4e0b\u53d1\u5c55\u63a8\u7406\u80fd\u529b\u7684\u6f5c\u529b\uff0c\u91cd\u70b9\u5173\u6ce8\u5b83\u4eec\u901a\u8fc7\u7eaf\u5f3a\u5316\u5b66\u4e60\u8fc7\u7a0b\u7684\u81ea\u6211\u8fdb\u5316\u3002\u6211\u4eec\u9996\u5148\u7b80\u8981\u6982\u8ff0\u4e86\u6211\u4eec\u7684RL\u7b97\u6cd5\uff0c\u7136\u540e\u4ecb\u7ecd\u4e86\u4e00\u4e9b\u4ee4\u4eba\u5174\u594b\u7684\u7ed3\u679c\uff0c\u5e76\u5e0c\u671b\u8fd9\u80fd\u4e3a\u793e\u533a\u63d0\u4f9b\u6709\u4ef7\u503c\u7684\u89c1\u89e3\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#221","title":"2.2.1 \u5f3a\u5316\u5b66\u4e60\u7b97\u6cd5","text":"<p>\u4e3a\u4e86\u8282\u7701RL\u7684\u8bad\u7ec3\u6210\u672c\uff0c\u6211\u4eec\u91c7\u7528\u4e86\u7ec4\u76f8\u5bf9\u7b56\u7565\u4f18\u5316\uff08GRPO\uff09\uff08Shao\u7b49\u4eba\uff0c2024\uff09\uff0c\u5b83\u653e\u5f03\u4e86\u901a\u5e38\u4e0e\u7b56\u7565\u6a21\u578b\u5927\u5c0f\u76f8\u540c\u7684\u6279\u8bc4\u6a21\u578b\uff0c\u800c\u662f\u6839\u636e\u7ec4\u5206\u6570\u4f30\u8ba1\u57fa\u7ebf\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u95ee\u9898 \\(q\\), \u7136\u540e\u4f18\u5316\u7b56\u7565\u6a21\u578b \\(\\pi_{\\theta}\\) \u901a\u8fc7\u6700\u5927\u5316\u4ee5\u4e0b\u76ee\u6807\uff1a $$ J_{GRPO}(\\theta) = E[q \\sim P(Q), {o_{i}}{i}^{G} \\sim \\pi(O|q)] $$ \u54ea\u91cc \\(\\epsilon\\) \u548c \\(\\beta\\) \u662f\u8d85\u53c2\u6570\uff0c\u4ee5\u53ca \\(A_{i}\\) \u662f\u4f18\u52bf\uff0c\u4f7f\u7528\u4e0e\u6bcf\u4e2a\u7ec4\u5185\u7684\u8f93\u51fa\u76f8\u5bf9\u5e94\u7684\u4e00\u7ec4\u5956\u52b1 \\(\\{r_{1}, r_{2}, \\cdots, r_{G}\\}\\) \u8ba1\u7b97\u5f97\u51fa\uff1a</p> <p></p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#222","title":"2.2.2 \u5956\u52b1\u5efa\u6a21","text":"<p>\u5956\u52b1\u662f\u8bad\u7ec3\u4fe1\u53f7\u7684\u6765\u6e90\uff0c\u5b83\u51b3\u5b9a\u4e86RL\u7684\u4f18\u5316\u65b9\u5411\u3002\u4e3a\u4e86\u8bad\u7ec3DeepSeek-R1-Zero\uff0c\u6211\u4eec\u91c7\u7528\u4e86\u4e00\u79cd\u57fa\u4e8e\u89c4\u5219\u7684\u5956\u52b1\u7cfb\u7edf\uff0c\u4e3b\u8981\u7531\u4e24\u79cd\u7c7b\u578b\u7684\u5956\u52b1\u7ec4\u6210\uff1a</p> <ul> <li>\u51c6\u786e\u6027\u5956\u52b1\uff1a\u51c6\u786e\u6027\u5956\u52b1\u6a21\u578b\u8bc4\u4f30\u54cd\u5e94\u662f\u5426\u6b63\u786e\u3002\u4f8b\u5982\uff0c\u5728\u5177\u6709\u786e\u5b9a\u6027\u7ed3\u679c\u7684\u6570\u5b66\u95ee\u9898\u7684\u60c5\u51b5\u4e0b\uff0c\u6a21\u578b\u9700\u8981\u4ee5\u6307\u5b9a\u7684\u683c\u5f0f\uff08\u4f8b\u5982\uff0c\u5728\u6846\u5185\uff09\u63d0\u4f9b\u6700\u7ec8\u7b54\u6848\uff0c\u4ece\u800c\u80fd\u591f\u5bf9\u6b63\u786e\u6027\u8fdb\u884c\u53ef\u9760\u7684\u57fa\u4e8e\u89c4\u5219\u7684\u9a8c\u8bc1\u3002\u540c\u6837\uff0c\u5bf9\u4e8eLeetCode\u95ee\u9898\uff0c\u53ef\u4ee5\u4f7f\u7528\u7f16\u8bd1\u5668\u6839\u636e\u9884\u5b9a\u4e49\u7684\u6d4b\u8bd5\u7528\u4f8b\u751f\u6210\u53cd\u9988\u3002</li> <li>\u683c\u5f0f\u5956\u52b1\uff1a\u9664\u4e86\u51c6\u786e\u6027\u5956\u52b1\u6a21\u578b\u5916\uff0c\u6211\u4eec\u8fd8\u91c7\u7528\u4e86\u4e00\u79cd\u683c\u5f0f\u5956\u52b1\u6a21\u578b\uff0c\u8be5\u6a21\u578b\u5f3a\u5236\u5c06\u5176\u601d\u7ef4\u8fc7\u7a0b\u7f6e\u4e8e\u201c\u201d\u548c\u201c\u201d\u6807\u7b7e\u4e4b\u95f4\u3002 \u6211\u4eec\u5728\u5f00\u53d1DeepSeek-R1-Zero\u65f6\u6ca1\u6709\u5e94\u7528\u7ed3\u679c\u6216\u8fc7\u7a0b\u795e\u7ecf\u5956\u52b1\u6a21\u578b\uff0c\u56e0\u4e3a\u6211\u4eec\u53d1\u73b0\u795e\u7ecf\u5956\u52b1\u6a21\u578b\u5728\u5927\u89c4\u6a21\u5f3a\u5316\u5b66\u4e60\u8fc7\u7a0b\u4e2d\u53ef\u80fd\u4f1a\u906d\u53d7\u5956\u52b1\u9ed1\u5ba2\u653b\u51fb\uff0c\u800c\u91cd\u65b0\u8bad\u7ec3\u5956\u52b1\u6a21\u578b\u9700\u8981\u989d\u5916\u7684\u8bad\u7ec3\u8d44\u6e90\uff0c\u8fd9\u4f7f\u6574\u4e2a\u8bad\u7ec3\u7ba1\u9053\u53d8\u5f97\u590d\u6742\u3002"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#223","title":"2.2.3 \u57f9\u8bad\u6a21\u677f","text":"<p>\u4e3a\u4e86\u8bad\u7ec3DeepSeek-R1-Zero\uff0c\u6211\u4eec\u9996\u5148\u8bbe\u8ba1\u4e86\u4e00\u4e2a\u7b80\u5355\u7684\u6a21\u677f\uff0c\u5f15\u5bfc\u57fa\u7840\u6a21\u578b\u9075\u5b88\u6211\u4eec\u6307\u5b9a\u7684\u6307\u4ee4\u3002\u5982\u88681\u6240\u793a\uff0c\u8be5\u6a21\u677f\u8981\u6c42DeepSeek-R1-Zero\u9996\u5148\u751f\u6210\u63a8\u7406\u8fc7\u7a0b\uff0c\u7136\u540e\u751f\u6210\u6700\u7ec8\u7b54\u6848\u3002\u6211\u4eec\u6709\u610f\u5c06\u7ea6\u675f\u9650\u5236\u5728\u8fd9\u79cd\u7ed3\u6784\u683c\u5f0f\u4e0a\uff0c\u907f\u514d\u4efb\u4f55\u7279\u5b9a\u4e8e\u5185\u5bb9\u7684\u504f\u89c1\uff0c\u4f8b\u5982\u5f3a\u5236\u8fdb\u884c\u53cd\u601d\u6027\u63a8\u7406\u6216\u63a8\u5e7f\u7279\u5b9a\u7684\u95ee\u9898\u89e3\u51b3\u7b56\u7565\uff0c\u4ee5\u786e\u4fdd\u6211\u4eec\u80fd\u591f\u5728\u5f3a\u5316\u5b66\u4e60\u8fc7\u7a0b\u4e2d\u51c6\u786e\u89c2\u5bdf\u6a21\u578b\u7684\u81ea\u7136\u8fdb\u7a0b\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#224-deepseek-r1-zeroaha","title":"2.2.4 DeepSeek-R1-Zero\u7684\u6027\u80fd\u3001\u81ea\u6f14\u5316\u8fc7\u7a0b\u548cAha\u65f6\u523b","text":"<p>\u56fe2\u5c55\u793a\u4e86DeepSeek-R1-Zero\u5728\u6574\u4e2a\u5f3a\u5316\u5b66\u4e60\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\u5728AIME 2024\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u7684\u6027\u80fd\u8f68\u8ff9\u3002\u5982\u56fe\u6240\u793a\uff0c\u968f\u7740\u5f3a\u5316\u5b66\u4e60\u8bad\u7ec3\u7684\u63a8\u8fdb\uff0cDeepSeek-R1-Zero\u7684\u6027\u80fd\u7a33\u6b65\u63d0\u9ad8\u3002\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u5e73\u5747pass@1AIME 2024\u7684\u5f97\u5206\u663e\u8457\u63d0\u9ad8\uff0c\u4ece\u6700\u521d\u768415.6%\u8dc3\u5347\u81f3\u4ee4\u4eba\u5370\u8c61\u6df1\u523b\u768471.0%\uff0c\u8fbe\u5230\u4e86\u4e0eOpenAI-o1-0912\u76f8\u5f53\u7684\u6027\u80fd\u6c34\u5e73\u3002\u8fd9\u4e00\u663e\u8457\u6539\u8fdb\u7a81\u663e\u4e86\u6211\u4eec\u7684RL\u7b97\u6cd5\u5728\u4f18\u5316\u6a21\u578b\u6027\u80fd\u65b9\u9762\u7684\u6709\u6548\u6027\u3002 \u88682\u63d0\u4f9b\u4e86DeepSeek-R1-Zero\u548cOpenAI\u7684o1-0912\u6a21\u578b\u5728\u5404\u79cd\u63a8\u7406\u76f8\u5173\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u7684\u6bd4\u8f83\u5206\u6790\u3002\u7814\u7a76\u7ed3\u679c\u8868\u660e\uff0cRL\u80fd\u591f\u589e\u5f3a</p> <p></p> <p>\u56fe2\u8bad\u7ec3\u671f\u95f4DeepSeek-R1-Zero\u7684AIME\u7cbe\u5ea6\u3002\u5bf9\u4e8e\u6bcf\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u62bd\u53d616\u4e2a\u7b54\u6848\u5e76\u8ba1\u7b97\u603b\u4f53\u5e73\u5747\u51c6\u786e\u7387\uff0c\u4ee5\u786e\u4fdd\u7a33\u5b9a\u7684\u8bc4\u4f30\u3002</p> <p>DeepSeek-R1-Zero\u65e0\u9700\u4efb\u4f55\u76d1\u7763\u5fae\u8c03\u6570\u636e\u5373\u53ef\u83b7\u5f97\u5f3a\u5927\u7684\u63a8\u7406\u80fd\u529b\u3002\u8fd9\u662f\u4e00\u9879\u503c\u5f97\u6ce8\u610f\u7684\u6210\u5c31\uff0c\u56e0\u4e3a\u5b83\u5f3a\u8c03\u4e86\u8be5\u6a21\u578b\u4ec5\u901a\u8fc7RL\u6709\u6548\u5b66\u4e60\u548c\u63a8\u5e7f\u7684\u80fd\u529b\u3002\u6b64\u5916\uff0cDeepSeek-R1-Zero\u7684\u6027\u80fd\u53ef\u4ee5\u901a\u8fc7\u591a\u6570\u6295\u7968\u7684\u5e94\u7528\u8fdb\u4e00\u6b65\u589e\u5f3a\u3002\u4f8b\u5982\uff0c\u5f53\u5728AIME\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u91c7\u7528\u591a\u6570\u6295\u7968\u65f6\uff0cDeepSeek-R1-Zero\u7684\u6027\u80fd\u4ece71.0%\u4e0a\u5347\u523086.7%\uff0c\u4ece\u800c\u8d85\u8fc7\u4e86OpenAI-o1-0912\u7684\u6027\u80fd\u3002DeepSeek-R1-Zero\u5728\u6709\u548c\u6ca1\u6709\u591a\u6570\u6295\u7968\u7684\u60c5\u51b5\u4e0b\u90fd\u80fd\u5b9e\u73b0\u5982\u6b64\u6709\u7ade\u4e89\u529b\u7684\u6027\u80fd\uff0c\u8fd9\u7a81\u663e\u4e86\u5176\u5f3a\u5927\u7684\u57fa\u7840\u80fd\u529b\u53ca\u5176\u5728\u63a8\u7406\u4efb\u52a1\u65b9\u9762\u8fdb\u4e00\u6b65\u53d1\u5c55\u7684\u6f5c\u529b\u3002</p> <p>DeepSeek-R1-Zero\u7684\u81ea\u8fdb\u5316\u8fc7\u7a0b\u662f\u4e00\u4e2a\u5f15\u4eba\u5165\u80dc\u7684\u6f14\u793a\uff0c\u5c55\u793a\u4e86RL\u5982\u4f55\u9a71\u52a8\u6a21\u578b\u81ea\u4e3b\u63d0\u9ad8\u5176\u63a8\u7406\u80fd\u529b\u3002\u901a\u8fc7\u76f4\u63a5\u4ece\u57fa\u7840\u6a21\u578b\u542f\u52a8RL\uff0c\u6211\u4eec\u53ef\u4ee5\u5bc6\u5207\u76d1\u63a7\u6a21\u578b\u7684\u8fdb\u5c55\uff0c\u800c\u4e0d\u53d7\u76d1\u7763\u5fae\u8c03\u9636\u6bb5\u7684\u5f71\u54cd\u3002\u8fd9\u79cd\u65b9\u6cd5\u6e05\u6670\u5730\u5c55\u793a\u4e86\u6a21\u578b\u5982\u4f55\u968f\u65f6\u95f4\u6f14\u53d8\uff0c\u7279\u522b\u662f\u5728\u5904\u7406\u590d\u6742\u63a8\u7406\u4efb\u52a1\u7684\u80fd\u529b\u65b9\u9762\u3002 \u5982\u56fe3\u6240\u793a\uff0cDeepSeek-R1-Zero\u7684\u601d\u8003\u65f6\u95f4\u6301\u7eed\u6539\u5584-</p> <p></p> <p>DeepSeek-R1-Zero\u901a\u8fc7\u5229\u7528\u6269\u5c55\u7684\u6d4b\u8bd5\u65f6\u95f4\u8ba1\u7b97\uff0c\u81ea\u7136\u83b7\u5f97\u4e86\u89e3\u51b3\u65e5\u76ca\u590d\u6742\u7684\u63a8\u7406\u4efb\u52a1\u7684\u80fd\u529b\u3002\u8fd9\u79cd\u8ba1\u7b97\u8303\u56f4\u4ece\u751f\u6210\u6570\u767e\u5230\u6570\u5343\u4e2a\u63a8\u7406\u4ee4\u724c\uff0c\u4f7f\u6a21\u578b\u80fd\u591f\u66f4\u6df1\u5165\u5730\u63a2\u7d22\u548c\u5b8c\u5584\u5176\u601d\u7ef4\u8fc7\u7a0b\u3002</p> <p>\u8fd9\u79cd\u81ea\u6211\u8fdb\u5316\u6700\u663e\u8457\u7684\u65b9\u9762\u4e4b\u4e00\u662f\u968f\u7740\u6d4b\u8bd5\u65f6\u95f4\u8ba1\u7b97\u7684\u589e\u52a0\uff0c\u590d\u6742\u884c\u4e3a\u7684\u51fa\u73b0\u3002\u53cd\u601d\uff08\u6a21\u578b\u4fee\u6539\u548c\u91cd\u65b0\u8bc4\u4f30\u5176\u5148\u524d\u6b65\u9aa4\uff09\u548c\u63a2\u7d22\u89e3\u51b3\u95ee\u9898\u7684\u66ff\u4ee3\u65b9\u6cd5\u7b49\u884c\u4e3a\u662f\u81ea\u53d1\u4ea7\u751f\u7684\u3002\u8fd9\u4e9b\u884c\u4e3a\u4e0d\u662f\u660e\u786e\u7f16\u7a0b\u7684\uff0c\u800c\u662f\u6a21\u578b\u4e0e\u5f3a\u5316\u5b66\u4e60\u73af\u5883\u4ea4\u4e92\u7684\u7ed3\u679c\u3002\u8fd9\u79cd\u81ea\u53d1\u5f00\u53d1\u663e\u8457\u589e\u5f3a\u4e86DeepSeek-R1-Zero\u7684\u63a8\u7406\u80fd\u529b\uff0c\u4f7f\u5176\u80fd\u591f\u4ee5\u66f4\u9ad8\u7684\u6548\u7387\u548c\u51c6\u786e\u6027\u5904\u7406\u66f4\u5177\u6311\u6218\u6027\u7684\u4efb\u52a1\u3002</p> <p>DeepSeek-R1-Zero\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\u89c2\u5bdf\u5230\u7684\u4e00\u4e2a\u7279\u522b\u6709\u8da3\u7684\u73b0\u8c61\u662f\u201c\u554a\u54c8\u65f6\u523b\u201d\u7684\u53d1\u751f\u3002\u5982\u88683\u6240\u793a\uff0c\u8fd9\u4e00\u65f6\u523b\u53d1\u751f\u5728\u6a21\u578b\u7684\u4e2d\u95f4\u7248\u672c\u4e2d\u3002\u5728\u6b64\u9636\u6bb5\uff0cDeepSeek-R1-Zero\u901a\u8fc7\u91cd\u65b0\u8bc4\u4f30\u5176\u521d\u59cb\u65b9\u6cd5\uff0c\u5b66\u4f1a\u4e3a\u95ee\u9898\u5206\u914d\u66f4\u591a\u7684\u601d\u8003\u65f6\u95f4\u3002\u8fd9\u79cd\u884c\u4e3a\u4e0d\u4ec5\u8bc1\u660e\u4e86\u6a21\u578b\u4e0d\u65ad\u589e\u957f\u7684\u63a8\u7406\u80fd\u529b\uff0c\u4e5f\u662f\u5f3a\u5316\u5b66\u4e60\u5982\u4f55\u4ea7\u751f\u610f\u60f3\u4e0d\u5230\u7684\u590d\u6742\u7ed3\u679c\u7684\u4e00\u4e2a\u8ff7\u4eba\u4f8b\u5b50\u3002 \u8fd9\u4e00\u65f6\u523b\u4e0d\u4ec5\u662f\u6a21\u578b\u7684\u201c\u987f\u609f\u65f6\u523b\u201d\uff0c\u4e5f\u662f\u7814\u7a76\u4eba\u5458\u89c2\u5bdf\u5176\u884c\u4e3a\u7684\u65f6\u523b\u3002\u5b83\u5f3a\u8c03\u4e86\u5f3a\u5316\u5b66\u4e60\u7684\u529b\u91cf\u548c\u7f8e\u4e3d\uff1a\u6211\u4eec\u4e0d\u662f\u660e\u786e\u5730\u6559\u6388\u6a21\u578b\u5982\u4f55\u89e3\u51b3\u95ee\u9898\uff0c\u800c\u662f\u7b80\u5355\u5730\u4e3a\u5176\u63d0\u4f9b\u6b63\u786e\u7684\u6fc0\u52b1\uff0c\u5b83\u81ea\u4e3b\u5730\u5f00\u53d1\u51fa\u5148\u8fdb\u7684\u89e3\u51b3\u95ee\u9898\u7684\u7b56\u7565\u3002\u201c\u987f\u609f\u65f6\u523b\u201d\u6709\u529b\u5730\u63d0\u9192\u6211\u4eec\uff0c\u5f3a\u5316\u5b66\u4e60\u6709\u6f5c\u529b\u5728\u4eba\u5de5\u7cfb\u7edf\u4e2d\u89e3\u9501\u65b0\u7684\u667a\u80fd\u6c34\u5e73\uff0c\u4e3a\u672a\u6765\u66f4\u81ea\u4e3b\u548c\u81ea\u9002\u5e94\u7684\u6a21\u578b\u94fa\u5e73\u9053\u8def\u3002</p> <p>\u95ee\u9898\uff1a\u5982\u679c\ud835\udc4e &gt; 1,     \u90a3\u4e48\uff0c\u4ee5\u4e0b\u95ee\u9898\u7684\u5b9e\u89e3\u4e4b\u548c    \ud835\udc4e \u2212 \u221a\ud835\udc4e + \ud835\udc65 = \ud835\udc65 \u7b49\u4e8e\u54cd\u5e94\uff1a \u6c42\u89e3\u65b9\u7a0b\u5f0f\u221a\ufe01\ud835\udc4e \u2212 \u221a\ud835\udc4e + \ud835\udc65 = \ud835\udc65, \u8ba9\u6211\u4eec\u4ece\u4e24\u4e2a\u5e73\u65b9\u5f00\u59cb\u00b7 \ud835\udc4e \u2212 \u221a\ud835\udc4e + \ud835\udc65 2 = \ud835\udc652 =\u2192 \ud835\udc4e \u2212 \u221a\ud835\udc4e + \ud835\udc65 = \ud835\udc652. \u91cd\u65b0\u6392\u5217\u4ee5\u9694\u79bb\u5185\u90e8\u5e73\u65b9\u6839\u9879\uff1a (\ud835\udc4e \u2212 \ud835\udc652)2 = \ud835\udc4e + \ud835\udc65 =\u2192 \ud835\udc4e2 \u2212 2\ud835\udc4e\ud835\udc652 + (\ud835\udc652)2 = \ud835\udc4e + \ud835\udc65 =\u2192 \ud835\udc654 \u2212 2\ud835\udc4e\ud835\udc652 \u2212 \ud835\udc65 + (\ud835\udc4e2 \u2212 \ud835\udc4e) = 0 <p>\u7b49\u7b49\u3002\u7b49\u5f85\u3002\u8fd9\u662f\u4e00\u4e2a\u6211\u53ef\u4ee5\u5728\u8fd9\u91cc\u6807\u8bb0\u7684\u987f\u609f\u65f6\u523b\u3002 \u8ba9\u6211\u4eec\u4e00\u6b65\u4e00\u6b65\u5730\u91cd\u65b0\u8bc4\u4f30\u4e00\u4e0b\uff0c\u4ee5\u786e\u5b9a\u6b63\u786e\u7684\u603b\u548c\u662f\u5426\u53ef\u4ee5\u3002\u6211\u4eec\u4ece\u4ee5\u4e0b\u65b9\u7a0b\u5f0f\u5f00\u59cb\uff1a \ud835\udc4e   \u221a\ud835\udc4e  \ud835\udc65 = \ud835\udc65 \u9996\u5148\uff0c\u8ba9\u6211\u4eec\u628a\u4e24\u8fb9\u90fd\u5f04\u5e73\uff1a \ud835\udc4e   \u221a\ud835\udc4e  \ud835\udc65 = \ud835\udc652 =    \u221a\ud835\udc4e  \ud835\udc65 = \ud835\udc4e   \ud835\udc652 \u63a5\u4e0b\u6765\uff0c\u6211\u53ef\u4ee5\u518d\u6b21\u5bf9\u4e24\u8fb9\u8fdb\u884c\u5e73\u65b9\uff0c\u5904\u7406\u65b9\u7a0b\u5f0f\uff1a . . . \u88683 DeepSeek-R1-Zero\u4e2d\u95f4\u7248\u672c\u7684\u4e00\u4e2a\u6709\u8da3\u7684\u201c\u987f\u609f\u65f6\u523b\u201d\u3002\u8be5\u6a21\u578b\u5b66\u4f1a\u4e86\u4f7f\u7528\u62df\u4eba\u5316\u7684\u8bed\u6c14\u8fdb\u884c\u91cd\u65b0\u601d\u8003\u3002\u8fd9\u5bf9\u6211\u4eec\u6765\u8bf4\u4e5f\u662f\u4e00\u4e2a\u987f\u609f\u7684\u65f6\u523b\uff0c\u8ba9\u6211\u4eec\u89c1\u8bc1\u4e86\u5f3a\u5316\u5b66\u4e60\u7684\u529b\u91cf\u548c\u7f8e\u4e3d\u3002</p> <p>\u5c3d\u7ba1DeepSeek-R1-Zero\u5c55\u73b0\u51fa\u5f3a\u5927\u7684\u63a8\u7406\u80fd\u529b\uff0c\u5e76\u80fd\u81ea\u4e3b\u5f00\u53d1\u51fa\u51fa\u4e4e\u610f\u6599\u4e14\u5f3a\u5927\u7684\u63a8\u7406\u884c\u4e3a\uff0c\u4f46\u5b83\u4ecd\u9762\u4e34\u51e0\u4e2a\u95ee\u9898\u3002\u4f8b\u5982\uff0cDeepSeek-R1-Zero\u9762\u4e34\u7740\u53ef\u8bfb\u6027\u5dee\u548c\u8bed\u8a00\u6df7\u5408\u7b49\u6311\u6218\u3002\u4e3a\u4e86\u4f7f\u63a8\u7406\u8fc7\u7a0b\u66f4\u5177\u53ef\u8bfb\u6027\u5e76\u4e0e\u5f00\u653e\u793e\u533a\u5171\u4eab\uff0c\u6211\u4eec\u63a2\u7d22\u4e86DeepSeek-R1\uff0c\u8fd9\u662f\u4e00\u79cd\u5229\u7528RL\u548c\u4eba\u7c7b\u53cb\u597d\u7684\u51b7\u542f\u52a8\u6570\u636e\u7684\u65b9\u6cd5\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#23-deepseek-r1","title":"2.3 DeepSeek-R1\uff1a\u51b7\u542f\u52a8\u5f3a\u5316\u5b66\u4e60","text":"<p>\u53d7\u5230DeepSeek-R1-Zero\u6709\u5e0c\u671b\u7684\u7ed3\u679c\u7684\u542f\u53d1\uff0c\u51fa\u73b0\u4e86\u4e24\u4e2a\u81ea\u7136\u7684\u95ee\u9898\uff1a1\uff09\u901a\u8fc7\u5f15\u5165\u5c11\u91cf\u9ad8\u8d28\u91cf\u6570\u636e\u4f5c\u4e3a\u51b7\u542f\u52a8\uff0c\u53ef\u4ee5\u8fdb\u4e00\u6b65\u63d0\u9ad8\u63a8\u7406\u6027\u80fd\u6216\u52a0\u901f\u6536\u655b\u5417\uff1f2\uff09 \u6211\u4eec\u5982\u4f55\u8bad\u7ec3\u4e00\u4e2a\u7528\u6237\u53cb\u597d\u7684\u6a21\u578b\uff0c\u4e0d\u4ec5\u4ea7\u751f\u6e05\u6670\u8fde\u8d2f\u7684\u601d\u7ef4\u94fe\uff08CoT\uff09\uff0c\u800c\u4e14\u8868\u73b0\u51fa\u5f3a\u5927\u7684\u901a\u7528\u80fd\u529b\uff1f\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\uff0c\u6211\u4eec\u8bbe\u8ba1\u4e86\u4e00\u4e2a\u8bad\u7ec3DeepSeek-R1\u7684\u7ba1\u9053\u3002\u8be5\u7ba1\u9053\u7531\u56db\u4e2a\u9636\u6bb5\u7ec4\u6210\uff0c\u6982\u8ff0\u5982\u4e0b\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#231","title":"2.3.1 \u51b7\u542f\u52a8","text":"<p>\u4e0eDeepSeek-R1-Zero\u4e0d\u540c\uff0c\u4e3a\u4e86\u9632\u6b62\u57fa\u7840\u6a21\u578b\u4e2dRL\u8bad\u7ec3\u7684\u65e9\u671f\u4e0d\u7a33\u5b9a\u51b7\u542f\u52a8\u9636\u6bb5\uff0c\u5bf9\u4e8eDeepSeek-R1\uff0c\u6211\u4eec\u6784\u5efa\u5e76\u6536\u96c6\u4e86\u5c11\u91cf\u957fCoT\u6570\u636e\uff0c\u4ee5\u5fae\u8c03\u6a21\u578b\u4f5c\u4e3a\u521d\u59cbRL\u53c2\u4e0e\u8005\u3002\u4e3a\u4e86\u6536\u96c6\u8fd9\u4e9b\u6570\u636e\uff0c\u6211\u4eec\u63a2\u7d22\u4e86\u51e0\u79cd\u65b9\u6cd5\uff1a\u4ee5\u957fCoT\u4e3a\u4f8b\uff0c\u4f7f\u7528\u5c11\u955c\u5934\u63d0\u793a\uff0c\u76f4\u63a5\u63d0\u793a\u6a21\u578b\u751f\u6210\u8be6\u7ec6\u7684\u7b54\u6848\u5e76\u8fdb\u884c\u53cd\u5c04\u548c\u9a8c\u8bc1\uff0c\u4ee5\u53ef\u8bfb\u683c\u5f0f\u6536\u96c6DeepSeek-R1-Zero\u8f93\u51fa\uff0c\u5e76\u901a\u8fc7\u4eba\u5de5\u6ce8\u91ca\u5668\u7684\u540e\u5904\u7406\u6765\u7cbe\u5316\u7ed3\u679c\u3002 \u5728\u8fd9\u9879\u5de5\u4f5c\u4e2d\uff0c\u6211\u4eec\u6536\u96c6\u4e86\u6570\u5343\u4e2a\u51b7\u542f\u52a8\u6570\u636e\uff0c\u4ee5\u5fae\u8c03DeepSeek-V3-Base\u4f5c\u4e3aRL\u7684\u8d77\u70b9\u3002\u4e0eDeepSeek-R1-Zero\u76f8\u6bd4\uff0c\u51b7\u542f\u52a8\u6570\u636e\u7684\u4f18\u52bf\u5728\u4e8e\u5305\u62ec\uff1a</p> <ul> <li>\u53ef\u8bfb\u6027\uff1aDeepSeek-R1-Zero\u7684\u4e00\u4e2a\u5173\u952e\u9650\u5236\u662f\u5b83\u7684\u5185\u5bb9\u901a\u5e38\u4e0d\u9002\u5408\u9605\u8bfb\u3002\u56de\u590d\u53ef\u80fd\u4f1a\u6df7\u5408\u591a\u79cd\u8bed\u8a00\uff0c\u6216\u8005\u7f3a\u4e4f\u5411\u4e0b\u6807\u8bb0\u683c\u5f0f\u6765\u4e3a\u7528\u6237\u7a81\u51fa\u663e\u793a\u7b54\u6848\u3002\u76f8\u6bd4\u4e4b\u4e0b\uff0c\u5728\u4e3aDeepSeek-R1\u521b\u5efa\u51b7\u542f\u52a8\u6570\u636e\u65f6\uff0c\u6211\u4eec\u8bbe\u8ba1\u4e86\u4e00\u4e2a\u53ef\u8bfb\u7684\u6a21\u5f0f\uff0c\u5728\u6bcf\u4e2a\u54cd\u5e94\u7684\u672b\u5c3e\u90fd\u5305\u542b\u6458\u8981\uff0c\u5e76\u8fc7\u6ee4\u6389\u5bf9\u8bfb\u8005\u4e0d\u53cb\u597d\u7684\u54cd\u5e94\u3002\u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u5c06\u8f93\u51fa\u683c\u5f0f\u5b9a\u4e49\u4e3a <code>|special_token|&lt;reasoning_process&gt;|special_token||&lt;summary&gt;</code>\uff0c\u5176\u4e2d\u63a8\u7406\u8fc7\u7a0b\u662f\u67e5\u8be2\u7684CoT\uff0c\u6458\u8981\u7528\u4e8e\u603b\u7ed3\u63a8\u7406\u7ed3\u679c\u3002</li> <li>\u6f5c\u529b\uff1a\u901a\u8fc7\u4f7f\u7528\u4eba\u7c7b\u5148\u9a8c\u4ed4\u7ec6\u8bbe\u8ba1\u51b7\u542f\u52a8\u6570\u636e\u7684\u6a21\u5f0f\uff0c\u6211\u4eec\u89c2\u5bdf\u5230DeepSeek-R1-Zero\u7684\u6027\u80fd\u66f4\u597d\u3002\u6211\u4eec\u8ba4\u4e3a\u8fed\u4ee3\u8bad\u7ec3\u662f\u63a8\u7406\u6a21\u578b\u7684\u66f4\u597d\u65b9\u6cd5\u3002</li> </ul>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#232","title":"2.3.2 \u9762\u5411\u63a8\u7406\u7684\u5f3a\u5316\u5b66\u4e60","text":"<p>\u5728\u51b7\u542f\u52a8\u6570\u636e\u7684\u57fa\u7840\u4e0a\u5bf9DeepSeek-V3-Base\u8fdb\u884c\u5fae\u8c03\u540e\uff0c\u6211\u4eec\u5e94\u7528\u4e86\u4e0eDeepSeek-R1-Zero\u76f8\u540c\u7684\u5927\u89c4\u6a21\u5f3a\u5316\u5b66\u4e60\u8bad\u7ec3\u8fc7\u7a0b\u3002\u8fd9\u4e00\u9636\u6bb5\u7684\u91cd\u70b9\u662f\u589e\u5f3a\u6a21\u578b\u7684\u63a8\u7406\u80fd\u529b\uff0c\u7279\u522b\u662f\u5728\u7f16\u7801\u3001\u6570\u5b66\u3001\u79d1\u5b66\u548c\u903b\u8f91\u63a8\u7406\u7b49\u63a8\u7406\u5bc6\u96c6\u578b\u4efb\u52a1\u4e2d\uff0c\u8fd9\u4e9b\u4efb\u52a1\u6d89\u53ca\u5177\u6709\u660e\u786e\u89e3\u51b3\u65b9\u6848\u7684\u660e\u786e\u95ee\u9898\u3002\u5728\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u89c2\u5bdf\u5230CoT\u7ecf\u5e38\u8868\u73b0\u51fa\u8bed\u8a00\u6df7\u5408\uff0c\u7279\u522b\u662f\u5f53RL\u63d0\u793a\u6d89\u53ca\u591a\u79cd\u8bed\u8a00\u65f6\u3002\u4e3a\u4e86\u7f13\u89e3\u8bed\u8a00\u6df7\u5408\u7684\u95ee\u9898\uff0c\u6211\u4eec\u5728\u5f3a\u5316\u5b66\u4e60\u8bad\u7ec3\u671f\u95f4\u5f15\u5165\u4e86\u8bed\u8a00\u4e00\u81f4\u6027\u5956\u52b1\uff0c\u8be5\u5956\u52b1\u6309\u76ee\u6807\u8bed\u8a00\u5355\u8bcd\u5728CoT\u4e2d\u7684\u6bd4\u4f8b\u8ba1\u7b97\u3002\u5c3d\u7ba1\u6d88\u878d\u5b9e\u9a8c\u8868\u660e\u8fd9\u79cd\u5bf9\u9f50\u4f1a\u5bfc\u81f4\u6a21\u578b\u6027\u80fd\u7684\u8f7b\u5fae\u4e0b\u964d\uff0c\u4f46\u8fd9\u79cd\u5956\u52b1\u4e0e\u4eba\u7c7b\u504f\u597d\u76f8\u4e00\u81f4\uff0c\u4f7f\u5176\u66f4\u5177\u53ef\u8bfb\u6027\u3002\u6700\u540e\uff0c\u6211\u4eec\u5c06\u63a8\u7406\u4efb\u52a1\u7684\u51c6\u786e\u6027\u548c\u8bed\u8a00\u4e00\u81f4\u6027\u7684\u5956\u52b1\u76f4\u63a5\u76f8\u52a0\uff0c\u5f62\u6210\u6700\u7ec8\u7684\u5956\u52b1\u3002\u7136\u540e\uff0c\u6211\u4eec\u5bf9\u5fae\u8c03\u540e\u7684\u6a21\u578b\u5e94\u7528RL\u8bad\u7ec3\uff0c\u76f4\u5230\u5b83\u5728\u63a8\u7406\u4efb\u52a1\u4e0a\u8fbe\u5230\u6536\u655b\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#233","title":"2.3.3 \u62d2\u6536\u91c7\u6837\u548c\u76d1\u7763\u5fae\u8c03","text":"<p>\u5f53\u9762\u5411\u63a8\u7406\u7684RL\u6536\u655b\u65f6\uff0c\u6211\u4eec\u5229\u7528\u5f97\u5230\u7684\u68c0\u67e5\u70b9\u4e3a\u4e0b\u4e00\u8f6e\u6536\u96c6SFT\uff08\u76d1\u7763\u5fae\u8c03\uff09\u6570\u636e\u3002\u4e0e\u4e3b\u8981\u4fa7\u91cd\u4e8e\u63a8\u7406\u7684\u521d\u59cb\u51b7\u542f\u52a8\u6570\u636e\u4e0d\u540c\uff0c\u8fd9\u4e00\u9636\u6bb5\u6574\u5408\u4e86\u6765\u81ea\u5176\u4ed6\u9886\u57df\u7684\u6570\u636e\uff0c\u4ee5\u589e\u5f3a\u6a21\u578b\u5728\u5199\u4f5c\u3001\u89d2\u8272\u626e\u6f14\u548c\u5176\u4ed6\u901a\u7528\u4efb\u52a1\u4e2d\u7684\u80fd\u529b\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u6211\u4eec\u751f\u6210\u6570\u636e\u5e76\u5bf9\u6a21\u578b\u8fdb\u884c\u5fae\u8c03\uff0c\u5982\u4e0b\u6240\u8ff0\u3002</p> <p>\u63a8\u7406\u6570\u636e\u6211\u4eec\u901a\u8fc7\u4ece\u4e0a\u8ff0RL\u8bad\u7ec3\u7684\u68c0\u67e5\u70b9\u8fdb\u884c\u62d2\u7edd\u91c7\u6837\u6765\u7b56\u5212\u63a8\u7406\u63d0\u793a\u5e76\u751f\u6210\u63a8\u7406\u8f68\u8ff9\u3002\u5728\u4e0a\u4e00\u9636\u6bb5\uff0c\u6211\u4eec\u53ea\u5305\u62ec\u53ef\u4ee5\u4f7f\u7528\u57fa\u4e8e\u89c4\u5219\u7684\u5956\u52b1\u8fdb\u884c\u8bc4\u4f30\u7684\u6570\u636e\u3002\u7136\u800c\uff0c\u5728\u8fd9\u4e2a\u9636\u6bb5\uff0c\u6211\u4eec\u901a\u8fc7\u5408\u5e76\u989d\u5916\u7684\u6570\u636e\u6765\u6269\u5c55\u6570\u636e\u96c6\uff0c\u5176\u4e2d\u4e00\u4e9b\u6570\u636e\u4f7f\u7528\u751f\u6210\u5956\u52b1\u6a21\u578b\uff0c\u5c06\u57fa\u672c\u4e8b\u5b9e\u548c\u6a21\u578b\u9884\u6d4b\u8f93\u5165DeepSeek-V3\u8fdb\u884c\u5224\u65ad\u3002\u6b64\u5916\uff0c\u7531\u4e8e\u6a21\u578b\u8f93\u51fa\u6709\u65f6\u6df7\u4e71\u4e14\u96be\u4ee5\u9605\u8bfb\uff0c\u6211\u4eec\u7528\u6df7\u5408\u8bed\u8a00\u3001\u957f\u6bb5\u843d\u548c\u4ee3\u7801\u5757\u8fc7\u6ee4\u6389\u4e86\u601d\u60f3\u94fe\u3002\u5bf9\u4e8e\u6bcf\u4e2a\u63d0\u793a\uff0c\u6211\u4eec\u5bf9\u591a\u4e2a\u54cd\u5e94\u8fdb\u884c\u91c7\u6837\uff0c\u53ea\u4fdd\u7559\u6b63\u786e\u7684\u54cd\u5e94\u3002\u6211\u4eec\u603b\u5171\u6536\u96c6\u4e86\u5927\u7ea660\u4e07\u4e2a\u4e0e\u63a8\u7406\u76f8\u5173\u7684\u8bad\u7ec3\u6837\u672c\u3002 \u975e\u63a8\u7406\u6570\u636e\u5bf9\u4e8e\u975e\u63a8\u7406\u6570\u636e\uff0c\u5982\u5199\u4f5c\u3001\u4e8b\u5b9eQA\u3001\u81ea\u6211\u8ba4\u77e5\u548c\u7ffb\u8bd1\uff0c\u6211\u4eec\u91c7\u7528DeepSeek-V3\u7ba1\u9053\u5e76\u91cd\u7528DeepSeek-V3SFT\u6570\u636e\u96c6\u7684\u90e8\u5206\u3002\u5bf9\u4e8e\u67d0\u4e9b\u975e\u63a8\u7406\u4efb\u52a1\uff0c\u6211\u4eec\u8c03\u7528DeepSeek-V3\u5728\u901a\u8fc7\u63d0\u793a\u56de\u7b54\u95ee\u9898\u4e4b\u524d\u751f\u6210\u6f5c\u5728\u7684\u601d\u7ef4\u94fe\u3002\u7136\u800c\uff0c\u5bf9\u4e8e\u66f4\u7b80\u5355\u7684\u67e5\u8be2\uff0c\u4f8b\u5982\u201c\u4f60\u597d\u201d\uff0c\u6211\u4eec\u4e0d\u63d0\u4f9bCoT\u4f5c\u4e3a\u54cd\u5e94\u3002\u6700\u540e\uff0c\u6211\u4eec\u603b\u5171\u6536\u96c6\u4e86\u5927\u7ea620\u4e07\u4e2a\u4e0e\u63a8\u7406\u65e0\u5173\u7684\u8bad\u7ec3\u6837\u672c\u3002 \u6211\u4eec\u4f7f\u7528\u4e0a\u8ff0\u7ea680\u4e07\u4e2a\u6837\u672c\u7684\u7cbe\u9009\u6570\u636e\u96c6\u5bf9DeepSeek-V3-Base\u8fdb\u884c\u4e86\u4e24\u4e2a\u65f6\u4ee3\u7684\u5fae\u8c03\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#234","title":"2.3.4. \u9488\u5bf9\u6240\u6709\u573a\u666f\u7684\u5f3a\u5316\u5b66\u4e60","text":"<p>\u4e3a\u4e86\u8fdb\u4e00\u6b65\u4f7f\u6a21\u578b\u4e0e\u4eba\u7c7b\u504f\u597d\u4fdd\u6301\u4e00\u81f4\uff0c\u6211\u4eec\u5b9e\u65bd\u4e86\u4e00\u4e2a\u4e8c\u6b21\u5f3a\u5316\u5b66\u4e60\u9636\u6bb5\uff0c\u65e8\u5728\u63d0\u9ad8\u6a21\u578b\u7684\u6709\u7528\u6027\u548c\u65e0\u5bb3\u6027\uff0c\u540c\u65f6\u5b8c\u5584\u00ac\u5176\u63a8\u7406\u80fd\u529b\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u6211\u4eec\u4f7f\u7528\u5956\u52b1\u4fe1\u53f7\u548c\u4e0d\u540c\u63d0\u793a\u5206\u5e03\u7684\u7ec4\u5408\u6765\u8bad\u7ec3\u6a21\u578b\u3002\u5bf9\u4e8e\u63a8\u7406\u6570\u636e\uff0c\u6211\u4eec\u9075\u5faaDeepSeek-R1-Zero\u4e2d\u6982\u8ff0\u7684\u65b9\u6cd5\uff0c\u8be5\u65b9\u6cd5\u5229\u7528\u57fa\u4e8e\u89c4\u5219\u7684\u5956\u52b1\u6765\u6307\u5bfc\u6570\u5b66\u3001\u4ee3\u7801\u548c\u903b\u8f91\u63a8\u7406\u9886\u57df\u7684\u5b66\u4e60\u8fc7\u7a0b\u3002\u5bf9\u4e8e\u4e00\u822c\u6570\u636e\uff0c\u6211\u4eec\u91c7\u7528\u5956\u52b1\u6a21\u578b\u6765\u6355\u6349\u590d\u6742\u548c\u5fae\u5999\u573a\u666f\u4e2d\u7684\u4eba\u7c7b\u504f\u597d\u3002\u6211\u4eec\u4ee5DeepSeek-V3\u7ba1\u9053\u4e3a\u57fa\u7840\uff0c\u91c7\u7528\u7c7b\u4f3c\u7684\u504f\u597d\u5bf9\u548c\u8bad\u7ec3\u63d0\u793a\u5206\u5e03\u3002\u4e3a\u4e86\u63d0\u4f9b\u5e2e\u52a9\uff0c\u6211\u4eec\u53ea\u5173\u6ce8\u6700\u7ec8\u603b\u7ed3\uff0c\u786e\u4fdd\u8bc4\u4f30\u5f3a\u8c03\u54cd\u5e94\u5bf9\u7528\u6237\u7684\u5b9e\u7528\u6027\u548c\u76f8\u5173\u6027\uff0c\u540c\u65f6\u5c3d\u91cf\u51cf\u5c11\u5bf9\u5e95\u5c42\u63a8\u7406\u8fc7\u7a0b\u7684\u5e72\u6270\u3002\u4e3a\u4e86\u65e0\u5bb3\u5316\uff0c\u6211\u4eec\u8bc4\u4f30\u4e86\u6a21\u578b\u7684\u6574\u4e2a\u54cd\u5e94\uff0c\u5305\u62ec\u63a8\u7406\u8fc7\u7a0b\u548c\u603b\u7ed3\uff0c\u4ee5\u8bc6\u522b\u548c\u51cf\u8f7b\u751f\u6210\u8fc7\u7a0b\u4e2d\u53ef\u80fd\u51fa\u73b0\u7684\u4efb\u4f55\u6f5c\u5728\u98ce\u9669\u3001\u504f\u89c1\u6216\u6709\u5bb3\u5185\u5bb9\u3002\u6700\u7ec8\uff0c\u5956\u52b1\u4fe1\u53f7\u548c\u4e0d\u540c\u6570\u636e\u5206\u5e03\u7684\u6574\u5408\u4f7f\u6211\u4eec\u80fd\u591f\u8bad\u7ec3\u4e00\u4e2a\u5728\u63a8\u7406\u65b9\u9762\u8868\u73b0\u51fa\u8272\u7684\u6a21\u578b\uff0c\u540c\u65f6\u4f18\u5148\u8003\u8651\u6709\u7528\u6027\u548c\u65e0\u5bb3\u6027\u3002\u00ac</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#24","title":"2.4. \u84b8\u998f\uff1a\u8d4b\u4e88\u5c0f\u6a21\u578b\u63a8\u7406\u80fd\u529b","text":"<p>\u4e3a\u4e86\u4e3a\u66f4\u9ad8\u6548\u7684\u5c0f\u578b\u6a21\u578b\u914d\u5907DeepSeek-R1\u7b49\u63a8\u7406\u529f\u80fd\uff0c\u6211\u4eec\u76f4\u63a5\u5bf9Qwen\uff08Qwen\uff0c2024b\uff09\u548cLlama\u7b49\u5f00\u6e90\u6a21\u578b\u8fdb\u884c\u4e86\u5fae\u8c03\uff08AI@Meta\uff0c2024\uff09\u4f7f\u7528DeepSeek-R1\u7b56\u5212\u768480\u4e07\u4e2a\u6837\u672c\uff0c\u8be6\u89c1\u00a72.3.3\u3002\u6211\u4eec\u7684\u7814\u7a76\u7ed3\u679c\u8868\u660e\uff0c\u8fd9\u79cd\u76f4\u63a5\u7684\u84b8\u998f\u65b9\u6cd5\u663e\u8457\u63d0\u9ad8\u4e86\u8f83\u5c0f\u6a21\u578b\u7684\u63a8\u7406\u80fd\u529b\u3002\u6211\u4eec\u5728\u8fd9\u91cc\u4f7f\u7528\u7684\u57fa\u672c\u6a21\u578b\u662fQwen2.5-Math-1.5B\u3001Qwen2.5-Math-7B\u3001Qwen-2.5-14B\u3001Qwon2.5-32B\u3001Llama-3.1-8B\u548cLlama-3.3-70B-Instruct\u3002\u6211\u4eec\u9009\u62e9Llama-3.3\u662f\u56e0\u4e3a\u5b83\u7684\u63a8\u7406\u80fd\u529b\u7565\u4f18\u4e8eLlama-3.1\u3002 \u5bf9\u4e8e\u84b8\u998f\u6a21\u578b\uff0c\u6211\u4eec\u53ea\u5e94\u7528SFT\uff0c\u4e0d\u5305\u62ecRL\u9636\u6bb5\uff0c\u5c3d\u7ba1\u52a0\u5165RL\u53ef\u4ee5\u5927\u5927\u63d0\u9ad8\u6a21\u578b\u6027\u80fd\u3002\u6211\u4eec\u7684\u4e3b\u8981\u76ee\u6807\u662f\u8bc1\u660e\u84b8\u998f\u6280\u672f\u7684\u6709\u6548\u6027\uff0c\u5c06RL\u9636\u6bb5\u7684\u63a2\u7d22\u7559\u7ed9\u66f4\u5e7f\u6cdb\u7684\u7814\u7a76\u754c\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#3","title":"3 \u5b9e\u9a8c","text":"<p>\u57fa\u51c6 \u6211\u4eec\u8bc4\u4f30\u4e86MMLU\uff08Hendrycks\u7b49\u4eba\uff0c2020\uff09\u3001MMLU Redux\uff08Gema\u7b49\u4eba\uff0c2024\uff09\u3001MMLU-Pro\uff08Wang\u7b49\u4eba\uff0c2024\uff09\u3001C-Eval\uff08Huang\u7b49\u4eba\uff0c2023\uff09\u548cCMMLU\uff08Li\u7b49\u4eba\uff0c2023\u5e74\uff09\u3001IFEval\uff08Zhou\u7b49\u4eba\uff0c2023\uff0c2023\uff09\u3001FRAMES\uff08Krishna\u7b49\uff0c2024\u5e74\uff09\u3001GPQA-Diamond\uff08Rein\u7b49\u4eba\uff0c2023\uff09\u3001SimpleQA\uff08OpenAI\uff0c2024c\uff09\u3001C-SimpleQA\uff08He\u7b49\u4eba\uff0c2024c\uff09\u3001SWE Bench Verified\uff08OpenAI\uff09\u7684\u6a21\u578b\uff0c</p> <p>2024d\uff09\u3001\u52a9\u624b1\u3001LiveCodeBench\uff08Jain\u7b49\u4eba\uff0c2024\uff09\uff082024-08\u20132025-01\uff09\u3001Codeforce 2\u3001\u4e2d\u56fd\u5168\u56fd\u9ad8\u4e2d\u6570\u5b66\u5965\u6797\u5339\u514b\u7ade\u8d5b\uff08CNMO 2024\uff093\u548c\u7f8e\u56fd\u9080\u8bf7\u6570\u5b66\u8003\u8bd52024\uff08AIME 2024\uff09\u3002\u9664\u4e86\u6807\u51c6\u57fa\u51c6\u6d4b\u8bd5\u5916\uff0c\u6211\u4eec\u8fd8\u4f7f\u7528LLM\u4f5c\u4e3a\u8bc4\u5224\u6807\u51c6\uff0c\u5728\u5f00\u653e\u5f0f\u751f\u6210\u4efb\u52a1\u4e0a\u8bc4\u4f30\u6211\u4eec\u7684\u6a21\u578b\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u6211\u4eec\u575a\u6301AlpacaEval 2.0\uff08Dubois\u7b49\u4eba\uff0c2024\uff09\u548cArena Hard\uff08Li\u7b49\u4eba\uff0c2024\uff09\u7684\u539f\u59cb\u914d\u7f6e\uff0c\u5b83\u4eec\u5229\u7528GPT-4-Turbo-1106\u4f5c\u4e3a\u6210\u5bf9\u6bd4\u8f83\u7684\u5224\u65ad\u6807\u51c6\u3002\u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u53ea\u5c06\u6700\u7ec8\u6458\u8981\u63d0\u4f9b\u7ed9\u8bc4\u4f30\uff0c\u4ee5\u907f\u514d\u957f\u5ea6\u504f\u5dee\u3002\u5bf9\u4e8e\u84b8\u998f\u6a21\u578b\uff0c\u6211\u4eec\u62a5\u544a\u4e86AIME 2024\u3001MATH-500\u3001GPQA Diamond\u3001Codeforce\u548cLiveCodeBench\u7684\u4ee3\u8868\u6027\u7ed3\u679c\u3002</p> <p>\u8bc4\u4f30\u63d0\u793a \u5728DeepSeek-V3\u4e2d\u8bbe\u7f6e\u4e4b\u540e\uff0c\u4f7f\u7528simple-evals\u6846\u67b6\u4e2d\u7684\u63d0\u793a\u8bc4\u4f30MMLU\u3001DROP\u3001GPQA Diamond\u548cSimpleQA\u7b49\u6807\u51c6\u57fa\u51c6\u3002\u5bf9\u4e8eMMLU-Redux\uff0c\u6211\u4eec\u5728\u96f6\u6837\u672c\u8bbe\u7f6e\u4e2d\u91c7\u7528\u96f6\u503c\u63d0\u793a\u683c\u5f0f\uff08Lin\uff0c2024\uff09\u3002\u5728MMLU-Pro\u3001C-Eval\u548cCLUE-WSC\u65b9\u9762\uff0c\u7531\u4e8e\u6700\u521d\u7684\u63d0\u793a\u5f88\u5c11\uff0c\u6211\u4eec\u5c06\u63d0\u793a\u7565\u5fae\u4fee\u6539\u4e3a\u96f6\u6837\u672c\u8bbe\u7f6e\u3002\u51e0\u6b21\u5c04\u51fb\u4e2d\u7684CoT\u53ef\u80fd\u4f1a\u635f\u5bb3DeepSeek-R1\u7684\u6027\u80fd\u3002\u5176\u4ed6\u6570\u636e\u96c6\u9075\u5faa\u5176\u539f\u59cb\u8bc4\u4f30\u534f\u8bae\uff0c\u5e76\u7531\u5176\u521b\u5efa\u8005\u63d0\u4f9b\u9ed8\u8ba4\u63d0\u793a\u3002\u5bf9\u4e8e\u4ee3\u7801\u548c\u6570\u5b66\u57fa\u51c6\u6d4b\u8bd5\uff0cHumanEval-Mul\u6570\u636e\u96c6\u6db5\u76d6\u4e86\u516b\u79cd\u4e3b\u6d41\u7f16\u7a0b\u8bed\u8a00\uff08Python\u3001Java\u3001C++\u3001C#\u3001JavaScript\u3001TypeScript\u3001PHP\u548cBash\uff09\u3002LiveCodeBench\u4e0a\u7684\u6a21\u578b\u6027\u80fd\u4f7f\u7528CoT\u683c\u5f0f\u8fdb\u884c\u8bc4\u4f30\uff0c\u6570\u636e\u6536\u96c6\u4e8e2024\u5e748\u6708\u81f32025\u5e741\u6708\u4e4b\u95f4\u3002Codeforces\u6570\u636e\u96c6\u4f7f\u752810\u4e2aDiv.2\u7ade\u8d5b\u7684\u95ee\u9898\u4ee5\u53ca\u4e13\u5bb6\u7cbe\u5fc3\u8bbe\u8ba1\u7684\u6d4b\u8bd5\u7528\u4f8b\u8fdb\u884c\u8bc4\u4f30\uff0c\u7136\u540e\u8ba1\u7b97\u9884\u671f\u7684\u8bc4\u5206\u548c\u7ade\u4e89\u5bf9\u624b\u7684\u767e\u5206\u6bd4\u3002SWE Bench\u7684\u9a8c\u8bc1\u7ed3\u679c\u662f\u901a\u8fc7\u65e0\u4ee3\u7406\u6846\u67b6\u83b7\u5f97\u7684\uff08Xia\u7b49\u4eba\uff0c2024\uff09\u3002\u4e0eAIDER\u76f8\u5173\u7684\u57fa\u51c6\u4f7f\u7528\u201c\u5dee\u5f02\u201d\u683c\u5f0f\u8fdb\u884c\u8861\u91cf\u3002DeepSeek-R1\u7684\u8f93\u51fa\u4e0a\u9650\u4e3a\u6bcf\u4e2a\u57fa\u51c6\u768432768\u4e2a\u4ee4\u724c\u3002</p> <p>\u57fa\u7ebf \u6211\u4eec\u6839\u636e\u51e0\u4e2a\u5f3a\u5927\u7684\u57fa\u7ebf\u8fdb\u884c\u5168\u9762\u8bc4\u4f30\uff0c\u5305\u62ecDeepSeek-V3\u3001Claude-Connect-3.5-1022\u3001GPT-4o-0513\u3001OpenAI-o1-mini\u548cOpenAI-o1-1217\u3002\u7531\u4e8e\u8bbf\u95eeOpenAI-o1-1217 API\u5728\u4e2d\u56fd\u5927\u9646\u5177\u6709\u6311\u6218\u6027\uff0c\u6211\u4eec\u6839\u636e\u5b98\u65b9\u62a5\u544a\u62a5\u544a\u5176\u6027\u80fd\u3002\u5bf9\u4e8e\u84b8\u998f\u6a21\u578b\uff0c\u6211\u4eec\u8fd8\u6bd4\u8f83\u4e86\u5f00\u6e90\u6a21\u578bQwQ-32B\u9884\u89c8\u7248\uff08Qwen\uff0c2024a\uff09\u3002\u00ac</p> <p>\u8bc4\u4f30 \u8bbe\u7f6e\u6211\u4eec\u5c06\u6a21\u578b\u7684\u6700\u5927\u751f\u6210\u957f\u5ea6\u8bbe\u7f6e\u4e3a32768\u4e2a\u4ee4\u724c\u3002\u6211\u4eec\u53d1\u73b0\uff0c\u4f7f\u7528\u8d2a\u5a6a\u89e3\u7801\u6765\u8bc4\u4f30\u957f\u8f93\u51fa\u63a8\u7406\u6a21\u578b\u4f1a\u5bfc\u81f4\u66f4\u9ad8\u7684\u91cd\u590d\u7387\u548c\u4e0d\u540c\u68c0\u67e5\u70b9\u4e4b\u95f4\u7684\u663e\u8457\u5dee\u5f02\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u9ed8\u8ba4\u901a\u8fc7@\ud835\udc58 \u8bc4\u4f30\uff08Chen\u7b49\u4eba\uff0c2021\uff09\u548c\u62a5\u544apass@1\u4f7f\u7528\u975e\u96f6\u6e29\u5ea6\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u6211\u4eec\u4f7f\u75280.6\u7684\u91c7\u6837\u6e29\u5ea6\u548c\u9876\u90e8-\ud835\udc5d \u751f\u6210\u503c\u4e3a0.95\ud835\udc58 \u6bcf\u4e2a\u95ee\u9898\u7684\u7b54\u6848\uff08\u901a\u5e38\u57284\u523064\u4e4b\u95f4\uff0c\u5177\u4f53\u53d6\u51b3\u4e8e\u6d4b\u8bd5\u96c6\u7684\u5927\u5c0f\uff09\u3002Pass@1\u7136\u540e\u8ba1\u7b97\u4e3a $$ pass@1 = \\frac{1}{k} \\sum_{i=1}^{k} p_i $$ \u54ea\u91cc \\(p_{i}\\) \u8868\u793a\u4ee5\u4e0b\u5185\u5bb9\u7684\u6b63\u786e\u6027\ud835\udc56-\u7684\u56de\u5e94\u3002\u8fd9\u79cd\u65b9\u6cd5\u63d0\u4f9b\u4e86\u66f4\u53ef\u9760\u7684\u6027\u80fd\u4f30\u8ba1\u3002\u5bf9\u4e8eAIME 2024\uff0c\u6211\u4eec\u8fd8\u4f7f\u752864\u4e2a\u6837\u672c\u62a5\u544a\u4e86\u5171\u8bc6\uff08\u591a\u6570\u7968\uff09\u7ed3\u679c\uff08Wang\u7b49\u4eba\uff0c2022\uff09\uff0c\u8868\u793a\u4e3acons@64.</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#31-deepseek-r1","title":"3.1 DeepSeek-R1\u8bc4\u4f30","text":"<p>\u5bf9\u4e8eMMLU\u3001MMLU Pro\u548cGPQA Diamond\u7b49\u9762\u5411\u6559\u80b2\u7684\u77e5\u8bc6\u57fa\u51c6\u6d4b\u8bd5\uff0cDeepSeek-R1\u7684\u6027\u80fd\u4f18\u4e8eDeepSeek-V3\u3002\u8fd9\u4e00\u6539\u8fdb\u4e3b\u8981\u5f52\u56e0\u4e8eSTEM\u76f8\u5173\u95ee\u9898\u7684\u51c6\u786e\u6027\u63d0\u9ad8\uff0c\u901a\u8fc7\u5927\u89c4\u6a21\u5f3a\u5316\u5b66\u4e60\u53d6\u5f97\u4e86\u663e\u8457\u6210\u679c\u3002\u6b64\u5916\uff0cDeepSeek-R1\u5728FRAMES\u65b9\u9762\u8868\u73b0\u51fa\u8272\uff0cFRAMES\u662f\u4e00\u9879\u4f9d\u8d56\u4e8e\u4e0a\u4e0b\u6587\u7684\u957f\u671fQA\u4efb\u52a1\uff0c\u5c55\u793a\u4e86\u5176\u5f3a\u5927\u7684\u6587\u6863\u5206\u6790\u80fd\u529b\u3002\u8fd9\u7a81\u663e\u4e86\u63a8\u7406\u6a21\u578b\u5728\u4eba\u5de5\u667a\u80fd\u9a71\u52a8\u7684\u641c\u7d22\u548c\u6570\u636e\u5206\u6790\u4efb\u52a1\u4e2d\u7684\u6f5c\u529b\u3002\u5728\u4e8b\u5b9e\u57fa\u51c6SimpleQA\u4e0a\uff0cDeepSeek-R1\u7684\u8868\u73b0\u4f18\u4e8eDeepSeek-V3\uff0c\u5c55\u793a\u4e86\u5176\u5904\u7406\u57fa\u4e8e\u4e8b\u5b9e\u7684\u67e5\u8be2\u7684\u80fd\u529b\u3002\u5728OpenAI-o1\u8d85\u8fc7GPT-4o\u7684\u60c5\u51b5\u4e0b\uff0c\u4e5f\u89c2\u5bdf\u5230\u4e86\u7c7b\u4f3c\u7684\u8d8b\u52bf\u3002\u7136\u800c\uff0c\u5728\u4e2d\u56fdSimpleQA\u57fa\u51c6\u6d4b\u8bd5\u4e2d\uff0cDeepSeek-R1\u7684\u8868\u73b0\u4e0d\u5982DeepSeek-V3\uff0c\u4e3b\u8981\u662f\u56e0\u4e3a\u5b83\u503e\u5411\u4e8e\u5728\u5b89\u5168RL\u540e\u62d2\u7edd\u56de\u7b54\u67d0\u4e9b\u67e5\u8be2\u3002\u5982\u679c\u6ca1\u6709\u5b89\u5168RL\uff0cDeepSeek-R1\u7684\u51c6\u786e\u7387\u53ef\u4ee5\u8fbe\u523070%\u4ee5\u4e0a\u3002\u00ac\u00ac DeepSeek-R1\u5728IF Eval\u4e0a\u4e5f\u53d6\u5f97\u4e86\u4ee4\u4eba\u5370\u8c61\u6df1\u523b\u7684\u7ed3\u679c\uff0cIF Eval\u662f\u4e00\u4e2a\u65e8\u5728\u8bc4\u4f30\u6a21\u578b\u9075\u5faa\u683c\u5f0f\u8bf4\u660e\u80fd\u529b\u7684\u57fa\u51c6\u3002\u8fd9\u4e9b\u6539\u8fdb\u53ef\u80fd\u4e0e\u5728\u76d1\u7763\u5fae\u8c03\uff08SFT\uff09\u548c\u5f3a\u5316\u5b66\u4e60\u8bad\u7ec3\u7684\u6700\u540e\u9636\u6bb5\u7eb3\u5165\u6307\u4ee4\u8ddf\u8e2a\u6570\u636e\u6709\u5173\u3002\u6b64\u5916\uff0c\u5728AlpacaEval2.0\u548cArenaHard\u4e0a\u89c2\u5bdf\u5230\u4e86\u663e\u8457\u7684\u6027\u80fd\uff0c\u8868\u660e\u4e86DeepSeek-R1\u5728\u7f16\u5199\u4efb\u52a1\u548c\u5f00\u653e\u57df\u95ee\u7b54\u65b9\u9762\u7684\u4f18\u52bf\u3002\u5b83\u5728DeepSeek-V3\u4e0a\u7684\u663e\u8457\u8868\u73b0\u7a81\u663e\u4e86\u5927\u89c4\u6a21RL\u7684\u6cdb\u5316\u4f18\u52bf\uff0c\u8fd9\u4e0d\u4ec5\u63d0\u9ad8\u4e86\u63a8\u7406\u80fd\u529b\uff0c\u8fd8\u63d0\u9ad8\u4e86\u8de8\u4e0d\u540c\u9886\u57df\u7684\u6027\u80fd\u3002\u6b64\u5916\uff0cDeepSeek-R1\u751f\u6210\u7684\u6458\u8981\u957f\u5ea6\u7b80\u6d01\u660e\u4e86\uff0cArenaHard\u4e0a\u5e73\u5747\u6709689\u4e2a\u4ee4\u724c\uff0cAlpacaEval 2.0\u4e0a\u5e73\u5747\u67092218\u4e2a\u5b57\u7b26\u3002\u8fd9\u8868\u660e</p> <p>DeepSeek-R1\u907f\u514d\u4e86\u5728\u57fa\u4e8eGPT\u7684\u8bc4\u4f30\u8fc7\u7a0b\u4e2d\u5f15\u5165\u957f\u5ea6\u504f\u5dee\uff0c\u8fdb\u4e00\u6b65\u5de9\u56fa\u4e86\u5176\u5728\u591a\u4e2a\u4efb\u52a1\u4e2d\u7684\u7a33\u5065\u6027\u3002 \u5728\u6570\u5b66\u4efb\u52a1\u65b9\u9762\uff0cDeepSeek-R1\u7684\u6027\u80fd\u4e0eOpenAI-o1-1217\u76f8\u5f53\uff0c\u8fdc\u8fdc\u8d85\u8fc7\u4e86\u5176\u4ed6\u6a21\u578b\u3002\u5728\u7f16\u7801\u7b97\u6cd5\u4efb\u52a1\u4e0a\u4e5f\u89c2\u5bdf\u5230\u4e86\u7c7b\u4f3c\u7684\u8d8b\u52bf\uff0c\u4f8b\u5982LiveCodeBench\u548cCodeforce\uff0c\u5176\u4e2d\u4ee5\u63a8\u7406\u4e3a\u4e2d\u5fc3\u7684\u6a21\u578b\u4e3b\u5bfc\u4e86\u8fd9\u4e9b\u57fa\u51c6\u6d4b\u8bd5\u3002\u5728\u9762\u5411\u5de5\u7a0b\u7684\u7f16\u7801\u4efb\u52a1\u4e2d\uff0cOpenAI-o1-1217\u5728Aider\u4e0a\u7684\u8868\u73b0\u4f18\u4e8eDeepSeek-R1\uff0c\u4f46\u5728SWE Verified\u4e0a\u7684\u8868\u73b0\u76f8\u5f53\u3002\u6211\u4eec\u76f8\u4fe1DeepSeek-R1\u7684\u5de5\u7a0b\u6027\u80fd\u5c06\u5728\u4e0b\u4e00\u4e2a\u7248\u672c\u4e2d\u5f97\u5230\u6539\u5584\uff0c\u56e0\u4e3a\u76ee\u524d\u76f8\u5173\u7684RL\u8bad\u7ec3\u6570\u636e\u91cf\u4ecd\u7136\u975e\u5e38\u6709\u9650\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#32","title":"3.2 \u84b8\u998f\u6a21\u578b\u8bc4\u4f30","text":"<p> \u5982\u88685\u6240\u793a\uff0c\u7b80\u5355\u5730\u63d0\u53d6DeepSeek-R1\u7684\u8f93\u51fa\uff0c\u53ef\u4ee5\u4f7f\u9ad8\u6548\u7684DeepSeek-R1-7B\uff08\u5373DeepSeek-R2-Distill-Qwen-7B\uff0c\u4e0b\u540c\uff09\u5168\u9762\u8d85\u8d8aGPT-4o-0513\u7b49\u975e\u63a8\u7406\u6a21\u578b\u3002DeepSeek-R1-14B\u5728\u6240\u6709\u8bc4\u4f30\u6307\u6807\u4e0a\u90fd\u8d85\u8fc7\u4e86QwQ-32B\u9884\u89c8\u7248\uff0c\u800cDeepSeek-R-132B\u548cDeepSeek-R1-70B\u5728\u5927\u591a\u6570\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u90fd\u660e\u663e\u8d85\u8fc7\u4e86o1-mini\u3002\u8fd9\u4e9b\u7ed3\u679c\u8868\u660e\u4e86\u84b8\u998f\u7684\u5de8\u5927\u6f5c\u529b\u3002\u6b64\u5916\uff0c\u6211\u4eec\u53d1\u73b0\u5c06RL\u5e94\u7528\u4e8e\u8fd9\u4e9b\u84b8\u998f\u6a21\u578b\u4f1a\u4ea7\u751f\u663e\u8457\u7684\u8fdb\u4e00\u6b65\u6536\u76ca\u3002\u6211\u4eec\u8ba4\u4e3a\u8fd9\u503c\u5f97\u8fdb\u4e00\u6b65\u63a2\u7d22\uff0c\u56e0\u6b64\u8fd9\u91cc\u53ea\u4ecb\u7ecd\u7b80\u5355\u7684SFT\u63d0\u53d6\u6a21\u578b\u7684\u7ed3\u679c\u3002\u00ac</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#4","title":"4 \u8ba8\u8bba","text":""},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#41","title":"4.1 \u84b8\u998f\u4e0e\u5f3a\u5316\u5b66\u4e60","text":"<p>\u5728\u7b2c3.2\u8282\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c\u901a\u8fc7\u63d0\u53d6DeepSeek-R1\uff0c\u5c0f\u6a21\u578b\u53ef\u4ee5\u83b7\u5f97\u4ee4\u4eba\u5370\u8c61\u6df1\u523b\u7684\u7ed3\u679c\u3002\u7136\u800c\uff0c\u4ecd\u7136\u5b58\u5728\u4e00\u4e2a\u95ee\u9898\uff1a\u8be5\u6a21\u578b\u80fd\u5426\u5728\u4e0d\u8fdb\u884c\u84b8\u998f\u7684\u60c5\u51b5\u4e0b\uff0c\u901a\u8fc7\u672c\u6587\u8ba8\u8bba\u7684\u5927\u89c4\u6a21RL\u8bad\u7ec3\u5b9e\u73b0\u53ef\u6bd4\u7684\u6027\u80fd\uff1f \u4e3a\u4e86\u56de\u7b54\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u4f7f\u7528\u6570\u5b66\u3001\u4ee3\u7801\u548cSTEM\u6570\u636e\u5728Qwen-32B-Base\u4e0a\u8fdb\u884c\u4e86\u5927\u89c4\u6a21\u7684RL\u8bad\u7ec3\uff0c\u8bad\u7ec3\u4e86\u8d85\u8fc710K\u6b65\uff0c\u5f97\u5230\u4e86DeepSeek-R1-Zero-Qwen-32B\u3002\u88686\u6240\u793a\u7684\u5b9e\u9a8c\u7ed3\u679c\u8868\u660e\uff0c\u5728\u5927\u89c4\u6a21\u4f7f\u752832B\u57fa\u7840\u6a21\u578b\u540e</p> <p></p> <p>RL\u8bad\u7ec3\uff0c\u8fbe\u5230\u4e0eQwQ-32B\u9884\u89c8\u76f8\u5f53\u7684\u6027\u80fd\u3002\u7136\u800c\uff0c\u4eceDeepSeek-R1\u4e2d\u63d0\u53d6\u7684DeepSeek-R1-Distill-Qwen-32B\u5728\u6240\u6709\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u7684\u8868\u73b0\u660e\u663e\u4f18\u4e8eDeepSeek-R2-Zero-Qwen-34B\u3002 \u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u5f97\u51fa\u4e24\u4e2a\u7ed3\u8bba\uff1a\u7b2c\u4e00\uff0c\u5c06\u66f4\u5f3a\u5927\u7684\u6a21\u578b\u84b8\u998f\u6210\u66f4\u5c0f\u7684\u6a21\u578b\u4f1a\u4ea7\u751f\u5f88\u597d\u7684\u7ed3\u679c\uff0c\u800c\u4f9d\u8d56\u4e8e\u672c\u6587\u63d0\u5230\u7684\u5927\u89c4\u6a21RL\u7684\u8f83\u5c0f\u6a21\u578b\u9700\u8981\u5de8\u5927\u7684\u8ba1\u7b97\u80fd\u529b\uff0c\u751a\u81f3\u53ef\u80fd\u65e0\u6cd5\u8fbe\u5230\u84b8\u998f\u7684\u6027\u80fd\u3002\u5176\u6b21\uff0c\u5c3d\u7ba1\u84b8\u998f\u7b56\u7565\u65e2\u7ecf\u6d4e\u53c8\u6709\u6548\uff0c\u4f46\u8981\u8d85\u8d8a\u667a\u80fd\u7684\u754c\u9650\uff0c\u53ef\u80fd\u4ecd\u9700\u8981\u66f4\u5f3a\u5927\u7684\u57fa\u7840\u6a21\u578b\u548c\u66f4\u5927\u89c4\u6a21\u7684\u5f3a\u5316\u5b66\u4e60\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#42","title":"4.2 \u5931\u8d25\u7684\u5c1d\u8bd5","text":"<p>\u5728\u5f00\u53d1DeepSeek-R1\u7684\u65e9\u671f\u9636\u6bb5\uff0c\u6211\u4eec\u4e5f\u9047\u5230\u4e86\u5931\u8d25\u548c\u632b\u6298\u3002\u6211\u4eec\u5728\u8fd9\u91cc\u5206\u4eab\u6211\u4eec\u7684\u5931\u8d25\u7ecf\u9a8c\u4ee5\u63d0\u4f9b\u89c1\u89e3\uff0c\u4f46\u8fd9\u5e76\u4e0d\u610f\u5473\u7740\u8fd9\u4e9b\u65b9\u6cd5\u65e0\u6cd5\u5f00\u53d1\u6709\u6548\u7684\u63a8\u7406\u6a21\u578b\u3002</p> <p>\u8fc7\u7a0b\u5956\u52b1\u6a21\u578b\uff08PRM\uff09PRM\u662f\u4e00\u79cd\u5408\u7406\u7684\u65b9\u6cd5\uff0c\u53ef\u4ee5\u5f15\u5bfc\u6a21\u578b\u671d\u7740\u66f4\u597d\u7684\u65b9\u6cd5\u89e3\u51b3\u63a8\u7406\u4efb\u52a1\uff08Lightman\u7b49\u4eba\uff0c2023\uff1bUesato\u7b49\u4eba\uff0c2022\uff1bWang\u7b49\u4eba\uff0c2023\uff09\u3002\u7136\u800c\uff0c\u5728\u5b9e\u8df5\u4e2d\uff0cPRM\u6709\u4e09\u4e2a\u4e3b\u8981\u5c40\u9650\u6027\uff0c\u53ef\u80fd\u4f1a\u963b\u788d\u5176\u6700\u7ec8\u7684\u6210\u529f\u3002\u9996\u5148\uff0c\u5728\u4e00\u822c\u63a8\u7406\u4e2d\u660e\u786e\u5b9a\u4e49\u7ec6\u7c92\u5ea6\u6b65\u9aa4\u5177\u6709\u6311\u6218\u6027\u3002\u5176\u6b21\uff0c\u786e\u5b9a\u5f53\u524d\u4e2d\u95f4\u6b65\u9aa4\u662f\u5426\u6b63\u786e\u662f\u4e00\u9879\u5177\u6709\u6311\u6218\u6027\u7684\u4efb\u52a1\u3002\u4f7f\u7528\u6a21\u578b\u7684\u81ea\u52a8\u6ce8\u91ca\u53ef\u80fd\u4e0d\u4f1a\u4ea7\u751f\u4ee4\u4eba\u6ee1\u610f\u7684\u7ed3\u679c\uff0c\u800c\u624b\u52a8\u6ce8\u91ca\u4e0d\u5229\u4e8e\u6269\u5927\u89c4\u6a21\u3002\u7b2c\u4e09\uff0c\u4e00\u65e6\u5f15\u5165\u57fa\u4e8e\u6a21\u578b\u7684PRM\uff0c\u5b83\u4e0d\u53ef\u907f\u514d\u5730\u4f1a\u5bfc\u81f4\u5956\u52b1\u9ed1\u5ba2\u653b\u51fb\uff08Gao\u7b49\u4eba\uff0c2022\uff09\uff0c\u91cd\u65b0\u8bad\u7ec3\u5956\u52b1\u6a21\u578b\u9700\u8981\u989d\u5916\u7684\u8bad\u7ec3\u8d44\u6e90\uff0c\u5e76\u4f7f\u6574\u4e2a\u8bad\u7ec3\u7ba1\u9053\u590d\u6742\u5316\u3002\u603b\u4e4b\uff0c\u5c3d\u7ba1PRM\u5728\u91cd\u65b0\u6392\u5e8f\u6a21\u578b\u751f\u6210\u7684\u524dN\u4e2a\u54cd\u5e94\u6216\u8f85\u52a9\u5f15\u5bfc\u641c\u7d22\u65b9\u9762\u8868\u73b0\u826f\u597d\uff08Snell\u7b49\u4eba\uff0c2024\uff09\uff0c\u4f46\u4e0e\u6211\u4eec\u5b9e\u9a8c\u4e2d\u5927\u89c4\u6a21\u5f3a\u5316\u5b66\u4e60\u8fc7\u7a0b\u4e2d\u5f15\u5165\u7684\u989d\u5916\u8ba1\u7b97\u5f00\u9500\u76f8\u6bd4\uff0c\u5b83\u7684\u4f18\u52bf\u662f\u6709\u9650\u7684\u3002</p> <p>\u53d7AlphaGo\uff08Silver\u7b49\u4eba\uff0c2017b\uff09\u548cAlphaZero\uff08Silver\u00ac\u7b49\uff0c2017a\uff09\u7684\u542f\u53d1\uff0c\u6211\u4eec\u63a2\u7d22\u4e86\u4f7f\u7528\u8499\u7279\u5361\u6d1b\u6811\u641c\u7d22\uff08MCTS\uff09\u6765\u589e\u5f3a\u6d4b\u8bd5\u65f6\u95f4\u8ba1\u7b97\u7684\u53ef\u6269\u5c55\u6027\u3002\u8fd9\u79cd\u65b9\u6cd5\u6d89\u53ca\u5c06\u7b54\u6848\u5206\u89e3\u4e3a\u66f4\u5c0f\u7684\u90e8\u5206\uff0c\u4f7f\u6a21\u578b\u80fd\u591f\u7cfb\u7edf\u5730\u63a2\u7d22\u89e3\u51b3\u65b9\u6848\u7a7a\u95f4\u3002\u4e3a\u4e86\u4fc3\u8fdb\u8fd9\u4e00\u70b9\uff0c\u6211\u4eec\u63d0\u793a\u6a21\u578b\u751f\u6210\u591a\u4e2a\u6807\u7b7e\uff0c\u8fd9\u4e9b\u6807\u7b7e\u5bf9\u5e94\u4e8e\u641c\u7d22\u6240\u9700\u7684\u7279\u5b9a\u63a8\u7406\u6b65\u9aa4\u3002\u5bf9\u4e8e\u8bad\u7ec3\uff0c\u6211\u4eec\u9996\u5148\u4f7f\u7528\u6536\u96c6\u5230\u7684\u63d0\u793a\uff0c\u5728\u9884\u8bad\u7ec3\u503c\u6a21\u578b\u7684\u6307\u5bfc\u4e0b\uff0c\u901a\u8fc7MCTS\u627e\u5230\u7b54\u6848\u3002\u968f\u540e\uff0c\u6211\u4eec\u4f7f\u7528\u5f97\u5230\u7684\u95ee\u7b54\u5bf9\u6765\u8bad\u7ec3\u53c2\u4e0e\u8005\u6a21\u578b\u548c\u4ef7\u503c\u6a21\u578b\uff0c\u8fed\u4ee3\u5730\u6539\u8fdb\u8fc7\u7a0b\u3002 \u7136\u800c\uff0c\u8fd9\u79cd\u65b9\u6cd5\u5728\u6269\u5927\u57f9\u8bad\u89c4\u6a21\u65f6\u9047\u5230\u4e86\u51e0\u4e2a\u6311\u6218\u3002\u9996\u5148\uff0c\u4e0e\u56fd\u9645\u8c61\u68cb\u4e0d\u540c\uff0c\u56fd\u9645\u8c61\u68cb\u7684\u641c\u7d22\u7a7a\u95f4\u76f8\u5bf9\u5b9a\u4e49\u826f\u597d\uff0c\u4ee4\u724c\u751f\u6210\u63d0\u4f9b\u4e86\u4e00\u79cd \u641c\u7d22\u7a7a\u95f4\u5448\u6307\u6570\u7ea7\u589e\u957f\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u4e3a\u6bcf\u4e2a\u8282\u70b9\u8bbe\u7f6e\u4e86\u4e00\u4e2a\u6700\u5927\u6269\u5c55\u9650\u5236\uff0c\u4f46\u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6a21\u578b\u9677\u5165\u5c40\u90e8\u6700\u4f18\u3002\u5176\u6b21\uff0c\u4ef7\u503c\u6a21\u578b\u76f4\u63a5\u5f71\u54cd\u751f\u6210\u7684\u8d28\u91cf\uff0c\u56e0\u4e3a\u5b83\u6307\u5bfc\u4e86\u641c\u7d22\u8fc7\u7a0b\u7684\u6bcf\u4e00\u6b65\u3002\u8bad\u7ec3\u7ec6\u7c92\u5ea6\u7684\u4ef7\u503c\u6a21\u578b\u672c\u8d28\u4e0a\u5f88\u56f0\u96be\uff0c\u8fd9\u4f7f\u5f97\u6a21\u578b\u8fed\u4ee3\u6539\u8fdb\u5177\u6709\u6311\u6218\u6027\u3002\u867d\u7136AlphaGo\u7684\u6838\u5fc3\u6210\u529f\u4f9d\u8d56\u4e8e\u8bad\u7ec3\u4e00\u4e2a\u4ef7\u503c\u6a21\u578b\u6765\u9010\u6b65\u63d0\u9ad8\u5176\u6027\u80fd\uff0c\u4f46\u7531\u4e8e\u4ee4\u724c\u751f\u6210\u7684\u590d\u6742\u6027\uff0c\u8fd9\u4e00\u539f\u5219\u5728\u6211\u4eec\u7684\u8bbe\u7f6e\u4e2d\u5f88\u96be\u590d\u5236\u3002 \u603b\u4e4b\uff0c\u867d\u7136MCTS\u5728\u4e0e\u9884\u8bad\u7ec3\u7684\u503c\u6a21\u578b\u914d\u5bf9\u65f6\u53ef\u4ee5\u63d0\u9ad8\u63a8\u7406\u8fc7\u7a0b\u4e2d\u7684\u6027\u80fd\uff0c\u4f46\u901a\u8fc7\u81ea\u641c\u7d22\u8fed\u4ee3\u63d0\u9ad8\u6a21\u578b\u6027\u80fd\u4ecd\u7136\u662f\u4e00\u4e2a\u91cd\u5927\u6311\u6218\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#5","title":"5 \u7ed3\u8bba\u3001\u5c40\u9650\u6027\u548c\u672a\u6765\u5de5\u4f5c","text":"<p>\u5728\u8fd9\u9879\u5de5\u4f5c\u4e2d\uff0c\u6211\u4eec\u5206\u4eab\u4e86\u901a\u8fc7\u5f3a\u5316\u5b66\u4e60\u63d0\u9ad8\u6a21\u578b\u63a8\u7406\u80fd\u529b\u7684\u8fc7\u7a0b\u3002DeepSeek-R1-Zero\u4ee3\u8868\u4e86\u4e00\u79cd\u7eaf\u7cb9\u7684\u5f3a\u5316\u5b66\u4e60\u65b9\u6cd5\uff0c\u4e0d\u4f9d\u8d56\u4e8e\u51b7\u542f\u52a8\u6570\u636e\uff0c\u5728\u5404\u79cd\u4efb\u52a1\u4e2d\u5b9e\u73b0\u4e86\u5f3a\u5927\u7684\u6027\u80fd\u3002DeepSeek-R1\u66f4\u5f3a\u5927\uff0c\u5229\u7528\u51b7\u542f\u52a8\u6570\u636e\u548c\u8fed\u4ee3RL\u5fae\u8c03\u3002\u6700\u7ec8\uff0cDeepSeek-R1\u5728\u4e00\u7cfb\u5217\u4efb\u52a1\u4e0a\u5b9e\u73b0\u4e86\u4e0eOpenAI-o1-1217\u76f8\u5f53\u7684\u6027\u80fd\u3002 \u6211\u4eec\u8fdb\u4e00\u6b65\u63a2\u7d22\u4e86\u5c06\u63a8\u7406\u80fd\u529b\u84b8\u998f\u4e3a\u5c0f\u578b\u5bc6\u96c6\u6a21\u578b\u7684\u65b9\u6cd5\u3002\u6211\u4eec\u4f7f\u7528DeepSeek-R1\u4f5c\u4e3a\u6559\u5e08\u6a21\u578b\u6765\u751f\u6210800K\u7684\u8bad\u7ec3\u6837\u672c\uff0c\u5e76\u5bf9\u51e0\u4e2a\u5c0f\u7684\u5bc6\u96c6\u6a21\u578b\u8fdb\u884c\u5fae\u8c03\u3002\u7ed3\u679c\u5f88\u6709\u5e0c\u671b\uff1aDeepSeek-R1-Distill-Qwen-1.5B\u5728\u6570\u5b66\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u7684\u8868\u73b0\u4f18\u4e8eGPT-4o\u548cClaude-3.5-Sonnet\uff0cAIME\u4e3a28.9%\uff0cmath\u4e3a83.9%\u3002\u5176\u4ed6\u5bc6\u96c6\u6a21\u578b\u4e5f\u53d6\u5f97\u4e86\u4ee4\u4eba\u5370\u8c61\u6df1\u523b\u7684\u7ed3\u679c\uff0c\u660e\u663e\u4f18\u4e8e\u57fa\u4e8e\u76f8\u540c\u5e95\u5c42\u68c0\u67e5\u70b9\u7684\u5176\u4ed6\u6307\u4ee4\u8c03\u4f18\u6a21\u578b\u3002 \u672a\u6765\uff0c\u6211\u4eec\u8ba1\u5212\u6295\u8d44\u4e8eDeepSeek-R1\u7684\u4ee5\u4e0b\u65b9\u5411\u7684\u7814\u7a76\u3002 * \u4e00\u822c\u80fd\u529b\uff1a\u76ee\u524d\uff0cDeepSeek-R1\u5728\u51fd\u6570\u8c03\u7528\u3001\u591a\u56de\u5408\u3001\u590d\u6742\u89d2\u8272\u626e\u6f14\u548cJSON\u8f93\u51fa\u7b49\u4efb\u52a1\u4e0a\u7684\u80fd\u529b\u8fd8\u4e0d\u5982DeepSeek-V3\u3002\u5c55\u671b\u672a\u6765\uff0c\u6211\u4eec\u8ba1\u5212\u63a2\u7d22\u5728\u591a\u957f\u65f6\u95f4\u5185\u53ef\u4ee5\u5229\u7528CoT\u6765\u589e\u5f3a\u8fd9\u4e9b\u9886\u57df\u7684\u4efb\u52a1\u3002 * \u8bed\u8a00\u6df7\u5408\uff1aDeepSeek-R1\u76ee\u524d\u9488\u5bf9\u4e2d\u6587\u548c\u82f1\u6587\u8fdb\u884c\u4e86\u4f18\u5316 \u5728\u5904\u7406\u5176\u4ed6\u8bed\u8a00\u7684\u67e5\u8be2\u65f6\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u8bed\u8a00\u6df7\u5408\u95ee\u9898\u3002\u4f8b\u5982\uff0cDeepSeek-R1\u53ef\u80fd\u4f1a\u4f7f\u7528\u82f1\u8bed\u8fdb\u884c\u63a8\u7406\u548c\u54cd\u5e94\uff0c\u5373\u4f7f\u67e5\u8be2\u8bed\u8a00\u4e0d\u662f\u82f1\u8bed\u6216\u4e2d\u6587\u3002\u6211\u4eec\u7684\u76ee\u6807\u662f\u5728\u672a\u6765\u7684\u66f4\u65b0\u4e2d\u89e3\u51b3\u8fd9\u4e00\u9650\u5236\u3002 * \u63d0\u793a\u5de5\u7a0b\uff1a\u5728\u8bc4\u4f30DeepSeek-R1\u65f6\uff0c\u6211\u4eec\u89c2\u5bdf\u5230\u5b83\u5f88\u654f\u611f \u63d0\u793a\u3002\u5f88\u5c11\u6709\u5c04\u95e8\u63d0\u793a\u4f1a\u6301\u7eed\u964d\u4f4e\u5176\u8868\u73b0\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u5efa\u8bae\u7528\u6237\u76f4\u63a5\u63cf\u8ff0\u95ee\u9898\uff0c\u5e76\u4f7f\u7528\u96f6\u6837\u672c\u8bbe\u7f6e\u6307\u5b9a\u8f93\u51fa\u683c\u5f0f\u4ee5\u83b7\u5f97\u6700\u4f73\u7ed3\u679c\u3002 * \u8f6f\u4ef6\u5de5\u7a0b\u4efb\u52a1\uff1a\u7531\u4e8e\u8bc4\u4f30\u65f6\u95f4\u957f\uff0c\u5f71\u54cd\u6548\u7387- \u7531\u4e8eRL\u8fc7\u7a0b\u7684\u79d1\u5b66\u6027\uff0c\u5927\u89c4\u6a21RL\u5c1a\u672a\u5728\u8f6f\u4ef6\u5de5\u7a0b\u4efb\u52a1\u4e2d\u5f97\u5230\u5e7f\u6cdb\u5e94\u7528\u3002\u56e0\u6b64\uff0cDeepSeek-R1\u5728\u8f6f\u4ef6\u5de5\u7a0b\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u5e76\u6ca1\u6709\u8868\u73b0\u51fa\u6bd4DeepSeek-V3\u7684\u5de8\u5927\u6539\u8fdb\u3002\u672a\u6765\u7684\u7248\u672c\u5c06\u901a\u8fc7\u5728\u8f6f\u4ef6\u5de5\u7a0b\u6570\u636e\u4e0a\u5b9e\u65bd\u62d2\u7edd\u91c7\u6837\u6216\u5728RL\u8fc7\u7a0b\u4e2d\u5f15\u5165\u5f02\u6b65\u8bc4\u4f30\u6765\u89e3\u51b3\u8fd9\u4e00\u95ee\u9898\uff0c\u4ee5\u63d0\u9ad8\u6548\u7387\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseek_r1/DeepSeek_R1_Incentivizing_Reasoning_Capability_in_LLMs_via_Reinforcement_Learning/#_2","title":"\u53c2\u8003\u6587\u732e","text":"<ul> <li>AI@Meta. Llama 3.1 model card, 2024. URL https://github.com/meta-llama/llama-m odels/blob/main/models/llama3_1/MODEL_CARD.md.</li> <li>Anthropic. Claude 3.5 sonnet, 2024. URL https://www.anthropic.com/news/claude-3 -5-sonnet.</li> <li>M. Chen, J. Tworek, H. Jun, Q. Yuan, H. P. de Oliveira Pinto, J. Kaplan, H. Edwards, Y. Burda, N. Joseph, G. Brockman, A. Ray, R. Puri, G. Krueger, M. Petrov, H. Khlaaf, G. Sastry, P. Mishkin, B. Chan, S. Gray, N. Ryder, M. Pavlov, A. Power, L. Kaiser, M. Bavarian, C. Winter, P. Tillet, F. P. Such, D. Cummings, M. Plappert, F. Chantzis, E. Barnes, A. Herbert-Voss, W. H. Guss, A. Nichol, A. Paino, N. Tezak, J. Tang, I. Babuschkin, S. Balaji, S. Jain, W. Saunders, C. Hesse, A. N. Carr, J. Leike, J. Achiam, V. Misra, E. Morikawa, A. Radford, M. Knight, M. Brundage, M. Murati, K. Mayer, P. Welinder, B. McGrew, D. Amodei, S. McCandlish, I. Sutskever, and W. Zaremba. Evaluating large language models trained on code. CoRR, abs/2107.03374, 2021. URL https://arxiv.org/abs/2107.03374. W.\u624e\u4f26\u5df4\u3002\u8bc4\u4f30\u57fa\u4e8e\u4ee3\u7801\u8bad\u7ec3\u7684\u5927\u578b\u8bed\u8a00\u6a21\u578b\u3002\u7f8e\u56fd\u6ce8\u518c\u4f1a\u8ba1\u5e08\u534f\u4f1a\uff0cabs/2107.033742021\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://arxiv.org/abs/2107.03374. A.\u675c\u8d1d\u3001A.Jauhri\u3001A.\u6f58\u8fea\u3001A.\u5361\u8fea\u5b89\u3001A.\u8fbe\u5c14\u3001A.\u83b1\u7279\u66fc\u3001A.\u9a6c\u56fe\u5c14\u3001A.\u820d\u6ed5\uff0c A.\u6768\uff0cA.\u8303\uff0c\u7b49\u3002\u9a86\u9a7c3\u7fa4\u6a21\u578b\u3002arXiv\u9884\u5370\u672carXiv:2407.217832024\u3002 Y.Dubois\u3001B.Galambosi\u3001P.Liang\u548cT.B.Hashimoto\u3002\u957f\u5ea6\u63a7\u5236\u7f8a\u9a7c\u8bc4\u4f30\uff1a\u4e00\u79cd\u7b80\u5355\u7684\u65b9\u6cd5\u6765\u6d88\u9664\u81ea\u52a8\u8bc4\u4f30\u5668\u7684\u8d1f\u62c5\u3002arXiv\u9884\u5370\u672carXiv:2404044752024\u3002 \u51af\u3001\u4e07\u3001\u6e29\u3001\u9ea6\u5361\u52d2\u3001\u6e29\u3001\u5f20\u3001\u738b\u30022024\u5e74\uff0c\u7c7b\u4f3cAlphazero\u7684\u6811\u641c\u7d22\u53ef\u4ee5\u6307\u5bfc\u5927\u578b\u8bed\u8a00\u6a21\u578b\u7684\u89e3\u7801\u548c\u8bad\u7ec3\u3002URL https: //arxiv.org/abs/2309.17179\u3002 \u9ad8\u3001\u8212\u5c14\u66fc\u548c\u5e0c\u5c14\u987f\u30022022\u5e74\u5956\u52b1\u6a21\u578b\u8fc7\u5ea6\u4f18\u5316\u7684\u7f29\u653e\u5b9a\u5f8b\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740 https://arxiv.org/abs/2210.10760. A.P.Gema\u3001J.O.J.Leang\u3001G.Hong\u3001A.Devoto\u3001A.C.M.Mancino\u3001R.Saxena\u3001X.He\u3001Y.\u8d75\u3001X.Du\u3001M.R.G.Madani\u3001C.Barale\u3001R.McHardy\u3001J.Harris\u3001J.Kaddour\u3001E.van Krieken\u548c P.Minervini\u3002\u6211\u4eec\u7ed3\u675fmmlu\u4e86\u5417\uff1f\u7f8e\u56fd\u6ce8\u518c\u4f1a\u8ba1\u5e08\u534f\u4f1a\uff0cabs/2406.041272024\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://doi.or\u514b/10.48550/arXiv.2406.04127\u3002 \u8c37\u6b4c\u3002\u6211\u4eec\u7684\u4e0b\u4e00\u4ee3\u578b\u53f7\uff1aGemini 1.52024\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://blog.google/technology/ai/google-geemini\u4e0b\u4e00\u4ee3\u6a21\u578b-2024\u5e742\u6708\u3002 \u4f55\uff0c\u674e\uff0c\u5218\uff0c\u8c2d\uff0c\u738b\uff0c\u9ec4\uff0c\u5e03\uff0c\u90ed\uff0c\u80e1\uff0c\u90d1\uff0c\u7b49\u3002\u00ac\u6c49\u8bed\u7b80\u6613\u95ee\u7b54\uff1a\u5927\u578b\u8bed\u8a00\u6a21\u578b\u7684\u6c49\u8bed\u771f\u5b9e\u6027\u8bc4\u4ef7\u3002arXiv\u9884\u5370\u672carXiv:2411.071402024\u3002 D.Hendrycks\u3001C.Burns\u3001S.Basart\u3001A.Zou\u3001M.Mazeika\u3001D.Song\u548cJ.Steinhardt\u3002\u6d4b\u91cf\u5927\u91cf\u591a\u4efb\u52a1\u8bed\u8a00\u7406\u89e3\u80fd\u529b\u3002arXiv\u9884\u5370\u672carXiv:2009.03302020\u3002 \u9ec4\uff0c\u767d\uff0c\u6731\uff0c\u5f20\uff0c\u5f20\uff0c\u82cf\uff0c\u5218\uff0c\u5415\uff0c\u5f20\uff0c\u96f7\uff0c\u7b49.C-Eval:\u4e00\u4e2a\u591a\u5c42\u6b21\u3001\u591a\u5b66\u79d1\u7684\u4e2d\u56fd\u57fa\u7840\u6a21\u578b\u8bc4\u4ef7\u5957\u4ef6\u3002arXiv\u9884\u5370\u672carXiv:2305.08322023\u3002 \u7b80\uff0c\u97e9\uff0c\u987e\uff0c\u674e\uff0c\u960e\uff0c\u5f20\uff0c\u738b\uff0c\u5b59\uff0c\u68ee\uff0c\u65af\u6258\u4f0a\u5361\u3002Livecodebench\uff1a\u5bf9\u4ee3\u7801\u7684\u5927\u578b\u8bed\u8a00\u6a21\u578b\u8fdb\u884c\u6574\u4f53\u548c\u65e0\u6c61\u67d3\u7684\u8bc4\u4f30\u3002\u7f8e\u56fd\u6ce8\u518c\u4f1a\u8ba1\u5e08\u534f\u4f1a\uff0cabs/2403.079742024\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://doi.org/10.48550/arXiv.2403.07974.</li> </ul> <p>S.\u514b\u91cc\u5e0c\u7eb3\u3001K.\u514b\u91cc\u5e0c\u7eb3\u3001A.Mohananey\u3001S.Schwarcz\u3001A.Stambler\u3001S.Upadhyay\u548cM.Faruqui\u3002\u4e8b\u5b9e\u3001\u83b7\u53d6\u548c\u539f\u56e0\uff1a\u68c0\u7d22\u589e\u5f3a\u751f\u6210\u7684\u7edf\u4e00\u8bc4\u4f30\u3002\u7f8e\u56fd\u5fc3\u810f\u75c5\u5b66\u4f1a\uff0cabs/2409.129412024\u3002doi:10.48550/ARXIV.2409.12941\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://doi.org/10.48550/arXiv.2409.12941\u3002 A.Kumar\uff0cV.Zhuang\uff0cR.Agarwal\uff0cY.Su\uff0cJ.D.Co Reyes\uff0cA.Singh\uff0cK.Baumli\uff0cS.Iqbal\uff0cC.Bishop\uff0cR.Roelofs\u7b49\u4eba\u3002\u901a\u8fc7\u5f3a\u5316\u5b66\u4e60\u8bad\u7ec3\u8bed\u8a00\u6a21\u578b\u8fdb\u884c\u81ea\u6211\u7ea0\u6b63\u3002arXiv\u9884\u5370\u672carXiv:2409.129172024\u3002 H.Li\u3001Y.Zhang\u3001F.Koto\u3001Y.Yang\u3001H.\u8d75\u3001Y.Gong\u3001N.Duan\u548cT.Baldwin\u3002CMMLU\uff1a\u6d4b\u91cf\u00ac\u4e2d\u6587\u4e2d\u7684\u5927\u89c4\u6a21\u591a\u4efb\u52a1\u8bed\u8a00\u7406\u89e3\u80fd\u529b\u3002arXiv\u9884\u5370\u672carXiv:2306.09212023\u3002 \u674e\u3001\u848b\u3001\u5f17\u91cc\u514b\u3001\u9093\u62c9\u666e\u3001\u5434\u3001\u6731\u3001\u5188\u8428\u96f7\u65af\u548c\u65af\u6258\u4f0a\u5361\u3002\u4ece\u4f17\u5305\u6570\u636e\u5230\u9ad8\u8d28\u91cf\u57fa\u51c6\u6d4b\u8bd5\uff1a\u7ade\u6280\u573a\u786c\u4ef6\u548c\u57fa\u51c6\u6784\u5efa\u5668\u7ba1\u9053\u3002arXiv\u9884\u5370\u672carXiv:2406.19392024\u3002 H.Lightman\u3001V.Kosaraju\u3001Y.Burda\u3001H.Edwards\u3001B.Baker\u3001T.Lee\u3001J.Leike\u3001J.Schulman\u3001I.Sutskever\u548cK.Cobbe\u3002\u8ba9\u6211\u4eec\u4e00\u6b65\u4e00\u6b65\u5730\u9a8c\u8bc1\u3002arXiv\u9884\u5370\u672carXiv:2305.20052023\u3002 \u6797\uff1a\u300aZeroEval\uff1a\u8bc4\u4f30\u8bed\u8a00\u6a21\u578b\u7684\u7edf\u4e00\u6846\u67b6\u300b\uff0c2024\u5e747\u6708\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740 https://github.com/WildEval/ZeroEval. \u6700\u9ad8\u53ef\u7528\u6027\u6784\u67b6\u3002\u7f8e\u56fd\u6570\u5b66\u9080\u8bf7\u8003\u8bd5\u3002\u5728\u7f8e\u56fd\u9080\u8bf7\u6570\u5b66\u8003\u8bd5-AIME 2024\uff0c2024\u5e742\u6708\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://maa.org/math -\u7ade\u8d5b/\u7f8e\u56fd\u6570\u5b66\u9080\u8bf7\u8d5b\u3002 OpenAI\u3002\u4f60\u597d\uff0cGPT-4o\uff0c2024a\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://openai.com/index/hello-gpt-4o/. OpenAI\u3002\u5b66\u4f1a\u7528llms\u63a8\u7406\uff0c2024b\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://openai.com/index/learning-to-reason-with-llms/\u3002 OpenAI\u3002\u4ecb\u7ecdSimpleQA\uff0c2024c\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://openai.com/index/introducing -simpleqa/\u3002 OpenAI\u3002\u5f15\u5165SWE\u8bd5\u9a8c\u53f0\u9a8c\u8bc1\uff0c\u6211\u4eec\u5c06\u53d1\u5e03\u4e00\u4e2a\u7ecf\u8fc7\u4eba\u7c7b\u9a8c\u8bc1\u7684SWE\u8bd5\u9a8c\u53f0\u5b50\u96c6\uff0c\u8d85\u8fc72024d\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://openai.com/index/introducing-swe-bench -\u9a8c\u8bc1/\u3002 Qwen\u3002Qwq\uff1a\u6df1\u5165\u601d\u8003\u672a\u77e5\u7684\u8fb9\u754c\uff0c2024a\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://qwenlm .github.io/blog/qwq-32b\u9884\u89c8/\u3002 Qwen\u3002Qwen2.5\uff1a\u4e00\u7ec4\u57fa\u7840\u6a21\u578b\uff0c2024b\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://qwenlm.github.io/blog/qwen2.5\u3002 D.\u8d56\u56e0\u3001B.L.\u4faf\u3001A.C.\u65af\u8482\u514b\u5170\u3001J.\u4f69\u8482\u3001R.Y.\u5e9e\u3001J.\u72c4\u62c9\u5c3c\u3001J.\u8fc8\u514b\u5c14\u548cS.R.\u9c8d\u66fc\u3002GPQA\uff1a\u4e00\u4e2a\u7814\u7a76\u751f\u7ea7\u522b\u7684\u8c37\u6b4c\u8bc1\u660e\u95ee\u7b54\u57fa\u51c6\u3002arXiv\u9884\u5370\u672carXiv:2311.12022023\u3002 \u90b5\u5efa\u56fd\uff0c\u738b\uff0c\u6731\uff0c\u5f90\uff0c\u5b8b\uff0c\u5f20\uff0c\u674e\uff0c\u5434\uff0c\u90ed\u3002Deepseekmath\uff1a\u5728\u5f00\u653e\u8bed\u8a00\u6a21\u578b\u4e2d\u7a81\u7834\u6570\u5b66\u63a8\u7406\u7684\u6781\u9650\u3002arXiv\u9884\u5370\u672carXiv:2402.033002024\u3002 D.Silver\u3001T.Hubert\u3001J.Schrittwieser\u3001I.Antonoglou\u3001M.Lai\u3001A.Guez\u3001M.Lanctot\u3001L.Sifre\u3001D.Kumaran\u3001T.Graepel\u3001T.P.Lillicrap\u3001K.Simonyan\u548cD.Hassabis\u3002\u4f7f\u7528\u4e00\u822c\u5f3a\u5316\u5b66\u4e60\u7b97\u6cd5\u901a\u8fc7\u81ea\u6211\u6e38\u620f\u638c\u63e1\u56fd\u9645\u8c61\u68cb\u548c\u5c06\u68cb\u3002\u7f8e\u56fd\u6ce8\u518c\u4f1a\u8ba1\u5e08\u534f\u4f1a\uff0cabs/1712.01815\uff0c2017a\u3002URL\u3002</p> <p>D.\u897f\u5c14\u5f17\u3001J.Schrittwieser\u3001K.Simonyan\u3001I.Antonoglou\u3001A.\u9ec4\u3001A.Guez\u3001T.Hubert\u3001L.Baker\u3001M.Lai\u3001A.Bolton\u3001Y.Chen\u3001T.P.Lillicrap\u3001F.Hui\u3001L.Sifre\u3001G.van den Driessche\u3001T.Graepel\u548c D.\u54c8\u8428\u6bd4\u65af\u3002\u5728\u6ca1\u6709\u4eba\u7c7b\u77e5\u8bc6\u7684\u60c5\u51b5\u4e0b\u638c\u63e1\u56f4\u68cb\u3002\u300a\u81ea\u7136\u300b\u6742\u5fd7\uff0c550\uff087676\uff09\uff1a354\u20133592017b\u3002doi:10.1038/NATURE24270\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://doi.org/10.1038/nature24270. C.Snell\u3001J.Lee\u3001K.Xu\u548cA.Kumar\u30022024\u5e74\uff0c\u6700\u4f73\u5730\u7f29\u653ellm\u6d4b\u8bd5\u65f6\u95f4\u8ba1\u7b97\u53ef\u80fd\u6bd4\u7f29\u653e\u6a21\u578b\u53c2\u6570\u66f4\u6709\u6548\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://arxiv.org/abs/2408.033 14. \u90d1\u6c38\u5e86\u3001\u5434\u5f66\u7956\u3001\u9ece\u3001\u4f55\u3001\u962e\u3002\u5728\u6ca1\u6709\u4eba\u7c7b\u6f14\u793a\u7684\u60c5\u51b5\u4e0b\u89e3\u51b3\u5965\u6797\u5339\u514b\u51e0\u4f55\u95ee\u9898\u3002\u300a\u81ea\u7136\u300b\uff0c2024\u5e74\u3002doi:10.1038/41586-023-06747-5\u3002 J.Uesato\u3001N.Kushman\u3001R.Kumar\u3001F.Song\u3001N.Siegel\u3001L.Wang\u3001A.Creswell\u3001G.Irving\u548cI.Higgins\u3002\u7528\u57fa\u4e8e\u8fc7\u7a0b\u548c\u7ed3\u679c\u7684\u53cd\u9988\u89e3\u51b3\u6570\u5b66\u5355\u8bcd\u95ee\u9898\u3002arXiv\u9884\u5370\u672carXiv:2211.142752022\u3002 \u738b\uff0c\u674e\uff0c\u90b5\uff0c\u5f90\uff0c\u6234\uff0c\u674e\uff0c\u9648\uff0c\u5434\uff0c\u968b\u3002Math shepherd\uff1a\u4e00\u4e2a\u7528\u4e8e\u6570\u5b66\u63a8\u7406\u4e2dllms\u7684\u65e0\u6807\u7b7e\u9010\u6b65\u9a8c\u8bc1\u5668\u3002arXiv\u9884\u5370\u672carXiv:2312.089352023\u3002 \u738b\u3001\u9b4f\u5efa\u56fd\u3001\u8212\u5c14\u66fc\u3001\u4e50\u3001\u8fdf\u3001\u90a3\u826f\u3001\u5468\u3002\u81ea\u6d3d\u6027\u6539\u5584\u4e86\u8bed\u8a00\u6a21\u578b\u4e2d\u7684\u601d\u7ef4\u94fe\u63a8\u7406\u3002arXiv\u9884\u5370\u672carXiv:2203.111712022\u3002 \u738b\uff0c\u9a6c\uff0c\u5f20\uff0c\u502a\uff0c\u94b1\u5fb7\u62c9\uff0c\u90ed\uff0c\u4efb\uff0c\u963f\u9c81\u62c9\u6770\uff0c\u4f55\uff0c\u6c5f\uff0c\u674e\uff0c\u5e93\uff0c\u738b\uff0c\u5e84\uff0c\u8303\uff0c\u5cb3\uff0c\u9648\u3002Mmlu pro\uff1a\u4e00\u4e2a\u66f4\u5f3a\u5927\u3001\u66f4\u5177\u6311\u6218\u6027\u7684\u591a\u4efb\u52a1\u8bed\u8a00\u7406\u89e3\u57fa\u51c6\u3002CoRR\uff0cabs/2406.015742024\u3002URL\u3002 \u590f\uff0c\u9093\uff0c\u9093\uff0c\u5f20\u3002\u65e0\u4ee3\u7406\uff1a\u63ed\u5f00\u57fa\u4e8ellm\u7684\u8f6f\u4ef6\u5de5\u7a0b\u4ee3\u7406\u7684\u795e\u79d8\u9762\u7eb1\u3002arXiv\u9884\u5370\u672c\uff0c2024\u5e74\u3002 \u8f9b\uff0c\u4efb\uff0c\u5b8b\uff0c\u90b5\uff0c\u8d75\uff0c\u738b\uff0c\u5218\uff0c\u5f20\uff0c\u9646\uff0c\u675c\uff0c\u9ad8\uff0c \u6731\u3001\u6768\u3001\u82df\u3001\u5434\u3001\u7f57\u3001\u962e\u3002Deepseek-prover-v1.5\uff1a\u5229\u7528\u8bc1\u660e\u8f85\u52a9\u53cd\u9988\u8fdb\u884c\u5f3a\u5316\u5b66\u4e60\u548c\u8499\u7279\u5361\u6d1b\u6811\u641c\u7d22\uff0c2024\u5e74\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://arxiv.org/abs/2408.08152. \u5468\uff0c\u9646\uff0c\u7c73\u4ec0\u62c9\uff0c\u68b5\u5929\uff0c\u5df4\u82cf\uff0c\u683e\uff0c\u5468\uff0c\u4faf\u3002\u5927\u578b\u8bed\u8a00\u6a21\u578b\u8bc4\u4f30\u540e\u7684\u8bf4\u660e\u3002arXiv\u9884\u5370\u672carXiv:2311.0791112023\u3002</p> <p>\u9644\u5f55 A.\u8d21\u732e\u4e0e\u81f4\u8c22</p> <p>\u6838\u5fc3\u8d21\u732e\u8005 \u5927\u96c5\u90ed\u5fb7\u5065\u6768\u6d69\u4f1f\u5f20\u4fca\u6653\u5b8b\u82e5\u745c\u5f20\u6da6\u65b0\u5f90\u542f\u6d69\u6731\u4e16\u8363\u9a6c\u57f9\u4e49\u738b\u6653\u78a7 \u5c0f\u5eb7\u5f20\u5174\u51ef \u4e8e\u6b66 \u5434 \u90ed\u5fd7\u658c\u5fd7\u5b8f\u90b5\u5353\u4e66\u674e\u81ea\u4e49\u9ad8</p> <p>\u64b0\u7a3f\u4eba\u5218\u51b0\u96ea \u738b\u79c9\u8f69\u5434\u4f2f\u8d85 \u5317\u5cf0\u6210\u8fbe\u9646\u6210\u521a\u8d75\u6210\u542f\u9093\u51b2\u962e\u5927\u9ea6\u6234 \u9648\u4e1c\u6770\u5b63\u4e8c\u822a\u674e\u82b3\u4e91\u6797\u5bcc\u806a\u6234\u5bcc\u4e3d\u7f57\u5149\u6ce2\u90dd\u5b98\u5ead\u9648\u56fd\u4f1f H.\u5f20\u6c49\u4f1f\u5f90\u6d2a\u8f89\u4e01\u534e\u4f50\u9ad8\u6167\u6e20</p> <p>\u4f1a\u674e\u5efa\u5fe0\u90ed\u5bb6\u77f3\u674e\u666f\u660c\u9648\u666f\u9633\u8881\u91d1\u6d69\u56fe \u674e\u4fca\u6770\u90b1\u4fca\u9f99 \u8521 \u502a\u5efa\u826f\u91d1\u9648\u51ef\u4e1c\u80e1 \u4f60\u51ef\u8d85\u9ad8\u5eb7\u5173\u514b\u65b0\u9ec4\u5feb\u5b87\u738b\u5229\u6069 \u4e50\u4ece\u5f20\u4eae\u8d75\u5229\u901a\u738b\u7acb\u8dc3\u5f20\u78ca\u5f90 \u590f\u94ed\u4f20\u5f20\u660e\u534e\u5f20\u660e\u8f89\u5510\u660e\u65ed\u5468\u68a6\u4e3d \u82d7\u541b\u738b\u660e\u660e\u674e\u5b81\u7530\u6f58\u6f58\u9ec4\u9e4f\u5f20\u524d\u7a0b\u738b\u79e6\u5b87\u9648\u79cb\u77f3\u675c \u845b\u745e\u742a\u5f20\u745e\u677e\u6f58\u6da6\u5409\u738b \u9648 \u91d1 \u5982\u610f\u9648\u5c1a\u6d69\u9646\u5c1a\u708e\u5468\u5584\u714c\u9648\u80dc\u5cf0\u53f6\u4e16\u7389\u738b\u6c34\u840d\u4f59\u987a\u5cf0\u5468\u6811\u4ead\u6f58 \u674e \u53cc\u5468\u5c11\u9752\u5434\u80dc\u5cf0\u53f6\u9676\u4e91 \u5b59\u5929\u5b87 \u738b\u671b\u5b9a\u66fe\u6587\u5218\u6587\u5cf0\u6881\u6587\u519b\u9ad8\u6587\u7434*\u5f20\u6587\u6d9b W.L.\u8096\u4f1f\u5b89\u6653\u4e1c\u5218 \u738b\u6653\u6db5\u9648\u6653\u6d9b\u8042\u5fc3\u6210 \u5218\u6b23 \u5218\u5174\u8d85\u3001\u6768\u65b0\u5143\u3001\u674e\u5b66\u6210\u3001\u82cf\u65ed\u6052\u3001\u6797 \u674e \u9648\u6653\u6587\u5b59\u6653\u9999\u738b\u65b0\u6960\u5b8b\u4fe1\u4e49\u5468\u663e\u7956\u738b\u65b0\u971e\u5c71 \u674e \u738b</p> <p>\u9b4f \u6768\u5f20\u8273\u7ea2\u5f90\u8000\u4e3d \u59da\u8d75\u59da\u5cf0\u5b59\u8000\u8f89\u738b\u4e49\u745c \u5f20\u4e00\u51e1\u53f2\u4e00\u826f\u718a\u82f1\u4f55\u4e00\u77f3\u6734\u4e00\u677e\u738b\u4e00\u8f69\u8c2d\u4e00\u626c\u9a6c*\u5218\u6c38\u5f3a\u90ed\u5143\u6b27\u7389\u73af\u738b\u5cb3\u516c\u7389\u6052\u90b9\u7389\u4f73\u4f55\u4e91\u5e06\u718a\u7389\u7965\u7f57\u7389\u7965\u5c24\u8431\u5218\u7389\u6d0b\u5468 \u6731 \u9ec4\u8000\u8f89 \u6613\u90d1\u7389\u8fb0\u6731\u4e91\u8d24\u9a6c\u82f1\u5510\u7389\u5764\u624e\u7389\u5a77\u989c \u4efb \u6cfd\u8f89\u4efb\u7ae0\u7acb\u6c99\u54f2\u5085\u5f90\u632f\u8fbe\u8c22 \u5f20\u54f2\u6587\u90dd\u5fd7\u6210\u9a6c\u5fd7\u521a\u4e25\u5fd7\u5b87\u5434 \u987e\u6893\u8f89</p> <p>\u5218\u7d2b\u5609\u6731\u7d2b\u519b*\u674e\u7d2b\u8587\u8c22\u7d2b\u9633\u5b8b\u7d2b\u6b63\u6f58</p> <p>\u7504\u9ec4\u5fd7\u9e4f\u5f90\u5fe0\u79b9\u5f20\u7504\u5f20</p> <p>\u5728\u6bcf\u4e2a\u89d2\u8272\u4e2d\uff0c\u4f5c\u8005\u6309\u540d\u5b57\u7684\u5b57\u6bcd\u987a\u5e8f\u6392\u5217\u3002\u6807\u6709*\u7684\u59d3\u540d\u8868\u793a\u5df2\u79bb\u5f00\u6211\u4eec\u56e2\u961f\u7684\u4e2a\u4eba\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseekllm/DeepSeek_LLM_Scaling_Open_Source_Language_Models_with_Longtermism/","title":"DeepSeek LLM Scaling Open-Source Language Models with Longtermism","text":"<p>DeepSeek LLM Scaling Open-Source Language Models with Longtermism</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseekllm/DeepSeek_LLM_Scaling_Open_Source_Language_Models_with_Longtermism/#_1","title":"\u6458\u8981","text":"<p>\u5f00\u6e90\u5927\u578b\u8bed\u8a00\u6a21\u578b\uff08LLMs\uff09\u7684\u5feb\u901f\u53d1\u5c55\u786e\u5b9e\u4ee4\u4eba\u77a9\u76ee\u3002\u7136\u800c\uff0c\u5148\u524d\u6587\u732e\u4e2d\u63cf\u8ff0\u7684\u7f29\u653e\u5b9a\u5f8b\u5f97\u51fa\u4e86\u4e0d\u540c\u7684\u7ed3\u8bba\uff0c\u8fd9\u7ed9\u7f29\u653eLLM\u8499\u4e0a\u4e86\u4e00\u5c42\u9634\u5f71\u3002\u6211\u4eec\u6df1\u5165\u7814\u7a76\u4e86\u7f29\u653e\u5b9a\u5f8b\uff0c\u5e76\u63d0\u51fa\u4e86\u6211\u4eec\u72ec\u7279\u7684\u53d1\u73b0\uff0c\u8fd9\u4e9b\u53d1\u73b0\u6709\u52a9\u4e8e\u5728\u4e24\u79cd\u5e38\u7528\u7684\u5f00\u6e90\u914d\u7f6e\uff0c7B\u548c67B\u6a21\u578b\u4e2d\u7f29\u653e\u5927\u6a21\u578b\u3002\u5728\u7f29\u653e\u5b9a\u5f8b\u7684\u6307\u5bfc\u4e0b\uff0c\u6211\u4eec\u5f15\u5165\u4e86DeepSeek LLM\uff0c\u8fd9\u662f\u4e00\u4e2a\u81f4\u529b\u4e8e\u4ece\u957f\u8fdc\u89d2\u5ea6\u63a8\u8fdb\u5f00\u6e90\u8bed\u8a00\u6a21\u578b\u7684\u9879\u76ee\u3002\u4e3a\u4e86\u652f\u6301\u9884\u8bad\u7ec3\uff0c\u6211\u4eec\u5f00\u53d1\u4e86\u4e00\u4e2a\u6570\u636e\u96c6\uff0c\u76ee\u524d\u75312\u4e07\u4ebf\u4e2atoken\u7ec4\u6210\uff0c\u5e76\u4e14\u8fd8\u5728\u4e0d\u65ad\u6269\u5c55\u3002\u6211\u4eec\u8fdb\u4e00\u6b65\u5bf9DeepSeek LLM Base\u6a21\u578b\u8fdb\u884c\u6709\u76d1\u7763\u5fae\u8c03\uff08SFT\uff09\u548c\u76f4\u63a5\u504f\u597d\u4f18\u5316\uff08DPO\uff09\uff0c\u4ece\u800c\u521b\u5efa\u4e86DeepSeek\u804a\u5929\u6a21\u578b\u3002\u6211\u4eec\u7684\u8bc4\u4f30\u7ed3\u679c\u8868\u660e\uff0cDeepSeek LLM 67B\u5728\u4e00\u7cfb\u5217\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u8d85\u8fc7\u4e86LLaMA-2 70B\uff0c\u7279\u522b\u662f\u5728\u4ee3\u7801\u3001\u6570\u5b66\u548c\u63a8\u7406\u9886\u57df\u3002\u6b64\u5916\uff0c\u5f00\u653e\u5f0f\u8bc4\u4f30\u663e\u793a\uff0c\u4e0eGPT-3.5\u76f8\u6bd4\uff0c\u6211\u4eec\u7684DeepSeek LLM 67B\u804a\u5929\u8868\u73b0\u51fa\u66f4\u4f18\u7684\u6027\u80fd\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseekllm/DeepSeek_LLM_Scaling_Open_Source_Language_Models_with_Longtermism/#1","title":"1 \u4ecb\u7ecd","text":"<p>\u5728\u8fc7\u53bb\u7684\u51e0\u5e74\u91cc\uff0c\u57fa\u4e8e\u7eaf\u89e3\u7801\u5668 transformer \u7684\u5927\u578b\u8bed\u8a00\u6a21\u578b\uff08LLM\uff09\uff08Vaswani et al.\uff0c2017\uff09\u65e5\u76ca\u6210\u4e3a\u5b9e\u73b0\u901a\u7528\u4eba\u5de5\u667a\u80fd\uff08AGI\uff09\u7684\u57fa\u77f3\u548c\u9014\u5f84\u3002\u901a\u8fc7\u9884\u6d4b\u8fde\u7eed\u6587\u672c\u4e2d\u7684\u4e0b\u4e00\u4e2a\u5355\u8bcd\uff0cLLM\u5728\u6d77\u91cf\u6570\u636e\u96c6\u4e0a\u8fdb\u884c\u81ea\u6211\u76d1\u7763\u7684\u9884\u8bad\u7ec3\uff0c\u4f7f\u5176\u80fd\u591f\u5b9e\u73b0\u5404\u79cd\u76ee\u7684\u5e76\u5177\u5907\u8bb8\u591a\u80fd\u529b\uff0c\u5982\u5c0f\u8bf4\u521b\u4f5c\u3001\u6587\u672c\u6458\u8981\u3001\u4ee3\u7801\u5b8c\u6210\u7b49\u3002\u968f\u540e\u7684\u53d1\u5c55\uff0c\u5982\u76d1\u7763\u5fae\u8c03\u548c\u5956\u52b1\u5efa\u6a21\uff0c\u4f7f\u5927\u578b\u8bed\u8a00\u6a21\u578b\uff08LLM\uff09\u80fd\u591f\u66f4\u597d\u5730\u9075\u5faa\u7528\u6237\u7684\u610f\u56fe\u548c\u6307\u4ee4\u3002\u8fd9\u8d4b\u4e88\u4e86\u4ed6\u4eec\u66f4\u591a\u7684\u4f1a\u8bdd\u80fd\u529b\uff0c\u5e76\u8fc5\u901f\u6269\u5927\u4e86\u4ed6\u4eec\u7684\u5f71\u54cd\u529b\u3002</p> <p>\u8fd9\u6ce2\u6d6a\u6f6e\u662f\u7531\u95ed\u6e90\u4ea7\u54c1\u5f15\u53d1\u7684\uff0c\u5982ChatGPT\uff08OpenAI\uff0c2022\uff09\u3001Claude\uff08An-thropic\uff0c2023\uff09\u548cBard\uff08Google\uff0c2023\uff09\uff0c\u8fd9\u4e9b\u4ea7\u54c1\u662f\u7528\u5927\u91cf\u7684\u8ba1\u7b97\u8d44\u6e90\u548c\u5927\u91cf\u7684\u6807\u6ce8\u6210\u672c\u5f00\u53d1\u7684\u3002\u8fd9\u4e9b\u4ea7\u54c1\u663e\u8457\u63d0\u9ad8\u4e86\u793e\u533a\u5bf9\u5f00\u6e90LLM\u80fd\u529b\u7684\u671f\u671b\uff0c\u4ece\u800c\u6fc0\u53d1\u4e86\u4e00\u7cfb\u5217\u5de5\u4f5c\uff08Bai\u7b49\u4eba\uff0c2023\uff1bDu\u7b49\u4eba\uff0c2022\uff1bJiang\u7b49\u4eba\uff0c2023\uff09\u3002\u5176\u4e2d\uff0cLLaMA\u7cfb\u5217\u6a21\u578b\uff08Touvron\u7b49\u4eba\uff0c2023a\uff0cb\uff09\u5c24\u4e3a\u7a81\u51fa\u3002\u5b83\u6574\u5408\u4e86\u4e00\u7cfb\u5217\u5de5\u4f5c\uff0c\u521b\u5efa\u4e86\u4e00\u4e2a\u9ad8\u6548\u7a33\u5b9a\u7684\u67b6\u6784\uff0c\u6784\u5efa\u4e86\u4ece7B\u523070B\u53c2\u6570\u7684\u6027\u80fd\u826f\u597d\u7684\u6a21\u578b\u3002\u56e0\u6b64\uff0cLLaMA\u7cfb\u5217\u5df2\u6210\u4e3a\u5f00\u6e90\u6a21\u578b\u4e2d\u67b6\u6784\u548c\u6027\u80fd\u7684\u4e8b\u5b9e\u57fa\u51c6\u3002</p> <p>\u7ee7LLaMA\u4e4b\u540e\uff0c\u5f00\u6e90\u793e\u533a\u4e3b\u8981\u4e13\u6ce8\u4e8e\u8bad\u7ec3\u56fa\u5b9a\u5927\u5c0f\uff087B\u300113B\u300134B\u548c70B\uff09\u7684\u9ad8\u8d28\u91cf\u6a21\u578b\uff0c\u5f80\u5f80\u5ffd\u89c6\u4e86\u5bf9LLM\u7f29\u653e\u5b9a\u5f8b\u7684\u7814\u7a76\u63a2\u7d22\uff08Hoffmann\u7b49\u4eba\uff0c2022\uff1bKaplan\u7b49\u4eba\uff0c2020\uff09\u3002\u5c3d\u7ba1\u5982\u6b64\uff0c\u8003\u8651\u5230\u5f53\u524d\u7684\u5f00\u6e90\u6a21\u578b\u4ec5\u5904\u4e8e\u901a\u7528\u4eba\u5de5\u667a\u80fd\uff08AGI\uff09\u5f00\u53d1\u7684\u521d\u59cb\u9636\u6bb5\uff0c\u5bf9\u7f29\u653e\u5b9a\u5f8b\u7684\u7814\u7a76\u81f3\u5173\u91cd\u8981\u3002\u6b64\u5916\uff0c\u65e9\u671f\u7684\u7814\u7a76\uff08Hoffmann\u7b49\u4eba\uff0c2022\uff1bKaplan\u7b49\u4eba\uff0c2020\uff09\u5728\u8ba1\u7b97\u9884\u7b97\u589e\u52a0\u548c\u8d85\u53c2\u6570\u8ba8\u8bba\u672a\u5f97\u5230\u5145\u5206\u89e3\u51b3\u7684\u60c5\u51b5\u4e0b\uff0c\u5bf9\u6a21\u578b\u548c\u6570\u636e\u7684\u7f29\u653e\u5f97\u51fa\u4e86\u4e0d\u540c\u7684\u7ed3\u8bba\u3002\u5728\u672c\u6587\u4e2d\uff0c\u6211\u4eec\u5e7f\u6cdb\u7814\u7a76\u4e86\u8bed\u8a00\u6a21\u578b\u7684\u7f29\u653e\u884c\u4e3a\uff0c\u5e76\u5c06\u6211\u4eec\u7684\u53d1\u73b0\u5e94\u7528\u4e8e\u4e24\u79cd\u5e7f\u6cdb\u4f7f\u7528\u7684\u5927\u6a21\u578b\u914d\u7f6e\u53c2\u6570\uff0c\u53737B\u548c67B\u53c2\u6570\u6a21\u578b\u3002\u6211\u4eec\u7684\u7814\u7a76\u65e8\u5728\u4e3a\u5f00\u6e90LLM\u7684\u672a\u6765\u6269\u5c55\u5960\u5b9a\u57fa\u7840\uff0c\u4e3a\u8be5\u9886\u57df\u7684\u8fdb\u4e00\u6b65\u53d1\u5c55\u94fa\u5e73\u9053\u8def\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u6211\u4eec\u9996\u5148\u7814\u7a76\u4e86\u6279\u91cf\u5927\u5c0f\u548c\u5b66\u4e60\u7387\u7684\u7f29\u653e\u89c4\u5f8b\uff0c\u5e76\u53d1\u73b0\u4e86\u5b83\u4eec\u968f\u6a21\u578b\u5927\u5c0f\u7684\u53d8\u5316\u8d8b\u52bf\u3002\u5728\u6b64\u57fa\u7840\u4e0a\uff0c\u6211\u4eec\u5bf9\u6570\u636e\u548c\u6a21\u578b\u89c4\u6a21\u7684\u7f29\u653e\u89c4\u5f8b\u8fdb\u884c\u4e86\u5168\u9762\u7814\u7a76\uff0c\u6210\u529f\u63ed\u793a\u4e86\u6700\u4f73\u7684\u6a21\u578b/\u6570\u636e\u7f29\u653e\u5206\u914d\u7b56\u7565\uff0c\u5e76\u9884\u6d4b\u4e86\u6211\u4eec\u5927\u89c4\u6a21\u6a21\u578b\u7684\u9884\u671f\u6027\u80fd\u3002\u6b64\u5916\uff0c\u5728\u5f00\u53d1\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u53d1\u73b0\u4ece\u4e0d\u540c\u6570\u636e\u96c6\u5f97\u51fa\u7684\u7f29\u653e\u89c4\u5f8b\u5b58\u5728\u663e\u8457\u5dee\u5f02\u3002\u8fd9\u8868\u660e\u6570\u636e\u96c6\u7684\u9009\u62e9\u4f1a\u663e\u8457\u5f71\u54cd\u7f29\u653e\u884c\u4e3a\uff0c\u8fd9\u8868\u660e\u5728\u8de8\u6570\u636e\u96c6\u63a8\u5e7f\u7f29\u653e\u89c4\u5f8b\u65f6\u5e94\u8be5\u8c28\u614e\u3002</p> <p>\u5728\u6211\u4eec\u7684\u7f29\u653e\u5b9a\u5f8b\u7684\u6307\u5bfc\u4e0b\uff0c\u6211\u4eec\u4ece\u5934\u5f00\u59cb\u6784\u5efa\u5f00\u6e90\u5927\u578b\u8bed\u8a00\u6a21\u578b\uff0c\u5e76\u53d1\u5e03\u5c3d\u53ef\u80fd\u591a\u7684\u4fe1\u606f\u4f9b\u793e\u533a\u53c2\u8003\u3002\u6211\u4eec\u6536\u96c6\u4e862\u4e07\u4ebf\u4e2atoken\u7528\u4e8e\u9884\u8bad\u7ec3\uff0c\u4e3b\u8981\u662f\u4e2d\u6587\u548c\u82f1\u6587\u3002\u5728\u6a21\u578b\u7ea7\u522b\uff0c\u6211\u4eec\u901a\u5e38\u9075\u5faaLLaMA\u7684\u67b6\u6784\uff0c\u4f46\u7528\u591a\u6b65\u5b66\u4e60\u7387\u8c03\u5ea6\u5668\u66ff\u6362\u4e86\u4f59\u5f26\u5b66\u4e60\u7387\u8c03\u5ea6\u5668\uff0c\u5728\u4fdd\u6301\u6027\u80fd\u7684\u540c\u65f6\u4fc3\u8fdb\u4e86\u6301\u7eed\u8bad\u7ec3\u3002\u6211\u4eec\u4ece\u4e0d\u540c\u6765\u6e90\u6536\u96c6\u4e86100\u591a\u4e07\u4e2a\u76d1\u7763\u5fae\u8c03\uff08SFT\uff09\u6570\u636e\uff08\u6b27\u9633\u7b49\u4eba\uff0c2022\uff09\u3002\u672c\u6587\u5206\u4eab\u4e86\u6211\u4eec\u5728\u6570\u636e\u6d88\u878d\u6280\u672f\u4e2d\u4e0d\u540cSFT\u7b56\u7565\u548c\u53d1\u73b0\u7684\u7ecf\u9a8c\u3002\u6b64\u5916\uff0c\u6211\u4eec\u8fd8\u5229\u7528\u4e86\u76f4\u63a5\u504f\u597d\u4f18\u5316\uff08DPO\uff09\uff08Rafailov\u7b49\u4eba\uff0c2023\uff09\u6765\u63d0\u9ad8\u6a21\u578b\u7684\u4f1a\u8bdd\u6027\u80fd\u3002</p> <p>\u6211\u4eec\u4f7f\u7528\u6211\u4eec\u7684\u57fa\u7840\u6a21\u578b\u548c\u804a\u5929\u6a21\u578b\u8fdb\u884c\u5e7f\u6cdb\u7684\u8bc4\u4f30\u3002\u8bc4\u4f30\u7ed3\u679c\u8868\u660e\uff0cDeepSeek LLM\u5728\u5404\u79cd\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u90fd\u8d85\u8fc7\u4e86LLaMA-2 70B\uff0c\u7279\u522b\u662f\u5728\u4ee3\u7801\u3001\u6570\u5b66\u548c\u63a8\u7406\u9886\u57df\u3002\u7ee7SFT\u548cDPO\u4e4b\u540e\uff0cDeepSeek 67B\u804a\u5929\u6a21\u578b\u5728\u4e2d\u82f1\u6587\u5f00\u653e\u5f0f\u8bc4\u4f30\u4e2d\u7684\u8868\u73b0\u5747\u4f18\u4e8eGPT-3.5\u3002\u8fd9\u7a81\u663e\u4e86DeepSeek 67B\u5728\u751f\u6210\u9ad8\u8d28\u91cf\u54cd\u5e94\u548c\u7528\u4e24\u79cd\u8bed\u8a00\u8fdb\u884c\u6709\u610f\u4e49\u7684\u5bf9\u8bdd\u65b9\u9762\u7684\u5353\u8d8a\u6027\u80fd\u3002\u6b64\u5916\uff0c\u5b89\u5168\u8bc4\u4f30\u8868\u660e\uff0cDeepSeek 67B Chat\u5728\u5b9e\u8df5\u4e2d\u53ef\u4ee5\u63d0\u4f9b\u65e0\u5bb3\u7684\u54cd\u5e94\u3002</p> <p>\u5728\u672c\u6587\u7684\u5176\u4f59\u90e8\u5206\uff0c\u6211\u4eec\u9996\u5148\u5728\u7b2c2\u8282\u4ecb\u7ecdDeepSeek LLM\u7684\u9884\u8bad\u7ec3\u57fa\u672c\u6982\u5ff5\uff0c\u5305\u62ec\u6570\u636e\u7684\u7ec4\u6210\u3001\u6a21\u578b\u67b6\u6784\u3001\u57fa\u7840\u8bbe\u65bd\u548c\u8d85\u53c2\u6570\u3002\u5728\u7b2c3\u8282\u4e2d\uff0c\u6211\u4eec\u8be6\u7ec6\u89e3\u91ca\u4e86\u6211\u4eec\u53d1\u73b0\u7684\u7f29\u653e\u5b9a\u5f8b\u53ca\u5176\u542b\u4e49\u3002\u6b64\u5916\uff0c\u6211\u4eec\u8ba8\u8bba\u4e86\u9009\u62e9\u9884\u8bad\u7ec3\u8d85\u53c2\u6570\u80cc\u540e\u7684\u57fa\u672c\u539f\u7406\uff0c\u540c\u65f6\u8003\u8651\u4e86\u4ece\u7f29\u653e\u5b9a\u5f8b\u5206\u6790\u4e2d\u83b7\u5f97\u7684\u89c1\u89e3\u3002\u5728\u7b2c4\u8282\u4e2d\uff0c\u6211\u4eec\u8ba8\u8bba\u4e86\u6211\u4eec\u7684\u5fae\u8c03\u65b9\u6cd5\uff0c\u5305\u62ecSFT\u548cDPO\u9636\u6bb5\u5fae\u8c03\u6570\u636e\u7684\u7ec4\u6210\u548c\u5177\u4f53\u65b9\u6cd5\u3002\u7136\u540e\uff0c\u6211\u4eec\u5728\u7b2c5\u8282\u4e2d\u4ecb\u7ecd\u4e86DeepSeek LLM\u7684\u8be6\u7ec6\u8bc4\u4f30\u7ed3\u679c\uff0c\u6db5\u76d6\u4e86\u57fa\u7840\u6a21\u578b\u548c\u804a\u5929\u6a21\u578b\uff0c\u4ee5\u53ca\u5b83\u4eec\u5728\u5f00\u653e\u5f0f\u8bc4\u4f30\u548c\u5b89\u5168\u8bc4\u4f30\u4e2d\u7684\u8868\u73b0\u3002\u6700\u540e\uff0c\u6211\u4eec\u5728\u7b2c6\u8282\u8ba8\u8bba\u4e86DeepSeek LLM\u7684\u5f53\u524d\u5c40\u9650\u6027\u548c\u672a\u6765\u65b9\u5411\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseekllm/DeepSeek_LLM_Scaling_Open_Source_Language_Models_with_Longtermism/#2","title":"2 \u9884\u8bad\u7ec3","text":""},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseekllm/DeepSeek_LLM_Scaling_Open_Source_Language_Models_with_Longtermism/#21","title":"2.1 \u6570\u636e","text":"<p>\u6211\u4eec\u7684\u4e3b\u8981\u76ee\u6807\u662f\u5168\u9762\u589e\u5f3a\u6570\u636e\u96c6\u7684\u4e30\u5bcc\u6027\u548c\u591a\u6837\u6027\u3002\u6211\u4eec\u4ece\u6709\u4ef7\u503c\u7684\u6765\u6e90\u83b7\u5f97\u4e86\u5b9d\u8d35\u7684\u89c1\u89e3\uff0c\u5982\uff08Computer\uff0c2023\uff1bGao et al\uff0c2020\uff1bPenedo et al\uff0c2023\uff1bTouvron et al\uff0c2023a\uff09\u3002\u4e3a\u4e86\u5b9e\u73b0\u8fd9\u4e9b\u76ee\u6807\uff0c\u6211\u4eec\u5c06\u6211\u4eec\u7684\u65b9\u6cd5\u5206\u4e3a\u4e09\u4e2a\u57fa\u672c\u9636\u6bb5\uff1a\u53bb\u91cd\u3001\u8fc7\u6ee4 \u548c \u91cd\u65b0\u6df7\u5408\u3002\u53bb\u91cd\u548c\u91cd\u65b0\u6df7\u5408\u9636\u6bb5\u901a\u8fc7\u91c7\u6837\u72ec\u7acb\u7684\u6837\u672c\u6765\u786e\u4fdd\u6570\u636e\u7684\u591a\u6837\u5316\u8868\u793a\u3002\u8fc7\u6ee4\u9636\u6bb5\u63d0\u9ad8\u4e86\u4fe1\u606f\u5bc6\u5ea6\uff0c\u4ece\u800c\u5b9e\u73b0\u4e86\u66f4\u9ad8\u6548\u548c\u6709\u6548\u7684\u6a21\u578b\u8bad\u7ec3\u3002</p> <p>\u6211\u4eec\u91c7\u53d6\u4e86\u6fc0\u8fdb\u7684\u53bb\u91cd\u7b56\u7565\uff0c\u6269\u5927\u4e86\u53bb\u91cd\u7684\u8303\u56f4\u3002\u6211\u4eec\u7684\u5206\u6790\u8868\u660e\uff0c\u4e0e\u5355\u4e2a\u6587\u4ef6\u53bb\u91cd\u76f8\u6bd4\uff0c\u5bf9\u6574\u4e2aCommon Crawl\u8bed\u6599\u5e93\u8fdb\u884c\u53bb\u91cd\u4f1a\u5bfc\u81f4\u66f4\u9ad8\u7684\u53bb\u91cd\u7387\u3002\u88681\u663e\u793a\uff0c\u5728\u6574\u4f5391\u4e2a\u6587\u4ef6\u8fdb\u884c\u53bb\u91cd\u53ef\u4ee5\u6d88\u9664\u6bd4\u5355\u4e2a\u6587\u4ef6\u591a\u56db\u500d\u7684\u6587\u6863\u3002</p> <p></p> <p>\u5728\u8fc7\u6ee4\u9636\u6bb5\uff0c\u6211\u4eec\u4e13\u6ce8\u4e8e\u4e3a\u6587\u6863\u8d28\u91cf\u8bc4\u4f30\u5236\u5b9a\u7a33\u5065\u7684\u6807\u51c6\u3002\u8fd9\u6d89\u53ca\u5230\u7ed3\u5408\u8bed\u8a00\u548c\u8bed\u4e49\u8bc4\u4f30\u7684\u8be6\u7ec6\u5206\u6790\uff0c\u4ece\u5355\u4e2a\u6587\u6863\u548c\u5168\u5c40\u6587\u6863\u7684\u89d2\u5ea6\u63d0\u4f9b\u6570\u636e\u8d28\u91cf\u7684\u89c6\u56fe\u3002\u5728\u91cd\u65b0\u6df7\u5408\u9636\u6bb5\uff0c\u6211\u4eec\u8c03\u6574\u4e86\u7528\u4e8e\u89e3\u51b3\u6570\u636e\u4e0d\u5e73\u8861\u7684\u65b9\u6cd5\uff0c\u91cd\u70b9\u662f\u589e\u52a0\u4ee3\u8868\u6027\u4e0d\u8db3\u7684\u9886\u57df\u7684\u6570\u636e\u3002\u8fd9\u4e00\u8c03\u6574\u76ee\u7684\u662f\u5b9e\u73b0\u66f4\u5e73\u8861\u548c\u66f4\u5177\u5305\u5bb9\u6027\u7684\u6570\u636e\u96c6\uff0c\u786e\u4fdd\u6570\u636e\u96c6\u5145\u5206\u4ee3\u8868\u4e0d\u540c\u7684\u89c2\u70b9\u548c\u4fe1\u606f\u3002</p> <p>\u5bf9\u4e8e\u6211\u4eec\u7684 tokenizer\uff0c\u6211\u4eec\u57fa\u4e8e tokenizers \u5e93\uff08Huggingface Team\uff0c2019\uff09\u5b9e\u73b0\u4e86 Byte-level Byte-Pair\uff08BBPE\uff09\u7b97\u6cd5\u3002\u9884\u6807\u5206\u8bcd\u88ab\u7528\u6765\u9632\u6b62\u6765\u81ea\u4e0d\u540c\u5b57\u7b26\u7c7b\u522b\u7684 token \u5408\u5e76\uff0c\u5982\u6362\u884c\u7b26\u3001\u6807\u70b9\u7b26\u53f7\u548c\u4e2d\u65e5\u97e9\uff08CJK\uff09\u7b26\u53f7\uff0c\u7c7b\u4f3c\u4e8eGPT-2\uff08Radford\u7b49\u4eba\uff0c2019\uff09\u3002\u6211\u4eec\u8fd8\u9009\u62e9\u6309\u7167\uff08Touvron\u7b49\u4eba\uff0c2023a\uff0cb\uff09\u4e2d\u4f7f\u7528\u7684\u65b9\u6cd5\u5c06\u6570\u5b57\u62c6\u5206\u4e3a\u5355\u4e2a\u6570\u5b57\u3002\u6839\u636e\u6211\u4eec\u4e4b\u524d\u7684\u7ecf\u9a8c\uff0c\u6211\u4eec\u5c06\u8bcd\u8868\u4e2d\u7684token\u6570\u91cf\u8bbe\u7f6e\u4e3a100000\u3002tokenizer \u5728\u5927\u7ea624GB\u7684\u591a\u8bed\u8a00\u8bed\u6599\u5e93\u4e0a\u8fdb\u884c\u4e86\u8bad\u7ec3\uff0c\u6211\u4eec\u752815\u4e2a\u7279\u6b8a token \u6269\u5c55\u4e86\u6700\u7ec8\u8bcd\u8868\uff0c\u4f7f\u603b\u8bcd\u8868\u5927\u5c0f\u8fbe\u5230100015\u3002\u4e3a\u4e86\u786e\u4fdd\u8bad\u7ec3\u671f\u95f4\u7684\u8ba1\u7b97\u6548\u7387\uff0c\u5e76\u4e3a\u672a\u6765\u53ef\u80fd\u9700\u8981\u7684\u4efb\u4f55\u5176\u4ed6\u7279\u6b8a token \u9884\u7559\u7a7a\u95f4\uff0c\u6211\u4eec\u5c06\u6a21\u578b\u7684\u8bcd\u8868\u6570\u76ee\u914d\u7f6e\u4e3a102400\u7528\u4e8e\u8bad\u7ec3\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseekllm/DeepSeek_LLM_Scaling_Open_Source_Language_Models_with_Longtermism/#22","title":"2.2 \u6a21\u578b\u7ed3\u6784","text":"<p>DeepSeek LLM\u6a21\u578b\u7ed3\u6784\u7684\u5fae\u89c2\u8bbe\u8ba1\u5728\u5f88\u5927\u7a0b\u5ea6\u4e0a\u9075\u5faa\u4e86LLaMA\u7684\u8bbe\u8ba1\uff08Touvron\u7b49\u4eba\uff0c2023a\uff0cb\uff09\uff0c\u91c7\u7528\u5177\u6709RMSNorm\uff08Zhang\u548cSennrich\uff0c2019\uff09\u529f\u80fd\u7684 pre-norm \u7ed3\u6784\uff0c\u5e76\u4f7f\u7528SwiGLU\uff08Shazeer\uff0c2020\uff09\u4f5c\u4e3a\u524d\u9988\u7f51\u7edc\uff08FFN\uff09\u7684\u6fc0\u6d3b\u51fd\u6570\uff0c\u4e2d\u95f4\u5c42\u7ef4\u5ea6\u4e3a\\(\\frac{8}{3}d_{model}\\)\u3002\u5b83\u8fd8\u7ed3\u5408\u4e86\u65cb\u8f6c\u4f4d\u7f6e\u7f16\u7801\uff08Su\u7b49\u4eba\uff0c2024\uff09\u7528\u4e8e\u4f4d\u7f6e\u7f16\u7801\u3002\u4e3a\u4e86\u4f18\u5316\u63a8\u7406\u6210\u672c\uff0c67B\u6a21\u578b\u4f7f\u7528\u5206\u7ec4\u67e5\u8be2\u6ce8\u610f\u529b\uff08GQA\uff09\uff08Ainslie\u7b49\u4eba\uff0c2023\uff09\u800c\u4e0d\u662f\u4f20\u7edf\u7684\u591a\u5934\u6ce8\u610f\u529b\uff08MHA\uff09\u3002</p> <p>\u7136\u800c\uff0c\u5728\u5b8f\u89c2\u8bbe\u8ba1\u65b9\u9762\uff0cDeepSeek LLM\u7565\u6709\u4e0d\u540c\u3002\u5177\u4f53\u6765\u8bf4\uff0cDeepSeek LLM 7B\u662f\u4e00\u4e2a30\u5c42\u7684\u7f51\u7edc\uff0c\u800cDeepSeek LLM 67B\u670995\u5c42\u3002\u8fd9\u4e9b\u7f51\u7edc\u5c42\u7684\u8c03\u6574\uff0c\u5728\u4fdd\u6301\u4e0e\u5176\u4ed6\u5f00\u6e90\u6a21\u578b\u7684\u53c2\u6570\u4e00\u81f4\u6027\u7684\u540c\u65f6\uff0c\u4e5f\u6709\u52a9\u4e8e\u6a21\u578bpipeline \u5e76\u884c\uff0c\u4ee5\u4f18\u5316\u8bad\u7ec3\u548c\u63a8\u7406\u3002</p> <p>\u4e0e\u5927\u591a\u6570\u4f7f\u7528\u5206\u7ec4\u67e5\u8be2\u6ce8\u610f\u529b\uff08GQA\uff09\u7684\u5de5\u4f5c\u4e0d\u540c\uff0c\u6211\u4eec\u5728\u7f51\u7edc\u6df1\u5ea6\u4e0a\u6269\u5c55\u4e8667B\u6a21\u578b\u7684\u53c2\u6570\uff0c\u800c\u4e0d\u662f\u6269\u5927FFN\u5c42\u4e2d\u95f4\u5bbd\u5ea6\u7684\u5e38\u89c1\u505a\u6cd5\uff0c\u76ee\u7684\u662f\u4e3a\u4e86\u83b7\u5f97\u66f4\u597d\u7684\u6548\u679c\u3002\u8be6\u7ec6\u7684\u7f51\u7edc\u914d\u7f6e\u89c1\u88682\u3002</p> <p></p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseekllm/DeepSeek_LLM_Scaling_Open_Source_Language_Models_with_Longtermism/#23","title":"2.3 \u8d85\u53c2\u6570","text":"<p>DeepSeek LLM\u7684\u521d\u59cb\u5316\u6807\u51c6\u504f\u5dee\u4e3a0.006\uff0c\u5e76\u4f7f\u7528AdamW\u4f18\u5316\u5668\u8fdb\u884c\u8bad\u7ec3\uff08Loshchilov\u548cHutter\uff0c2017\uff09\uff0c\u4f7f\u7528\u4ee5\u4e0b\u8d85\u53c2\u6570\uff1a\\(\\beta = 0.9, \\beta_{2} = 0.95\\), \u5e76\u4e14 \\(weight\\_decay=0.1\\)\u3002</p> <p>\u5728\u9884\u8bad\u7ec3\u671f\u95f4\u91c7\u7528\u591a\u6b65\u5b66\u4e60\u7387\u8c03\u5ea6\u5668\uff0c\u800c\u4e0d\u662f\u5178\u578b\u7684\u4f59\u5f26\u8c03\u5ea6\u5668\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u6a21\u578b\u7684\u5b66\u4e60\u7387\u57282000\u4e2a\u9884\u70ed\u6b65\u9aa4\u540e\u8fbe\u5230\u6700\u5927\u503c\uff0c\u7136\u540e\u5728\u5904\u7406\u4e8680%\u7684\u8bad\u7ec3\u4ee4\u724c\u540e\u964d\u81f3\u6700\u5927\u503c\u768431.6%\u3002\u572890%\u7684 token \u4e4b\u540e\uff0c\u5b83\u8fdb\u4e00\u6b65\u964d\u4f4e\u5230\u6700\u5927\u503c\u768410%\u3002\u8bad\u7ec3\u9636\u6bb5\u7684\u68af\u5ea6\u526a\u88c1\u8bbe\u7f6e\u4e3a1.0\u3002</p> <p>\u6839\u636e\u6211\u4eec\u7684\u5b9e\u8bc1\u7814\u7a76\u7ed3\u679c\uff0c\u6211\u4eec\u89c2\u5bdf\u5230\uff0c\u5728\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\u5c3d\u7ba1\u635f\u5931\u964d\u4f4e\u8d8b\u52bf\u5b58\u5728\u4e00\u70b9\u5dee\u5f02\uff0c\u4f7f\u7528\u591a\u6b65\u5b66\u4e60\u7387\u8c03\u5ea6\u5668\u7684\u6700\u7ec8\u6027\u80fd\u4e0e\u4f59\u5f26\u8c03\u5ea6\u5668\u7684\u6027\u80fd\u57fa\u672c\u4e00\u81f4\uff0c\u5982\u56fe1\uff08a\uff09\u6240\u793a\u3002\u5f53\u5728\u4fdd\u6301\u6a21\u578b\u5927\u5c0f\u56fa\u5b9a\u7684\u540c\u65f6\u8c03\u6574\u8bad\u7ec3\u89c4\u6a21\u65f6\uff0c\u591a\u6b65\u5b66\u4e60\u7387\u8c03\u5ea6\u5668\u5141\u8bb8\u91cd\u7528\u7b2c\u4e00\u9636\u6bb5\u7684\u8bad\u7ec3\uff0c\u4e3a\u8fde\u7eed\u8bad\u7ec3\u63d0\u4f9b\u4e86\u72ec\u7279\u7684\u4fbf\u5229\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u9009\u62e9\u4e86\u591a\u6b65\u5b66\u4e60\u7387\u8c03\u5ea6\u5668\u4f5c\u4e3a\u6211\u4eec\u7684\u9ed8\u8ba4\u8bbe\u7f6e\u3002\u6211\u4eec\u8fd8\u5728\u56fe1\uff08b\uff09\u4e2d\u8bc1\u660e\uff0c\u8c03\u6574\u591a\u6b65\u5b66\u4e60\u7387\u8c03\u5ea6\u5668\u4e2d\u4e0d\u540c\u9636\u6bb5\u7684\u6bd4\u4f8b\u53ef\u4ee5\u4ea7\u751f\u7a0d\u597d\u7684\u6027\u80fd\u3002\u7136\u800c\uff0c\u4e3a\u4e86\u5e73\u8861\u6301\u7eed\u8bad\u7ec3\u4e2d\u7684\u91cd\u7528\u7387\u548c\u6a21\u578b\u6027\u80fd\uff0c\u6211\u4eec\u9009\u62e9\u4e86\u4e0a\u8ff0\u4e09\u4e2a\u9636\u6bb5\u5206\u522b\u4e3a80%\u300110%\u548c10%\u7684\u5206\u5e03\u3002 \u6279\u91cf\u5927\u5c0f\u548c\u5b66\u4e60\u7387\u968f\u6a21\u578b\u5927\u5c0f\u800c\u53d8\u5316\u30027B\u548c67B\u6a21\u578b\u9884\u8bad\u7ec3\u9636\u6bb5\u7684\u5177\u4f53\u53c2\u6570\u89c1\u88682\u3002</p> <p></p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseekllm/DeepSeek_LLM_Scaling_Open_Source_Language_Models_with_Longtermism/#24","title":"2.4. \u57fa\u7840\u8bbe\u65bd","text":"<p>\u6211\u4eec\u4f7f\u7528\u540d\u4e3aHAI-LLM\uff08High flyer\uff0c2023\uff09\u7684\u9ad8\u6548\u8f7b\u91cf\u7ea7\u8bad\u7ec3\u6846\u67b6\u6765\u8bad\u7ec3\u548c\u8bc4\u4f30\u5927\u578b\u8bed\u8a00\u6a21\u578b\u3002\u6570\u636e\u5e76\u884c\u6027\u3001\u5f20\u91cf\u5e76\u884c\u6027\u3001\u5e8f\u5217\u5e76\u884c\u6027\u548c1F1B\u6d41\u6c34\u7ebf\u5e76\u884c\u6027\u88ab\u96c6\u6210\u5230\u8fd9\u4e2a\u6846\u67b6\u4e2d\uff0c\u5c31\u50cf\u5728Megatron\u4e2d\u6240\u505a\u7684\u90a3\u6837\uff08Korthikanti\u7b49\u4eba\uff0c2023\uff1bNarayanan\u7b49\u4eba\uff0c2021\uff1bShoeybi\u7b49\u4eba\uff0c2019\uff09\u3002\u6211\u4eec\u8fd8\u5229\u7528flash\u6ce8\u610f\u529b\uff08Dao\uff0c2023\uff1bDao\u7b49\u4eba\uff0c2022\uff09\u6280\u672f\u6765\u63d0\u9ad8\u786c\u4ef6\u5229\u7528\u7387\u3002ZeRO-1\uff08Rajbhandari\u7b49\u4eba\uff0c2020\uff09\u88ab\u7528\u6765\u5728\u6570\u636e\u5e76\u884c\u5217\u4e0a\u5212\u5206\u4f18\u5316\u5668\u72b6\u6001\u3002\u8fd8\u52aa\u529b\u91cd\u53e0\u8ba1\u7b97\u548c\u901a\u4fe1\uff0c\u4ee5\u5c3d\u91cf\u51cf\u5c11\u989d\u5916\u7684\u7b49\u5f85\u5f00\u9500\uff0c\u5305\u62ecZeRO-1\u4e2d\u6700\u540e\u4e00\u4e2a\u5fae\u6279\u5904\u7406\u7684\u53cd\u5411\u8fc7\u7a0b\u548c\u51cf\u5c11\u5206\u6563\u64cd\u4f5c\uff0c\u4ee5\u53caGEMM\u8ba1\u7b97\u548c\u987a\u5e8f\u5e76\u884c\u7684\u6240\u6709\u6536\u96c6/\u51cf\u5c11\u5206\u6563\u3002\u4e00\u4e9b\u5c42/\u64cd\u4f5c\u7b26\u88ab\u878d\u5408\u4ee5\u52a0\u5feb\u8bad\u7ec3\u901f\u5ea6\uff0c\u5305\u62ecLayerNorm\u3001GEMM\uff08\u53ea\u8981\u53ef\u80fd\uff09\u548cAdam\u66f4\u65b0\u3002\u4e3a\u4e86\u63d0\u9ad8\u6a21\u578b\u8bad\u7ec3\u7684\u7a33\u5b9a\u6027\uff0c\u6211\u4eec\u4ee5bf16\u7cbe\u5ea6\u8bad\u7ec3\u6a21\u578b\uff0c\u4f46\u4ee5fp32\u7cbe\u5ea6\u7d2f\u79ef\u68af\u5ea6\u3002\u6267\u884c\u539f\u5730\u4ea4\u53c9\u71b5\u4ee5\u51cf\u5c11GPU\u5185\u5b58\u6d88\u8017\uff0c\u5373\uff1a\u6211\u4eec\u5728\u4ea4\u53c9\u71b5CUDA\u5185\u6838\u4e2d\u5c06bf16 logits\u52a8\u6001\u8f6c\u6362\u4e3afp32\u7cbe\u5ea6\uff08\u800c\u4e0d\u662f\u5728HBM\u4e2d\u9884\u5148\u8f6c\u6362\uff09\uff0c\u8ba1\u7b97\u76f8\u5e94\u7684bf16\u68af\u5ea6\uff0c\u5e76\u7528\u5176\u68af\u5ea6\u8986\u76d6logits\u3002\u00ac\u00ac \u6a21\u578b\u6743\u91cd\u548c\u4f18\u5316\u5668\u72b6\u6001\u6bcf5\u5206\u949f\u5f02\u6b65\u4fdd\u5b58\u4e00\u6b21\uff0c\u8fd9\u610f\u5473\u7740\u5728\u5076\u5c14\u51fa\u73b0\u786c\u4ef6\u6216\u7f51\u7edc\u6545\u969c\u7684\u6700\u574f\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u5c06\u635f\u5931\u4e0d\u8d85\u8fc75\u5206\u949f\u7684\u8bad\u7ec3\u65f6\u95f4\u3002\u8fd9\u4e9b\u4e34\u65f6\u6a21\u578b\u68c0\u67e5\u70b9\u4f1a\u5b9a\u671f\u6e05\u7406\uff0c\u4ee5\u907f\u514d</p> <p>\u6d88\u8017\u4e86\u592a\u591a\u7684\u5b58\u50a8\u7a7a\u95f4\u3002\u6211\u4eec\u8fd8\u652f\u6301\u4ece\u4e0d\u540c\u76843D\u5e76\u884c\u914d\u7f6e\u6062\u590d\u8bad\u7ec3\uff0c\u4ee5\u5e94\u5bf9\u8ba1\u7b97\u96c6\u7fa4\u8d1f\u8f7d\u7684\u52a8\u6001\u53d8\u5316\u3002 \u81f3\u4e8e\u8bc4\u4f30\uff0c\u6211\u4eec\u5728\u751f\u6210\u4efb\u52a1\u4e2d\u4f7f\u7528vLLM\uff08Kwon\u7b49\u4eba\uff0c2023\uff09\uff0c\u5728\u975e\u751f\u6210\u4efb\u52a1\u4e2d\u91c7\u7528\u8fde\u7eed\u6279\u5904\u7406\uff0c\u4ee5\u907f\u514d\u624b\u52a8\u8c03\u6574\u6279\u5927\u5c0f\u5e76\u51cf\u5c11\u4ee4\u724c\u586b\u5145\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseekllm/DeepSeek_LLM_Scaling_Open_Source_Language_Models_with_Longtermism/#3","title":"3 \u7f29\u653e\u5b9a\u5f8b","text":"<p>\u5bf9\u7f29\u653e\u5b9a\u5f8b\u7684\u7814\u7a76\uff08Hestness\u7b49\u4eba\uff0c2017\uff09\u65e9\u4e8e\u5927\u578b\u8bed\u8a00\u6a21\u578b\u7684\u51fa\u73b0\u3002\u7f29\u653e\u5b9a\u5f8b\uff08Henighan\u7b49\u4eba\uff0c2020\uff1bHoffmann\u7b49\u4eba\uff0c2022\uff1bKaplan\u7b49\u4eba\uff0c2020\uff09\u8868\u660e\uff0c\u968f\u7740\u8ba1\u7b97\u9884\u7b97\u7684\u589e\u52a0\u5230 \\(C\\)\uff0c\u6a21\u578b\u5bb9\u91cf\\(N\\), \u6570\u636e\u89c4\u6a21 \\(D\\)\uff0c\u6a21\u578b\u6027\u80fd\u53ef\u4ee5\u5f97\u5230\u53ef\u9884\u6d4b\u7684\u63d0\u9ad8\u3002 \u5f53\u6a21\u578b\u5bb9\u91cf\u7531\u6a21\u578b\u53c2\u6570 \\(N\\) \u8868\u793a\uff0c\u6570\u636e\u5bb9\u91cf\u8868\u793a\u4e3a \\(D\\)\uff0ctoken \u7684\u6570\u91cf \\(C\\) \u53ef\u4ee5\u8fd1\u4f3c\u4e3a \\(C = 6ND\\)\u3002\u56e0\u6b64\uff0c\u5728\u589e\u52a0\u7b97\u529b\u7684\u540c\u65f6\uff0c\u5982\u4f55\u4f18\u5316\u6a21\u578b\u53c2\u6570\u548c\u6570\u636e\u89c4\u6a21\u4e4b\u95f4\u7684\u5206\u914d\u4e5f\u662f\u7f29\u653e\u5b9a\u5f8b\u7684\u4e00\u4e2a\u5173\u952e\u7814\u7a76\u76ee\u6807\u3002</p> <p>\u968f\u7740LLM\u7684\u53d1\u5c55\uff08Dai\u7b49\u4eba\uff0c2019\uff1bRadford\u7b49\u4eba\uff0c2019\uff09\uff0c\u66f4\u5927\u7684\u6a21\u578b\u5b9e\u73b0\u4e86\u610f\u60f3\u4e0d\u5230\u7684\u663e\u8457\u6027\u80fd\u6539\u8fdb\uff0c\u5c06\u7f29\u653e\u5b9a\u5f8b\u7684\u7814\u7a76\u63a8\u5411\u4e86\u4e00\u4e2a\u65b0\u7684\u9ad8\u5cf0\u3002\u7f29\u653e\u5b9a\u5f8b\u7684\u7ed3\u679c\u8868\u660e\uff0c\u6269\u5927\u7b97\u529b\u6301\u7eed\u4ea7\u751f\u663e\u8457\u7684\u6536\u76ca\uff0c\u8fd9\u8fdb\u4e00\u6b65\u9f13\u52b1\u4e86\u6a21\u578b\u89c4\u6a21\u7684\u589e\u52a0\uff08Brown\u7b49\u4eba\uff0c2020\uff1bSmith\u7b49\u4eba\uff0c2022\uff09\u3002</p> <p>\u7136\u800c\uff0c\u5982\u88684\u6240\u793a\uff0c\u5173\u4e8e\u6700\u4f18\u6a21\u578b/\u6570\u636e\u7f29\u653e\u5206\u914d\u7b56\u7565\u7684\u65e9\u671f\u5de5\u4f5c\uff08Hoffmann\u7b49\u4eba\uff0c2022\uff1bKaplan\u7b49\u4eba\uff0c2020\uff09\u5f97\u51fa\u4e86\u4e0d\u540c\u7684\u7ed3\u8bba\uff0c\u8fd9\u5f15\u53d1\u4e86\u4eba\u4eec\u5bf9\u7f29\u653e\u5b9a\u5f8b\u6cdb\u5316\u6027\u7684\u6000\u7591\u3002\u6b64\u5916\uff0c\u8fd9\u4e9b\u7814\u7a76\u5f80\u5f80\u7f3a\u4e4f\u5bf9\u8d85\u53c2\u6570\u8bbe\u7f6e\u7684\u5b8c\u6574\u63cf\u8ff0\uff0c\u8fd9\u4f7f\u5f97\u5728\u4e0d\u540c\u8ba1\u7b97\u9884\u7b97\u4e0b\u7684\u6a21\u578b\u662f\u5426\u8fbe\u5230\u6700\u4f73\u6027\u80fd\u53d8\u5f97\u4e0d\u786e\u5b9a\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u5728\u672c\u8282\u4e2d\u91cd\u65b0\u5ba1\u89c6\u4e86\u7f29\u653e\u5b9a\u5f8b\uff0c\u4ee5\u89e3\u51b3\u8fd9\u4e9b\u4e0d\u786e\u5b9a\u6027\uff0c\u5e76\u786e\u4fdd\u6211\u4eec\u8d70\u5728\u6709\u6548\u6269\u5927\u8ba1\u7b97\u89c4\u6a21\u7684\u6b63\u786e\u9053\u8def\u4e0a\uff0c\u8fd9\u53cd\u6620\u4e86\u957f\u671f\u524d\u666f\uff0c\u662f\u5f00\u53d1\u4e0d\u65ad\u6539\u8fdb\u6a21\u578b\u7684\u5173\u952e\u3002</p> <p></p> <p>\u4e3a\u4e86\u786e\u4fdd\u4e0d\u540c\u8ba1\u7b97\u9884\u7b97\u4e0b\u7684\u6a21\u578b\u80fd\u591f\u8fbe\u5230\u6700\u4f73\u6027\u80fd\uff0c\u6211\u4eec\u9996\u5148\u7814\u7a76\u4e86\u8d85\u53c2\u6570\u7684\u7f29\u653e\u89c4\u5f8b\u3002\u6839\u636e\u7ecf\u9a8c\uff0c\u5df2\u7ecf\u89c2\u5bdf\u5230\uff0c\u5f53\u6539\u53d8\u8ba1\u7b97\u9884\u7b97\u65f6\uff0c\u8bad\u7ec3\u671f\u95f4\u5927\u591a\u6570\u53c2\u6570\u7684\u6700\u4f73\u503c\u4e0d\u4f1a\u6539\u53d8\u3002\u56e0\u6b64\uff0c\u8fd9\u4e9b\u53c2\u6570\u4e0e\u7b2c2.3\u8282\u4e2d\u6982\u8ff0\u7684\u53c2\u6570\u4e00\u81f4\uff0c\u5e76\u4e14\u5728\u4e0d\u540c\u7684\u8ba1\u7b97\u9884\u7b97\u4e2d\u4fdd\u6301\u4e0d\u53d8\u3002\u7136\u800c\uff0c\u5bf9\u6027\u80fd\u5f71\u54cd\u6700\u5927\u7684\u8d85\u53c2\u6570\uff0c\u5373\u6279\u5904\u7406\u5927\u5c0f\u548c\u5b66\u4e60\u7387\uff0c\u8fdb\u884c\u4e86\u91cd\u65b0\u68c0\u67e5\u3002</p> <p>\u65e9\u671f\u7684\u5de5\u4f5c\uff08Goyal\u7b49\u4eba\uff0c2017\uff1bMcCandlish\u7b49\u4eba\uff0c2018\uff1bShallue\u7b49\u4eba\uff0c2019\uff1bSmith\u7b49\u4eba\uff0c2017\uff0cZhang\u7b49\u4eba\uff0c2019\uff09\u4e3a\u8bbe\u7f6e\u6279\u91cf\u5927\u5c0f\u548c\u5b66\u4e60\u7387\u63d0\u4f9b\u4e86\u4e00\u4e9b\u7ecf\u9a8c\u89c2\u5bdf\uff0c\u4f46\u6211\u4eec\u53d1\u73b0\u8fd9\u4e9b\u89c2\u5bdf\u5728\u6211\u4eec\u7684\u521d\u6b65\u5b9e\u9a8c\u4e2d\u9002\u7528\u6027\u6709\u9650\u3002\u901a\u8fc7\u5927\u91cf\u5b9e\u9a8c\uff0c\u6211\u4eec\u6a21\u62df\u4e86\u8ba1\u7b97\u9884\u7b97\u4e4b\u95f4\u7684\u5e42\u5f8b\u5173\u7cfb\ud835\udc36 \u4ee5\u53ca\u6700\u4f73\u6279\u91cf\u5927\u5c0f\u548c\u5b66\u4e60\u7387\u3002\u8fd9\u79cd\u5173\u7cfb\uff0c\u6211\u4eec\u79f0\u4e4b\u4e3a\u8d85\u53c2\u6570\u7684\u7f29\u653e\u5b9a\u5f8b\uff0c\u4e3a\u786e\u5b9a\u6700\u4f18\u8d85\u53c2\u6570\u63d0\u4f9b\u4e86\u4e00\u4e2a\u7ecf\u9a8c\u6846\u67b6\u3002\u8fd9\u79cd\u65b9\u6cd5\u786e\u4fdd\u8de8\u4e0d\u540c\u8ba1\u7b97\u9884\u7b97\u7684\u6a21\u578b\u80fd\u591f\u8fbe\u5230\u63a5\u8fd1\u6700\u4f73\u7684\u6027\u80fd\u3002 \u7136\u540e\uff0c\u6211\u4eec\u7814\u7a76\u4e86\u6a21\u578b\u548c\u6570\u636e\u5c3a\u5ea6\u7684\u7f29\u653e\u89c4\u5f8b\u3002\u4e3a\u4e86\u964d\u4f4e\u5b9e\u9a8c\u6210\u672c\u548c\u62df\u5408\u96be\u5ea6\uff0c\u6211\u4eec\u91c7\u7528\u4e86Chinchilla\u7684IsoFLOP\u8f6e\u5ed3\u65b9\u6cd5\uff08Hoffmann\u7b49\u4eba\uff0c2022\uff09\u6765\u62df\u5408\u7f29\u653e\u66f2\u7ebf\u3002\u4e3a\u4e86\u66f4\u51c6\u786e\u5730\u8868\u793a\u6a21\u578b\u6bd4\u4f8b\uff0c\u6211\u4eec\u4f7f\u7528\u4e86\u4e00\u79cd\u65b0\u7684\u6a21\u578b\u6bd4\u4f8b\u8868\u793a\u6cd5\uff0c\u5373\u975e\u5d4c\u5165FLOP/token\ud835\udc40, \u66ff\u6362\u4e4b\u524d\u4f7f\u7528\u7684\u6a21\u578b\u53c2\u6570\ud835\udc41, \u5e76\u7528\u8fd1\u4f3c\u8ba1\u7b97\u9884\u7b97\u516c\u5f0f\u4ee3\u66ff\ud835\udc36 = 6\ud835\udc41 \ud835\udc37</p> <p>\u66f4\u7cbe\u786e\ud835\udc36 = \ud835\udc40\ud835\udc37. \u5b9e\u9a8c\u7ed3\u679c\u4e3a\u6700\u4f73\u6a21\u578b/\u6570\u636e\u6269\u5c55\u5206\u914d\u7b56\u7565\u548c\u6027\u80fd\u9884\u6d4b\u63d0\u4f9b\u4e86\u89c1\u89e3\uff0c\u5e76\u51c6\u786e\u9884\u6d4b\u4e86DeepSeek LLM 7B\u548c67B\u6a21\u578b\u7684\u9884\u671f\u6027\u80fd\u3002 \u6b64\u5916\uff0c\u5728\u63a2\u7d22\u6807\u5ea6\u5b9a\u5f8b\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528\u7684\u6570\u636e\u7ecf\u5386\u4e86\u591a\u6b21\u8fed\u4ee3\uff0c\u8d28\u91cf\u4e0d\u65ad\u63d0\u9ad8\u3002\u6211\u4eec\u8bd5\u56fe\u5728\u5404\u79cd\u6570\u636e\u96c6\u4e0a\u62df\u5408\u7f29\u653e\u66f2\u7ebf\uff0c\u53d1\u73b0\u6570\u636e\u8d28\u91cf\u663e\u8457\u5f71\u54cd\u6700\u4f73\u6a21\u578b/\u6570\u636e\u7f29\u653e\u5206\u914d\u7b56\u7565\u3002\u6570\u636e\u8d28\u91cf\u8d8a\u9ad8\uff0c\u5206\u914d\u7ed9\u6a21\u578b\u7f29\u653e\u7684\u8ba1\u7b97\u9884\u7b97\u5c31\u8d8a\u591a\u3002\u8fd9\u610f\u5473\u7740\uff0c\u5728\u76f8\u540c\u7684\u6570\u636e\u89c4\u6a21\u4e0b\uff0c\u9ad8\u8d28\u91cf\u7684\u6570\u636e\u53ef\u4ee5\u63a8\u52a8\u66f4\u5927\u6a21\u578b\u7684\u8bad\u7ec3\u3002\u6700\u4f18\u6a21\u578b/\u6570\u636e\u6269\u5c55\u5206\u914d\u7b56\u7565\u7684\u5dee\u5f02\u4e5f\u53ef\u4ee5\u4f5c\u4e3a\u8bc4\u4f30\u6570\u636e\u8d28\u91cf\u7684\u95f4\u63a5\u65b9\u6cd5\u3002\u6211\u4eec\u5c06\u7ee7\u7eed\u5bc6\u5207\u5173\u6ce8\u6570\u636e\u8d28\u91cf\u7684\u53d8\u5316\u53ca\u5176\u5bf9\u7f29\u653e\u89c4\u5f8b\u7684\u5f71\u54cd\uff0c\u5e76\u5728\u672a\u6765\u7684\u5de5\u4f5c\u4e2d\u63d0\u4f9b\u66f4\u591a\u7684\u5206\u6790\u3002 \u603b\u4e4b\uff0c\u6211\u4eec\u5728\u6807\u5ea6\u5b9a\u5f8b\u65b9\u9762\u7684\u8d21\u732e\u548c\u53d1\u73b0\u53ef\u4ee5\u603b\u7ed3\u5982\u4e0b\uff1a</p> <p>\u2022 \u6211\u4eec\u5efa\u7acb\u4e86\u8d85\u53c2\u6570\u7684\u6807\u5ea6\u5f8b\uff0c\u4e3a\u786e\u5b9a\u6700\u4f18\u8d85\u53c2\u6570\u63d0\u4f9b\u4e86\u7ecf\u9a8c\u6846\u67b6\u3002 \u2022 \u4ee3\u66ff\u6a21\u578b\u53c2\u6570\ud835\udc41, \u6211\u4eec\u91c7\u7528\u975e\u5d4c\u5165FLOP/\u4ee4\u724c\ud835\udc40 \u4ee5\u8868\u793a\u6a21\u578b\u89c4\u6a21\uff0c\u4ece\u800c\u4ea7\u751f\u66f4\u51c6\u786e\u7684\u6700\u4f18\u6a21\u578b/\u6570\u636e\u7f29\u653e\u5206\u914d\u7b56\u7565\uff0c\u5e76\u66f4\u597d\u5730\u9884\u6d4b\u5927\u89c4\u6a21\u6a21\u578b\u7684\u6cdb\u5316\u635f\u5931\u3002 \u2022 \u9884\u8bad\u7ec3\u6570\u636e\u7684\u8d28\u91cf\u4f1a\u5f71\u54cd\u6700\u4f73\u7684\u6a21\u578b/\u6570\u636e\u6269\u5c55\u5206\u914d\u7b56\u7565\u3002\u6570\u636e\u8d28\u91cf\u8d8a\u9ad8\uff0c\u5206\u914d\u7ed9\u6a21\u578b\u7f29\u653e\u7684\u8ba1\u7b97\u9884\u7b97\u5c31\u8d8a\u591a\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseekllm/DeepSeek_LLM_Scaling_Open_Source_Language_Models_with_Longtermism/#31","title":"3.1 \u8d85\u53c2\u6570\u7684\u7f29\u653e\u5b9a\u5f8b","text":"<p>\u6211\u4eec\u6700\u521d\u5728\u8ba1\u7b97\u9884\u7b97\u4e3a1e17\u7684\u5c0f\u89c4\u6a21\u5b9e\u9a8c\u4e2d\u5bf9\u6279\u91cf\u5927\u5c0f\u548c\u5b66\u4e60\u7387\u8fdb\u884c\u4e86\u7f51\u683c\u641c\u7d22\uff0c\u7279\u5b9a\u6a21\u578b\u5927\u5c0f\uff08177M FLOP/token\uff09\u7684\u7ed3\u679c\u5982\u56fe2\uff08a\uff09\u6240\u793a\u3002\u7ed3\u679c\u8868\u660e\uff0c\u5728\u6279\u91cf\u5927\u5c0f\u548c\u5b66\u4e60\u7387\u7684\u5e7f\u6cdb\u9009\u62e9\u8303\u56f4\u5185\uff0c\u6cdb\u5316\u8bef\u5dee\u4fdd\u6301\u7a33\u5b9a\u3002\u8fd9\u8868\u660e\uff0c\u5728\u76f8\u5bf9\u8f83\u5bbd\u7684\u53c2\u6570\u7a7a\u95f4\u5185\u53ef\u4ee5\u5b9e\u73b0\u63a5\u8fd1\u6700\u4f73\u7684\u6027\u80fd\u3002</p> <p>1 1e17 FLOP\uff08177M FLOP/\u4ee3\u5e01\uff09   \uff08b\uff091e20 FLOP\uff082.94B FLOP/\u4ee4\u724c\uff09</p> <p>\u56fe2| 1e17\u548c1e20 FLOP\u7684\u8bad\u7ec3\u635f\u5931\u4e0e\u6279\u91cf\u5927\u5c0f\u548c\u5b66\u4e60\u7387\u7684\u5173\u7cfb\u3002 \u7136\u540e\uff0c\u6211\u4eec\u5229\u7528\u4e0a\u8ff0\u591a\u6b65\u5b66\u4e60\u7387\u8c03\u5ea6\u5668\u6765\u6709\u6548\u5730\u8bad\u7ec3\u5177\u6709\u4e0d\u540c\u6279\u91cf\u5927\u5c0f\u3001\u5b66\u4e60\u7387\u548c\u8ba1\u7b97\u9884\u7b97\u7684\u591a\u4e2a\u6a21\u578b\uff0c\u8303\u56f4\u4ece</p> <p>\u901a\u8fc7\u91cd\u590d\u4f7f\u7528\u7b2c\u4e00\u7ea7\uff0c1e17\u81f32e19\u3002\u8003\u8651\u5230\u53c2\u6570\u7a7a\u95f4\u4e2d\u7684\u5197\u4f59\uff0c\u6211\u4eec\u5c06\u6cdb\u5316\u8bef\u5dee\u8d85\u8fc7\u6700\u5c0f\u503c\u4e0d\u8d85\u8fc70.25%\u7684\u6a21\u578b\u6240\u4f7f\u7528\u7684\u53c2\u6570\u89c6\u4e3a\u63a5\u8fd1\u6700\u4f18\u7684\u8d85\u53c2\u6570\u3002\u7136\u540e\u6211\u4eec\u8c03\u6574\u4e86\u6279\u91cf\u5927\u5c0f\ud835\udc35 \u5b66\u4e60\u7387\ud835\udf02 \u5173\u4e8e\u8ba1\u7b97\u9884\u7b97\ud835\udc36. \u5982\u56fe3\u6240\u793a\uff0c\u62df\u5408\u7ed3\u679c\u8868\u660e\uff0c\u6700\u4f73\u6279\u91cf\u5927\u5c0f\ud835\udc35 \u968f\u7740\u8ba1\u7b97\u9884\u7b97\u7684\u589e\u52a0\u800c\u9010\u6e10\u589e\u52a0\ud835\udc36, \u800c\u6700\u4f73\u5b66\u4e60\u7387\ud835\udf02 \u9010\u6e10\u51cf\u5c11\u3002\u8fd9\u4e0e\u6269\u5927\u6a21\u578b\u65f6\u6279\u91cf\u5927\u5c0f\u548c\u5b66\u4e60\u7387\u7684\u76f4\u89c2\u7ecf\u9a8c\u8bbe\u7f6e\u662f\u4e00\u81f4\u7684\u3002\u6b64\u5916\uff0c\u6240\u6709\u63a5\u8fd1\u6700\u4f18\u7684\u8d85\u53c2\u6570\u90fd\u843d\u5728\u4e00\u4e2a\u5bbd\u9891\u5e26\u8303\u56f4\u5185\uff0c\u8fd9\u8868\u660e\u5728\u8fd9\u4e2a\u533a\u95f4\u5185\u9009\u62e9\u63a5\u8fd1\u6700\u4f18\u7684\u53c2\u6570\u76f8\u5bf9\u5bb9\u6613\u3002\u6211\u4eec\u4e3a\u6279\u91cf\u5927\u5c0f\u548c\u5b66\u4e60\u7387\u62df\u5408\u7684\u6700\u7ec8\u516c\u5f0f\u5982\u4e0b\uff1a \ud835\udf02opt=0.3118\u00b7\ud835\udc36 \u22120.1250</p> <p>\ud835\udc35opt</p> <p>= 0.2920 \u00b7 \ud835\udc36 0.3271 (1)</p> <p>\uff08a\uff09 \u6279\u91cf\u7f29\u653e\u66f2\u7ebf  \uff08b\uff09\u5b66\u4e60\u7387\u7f29\u653e\u66f2\u7ebf</p> <p>\u56fe3 |\u6279\u91cf\u5927\u5c0f\u548c\u5b66\u4e60\u7387\u7684\u7f29\u653e\u66f2\u7ebf\u3002\u7070\u8272\u5706\u5708\u8868\u793a\u6cdb\u5316\u8bef\u5dee\u8d85\u8fc7\u6700\u5c0f\u503c\u4e0d\u8d85\u8fc70.25%\u7684\u6a21\u578b\u3002\u865a\u7ebf\u8868\u793a\u9002\u5408\u8f83\u5c0f\u6a21\u578b\u7684\u5e42\u5f8b\u3002\u84dd\u8272\u6052\u661f\u4ee3\u8868DeepSeek LLM 7B\u548c67B\u3002</p> <p>\u6211\u4eec\u5728\u4e00\u7cfb\u5217\u5177\u67091e20\u8ba1\u7b97\u9884\u7b97\u7684\u6a21\u578b\u4e0a\u9a8c\u8bc1\u4e86\u6211\u4eec\u7684\u516c\u5f0f\uff0c\u7279\u5b9a\u6a21\u578b\u5927\u5c0f\uff08\u6bcf\u4e2a\u4ee4\u724c2.94B FLOP\uff09\u7684\u7ed3\u679c\u5982\u56fe2\uff08b\uff09\u6240\u793a\u3002\u7ed3\u679c\u8868\u660e\uff0c\u62df\u5408\u53c2\u6570\u96c6\u4e2d\u5728\u6700\u4f18\u53c2\u6570\u7a7a\u95f4\u5185\u3002\u540e\u7eed\u90e8\u5206\u8fd8\u8868\u660e\uff0c\u6211\u4eec\u4e3aDeepSeek LLM 7B\u548c67B\u6a21\u578b\u62df\u5408\u7684\u53c2\u6570\u540c\u6837\u53d6\u5f97\u4e86\u826f\u597d\u7684\u6027\u80fd\u3002 \u7136\u800c\uff0c\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u6211\u4eec\u8fd8\u6ca1\u6709\u8003\u8651\u8ba1\u7b97\u9884\u7b97\u4e4b\u5916\u7684\u56e0\u7d20\u7684\u5f71\u54cd\ud835\udc36 \u5173\u4e8e\u6700\u4f18\u8d85\u53c2\u6570\u3002\u8fd9\u4e0e\u4e00\u4e9b\u65e9\u671f\u7684\u7814\u7a76\uff08Kaplan\u7b49\u4eba\uff0c2020\uff1bMcCandlish\u7b49\u4eba\uff0c2018\uff09\u4e0d\u4e00\u81f4\uff0c\u8fd9\u4e9b\u7814\u7a76\u8868\u660e\uff0c\u6700\u4f73\u6279\u91cf\u5927\u5c0f\u53ef\u4ee5\u5efa\u6a21\u4e3a\u4ec5\u4e0e\u6cdb\u5316\u8bef\u5dee\u6709\u5173\ud835\udc3f. \u6b64\u5916\uff0c\u6211\u4eec\u89c2\u5bdf\u5230\uff0c\u5728\u5177\u6709\u76f8\u540c\u8ba1\u7b97\u9884\u7b97\u4f46\u6a21\u578b/\u6570\u636e\u5206\u914d\u4e0d\u540c\u7684\u6a21\u578b\u4e2d\uff0c\u6700\u4f18\u53c2\u6570\u7a7a\u95f4\u7565\u6709\u4e0d\u540c\u3002\u8fd9\u8868\u660e\u9700\u8981\u8fdb\u4e00\u6b65\u7684\u7814\u7a76\u6765\u4e86\u89e3\u8d85\u53c2\u6570\u7684\u9009\u62e9\u548c\u8bad\u7ec3\u52a8\u529b\u5b66\u3002\u6211\u4eec\u5c06\u5728\u672a\u6765\u7684\u5de5\u4f5c\u4e2d\u63a2\u7d22\u8fd9\u4e9b\u65b9\u9762\u3002</p> <p>3.2 \u4f30\u8ba1\u6700\u4f18\u6a21\u578b\u548c\u6570\u636e\u7f29\u653e \u5728\u63a8\u5bfc\u51fa\u62df\u5408\u8fd1\u6700\u4f18\u8d85\u53c2\u6570\u7684\u516c\u5f0f\u540e\uff0c\u6211\u4eec\u5f00\u59cb\u62df\u5408\u7f29\u653e\u66f2\u7ebf\uff0c\u5e76\u5206\u6790\u6700\u4f18\u6a21\u578b/\u6570\u636e\u7f29\u653e\u5206\u914d\u7b56\u7565\u3002\u8be5\u7b56\u7565\u6d89\u53ca\u627e\u5230\u6a21\u578b\u7f29\u653e\u6307\u6570\ud835\udc4e \u6570\u636e\u7f29\u653e\u6307\u6570\ud835\udc4f \u90a3\u5c31\u6ee1\u8db3\u4e86\ud835\udc41opt\u251c\ud835\udc36\ud835\udc4e</p> <p>and \ud835\udc37opt\u251c\ud835\udc36\ud835\udc4f\u5206\u522b\u3002\u6570\u636e\u89c4\u6a21\ud835\udc37 \u53ef\u4ee5\u7528\u6570\u636e\u96c6\u4e2d\u7684\u4ee4\u724c\u6570\u91cf\u6765\u4e00\u81f4\u5730\u8868\u793a\u3002\u5728\u4e4b\u524d\u7684\u5de5\u4f5c\u4e2d\uff0c\u6a21\u578b\u5c3a\u5ea6\u901a\u5e38\u7531\u6a21\u578b\u53c2\u6570\u8868\u793a\uff0c\u5176\u4e2d\u5305\u542b\u975e\u5d4c\u5165\u53c2\u6570\ud835\udc411 \uff08Kaplan\u7b49\u4eba\uff0c2020\uff09\u548c\u5b8c\u6574\u53c2\u6570 \ud835\udc412 \uff08Hoffmann\u7b49\u4eba\uff0c2022\uff09\u3002\u8ba1\u7b97\u9884\u7b97\u4e4b\u95f4\u7684\u5173\u7cfb\ud835\udc36 \u6a21\u578b/\u6570\u636e\u89c4\u6a21\u53ef\u4ee5\u8fd1\u4f3c\u63cf\u8ff0\u4e3a\ud835\udc36 = 6\ud835\udc41 \ud835\udc37, \u8fd9\u610f\u5473\u7740\u6211\u4eec\u53ef\u4ee5\u4f7f\u75286\ud835\udc411 or 6\ud835\udc412 \u4ee5\u8fd1\u4f3c\u6a21\u578b\u6bd4\u4f8b\u3002\u7136\u800c\uff0c\u7531\u4e8e\u4e24\u8005\u5747\u4e3a6\ud835\udc411 and 6\ud835\udc412 \u4e0d\u8003\u8651\u6ce8\u610f\u529b\u64cd\u4f5c\u7684\u8ba1\u7b97\u5f00\u9500\uff0c\u4ee5\u53ca6\ud835\udc412 \u8fd8\u5305\u62ec\u8bcd\u6c47\u8ba1\u7b97\uff0c\u8fd9\u5bf9\u6a21\u578b\u7684\u5bb9\u91cf\u8d21\u732e\u8f83\u5c0f\uff0c\u5728\u67d0\u4e9b\u8bbe\u7f6e\u4e0b\uff0c\u5b83\u4eec\u90fd\u6709\u660e\u663e\u7684\u8fd1\u4f3c\u8bef\u5dee\u3002 \u4e3a\u4e86\u51cf\u5c11\u8fd9\u4e9b\u9519\u8bef\uff0c\u6211\u4eec\u5f15\u5165\u4e86\u4e00\u79cd\u65b0\u7684\u6a21\u578b\u89c4\u6a21\u8868\u793a\uff1a\u975e\u5d4c\u5165FLOP/token\ud835\udc40. \ud835\udc40 \u5305\u62ec\u6ce8\u610f\u529b\u64cd\u4f5c\u7684\u8ba1\u7b97\u5f00\u9500\uff0c\u4f46\u4e0d\u8003\u8651\u8bcd\u6c47\u8ba1\u7b97\u3002\u6a21\u578b\u6bd4\u4f8b\u7531\u8868\u793a\ud835\udc40, \u8ba1\u7b97\u9884\u7b97\ud835\udc36 \u53ef\u4ee5\u7b80\u5355\u5730\u8868\u793a\u4e3a\ud835\udc36 = \ud835\udc40\ud835\udc37. 6\u4e4b\u95f4\u7684\u5177\u4f53\u533a\u522b\ud835\udc411, 6\ud835\udc412, and \ud835\udc40 \u5982\u4ee5\u4e0b\u516c\u5f0f\u6240\u793a\uff1a 6\ud835\udc411 = 72 \ud835\udc5b\u56fe\u5c42\ud835\udc512</p> <p>6\ud835\udc412 = 72 \ud835\udc5b\u56fe\u5c42\ud835\udc512 \ud835\udc40 = 72 \ud835\udc5b\u56fe\u5c42\ud835\udc512</p> <ul> <li>6 \ud835\udc5bvocab\ud835\udc51model</li> <li>12 \ud835\udc5b\u56fe\u5c42\ud835\udc51\u6a21\u578b\ud835\udc59seq</li> </ul> <p>2.</p> <p>\u54ea\u91cc\ud835\udc5blayer\u8868\u793a\u5c42\u6570\uff0c\ud835\udc51model\u8868\u793a\u6a21\u578b\u5bbd\u5ea6\uff0c\ud835\udc5bvocab\u662f\u8bcd\u6c47\u91cf\uff0c\u4ee5\u53ca\ud835\udc59seq\u662f\u5e8f\u5217\u957f\u5ea6\u3002\u6211\u4eec\u8bc4\u4f30\u4e86\u4e0d\u540c\u5c3a\u5ea6\u6a21\u578b\u4e2d\u8fd9\u4e09\u79cd\u8868\u793a\u4e4b\u95f4\u7684\u5dee\u5f02\uff0c\u5982\u88683\u6240\u793a\u3002\u7ed3\u679c\u8868\u660e\uff0c6\ud835\udc411 and 6\ud835\udc412 \u9ad8\u4f30\u6216\u4f4e\u4f30\u4e86\u4e0d\u540c\u5c3a\u5ea6\u6a21\u578b\u7684\u8ba1\u7b97\u6210\u672c\u3002\u8fd9\u79cd\u5dee\u5f02\u5728\u5c0f\u89c4\u6a21\u6a21\u578b\u4e2d\u5c24\u4e3a\u660e\u663e\uff0c\u5dee\u5f02\u9ad8\u8fbe50%\u3002\u5728\u62df\u5408\u7f29\u653e\u66f2\u7ebf\u65f6\uff0c\u8fd9\u79cd\u4e0d\u51c6\u786e\u53ef\u80fd\u4f1a\u5f15\u5165\u5927\u91cf\u7684\u7edf\u8ba1\u8bef\u5dee\u3002\u5173\u4e8e\u6a21\u578b\u6bd4\u4f8b\u7684\u4e0d\u540c\u8868\u793a\uff0c\u8bf7\u53c2\u9605\u9644\u5f55A.2\u8fdb\u884c\u8fdb\u4e00\u6b65\u5206\u6790\u3002</p> <p>\ud835\udc5b\u5c42  \ud835\udc51model  \ud835\udc5bvocab  \ud835\udc59seq    \ud835\udc411  \ud835\udc412  \ud835\udc40   6\ud835\udc411 \ud835\udc40   6\ud835\udc412 \ud835\udc40</p> <ol> <li>512         25.2\u7c73   77.6\u7c73   352\u7c73    0.43    1.32 12  768         84.9\u7c73   164\u7c73    963\u7c73    0.53    1.02 24  1024            302\u7c73    407\u7c73    3.02B   0.60    0.81 24  2048    102400  4096    1.21B   1.42B   9.66B   0.75    0.88 32  4096            6.44B   6.86B   45.1B   0.85    0.91 40  5120            12.6B   13.1B   85.6B   0.88    0.92 80  8192            64.4B   65.3B   419B    0.92    0.94 \u88683 |\u6a21\u578b\u5c3a\u5ea6\u8868\u793a\u7684\u5dee\u5f02\u548c\u975e\u5d4c\u5165\u53c2\u6570\u7684\u5dee\u5f02 \ud835\udc411 \u5e76\u5b8c\u6210\u53c2\u6570\ud835\udc412 \u76f8\u5bf9\u4e8e\u975e\u5d4c\u5165FLOP/\u4ee4\u724c\ud835\udc40.</li> </ol> <p>\u6536\u517b\u540e\ud835\udc40 \u4e3a\u4e86\u8868\u793a\u6a21\u578b\u89c4\u6a21\uff0c\u6211\u4eec\u7684\u76ee\u6807\u53ef\u4ee5\u66f4\u6e05\u695a\u5730\u63cf\u8ff0\u4e3a\uff1a\u7ed9\u5b9a\u8ba1\u7b97\u9884\u7b97\ud835\udc36 = \ud835\udc40\ud835\udc37, \u627e\u5230\u6700\u4f18\u6a21\u578b\u6bd4\u4f8b\ud835\udc40opt\u548c\u6570\u636e\u89c4\u6a21\ud835\udc37\u9009\u62e9\u6700\u5c0f\u5316\u6a21\u578b\u7684\u6cdb\u5316\u8bef\u5dee\u3002\u8fd9\u4e00\u76ee\u6807\u53ef\u4ee5\u6b63\u5f0f\u5316\u4e3a\uff1a</p> <p>\ud835\udc40opt\uff08\ud835\udc36\uff09\uff0c\ud835\udc37opt\uff08 \ud835\udc40,\ud835\udc37 s.t. \ud835\udc36=\ud835\udc40\ud835\udc37</p> <p>\ud835\udc3f(\ud835\udc41, \ud835\udc37) (3)</p> <p>\u4e3a\u4e86\u964d\u4f4e\u5b9e\u9a8c\u6210\u672c\u548c\u62df\u5408\u96be\u5ea6\uff0c\u4f7f\u7528\u4e86Chinchilla\u7684IsoFLOP\u8f6e\u5ed3\u65b9\u6cd5\uff08Hoffmann\u7b49\u4eba\uff0c2022\uff09\u6765\u62df\u5408\u7f29\u653e\u66f2\u7ebf\u3002\u6211\u4eec\u9009\u62e9\u4e868\u4e2a\u4e0d\u540c\u7684</p> <p>\uff08a\uff09 IsoFLOP\u66f2\u7ebf   \uff08b\uff09\u6700\u4f73\u6a21\u578b\u7f29\u653e\uff08  c\uff09\u6700\u4f73\u6570\u636e\u7f29\u653e</p> <p>\u56fe4|IsoFLOP\u66f2\u7ebf\u548c\u6700\u4f73\u6a21\u578b/\u6570\u636e\u5206\u914d\u3002IsoFLOP\u66f2\u7ebf\u4e2d\u7684\u5ea6\u91cf\u662f\u9a8c\u8bc1\u96c6\u4e0a\u7684\u6bcf\u5b57\u8282\u6bd4\u7279\u6570\u3002\u6700\u4f18\u6a21\u578b/\u6570\u636e\u7f29\u653e\u66f2\u7ebf\u4e2d\u7684\u865a\u7ebf\u8868\u793a\u9002\u5408\u8f83\u5c0f\u6a21\u578b\u7684\u5e42\u5f8b\uff08\u7070\u8272\u5706\u5708\uff09\u3002</p> <p>\u8ba1\u7b97\u4ece1e17\u52303e20\u7684\u9884\u7b97\uff0c\u5e76\u4e3a\u6bcf\u4e2a\u9884\u7b97\u8bbe\u8ba1\u4e86\u5927\u7ea610\u4e2a\u4e0d\u540c\u7684\u6a21\u578b/\u6570\u636e\u89c4\u6a21\u5206\u914d\u3002\u6bcf\u4e2a\u9884\u7b97\u7684\u8d85\u53c2\u6570\u7531\u516c\u5f0f\uff081\uff09\u786e\u5b9a\uff0c\u6cdb\u5316\u8bef\u5dee\u5728\u4e00\u4e2a\u72ec\u7acb\u7684\u9a8c\u8bc1\u96c6\u4e0a\u8ba1\u7b97\uff0c\u8be5\u9a8c\u8bc1\u96c6\u4e0e\u8bad\u7ec3\u96c6\u5206\u5e03\u76f8\u4f3c\uff0c\u5305\u542b1\u4ebf\u4e2a\u4ee4\u724c\u3002 \u56fe4\u5c55\u793a\u4e86IsoFLOP\u66f2\u7ebf\u548c\u6a21\u578b/\u6570\u636e\u7f29\u653e\u66f2\u7ebf\uff0c\u8fd9\u4e9b\u66f2\u7ebf\u662f\u901a\u8fc7\u4f7f\u7528\u6bcf\u4e2a\u8ba1\u7b97\u9884\u7b97\u7684\u6700\u4f73\u6a21\u578b/\u6570\u636e\u5206\u914d\u8fdb\u884c\u62df\u5408\u7684\u3002\u6700\u4f18\u975e\u5d4c\u5165FLOP/token\u7684\u5177\u4f53\u516c\u5f0f\ud835\udc40opt\u548c\u6700\u4f18\u4ee4\u724c\ud835\udc37opt\u5982\u4e0b\uff1a \ud835\udc40opt=\ud835\udc40\u57fa\u5730\u00b7\ud835\udc36\ud835\udc4e,    \ud835\udc40\u57fa\u6570=0.1715\uff0c \ud835\udc4e = 0.5243</p> <p>\ud835\udc37opt=\ud835\udc37base</p> <p>\u00b7 \ud835\udc36\ud835\udc4f,   \ud835\udc37base</p> <p>4. = 5.8316,   \ud835\udc4f = 0.4757</p> <p>\u6b64\u5916\uff0c\u6211\u4eec\u6839\u636e\u8ba1\u7b97\u9884\u7b97\u62df\u5408\u4e86\u635f\u5931\u7f29\u653e\u66f2\u7ebf\ud835\udc36 \u5e76\u9884\u6d4b\u4e86DeepSeek LLM 7B\u548c67B\u7684\u6cdb\u5316\u8bef\u5dee\uff0c\u5982\u56fe5\u6240\u793a\u3002\u7ed3\u679c\u8868\u660e\uff0c\u4f7f\u7528\u5c0f\u89c4\u6a21\u5b9e\u9a8c\u53ef\u4ee5\u51c6\u786e\u9884\u6d4b</p> <p>\u56fe5 |\u6027\u80fd\u7f29\u653e\u66f2\u7ebf\u3002\u5ea6\u91cf\u662f\u9a8c\u8bc1\u96c6\u4e0a\u7684\u6bcf\u5b57\u8282\u6bd4\u7279\u6570\u3002\u865a\u7ebf\u8868\u793a\u9002\u5408\u8f83\u5c0f\u6a21\u578b\u7684\u5e42\u5f8b\uff08\u7070\u8272\u5706\u5708\uff09\u3002\u84dd\u8272\u6052\u661f\u4ee3\u8868DeepSeek LLM 7B\u548c67B\u3002\u7f29\u653e\u66f2\u7ebf\u5f88\u597d\u5730\u9884\u6d4b\u4e86\u5b83\u4eec\u7684\u6027\u80fd\u3002</p> <p>\u8ba1\u7b97\u9884\u7b97\u4e3a1000\u500d\u7684\u6a21\u578b\u7684\u6027\u80fd\u3002\u8fd9\u4e3a\u66f4\u5927\u89c4\u6a21\u7684\u8bad\u7ec3\u6a21\u578b\u63d0\u4f9b\u4e86\u4fe1\u5fc3\u548c\u6307\u5bfc\u3002</p> <p>3.3. \u4e0d\u540c\u6570\u636e\u7684\u7f29\u653e\u5b9a\u5f8b \u5728DeepSeek LLM\u7684\u5f00\u53d1\u8fc7\u7a0b\u4e2d\uff0c\u6570\u636e\u96c6\u7ecf\u8fc7\u591a\u6b21\u8fed\u4ee3\u4f18\u5316\uff0c\u5728\u63d0\u9ad8\u6574\u4f53\u8d28\u91cf\u7684\u540c\u65f6\u8c03\u6574\u4e86\u4e0d\u540c\u6570\u636e\u6e90\u7684\u6bd4\u4f8b\u3002\u8fd9\u4f7f\u6211\u4eec\u80fd\u591f\u8fdb\u4e00\u6b65\u5206\u6790\u4e0d\u540c\u6570\u636e\u96c6\u5bf9\u7f29\u653e\u5b9a\u5f8b\u7684\u5f71\u54cd\u3002 \u6211\u4eec\u4f7f\u7528\u4e09\u4e2a\u4e0d\u540c\u7684\u6570\u636e\u96c6\u7814\u7a76\u4e86\u7f29\u653e\u89c4\u5f8b\uff1a\u65e9\u671f\u5185\u90e8\u6570\u636e\u3001\u5f53\u524d\u5185\u90e8\u6570\u636e\u548cOpenWebText2\uff0c\u540e\u8005\u5728\u4e4b\u524d\u7684\u7f29\u653e\u89c4\u5f8b\u7814\u7a76\u4e2d\u5f97\u5230\u4e86\u5e94\u7528\uff08Kaplan\u7b49\u4eba\uff0c2020\uff09\u3002\u6211\u4eec\u7684\u5185\u90e8\u6570\u636e\u8bc4\u4f30\u663e\u793a\uff0c\u5f53\u524d\u7684\u5185\u90e8\u6570\u636e\u6bd4\u65e9\u671f\u7684\u5185\u90e8\u6570\u636e\u5177\u6709\u66f4\u9ad8\u7684\u6570\u636e\u8d28\u91cf\u3002\u6b64\u5916\uff0cOpenWebText2\u7684\u8d28\u91cf\u751a\u81f3\u8d85\u8fc7\u4e86\u76ee\u524d\u7684\u5185\u90e8\u6570\u636e\uff0c\u56e0\u4e3a\u5b83\u7684\u89c4\u6a21\u8f83\u5c0f\uff0c\u53ef\u4ee5\u8fdb\u884c\u66f4\u7ec6\u81f4\u7684\u5904\u7406\u3002</p> <p>\u65b9\u6cd5  Coeff\u3002\ud835\udc4e where \ud835\udc41opt\uff08\ud835\udc40opt\uff09\ud835\udc36\ud835\udc4e    Coeff\u3002\ud835\udc4f where \ud835\udc37opt\u251c\ud835\udc36\ud835\udc4f OpenAI\uff08OpenWebText2\uff09    0.73    0.27 \u94a6\u5947\u5229\u4e9a\uff08MassiveText\uff09   0.49    0.51 \u6211\u4eec\u7684\uff08\u65e9\u671f\u6570\u636e\uff09   0.450   0.550 \u6211\u4eec\u7684\uff08\u5f53\u524d\u6570\u636e\uff09   0.524   0.476 \u6211\u4eec\u7684\uff08OpenWebText2\uff09   0.578   0.422 \u88684|\u6a21\u578b\u7f29\u653e\u7cfb\u6570\u548c\u6570\u636e\u7f29\u653e\u7cfb\u6570\u968f\u8bad\u7ec3\u6570\u636e\u5206\u5e03\u800c\u53d8\u5316\u3002\u5206\u6790\u4e2d\u4e00\u4e2a\u6709\u8da3\u7684\u89c2\u5bdf\u7ed3\u679c\u662f\uff0c\u8fd9\u4e09\u4e2a\u6570\u636e\u96c6\u7684\u6700\u4f73\u6a21\u578b/\u6570\u636e\u6269\u5c55\u5206\u914d\u7b56\u7565\u4e0e\u6570\u636e\u8d28\u91cf\u4e00\u81f4\u3002\u5982\u88684\u6240\u793a\uff0c\u968f\u7740\u6570\u636e\u8d28\u91cf\u7684\u63d0\u9ad8\uff0c\u6a21\u578b\u7f29\u653e\u6307\u6570\ud835\udc4e \u9010\u6e10\u589e\u52a0\uff0c\u800c\u6570\u636e\u7f29\u653e\u6307\u6570\ud835\udc4f \u51cf\u5c11\uff0c\u8fd9\u8868\u660e\u589e\u52a0\u7684\u8ba1\u7b97\u9884\u7b97\u5e94\u8be5\u66f4\u591a\u5730\u5206\u914d\u7ed9\u6a21\u578b\u800c\u4e0d\u662f\u6570\u636e\u3002\u8fd9\u4e00\u53d1\u73b0\u4e5f\u53ef\u80fd\u89e3\u91ca\u4e86\u65e9\u671f\u7f29\u653e\u5b9a\u5f8b\u7814\u7a76\u4e2d\u89c2\u5bdf\u5230\u7684\u6700\u4f73\u6a21\u578b/\u6570\u636e\u7f29\u653e\u5206\u914d\u7684\u663e\u8457\u5dee\u5f02\u3002 \u5bf9\u8fd9\u4e00\u53d1\u73b0\u7684\u4e00\u4e2a\u76f4\u89c2\u63a8\u6d4b\u662f\uff0c\u9ad8\u8d28\u91cf\u7684\u6570\u636e\u901a\u5e38\u610f\u5473\u7740\u7ecf\u8fc7\u5145\u5206\u8bad\u7ec3\u540e\u903b\u8f91\u6e05\u6670\uff0c\u9884\u6d4b\u96be\u5ea6\u8f83\u5c0f\u3002\u56e0\u6b64\uff0c\u5728\u589e\u52a0\u8ba1\u7b97\u9884\u7b97\u65f6\uff0c\u6269\u5927\u6a21\u578b\u5927\u5c0f\u66f4\u6709\u5229\u3002\u6211\u4eec\u5c06\u7ee7\u7eed\u5bc6\u5207\u5173\u6ce8\u6570\u636e\u8d28\u91cf\u7684\u53d8\u5316\u53ca\u5176\u5bf9\u7f29\u653e\u89c4\u5f8b\u7684\u5f71\u54cd\uff0c\u5e76\u5728\u672a\u6765\u7684\u5de5\u4f5c\u4e2d\u63d0\u4f9b\u66f4\u591a\u7684\u5206\u6790\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseekllm/DeepSeek_LLM_Scaling_Open_Source_Language_Models_with_Longtermism/#4","title":"4 \u5bf9\u9f50","text":"<p>\u6211\u4eec\u6536\u96c6\u4e86\u7ea6150\u4e07\u4e2a\u4e2d\u82f1\u6587\u6307\u4ee4\u6570\u636e\u5b9e\u4f8b\uff0c\u6db5\u76d6\u4e86\u5e7f\u6cdb\u7684\u6709\u76ca\u548c\u65e0\u5bb3\u4e3b\u9898\u3002\u6211\u4eec\u6709\u7528\u6570\u636e\u5305\u542b120\u4e07\u4e2a\u6837\u672c\uff0c\u5176\u4e2d31.2%\u7528\u4e8e\u4e00\u822c\u8bed\u8a00\u4efb\u52a1\uff0c46.6%\u7528\u4e8e\u6570\u5b66\u95ee\u9898\uff0c22.2%\u7528\u4e8e\u7f16\u7801\u7ec3\u4e60\u3002\u5b89\u5168\u6570\u636e\u753130\u4e07\u4e2a\u6837\u672c\u7ec4\u6210\uff0c\u6db5\u76d6\u4e86\u5404\u79cd\u654f\u611f\u4e3b\u9898\u3002 \u6211\u4eec\u7684\u8def\u7ebf\u6d41\u7a0b\u5305\u542b\u4e24\u4e2a\u9636\u6bb5\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseekllm/DeepSeek_LLM_Scaling_Open_Source_Language_Models_with_Longtermism/#41","title":"4.1 \u6709\u76d1\u7763\u5fae\u8c03","text":"<p>\u6211\u4eec\u75284\u4e2a\u8fed\u4ee3\u5468\u671f\u5bf97B\u6a21\u578b\u8fdb\u884c\u4e86\u5fae\u8c03\uff0c\u4f4667B\u6a21\u578b\u53ea\u67092\u4e2a\u8fed\u4ee3\u5468\u671f\uff0c\u56e0\u4e3a\u6211\u4eec\u89c2\u5bdf\u523067B\u6a21\u578b\u7684\u8fc7\u62df\u5408\u95ee\u9898\u5f88\u4e25\u91cd\u3002\u6211\u4eec\u89c2\u5bdf\u5230\uff0c7B\u6a21\u578b\u7684GSM8K\uff08Cobbe\u7b49\u4eba\uff0c2021\uff09\u548cHumanEval\uff08Chen\u7b49\uff0c2021\uff09\u6548\u679c\u6301\u7eed\u5f97\u5230\u6539\u5584\uff0c\u800c67B\u6a21\u578b\u5f88\u5feb\u5c31\u4f1a\u8fbe\u5230\u4e0a\u9650\u30027B\u548c67B\u6a21\u578b\u7684\u5b66\u4e60\u7387\u5206\u522b\u4e3a1e-5\u548c5e-6\u3002\u9664\u4e86\u76d1\u63a7\u57fa\u51c6\u7cbe\u5ea6\u5916\uff0c\u6211\u4eec\u8fd8\u5728\u5fae\u8c03\u8fc7\u7a0b\u4e2d\u8bc4\u4f30\u804a\u5929\u6a21\u578b\u7684\u91cd\u590d\u7387\u3002\u6211\u4eec\u603b\u5171\u6536\u96c6\u4e863868\u4e2a\u4e2d\u82f1\u6587\u63d0\u793a\u8bcd\uff0c\u5e76\u786e\u5b9a\u4e86\u751f\u6210\u7684\u54cd\u5e94\u4e2d\u6ca1\u6709\u7ec8\u6b62\u800c\u662f\u65e0\u4f11\u6b62\u5730\u91cd\u590d\u4e00\u6bb5\u6587\u672c\u3002\u6211\u4eec\u89c2\u5bdf\u5230\uff0c\u968f\u7740\u6570\u5b66SFT\u6570\u636e\u91cf\u7684\u589e\u52a0\uff0c\u91cd\u590d\u7387\u8d8b\u4e8e\u4e0a\u5347\u3002\u8fd9\u53ef\u4ee5\u5f52\u56e0\u4e8e\u6570\u5b66SFT\u6570\u636e\u5728\u63a8\u7406\u4e2d\u5076\u5c14\u4f1a\u5305\u542b\u7c7b\u4f3c\u7684\u6a21\u5f0f\u3002\u56e0\u6b64\uff0c\u8f83\u5f31\u7684\u6a21\u578b\u5f88\u96be\u638c\u63e1\u8fd9\u79cd\u63a8\u7406\u6a21\u5f0f\uff0c\u5bfc\u81f4\u91cd\u590d\u7684\u53cd\u5e94\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u5c1d\u8bd5\u4e86\u4e24\u9636\u6bb5\u5fae\u8c03\u548cDPO\uff08Rafailov\u7b49\u4eba\uff0c2023\uff09\uff0c\u8fd9\u4e24\u79cd\u65b9\u6cd5\u51e0\u4e4e\u53ef\u4ee5\u4fdd\u6301\u57fa\u51c6\u5206\u6570\u5e76\u663e\u8457\u51cf\u5c11\u91cd\u590d\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseekllm/DeepSeek_LLM_Scaling_Open_Source_Language_Models_with_Longtermism/#42-dpo","title":"4.2 DPO","text":"<p>\u4e3a\u4e86\u8fdb\u4e00\u6b65\u589e\u5f3a\u6a21\u578b\u7684\u80fd\u529b\uff0c\u6211\u4eec\u4f7f\u7528\u4e86\u76f4\u63a5\u504f\u597d\u4f18\u5316\u7b97\u6cd5\uff08Rafailov\u7b49\u4eba\uff0c2023\uff09\uff0c\u8fd9\u88ab\u8bc1\u660e\u662f\u4e00\u79cd\u7b80\u5355\u4f46\u6709\u6548\u7684LLM\u5bf9\u9f50\u65b9\u6cd5\u3002\u6211\u4eec\u6784\u5efa\u4e86DPO\u8bad\u7ec3\u5728\u6709\u76ca\u6027\u548c\u65e0\u5bb3\u6027\u65b9\u9762\u7684\u504f\u597d\u6570\u636e\u3002\u4e3a\u4e86\u83b7\u5f97\u6709\u7528\u7684\u6570\u636e\uff0c\u6211\u4eec\u6536\u96c6\u4e86\u591a\u8bed\u8a00\u63d0\u793a\uff0c\u6db5\u76d6\u4e86\u521b\u610f\u5199\u4f5c\u3001\u95ee\u7b54\u3001\u6307\u4ee4\u9075\u5faa\u7b49\u7c7b\u522b\u3002\u7136\u540e\uff0c\u6211\u4eec\u4f7f\u7528DeepSeek Chat\u6a21\u578b\u4f5c\u4e3a\u54cd\u5e94\u5019\u9009\u751f\u6210\u4e86\u54cd\u5e94\u3002\u7c7b\u4f3c\u7684\u64cd\u4f5c\u4e5f\u5e94\u7528\u4e8e\u65e0\u5bb3\u504f\u597d\u6570\u636e\u6784\u5efa\u3002</p> <p>\u6211\u4eec\u4e3aDPO\u8bad\u7ec3\u4e86\u4e00\u4e2a\u8fed\u4ee3\uff0c\u5b66\u4e60\u7387\u4e3a5e-6\uff0c\u6279\u5904\u7406\u5927\u5c0f\u4e3a512\uff0c\u6211\u4eec\u4f7f\u7528\u4e86\u5b66\u4e60\u7387\u9884\u70ed\u548c\u4f59\u5f26\u5b66\u4e60\u7387\u8c03\u5ea6\u5668\u3002\u6211\u4eec\u53d1\u73b0\uff0cDPO\u53ef\u4ee5\u589e\u5f3a\u6a21\u578b\u7684\u5f00\u653e\u5f0f\u751f\u6210\u6280\u80fd\uff0c\u540c\u65f6\u5728\u6807\u51c6\u57fa\u51c6\u4e4b\u95f4\u4ea7\u751f\u7684\u6027\u80fd\u5dee\u5f02\u5f88\u5c0f\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/deepseekllm/DeepSeek_LLM_Scaling_Open_Source_Language_Models_with_Longtermism/#5","title":"5 \u8bc4\u4ef7","text":"<p>5.1 \u516c\u5171\u57fa\u51c6\u8bc4\u4f30 \u6211\u4eec\u6839\u636e\u5185\u90e8\u8bc4\u4f30\u6846\u67b6\uff0c\u5728\u4e00\u7cfb\u5217\u4e2d\u82f1\u6587\u516c\u5171\u57fa\u51c6\u4e0a\u8bc4\u4f30\u6211\u4eec\u7684\u6a21\u578b\u3002 \u591a\u5b66\u79d1\u591a\u9879\u9009\u62e9\u6570\u636e\u96c6\uff0c\u5305\u62ecMMLU\uff08Hendrycks\u7b49\u4eba\uff0c2020\uff09\u3001C-Eval\uff08Huang\u7b49\u4eba\uff0c2023\uff09\u548cCMMLU\uff08Li\u7b49\u4eba\uff0c2023\u5e74\uff09\u3002 \u8bed\u8a00\u7406\u89e3\u548c\u63a8\u7406\u6570\u636e\u96c6\u5305\u62ecHellaSwag\uff08Zellers\u7b49\u4eba\uff0c2019\uff09\u3001PIQA\uff08Bisk\u7b49\u4eba\uff0c2020\uff09\u3001ARC\uff08Clark\u7b49\u4eba\uff0c2018\uff09\u3001OpenBookQA\uff08Mihailov\u7b49\u4eba\uff0c2018\u5e74\uff09\u548cBigBench Hard\uff08BBH\uff09\uff08Suzgun\u7b49\u4eba\uff0c2022\uff09\u3002 \u95ed\u4e66\u95ee\u7b54\u6570\u636e\u96c6\uff0c\u5305\u62ecTriviaQA\uff08Joshi\u7b49\u4eba\uff0c2017\uff09\u548cNatu ralQuestions\uff08Kwiatkowski\u7b49\u4eba\uff0c2019\uff09\u3002 \u9605\u8bfb\u7406\u89e3\u6570\u636e\u96c6\u5305\u62ecRACE Lai\u7b49\u4eba\uff082017\u5e74\uff09\u548cDROP\uff08Dua\u7b49\u4eba\uff0c2019\u5e74\uff09\uff0cC3\uff08Sun\u7b49\u4eba\uff0c2019\uff09\u3002 \u53c2\u8003\u6d88\u6b67\u6570\u636e\u96c6\uff0c\u5305\u62ecWinoGrande Sakaguchi\u7b49\u4eba\uff082019\uff09\u548cCLUEWSC\uff08Xu\u7b49\u4eba\uff0c2020\uff09\u3002 \u8bed\u8a00\u5efa\u6a21\u6570\u636e\u96c6\uff0c\u5305\u62ecPile\uff08Gao\u7b49\u4eba\uff0c2020\uff09\u3002 \u4e2d\u56fd\u7406\u89e3\u548c\u6587\u5316\u6570\u636e\u96c6\uff0c\u5305\u62ecCHID\uff08Zheng\u7b49\u4eba\uff0c2019\uff09\u548cCCPM\uff08Li\u7b49\u4eba\uff0c2021\uff09\u3002</p> <p>\u6570\u5b66\u6570\u636e\u96c6\u5305\u62ecGSM8K\uff08Cobbe\u7b49\u4eba\uff0c2021\u5e74\uff09\u3001Math\uff08Hendrycks\u7b49\u4eba\uff0c2021\uff09\u548cCMath\uff08Wei\u7b49\u4eba\uff0c2023\u5e74\uff09\u3002 \u4ee3\u7801\u6570\u636e\u96c6\u5305\u62ecHumanEval\uff08Chen\u7b49\u4eba\uff0c2021\uff09\u548cMBPP\uff08Austin\u7b49\uff0c2021\uff09\u3002 \u5305\u62ecAGIEval\u5728\u5185\u7684\u6807\u51c6\u5316\u68c0\u67e5\uff08Zhong\u7b49\u4eba\uff0c2023\uff09\u3002 \u6211\u4eec\u5c06\u57fa\u4e8e\u56f0\u60d1\u5ea6\u7684\u8bc4\u4f30\u5e94\u7528\u4e8e\u9700\u8981\u4ece\u591a\u4e2a\u9009\u9879\u4e2d\u9009\u62e9\u7b54\u6848\u7684\u6570\u636e\u96c6\u3002\u8fd9\u4e9b\u6570\u636e\u96c6\u5305\u62ecHellaSwag\u3001PIQA\u3001WinoGrande\u3001RACE Middle\u3001RACE High\u3001MMLU\u3001ARC Easy\u3001ARC Challenge\u3001OpenBookQA\u3001CHID\u3001C-Eval\u3001CMMLU\u3001C3\u548cCCPM\u3002\u8fd9\u91cc\u7684\u57fa\u4e8e\u56f0\u60d1\u5ea6\u7684\u8bc4\u4f30\u662f\u6307\u8ba1\u7b97\u6bcf\u4e2a\u9009\u9879\u7684\u56f0\u60d1\u5ea6\uff0c\u5e76\u9009\u62e9\u6700\u4f4e\u7684\u4e00\u4e2a\u4f5c\u4e3a\u6a21\u578b\u9884\u6d4b\u3002\u5bf9\u4e8eARC\u548cOpenBookQA\uff0c\u6211\u4eec\u4f7f\u7528\u65e0\u6761\u4ef6\u5f52\u4e00\u5316\u8ba1\u7b97\u56f0\u60d1\u5ea6\uff08Brown\u7b49\u4eba\uff0c2020\uff09\uff0c\u5bf9\u4e8e\u5176\u4ed6\u6570\u636e\u96c6\uff0c\u6211\u4eec\u4f7f\u7528\u957f\u5ea6\u5f52\u4e00\u5316\u3002 \u6211\u4eec\u5bf9TriviaQA\u3001NaturalQuestions\u3001DROP\u3001MATH\u3001GSM8K\u3001HumanEval\u3001MBPP\u3001BBH\u3001AGIEval\u3001CLUEWSC\u548cCMath\u5e94\u7528\u57fa\u4e8e\u751f\u6210\u7684\u8bc4\u4f30\u3002\u8fd9\u91cc\u7684\u57fa\u4e8e\u751f\u6210\u7684\u8bc4\u4f30\u662f\u6307\u8ba9\u6a21\u578b\u751f\u6210\u81ea\u7531\u6587\u672c\uff0c\u5e76\u4ece\u751f\u6210\u7684\u6587\u672c\u4e2d\u89e3\u6790\u7ed3\u679c\u3002\u5bf9\u4e8e\u57fa\u4e8e\u751f\u6210\u7684\u8bc4\u4f30\uff0c\u6211\u4eec\u4f7f\u7528\u8d2a\u5a6a\u89e3\u7801\u3002 \u6211\u4eec\u5c06\u57fa\u4e8e\u8bed\u8a00\u5efa\u6a21\u7684\u8bc4\u4f30\u5e94\u7528\u4e8e\u6869\u6d4b\u8bd5\uff0c\u8fd9\u610f\u5473\u7740\u8ba1\u7b97\u6d4b\u8bd5\u8bed\u6599\u5e93\u4e0a\u7684\u6bcf\u5b57\u8282\u6bd4\u7279\u6570\u3002 \u6211\u4eec\u4f7f\u75282048\u62164096\u4f5c\u4e3a\u4e0d\u540c\u57fa\u51c6\u7684\u6700\u5927\u5e8f\u5217\u957f\u5ea6\u3002\u8bc4\u4f30\u683c\u5f0f\u7684\u8be6\u7ec6\u4fe1\u606f\u89c1\u9644\u5f55A.6\u3002</p> <p>5.1.1 \u57fa\u7840\u6a21\u578b \u88685\u663e\u793a\u4e86\u8bc4\u4f30\u57fa\u51c6\u7684\u4e3b\u8981\u7ed3\u679c\u3002\u5c3d\u7ba1DeepSeek\u6a21\u578b\u57282T\u53cc\u8bed\u8bed\u6599\u5e93\u4e0a\u8fdb\u884c\u4e86\u9884\u8bad\u7ec3\uff0c\u4f46\u5b83\u4eec\u5728\u82f1\u8bed\u7406\u89e3\u57fa\u51c6\u4e0a\u7684\u8868\u73b0\u4e0eLLaMA2\u6a21\u578b\u76f8\u5f53\uff0cLLaMA2\u4e5f\u6d88\u80172T\u4ee4\u724c\uff0c\u4f46\u4e13\u6ce8\u4e8e\u82f1\u8bed\u3002\u6b64\u5916\uff0c\u4e0eLLaMA2 70B\u76f8\u6bd4\uff0cDeepSeek 67B\u5728MATH\u3001GSM8K\u3001HumanEval\u3001MBPP\u3001BBH\u548c\u4e2d\u56fd\u57fa\u51c6\u6d4b\u8bd5\u4e0a\u7684\u6027\u80fd\u8981\u597d\u5f97\u591a\u3002\u6211\u4eec\u5728\u9644\u5f55A.3\u4e2d\u663e\u793a\u4e86\u57fa\u51c6\u66f2\u7ebf\u3002\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c\u968f\u7740\u6a21\u578b\u7684\u6269\u5c55\uff0c\u4e00\u4e9b\u4efb\u52a1\u6027\u80fd\u5f97\u5230\u4e86\u63d0\u5347\uff0c\u5982GSM8K\u548cBBH\u3002\u9274\u4e8e\u6211\u4eec\u5728\u540c\u4e00\u6570\u636e\u96c6\u4e0a\u8bad\u7ec3\u4e867B\u548c67B\uff0c\u8fd9\u79cd\u6539\u8fdb\u7684\u51fa\u73b0\u53ef\u4ee5\u5f52\u56e0\u4e8e\u5927\u578b\u6a21\u578b\u5f3a\u5927\u7684\u5c11\u955c\u5934\u5b66\u4e60\u80fd\u529b\u3002\u7136\u800c\uff0c\u968f\u7740\u6570\u5b66\u6570\u636e\u6bd4\u4f8b\u7684\u589e\u52a0\uff0c\u5c0f\u578b\u548c\u5927\u578b\u6a21\u578b\u4e4b\u95f4\u7684\u5dee\u5f02\u53ef\u80fd\u4f1a\u7f29\u5c0f\u3002 \u4e00\u4e2a\u6709\u8da3\u7684\u89c2\u5bdf\u7ed3\u679c\u662f\uff0cDeepSeek 67B\u76f8\u5bf9\u4e8eLLaMA2 70B\u7684\u4f18\u52bf\u5927\u4e8eDeepSeek 7B\u76f8\u5bf9\u4e8eLLaMA27B\u7684\u4f18\u52bf\u3002\u8fd9\u4e00\u73b0\u8c61\u51f8\u663e\u4e86\u8bed\u8a00\u51b2\u7a81\u5bf9\u8f83\u5c0f\u6a21\u578b\u7684\u66f4\u5927\u5f71\u54cd\u3002\u6b64\u5916\uff0cLLaMA2\u5728\u67d0\u4e9b\u4e2d\u6587\u4efb\u52a1\u4e0a\u8868\u73b0\u51fa\u8272\uff0c\u5982CMath\uff0c\u5c3d\u7ba1\u6ca1\u6709\u63a5\u53d7\u8fc7\u4e13\u95e8\u7684\u4e2d\u6587\u6570\u636e\u57f9\u8bad\u3002\u8fd9\u8868\u660e\uff0c\u67d0\u4e9b\u57fa\u672c\u80fd\u529b\uff0c\u5982\u6570\u5b66\u63a8\u7406\uff0c\u53ef\u4ee5\u5728\u8bed\u8a00\u4e4b\u95f4\u6709\u6548\u5730\u4f20\u9012\u3002\u7136\u800c\uff0c\u50cfCHID\u8fd9\u6837\u7684\u4efb\u52a1\u6d89\u53ca\u8bc4\u4f30\u6c49\u8bed\u6210\u8bed\u7684\u4f7f\u7528\u60c5\u51b5\uff0c\u9700\u8981\u6a21\u578b\u5728\u9884\u8bad\u7ec3\u671f\u95f4\u6d88\u8017\u5927\u91cf\u7684\u6c49\u8bed\u6807\u8bb0\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0cLLaMA2\u7684\u8868\u73b0\u660e\u663e\u4e0d\u5982DeepSeek LLM\u3002\u00ac</p> <p>5.1.2 \u804a\u5929\u6a21\u578b \u88686\u5c55\u793a\u4e86DeepSeek\u804a\u5929\u6a21\u578b\u7684\u7ed3\u679c\uff0c\u5c55\u793a\u4e86\u8c03\u4f18\u540e\u5927\u591a\u6570\u4efb\u52a1\u7684\u603b\u4f53\u6539\u8fdb\u3002\u7136\u800c\uff0c\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b</p> <p>\u8bed\u8a00 \u57fa\u51c6  \u6d4b\u8bd5\u955c\u5934    LLaMA2 7B   DeepSeek 7B LLaMA2 70B  DeepSeek 67B     HellaSwag   0\u5c04\u51fb 75.6    75.4    84.0    84.0     PIQA    0\u5c04\u51fb 78.0    79.2    82.0    83.6     \u7ef4\u8bfa\u683c\u5170\u5fb7   0\u5c04\u51fb 69.6    70.5    80.4    79.8     \u6bd4\u8d5b\u4e2d\u95f4    5\u62cd  60.7    63.2    70.1    69.9     \u6bd4\u8d5b\u9ad8 5\u62cd  45.8    46.5    54.3    50.7     TriviaQA    5\u62cd  63.8    59.7    79.5    78.9     \u81ea\u7136\u95ee\u9898    5\u62cd  25.5    22.2    36.1    36.6     MMLU    5\u62cd  45.8    48.2    69.0    71.3     ARC\u7b80\u5355   0\u5c04\u51fb 69.1    67.9    76.5    76.9 \u82f1\u8bed  ARC\u6311\u6218\u8d5b  0\u5c04\u51fb 49.0    48.1    59.5    59.0     OpenBookQA  0\u5c04\u51fb 57.4    55.8    60.4    60.2     \u4e0b\u964d  1\u6b21\u5c04\u51fb    39.8    41.0    69.2    67.9     \u6570\u5b66  4-shot  2.5 6.0 13.5    18.7     GSM8K   8\u62cd  15.5    17.4    58.4    63.4     HumanEval   0\u5c04\u51fb 14.6    26.2    28.7    42.7     MBPP    3-\u70ed 21.8    39.0    45.6    57.4     BBH 3-\u70ed 38.5    39.5    62.9    68.7     AGIEval 0\u5c04\u51fb 22.8    26.4    37.2    41.3     \u6869\u57fa\u68c0\u6d4b    -   0.741   0.725   0.649   0.642     CLUEWSC 5\u62cd  64.0    73.1    76.5    81.0     CHID    0\u5c04\u51fb 37.9    89.3    55.5    92.1     C-Eval  5\u62cd  33.9    45.0    51.4    66.1 \u4e2d\u56fd\u4eba CMMLU   5\u62cd  32.6    47.2    53.1    70.8     CMath   3-\u70ed 25.1    34.5    53.9    63.0     C3  0\u5c04\u51fb 47.4    65.4    61.7    75.3     CCPM    0\u5c04\u51fb 60.7    76.9    66.2    88.5</p> <p>\u88685 |\u4e3b\u8981\u7ed3\u679c\u3002\u6211\u4eec\u62a5\u544a\u7684\u8bc4\u4f30\u7ed3\u679c\u57fa\u4e8e\u5185\u90e8\u8bc4\u4f30\u6846\u67b6\u3002\u7c97\u4f53\u6570\u5b57\u8868\u793a4\u4e2a\u6a21\u578b\u4e2d\u7684\u6700\u4f73\u7ed3\u679c\u3002\u5bf9\u4e8e\u6869\u6d4b\u8bd5\uff0c\u6211\u4eec\u62a5\u544a\u6bcf\u5b57\u8282\u6bd4\u7279\u6570\uff08BPB\uff09\uff0c\u5bf9\u4e8eDROP\uff0c\u6211\u4eec\u62a5\u544aF1\u5206\u6570\uff0c\u5bf9\u4e8e\u5176\u4ed6\u4efb\u52a1\uff0c\u6211\u4eec\u62a5\u544a\u51c6\u786e\u6027\u3002\u8bf7\u6ce8\u610f\uff0c\u6d4b\u8bd5\u955c\u5934\u662f\u6700\u5927\u503c\uff0c\u7531\u4e8e\u4e0a\u4e0b\u6587\u957f\u5ea6\u6709\u9650\u6216\u540c\u4e00\u6bb5\u843d\u4e2d\u53ef\u7528\u4e8eRACE\u7b49\u9605\u8bfb\u7406\u89e3\u4efb\u52a1\u7684\u955c\u5934\u6570\u91cf\u6709\u9650\uff0c\u53ef\u80fd\u4f1a\u5e94\u7528\u8f83\u5c11\u7684\u955c\u5934\u3002</p> <p>\u67d0\u4e9b\u4efb\u52a1\u88ab\u62d2\u7edd\u4e86\u3002 \u77e5\u8bc6\uff1a\u6211\u4eec\u89c2\u5bdf\u5230\u57fa\u7840\u6a21\u578b\u548c\u804a\u5929\u6a21\u578b\u5728\u77e5\u8bc6\u76f8\u5173\u4efb\u52a1\u4e2d\u7684\u6ce2\u52a8\uff0c\u5982TriviaQA\u3001MMLU\u548cC-Eval\u3002\u7136\u800c\uff0c\u6211\u4eec\u4e0d\u8ba4\u4e3a\u8fd9\u79cd\u5fae\u5c0f\u7684\u6ce2\u52a8\u8868\u660eSFT\u540e\u77e5\u8bc6\u7684\u83b7\u53d6\u6216\u4e27\u5931\u3002SFT\u7684\u4ef7\u503c\u5728\u4e8e\u5b66\u4e60\u5728\u804a\u5929\u6a21\u578b\u7684\u96f6\u6837\u672c\u8bbe\u7f6e\u4e2d\u83b7\u5f97\u4e0e\u57fa\u672c\u6a21\u578b\u7684\u5c11\u70ed\u70b9\u8bbe\u7f6e\u76f8\u5f53\u7684\u5206\u6570\u7684\u80fd\u529b\uff0c\u8fd9\u4e0e\u771f\u5b9e\u573a\u666f\u4e00\u81f4\u3002\u4f8b\u5982\uff0c\u804a\u5929\u6a21\u578b\u76840\u6b21MMLU\u6027\u80fd\u4e0e\u57fa\u672c\u6a21\u578b\u76845\u6b21MMLU\u7684\u6027\u80fd\u76f8\u5f53\u3002 \u63a8\u7406\uff1a\u7531\u4e8e\u5f88\u5927\u4e00\u90e8\u5206SFT\u5b9e\u4f8b\u91c7\u7528CoT\u683c\u5f0f\uff0cWei\u7b49\u4eba\uff082022\uff09\u7684\u804a\u5929\u6a21\u578b\u5728\u63a8\u7406\u4efb\u52a1\u65b9\u9762\u7565\u6709\u6539\u8fdb\uff0c\u5982BBH\u548cNaturalQuestions\u3002\u7136\u800c\uff0c\u6211\u4eec\u8ba4\u4e3aSFT\u9636\u6bb5\u4e0d\u662f\u5b66\u4e60\u63a8\u7406\u80fd\u529b\uff0c\u800c\u662f\u5b66\u4e60\u63a8\u7406\u8def\u5f84\u7684\u6b63\u786e\u683c\u5f0f\u3002</p> <p>\u8bed\u8a00  \u57fa\u51c6  DeepSeek 7B\u5e95\u5ea7    DeepSeek 7B\u804a\u5929    DeepSeek 67B\u57fa\u5730   DeepSeek 67B\u804a\u5929</p> Text Only<pre><code>HellaSwag   75.4    68.5    84.0    75.7\nPIQA    79.2    77.6    83.6    82.6\n\u7ef4\u8bfa\u683c\u5170\u5fb7   70.5    66.9    79.8    76.0\n\u6bd4\u8d5b\u4e2d\u95f4    63.2    65.2    69.9    70.9\n\u6bd4\u8d5b\u9ad8 46.5    50.8    50.7    56.0\nTriviaQA    59.7    57.9    78.9    81.5\n\u81ea\u7136\u95ee\u9898    22.2    32.5    36.6    47.0\nMMLU    48.2    49.4    71.3    71.1\n</code></pre> <p>\u82f1\u8bed  ARC\u7b80\u5355 ARC\u6311\u6218\u8d5b  67.9 48.1    71.0 49.4    76.9 59.0    81.6 64.1     GSM8K   17.4    63.0    63.4    84.1     \u6570\u5b66  6.0 15.8    18.7    32.6     HumanEval   26.2    48.2    42.7    73.8     MBPP    39.0    35.2    57.4    61.4     \u4e0b\u964d  41.0    49.1    67.9    71.9     OpenBookQA  55.8    54.8    60.2    63.2     BBH 39.5    42.3    68.7    71.7     AGIEval 26.4    19.3    41.3    46.4</p> Text Only<pre><code>CLUEWSC 73.1    71.9    81.0    60.0\nCHID    89.3    64.9    92.1    72.6\nC-Eval  45.0    47.0    66.1    65.2\n</code></pre> <p>\u4e2d\u56fd\u4eba CMMLU   47.2    49.7    70.8    67.8     CMath   34.5    68.4    63.0    80.3     C3  65.4    66.4    75.3    77.0     CCPM    76.9    76.5    88.5    84.9</p> <p>\u88686 |\u57fa\u672c\u6a21\u578b\u548c\u804a\u5929\u6a21\u578b\u4e4b\u95f4\u7684\u6bd4\u8f83\u3002\u6211\u4eec\u8bc4\u4f30\u4e86MMLU\u3001GSM8K\u3001MATH\u3001C-Eval\u548cCMMLU\u76840\u955c\u5934\u804a\u5929\u6a21\u578b\uff0c\u800c\u57fa\u672c\u6a21\u578b\u7ed3\u679c\u4ecd\u5728\u5c11\u6570\u955c\u5934\u8bbe\u7f6e\u4e2d\u83b7\u5f97\u3002</p> <p>\u6027\u80fd\u4e0b\u964d\u4efb\u52a1\uff1a\u65e0\u8bba\u9009\u62e9\u4f55\u79cd\u6a21\u578b\u5927\u5c0f\u6216\u9884\u5148\u8bad\u7ec3\u7684\u68c0\u67e5\u70b9\uff0c\u4e00\u4e9b\u4efb\u52a1\u7684\u6027\u80fd\u5728\u5fae\u8c03\u540e\u90fd\u4f1a\u6301\u7eed\u4e0b\u964d\u3002\u8fd9\u4e9b\u7279\u5b9a\u7684\u4efb\u52a1\u901a\u5e38\u6d89\u53ca\u5b8c\u5f62\u586b\u7a7a\u4efb\u52a1\u6216\u53e5\u5b50\u5b8c\u6210\u4efb\u52a1\uff0c\u5982HellaSwag\u3002\u53ef\u4ee5\u5408\u7406\u5730\u5047\u8bbe\u7eaf\u8bed\u8a00\u6a21\u578b\u66f4\u6709\u80fd\u529b\u5904\u7406\u6b64\u7c7b\u4efb\u52a1\u3002 \u6570\u5b66\u548c\u4ee3\u7801\uff1a\u7ecf\u8fc7\u5fae\u8c03\uff0c\u6211\u4eec\u7684\u6a21\u578b\u5728\u6570\u5b66\u548c\u7f16\u7801\u4efb\u52a1\u65b9\u9762\u6709\u4e86\u663e\u8457\u6539\u8fdb\u3002\u4f8b\u5982\uff0cHumanEval\u548cGSM8K\u5f97\u5206\u63d0\u9ad8\u4e8620\u591a\u4e2a\u70b9\u3002\u6211\u4eec\u5bf9\u6b64\u7684\u89e3\u91ca\u662f\uff0c\u57fa\u7840\u6a21\u578b\u6700\u521d\u6ca1\u6709\u5145\u5206\u9002\u5e94\u8fd9\u4e9b\u4efb\u52a1\uff0cSFT\u9636\u6bb5\u901a\u8fc7\u5e7f\u6cdb\u7684SFT\u6570\u636e\u5b66\u4e60\u4e86\u7f16\u7801\u548c\u6570\u5b66\u65b9\u9762\u7684\u989d\u5916\u77e5\u8bc6\u3002\u7136\u800c\uff0c\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u8be5\u6a21\u578b\u7684\u529f\u80fd\u53ef\u80fd\u4e3b\u8981\u96c6\u4e2d\u5728\u4ee3\u7801\u8865\u5168\u548c\u4ee3\u6570\u95ee\u9898\u4e0a\u3002\u4e3a\u4e86\u5168\u9762\u4e86\u89e3\u6570\u5b66\u548c\u7f16\u7801\uff0c\u5728\u9884\u8bad\u7ec3\u9636\u6bb5\u7eb3\u5165\u5404\u79cd\u6570\u636e\u81f3\u5173\u91cd\u8981\uff0c\u8fd9\u662f\u672a\u6765\u7684\u5de5\u4f5c\u3002\u6211\u4eec\u5728\u9644\u5f55a.4\u4e2d\u5bf9\u4ee3\u7801\u548c\u6570\u5b66\u4efb\u52a1\u8fdb\u884c\u4e86\u8be6\u7ec6\u5206\u6790\u3002 \u57287B\u6a21\u578b\u5fae\u8c03\u4e2d\uff0c\u6211\u4eec\u6700\u521d\u4f7f\u7528\u6240\u6709\u6570\u636e\u5bf9\u6a21\u578b\u8fdb\u884c\u5fae\u8c03\u3002\u968f\u540e\uff0c\u5f15\u5165\u4e86\u7b2c\u4e8c\u9636\u6bb5\uff0c\u8be5\u9636\u6bb5\u4e0d\u5305\u62ec\u6570\u5b66\u548c\u4ee3\u7801\u6570\u636e\u3002\u8fd9\u79cd\u65b9\u6cd5\u80cc\u540e\u7684\u52a8\u673a\u662f\uff0c\u7b2c\u4e00\u9636\u6bb5\u6a21\u578b\u7684\u91cd\u590d\u7387\u4e3a2.0%\uff0c\u964d\u4f4e\u52301.4%</p> <p>\u6a21\u578b \u603b\u5206  \u5e73\u5747\u503c\u3002 \u63a8\u7406 \u603b\u5206  \u6570\u5b66\u3002\u903b\u8f91\u3002 \u6570\u5b66  \u903b\u8f91 \u8ba1\u7b97  \u63a8\u7406  \u5e73\u5747\u503c\u3002 \u8bed\u8a00 \u603b\u5206  \u57fa\u91d1\u3002\u829d\u52a0\u54e5\u3002\u6253\u5f00\u3002\u624b\u8155\u3002\u89d2\u8272\u3002\u8d5e\u6210\u7684\u610f\u89c1\u3002 \u57fa\u672c \u4e2d\u6587   \u7efc\u5408  \u6587\u672c \u89d2\u8272 \u4e13\u4e1a\u4efb\u52a1  \u7406\u89e3  \u95ee\u7b54  \u5199\u4f5c  \u626e\u6f14 \u80fd\u529b</p> <p>gpt-4-1106\u9884\u89c8    8.01    7.73    7.80    7.66    8.29    7.99    7.33    8.61    8.67    8.47    8.65 gpt-4-0613  7.53    7.47    7.56    7.37    7.59    7.81    6.93    7.42    7.93    7.51    7.94 DeepSeek-67B-Chat-DPO  6.69    5.77    6.13    5.41    7.60    7.29    7.47    7.82    7.51    7.83    7.71 DeepSeek-67B-Chat  6.43    5.75    5.71    5.79    7.11    7.12    6.52    7.58    7.20    6.91    7.37 chatglm\u6da1\u8f6e\u589e\u538b\u5668    6.24    5.00    4.74    5.26    7.49    6.82    7.17    8.16    7.77    7.76    7.24 erniebot-3.5    6.14    5.15    5.03    5.27    7.13    6.62    7.60    7.26    7.56    6.83    6.90 gpt-3.5\u6da1\u8f6e-0613  6.08    5.35    5.68    5.02    6.82    6.71    5.81    7.29    7.03    7.28    6.77 chatglm pro 5.83    4.65    4.54    4.75    7.01    6.51    6.76    7.47    7.07    7.34    6.89 spark_desk_v2   5.74    4.73    4.71    4.74    6.76    5.84    6.97    7.29    7.18    6.92    6.34 Qwen-14B\u5e3d\u5b50  5.72    4.81    4.91    4.71    6.63    6.90    6.36    6.74    6.64    6.59    6.56 \u767e\u5ddd2-13B\u5e3d    5.25    3.92    3.76    4.07    6.59    6.22    6.05    7.11    6.97    6.75    6.43 \u804a\u5929GLM3-6B   4.97    3.85    3.55    4.14    6.10    5.75    5.29    6.71    6.83    6.28    5.73 \u767e\u5ddd2-7B\u5e3d\u5b50    4.97    3.66    3.56    3.75    6.28    5.81    5.50    7.13    6.84    6.53    5.84 \u5b9e\u4e60\u751fLM-20B   4.96    3.66    3.39    3.92    6.26    5.96    5.50    7.18    6.19    6.49    6.22 Qwen-7B\u5e3d\u5b50   4.91    3.73    3.62    3.83    6.09    6.40    5.74    6.26    6.31    6.19    5.66 \u804a\u5929GLM2-6B   4.48    3.39    3.16    3.61    5.58    4.91    4.52    6.66    6.25    6.08    5.08 InternLM-Chat-7B    3.65    2.56    2.45    2.66    4.75    4.34    4.09    5.82    4.89    5.32    4.06 \u4e2d\u6587-LLAMA2-7B\u5e3d\u5b50  3.57    2.68    2.29    3.07    4.46    4.31    4.26    4.50    4.63    4.91    4.13 LLaMA-2-13B-\u4e2d\u6587\u804a\u5929    3.35    2.47    2.21    2.73    4.23    4.13    3.31    4.79    3.93    4.53    4.71</p> <p>\u88687|AlignBench\u6392\u884c\u699c\u6309gpt-4-0613\u8bc4\u5206\u3002\u6a21\u578b\u6309\u603b\u5206\u964d\u5e8f\u6392\u5217\u3002\u5e26*\u7684\u7ed3\u679c\u662f\u6211\u4eec\u57fa\u4e8e\u5b98\u65b9AlignBench\u5b58\u50a8\u5e93\u7684\u8bc4\u4f30\u7ed3\u679c\uff0c\u800c\u6240\u6709\u5176\u4ed6\u7ed3\u679c\u90fd\u6765\u81eaAlignBench\u8bba\u6587\u3002\u6211\u4eec\u53d1\u73b0\uff0c\u6211\u4eec\u7684Deepseek-67B-Chat\u6a21\u578b\u660e\u663e\u4f18\u4e8eChatGPT\u548c\u5176\u4ed6\u57fa\u7ebf\u6a21\u578b\uff0c\u8fd9\u8868\u660e\u6211\u4eec\u7684\u6a21\u578b\u5728\u57fa\u672c\u4e2d\u6587\u4efb\u52a1\u548c\u9ad8\u7ea7\u4e2d\u6587\u63a8\u7406\u4efb\u52a1\u4e2d\u90fd\u8868\u73b0\u51fa\u8272\u3002\u6b64\u5916\uff0c\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0DPO\u5de5\u827a\u5728\u51e0\u4e4e\u6240\u6709\u9886\u57df\u90fd\u5e26\u6765\u4e86\u6539\u8fdb\u3002\u00ac</p> <p>\u5728\u7b2c\u4e8c\u9636\u6bb5\u8c03\u6574\u540e\uff0c\u540c\u65f6\u4fdd\u6301\u57fa\u51c6\u5206\u6570\u3002\u572867B\u6a21\u578b\u7684\u60c5\u51b5\u4e0b\uff0c\u7ecf\u8fc7\u7b2c\u4e00\u9636\u6bb5\u7684\u5fae\u8c03\uff0c\u91cd\u590d\u7387\u5df2\u7ecf\u4f4e\u4e8e1%\uff0c\u7b2c\u4e8c\u9636\u6bb5\u4f1a\u635f\u5bb3\u6a21\u578b\u5728\u57fa\u51c6\u4e0a\u7684\u5f97\u5206\u3002\u56e0\u6b64\uff0c67B\u6a21\u578b\u53ea\u8fdb\u884c\u4e86\u4e00\u4e2a\u9636\u6bb5\u7684SFT\u3002</p> <p>5.2 \u5f00\u653e\u5f0f\u8bc4\u4f30 \u5bf9\u4e8e\u804a\u5929\u6a21\u578b\uff0c\u9664\u4e86\u89c2\u5bdf\u6807\u51c6\u57fa\u51c6\u4e0a\u7684\u6307\u6807\u5916\uff0c\u5728\u5f00\u653e\u57df\u548c\u5f00\u653e\u5f0f\u95ee\u9898\u4e2d\u751f\u6210\u7684\u7ed3\u679c\u7684\u8d28\u91cf\u76f4\u63a5\u5f71\u54cd\u5b9e\u9645\u7684\u7528\u6237\u4f53\u9a8c\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u5206\u522b\u5728\u4e2d\u6587\u548c\u82f1\u6587\u4efb\u52a1\u4e2d\u6d4b\u8bd5\u4e86\u804a\u5929\u6a21\u578b\u7684\u5f00\u653e\u5f0f\u751f\u6210\u80fd\u529b\u3002</p> <p>5.2.1 \u4e2d\u56fd\u5f00\u653e\u5f0f\u8bc4\u4f30 \u5bf9\u4e8e\u4e2d\u56fd\u5f00\u653e\u5f0f\u8bc4\u4f30\uff0c\u6211\u4eec\u5728\u9ad8\u8d28\u91cf\u7684\u5f00\u653e\u5f0f\u95ee\u9898\u6d4b\u8bd5\u96c6AlignBench\u4e0a\u6d4b\u8bd5\u4e86\u6211\u4eec\u7684\u804a\u5929\u6a21\u578b\u5728\u4e0d\u540c\u9886\u57df\u7684\u7efc\u5408\u6027\uff08Liu\u7b49\u4eba\uff0c2023\uff09\u3002AlignBench\u5171\u67098\u4e2a\u4e3b\u8981\u7c7b\u522b\uff0c36\u4e2a\u6b21\u8981\u7c7b\u522b\uff0c\u5305\u542b683\u4e2a\u95ee\u9898\u3002\u5bf9\u4e8e\u6bcf\u4e2a\u95ee\u9898\uff0c\u9664\u4e86\u63d0\u793a\u5916\uff0cAlignBench\u8fd8\u4e3aGPT-4\u63d0\u4f9b\u4e13\u4e1a\u7684\u53c2\u8003\u7b54\u6848\u548c\u8bc4\u5206\u6a21\u677f\uff0c\u4ee5\u5224\u65ad\u56de\u7b54\u7684\u8d28\u91cf\u3002 \u6211\u4eec\u4f7f\u7528\u5b98\u65b9AlignBench Github\u4ee3\u7801\u5e93\u6765\u5b9e\u73b0\u5bf9</p> <p>\u6211\u4eec\u7684\u6a21\u578b\u3002\u6211\u4eec\u5c06\u5173\u952e\u6e29\u5ea6\u53c2\u6570\u4e0e\u539f\u59cb\u8bbe\u7f6e\u4e25\u683c\u5bf9\u9f50\uff1a\u5bf9\u4e8e\u89d2\u8272\u626e\u6f14\u3001\u5199\u4f5c\u80fd\u529b\u548c\u5f00\u653e\u5f0f\u95ee\u9898\uff0c\u751f\u6210\u6e29\u5ea6\u8bbe\u7f6e\u4e3a0.7\uff1b\u800c\u5bf9\u4e8e\u5176\u4ed6\u4efb\u52a1\uff0c\u751f\u6210\u6e29\u5ea6\u8bbe\u7f6e\u4e3a0.1\u3002 AlignBench\u6392\u884c\u699c\u5982\u88687\u6240\u793a\u3002\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\u6211\u4eec\u7684DeepSeek 67B\u804a\u5929\u6a21\u578b\u8d85\u8d8a\u4e86ChatGPT\u548c\u5176\u4ed6\u57fa\u7ebf\u6a21\u578b\uff0c\u4ec5\u6b21\u4e8eGPT-4\u7684\u4e24\u4e2a\u7248\u672c\u3002\u8fd9\u8868\u660e\uff0c\u4e0e\u5176\u4ed6\u5f00\u6e90\u6216\u4e13\u6709\u7684\u4e2d\u6587\u5927\u578b\u8bed\u8a00\u6a21\u578b\u76f8\u6bd4\uff0c\u6211\u4eec\u7684\u6a21\u578b\u5728\u5404\u79cd\u4e2d\u6587\u4efb\u52a1\u4e2d\u8868\u73b0\u51fa\u8272\u3002DPO\u6a21\u578b\u5728\u51e0\u4e4e\u6240\u6709\u6307\u6807\u4e0a\u90fd\u6709\u6240\u6539\u5584\uff0c\u8fd9\u8868\u660e\u4e86DPO\u8bad\u7ec3\u8fc7\u7a0b\u5bf9\u6a21\u578b\u5bf9\u9f50\u7684\u79ef\u6781\u5f71\u54cd\u3002 \u5bf9\u4e8e\u57fa\u672c\u7684\u4e2d\u6587\u4efb\u52a1\uff0c\u6211\u4eec\u7684\u6a21\u578b\u5728\u6240\u6709\u6a21\u578b\u4e2d\u5904\u4e8e\u7b2c\u4e00\u5c42\uff0c\u6211\u4eec\u7684DPO\u6a21\u578b\u7684\u4e2d\u6587\u57fa\u672c\u8bed\u8a00\u80fd\u529b\u751a\u81f3\u9ad8\u4e8e\u6700\u65b0\u7248\u672c\u7684GPT-4\u3002\u5bf9\u4e8e\u9ad8\u7ea7\u4e2d\u6587\u63a8\u7406\u4efb\u52a1\uff0c\u6211\u4eec\u7684\u6a21\u578b\u5f97\u5206\u660e\u663e\u9ad8\u4e8e\u5176\u4ed6\u4e2d\u6587LLM\uff0c\u5e76\u4e14\u6709\u660e\u663e\u7684\u5dee\u8ddd\uff0c\u8fd9\u8868\u660e\u6211\u4eec\u7684\u6a21\u578b\u5728\u66f4\u590d\u6742\u7684\u4e2d\u6587\u903b\u8f91\u63a8\u7406\u548c\u6570\u5b66\u8ba1\u7b97\u4e2d\u8868\u73b0\u51fa\u8272\u3002</p> <p>5.2.2 \u82f1\u8bed\u5f00\u653e\u5f0f\u8bc4\u4f30 \u5bf9\u4e8e\u82f1\u8bed\u5f00\u653e\u5f0f\u8bc4\u4f30\uff0c\u6211\u4eec\u4f7f\u7528MT Bench\u57fa\u51c6\uff08Zheng\u7b49\u4eba\uff0c2023\uff09\uff0c\u5176\u4e2d\u5305\u542b8\u7c7b\u4e0d\u540c\u7684\u591a\u8f6e\u95ee\u9898\u3002\u5982\u88688\u6240\u793a\uff0c\u6211\u4eec\u7684DeepSeek LLM 67B Chat\u4f18\u4e8e\u5176\u4ed6\u5f00\u6e90\u6a21\u578b\uff0c\u5982LLaMA-2-Chat Touvron\u7b49\u4eba\uff082023b\uff0970B\u3001Xwin 70B v0.1\u548cT\u00dcLU 2+DPO 70B\uff08Ivison\u7b49\u4eba\uff0c2023\uff09\uff0c\u5f97\u5206\u4e3a8.35\uff0c\u4e0eGPT-3.5-turbo\u76f8\u5f53\u3002\u6b64\u5916\uff0c\u5728DPO\u9636\u6bb5\u4e4b\u540e\uff0c\u6211\u4eec\u7684DeepSeek LLM 67B\u804a\u5929DPO\u5c06\u5e73\u5747\u5f97\u5206\u8fdb\u4e00\u6b65\u63d0\u9ad8\u52308.76\uff0c\u4ec5\u843d\u540e\u4e8eGPT-4\uff08OpenAI\uff0c2023\uff09\u3002\u8fd9\u4e9b\u7ed3\u679c\u8bf4\u660e\u4e86DeepSeek LLM\u5f3a\u5927\u7684\u591a\u531d\u5f00\u653e\u5f0f\u751f\u6210\u80fd\u529b\u3002</p> <p>\u6a21\u578b  \u830e   \u4eba\u6587\u5b66\u79d1    \u63a8\u7406  \u7f16\u7801  \u6570\u5b66  \u63d0\u53d6  \u89d2\u8272\u626e\u6f14    \u5199\u4f5c  \u5e73\u5747\u503c GPT-4-1106-\u9884\u89c8  9.90    9.95    8.10    9.05    7.95    9.90    9.50    9.70    9.26 GPT-3.5\u6da1\u8f6e-0613 9.55    9.95    6.20    7.05    7.05    9.00    8.65    9.65    8.39 LLAMA-2-\u804a\u59297B   8.65    8.75    4.25    3.00    2.40    6.50    7.70    8.90    6.27 LLAMA-2-\u804a\u592913B  8.63    9.75    5.10    3.00    3.45    6.93    7.50    8.85    6.65 LLAMA-2-\u804a\u592970B  8.93    9.63    5.80    3.15    3.30    7.25    7.50    9.30    6.86 \u897f\u98ce\u8d1d\u58547B 9.03    9.63    5.60    5.10    4.45    7.45    8.20    9.35    7.35 Xwin 70b v0.1  9.68    9.95    6.55    4.25    3.30    8.75    8.25    9.55    7.53 Xwin 13b v0.2\u2217  9.55    9.88    5.20    3.60    2.85    7.70    8.60    8.68    7.01 T\u00dcLU 2+DPO 70B 9.00    9.90    7.00    4.70    4.65    9.35    9.25    9.25    7.89 DeepSeek LLM 67B\u804a\u5929  9.60    9.70    8.00    7.35    6.25    8.40    8.20    9.30    8.35 DeepSeek LLM 67B\u804a\u5929DPO   9.70    9.80    9.05    6.75    6.65    9.30    9.10    9.75    8.76 \u88688|MT\u53f0\u67b6\u8bc4\u4f30\u3002Ivison\u7b49\u4eba\uff082023\uff09\u62a5\u544a\u4e86\u5e26*\u7684\u7ed3\u679c</p> <p>5.3 \u8fdb\u884c\u8bc4\u4f30 \u6570\u636e\u6c61\u67d3\u548c\u57fa\u51c6\u8fc7\u62df\u5408\u662f\u8bc4\u4f30LLM\u7684\u4e24\u4e2a\u6311\u6218\u3002\u4e00\u79cd\u5e38\u89c1\u7684\u505a\u6cd5\u662f\u5229\u7528\u6700\u8fd1\u53d1\u5e03\u7684\u6d4b\u8bd5\u96c6\u6765\u8bc4\u4f30\u6a21\u578b\u4f5c\u4e3a\u4fdd\u7559\u7684\u6d4b\u8bd5\u96c6\u3002 LeetCode\uff1a\u4e3a\u4e86\u8bc4\u4f30\u6a21\u578b\u7684\u7f16\u7801\u80fd\u529b\uff0c\u6211\u4eec\u5229\u7528\u4e86LeetCode\u6bcf\u5468\u7ade\u8d5b\uff08\u6bcf\u5468\u7ade\u8d5b351-372\uff0c\u53cc\u5468\u7ade\u8d5b108-117\uff0c\u4ece2023\u5e747\u6708\u52302023\u5e7411\u6708\uff09\u4e2d\u7684\u95ee\u9898\u3002\u6211\u4eec\u901a\u8fc7\u4eceLeetCode\u6293\u53d6\u6570\u636e\u83b7\u5f97\u4e86\u8fd9\u4e9b\u95ee\u9898\uff0cLeetCode\u7531126\u4e2a\u95ee\u9898\u7ec4\u6210\uff0c\u6bcf\u4e2a\u95ee\u9898\u670920\u591a\u4e2a\u6d4b\u8bd5\u7528\u4f8b\u3002\u6240\u91c7\u7528\u7684\u8bc4\u4f30\u6307\u6807\u7c7b\u4f3c\u4e8eHumanEval\u3002\u5728\u8fd9\u65b9\u9762\uff0c\u5982\u679c\u6a21\u578b\u7684\u8f93\u51fa\u6210\u529f\u901a\u8fc7\u4e86\u6240\u6709\u6d4b\u8bd5\u7528\u4f8b\uff0c\u5219\u8ba4\u4e3a\u8be5\u6a21\u578b\u6709\u6548\u5730\u89e3\u51b3\u4e86\u95ee\u9898\u3002\u8be5\u6a21\u578b\u7684\u7f16\u7801\u80fd\u529b\u4e3a</p> <p>\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u5176\u4e2dy\u8f74\u8868\u793apass@1\u57df\u5185\u4eba\u5de5\u8bc4\u4f30\u6d4b\u8bd5\u5f97\u5206\uff0cx\u8f74\u8868\u793apass@1\u5728\u57df\u5916LeetCode\u6bcf\u5468\u7ade\u8d5b\u95ee\u9898\u4e0a\u5f97\u5206\u3002LeetCode\u6d4b\u8bd5\u6570\u636e\u5c06\u5f88\u5feb\u4e0eDeepSeek Coder\u6280\u672f\u62a5\u544a\u4e00\u8d77\u53d1\u5e03\u3002 \u5308\u7259\u5229\u56fd\u5bb6\u9ad8\u4e2d\u8003\u8bd5\uff1a\u6839\u636eGrok-1\uff0c\u6211\u4eec\u4f7f\u7528\u5308\u7259\u5229\u56fd\u5bb6\u9ad8\u4e2d\u6d4b\u8bd5\u8bc4\u4f30\u4e86\u6a21\u578b\u7684\u6570\u5b66\u80fd\u529b\u3002\u8be5\u8003\u8bd5\u5305\u62ec33\u9053\u9898\uff0c\u6a21\u578b\u7684\u5206\u6570\u662f\u901a\u8fc7\u4eba\u5de5\u6ce8\u91ca\u786e\u5b9a\u7684\u3002\u6211\u4eec\u9075\u5faasolution.pdf\u4e2d\u7684\u8bc4\u5206\u6307\u6807\u6765\u8bc4\u4f30\u6240\u6709\u6a21\u578b\u3002\u00ac \u8bc4\u4f30\u540e\u7684\u6307\u4ee4\uff1a2023\u5e7411\u670815\u65e5\uff0c\u8c37\u6b4c\u6839\u636e\u8bc4\u4f30\u6570\u636e\u96c6\u53d1\u5e03\u4e86\u4e00\u6761\u6307\u4ee4\uff08Zhou\u7b49\u4eba\uff0c2023\uff09\u3002\u4ed6\u4eec\u8bc6\u522b\u51fa\u4e8625\u79cd\u53ef\u9a8c\u8bc1\u7684\u6307\u4ee4\uff0c\u5e76\u6784\u5efa\u4e86\u5927\u7ea6500\u4e2a\u63d0\u793a\uff0c\u6bcf\u4e2a\u63d0\u793a\u5305\u542b\u4e00\u4e2a\u6216\u591a\u4e2a\u53ef\u9a8c\u8bc1\u6307\u4ee4\u3002\u6211\u4eec\u4f7f\u7528\u63d0\u793a\u7ea7\u522b\u677e\u6563\u5ea6\u91cf\u6765\u8bc4\u4f30\u6240\u6709\u6a21\u578b\u3002</p> <p>\u6a21\u578b  LeetCode    \u5308\u7259\u5229\u8bed\u8003\u8bd5  IFEFal GPT-4   48.4    68  79.3 ChatGLM3 6B 2.4 32  29.7 DeepSeek LLM 7B\u804a\u5929   4.7 28.5    41.2 \u767e\u5ddd2\u804a\u592913B    1.6 19.5    44.5 \u6613\u804a\u592934B  7.9 39  48.4 Qwen 72B\u804a\u5929\u5ba4 12.7    52  50.8 DeepSeek LLM 67B\u804a\u5929  17.5    58  55.5 \u88689 |\u8fdb\u884c\u6570\u636e\u96c6\u8bc4\u4f30\u3002 \u6211\u4eec\u5bf9\u6211\u4eec\u7684\u6a21\u578b\u4e0e\u4e0d\u540c\u89c4\u6a21\u7684\u5404\u79cd\u57fa\u7ebf\u6a21\u578b\u8fdb\u884c\u4e86\u6bd4\u8f83\u5206\u6790\uff0c\u5373Qwen 72B Chat\uff08Bai\u7b49\u4eba\uff0c2023\uff09\u3001ChatGLM3\uff08Du\u7b49\u4eba\uff0c2022\uff09\u3001Baichuan2\uff08Yang\u7b49\u4eba\uff0c2024\uff09\u548cYi-34B Chat\u3002\u6211\u4eec\u7684\u89c2\u5bdf\u8868\u660e\uff0c\u5373\u4f7f\u67d0\u4e9b\u5c0f\u6a21\u578b\u5728\u4f20\u7edf\u57fa\u51c6\u4e0a\u53d6\u5f97\u4e86\u6709\u5e0c\u671b\u7684\u7ed3\u679c\uff0c\u5728\u8fd9\u4e9b\u4fdd\u7559\u7684\u6570\u636e\u96c6\u4e0a\uff0c\u5927\u6a21\u578b\u548c\u5c0f\u6a21\u578b\u4e4b\u95f4\u4e5f\u5b58\u5728\u663e\u8457\u7684\u6027\u80fd\u5dee\u8ddd\u3002\u4f8b\u5982\uff0cChatGLM3\u5728\u4ee3\u7801\u6d4b\u8bd5\u96c6MBPP\u4e0a\u7684\u5f97\u5206\u4e3a52.4\uff0c\u63a5\u8fd1DeepSeek 67B\u3002\u7136\u800c\uff0c\u5f53\u5728\u65b0\u7684\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u8fdb\u884c\u8bc4\u4f30\u65f6\uff0c\u5176\u6027\u80fd\u4e0eDeepSeek 67B\u76f8\u6bd4\u660e\u663e\u4e0d\u8db3\u3002\u5728\u6570\u5b66\u6570\u636e\u96c6\u4e2d\u4e5f\u89c2\u5bdf\u5230\u4e86\u7c7b\u4f3c\u7684\u8d8b\u52bf\uff0c\u5176\u4e2dChatGLM3\u5728GSM8K\u4e0a\u975e\u5e38\u5f3a\uff0872.3\uff09\uff0c\u4f46\u5b83\u5728\u5308\u7259\u5229\u8003\u8bd5\u6210\u7ee9\u4e2d\u7684\u8868\u73b0\u4e0d\u5982\u5927\u578b\u6a21\u578b\u3002\u6b64\u5916\uff0c\u6307\u4ee4\u8ddf\u8e2a\u80fd\u529b\u8868\u660e\uff0c\u5168\u8ba1\u7b97\u8d77\u7740\u81f3\u5173\u91cd\u8981\u7684\u4f5c\u7528\u3002\u00ac DeepSeek 7B\u548c67B\u578b\u53f7\u4f7f\u7528\u76f8\u540c\u7684\u8bad\u7ec3\u7ba1\u9053\uff0c\u4f46\u5b83\u4eec\u7684\u6027\u80fd\u5b58\u5728\u663e\u8457\u5dee\u5f02\u3002\u901a\u8fc7\u6211\u4eec\u7684\u4e3b\u89c2\u8bc4\u4f30\uff0c\u6211\u4eec\u89c2\u5bdf\u5230\uff0c\u5f53\u5c06\u6a21\u578b\u5927\u5c0f\u6269\u5c55\u523067B\u65f6\uff0c\u5404\u79cd\u4efb\u52a1\u7684\u667a\u529b\u5b58\u5728\u663e\u8457\u5dee\u5f02\u3002\u867d\u7136DeepSeek 7B\u5728\u6807\u51c6\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u843d\u540e\u4e8e\u5176\u4ed6\u8f83\u5c0f\u7684\u8bed\u8a00\u6a21\u578b\uff0c\u4f46\u4e0e\u5176\u4ed6\u6a21\u578b\u76f8\u6bd4\uff0c\u5b83\u5728\u5ef6\u8fdf\u4efb\u52a1\u4e0a\u7684\u8868\u73b0\u76f8\u5bf9\u503c\u5f97\u79f0\u8d5e\u3002</p> <p>5.4 \u5b89\u5168\u8bc4\u4f30 \u6211\u4eec\u6df1\u523b\u8ba4\u8bc6\u5230\u5b89\u5168\u5bf9\u4e00\u822c\u4eba\u5de5\u667a\u80fd\u7684\u91cd\u8981\u6027\u3002\u5efa\u7acb\u4e00\u4e2a\u771f\u6b63\u6709\u7528\u7684\u4eba\u5de5\u667a\u80fd\u6a21\u578b\u7684\u524d\u63d0\u662f\uff0c\u5b83\u5177\u6709\u4e0e\u4eba\u7c7b\u4e00\u81f4\u7684\u4ef7\u503c\u89c2\uff0c\u5e76\u5bf9\u4eba\u7c7b\u8868\u73b0\u51fa\u53cb\u597d\u3002\u6211\u4eec\u5c06\u6a21\u578b\u5b89\u5168\u4fdd\u8bc1\u7eb3\u5165\u6574\u4e2a\u57f9\u8bad\u8fc7\u7a0b\uff0c\u5305\u62ec\u9884\u57f9\u8bad\u3001SFT\u548cDPO\u3002 \u4e3a\u4e86\u9a8c\u8bc1\u6211\u4eec\u6a21\u578b\u7684\u5b89\u5168\u6027\uff0c\u6211\u4eec\u6210\u7acb\u4e86\u4e00\u4e2a\u753120\u4eba\u7ec4\u6210\u7684\u4e13\u5bb6\u56e2\u961f</p> <p>\u7c7b\u522b  \u5b50\u7c7b\u522b #\u5b89\u5168\u7b54\u6848/#\u6848\u4f8b\u603b\u6570</p> <p>\u6b67\u89c6\u504f\u89c1\u95ee\u9898</p> <p>\u4fb5\u72af\u4ed6\u4eba\u5408\u6cd5\u6743\u76ca</p> <p>\u5546\u4e1a\u79d8\u5bc6\u4e0e\u77e5\u8bc6\u4ea7\u6743 \uff08\u5546\u4e1a\u79d8\u5bc6\u548c\u77e5\u8bc6\u4ea7\u6743\uff09</p> <p>\u8fdd\u6cd5\u8fdd\u89c4\u884c\u4e3a \uff08\u8fdd\u6cd5\u8fdd\u89c4\u884c\u4e3a\uff09</p> <p>\u5176\u4ed6\u5b89\u5168\u95ee\u9898 \uff08\u5176\u4ed6\u5b89\u5168\u95ee\u9898\uff09</p> <p>\u9690\u79c1\u6743 \uff08\u9690\u79c1\u6743\uff09\uff0c\u4fe1\u606f\u6743\u76ca \uff08\u4fe1\u606f\u6743\uff09\uff0c\u5176\u4ed6\u5408\u6cd5\u6743\u76ca \uff08\u5176\u4ed6\u6cd5\u5b9a\u6743\u5229\uff09 \u4fb5\u72af\u4ed6\u4eba\u77e5\u8bc6\u4ea7\u6743 \uff08\u4fb5\u72af\u4ed6\u4eba\u77e5\u8bc6\u4ea7\u6743\uff09\uff0c \u5784\u65ad\u548c\u4e0d\u6b63\u5f53\u7ade\u4e89\u884c\u4e3a \uff08\u5784\u65ad\u548c\u4e0d\u516c\u5e73\u7ade\u4e89\u884c\u4e3a\uff09\uff0c \u5176\u4ed6\u5546\u4e1a\u8fdd\u6cd5\u8fdd\u89c4\u884c\u4e3a \uff08\u5176\u4ed6\u5546\u4e1a\u8fdd\u6cd5\u548c\u4e0d\u5408\u89c4\u884c\u4e3a\uff09\uff0c \u8fdd\u53cd\u5546\u4e1a\u9053\u5fb7 \uff08\u8fdd\u53cd\u5546\u4e1a\u9053\u5fb7\uff09\uff0c\u6cc4\u9732\u4ed6\u4eba\u5546\u4e1a\u673a\u5bc6 \uff08\u6cc4\u9732\u4ed6\u4eba\u5546\u4e1a\u79d8\u5bc6\uff09 \u90aa\u6559\u8ff7\u4fe1 \uff08\u90aa\u6559\u548c\u8ff7\u4fe1\uff09\uff0c\u8272\u60c5 \uff08\u8272\u60c5\uff09\uff0c\u8d4c\u535a \uff08\u8d4c\u535a\uff09\uff0c \u6bd2\u54c1\u548c\u8fdd\u7981\u54c1 \uff08\u6bd2\u54c1\u548c\u8fdd\u7981\u7269\u54c1\uff09\uff0c\u4fae\u8fb1\u8c29\u9a82 \uff08\u4fae\u8fb1\u548c\u8650\u5f85\uff09\uff0c\u66b4\u529b\u884c\u4e3a \uff08\u66b4\u529b\u884c\u4e3a\uff09\uff0c \u6d89\u9ed1\u6d89\u6076 \uff08\u53c2\u4e0e\u6709\u7ec4\u7ec7\u72af\u7f6a\uff09\uff0c\u5176\u4ed6\u8fdd\u6cd5\u8fdd\u89c4\u884c\u4e3a \uff08\u5176\u4ed6\u8fdd\u6cd5\u8fdd\u89c4\u884c\u4e3a\uff09 \u5e7b\u89c9\u548c\u771f\u5b9e\u6027\u95ee\u9898 \uff08\u5e7b\u89c9\u4e0e\u73b0\u5b9e\u95ee\u9898\uff09\uff0c\u65f6\u6548\u6027\u95ee\u9898 \uff08\u65f6\u95f4\u654f\u611f\u95ee\u9898\uff09\uff0c \u6211\u8ba4\u77e5\u95ee\u9898 \uff08\u81ea\u6211\u8bc6\u522b\u95ee\u9898\uff09\uff0c\u5176\u4ed6\u654f\u611f\u8bdd\u9898 \uff08\u5176\u4ed6\u654f\u611f\u8bdd\u9898\uff09\uff0c</p> <p>281/300</p> <p>290/300</p> <p>767/800</p> <p>\u886810 |\u6211\u4eec\u7684\u5b89\u5168\u8bc4\u4f30\u5206\u7c7b\u3002\u8868\u7684\u6700\u53f3\u4fa7\u5217\u5217\u51fa\u4e86\u6bcf\u4e2a\u7c7b\u522b\u7684\u6d4b\u8bd5\u7528\u4f8b\u603b\u6570\u548c\u6211\u4eec\u7684\u6a21\u578b\uff08DeepSeek-67B-Chat\uff09\u63d0\u4f9b\u7684\u5b89\u5168\u7b54\u6848\u6570\u91cf\u3002\u8bd5\u9898\u7684\u6ce8\u91ca\u548c\u751f\u6210\u7ed3\u679c\u7684\u8bc4\u4f30\u7531\u4e13\u4e1a\u4eba\u5458\u56e2\u961f\u8fdb\u884c\u3002\u6211\u4eec\u53ef\u4ee5\u89c2\u5bdf\u5230\uff0c\u6211\u4eec\u7684\u6a21\u578b\u5728\u5404\u79cd\u7c7b\u578b\u7684\u5b89\u5168\u6d4b\u8bd5\u96c6\u4e0a\u8868\u73b0\u51fa\u5f88\u5f3a\u7684\u5b89\u5168\u6027\u3002 \u5e76\u6784\u5efa\u4e86\u4e0e\u4eba\u7c7b\u4ef7\u503c\u89c2\u76f8\u4e00\u81f4\u7684\u5b89\u5168\u5185\u5bb9\u5206\u7c7b\u4f53\u7cfb\uff08\u5b89\u5168\u8bc4\u4f30\u5206\u7c7b\u5982\u886810\u6240\u793a\uff09\u3002\u968f\u540e\uff0c\u4e13\u5bb6\u56e2\u961f\u4e3a\u6bcf\u4e2a\u5b89\u5168\u5b50\u7c7b\u522b\u624b\u52a8\u6784\u5efa\u4e86\u6570\u5341\u4e2a\u9ad8\u8d28\u91cf\u7684\u6d4b\u8bd5\u7528\u4f8b\u3002\u9664\u4e86\u5173\u6ce8\u5b89\u5168\u5185\u5bb9\u9886\u57df\u7684\u591a\u6837\u6027\u5916\uff0c\u6211\u4eec\u8fd8\u5173\u6ce8\u5b89\u5168\u5185\u5bb9\u683c\u5f0f\u7684\u591a\u6837\u6027\u3002\u81ed\u540d\u662d\u8457\u7684\u201c\u7956\u6bcd\u201d\u6f0f\u6d1e\u8868\u660e\uff0c\u6a21\u578b\u53ef\u80fd\u4f1a\u88ab\u67e5\u8be2\u7684\u8868\u9762\u683c\u5f0f\u6b3a\u9a97\uff0c\u4ece\u800c\u63d0\u4f9b\u4e0d\u5b89\u5168\u7684\u54cd\u5e94\u3002\u56e0\u6b64\uff0c\u5728\u8bbe\u8ba1\u95ee\u9898\u65f6\uff0c\u4e13\u5bb6\u56e2\u961f\u4e5f\u6ce8\u91cd\u591a\u6837\u5316\u7684\u63a2\u7a76\u65b9\u5f0f\u3002\u4ed6\u4eec\u901a\u8fc7\u8bf1\u5bfc\u3001\u89d2\u8272\u626e\u6f14\u3001\u591a\u56de\u5408\u5bf9\u8bdd\u3001\u9884\u8bbe\u4f4d\u7f6e\u7b49\u65b9\u5f0f\u6784\u5efa\u4e86\u5404\u79cd\u5b89\u5168\u95ee\u9898\u3002\u6700\u7ec8\uff0c\u6211\u4eec\u83b7\u5f97\u4e86\u4e00\u4e2a\u5305\u542b2400\u4e2a\u95ee\u9898\u7684\u5b89\u5168\u6d4b\u8bd5\u96c6\u3002\u6b64\u5916\uff0c\u4e13\u5bb6\u7ec4\u8fd8\u4e3a\u6bcf\u79cd\u4e0d\u540c\u7684\u5185\u5bb9\u7c7b\u578b\u548c\u683c\u5f0f\u7c7b\u578b\u6784\u5efa\u4e86\u5b89\u5168\u5ba1\u67e5\u7684\u57fa\u672c\u6307\u5bfc\u539f\u5219\u3002 \u5bf9\u4e8e\u6211\u4eec\u6a21\u578b\u5728\u8fd9\u4e2a\u6d4b\u8bd5\u96c6\u4e0a\u7684\u8f93\u51fa\u7ed3\u679c\uff0c\u6211\u4eec\u624b\u52a8\u68c0\u67e5\u4e86\u5b83\u7684\u5b89\u5168\u6027\u3002\u6211\u4eec\u7684\u5ba1\u67e5\u56e2\u961f\u8bad\u7ec3\u6709\u7d20\uff0c\u5e76\u5bf9\u6ce8\u91ca\u7ed3\u679c\u8fdb\u884c\u4e86\u4ea4\u53c9\u9a8c\u8bc1\u3002\u6ce8\u91ca\u5668\u5bf9\u6bcf\u4e2a\u95ee\u9898\u6267\u884c\u4e09\u7c7b\u6ce8\u91ca\uff1a\u5b89\u5168\u3001\u4e0d\u5b89\u5168\u548c\u6a21\u578b\u62d2\u7edd\u3002\u6211\u4eec\u6d4b\u8bd5\u4e86DeepSeek 67B\u804a\u5929\u6a21\u578b\u7684\u5b89\u5168\u6027\uff0c\u7ed3\u679c\u5982\u886810\u6240\u793a\u3002\u8868\u4e2d\u5217\u51fa\u4e86\u6bcf\u4e2a\u5b89\u5168\u7c7b\u522b\u7684\u6d4b\u8bd5\u95ee\u9898\u6570\u91cf\u548c\u6211\u4eec\u7684\u6a21\u578b\u901a\u8fc7\u7684\u5b89\u5168\u6d4b\u8bd5\u6570\u91cf\u3002\u6211\u4eec\u5c06\u5b89\u5168\u56de\u7b54\u548c\u6a21\u578b\u62d2\u7edd\u7684\u6d4b\u8bd5\u7528\u4f8b\u90fd\u6807\u8bb0\u4e3a\u5b89\u5168\u54cd\u5e94\u3002\u7ed3\u679c\u8868\u660e\uff0c\u6211\u4eec\u7684\u6a21\u578b\u5728\u4f17\u591a\u5b89\u5168\u6d4b\u8bd5\u7c7b\u522b\u4e2d\u8868\u73b0\u51fa\u826f\u597d\u7684\u5b89\u5168\u6027\u80fd\u3002 \u4e3a\u4e86\u8865\u5145\u6211\u4eec\u73b0\u6709\u7684\u5b89\u5168\u65b9\u6cd5\uff0c\u6211\u4eec\u4f7f\u7528\u201c\u4e0d\u8981\u56de\u7b54\u201d\u6570\u636e\u96c6\uff08Wang\u7b49\u4eba\uff0c2023\uff09\u8fdb\u4e00\u6b65\u4e30\u5bcc\u4e86\u6211\u4eec\u7684\u8bc4\u4f30\uff0c\u4ee5\u8bc4\u4f30\u6211\u4eec\u7684DeepSeek 67B\u804a\u5929\u6a21\u578b\u7684\u5b89\u5168\u673a\u5236\u3002\u8be5\u6570\u636e\u96c6\u7684939\u4e2a\u98ce\u9669\u5206\u7c7b\u63d0\u793a\u6709\u52a9\u4e8e\u7a81\u51fa\u6211\u4eec\u6a21\u578b\u7684\u589e\u5f3a\u529f\u80fd\u3002\u5982\u886811\u6240\u793a\uff0cDeepSeek 67B\u804a\u5929\u6a21\u578b\u8868\u73b0\u51fa\u4e86\u663e\u8457\u7684\u6027\u80fd\uff0c\u5f97\u5206\u4e3a97.8\uff0c\u9ad8\u4e8eChatGPT\u548cGPT-4\u3002\u8be5\u5206\u6570\u4e0d\u4ec5\u8861\u91cf\u4e86\u6211\u4eec\u7684\u6a21\u578b\u5b89\u5168\u5904\u7406\u654f\u611f\u67e5\u8be2\u7684\u80fd\u529b\uff0c\u800c\u4e14\u4f7f\u5176\u5728\u8be5\u9886\u57df\u7684\u9886\u5148\u6a21\u578b\u4e2d\u5177\u6709\u7ade\u4e89\u529b\u3002</p> <p>5.5 \u8ba8\u8bba \u5728\u6574\u4e2a\u5f00\u53d1\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u5728\u6784\u5efaLLM\u65b9\u9762\u53d1\u73b0\u4e86\u4e00\u4e9b\u6709\u8da3\u7684\u53d1\u73b0\u3002 \u6a21\u578b  \u4e0d\u8981\u56de\u7b54 LLAMA-2-7B-\u5e3d\u5b50   99.4 \u514b\u52b3\u5fb7 98.3 DeepSeek-67B-Chat*  97.8 ChatGPT 97.7 GPT-4   96.5 Vicuna-7B   94.9 ChatGLM2    92.9</p> <p>\u886811 |\u4e0d\u56de\u7b54\u5206\u6570\uff08Wang\u7b49\u4eba\uff0c2023\uff09\uff0c\u5206\u6570\u8d8a\u9ad8\u8868\u793a\u6a21\u578b\u5b89\u5168\u6027\u8d8a\u9ad8\u3002\u5e26*\u7684\u7ed3\u679c\u662f\u6211\u4eec\u57fa\u4e8e\u5b98\u65b9\u5b58\u50a8\u5e93\u7684\u8bc4\u4f30\u7ed3\u679c\uff0c\u800c\u6240\u6709\u5176\u4ed6\u7ed3\u679c\u90fd\u6765\u81ea\u539f\u59cb\u8bba\u6587\u3002\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\u6211\u4eec\u7684\u6a21\u578b\u7684\u5b89\u5168\u6027\u5f97\u5206\u9ad8\u4e8eChatGPT\u548cGPT-4\uff0c\u4f7f\u5176\u8dfb\u8eab\u4e8e\u6700\u5b89\u5168\u6a21\u578b\u4e4b\u5217\u3002</p> <p>\u5206\u6bb5\u5fae\u8c03\uff1a\u6b63\u5982\u6211\u4eec\u4e0a\u9762\u63d0\u5230\u7684\uff0c\u5c0f\u6a21\u578b\u9700\u8981\u5bf9\u6570\u5b66\u548c\u4ee3\u7801\u6570\u636e\u96c6\u8fdb\u884c\u66f4\u957f\u65f6\u95f4\u7684\u5fae\u8c03\uff0c\u4f46\u8fd9\u4f1a\u635f\u5bb3\u6a21\u578b\u7684\u5bf9\u8bdd\u80fd\u529b\uff0c\u4f8b\u5982\u589e\u52a0\u91cd\u590d\u884c\u4e3a\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u5b9e\u65bd\u4e86\u5206\u9636\u6bb5\u7684\u5fae\u8c03\u8fc7\u7a0b\u3002\u5728\u8fd9\u79cd\u65b9\u6cd5\u4e2d\uff0c\u7b2c\u4e00\u9636\u6bb5\u6d89\u53ca\u5bf9\u6240\u6709\u53ef\u7528\u6570\u636e\u8fdb\u884c\u5fae\u8c03\uff0c\u800c\u7b2c\u4e8c\u9636\u6bb5\u5219\u4e13\u95e8\u4fa7\u91cd\u4e8e\u5bf9\u4f1a\u8bdd\u6570\u636e\u8fdb\u884c\u5fae\u8c03\u3002</p> <p>\u6a21\u578b  \u4eba\u7c7b\u8bc4\u4f30    GSM8K   \u91cd\u590d\u7ade\u8d5b</p> <p>DeepSeek LLM 7B\u804a\u5929\u7b2c\u4e00\u9636\u6bb5   48.2    63.9    0.020   38.0 DeepSeek LLM 7B\u804a\u5929\u9636\u6bb52    48.2    63.0    0.014   41.2 \u886812 |\u4e24\u9636\u6bb5\u5fae\u8c03\u7ed3\u679c\u3002\u5f53\u6e29\u5ea6\u4e3a0\u65f6\uff0c\u8ba1\u7b97\u91cd\u590d\u6bd4\u3002\u91cd\u590d\u7387\u8d8a\u4f4e\u8d8a\u597d\u3002IFEval\u7684\u7ed3\u679c\u662f\u5373\u65f6\u7ea7\u522b\u7684\u677e\u6563\u7cbe\u5ea6\u3002</p> <p>\u886812\u663e\u793a\u4e86\u4e24\u9636\u6bb5\u8bad\u7ec3\u8fc7\u7a0b\u7684\u7ed3\u679c\u3002\u8fd9\u4e9b\u7ed3\u679c\u6e05\u695a\u5730\u8868\u660e\uff0c\u7b2c\u4e8c\u9636\u6bb5\u4e0d\u4f1a\u5f71\u54cd\u6a21\u578b\u5728\u4ee3\u7801\u548c\u6570\u5b66\u65b9\u9762\u7684\u719f\u7ec3\u7a0b\u5ea6\uff0c\u540c\u65f6\u51cf\u5c11\u4e86\u91cd\u590d\u884c\u4e3a\uff0c\u63d0\u9ad8\u4e86\u6559\u5b66\u8ddf\u968f\u80fd\u529b\u3002 \u591a\u9879\u9009\u62e9\u9898\uff1a\u4f7f\u7528\u591a\u9879\u9009\u62e9\u98ce\u683c\u7684\u8bc4\u4f30\u6570\u636e\uff08\u5982MMLU\u3001AGI\u8bc4\u4f30\u548cC-Eval\uff09\u6d4b\u8bd5\u6a21\u578b\u662f\u4e00\u79cd\u5e38\u89c1\u7684\u505a\u6cd5\u3002\u591a\u9879\u9009\u62e9\u9898\u8981\u6c42\u6a21\u578b\u4e0d\u4ec5\u8981\u6709\u76f8\u5e94\u7684\u77e5\u8bc6\uff0c\u8fd8\u8981\u7406\u89e3\u9009\u9879\u6240\u6307\u7684\u5185\u5bb9\u3002\u5728\u5bf9\u9f50\u9636\u6bb5\uff0c\u6211\u4eec\u6d4b\u8bd5\u4e86\u589e\u52a02000\u4e07\u4e2a\u4e2d\u6587\u591a\u9879\u9009\u62e9\u9898\uff0c\u5e76\u83b7\u5f97\u4e86\u5982\u886813\u6240\u793a\u7684\u6027\u80fd\u3002\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u6211\u4eec\u5bf9C-Eval\u9a8c\u8bc1\u96c6\u548cCMMLU\u6d4b\u8bd5\u96c6\u8fdb\u884c\u4e86\u91cd\u590d\u6570\u636e\u5220\u9664\uff0c\u4ee5\u9632\u6b62\u6570\u636e\u6c61\u67d3\u3002</p> <p>\u6a21\u578b  MMLUC\u8bc4\u4f30 MMLUTRIVIAQA    \u4e2d\u56fdQA</p> <p>DeepSeek LLM 7B\u804a\u5929   49.4    47.0    49.7    57.9    75.0 DeepSeek LLM 7B\u804a\u5929+MC    60.9    71.3    73.8    57.9    74.4 \u886813 |\u6dfb\u52a0\u591a\u9879\u9009\u62e9\u9898\u6570\u636e\u7684\u5f71\u54cd\u3002</p> <p>\u4e8b\u5b9e\u8bc1\u660e\uff0c\u7eb3\u5165\u989d\u5916\u76842000\u4e07MC\uff08\u591a\u9879\u9009\u62e9\uff09\u6570\u636e\u4e0d\u4ec5\u5bf9\u4e2d\u56fd\u591a\u9879\u9009\u62e9\u57fa\u51c6\u6d4b\u8bd5\u6709\u76ca\uff0c\u800c\u4e14\u5bf9\u63d0\u9ad8\u82f1\u8bed\u57fa\u51c6\u6d4b\u8bd5\u4e5f\u6709\u76ca\u3002\u8fd9\u8868\u660e\u8be5\u6a21\u578b\u89e3\u51b3MC\u95ee\u9898\u7684\u80fd\u529b\u5f97\u5230\u4e86\u589e\u5f3a\u3002\u7136\u800c\uff0c\u6211\u4eec\u89c2\u5bdf\u5230\uff0c\u8fd9\u79cd\u6539\u8fdb\u5e76\u6ca1\u6709\u6269\u5c55\u5230\u6a21\u578b\u5728\u5176\u4ed6\u4e0d\u4f7f\u7528\u591a\u9879\u9009\u62e9\u683c\u5f0f\u7684\u8bc4\u4f30\u4e2d\u7684\u8868\u73b0\uff0c\u4f8b\u5982TriviaQA\u548c\u6211\u4eec\u7684\u5185\u90e8\u8bc4\u4f30</p> <p>\u4e2d\u6587QA\u6d4b\u8bd5\u96c6\uff0c\u662f\u751f\u6210\u6027\u8bc4\u4f30\u57fa\u51c6\u3002\u8fd9\u8868\u660e\uff0c\u7528\u6237\u53ef\u80fd\u4e0d\u4f1a\u8ba4\u4e3a\u8be5\u6a21\u578b\u5728\u5bf9\u8bdd\u4ea4\u4e92\u4e2d\u53d8\u5f97\u66f4\u52a0\u667a\u80fd\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u4ea4\u4e92\u6d89\u53ca\u751f\u6210\u54cd\u5e94\u800c\u4e0d\u662f\u89e3\u51b3\u591a\u9879\u9009\u62e9\u9898\u3002 \u56e0\u6b64\uff0c\u6211\u4eec\u9009\u62e9\u5728\u9884\u8bad\u7ec3\u548c\u5fae\u8c03\u9636\u6bb5\u6392\u9664MC\u6570\u636e\uff0c\u56e0\u4e3a\u5305\u62ecMC\u6570\u636e\u4f1a\u5bfc\u81f4\u4e0e\u57fa\u51c6\u7684\u8fc7\u5ea6\u62df\u5408\uff0c\u5e76\u4e14\u65e0\u52a9\u4e8e\u5728\u6a21\u578b\u4e2d\u5b9e\u73b0\u771f\u6b63\u7684\u667a\u80fd\u3002 \u9884\u8bad\u7ec3\u4e2d\u7684\u6307\u4ee4\u6570\u636e\uff1a\u4eba\u4eec\u666e\u904d\u8ba4\u4e3a\uff0c\u5728\u9884\u8bad\u7ec3\u9636\u6bb5\u7684\u540e\u534a\u90e8\u5206\u7eb3\u5165\u6307\u4ee4\u6570\u636e\u53ef\u4ee5\u63d0\u9ad8\u57fa\u7840\u6a21\u578b\u5728\u57fa\u51c6\u4efb\u52a1\u4e0a\u7684\u6027\u80fd\u3002\u5728\u6211\u4eec\u7684\u7814\u7a76\u4e2d\uff0c\u6211\u4eec\u5728\u9884\u8bad\u7ec3\u9636\u6bb5\u7684\u6700\u540e10%\u6574\u5408\u4e86500\u4e07\u6761\u6307\u4ee4\u6570\u636e\uff0c\u4e3b\u8981\u7531\u591a\u9879\u9009\u62e9\u9898\u7ec4\u6210\u3002\u6211\u4eec\u89c2\u5bdf\u5230\uff0c\u57fa\u7840\u6a21\u578b\u5728\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u786e\u5b9e\u8868\u73b0\u51fa\u4e86\u6539\u8fdb\u7684\u6027\u80fd\u3002\u7136\u800c\uff0c\u6700\u7ec8\u7ed3\u679c\u4e0e\u5728SFT\u9636\u6bb5\u6dfb\u52a0\u76f8\u540c\u6570\u636e\u6240\u53d6\u5f97\u7684\u7ed3\u679c\u51e0\u4e4e\u76f8\u540c\u3002\u6211\u4eec\u5f97\u51fa\u7ed3\u8bba\uff0c\u867d\u7136\u8fd9\u79cd\u65b9\u6cd5\u589e\u5f3a\u4e86\u57fa\u7840\u6a21\u578b\u5728\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u7684\u6027\u80fd\uff0c\u4f46\u5176\u6574\u4f53\u6f5c\u529b\u76f8\u5f53\u4e8e\u4e0d\u5305\u542b\u8fd9\u4e9b\u6307\u4ee4\u6570\u636e\u3002\u5982\u679c\u6307\u4ee4\u6570\u636e\u91cf\u5f88\u5927\uff0c\u53ef\u4ee5\u5c06\u5176\u7eb3\u5165\u9884\u8bad\u7ec3\u8fc7\u7a0b\u3002\u7531\u4e8e\u6211\u4eec\u503e\u5411\u4e8e\u6392\u9664\u591a\u9879\u9009\u62e9\u9898\uff0c\u5e76\u4e14\u975e\u591a\u9879\u9009\u62e9\u9898\u7684\u53ef\u7528\u6027\u6709\u9650\uff0c\u6211\u4eec\u51b3\u5b9a\u4e0d\u5728\u9884\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\u5305\u542b\u6559\u5b66\u6570\u636e\u3002 \u7cfb\u7edf\u63d0\u793a\uff1a\u4e00\u4e2a\u8bbe\u8ba1\u826f\u597d\u7684\u7cfb\u7edf\u63d0\u793a\u5e94\u8be5\u6709\u6548\u5730\u6307\u5bfc\u6a21\u578b\u751f\u6210\u65e2\u6709\u5e2e\u52a9\u53c8\u6709\u5c0a\u91cd\u7684\u54cd\u5e94\u3002\u6211\u4eec\u5c06LLaMA-2\u5f15\u5165\u7684\u63d0\u793a\u7a0d\u5fae\u66f4\u6539\u4e3a\u6211\u4eec\u7684\u7cfb\u7edf\u63d0\u793a\u3002 \u7cfb\u7edf\u63d0\u793a\uff1a\u60a8\u662fDeepSeek Chat\uff0c\u4e00\u4e2a\u7531DeepSeek\u5f00\u53d1\u7684\u6709\u7528\u3001\u5c0a\u91cd\u548c\u8bda\u5b9e\u7684\u4eba\u5de5\u667a\u80fd\u52a9\u624b\u3002\u60a8\u7684\u57f9\u8bad\u6570\u636e\u7684\u77e5\u8bc6\u622a\u6b62\u65e5\u671f\u4e3a2023\u5e745\u6708\u3002\u5728\u786e\u4fdd\u5b89\u5168\u7684\u524d\u63d0\u4e0b\uff0c\u59cb\u7ec8\u5c3d\u53ef\u80fd\u5730\u63d0\u4f9b\u5e2e\u52a9\u3002\u4f60\u7684\u7b54\u6848\u4e0d\u5e94\u8be5\u5305\u62ec\u4efb\u4f55\u6709\u5bb3\u3001\u4e0d\u9053\u5fb7\u3001\u79cd\u65cf\u4e3b\u4e49\u3001\u6027\u522b\u6b67\u89c6\u3001\u6709\u6bd2\u3001\u5371\u9669\u6216\u975e\u6cd5\u7684\u5185\u5bb9\u3002\u8bf7\u786e\u4fdd\u60a8\u7684\u56de\u7b54\u5728\u793e\u4f1a\u4e0a\u662f\u516c\u6b63\u548c\u79ef\u6781\u7684\u3002\u5982\u679c\u4e00\u4e2a\u95ee\u9898\u6ca1\u6709\u4efb\u4f55\u610f\u4e49\uff0c\u6216\u8005\u4e8b\u5b9e\u4e0a\u4e0d\u8fde\u8d2f\uff0c\u8bf7\u89e3\u91ca\u539f\u56e0\uff0c\u800c\u4e0d\u662f\u56de\u7b54\u4e0d\u6b63\u786e\u7684\u95ee\u9898\u3002\u5982\u679c\u4f60\u4e0d\u77e5\u9053\u95ee\u9898\u7684\u7b54\u6848\uff0c\u8bf7\u4e0d\u8981\u5206\u4eab\u865a\u5047\u4fe1\u606f\u3002 \u6211\u4eec\u89c2\u5bdf\u5230\u4e00\u4e2a\u6709\u8da3\u7684\u73b0\u8c61\uff0c\u5373\u5f53\u5f15\u5165\u7cfb\u7edf\u63d0\u793a\u65f6\uff0c7B LLM\u7684\u6027\u80fd\u4f1a\u7565\u6709\u4e0b\u964d\u3002\u7136\u800c\uff0c\u5f53\u4f7f\u752867B LLM\u65f6\uff0c\u6dfb\u52a0\u63d0\u793a\u4f1a\u663e\u8457\u6539\u5584\u7ed3\u679c\uff0c\u5982\u8868\u6240\u793a\u00ac 14.\u6211\u4eec\u5bf9\u8fd9\u79cd\u5dee\u5f02\u7684\u89e3\u91ca\u662f\uff0c\u8f83\u5927\u7684\u6a21\u578b\u5bf9\u7cfb\u7edf\u63d0\u793a\u80cc\u540e\u7684\u9884\u671f\u542b\u4e49\u6709\u66f4\u597d\u7684\u7406\u89e3\uff0c\u4f7f\u5b83\u4eec\u80fd\u591f\u66f4\u6709\u6548\u5730\u9075\u5faa\u6307\u793a\u5e76\u4ea7\u751f\u66f4\u597d\u7684\u53cd\u5e94\u3002\u53e6\u4e00\u65b9\u9762\uff0c\u8f83\u5c0f\u7684\u6a21\u578b\u5f88\u96be\u5145\u5206\u638c\u63e1\u7cfb\u7edf\u63d0\u793a\uff0c\u8bad\u7ec3\u548c\u6d4b\u8bd5\u4e4b\u95f4\u7684\u4e0d\u4e00\u81f4\u53ef\u80fd\u4f1a\u5bf9\u5b83\u4eec\u7684\u6027\u80fd\u4ea7\u751f\u8d1f\u9762\u5f71\u54cd\u3002</p> <p>\u6a21\u578b  MT\u5de5\u4f5c\u53f0 DeepSeek LLM 7B\u804a\u5929   7.15 DeepSeek LLM 7B\u804a\u5929+\u7cfb\u7edf\u63d0\u793a  7.11 DeepSeek LLM 67B\u804a\u5929  8.35 DeepSeek LLM 67B\u804a\u5929+\u7cfb\u7edf\u63d0\u793a 8.58 \u886814 |\u6dfb\u52a0\u7cfb\u7edf\u63d0\u793a\u7684\u5f71\u54cd\u3002</p> <p>6 \u7ed3\u8bba\u3001\u5c40\u9650\u6027\u548c\u672a\u6765\u5de5\u4f5c \u6211\u4eec\u4ecb\u7ecdDeepSeek LLMs\uff0c\u8fd9\u662f\u4e00\u7cfb\u5217\u5f00\u6e90\u6a21\u578b\uff0c\u57282\u4e07\u4ebf\u4e2a\u4e2d\u82f1\u6587\u4ee3\u5e01\u7684\u5e9e\u5927\u6570\u636e\u96c6\u4e0a\u4ece\u5934\u5f00\u59cb\u8bad\u7ec3\u3002\u5728\u672c\u6587\u4e2d\uff0c\u6211\u4eec\u5bf9\u8d85\u53c2\u6570\u9009\u62e9\u3001\u6807\u5ea6\u5f8b\u4ee5\u53ca\u6211\u4eec\u6240\u505a\u7684\u5404\u79cd\u5fae\u8c03\u5c1d\u8bd5\u8fdb\u884c\u4e86\u6df1\u5165\u7684\u89e3\u91ca\u3002\u6211\u4eec\u6821\u51c6\u4e86\u5148\u524d\u5de5\u4f5c\u4e2d\u7684\u7f29\u653e\u5b9a\u5f8b\uff0c\u5e76\u63d0\u51fa\u4e86\u4e00\u79cd\u65b0\u7684\u6700\u4f18\u6a21\u578b/\u6570\u636e\u7f29\u653e\u5206\u914d\u7b56\u7565\u3002\u6b64\u5916\uff0c\u6211\u4eec\u63d0\u51fa\u4e86\u4e00\u79cd\u5728\u7ed9\u5b9a\u8ba1\u7b97\u9884\u7b97\u7684\u60c5\u51b5\u4e0b\u9884\u6d4b\u8fd1\u4f3c\u6700\u4f18\u6279\u91cf\u5927\u5c0f\u548c\u5b66\u4e60\u7387\u7684\u65b9\u6cd5\u3002\u6211\u4eec\u8fdb\u4e00\u6b65\u5f97\u51fa\u7ed3\u8bba\uff0c\u7f29\u653e\u89c4\u5f8b\u4e0e\u6570\u636e\u8d28\u91cf\u6709\u5173\uff0c\u8fd9\u53ef\u80fd\u662f\u4e0d\u540c\u4f5c\u54c1\u4e2d\u7f29\u653e\u884c\u4e3a\u4e0d\u540c\u7684\u6839\u672c\u539f\u56e0\u3002\u5728\u6807\u5ea6\u5f8b\u7684\u6307\u5bfc\u4e0b\uff0c\u6211\u4eec\u4f7f\u7528\u6700\u4f73\u8d85\u53c2\u6570\u8fdb\u884c\u9884\u8bad\u7ec3\uff0c\u5e76\u63d0\u4f9b\u5168\u9762\u7684\u8bc4\u4f30\u3002\u6211\u4eec\u5728\u6240\u6709\u8bad\u7ec3\u9636\u6bb5\u90fd\u907f\u514d\u57fa\u51c6\u88c5\u9970\u548c\u9ed1\u6697\u79d8\u5bc6\u3002 DeepSeek Chat\u5206\u4eab\u4e86\u5176\u4ed6LLM\u4e2d\u5e38\u89c1\u7684\u516c\u8ba4\u5c40\u9650\u6027\uff0c\u5305\u62ec\u5728\u9884\u57f9\u8bad\u540e\u7f3a\u4e4f\u6301\u7eed\u7684\u77e5\u8bc6\u66f4\u65b0\uff0c\u4ea7\u751f\u672a\u7ecf\u8bc1\u5b9e\u7684\u5efa\u8bae\u7b49\u975e\u4e8b\u5b9e\u4fe1\u606f\u7684\u53ef\u80fd\u6027\uff0c\u4ee5\u53ca\u4ea7\u751f\u5e7b\u89c9\u7684\u503e\u5411\u3002\u6b64\u5916\uff0c\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u6211\u4eec\u6700\u521d\u7684\u4e2d\u6587\u6570\u636e\u7248\u672c\u5e76\u4e0d\u8be6\u5c3d\uff0c\u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5728\u67d0\u4e9b\u7279\u5b9a\u7684\u4e2d\u6587\u4e3b\u9898\u4e0a\u8868\u73b0\u4e0d\u4f73\u3002\u7531\u4e8e\u6211\u4eec\u7684\u6570\u636e\u4e3b\u8981\u7531\u4e2d\u6587\u548c\u82f1\u6587\u6765\u6e90\u7ec4\u6210\uff0c\u56e0\u6b64\u8be5\u6a21\u578b\u5bf9\u5176\u4ed6\u8bed\u8a00\u7684\u719f\u7ec3\u7a0b\u5ea6\u4ecd\u7136\u5f88\u5fae\u5999\uff0c\u5e94\u8be5\u8c28\u614e\u5bf9\u5f85\u3002 DeepSeek LLM\u662f\u4e00\u4e2a\u81f4\u529b\u4e8e\u63a8\u8fdb\u5f00\u6e90\u8bed\u8a00\u6a21\u578b\u7684\u957f\u671f\u9879\u76ee\u3002</p> <p>\u2022 \u5f88\u5feb\uff0c\u6211\u4eec\u5c06\u5206\u522b\u5728\u4ee3\u7801\u667a\u80fd\u548c\u6df7\u5408\u4e13\u5bb6\uff08MoE\uff09\u4e2d\u53d1\u5e03\u6211\u4eec\u7684\u6280\u672f\u62a5\u544a\u3002\u5b83\u4eec\u5c55\u793a\u4e86\u6211\u4eec\u5982\u4f55\u4e3a\u9884\u8bad\u7ec3\u548c\u8bbe\u8ba1\u521b\u5efa\u9ad8\u8d28\u91cf\u7684\u4ee3\u7801\u6570\u636e \u7a00\u758f\u6a21\u578b\u4ee5\u5b9e\u73b0\u5bc6\u96c6\u6a21\u578b\u6027\u80fd\u3002 \u2022 \u76ee\u524d\uff0c\u6211\u4eec\u6b63\u5728\u4e3a\u5373\u5c06\u63a8\u51fa\u7684DeepSeek LLM\u7248\u672c\u6784\u5efa\u4e00\u4e2a\u66f4\u5927\u3001\u66f4\u6539\u8fdb\u7684\u6570\u636e\u96c6\u3002\u6211\u4eec\u5e0c\u671b\u5728\u4e0b\u4e00\u4e2a\u7248\u672c\u4e2d\uff0c\u63a8\u7406\u3001\u4e2d\u6587\u77e5\u8bc6\u3001\u6570\u5b66\u548c\u4ee3\u7801\u80fd\u529b\u5c06\u5f97\u5230\u663e\u8457\u63d0\u9ad8\u3002 \u2022 \u6211\u4eec\u7684\u534f\u8c03\u56e2\u961f\u81f4\u529b\u4e8e\u7814\u7a76\u5982\u4f55\u4e3a\u516c\u4f17\u63d0\u4f9b\u6709\u76ca\u3001\u8bda\u5b9e\u548c\u5b89\u5168\u7684\u6a21\u578b\u3002\u6211\u4eec\u7684\u521d\u6b65\u5b9e\u9a8c\u8bc1\u660e\uff0c\u5f3a\u5316\u5b66\u4e60\u53ef\u4ee5\u63d0\u9ad8\u6a21\u578b\u7684\u590d\u6742\u63a8\u7406\u80fd\u529b\u3002</p> <p>\u5de5\u5177\u4e66\u7c7b J.Ainslie\u3001J.Lee Thorp\u3001M.de Jong\u3001Y.Zemlyanskiy\u3001F.Lebr\u00f3n\u548cS.Sanghai\u3002Gqa\uff1a\u4ece\u591a\u5934\u68c0\u67e5\u70b9\u8bad\u7ec3\u5e7f\u4e49\u591a\u67e5\u8be2\u53d8\u6362\u5668\u6a21\u578b\u3002arXiv\u9884\u5370\u672carXiv:2305.132452023\u3002 \u4eba\u7c7b\u5b66\u3002\u4ecb\u7ecd\u514b\u52b3\u5fb7\uff0c2023\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://www.anthropic.com/index/introd\u53d1\u51fa\u6e05\u6670\u7684\u58f0\u97f3\u3002 \u5965\u65af\u6c40\uff0cA.\u5965\u5fb7\u5a1c\uff0cM.\u5948\uff0cM.\u535a\u65af\u9a6c\uff0cH.\u7c73\u54c8\u83b1\u592b\u65af\u57fa\uff0cD.\u591a\u6c49\uff0cE.\u59dc\uff0cC.\u8521\uff0cM.\u7279\u91cc\uff0c Q.Le\u7b49\uff0c\u5927\u578b\u8bed\u8a00\u6a21\u578b\u7684\u7a0b\u5e8f\u7efc\u5408\u3002arXiv\u9884\u5370\u672carXiv\uff1a2108.077322021\u3002 \u767d\uff0c\u767d\uff0c\u6731\uff0c\u5d14\uff0c\u515a\uff0c\u9093\uff0c\u8303\uff0c\u845b\uff0c\u97e9\uff0c\u9ec4\uff0c\u7b49\u3002Qwen\u6280\u672f\u62a5\u544a\u3002arXiv\u9884\u5370\u672carXiv:2309.16609\uff0c2023\u3002 Y.Bisk\u3001R.Zellers\u3001R.L.Bras\u3001J.Gao\u548cY.Choi\u3002PIQA\uff1a\u81ea\u7136\u8bed\u8a00\u4e2d\u5173\u4e8e\u7269\u7406\u5e38\u8bc6\u7684\u63a8\u7406\u3002\u7b2c\u4e09\u5341\u56db\u5c4aAAAI\u4eba\u5de5\u667a\u80fd\u5927\u4f1a</p> <p>2020\u5e74\uff0c\u7b2c\u4e09\u5341\u4e8c\u5c4a\u4eba\u5de5\u667a\u80fd\u521b\u65b0\u5e94\u7528\u5927\u4f1a\uff0cIAAI 2020\uff0c\u7b2c\u5341\u5c4aAAAI\u4eba\u5de5\u667a\u80fd\u6559\u80b2\u8fdb\u5c55\u7814\u8ba8\u4f1a\uff0cEAAI 2020\uff0c\u7f8e\u56fd\u7ebd\u7ea6\u5dde\u7ebd\u7ea6\u5e02\uff0c2020\u5e742\u67087\u65e5\u81f312\u65e5\uff0c\u7b2c7432-7439\u9875\u3002AAAI\u51fa\u7248\u793e\uff0c2020\u5e74\u3002doi:10.1609/aai.v34i05.6239\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://doi.org/10.1609/aaai.v34i05.6239. T.B.Brown\u3001B.Mann\u3001N.Ryder\u3001M.Subbiah\u3001J.Kaplan\u3001P.Dhariwal\u3001A.Neelakantan\u3001P.Shyam\u3001G.Sastry\u3001A.Askell\u3001S.Agarwal\u3001A.Herbert Voss\u3001G.Krueger\u3001T.Henighan\u3001R.Child\u3001A.Ramesh\u3001D.M.Ziegler\u3001J.Wu\u3001C.Winter\u3001C.Hesse\u3001M.Chen\u3001E.Sigler\u3001M.Litwin\u3001S.Gray\u3001B.Chess\u3001J.Clark\u3001C.Berner\u3001S.McCandlish\u3001A.Radford\u3001I.Sutskever\u548cD.Amodei\u3002\u00ac2020\u5e74\uff0c\u8bed\u8a00\u6a21\u578b\u5f88\u5c11\u6709\u4eba\u5b66\u4e60\u3002 \u9648\uff0cJ.Tworek\uff0cH.Jun\uff0cQ.Yuan\uff0cH.P.de Oliveira Pinto\uff0cJ.Kaplan\uff0cH.Edwards\uff0cY.Burda\uff0cN.Joseph\uff0cG.Brockman\uff0cA.Ray\uff0cR.Puri\uff0cG.Krueger\uff0cM.Petrov\uff0cH.Khlaaf\uff0cG.Sastry\uff0cP.Mishkin\uff0cB.Chan\uff0cS.Gray\uff0cN.Ryder\uff0cM.Pavlov\uff0cA.Power\uff0cL.Kaiser\uff0cM.Bavarian\uff0cC.Winter\uff0cP.Tillet\uff0cF.P.Such\uff0cD.Cummings\uff0cM.Plappert\uff0cF.Chantzis\uff0cE.Barnes\uff0cA.Herbert Voss\uff0cW.H.Guss\uff0cA.Nichol\uff0cA.Paino\uff0cN.Tezak\uff0cJ.Tang\uff0cI.Babuschkin S.Balaji\u3001S.Jain\u3001W.Saunders\u3001C.Hesse\u3001A.N.Carr\u3001J.Leike\u3001J.Achiam\u3001V.Misra\u3001E.Morikawa\u3001A.Radford\u3001M.Knight\u3001M.Brundage\u3001M.Murati\u3001K.Mayer\u3001P.Welinder\u3001B.McGrew\u3001D.Amodei\u3001S.McCandlish\u3001I.Sutskever\uff0c\u4ee5\u53ca W.\u624e\u4f26\u5df4\u3002\u8bc4\u4f30\u57fa\u4e8e\u4ee3\u7801\u8bad\u7ec3\u7684\u5927\u578b\u8bed\u8a00\u6a21\u578b\u3002\u7f8e\u56fd\u6ce8\u518c\u4f1a\u8ba1\u5e08\u534f\u4f1a\uff0cabs/2107.033742021\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://arxiv.org/abs/2107.03374. P.Clark\u3001I.Cowhey\u3001O.Etzioni\u3001T.Khot\u3001A.Sabharwal\u3001C.Schoenick\u548cO.Tafjord\u3002\u4f60\u8ba4\u4e3a\u4f60\u5df2\u7ecf\u89e3\u51b3\u4e86\u95ee\u7b54\u95ee\u9898\u5417\uff1ftry arc\uff0cAI2\u63a8\u7406\u6311\u6218\u3002CoRR\uff0cabs/1803.054572018\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740http://arxiv.org/abs/1803.05457. K.Cobbe\uff0cV.Kosaraju\uff0cM.Bavarian\uff0cM.Chen\uff0cH.Jun\uff0cL.Kaiser\uff0cM.Plappert\uff0cJ.Tworek\uff0c J.Hilton\uff0cR.Nakano\u7b49\u4eba\u3002\u8bad\u7ec3\u9a8c\u8bc1\u8005\u89e3\u51b3\u6570\u5b66\u5355\u8bcd\u95ee\u9898\u3002arXiv\u9884\u5370\u672carXiv:2110.14162021\u3002 T.\u8ba1\u7b97\u673a\u3002Redpajama\uff1a\u7528\u4e8e\u8bad\u7ec3\u5927\u578b\u8bed\u8a00\u6a21\u578b\u7684\u5f00\u653e\u6570\u636e\u96c6\uff0c2023\u5e74\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740 https://github.com/togethercomputer/RedPajama-Data. \u6234\u3001\u6768\u3001\u6768\u3001\u5361\u535a\u5185\u5c14\u3001\u4e50\u3001\u8428\u62c9\u8d6b\u56fe\u5b63\u8bfa\u592b\u3002Transformer xl\uff1a\u4e13\u6ce8\u4e8e\u56fa\u5b9a\u957f\u5ea6\u4e0a\u4e0b\u6587\u4e4b\u5916\u7684\u8bed\u8a00\u6a21\u578b\u3002arXiv\u9884\u5370\u672carXiv:1901.0286019\u3002 T.\u9053\u3002FlashAttention-2\uff1a\u66f4\u5feb\u7684\u6ce8\u610f\u529b\uff0c\u66f4\u597d\u7684\u5e76\u884c\u6027\u548c\u5de5\u4f5c\u5206\u533a\u30022023. \u9676\u3001\u5085\u3001\u57c3\u5c14\u8499\u3001\u9c81\u5fb7\u62c9\u3001\u96f7\u3002FlashAttention\uff1a\u5177\u6709IO\u611f\u77e5\u7684\u5feb\u901f\u3001\u5185\u5b58\u9ad8\u6548\u7684\u7cbe\u786e\u6ce8\u610f\u529b\u3002\u795e\u7ecf\u4fe1\u606f\u5904\u7406\u7cfb\u7edf\u8fdb\u5c55\uff0c2022\u3002 \u675c\uff0c\u94b1\uff0c\u5218\uff0c\u4e01\uff0c\u90b1\uff0c\u6768\uff0c\u5510\u3002Glm\uff1a\u5e26\u6709\u81ea\u56de\u5f52\u7a7a\u767d\u586b\u5145\u7684\u901a\u7528\u8bed\u8a00\u6a21\u578b\u9884\u8bad\u7ec3\u3002\u300a\u8ba1\u7b97\u8bed\u8a00\u5b66\u534f\u4f1a\u7b2c60\u5c4a\u5e74\u4f1a\u8bba\u6587\u96c6\u300b\uff08\u7b2c1\u5377\uff1a\u957f\u7bc7\u8bba\u6587\uff09\uff0c\u7b2c320-335\u9875\uff0c2022\u5e74\u3002 \u675c\u3001\u738b\u3001\u8fbe\u897f\u5409\u3001\u65af\u5766\u8bfa\u592b\u65af\u57fa\u3001\u8f9b\u683c\u548c\u52a0\u5fb7\u7eb3\u3002DROP\uff1a\u4e00\u4e2a\u9605\u8bfb\u00ac\u7406\u89e3\u57fa\u51c6\uff0c\u8981\u6c42\u5bf9\u6bb5\u843d\u8fdb\u884c\u79bb\u6563\u63a8\u7406\u3002J.Burstein\u3001C.Doran\u548cT.Solorio\uff0c\u7f16\u8f91\uff0c\u300a\u8ba1\u7b97\u8bed\u8a00\u5b66\u534f\u4f1a\u5317\u7f8e\u5206\u4f1a2019\u5e74\u4f1a\u8bae\u8bba\u6587\u96c6\uff1a\u4eba\u7c7b\u8bed\u8a00\u6280\u672f\u300b\uff0cNAACL-HLT 2019\uff0c\u7f8e\u56fd\u660e\u5c3c\u82cf\u8fbe\u5dde\u660e\u5c3c\u963f\u6ce2\u5229\u65af\uff0c2019\u5e746\u67082\u65e5\u81f37\u65e5\uff0c\u7b2c1\u5377\uff08\u957f\u7bc7\u548c\u77ed\u7bc7\u8bba\u6587\uff09\uff0c\u7b2c2368\u81f32378\u9875\u3002\u8ba1\u7b97\u8bed\u8a00\u5b66\u534f\u4f1a\uff0c2019\u5e74\u3002doi:10.18653/V1/N19-1246\u3002URL\u3002</p> <p>\u9ad8\u3001\u6bd5\u5fb7\u66fc\u3001\u5e03\u83b1\u514b\u3001\u6208\u5c14\u4e01\u3001\u970d\u666e\u3001\u798f\u65af\u7279\u3001\u5f6d\u3001\u4f55\u3001\u7530\uff0c N.Nabeshima\u7b49\u4eba\uff0cThe Pile\uff1a\u4e00\u4e2a800GB\u7684\u7528\u4e8e\u8bed\u8a00\u5efa\u6a21\u7684\u591a\u6837\u5316\u6587\u672c\u6570\u636e\u96c6\u3002arXiv\u9884\u5370\u672carXiv\uff1a2101.000272020\u3002 \u8c37\u6b4c\u30022023\u5e74\u662f\u6211\u4eec\u4eba\u5de5\u667a\u80fd\u4e4b\u65c5\u7684\u91cd\u8981\u4e0b\u4e00\u6b65\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://blog.google/technology/ai/bard\u8c37\u6b4c\u4eba\u5de5\u667a\u80fd\u641c\u7d22\u66f4\u65b0/\u3002 \u90ed\u53f0\u94ed\u3001\u90b5\u5fd7\u519b\u3001\u9f9a\u3001\u6c88\u3001\u6768\u3001\u9ec4\u3001\u6bb5\u3001\u9648\u3002Tora\uff1a\u4e00\u4e2a\u7528\u4e8e\u89e3\u51b3\u6570\u5b66\u95ee\u9898\u7684\u5de5\u5177\u96c6\u6210\u63a8\u7406\u4ee3\u7406\u3002\u7f8e\u56fd\u6ce8\u518c\u4f1a\u8ba1\u5e08\u534f\u4f1a\uff0cabs/2309.174522023\u3002doi:10.48550/ARXIV.2309.17452\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://doi.org/10.48550/arXiv.2309.17452. P.Goyal\u3001P.Doll\u00e1r\u3001r.Girshick\u3001P.Noordhuis\u3001L.Wesolowski\u3001A.Kyrola\u3001A.Tulloch\u3001Y.Jia\u548cK.He\u3002\u7cbe\u786e\u3001\u5927\u6279\u91cf\u3001\u5c0f\u6279\u91cfsgd\uff1a1\u5c0f\u65f6\u5185\u8bad\u7ec3\u56fe\u50cf\u7f51\u3002arXiv\u9884\u5370\u672carXiv:1706.026772017\u3002 D.Hendrycks\u3001C.Burns\u3001S.Basart\u3001A.Zou\u3001M.Mazeika\u3001D.Song\u548cJ.Steinhardt\u3002\u6d4b\u91cf\u5927\u91cf\u591a\u4efb\u52a1\u8bed\u8a00\u7406\u89e3\u80fd\u529b\u3002arXiv\u9884\u5370\u672carXiv:2009.03302020\u3002 D.Hendrycks\u3001C.Burns\u3001S.Kadavath\u3001A.Arora\u3001S.Basart\u3001E.Tang\u3001D.Song\u548cJ.Steinhardt\u3002\u00ac\u7528\u6570\u5b66\u6570\u636e\u96c6\u8861\u91cf\u6570\u5b66\u95ee\u9898\u7684\u89e3\u51b3\u3002arXiv\u9884\u5370\u672carXiv:2103.03874\uff0c2021\u3002 T.Henighan\uff0cJ.Kaplan\uff0cM.Katz\uff0cM.Chen\uff0cC.Hesse\uff0cJ.Jackson\uff0cH.Jun\uff0cT.B.Brown\uff0cP.\u00acDhariwal\uff0cS.Gray\u7b49\u4eba\u3002\u81ea\u56de\u5f52\u751f\u6210\u5efa\u6a21\u7684\u6807\u5ea6\u5f8b\u3002arXiv\u9884\u5370\u672carXiv:2010.14701.2020\u3002 J.Hestness\u3001S.Narang\u3001N.Ardalani\u3001G.Diamos\u3001H.Jun\u3001H.Kianinejad\u3001M.M.A.Patwary\uff0c \u6768\u548c\u5468\u3002\u6839\u636e\u7ecf\u9a8c\uff0c\u6df1\u5ea6\u5b66\u4e60\u7684\u6269\u5c55\u662f\u53ef\u9884\u6d4b\u7684\u3002arXiv\u9884\u5370\u672carXiv:1712.004092017\u3002 \u9ad8\u98de\u3002\u6d77\uff1a\u9ad8\u6548\u4e14\u8f7b\u91cf\u7684\u5927\u6a21\u578b\u8bad\u7ec3\u5de5\u5177, 2023.\u7f51\u5740https://www.high-flyer.cn/en/blog/hai llm\u3002 J.Hoffmann\uff0cS.Borgeaud\uff0cA.Mensch\uff0cE.Buchatskaya\uff0cT.Cai\uff0cE.Rutherford\uff0cD.de Las Casas\uff0c L.A.Hendricks\u3001J.Welbl\u3001A.Clark\u3001T.Hennigan\u3001E.Noland\u3001K.Millican\u3001G.van den Driessche\uff0c B.Damoc\u3001A.Guy\u3001S.Osindero\u3001K.Simonyan\u3001E.Elsen\u3001J.W.Rae\u3001O.Vinyals\u548cL.Sifre\u3002\u8bad\u7ec3\u8ba1\u7b97\u6700\u4f18\u7684\u5927\u578b\u8bed\u8a00\u6a21\u578b\u3002\u7f8e\u56fd\u8239\u7ea7\u793e\uff0cabs/2203.15556\uff0c2022\u3002doi:10.48550 /ARXIV.2203.15556\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://doi.org/10.48550/arXiv.2203.15556. \u9ec4\uff0c\u767d\uff0c\u6731\uff0c\u5f20\uff0c\u5f20\uff0c\u82cf\uff0c\u5218\uff0c\u5415\uff0c\u5f20\uff0c\u96f7\uff0c\u7b49.C-Eval:\u4e00\u4e2a\u591a\u5c42\u6b21\u3001\u591a\u5b66\u79d1\u7684\u4e2d\u56fd\u57fa\u7840\u6a21\u578b\u8bc4\u4ef7\u5957\u4ef6\u3002arXiv\u9884\u5370\u672carXiv:2305.08322023\u3002 \u62e5\u62b1\u9762\u5bf9\u56e2\u961f\u3002Tokenizers\uff1a2019\u5e74\u9488\u5bf9\u7814\u7a76\u548c\u751f\u4ea7\u4f18\u5316\u7684\u5feb\u901f\u6700\u5148\u8fdb\u7684Tokenizers\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://github.com/huggingface/tokenizers. F.i\uff0cM.Suzgun\uff0cM.Freitag\uff0cX.Wang\uff0cS.Srivats\uff0cS.Vosoughi\uff0cH.W.Chung\uff0cY.Tay\uff0cS.Ruder\uff0c D.\u5468\u3001D.\u8fbe\u65af\u548cJ.\u9b4f\u3002\u8bed\u8a00\u6a21\u578b\u662f\u591a\u8bed\u8a00\u601d\u7ef4\u63a8\u7406\u94fe\u3002\u5728\u7b2c\u5341\u4e00\u5c4a\u56fd\u9645\u5b66\u4e60\u4ee3\u8868\u5927\u4f1a\u4e0a\uff0cICLR 2023\uff0c\u5362\u65fa\u8fbe\u57fa\u52a0\u5229\uff0c2023\u5e745\u67081\u65e5\u81f35\u65e5\u3002OpenReview.net\uff0c2023\u5e74\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://openreview.net/pdf?id=fR3wGCk IXp\u3002 H.Ivison\uff0cY.Wang\uff0cV.Pyatkin\uff0cN.Lambert\uff0cM.Peters\uff0cP.Dasigi\uff0cJ.Jang\uff0cD.Wadden\uff0cN.A.Smith\uff0cI.Beltagy\u548cH.Hajishirzi\u3002\u6c14\u5019\u53d8\u5316\u4e2d\u7684\u9a86\u9a7c\uff1a\u7528tulu\u589e\u5f3alm\u9002\u5e94\u80fd\u529b2\u30022023. A.Q.\u59dc\u3001A.Sablayrolles\u3001A.Mensch\u3001C.Bamford\u3001D.S.Chaplot\u3001D.D.l.Casas\u3001F.Bressand\u3001G.Lengyel\u3001G.Lample\u3001l.Saulnier\u7b49\u4eba\u3002arXiv\u9884\u5370\u672carXiv:2310068252023\u3002 M.Joshi\uff0cE.Choi\uff0cD.Weld\u548cL.Zettlemoyer\u3002TriviaQA\uff1a\u4e00\u4e2a\u00ac\u7528\u4e8e\u9605\u8bfb\u7406\u89e3\u7684\u5927\u89c4\u6a21\u8fdc\u7a0b\u76d1\u7763\u6311\u6218\u6570\u636e\u96c6\u3002R.Barzilay\u548cM.-Y.Kan\uff0c\u7f16\u8f91\uff0c\u300a\u8ba1\u7b97\u8bed\u8a00\u5b66\u534f\u4f1a\u7b2c55\u5c4a\u5e74\u4f1a\u8bba\u6587\u96c6\u300b\uff08\u7b2c1\u5377\uff1a\u957f\u7bc7\u8bba\u6587\uff09\uff0c\u7b2c1601-1611\u9875\uff0c\u52a0\u62ff\u5927\u6e29\u54e5\u534e\uff0c2017\u5e747\u6708\u3002\u8ba1\u7b97\u8bed\u8a00\u5b66\u534f\u4f1a\u3002doi:10.18653/v1/P17-1147\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://aclanthology.org/P17-1147. J.Kaplan\u3001S.McCandlish\u3001T.Henighan\u3001T.B.Brown\u3001B.Chess\u3001R.Child\u3001S.Gray\u3001A.Radford\uff0c \u5434\u548c\u963f\u83ab\u8fea\u3002\u795e\u7ecf\u8bed\u8a00\u6a21\u578b\u7684\u7f29\u653e\u5b9a\u5f8b\u3002\u7f8e\u56fd\u8239\u7ea7\u793e\uff0c\u7f8e\u56fd\u8239\u7ea7\u793e/2001.083612020\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://arxiv.org/abs/2001.08361. V.A.Korthikanti\u3001J.Casper\u3001S.Lym\u3001L.McAfee\u3001M.Andersch\u3001M.Shoeybi\u548cB.Catanzaro\u3002\u51cf\u5c11\u5927\u578b\u53d8\u538b\u5668\u6a21\u578b\u4e2d\u7684\u6fc0\u6d3b\u91cd\u65b0\u8ba1\u7b97\u3002\u300a\u673a\u5668\u5b66\u4e60\u4e0e\u7cfb\u7edf\u5b66\u62a5\u300b\uff0c2023\u5e74\u7b2c5\u671f\u3002 T.Kwiatkowski\u3001J.Palomaki\u3001O.Redfield\u3001M.Collins\u3001A.P.Parikh\u3001C.Alberti\u3001D.Epstein\u3001I.Polosukhin\u3001J.Devlin\u3001K.Lee\u3001K.Toutanova\u3001L.Jones\u3001M.Kelcey\u3001M.Chang\u3001A.M.Dai\u3001J.Uszkoreit\u3001Q.Le\u548cS.Petrov\u3002\u81ea\u7136\u95ee\u9898\uff1a\u95ee\u7b54\u7814\u7a76\u7684\u57fa\u51c6\u3002Trans\u3002\u8ba1\u7b97\u673a\u534f\u4f1a\u3002\u8bed\u8a00\u5b66\uff0c7:452\u20134662019\u3002doi:10.1162/tacl_a_00276\u3002URL\u3002 \u6743\u3001\u674e\u3001\u5e84\u3001\u76db\u3001\u90d1\u3001\u4f59\u3001\u5188\u8428\u96f7\u65af\u3001\u5f20\u3001\u65af\u591a\u845b\u3002\u4e3a\u670d\u52a1\u4e8e\u9875\u9762\u6570\u636e\u7684\u5927\u578b\u8bed\u8a00\u6a21\u578b\u63d0\u4f9b\u9ad8\u6548\u7684\u5185\u5b58\u7ba1\u7406\u3002\u300aACM SIGOPS\u7b2c29\u5c4a\u64cd\u4f5c\u7cfb\u7edf\u539f\u7406\u7814\u8ba8\u4f1a\u8bba\u6587\u96c6\u300b\uff0c2023\u5e74\u3002 \u8d56\uff0c\u8c22\uff0c\u5218\uff0c\u6768\uff0c\u970d\u7ef4\u3002RACE\uff1a\u6765\u81ea\u8003\u8bd5\u7684\u5927\u89c4\u6a21\u9605\u8bfb\u7406\u89e3\u6570\u636e\u96c6\u3002M.Palmer\u3001R.Hwa\u548cS.Riedel\uff0c\u7f16\u8f91\uff0c\u300a2017\u5e74\u81ea\u7136\u8bed\u8a00\u5904\u7406\u5b9e\u8bc1\u65b9\u6cd5\u4f1a\u8bae\u8bba\u6587\u96c6\u300b\uff0cEMNLP 2017\uff0c\u4e39\u9ea6\u54e5\u672c\u54c8\u6839\uff0c2017\u5e749\u67089\u65e5\u81f311\u65e5\uff0c\u7b2c785-794\u9875\u3002\u8ba1\u7b97\u8bed\u8a00\u5b66\u534f\u4f1a\uff0c2017\u5e74\u3002doi:10.18653/V1/D17-1082\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://doi.org/10.18653/v1/d1 7-1082. H.Li\u3001Y.Zhang\u3001F.Koto\u3001Y.Yang\u3001H.\u8d75\u3001Y.Gong\u3001N.Duan\u548cT.Baldwin\u3002CMMLU\uff1a\u6d4b\u91cf\u00ac\u4e2d\u6587\u4e2d\u7684\u5927\u89c4\u6a21\u591a\u4efb\u52a1\u8bed\u8a00\u7406\u89e3\u80fd\u529b\u3002arXiv\u9884\u5370\u672carXiv:2306.09212023\u3002 \u674e\uff0c\u9f50\uff0c\u5b59\uff0c\u6613\uff0c\u5f20\u3002Ccpm:2021\u5e74\u4e2d\u56fd\u53e4\u5178\u8bd7\u6b4c\u5339\u914d\u6570\u636e\u96c6\u3002 \u5218\uff0c\u96f7\uff0c\u738b\uff0c\u9ec4\uff0c\u51af\uff0c\u6e29\uff0c\u7a0b\uff0c\u67ef\uff0c\u5f90\uff0c\u8c2d\uff0c\u5f20\uff0c\u5b59\uff0c\u738b\uff0c\u5f20\uff0c\u9ec4\uff0c\u8463\uff0c\u5510\u3002Alignbench\uff1a\u5bf9\u5927\u578b\u8bed\u8a00\u6a21\u578b\u7684\u4e2d\u6587\u5bf9\u9f50\u8fdb\u884c\u57fa\u51c6\u6d4b\u8bd5\u3002CoRR\uff0cabs/2311.187432023\u3002doi:10.48550/A RXIV.2311.18743\u3002URL\u3002 I.\u6d1b\u5e0c\u6d1b\u592b\u548cF.\u54c8\u7279\u3002\u89e3\u8026\u6743\u91cd\u8870\u51cf\u6b63\u5219\u5316\u3002arXiv\u9884\u5370\u672carXiv:171.051012017\u3002</p> <p>\u7f57\u3001\u5b59\u3001\u5f90\u3001\u8d75\u3001\u697c\u3001\u9676\u3001\u803f\u3001\u6797\u3001\u9648\u3001\u5f20\u3002Wizardmath\uff1a\u901a\u8fc7\u5f3a\u5316\u8fdb\u5316\u8bba\u6307\u4ee4\u4e3a\u5927\u578b\u8bed\u8a00\u6a21\u578b\u8d4b\u4e88\u6570\u5b66\u63a8\u7406\u80fd\u529b\u3002arXiv\u9884\u5370\u672carXiv:2308.095832023\u3002 S.McCandlish\u3001J.Kaplan\u3001D.Amodei\u548cO.D.\u56e2\u961f\u3002\u5927\u6279\u91cf\u8bad\u7ec3\u7684\u5b9e\u8bc1\u6a21\u578b\u3002arXiv\u9884\u5370\u672carXiv:1812.061622018\u3002 T.\u7c73\u54c8\u4f0a\u6d1b\u592b\u3001P.\u514b\u62c9\u514b\u3001T.\u79d1\u7279\u548cA.\u8428\u5df4\u74e6\u5c14\u3002\u4e00\u5957\u76d4\u7532\u80fd\u5bfc\u7535\u5417\uff1f2018\u5e74\uff0c\u4e00\u4e2a\u65b0\u7684\u5f00\u5377\u95ee\u7b54\u6570\u636e\u96c6\u3002 D.\u7eb3\u62c9\u4e9a\u5357\u3001M.\u8096\u4f0a\u6bd4\u3001J.\u5361\u65af\u73c0\u3001P.\u52d2\u683c\u96f7\u65af\u5229\u3001M.\u5e15\u5854\u74e6\u91cc\u3001V.\u79d1\u5c14\u63d0\u574e\u8482\u3001D.\u6e29\u5e03\u5170\u5fb7\uff0c P.Kashinkunti\uff0cJ.Bernauer\uff0cB.Catanzaro\uff0c\u7b49\u4eba\u3002\u4f7f\u7528\u5a01\u9707\u52a0\u901f\u5668lm\u5728gpu\u96c6\u7fa4\u4e0a\u8fdb\u884c\u9ad8\u6548\u7684\u5927\u89c4\u6a21\u8bed\u8a00\u6a21\u578b\u8bad\u7ec3\u3002\u300a\u9ad8\u6027\u80fd\u8ba1\u7b97\u3001\u7f51\u7edc\u3001\u5b58\u50a8\u548c\u5206\u6790\u56fd\u9645\u4f1a\u8bae\u8bba\u6587\u96c6\u300b\uff0c2021\u5e74\u7b2c1-15\u9875\u3002 OpenAI\u30022022\u5e74\u63a8\u51faChatGPT\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://openai.com/blog/chatgpt.OpenAI\u3002GPT4\u6280\u672f\u62a5\u544a\u3002arXiv\u9884\u5370\u672carXiv:2303.087742023\u3002 \u6b27\u9633\uff0c\u5434\uff0c\u59dc\uff0c\u963f\u5c14\u6885\u8fbe\uff0c\u6e29\u8d56\u7279\uff0c\u7c73\u4ec0\u91d1\uff0c\u5f20\uff0c\u963f\u52a0\u74e6\u5c14\uff0c\u65af\u62c9\u9a6c\uff0c\u96f7\u7b49\u3002\u8bad\u7ec3\u8bed\u8a00\u6a21\u578b\u9075\u5faa\u4eba\u7c7b\u53cd\u9988\u6307\u4ee4\u3002\u795e\u7ecf\u4fe1\u606f\u5904\u7406\u7cfb\u7edf\u8fdb\u5c55\uff0c35:27730\u2013277442022\u3002 G.\u4f69\u5185\u591a\u3001Q.\u9a6c\u62c9\u5c14\u8482\u3001D.\u8d6b\u65af\u6d1b\u3001R.\u79d1\u7ea6\u5361\u9c81\u3001A.\u5361\u4f69\u5229\u3001H.\u963f\u6d1b\u8d1d\u5fb7\u5229\u3001B.\u6f58\u5c3c\u5c14\u3001E.\u963f\u5c14\u00b7\u9a6c\u5179\u9c81\u7ef4\u548cJ.\u52b3\u5948\u3002falcon llm\u7684\u7cbe\u5316web\u6570\u636e\u96c6\uff1a\u5728\u7f51\u7edc\u6570\u636e\u548c\u4ec5\u7f51\u7edc\u6570\u636e\u65b9\u9762\u4f18\u4e8e\u7cbe\u5fc3\u7b56\u5212\u7684\u8bed\u6599\u5e93\u3002arXiv\u9884\u5370\u672carXiv:2306.011162023\u3002 A.Radford\uff0cJ.Wu\uff0cR.Child\uff0cD.Luan\uff0cD.Amodei\uff0cI.Sutskever\u7b49\u4eba\u3002\u8bed\u8a00\u6a21\u578b\u662f\u65e0\u76d1\u7763\u7684\u591a\u4efb\u52a1\u5b66\u4e60\u8005\u3002OpenAI\u535a\u5ba2\uff0c1\uff088\uff09\uff1a92019\u3002 R.Rafailov\u3001A.Sharma\u3001E.Mitchell\u3001S.Ermon\u3001C.D.Manning\u548cC.Finn\u3002\u76f4\u63a5\u504f\u597d\u4f18\u5316\uff1a\u4f60\u7684\u8bed\u8a00\u6a21\u578b\u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a\u5956\u52b1\u6a21\u578b\u30022023. S.Rajbhandari\u3001J.Rasley\u3001O.Ruwase\u548cY.He\u3002\u96f6\uff1a\u9488\u5bf9\u8bad\u7ec3\u4e07\u4ebf\u53c2\u6570\u6a21\u578b\u7684\u5185\u5b58\u4f18\u5316\u3002-SC20\uff1a\u9ad8\u6027\u80fd\u8ba1\u7b97\u3001\u7f51\u7edc\u3001\u5b58\u50a8\u548c\u5206\u6790\u56fd\u9645\u4f1a\u8bae\uff0c\u7b2c1-16\u9875\u3002IEEE\uff0c2020\u5e74\u3002 K.Sakaguchi\u3001R.L.Bras\u3001C.Bhagavatula\u548cY.Choi\u3002Winogrande:2019\u5e74\u5927\u89c4\u6a21\u5bf9\u6297\u6027winograd\u6a21\u5f0f\u6311\u6218\u3002 C.J.Shallue\u3001J.Lee\u3001J.Antognini\u3001J.Sohl Dickstein\u3001R.Frostig\u548cG.E.Dahl\u3002\u6d4b\u91cf\u6570\u636e\u5e76\u884c\u6027\u5bf9\u795e\u7ecf\u7f51\u7edc\u8bad\u7ec3\u7684\u5f71\u54cd\u3002\u673a\u5668\u5b66\u4e60\u7814\u7a76\u6742\u5fd7\uff0c20\uff08112\uff09\uff1a1-492019\u3002 N.\u6c99\u6cfd\u5c14\u3002\u8c37\u6c28\u9178\u53d8\u4f53\u6539\u5584\u53d8\u538b\u5668\u3002arXiv\u9884\u5370\u672carXiv:2002.052020\u3002 M.Shoeybi\u3001M.Patwary\u3001R.Puri\u3001P.LeGresley\u3001J.Casper\u548cB.Catanzaro\u3002\u5a01\u9707\u5929lm\uff1a\u4f7f\u7528\u6a21\u578b\u5e76\u884c\u6027\u8bad\u7ec3\u6570\u5341\u4ebf\u53c2\u6570\u8bed\u8a00\u6a21\u578b\u3002arXiv\u9884\u5370\u672carXiv:1909.080531919\u3002 S.Smith\uff0cM.Patwary\uff0cB.Norick\uff0cP.LeGresley\uff0cS.Rajbhandari\uff0cJ.Casper\uff0cZ.Liu\uff0cS.Prabhumoye\uff0cG.Zerveas\uff0cV.Korthikanti\u7b49\u4eba\u3002\u4f7f\u7528\u6df1\u5ea6\u901f\u5ea6\u548c\u5146\u6b27\u7ba1\u8bad\u7ec3\u5146\u6b27\u7ba1\u56fe\u7075nlg 530b\uff0c\u8fd9\u662f\u4e00\u79cd\u5927\u89c4\u6a21\u7684\u751f\u6210\u8bed\u8a00\u6a21\u578b\u3002arXiv\u9884\u5370\u672carXiv:2201.11990\uff0c2022\u3002 S.L.Smith\u3001P.J.Kindermans\u3001C.Ying\u548cQ.V.Le\u3002\u4e0d\u8981\u964d\u4f4e\u5b66\u4e60\u7387\uff0c\u589e\u52a0\u6279\u91cf\u5927\u5c0f\u3002arXiv\u9884\u5370\u672carXiv:171.004892017\u3002</p> <p>\u82cf\uff08J.Su\uff09\u3001\u827e\u54c8\u8fc8\u5fb7\uff08M.Ahmed\uff09\u3001\u9c81\uff08Y.Lu\uff09\u3001\u6f58\uff08S.Pan\uff09\u3001Bo\uff08W.Bo\uff09\u548c\u5218\uff08Y.Liu\uff09\u3002Roformer\uff1a\u5e26\u6709\u65cb\u8f6c\u4f4d\u7f6e\u5d4c\u5165\u7684\u589e\u5f3a\u578b\u53d8\u538b\u5668\u3002\u795e\u7ecf\u8ba1\u7b97\uff0c568:1270632024\u3002 \u5b59\u3001\u4f59\u3001\u4f59\u3001\u5361\u8fea\u30022019\u5e74\uff0c\u7814\u7a76\u6311\u6218\u6027\u4e2d\u6587\u673a\u5668\u9605\u8bfb\u7406\u89e3\u7684\u5148\u9a8c\u77e5\u8bc6\u3002 M.Suzgun\uff0cN.Scales\uff0cN.Sch\u00e4rli\uff0cS.Gehrmann\uff0cY.Tay\uff0cH.W.Chung\uff0cA.Chowdhery\uff0cQ.V.Le\uff0cE.H.Chi\uff0cD.Zhou\u7b49\u4eba\u3002\u6311\u6218\u6027\u7684\u5927\u677f\u51f3\u4efb\u52a1\u4ee5\u53ca\u601d\u7ef4\u94fe\u80fd\u5426\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\u3002arXiv\u9884\u5370\u672carXiv:2210.09261022\u3002 H.Touvron\uff0cT.Lavril\uff0cG.Izacard\uff0cX.Martinet\uff0cM.-A.Lachaux\uff0cT.Lacroix\uff0cB.Rozi\u00e8re\uff0cN.Goyal\uff0cE.Hambro\uff0cF.Azhar\u7b49\u4eba\u3002LLaMA\uff1a\u5f00\u653e\u9ad8\u6548\u7684\u57fa\u7840\u8bed\u8a00\u6a21\u578b\u3002arXiv\u9884\u5370\u672carXiv:2302.139712023a\u3002 H.Touvron\u3001L.Martin\u3001K.Stone\u3001P.Albert\u3001A.Almahairi\u3001Y.Babaei\u3001N.Bashlykov\u3001S.Batra\u3001P.Bhargava\u3001S.Bhosale\u3001D.Bikel\u3001L.Blecher\u3001C.Canton Ferrer\u3001M.Chen\u3001G.Cucurull\u3001D.Esiobu\u3001J.Fernandes\u3001J.Fu\u3001W.Fu\u3001B.Fuller\u3001C.Gao\u3001V.Goswami\u3001N.Goyal\u3001A.Hartshorn\u3001S.Hosseini\u3001R.Hou\u3001H.Inan\u3001M.Kardas\u3001V.Kerkez\u3001M.Khabsa\u3001I.Kloumann\u3001A.Korenev\u3001P.S.Koura\u3001M.Lachaux\u3001T.Lavril\u3001J.\u674e\u3001\u674e\u3001\u9c81\u3001\u6bdb\u3001\u9a6c\u8482\u5185\u7279\u3001\u7c73\u54c8\u4f0a\u6d1b\u592b\u3001\u7c73\u4ec0\u62c9\u3001\u83ab\u5229\u5821\u3001\u8042\u3001\u6ce2\u5c14\u987f\u3001\u8d56\u68ee\u65af\u5766\u3001\u9f99\u683c\u3001\u8428\u62c9\u8fea\u3001\u8c22\u5c14\u6ed5\u3001\u5e2d\u5c14\u74e6\u3001\u53f2\u5bc6\u65af\u3001\u8428\u52c3\u62c9\u66fc\u5c3c\u4e9a\u3001\u8c2d\u3001\u5510\u3001\u6cf0\u52d2\u3001\u5a01\u5ec9\u59c6\u65af\u3001\u5173\u3001\u8bb8\u3001\u4e25\u3001\u624e\u7f57\u592b\u3001\u5f20\u3001\u8303\u3001\u574e\u5df4\u675c\u5c14\u3001\u7eb3\u6717\u3001\u7f57\u5fb7\u91cc\u683c\u65af\u3001\u65af\u6258\u4f0a\u5c3c\u514b\u3001\u57c3\u675c\u8bfa\u592b\u548c T.\u590f\u9686\u3002Llama 2\uff1a\u5f00\u653e\u5f0f\u57fa\u7840\u548c\u5fae\u8c03\u7684\u804a\u5929\u6a21\u5f0f\u3002\u7f8e\u56fd\u6ce8\u518c\u4f1a\u8ba1\u5e08\u534f\u4f1a\uff0cabs/2307.092882023b\u3002doi:10.48550/arXiv.2307.09288\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://doi.org/10.48550/arXiv.2307. 09288. A.Vaswani\uff0cN.Shazeer\uff0cN.Parmar\uff0cJ.Uszkoreit\uff0cL.Jones\uff0cA.N.Gomez\uff0c\u0141\u3002\u51ef\u6492\u548cI.\u6ce2\u7f57\u82cf\u6b23\u3002\u6ce8\u610f\u529b\u662f\u4f60\u6240\u9700\u8981\u7684\u3002\u300a\u00ac\u795e\u7ecf\u4fe1\u606f\u5904\u7406\u7cfb\u7edf\u8fdb\u5c55\u300b\uff0c2017\u5e74\u7b2c30\u671f\u3002 \u738b\uff0c\u674e\uff0c\u97e9\uff0c\u7eb3\u79d1\u592b\uff0c\u9c8d\u5fb7\u6e29\u3002\u4e0d\u8981\u56de\u7b54\uff1a\u7528\u4e8e\u8bc4\u4f30llms\u4e2d\u5b89\u5168\u63aa\u65bd\u7684\u6570\u636e\u96c6\u3002\u7f8e\u56fd\u6ce8\u518c\u4f1a\u8ba1\u5e08\u534f\u4f1a\uff0cabs/2308.13387\uff0c2023\u5e74\u3002doi:10.48550/ARXIV.2308.13387\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://doi.org/10.48550/arXiv.2308.13387. \u9b4f\u3001\u738b\u3001\u8212\u5c14\u66fc\u3001\u535a\u65af\u9a6c\u3001\u4f0a\u514b\u7279\u3001\u590f\u3001\u8fdf\u3001\u4e50\u3001\u5468\u3002\u601d\u7ef4\u94fe\u63d0\u793a\u5728\u5927\u578b\u8bed\u8a00\u6a21\u578b\u4e2d\u5f15\u53d1\u63a8\u7406\u3002\u5728NeurIPS\uff0c2022\u5e74\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740http://papers.nips.cc/paper_files/paper/2022/hash/9d5609613524ecf4f15af0f7b31abca4-\u6458\u8981\u4f1a\u8bae.html\u3002 \u9b4f\uff0c\u683e\uff0c\u5218\uff0c\u8463\uff0c\u738b\u3002Cmath\uff1a\u4f60\u7684\u8bed\u8a00\u6a21\u578b\u80fd\u901a\u8fc7\u4e2d\u56fd\u5c0f\u5b66\u6570\u5b66\u8003\u8bd5\u5417\uff1f\uff0c2023. L.Xu\uff0cH.Hu\uff0cX.Zhang\uff0cL.Li\uff0cC.Cao\uff0cY.Li\uff0cY.Xu\uff0cK.Sun\uff0cD.Yu\uff0cC.Yu\uff0cY.Tian\uff0cQ.Dong\uff0cW.Liu\uff0cB.Shi\uff0cY.Cui\uff0cJ.Li\uff0cJ.Zeng\uff0cR.Wang\uff0cW.Xie\uff0cY.Lii\uff0cY.Patterson\uff0cZ.Tian\uff0cY.Zhang\u3002CLUE\uff1a\u6c49\u00ac\u8bed\u7406\u89e3\u8bc4\u4f30\u57fa\u51c6\u3002D.Scott\u3001N.Bel\u548cC.Zong\u4e3b\u7f16\uff0c\u300a\u7b2c28\u5c4a\u56fd\u9645\u8ba1\u7b97\u8bed\u8a00\u5b66\u4f1a\u8bae\u8bba\u6587\u96c6\u300b\uff0cCOLING 2020\uff0c\u897f\u73ed\u7259\u5df4\u585e\u7f57\u90a3\uff08\u5728\u7ebf\uff09\uff0c2020\u5e7412\u67088\u65e5\u81f313\u65e5\uff0c\u7b2c4762-4772\u9875\u3002\u56fd\u9645\u8ba1\u7b97\u8bed\u8a00\u5b66\u59d4\u5458\u4f1a\uff0c2020\u5e74\u3002\u7535\u8bdd\uff1a10.18653/V1/2020\uff0c\u5317\u4eac\u5e02\u671d\u9633\u533a419\u53f7\u3002URL\u3002\u00ac A.\u6768\uff0cB.\u8096\uff0cB.\u738b\uff0cB.\u5f20\uff0cC.\u5c39\uff0cC.\u5415\uff0cD.\u6f58\uff0cD.\u738b\uff0cD.\u4e25\uff0cF.\u6768\uff0cF.\u9093\uff0cF.\u738b\uff0cF.\u5218\uff0cG.\u827e\uff0cG.\u8463\uff0cH.\u8d75\uff0cH.\u5f90\uff0cH.\u5b59\uff0cH.\u5f20\uff0cH.\u5218\uff0cJ.\u5409\uff0cJ.\u8c22\uff0cJ.\u6234\uff0c</p> <p>\u65b9\uff0c\u82cf\uff0c\u5b8b\uff0c\u5218\uff0c\u5982\uff0c\u9a6c\uff0c\u738b\uff0c\u5218\uff0c\u6797\uff0c\u8042\uff0c\u90ed\uff0c\u5b59\uff0c\u5f20\uff0c\u674e\uff0c\u674e\uff0c\u7a0b\uff0c\u9648\uff0c\u66fe\uff0c\u738b\uff0c\u9648\uff0c\u95e8\uff0c \u4f59\uff0c\u6f58\uff0c\u6c88\uff0c\u738b\uff0c\u674e\uff0c\u6c5f\uff0c\u9ad8\uff0c\u5f20\uff0c\u5468\uff0c\u5434\u3002\u767e\u5ddd2\uff1a\u5f00\u653e\u5927\u89c4\u6a21\u8bed\u8a00\u6a21\u578b\u3002\u6280\u672f\u62a5\u544a\uff0c\u767e\u5ddd\u80a1\u4efd\u6709\u9650\u516c\u53f8\uff0c2023\u5e74\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://cdn.baichuan-ai.com/paper/Baichuan2-technical-report.pdf. \u4f59\u3001\u6c5f\u3001\u77f3\u3001\u4f59\u3001\u5218\u3001\u5f20\u3001\u90ed\u3001\u674e\u3001\u97e6\u52d2\u3001\u5218\u3002Metamath\uff1a\u4e3a\u5927\u578b\u8bed\u8a00\u6a21\u578b\u5f15\u5bfc\u81ea\u5df1\u7684\u6570\u5b66\u95ee\u9898\u3002\u7f8e\u56fd\u6ce8\u518c\u4f1a\u8ba1\u5e08\u534f\u4f1a\uff0cabs/2309.12284\uff0c2023\u5e74\u3002doi:10.48550/ARXIV.2309.12284\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://doi.org/10.48550/arXiv.2309.12284\u3002 R.Zellers\u3001A.Holtzman\u3001Y.Bisk\u3001A.Farhadi\u548cY.Choi\u3002HellaSwag\uff1a\u673a\u5668\u771f\u7684\u80fd\u5b8c\u6210\u4f60\u7684\u53e5\u5b50\u5417\uff1fA.Korhonen\u3001D.R.Traum\u548cL.M\u00e0rquez\uff0c\u7f16\u8f91\uff0c\u300a\u8ba1\u7b97\u8bed\u8a00\u5b66\u534f\u4f1a\u7b2c57\u5c4a\u4f1a\u8bae\u8bba\u6587\u96c6\u300b\uff0cACL 2019\uff0c\u610f\u5927\u5229\u4f5b\u7f57\u4f26\u8428\uff0c2019\u5e747\u670828\u65e5\u81f38\u67082\u65e5\uff0c\u7b2c1\u5377\uff1a\u957f\u7bc7\u8bba\u6587\uff0c\u7b2c4791-4800\u9875\u3002\u8ba1\u7b97\u8bed\u8a00\u5b66\u534f\u4f1a\uff0c2019\u5e74\u3002doi:10.18653/v1/p19-1472\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://doi.org/10.18653/v1/p1 9-1472. B.\u5f20\u548cR.\u68ee\u91cc\u5947\u3002\u5747\u65b9\u6839\u5c42\u5f52\u4e00\u5316\u3002\u300a\u795e\u7ecf\u4fe1\u606f\u5904\u7406\u7cfb\u7edf\u8fdb\u5c55\u300b\uff0c2019\u5e74\u7b2c32\u671f\u3002 G.\u5f20\u3001\u674e\u3001Z.Nado\u3001J.Martens\u3001S.Sachdeva\u3001G.Dahl\u3001C.Shallue\u548cR.B.Grosse\u3002\u5728\u4f55\u79cd\u6279\u91cf\u4e0b\uff0c\u54ea\u4e9b\u7b97\u6cd5\u9009\u62e9\u5f88\u91cd\u8981\uff1f\u6765\u81ea\u566a\u58f0\u4e8c\u6b21\u6a21\u578b\u7684\u89c1\u89e3\u3002\u300a\u795e\u7ecf\u4fe1\u606f\u5904\u7406\u7cfb\u7edf\u8fdb\u5c55\u300b\uff0c2019\u5e74\u7b2c32\u671f\u3002 C.\u90d1\u3001\u9ec4\u3001\u5b59\u3002Chid\uff1a\u7528\u4e8e\u5b8c\u5f62\u586b\u7a7a\u6d4b\u8bd5\u7684\u5927\u89c4\u6a21\u6c49\u8bed\u6210\u8bed\u6570\u636e\u96c6\u3002In 1 Korhonen\u3001D.R.Traum\u548cL.M\u00e0rquez\uff0c\u7f16\u8f91\uff0c\u300a\u8ba1\u7b97\u8bed\u8a00\u5b66\u534f\u4f1a\u7b2c57\u5c4a\u4f1a\u8bae\u8bba\u6587\u96c6\u300b\uff0cACL 2019\uff0c\u610f\u5927\u5229\u4f5b\u7f57\u4f26\u8428\uff0c2019\u5e747\u670828\u65e5\u81f38\u67082\u65e5\uff0c\u7b2c1\u5377\uff1a\u957f\u7bc7\u8bba\u6587\uff0c\u7b2c778-787\u9875\u3002\u8ba1\u7b97\u8bed\u8a00\u5b66\u534f\u4f1a\uff0c2019\u5e74\u3002doi:10.18653/V1/P19-1075\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://doi.org/10.18653/v1/p19-1075. \u90d1\u3001\u848b\u3001\u76db\u3001\u5e84\u3001\u5434\u3001\u5e84\u3001\u6797\u3001\u674e\u3001\u674e\u3001\u90a2\u3001\u5f20\u3001\u5188\u8428\u96f7\u65af\u3001\u65af\u591a\u845b\u3002\u5728mt\u677f\u51f3\u548c\u804a\u5929\u673a\u5668\u4eba\u7ade\u6280\u573a\u62c5\u4efb\u88c1\u5224\u30022023. \u949f\uff0c\u5d14\uff0c\u90ed\uff0c\u6881\uff0c\u9646\uff0c\u738b\uff0c\u8d5b\u4e49\u5fb7\uff0c\u9648\uff0c\u6bb5\u3002AGIEval\uff1a\u4e00\u4e2a\u4ee5\u4eba\u4e3a\u4e2d\u5fc3\u7684\u57fa\u51c6\uff0c\u7528\u4e8e\u8bc4\u4f30\u57fa\u7840\u6a21\u578b\u3002\u7f8e\u56fd\u6ce8\u518c\u4f1a\u8ba1\u5e08\u534f\u4f1a\uff0cabs/2304.063642023\u3002doi:10.48550/arXiv.2304.06364\u3002\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u5730\u5740https://doi.org/10.48550/arXiv.2304.06364. \u5468\uff0c\u9646\uff0c\u7c73\u4ec0\u62c9\uff0c\u68b5\u5929\uff0c\u5df4\u82cf\uff0c\u683e\uff0c\u5468\uff0c\u4faf\u3002\u5927\u578b\u8bed\u8a00\u6a21\u578b\u8bc4\u4f30\u540e\u7684\u8bf4\u660e\u3002arXiv\u9884\u5370\u672carXiv:2311.0791112023\u3002</p> <p>1 \u9644\u5f55 1.1 \u81f4\u8c22 \u8fd9\u4e2a\u9879\u76ee\u662f\u5728\u4f17\u591a\u8d21\u732e\u8005\u7684\u52aa\u529b\u4e0b\u5b9e\u73b0\u7684\u3002\u6211\u4eec\u8877\u5fc3\u611f\u8c22\u4ee5\u4e0b\u4eba\u58eb\u7684\u5e2e\u52a91\uff1a</p> <p>\u2022   \u6570\u636e\u6ce8\u91ca\u7ec4\uff1a\u8521\u5609\u7490\u3001\u9648\u745e\u5efa\u3001\u9648\u6c5d\u4e49\u3001\u51af\u84d3\u3001\u9ec4\u5ef6\u5e73\u3001\u9ec4\u9707\u3001\u59dc\u5e73\u3001\u91d1\u8363\u7acb\u3001\u91d1\u5411\u5cb3\u3001\u67ef\u5b50\u4e91\u3001\u674e\u8f89\u3001\u674e\u68a6\u4e3d\u3001\u674e\u6851\u751f\u3001\u674e\u5c0f\u5029\u3001\u674e\u8000\u8f89\u3001\u9a6c\u4e91\u8d24\u3001\u502a\u5609\u742a\u3001\u6c88\u5c0f\u91d1\u3001\u5b8b\u65b0\u6960\u3001\u5b59\u5929\u5b87\u3001\u9648\u5c0f\u6c99\u3001\u7530\u6d69\u6e90\u3001\u738b\u5c0f\u6db5\u3001\u738b\u6653\u7965\u3001\u738b\u7389\u6d69\u3001\u590f\u51e1\u6021\u3001\u5f90\u78ca\u3001\u5f90\u6cfd\u6e90\u3001\u5f90\u5fd7\u9e4f\u3001\u5f90\u5929\u5143\u3001\u5f20\u5fe0\u79b9\u3001\u90d1\u6bc5\u3001\u5468\u53cc\u559c\u3001\u5468\u6b23\u6021\u3001\u6731\u96e8\u8fb0\u3001\u6731\u96e8\u8431\u3002 \u2022   \u5408\u89c4\u56e2\u961f\uff1a\u91d1\u6668\u3001\u5510\u9896\u3001\u738b\u5999\u519b\u3001\u738b\u663e\u7956\u3001\u5434\u5c11\u9752\u3001\u590f\u4e50\u4e49\u3001\u8096\u3002 \u2022   \u4e1a\u52a1\u56e2\u961f\uff1a\u6881\u5065\u3001\u674e\u660e\u660e\u3001\u738b\u3001\u738b\u663e\u7956\u3001\u6e29\u5fd7\u725b\u3001\u53f6\u80dc\u5cf0\u3001\u5f20\u9e4f\u3001\u5f20\u9707\u3002 \u2022 \u8bbe\u8ba1\u56e2\u961f\uff1a\u9b4f\u5b89\u3001\u7fdf\u7389\u5764\u3002</p> <p>1.2 \u4e0d\u540c\u7684\u6a21\u578b\u6bd4\u4f8b\u8868\u793a \u6211\u4eec\u91cd\u65b0\u8c03\u6574\u4e86\u4e0d\u540c\u6a21\u578b\u6bd4\u4f8b\u8868\u793a\u7684\u6bd4\u4f8b\u66f2\u7ebf\uff0c\u91cd\u7528\u4e86IsoFLOP\u5256\u9762\u4e2d\u7684\u5b9e\u9a8c\u3002\u6211\u4eec\u4f7f\u75286\u91cd\u65b0\u8ba1\u7b97\u4e86\u8ba1\u7b97FLOP\ud835\udc411 and 6\ud835\udc412 \u4f5c\u4e3a\u6a21\u578b\u6bd4\u4f8b\u8868\u793a\uff0c\u5e76\u91cd\u65b0\u62df\u5408\u4e86\u6027\u80fd\u6bd4\u4f8b\u66f2\u7ebf\u3002\u5982\u56fe6\u6240\u793a\uff0c\u7ed3\u679c\u8868\u660e\uff0c\u5728\u8f83\u9ad8\u7684\u8ba1\u7b97\u9884\u7b97\u4e0b\uff0c\u8fd9\u4e09\u79cd\u8868\u793a\u4e4b\u95f4\u7684\u6700\u4f18\u6a21\u578b/\u6570\u636e\u5206\u914d\u504f\u5dee\u5e76\u4e0d\u663e\u8457\uff0c\u4f46\u5728\u8f83\u4f4e\u7684\u9884\u7b97\u4e0b\u5b58\u5728\u660e\u663e\u5dee\u5f02\u3002</p> <p>\uff08a\uff09 \u8ba1\u7b97\u9884\u7b97\ud835\udc36 = 6\ud835\udc411 \ud835\udc37   \uff08b\uff09 \u8ba1\u7b97\u9884\u7b97\ud835\udc36 = 6\ud835\udc412 \ud835\udc37   \uff08c\uff09 \u8ba1\u7b97\u9884\u7b97\ud835\udc36 = \ud835\udc40\ud835\udc37</p> <p>\u56fe6 |\u4f7f\u7528\u4e0d\u540c\u6a21\u578b\u6bd4\u4f8b\u8868\u793a\u7684\u6027\u80fd\u7f29\u653e\u66f2\u7ebf\u3002\u5ea6\u91cf\u662f\u9a8c\u8bc1\u96c6\u4e0a\u7684\u6bcf\u5b57\u8282\u6bd4\u7279\u6570\u3002\u865a\u7ebf\u8868\u793a\u9002\u5408\u8f83\u5c0f\u6a21\u578b\u7684\u5e42\u5f8b\uff08\u7070\u8272\u5706\u5708\uff09\u3002\u84dd\u8272\u6052\u661f\u4ee3\u8868DeepSeek LLM 7B\u548c67B\u3002\ud835\udc411, \ud835\udc412, and \ud835\udc40 \u5206\u522b\u8868\u793a\u6a21\u578b\u7684\u975e\u5d4c\u5165\u53c2\u6570\u3001\u5b8c\u6574\u53c2\u6570\u548c\u975e\u5d4c\u5165FLOP/\u4ee4\u724c\u3002</p> <p>\u5f53\u4f7f\u75286\ud835\udc411 \u4f5c\u4e3a\u6a21\u578b\u5c3a\u5ea6\u8868\u793a\uff0c\u62df\u5408\u7684\u6027\u80fd\u5c3a\u5ea6\u66f2\u7ebf\u5f80\u5f80\u9ad8\u4f30\u4e86\u5927\u89c4\u6a21\u6a21\u578b\u7684\u6027\u80fd\u3002\u76f8\u53cd\uff0c\u5f53\u4f7f\u75286\ud835\udc412, \u8fd9\u4e2a</p> <p>1\u4f5c\u8005\u6309\u59d3\u6c0f\u7684\u5b57\u6bcd\u987a\u5e8f\u6392\u5217\u3002 \u66f2\u7ebf\u5f80\u5f80\u4f4e\u4f30\u4e86\u4ed6\u4eec\u7684\u8868\u73b0\u3002\u4f7f\u7528\ud835\udc40 \u7136\u800c\uff0c\u7531\u4e8e\u6a21\u578b\u5c3a\u5ea6\u8868\u793a\u5b9e\u73b0\u4e86\u6700\u51c6\u786e\u7684\u9884\u6d4b\u3002</p> <p>1.3 \u57fa\u51c6\u6307\u6807\u66f2\u7ebf</p> <p>\u56fe7|DeepSeek LLM Base\u7684\u57fa\u51c6\u6307\u6807\u66f2\u7ebf\u3002ChineseQA\u662f\u6211\u4eec\u7684\u5185\u90e8\u6d4b\u8bd5\u96c6\uff0c\u5176\u6784\u5efa\u65b9\u5f0f\u7c7b\u4f3c\u4e8eTriviaQA\u3002</p> <p>\u56fe7\u663e\u793a\u4e86\u4e0d\u540c\u8bad\u7ec3\u6b65\u9aa4\u7684\u57fa\u51c6\u5ea6\u91cf\u66f2\u7ebf\u3002\u4ece\u8bad\u7ec3\u5f00\u59cb\u5230\u7ed3\u675f\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u8fd9\u4e9b\u57fa\u51c6\u7684\u6301\u7eed\u6539\u8fdb\u3002\u6211\u4eec\u76f8\u4fe1\uff0c\u5982\u679c\u8bad\u7ec3\u7ee7\u7eed\u4e0b\u53bb\uff0c\u6210\u7ee9\u4f1a\u8fdb\u4e00\u6b65\u63d0\u9ad8\u3002\u00ac</p> <p>HumanEval Python    \u591a\u8bed\u8a00</p> <p>\u9884\u8bad\u7ec3\u6a21\u578b \u4ee3\u7801-001  -   33.5%   26.1%   45.9% StarCoder   16B 36.0%   28.7%   46.8% CodeGeeX2   6B  36.0%   24.5%   42.4% CodeLlama   7B  31.7%   29.2%   41.6% CodeLlama   13B 36.0%   35.4%   48.4% CodeLlama   34B 48.2%   41.0 %  55.2% DeepSeek\u6cd5\u5b66\u7855\u58eb\u57fa\u5730  67B 42.7%   37.2%   57.4% \u6307\u4ee4\u8c03\u6574\u6a21\u578b \u5411\u5bfc\u7f16\u7801\u5668   34B 73.2%   48.8%   61.2% DeepSeek LLM\u804a\u5929  67B 73.8%   53.3%   61.4% \u886815 |\u4e0e\u7279\u5b9a\u4ee3\u7801\u6a21\u578b\u7684\u6bd4\u8f83\u3002</p> <p>1.4 \u4e0e\u4ee3\u7801\u6216\u6570\u5b66\u7279\u5b9a\u6a21\u578b\u7684\u6bd4\u8f83 \u6211\u4eec\u5bf9\u6211\u4eec\u7684\u6a21\u578b\u548c\u7279\u5b9a\u7684\u4ee3\u7801\u548c\u6570\u5b66\u8bed\u8a00\u6a21\u578b\uff08LLM\uff09\u8fdb\u884c\u4e86\u6bd4\u8f83\u3002\u886815\u8868\u660e\uff0cDeepSeek LLM 67B\u80fd\u591f\u5b9e\u73b0\u4e0eCodeLlama\u7c7b\u4f3c\u7684\u6027\u80fd\uff0c\u5c3d\u7ba1\u53ef\u4ee5\u8bbf\u95ee\u66f4\u5c11\u7684\u4ee3\u7801\u6570\u636e\u3002\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0cDeepSeek LLM\u5728\u4ee3\u7801\u4ee5\u5916\u7684\u9886\u57df\u5177\u6709\u66f4\u5927\u7684\u80fd\u529b\u3002 \u540c\u6837\uff0c\u886816\u663e\u793a\u4e86\u4ece\u5404\u79cd\u6570\u5b66\u76f8\u5173\u57fa\u51c6\u83b7\u5f97\u7684\u7ed3\u679c\uff0c\u5982GSM8K\uff08Cobbe\u7b49\u4eba\uff0c2021\uff09\u3001math\uff08Hendrycks\u7b49\u4eba\uff0c2021\u5e74\uff09\u3001MGSM zh\uff08i\u7b49\u4eba\uff0c2023\u5e74\uff09\u548cCMath\uff08Wei\u7b49\u4eba\uff0c2023\uff09\u3002DeepSeek 67B\u5728\u4e0d\u540c\u8bed\u8a00\u7684\u6570\u5b66\u76f8\u5173\u4efb\u52a1\u4e0a\u8868\u73b0\u51fa\u8272\uff0c\u5c55\u793a\u4e86\u5b83\u5728\u8fd9\u4e00\u9886\u57df\u7684\u4f18\u52bf\u3002\u6b64\u5916\uff0cDeepSeek LLM\u53ef\u4ee5\u5229\u7528\u7a0b\u5e8f\u6765\u89e3\u51b3\u6570\u5b66\u95ee\u9898\uff0c\u8fd9\u6bd4\u601d\u7ef4\u94fe\u8868\u73b0\u5f97\u66f4\u597d\u3002\u5728\u57fa\u51c6\u6d4b\u8bd5\u4e2d\uff0c\u5b83\u660e\u663e\u4f18\u4e8e\u4e4b\u524d\u7684SOTA\u6a21\u578bToRA\uff08Gou\u7b49\u4eba\uff0c2023\uff09\u3002</p> <p>\u63a8\u65ad  GSM8KATHMGSM        zhCMath</p> <p>\u601d\u7ef4\u94fe MetaMath 70B\uff08Yu\u7b49\u4eba\uff0c2023\uff09 CoT 82.3%   26.6%   66.4%   70.9% WizardMath 70B\uff08Luo\u7b49\u4eba\uff0c2023\uff09  CoT 81.6%   22.7%   64.8%   65.4% DeepSeek LLM 67B\u804a\u5929  CoT 84.1%   32.6 %  74.0%   80.3% \u5de5\u5177\u96c6\u6210\u63a8\u7406 ToRA\u4ee3\u780134B\uff08Gou\u7b49\u4eba\uff0c2023\uff09   \u5de5\u5177\u96c6\u6210    80.7%   50.8%   41.2%   53.4% DeepSeek LLM 67B\u804a\u5929  \u5de5\u5177\u96c6\u6210    86.7%   51.1%   76.4%   85.4% \u886816 |\u4e0e\u6570\u5b66\u7279\u5b9a\u6a21\u578b\u7684\u6bd4\u8f83\u3002</p> <p>1.5 DPO\u9636\u6bb5\u57fa\u51c6\u7ed3\u679c \u886817\u663e\u793a\u4e86DPO\u9636\u6bb5\u83b7\u5f97\u7684\u57fa\u51c6\u7ed3\u679c\u3002\u57fa\u4e8e\u8fd9\u4e9b\u7ed3\u679c\uff0c\u6211\u4eec\u53ef\u4ee5\u5f97\u51fa\u7ed3\u8bba\uff0cDPO\u9636\u6bb5\u4e0d\u4f1a\u663e\u8457\u5f71\u54cdLLM\u7684\u57fa\u672c\u80fd\u529b\u3002</p> Text Only<pre><code>DeepSeek 67B\u804a\u5929  DeepSeek 67B\u804a\u5929DPO\n</code></pre> <p>HellaSwag   75.7    76.1 TriviaQA    81.5    82.9 \u81ea\u7136\u95ee\u9898    47.0    48.8 MMLU    71.1    70.9 GSM8K   84.1    85.2 \u6570\u5b66  32.6    30.2 HumanEval   73.8    71.3 BBH 71.7    70.8 AGIEval 46.4    46.1 CEval   65.2    64.3 CMMLU   67.8    68.2 \u886817 | DPO\u9636\u6bb5\u524d\u540e\u7684\u57fa\u51c6\u6307\u6807\u3002</p> <p>1.6 \u8bc4\u4f30\u683c\u5f0f \u886818-\u886840\u5c55\u793a\u4e86\u6211\u4eec\u5728\u4e0d\u540c\u57fa\u51c6\u4e0a\u7684\u8bc4\u4f30\u683c\u5f0f\u793a\u4f8b\u3002</p> <p>\u63d0\u793a \u4ee5\u4e0b\u662f\u4e00\u9053\u4e2d\u56fd\u9ad8\u8003\u751f\u7269\u9009\u62e9\u9898\uff0c\u8bf7\u9009\u62e9\u6b63\u786e\u7684\u7b54\u6848\u3002 \u95ee\u9898\uff1a\u4e0b\u5217\u6709\u5173\u9ad8\u5c14\u57fa\u4f53\u3001\u7ebf\u7c92\u4f53\u548c\u53f6\u7eff\u4f53\u7684\u53d9\u8ff0, \u6b63\u786e\u7684\u662f\u9009\u9879\uff1a(A)\u4e09\u8005\u90fd \u5b58\u5728\u4e8e\u84dd\u85fb\u4e2d(B)\u4e09\u8005\u90fd\u542b\u6709DNA\uff08C\uff09\u4e09\u8005\u90fd\u662fATP \u5408\u6210\u7684\u573a\u6240(D)\u4e09\u8005\u7684\u819c\u7ed3 \u6784\u4e2d\u90fd\u542b\u6709\u86cb\u767d\u8d28 \u7b54\u6848\uff1a\u4eceA\u5230D, \u6211\u4eec\u5e94\u9009\u62e9 \u886818 | AGIEval\u793a\u4f8b\u3002</p> <p>\u63d0\u793a \u95ee\u9898\uff1a\u4f7f\u7528\u4ee5\u4e0b\u4fe1\u606f\u56de\u7b54\u95ee\u9898\u3002\u68c9\u82b1\u662f\u4e00\u79cd\u7528\u4e8e\u5236\u9020\u7ec7\u7269\u7684\u690d\u7269\u4ea7\u54c1\u3002\u68c9\u82b1\u662f\u7531\u7ea4\u7ef4\u7d20\u5236\u6210\u7684\uff0c\u7ea4\u7ef4\u7d20\u662f\u4e00\u79cd\u4eba\u7c7b\u4e0d\u6613\u6d88\u5316\u7684\u7ea4\u7ef4\u3002\u7ea4\u7ef4\u7d20\u662f\u7531\u8bb8\u591a\u7cd6\u5206\u5b50\u7ed3\u5408\u6210\u957f\u94fe\u7ec4\u6210\u7684\u3002\u6bcf\u4e2a\u7cd6\u5206\u5b50\u90fd\u542b\u6709\u78b3\u3001\u6c22\u548c\u6c27\u539f\u5b50\u3002\u68c9\u7ec7\u7269\u6d17\u6da4\u65f6\uff0c\u7ecf\u5e38\u4f1a\u5f62\u6210\u76b1\u7eb9\u3002\u670d\u88c5\u884c\u4e1a\u4f7f\u7528\u5316\u5b66\u7269\u8d28\u5236\u9020\u4e00\u4e9b\u65e0\u76b1\u7eb9\u7684\u68c9\u7ec7\u7269\u3002\u67d3\u6599\u4e5f\u88ab\u6dfb\u52a0\u5230\u68c9\u82b1\u4e2d\u7684\u7ea4\u7ef4\u7d20\u7ea4\u7ef4\u4e0a\u3002\u670d\u88c5\u5236\u9020\u5546\u5982\u4f55\u533a\u5206\u989c\u8272\u4ee5\u786e\u5b9a\u67d3\u6599\u7684\u7eaf\u5ea6\uff1f \u7b54\u6848\uff1a</p> <p>\u9009\u9879 - \u901a\u8fc7\u8fc7\u6ee4 - \u6839\u636e\u5b83\u4eec\u7684\u6cb8\u70b9 - \u6839\u636e\u5b83\u4eec\u7684\u51b0\u70b9 - \u901a\u8fc7\u7eb8\u5c42\u6790</p> <p>\u886819|ARC\u793a\u4f8b\u3002</p> <p>\u63d0\u793a \u8ba1\u7b97\u968f\u673a\u5e03\u5c14\u8868\u8fbe\u5f0f\u7684\u7ed3\u679c\u3002</p> <p>Q\uff1a not\uff08not True\uff09\u662fA\uff1a\u8ba9\u6211\u4eec\u4e00\u6b65\u4e00\u6b65\u5730\u601d\u8003\u3002 \u8bf7\u8bb0\u4f4f\uff1a\uff08i\uff09\u62ec\u53f7\u5185\u7684\u8868\u8fbe\u5f0f\u603b\u662f\u5148\u6c42\u503c\uff0c\uff08ii\uff09\u4ece\u6700\u9ad8\u4f18\u5148\u7ea7\u5230\u6700\u4f4e\u4f18\u5148\u7ea7\u7684\u64cd\u4f5c\u987a\u5e8f\u5206\u522b\u662f\u201cnot\u201d\u3001\u201cand\u201d\u3001\u201cor\u201d\u3002\u6211\u4eec\u9996\u5148\u5c06\u8868\u8fbe\u5f0f\u201cZ\u201d\u7b80\u5316\u5982\u4e0b\uff1a\u201cZ=not\uff08not True\uff09=not\uff08\uff08A\uff09\uff09\u201d\uff0c\u5176\u4e2d\u201cA=not True\u201d\u3002\u8ba9\u6211\u4eec\u8ba1\u7b97A:A=not True=not\uff08not True\uff09=not False=True\u3002\u63d2\u5165A\uff0c\u6211\u4eec\u5f97\u5230\uff1aZ=not\uff08\uff08A\uff09\uff09=not\uff08\uff08True\uff09\uff09=notTrue=False\u3002\u6240\u4ee5\u7b54\u6848\u662f\u5047\u7684\u3002</p> <p>Q\uff1a A\uff1a\u8ba9\u6211\u4eec\u4e00\u6b65\u4e00\u6b65\u5730\u601d\u8003\u3002 \u8bf7\u8bb0\u4f4f\uff1a\uff08i\uff09\u62ec\u53f7\u5185\u7684\u8868\u8fbe\u5f0f\u603b\u662f\u5148\u6c42\u503c\uff0c\uff08ii\uff09\u4ece\u6700\u9ad8\u4f18\u5148\u7ea7\u5230\u6700\u4f4e\u4f18\u5148\u7ea7\u7684\u64cd\u4f5c\u987a\u5e8f\u5206\u522b\u662f\u201cnot\u201d\u3001\u201cand\u201d\u3001\u201cor\u201d\u3002\u6211\u4eec\u9996\u5148\u5c06\u8868\u8fbe\u5f0f\u201cZ\u201d\u7b80\u5316\u5982\u4e0b\uff1a\u201cZ=\u771f\u548c\u5047\uff0c\u800c\u4e0d\u662f\u771f\u548c\u771f=A\u548cB\u201d\uff0c\u5176\u4e2d\u201cA=\u771f\u548c\u5047\u7684\u201d\u548c\u201cB=\u975e\u771f\u548c\u771f\u201d\u3002\u8ba9\u6211\u4eec\u8ba1\u7b97A:A=\u771f\uff0cFalse=\u5047\u3002\u8ba9\u6211\u4eec\u8ba1\u7b97B:B=not True\u548cTrue=not\uff08True\u548cTrue\uff09=not\uff08True\uff09=False\u3002\u63d2\u5165A\u548cB\uff0c\u6211\u4eec\u5f97\u5230\uff1aZ=A\u548cB=False\u548cFalse=False\u3002\u6240\u4ee5\u7b54\u6848\u662f\u5047\u7684\u3002</p> <p>Q\uff1a not not\uff08not\uff08False\uff09\uff09\u662fA\uff1a\u8ba9\u6211\u4eec\u4e00\u6b65\u4e00\u6b65\u5730\u601d\u8003\u3002 \u8bf7\u8bb0\u4f4f\uff1a\uff08i\uff09\u62ec\u53f7\u5185\u7684\u8868\u8fbe\u5f0f\u603b\u662f\u5148\u6c42\u503c\uff0c\uff08ii\uff09\u4ece\u6700\u9ad8\u4f18\u5148\u7ea7\u5230\u6700\u4f4e\u4f18\u5148\u7ea7\u7684\u64cd\u4f5c\u987a\u5e8f\u5206\u522b\u662f\u201cnot\u201d\u3001\u201cand\u201d\u3001\u201cor\u201d\u3002\u6211\u4eec\u9996\u5148\u5c06\u8fd9\u4e2a\u8868\u8fbe\u5f0f\u201cZ\u201d\u7b80\u5316\u5982\u4e0b\uff1a\u201cZ=not\uff08not\uff08False\uff09\uff09=not\uff08A\uff09\u201d\uff0c\u5176\u4e2d\u201cA=not\uff08False\uff09\u201d\u3002\u8ba9\u6211\u4eec\u8ba1\u7b97A:A=not\uff08False\uff09=not False=True\u3002\u63d2\u5165A\uff0c\u6211\u4eec\u5f97\u5230\uff1aZ=not not\uff08A\uff09 =\u4e0d\uff08\u771f\uff09=\u4e0d\u5047=\u771f\u3002\u6240\u4ee5\u7b54\u6848\u662f\u771f\u7684\u3002</p> <p>Q\uff1a A\uff1a\u8ba9\u6211\u4eec\u4e00\u6b65\u4e00\u6b65\u5730\u601d\u8003\u3002</p> <p>\u886820|BBH\u793a\u4f8b\u3002</p> <p>\u63d0\u793a \u4ee5\u4e0b\u662f\u4e2d\u56fd\u5173\u4e8e\u6559\u80b2\u5b66\u8003\u8bd5\u7684\u5355\u9879\u9009\u62e9\u9898\uff0c\u8bf7\u9009\u51fa\u5176\u4e2d\u7684\u6b63\u786e\u7b54\u6848\u3002 \u6839\u636e\u6211\u56fd\u5fc3\u7406\u5b66\u5bb6\u51af\u5fe0\u826f\u6559\u6388\u7684\u5b66\u4e60\u5206\u7c7b\uff0c\u57f9\u517b\u5b66\u751f\u54c1\u5fb7\u8981\u901a\u8fc7    \u3002 1 \u77e5\u8bc6\u7684\u5b66\u4e60 2 \u6280\u80fd\u7684\u5b66\u4e60 3 \u884c\u4e3a\u89c4\u8303\u7684\u5b66\u4e60 4 \u6001\u5ea6\u7684\u5b66\u4e60 \u7b54\u6848\uff1aC \u5f00\u8bbe\u8de8\u5b66\u79d1\u8bfe\u7a0b\u6216\u5efa\u7acb\u8de8\u5b66\u79d1\u4e13\u4e1a\u4f53\u73b0\u4e86\u9ad8\u7b49\u6559\u80b2\u8bfe\u7a0b\u53d1\u5c55\u7684 \u3002 1 \u7efc\u5408\u5316\u8d8b\u52bf 2 \u591a\u6837\u5316\u8d8b\u52bf 3 \u4eba\u6587\u5316\u8d8b\u52bf 4 \u79d1\u5b66\u5316\u8d8b\u52bf \u7b54\u6848\uff1aA. \u5fc3\u667a\u6280\u80fd\u7684\u7279\u70b9\u6709    \u3002 1 \u7269\u8d28\u6027\u3001\u5916\u663e\u6027\u3001\u7b80\u7f29\u6027 2 \u89c2\u5ff5\u6027\u3001\u5185\u6f5c\u6027\u3001\u7b80\u7f29\u6027 3 \u7269\u8d28\u6027\u3001\u5916\u663e\u6027\u3001\u5c55\u5f00\u6027 4 \u89c2\u5ff5\u6027\u3001\u5185\u6f5c\u6027\u3001\u5c55\u5f00\u6027 \u7b54\u6848\uff1aB \u4e0b\u5217\u5173\u4e8e\u5927\u5b66\u751f\u7684\u60c5\u7eea\u4e0e\u7406\u667a\u5173\u7cfb\u7684\u8bf4\u6cd5\u4e2d\u6b63\u786e\u7684\u662f \u3002 1 \u80fd\u51b7\u9759\u63a7\u5236\u81ea\u5df1\u60c5\u7eea 2 \u611f\u60c5\u7528\u4e8b\uff0c\u96be\u4ee5\u7528\u7406\u667a\u63a7\u5236\u60c5\u7eea 3 \u9047\u4e8b\u80fd\u575a\u6301\u81ea\u5df1\u6b63\u786e\u8ba4\u8bc6 4 \u5df2\u53d1\u5c55\u5230\u4e0d\u4e3a\u5c0f\u4e8b\u800c\u53d1\u6012\u548c\u6004\u6c14 \u7b54\u6848\uff1aB \u5728\u5b66\u5b8c\u4e00\u7bc7\u903b\u8f91\u7ed3\u6784\u4e25\u5bc6\u7684\u8bfe\u6587\u4ee5\u540e\uff0c\u52fe\u753b\u51fa\u8bfe\u6587\u7684\u8bba\u70b9\u8bba\u636e\u7684\u903b\u8f91\u5173\u7cfb\u56fe\u4ee5 \u5e2e\u52a9\u7406\u89e3\u548c\u8bb0\u5fc6\u3002\u8fd9\u79cd\u5b66\u4e60\u65b9\u6cd5\u5c5e\u4e8e    \u3002 1 \u7cbe\u7ec6\u52a0\u5de5\u7b56\u7565 2 \u7ec4\u7ec7\u7b56\u7565 3 \u590d\u8ff0\u7b56\u7565 4 \u505a\u7b14\u8bb0\u7b56\u7565 \u7b54\u6848\uff1aB \u6709\u5b66\u8005\u5f3a\u8c03\uff0c\u6559\u80b2\u8981\u6839\u636e\u4e00\u4e2a\u6c11\u65cf\u56fa\u6709\u7684\u7279\u5f81\u6765\u5b9a\uff0c\u8fd9\u79cd\u89c2\u70b9\u4f53\u73b0\u4e86 1 \u751f\u4ea7\u529b\u5bf9\u6559\u80b2\u7684\u5f71\u54cd\u548c\u5236\u7ea6 2 \u653f\u6cbb\u5236\u5ea6\u5bf9\u6559\u80b2\u7684\u5f71\u54cd\u548c\u5236\u7ea6 3 \u6587\u5316\u5bf9\u6559\u80b2\u7684\u5f71\u54cd\u548c\u5236\u7ea6 4 \u7ecf\u6d4e\u5236\u5ea6\u5bf9\u6559\u80b2\u7684\u5f71\u54cd\u548c\u5236\u7ea6 \u7b54\u6848\uff1a \u9009\u9879 - A. - B - C - D</p> <p>\u886821 | C-Eval\u793a\u4f8b\u3002</p> <p>\u63d0\u793a \u5973\uff1a\u8fd9\u4e9b\u836f\u600e\u4e48\u5403? \u7537\uff1a\u4e00\u5929\u4e09\u6b21\uff0c\u4e00\u6b21\u4e24\u7247\u3002 \u8bf7\u6839\u636e\u4e0a\u6587\u56de\u7b54\u95ee\u9898\uff1a \u4ed6\u4eec\u5728\u54ea\u513f? \u7b54\u6848\uff1a \u9009\u9879 - \u5546\u5e97 - \u996d\u5e97 - \u533b\u9662 - \u6559\u5ba4 \u886822| C3\u793a\u4f8b\u3002</p> <p>\u63d0\u793a \u4ee5\u4e0b\u662f\u5c06\u67d0\u53e5\u53e4\u8bd7\u6587\u7ffb\u8bd1\u800c\u6210\u7684\u73b0\u4ee3\u8868\u8ff0\uff1a\u6625\u5929\u5df2\u81f3\uff0c\u4e07\u7269\u590d\u82cf\uff0c\u6625\u98ce\u5982\u4e00\u4f4d\u7f8e\u4e3d\u800c\u53c8\u5fc3\u7075\u624b\u5de7\u7684\u59d1\u5a18\uff0c\u8fc8\u7740\u7ea4\u7ea4\u7ec6\u6b65\u6b3e\u6b3e\u800c\u6765\uff0c\u5979\u6325\u821e\u526a\u5200\uff0c\u5c3d\u60c5\u5730\u5c55\u793a\u90a3\u9ad8\u8d85\u7684\u5973\u5de5\u6280\u5de7\uff0c\u5979\u5148\u88c1\u51fa\u4e86\u67f3\u53f6\uff0c\u968f\u7740\u67f3\u6761\u8885\u8885\u4f9d\u4f9d\u5730\u821e\u8e48\uff0c\u53c8\u88c1\u51fa\u674f\u53f6\uff0c\u6843\u53f6\u3002 \u8be5\u7ffb\u8bd1\u6240\u5bf9\u5e94\u7684\u53e4\u8bd7\u6587\u662f\uff1a \u9009\u9879 - \u6625\u98ce\u9a8b\u5de7\u5982\u7fe6\u5200 - \u526a\u88c1\u65e0\u5de7\u4f3c\u6625\u98ce - \u98ce\u5439\u6028\u6068\u5feb\u5982\u5200 - \u6625\u98ce\u6b32\u64c5\u79cb\u98ce\u5de7</p> <p>\u886823 | CCPM\u793a\u4f8b\u3002</p> <p>\u63d0\u793a Q: \u67d0\u5c0f\u5b66\u5728\u201c\u732e\u7231\u5fc3\u2013\u4e3a\u6c76\u5ddd\u5730\u9707\u533a\u6350\u6b3e\u201d\u6d3b\u52a8\u4e2d\uff0c \u516d\u5e74\u7ea7\u4e94\u4e2a\u73ed\u5171\u6350\u6b3e8000\u5143\uff0c \u5176\u4e2d\u4e00\u73ed\u6350\u6b3e1500\u5143\uff0c \u4e8c\u73ed\u6bd4\u4e00\u73ed\u591a\u6350\u6b3e200\u5143\uff0c \u4e09\u73ed\u6350\u6b3e1600\u5143\uff0c\u56db\u73ed\u4e0e\u4e94\u73ed\u6350\u6b3e\u6570\u4e4b\u6bd4\u662f3\uff1a5\uff0e\u56db\u73ed\u6350\u6b3e\u591a\u5c11\u5143\uff1f A.\u4e00 \u73ed \u6350 \u6b3e1500\u5143 \uff0c \u800c \u4e8c \u73ed \u6bd4 \u4e00 \u73ed \u591a \u6350200\u5143 \uff0c \u6240 \u4ee5 \u4e8c \u73ed \u6350\u6b3e1500+200=1700\u5143\uff0c \u53c8\u77e5\u9053\u516d\u5e74\u7ea7\u4e94\u4e2a\u73ed\u4e00\u5171\u6350\u6b3e8000\u5143\uff0c \u6240\u4ee5\u56db\u73ed\u548c\u4e94\u73ed\u6350\u6b3e\u4e4b\u548c= \u4e00\u5171\u6350\u6b3e- \u4e00\u73ed\u548c\u4e8c\u73ed\u548c\u4e09\u73ed\u6350\u6b3e\u4e4b\u548c\uff0c \u53738000-1500-1700-1600=3200\u5143\uff0c \u800c\u9898\u76ee\u8bf4\u56db\u73ed\u4e0e\u4e94\u73ed\u6350\u6b3e\u6570\u4e4b\u6bd4\u662f3\uff1a5\uff0c \u5219\u56db\u73ed\u6350\u6b3e\u4e863200/(3+5)*3=1200\u5143\u3002\u6240\u4ee5\u7b54\u6848\u662f\uff1a1200\u3002 Q: \u5c0f\u4fca\u5728\u4e1c\u897f\u5927\u9053\u4e0a\u8dd1\u6b65\uff0c\u82e5\u89c4\u5b9a\u5411\u4e1c\u4e3a\u6b63\u3002\u4ed6\u5148\u5411\u4e1c\u8dd1\u4e86800\u7c73\uff0c\u7136\u540e\u53c8\u8dd1 \u4e86\u4e00\u6bb5\u4e4b\u540e\uff0c\u4ed6\u4f4d\u4e8e\u51fa\u53d1\u70b9\u897f\u8fb9100\u7c73\u5904\uff0c\u5c0f\u4fca\u7b2c\u4e8c\u6bb5\u8dd1\u4e86\u591a\u5c11\u7c73\uff1f A.\u5c0f\u4fca\u7b2c\u4e8c\u6bb5\u8dd1\u5b8c\u540e\u4f4d\u4e8e\u51fa\u53d1\u70b9\u897f\u8fb9\uff0c \u6240\u4ee5\u7b2c\u4e8c\u6bb5\u5e94\u8be5\u662f\u5411\u897f\u8dd1\uff0c \u7b2c\u4e8c\u6bb5\u8dd1\u7684\u957f\u5ea6-\u7b2c\u4e00\u6bb5\u8dd1\u7684\u957f\u5ea6=100\uff0c \u7b2c\u4e8c\u6bb5\u8dd1\u4e86100+800=900\u7c73\u3002\u6240\u4ee5\u7b54\u6848\u662f\uff1a900\u3002</p> <p>Q: A\u8f66\u548cB\u8f66\u540c\u65f6\u4ece\u7532\u3001\u4e59\u4e24\u5730\u76f8\u5411\u5f00\u51fa\uff0c\u7ecf\u8fc75\u5c0f\u65f6\u76f8\u9047\uff0e\u7136\u540e\uff0c\u5b83\u4eec\u53c8\u5404\u81ea\u6309\u539f\u901f\u539f\u65b9\u5411\u7ee7\u7eed\u884c\u9a763\u5c0f\u65f6\uff0c\u8fd9\u65f6A\u8f66\u79bb\u4e59\u5730\u8fd8\u6709135\u5343\u7c73\uff0cB\u8f66\u79bb\u7532\u5730\u8fd8\u6709165\u5343\u7c73\uff0e\u7532\u3001\u4e59\u4e24\u5730\u76f8\u8ddd\u591a\u5c11\u5343\u7c73\uff1f A: \u5047\u8bbeA\u8f66\u7684\u901f\u5ea6\u4e3ax\u5343\u7c73\u6bcf\u5c0f\u65f6\uff0cB\u8f66\u7684\u901f\u5ea6\u4e3ay\u5343\u7c73\u6bcf\u5c0f\u65f6\uff0c\u6839\u636e\u800cA\u3001B\u76f8\u9047\u65f6A\u8f66\u884c\u9a76\u4e865\u5c0f\u65f6\uff0cA\u8f66\u884c\u9a763\u5c0f\u65f6\u540e\u79bb\u4e59\u5730\u8fd8\u6709135\u5343\u7c73\uff0cB\u8f66\u884c\u9a763\u5c0f\u65f6\u540e\u8ddd\u79bb\u7532\u5730\u8fd8\u6709165\u5343\u7c73\uff0c\u53ef\u4ee5\u5f97\u5230\u7532\u4e59\u4e24\u5730\u76f8\u8ddd=5x+5y=135+8x=165+8y\u53d8\u6362\u5f97\u5230\uff1a10\uff08x+y\uff09\uff1d300+8\uff08x+y\uff09\u4e8e\u662fx+y=150\u7532\u4e59\u4e24\u5730\u76f8\u8ddd5\uff08x+y\uff09=750\u5343\u7c73\u3002\u6240\u4ee5\u7b54\u6848\u662f\uff1a750\u3002</p> <p>Q\u5728\u4e00\u4e2a\u5e95\u9762\u534a\u5f84\u4e3a10\u5398\u7c73\u7684\u5706\u67f1\u5f62\u5bb9\u5668\u5185\uff0c\u5012\u516510\u5398\u7c73\u6df1\u7684\u6c34\uff0c\u7136\u540e\u5c06\u4e00\u4e2a\u5e95\u9762\u76f4\u5f844\u5398\u7c73\uff0c\u9ad86\u5398\u7c73\u7684\u5706\u9525\u5f62\u94c5\u9524\u653e\u5165\u6c34\u4e2d\uff0c\u5bb9\u5668\u4e2d\u6c34\u9762\u4e0a\u5347\u591a\u5c11\u5398\u7c73\uff1f A.</p> <p>\u886824 | CMATH\u793a\u4f8b\u3002</p> <p>\u63d0\u793a \u4ee5\u4e0b\u662f\u5173\u4e8e\u89e3\u5256\u5b66\u7684\u5355\u9879\u9009\u62e9\u9898\uff0c\u8bf7\u76f4\u63a5\u7ed9\u51fa\u6b63\u786e\u7b54\u6848\u7684\u9009\u9879\u3002 \u9898\u76ee\uff1a\u58c1\u80f8\u819c\u7684\u5206\u90e8\u4e0d\u5305\u62ec 1 \u808b\u80f8\u819c 2 \u80ba\u80f8\u819c 3 \u8188\u80f8\u819c 4 \u80f8\u819c\u9876 \u7b54\u6848\u662f\uff1aB \u9898\u76ee\uff1a\u5c5e\u4e8e\u8776\u9aa8\u4e0a\u7684\u7ed3\u6784\u4e3a 1 \u5782\u4f53\u7a9d 2 \u68d8\u5b54 3 \u7834\u88c2\u5b54 4 \u89c6\u795e\u7ecf\u7ba1\u7b54\u6848\u662f\uff1aB \u9898\u76ee\uff1a\u5c5e\u4e8e\u53f3\u5fc3\u623f\u7684\u7ed3\u6784\u662f 1 \u8089\u67f1 2 \u5ba4\u4e0a\u5d74 3 \u4e73\u5934\u808c 4 \u68b3\u72b6\u808c \u7b54\u6848\u662f\uff1aD \u9898\u76ee\uff1a\u54bd\u7684\u5206\u90e8 1 \u54bd\u9690\u7a9d 2 \u53e3\u54bd\u90e8 3 \u9f3b\u54bd\u90e8 4 \u5589\u54bd\u90e8 \u7b54\u6848\u662f\uff1aC \u9898\u76ee\uff1a\u820c\u4e0b\u795e\u7ecf\u6838\u4f4d\u4e8e 1 \u95f4\u8111 2 \u5ef6\u9ad3 3 \u4e2d\u8111 4 \u8111\u6322 \u7b54\u6848\u662f\uff1aB \u9898\u76ee\uff1a\u4ece\u8111\u5e72\ud83d\udc49\u4fa7\u51fa\u8111\u7684\u8111\u795e\u7ecf\u662f 1 \u526f\u795e\u7ecf 2 \u4e09\u53c9\u795e\u7ecf 3 \u820c\u4e0b\u795e\u7ecf 4 \u6ed1\u8f66\u795e\u7ecf \u7b54\u6848\u662f\uff1a \u9009\u9879 - A. - B - C - D</p> <p>\u886825 | CMMLU\u793a\u4f8b\u3002</p> <p>\u63d0\u793a \u6587\u7ae0\uff1a\u8be5\u5e02\u7684\u5e73\u5747\u5e74\u9f84\u4e3a22.1\u5c81\u300210.1%\u7684\u5c45\u6c11\u5e74\u9f84\u572818\u5c81\u4ee5\u4e0b\uff1b56.2%\u7684\u4eba\u5e74\u9f84\u572818\u81f324\u5c81\u4e4b\u95f4\uff1b16.1%\u662f \u4ece25\u5c81\u523044\u5c81\uff1b45\uff5e64\u5c81\u536010.5%\uff1b7%\u7684\u4eba\u5e74\u9f84\u572865\u5c81\u6216\u4ee5\u4e0a\u3002\u8be5\u5e02\u7684\u6027\u522b\u6784\u6210\u4e3a\u7537\u602764.3%\uff0c\u5973\u602735.7%\u3002</p> <p>\u6839\u636e\u4e0a\u8ff0\u6587\u7ae0\u56de\u7b54\u4ee5\u4e0b\u95ee\u9898\uff0c\u5982\u679c\u9700\u8981\u8ba1\u7b97\uff0c\u8bf7\u4ed4\u7ec6\u8ba1\u7b97\u3002 Q\uff1a \u6709\u591a\u5c11\u767e\u5206\u6bd4\u4e0d\u662f\u4ece25%\u523044%\uff1f A\uff1a \u7b54\u6848\u7c7b\u578b\u4e3a\u6570\u5b57\u3002\u6839\u636e\u4e0a\u8ff0\u6bb5\u843d\uff0c\u7b54\u6848\u4e3a83.9\u3002</p> <p>Q\uff1a \u6709\u591a\u5c11\u767e\u5206\u6bd4\u4e0d\u662f25\u523044\uff1f A\uff1a \u7b54\u6848\u7c7b\u578b\u4e3a\u6570\u5b57\u3002\u56e0\u6b64\uff0c\u6839\u636e\u4e0a\u8ff0\u6bb5\u843d\uff0c\u7b54\u6848\u662f</p> <p>\u886826 | DROP\u793a\u4f8b\u3002</p> <p>\u63d0\u793a \u4e2d\u65b0\u7f5112\u67087\u65e5\u7535\u7efc\u5408\u5916\u5a926\u65e5\u62a5\u9053,\u5728\u7f8e\u56fd\u5f97\u514b\u8428\u65af\u5dde,\u8d1f\u8d23\u6cbb\u7597\u65b0\u51a0\u80ba\u708e\u60a3\u8005\u7684\u533b\u751f\u7ea6\u745f\u592b\u00b7\u74e6\u9686\uff08\u7ea6\u745f\u592b\u00b7\u74e6\u9686\uff09\u5df2\u8fde\u7eed\u4e0a\u73ed\u8d85260\u5929,\u6bcf\u5929\u53ea\u7761\u4e0d\u8d85\u8fc72\u5c0f\u65f6\u3002\u74e6\u9686\u65e5\u524d\u63a5\u53d7\u91c7\u8bbf\u65f6\u547c\u5401,\u7f8e\u56fd\u6c11\u4f17\u5e94\u9075\u4ece\u9632\u75ab\u89c4\u5b9a,\u4e00\u7ebf\u7684\u533b\u62a4\u4eba\u5458\u201c\u5df2</p> <p>\u9009\u9879 - \u795e\u6e05\u6c14\u723d\u201d\u3002 - \u8be1\u8ba1\u591a\u7aef\u201d\u3002 - \u7cbe\u75b2\u529b\u7aed\u201d\u3002 - \u5206\u5de5\u5408\u4f5c\u201d\u3002 - \u5bc5\u5403\u536f\u7cae\u201d\u3002 - \u571f\u8c6a\u52a3\u7ec5\u201d\u3002 - \u82b8\u82b8\u4f17\u751f\u201d\u3002</p> <p>\u886827| CHID\u793a\u4f8b\u3002</p> <p>\u63d0\u793a \u80e1\u96ea\u5ca9\u79bb\u8239\u767b\u5cb8\uff0c\u5750\u8f7f\u8fdb\u57ce\uff0c\u7b49\u738b\u6709\u9f84\u5230\u5bb6\uff0c\u4ed6\u63a5\u7740\u4e5f\u5230\u4e86\u4ed6\u90a3\u91cc\uff0c\u8138\u4e0a\u662f\u63a9 \u6291\u4e0d\u4f4f\u7684\u7b11\u5bb9\uff0c\u738b\u6709\u9f84\u592b\u5987\u90fd\u89c9\u5f97\u5947\u602a\uff0c\u95ee\u4ed6\u4ec0\u4e48\u4e8b\u8fd9\u4e48\u9ad8\u5174\u3002 \u4e0a\u9762\u7684\u53e5\u5b50\u4e2d\u7684\"\u4ed6\"\u6307\u7684\u662f \u80e1\u96ea\u5ca9 \u6e10\u6e10\u5730\uff0c\u6c64\u4e2d\u51dd\u7ed3\u51fa\u4e00\u56e2\u56e2\u5757\u72b6\u7269\uff0c\u5c06\u5b83\u4eec\u635e\u8d77\u653e\u8fdb\u76c6\u91cc\u51b7\u5374\uff0c\u80a5\u7682\u4fbf\u51fa\u73b0\u5728 \u4e16\u4e0a\u4e86\u3002 \u4e0a\u9762\u7684\u53e5\u5b50\u4e2d\u7684\"\u5b83\u4eec\"\u6307\u7684\u662f \u5757\u72b6\u7269</p> <p>\u201c\u5979\u5e8f\u4e0a\u660e\u660e\u5f15\u7740JulesTellier\u7684\u6bd4\u55bb\uff0c\u8bf4\u6709\u4e2a\u751f\u8131\u53d1\u75c5\u7684\u4eba\u53bb\u7406\u53d1\uff0c\u90a3\u5243\u5934\u7684\u5bf9\u4ed6\u8bf4\u4e0d\u7528\u526a\u53d1\uff0c\u7b49\u4e0d\u4e86\u51e0\u5929\uff0c\u5934\u6bdb\u538b\u513f\u5168\u6389\u5149\u4e86\uff1b\u5927\u90e8\u5206\u73b0\u4ee3\u6587\u5b66\u4e5f\u540c\u6837\u7684\u4e0d\u503c\u6279\u8bc4\u3002\u8fd9\u6bd4\u55bb\u8fd8\u7b97\u4fcf\u76ae\u3002\u201d \u4e0a\u9762\u7684\u53e5\u5b50\u4e2d\u7684\"\u4ed6\"\u6307\u7684\u662f \u751f\u8131\u53d1\u75c5\u7684\u4eba \u5728\u6d1b\u4f26\u4f50\u5927\u8857\u7684\u5c3d\u5934\u5904\uff0c\u77d7\u7acb\u7740\u8457\u540d\u7684\u5723\u4e09\u4e00\u5927\u6559\u5802\u3002\u5b83\u6709\u7740\u5de8\u5927\u7684\u7a79\u9876\uff0c\u8fd8 \u6709\u660e\u4eae\u7684\u5f69\u8272\u73bb\u7483\u7a97\uff0c\u4e0a\u9762\u63cf\u7ed8\u7740\u300a\u65e7\u7ea6\u300b\u548c\u300a\u65b0\u7ea6\u300b\u7684\u573a\u666f\u3002 \u4e0a\u9762\u7684\u53e5\u5b50\u4e2d\u7684\"\u5b83\"\u6307\u7684\u662f \u5723\u4e09\u4e00\u5927\u6559\u5802 \u4ed6\u4f2f\u7236\u8fd8\u6709\u8bb8\u591a\u5973\u5f1f\u5b50\uff0c\u5927\u534a\u662f\u5bcc\u5546\u8d22\u4e3b\u7684\u5916\u5ba4\uff1b\u8fd9\u4e9b\u8d22\u7fc1\u767d\u5929\u5fd9\u7740\u8d5a\u94b1\uff0c\u6015 \u5c0f\u516c\u9986\u91cc\u7684\u60c5\u5987\u957f\u65e5\u65e0\u804a\uff0c\u8981\u4e0d\u5b89\u5206\uff0c\u5e38\u5e38\u53eb\u5979\u4eec\u5b66\u70b9\u73a9\u827a\u513f\u6d88\u9063\u3002 \u4e0a\u9762\u7684\u53e5\u5b50\u4e2d\u7684\"\u5979\u4eec\"\u6307\u7684\u662f \u60c5\u5987 \u8d75\u96e8\u53c8\u62ff\u51fa\u4e86\u4e00\u4e2a\u676f\u5b50\uff0c\u6211\u4eec\u70ed\u60c5\u5730\u8bf7\u8001\u738b\u5165\u5ea7\uff0c\u6211\u8fb9\u7ed9\u4ed6\u5012\u9152\u8fb9\u95ee\uff1a1962\u5e74 \u7684\u54ea\u6b21\u8bb0\u5f97\u5417\uff1f\u201c \u4e0a\u9762\u7684\u53e5\u5b50\u4e2d\u7684\"\u4ed6\"\u6307\u7684\u662f \u886828|CLUEWSC\u793a\u4f8b\u3002</p> <p>\u63d0\u793a Q\uff1a \u9a6c\u514b\u65af\u80fd\u572840\u5206\u949f\u5185\u5272\u5b8c\u8349\u576a\u3002\u5982\u679c\u4ed6\u7ed9\u8349\u576a\u65bd\u80a5\u9700\u8981\u4e24\u500d\u7684\u65f6\u95f4\uff0c\u90a3\u4e48\u4ed6\u7ed9\u8349\u576a\u5272\u8349\u548c\u65bd\u80a5\u9700\u8981\u591a\u957f\u65f6\u95f4\uff1f A\uff1a \u8ba9\u6211\u4eec\u4e00\u6b65\u4e00\u6b65\u5730\u601d\u8003\u3002\u7ed9\u8349\u576a\u65bd\u80a5\u6700\u591a\u9700\u89812*40\u5206\u949f=80\u5206\u949f\u3002\u603b\u7684\u6765\u8bf4\uff0cMax\u9700\u898180\u5206\u949f+40\u5206\u949f=120\u5206\u949f\u6765\u5272\u8349\u548c\u65bd\u80a5\u3002\u7b54\u6848\u662f120\u3002</p> <p>Q\uff1a \u8fd9\u4e9b\u767e\u5409\u997c\u6bcf\u4e2a\u552e\u4ef72.25\u7f8e\u5143\uff0c\u6216\u8005\u4e00\u6253\u552e\u4ef724\u7f8e\u5143\u3002\u4e00\u6b21\u4e70\u4e00\u6253\u767e\u5409\u997c\uff0c\u6bcf\u4e2a\u767e\u5409\u997c\u80fd\u8282\u7701\u591a\u5c11\u94b1\uff1f A\uff1a \u8ba9\u6211\u4eec\u4e00\u6b65\u4e00\u6b65\u5730\u601d\u8003\u3002\u5b83\u4eec\u7684\u4ef7\u683c\u4e3a2.25100=225\u7f8e\u5206\u3002\u6309\u6279\u91cf\u8d39\u7387\u8ba1\u7b97\uff0c\u5b83\u4eec\u662f24/12=2\u7f8e\u5143\u3002\u6bcf\u4ef6\u552e\u4ef72100=200\u7f8e\u5206\u3002225-200=\u6bcf\u4e2a\u767e\u5409\u997c\u8282\u770125\u7f8e\u5206\u3002\u7b54\u6848\u662f25\u3002</p> <p>Q\uff1a \u8482\u59c6\u4eca\u5e745\u5c81\u3002\u4ed6\u7684\u5802\u5144\u9686\u7f8e\u5c14\u7684\u5e74\u9f84\u662f\u4ed6\u7684\u4e09\u500d\u3002\u4ed6\u7684\u53e6\u4e00\u4e2a\u5802\u5144\u73cd\u59ae\u6bd4\u9686\u7f8e\u5c14\u5927\u4e24\u5c81\u3002\u8482\u59c6\u6bd4\u73cd\u59ae\u5c0f\u51e0\u5c81\uff1fA\uff1a \u8ba9\u6211\u4eec\u4e00\u6b65\u4e00\u6b65\u5730\u601d\u8003\u3002\u9686\u7f8e\u5c14\u662f5 x 3=15\u5c81\u3002\u73cd\u59ae\u662f15+2=17\u5c81\u3002\u6240\u4ee5\uff0c\u8482\u59c6\u6bd4\u73cd\u59ae\u5c0f17-5=12\u5c81\u3002\u7b54\u6848\u662f12\u3002</p> <p>Q\uff1a \u8fd9\u6240\u5b66\u6821\u670914\u4e2a\u7537\u751f\u548c10\u4e2a\u5973\u751f\u3002\u5982\u679c4\u4e2a\u7537\u5b69\u548c3\u4e2a\u5973\u5b69\u8f8d\u5b66\uff0c\u8fd8\u5269\u591a\u5c11\u7537\u5b69\u548c\u5973\u5b69\uff1f A\uff1a \u8ba9\u6211\u4eec\u4e00\u6b65\u4e00\u6b65\u5730\u601d\u8003\u3002\u670914\u4e2a\u7537\u5b69\u2014\u20144\u4e2a\u7537\u5b69=10\u4e2a\u7537\u5b69\u3002\u670910\u4e2a\u5973\u5b69\uff0c3\u4e2a\u5973\u5b69=7\u4e2a\u5973\u5b69\u3002\u603b\u5171\u670910\u4e2a\u7537\u5b69+7\u4e2a\u5973\u5b69=17\u4e2a\u7537\u5b69\u548c\u5973\u5b69\u3002\u7b54\u6848\u662f17\u3002</p> <p>Q\uff1a \u5efa\u9020\u4e00\u4e2a\u9e1f\u820d\u9700\u89817\u5757\u6728\u677f\u548c20\u4e2a\u9489\u5b50\u3002\u5982\u679c\u4e00\u4e2a\u9489\u5b50\u82b1\u8d390.05\uff0c\u4e00\u5757\u6728\u677f\u82b1\u8d393\uff0c\u90a3\u4e48\u5efa\u90204\u4e2a\u9e1f\u820d\u7684\u6210\u672c\u662f\u591a\u5c11\uff08\u4ee5\u7f8e\u5143\u8ba1\uff09\uff1f A\uff1a \u8ba9\u6211\u4eec\u4e00\u6b65\u4e00\u6b65\u5730\u601d\u8003\u3002\u4e00\u4e2a\u9e1f\u820d\u7684\u6728\u677f\u6210\u672c\u4e3a73=21\u3002\u6bcf\u4e2a\u9e1f\u820d\u7684\u9489\u5b50\u6210\u672c\u4e3a200.05=1\u3002\u56e0\u6b64\uff0c\u8981\u5efa\u9020\u4e00\u4e2a\u9e1f\u820d\uff0c\u9700\u898121+1=22\u3002\u56e0\u6b64\uff0c\u5efa\u90204\u4e2a\u9e1f\u820d\u7684\u6210\u672c\u4e3a4*22=88\u3002\u7b54\u6848 \u662f88\u3002</p> <p>Q\uff1a \u4e39\u5c3c\u5e26\u4e863\u4e2a\u897f\u74dc\u53bb\u4ed6\u5bb6\u91ce\u9910\u3002\u4ed6\u628a\u6bcf\u4e2a\u897f\u74dc\u5207\u621010\u7247\u3002\u4ed6\u7684\u59b9\u59b9\u5e26\u4e86\u4e00\u4e2a\u897f\u74dc\u53bb\u91ce\u9910\uff0c\u5979\u628a\u897f\u74dc\u5207\u621015\u7247\u3002\u91ce\u9910\u65f6\u4e00\u5171\u6709\u591a\u5c11\u7247\u897f\u74dc\uff1f A\uff1a \u8ba9\u6211\u4eec\u4e00\u6b65\u4e00\u6b65\u5730\u601d\u8003\u3002\u4ece\u4e39\u5c3c\u90a3\u91cc\uff0c\u6709310=30\u4e2a\u897f\u74dc\u7247\u3002\u4ece\u4ed6\u59d0\u59d0\u90a3\u91cc\uff0c\u6709115=15\u4e2a\u897f\u74dc\u7247\u3002\u603b\u5171\u670930+15=45\u4e2a\u897f\u74dc\u7247\u3002\u7b54\u6848\u662f45\u3002</p> <p>Q\uff1a \u5b89\u5409\u62c9\u662f\u7ebd\u7ea6\u7684\u4e00\u540d\u81ea\u884c\u8f66\u4fe1\u4f7f\u3002\u5979\u9700\u8981\u9012\u9001\u7684\u5305\u88f9\u662f\u9910\u8d39\u76848\u500d\u3002\u5982\u679c\u5979\u9700\u8981\u900127\u987f\u996d\u548c\u5305\u88f9\uff0c\u5979\u8981\u9001\u591a\u5c11\u987f\u996d\uff1f A\uff1a \u8ba9\u6211\u4eec\u4e00\u6b65\u4e00\u6b65\u5730\u601d\u8003\u3002\u8bbep\u4e3aAngela\u9012\u9001\u7684\u5305\u88f9\u6570\u91cf\uff0cm\u4e3a\u7528\u9910\u6b21\u6570\u3002\u6211\u4eec\u77e5\u9053p+m=27\u548cp=8m\u3002\u5c06\u7b2c\u4e8c\u4e2a\u65b9\u7a0b\u4ee3\u5165\u7b2c\u4e00\u4e2a\u65b9\u7a0b\uff0c\u6211\u4eec\u5f97\u52308m+m=27\u3002\u7ed3\u5408\u7c7b\u4f3c\u7684\u672f\u8bed\uff0c\u6211\u4eec\u5f97\u52309m=27\u3002\u628a\u4e24\u8fb9\u90fd\u9664\u4ee59\uff0c\u6211\u4eec\u5f97\u5230m=3\u3002\u7b54\u6848\u662f3\u3002</p> <p>Q\uff1a \u79d1\u91cc\u4eca\u59293\u5c81\u4e86\u3002\u4e94\u5e74\u540e\uff0c\u5979\u5c06\u662f\u5979\u59d1\u59d1\u7684\u4e09\u5206\u4e4b\u4e00\u3002\u5979\u963f\u59e8\u4eca\u5929\u51e0\u5c81\u4e86\uff1f A\uff1a \u8ba9\u6211\u4eec\u4e00\u6b65\u4e00\u6b65\u5730\u601d\u8003\u30025\u5e74\u540e\uff0c\u79d1\u91cc\u5c06\u662f3+5=8\u5c81\u30025\u5e74\u540e\uff0c\u79d1\u91cc\u7684\u963f\u59e8\u5c06\u662f8 x 3=24\u5c81\u3002\u4eca\u5929\uff0c\u5979\u7684\u963f\u59e824-5=19\u5c81\u3002\u7b54\u6848\u662f19\u3002</p> <p>Q\uff1a Indras\u7684\u540d\u5b57\u6709\u516d\u4e2a\u5b57\u6bcd\u3002\u5979\u59d0\u59d0\u7684\u540d\u5b57\u6bd4\u56e0\u9640\u7f57\u540d\u5b57\u4e2d\u4e00\u534a\u7684\u5b57\u6bcd\u591a\u51fa4\u4e2a\u5b57\u6bcd\u3002\u56e0\u9640\u7f57\u548c\u5979\u59d0\u59d0\u7684\u540d\u5b57\u91cc\u6709\u591a\u5c11\u4e2a\u5b57\u6bcd\uff1fA\uff1a \u8ba9\u6211\u4eec\u4e00\u6b65\u4e00\u6b65\u5730\u601d\u8003\u3002</p> <p>\u886829|GSM8K\u793a\u4f8b\u3002</p> <p>\u63d0\u793a \u5f39\u94a2\u7434\uff1a\u4e00\u4e2a\u7537\u4eba\u5750\u5728\u94a2\u7434\u524d\u3002\u4ed6</p> <p>\u9009\u9879 - \u4ed6\u6b63\u5728\u7528\u624b\u548c\u8138\u5f39\u94a2\u7434\u3002 - \u6bd4\u91d1\u65af\u7528\u94a2\u7434\u6f14\u594f\u8482\u5df4\u5170\u7684\u4e00\u9996\u6b4c\u3002 - \u6162\u6162\u5730\u6f14\u594f\uff0c\u7136\u540e\u505c\u4e0b\u6765\u5f39\u624b\u6307\u3002 - \u6b63\u5728\u4ed6\u9762\u524d\u6f14\u594f\u4e00\u9996\u6b4c\u3002</p> <p>\u886830|HellaSwag\u793a\u4f8b\u3002</p> <p>\u63d0\u793a</p> <p>def starts_one_ends\uff08n\uff09\uff1a \"\"\" \u7ed9\u5b9a\u4e00\u4e2a\u6b63\u6574\u6570n\uff0c\u8fd4\u56de\u4ee51\u5f00\u5934\u6216\u7ed3\u5c3e\u7684n\u4f4d\u6b63\u6574\u6570\u7684\u6570\u91cf\u3002 \"\"\"</p> <p>\u886831|HumanEval\u793a\u4f8b\u3002</p> <p>\u63d0\u793a \u95ee\u9898\uff1a \u627e\u5230\u8868\u8fbe\u5f0f\\(\\frac{\\sqrt{x-2}{\\sqrt{5-x}}\\)\u7684\u57df\u3002}</p> <p>\u89e3\u51b3\u65b9\u6848\uff1a \u6bcf\u4e2a\u5e73\u65b9\u6839\u5185\u7684\u8868\u8fbe\u5f0f\u5fc5\u987b\u4e3a\u975e\u8d1f\u6570\u3002\u56e0\u6b64\uff0c\\(x-2\\ge 0\\)\uff0c\u5373\\(x\\ge2\\)\uff0c\u4ee5\u53ca\\(5-x\\ge 0\u7f8e\u5143\uff0c\u5373\\)x \\le 5\\(\u3002 \u6b64\u5916\uff0c\u5206\u6bcd\u4e0d\u80fd\u7b49\u4e8e\u96f6\uff0c\u56e0\u6b64\\)5-x&gt;0\\(\uff0c\u5373\\)x&lt;5\\(\u3002\u56e0\u6b64\uff0c\u8868\u8fbe\u5f0f\u7684\u57df\u662f\\)\\boxed{[2,5\uff09}\\(\u3002 \u6700\u7ec8\u7b54\u6848\uff1a\u6700\u7ec8\u7b54\u6848\u662f\\)[2,5\uff09$\u3002\u6211\u5e0c\u671b\u5b83\u662f\u6b63\u786e\u7684\u3002</p> <p>\u95ee\u9898\uff1a \u5982\u679c\\(\\det\\mathbf{A}=2\\)\u548c\\(\\det\\mathbf{B}=12\uff0c\u5219\\)\u627e\u5230\\(\\det\uff08\\mathbf{1}\\mathbf{0}\uff09\\)</p> <p>\u89e3\u51b3\u65b9\u6848\uff1a \u6211\u4eec\u6709\\(\\det\uff08\\mathbf{A}\\mathbf{1B}\uff09=\uff08\\det\\mathbf[A}\uff09\uff08\\det \\mathbf{B}\uff09=\uff082\uff09\uff0812\uff09=\\boxed{24}\\) \u6700\u7ec8\u7b54\u6848\uff1a\u6700\u7ec8\u7b54\u6848\u662f24\u7f8e\u5143\u3002\u6211\u5e0c\u671b\u8fd9\u662f\u6b63\u786e\u7684\u3002</p> <p>\u95ee\u9898\uff1a \u7279\u96f7\u5c14\u901a\u5e38\u4f1a\u4e3e\u8d77\u4e24\u4e2a20\u78c5\u91cd\u7684\u91cd\u726912\u6b21\u3002\u5982\u679c\u4ed6\u4f7f\u7528\u4e24\u4e2a15\u78c5\u7684\u781d\u7801\uff0cTerrell\u5fc5\u987b\u4e3e\u8d77\u591a\u5c11\u6b21\u624d\u80fd\u4e3e\u8d77\u76f8\u540c\u7684\u603b\u91cd\u91cf\uff1f</p> <p>\u89e3\u51b3\u65b9\u6848\uff1a \u5982\u679cTerrell\u4e3e\u8d77\u4e24\u4e2a20\u78c5\u7684\u91cd\u726912\u6b21\uff0c\u4ed6\u603b\u5171\u4e3e\u8d77\u4e862\u7f8e\u5143\u7684\u91cd\u91cf\u3002\u5982\u679c\u4ed6\u4ee5n\\(\u6b21\u4e3e\u8d77\u4e24\u4e2a15\u78c5\u7684\u91cd\u7269\uff0c\u4ed6\u5c06\u603b\u5171\u4e3e\u8d772\\cdot15\\cdotn=30n\\)\u78c5\u7684\u91cd\u7269\u3002\u5c06\u5176\u7b49\u4e8e480\u78c5\uff0c\u6211\u4eec\u53ef\u4ee5\u6c42\u89e3\\(n\\)\uff1a\\begin{align}30n&amp;=480\\ \\\u53f3\u7bad\u5934n&amp;=480/30=\\boxed{16} \\\u7ed3\u675f{align} \u6700\u7ec8\u7b54\u6848\uff1a\u6700\u7ec8\u7b54\u6848\u662f16\u7f8e\u5143\u3002\u6211\u5e0c\u671b\u8fd9\u662f\u6b63\u786e\u7684\u3002</p> <p>\u95ee\u9898\uff1a \u5982\u679c\u65b9\u7a0b\u7ec4</p> <p>\\\u5f00\u59cb{align}6x-4y&amp;=a\uff0c\\6y-9x&amp;=b\u3002 \\end{align}\u6709\u4e00\u4e2a\u89e3\\(\uff08x\uff0cy\uff09\\)\uff0c\u5176\u4e2d\\(x\\)\u548c\\(y\\)\u90fd\u662f\u975e\u96f6\u7684\uff0c\u627e\u5230\\(\\frac{a}{b}\uff0c\\)\uff0c\u5047\u8bbe\\(b\\)\u662f\u975e\u96f6\u3002</p> <p>\u89e3\u51b3\u65b9\u6848\uff1a \u5982\u679c\u6211\u4eec\u5c06\u7b2c\u4e00\u4e2a\u65b9\u7a0b\u4e58\u4ee5\\(-\\frac{3}{2}\\)\uff0c\u6211\u4eec\u5f97\u5230</p> <p>6\u7f8e\u5143-9x=-\\frac{3}{2}a.$\\(\u65e2\u7136\u6211\u4eec\u4e5f\u77e5\u90536y-9x=b\\)\uff0c\u6211\u4eec\u6709</p> <p>\\(\\(-\\frac\uff5b3\uff5d{2}a=b\\Rightarrow \\frac{a}{b}=\\boxed{-\\frac\uff5b2\uff5d\uff5b3\uff5d}\u3002\\)\\)\u6700\u7ec8\u7b54\u6848\uff1a\u6700\u7ec8\u7b54\u6848\u662f\\(-\\frac{2}{3}\\)\u3002\u6211\u5e0c\u671b\u8fd9\u662f\u6b63\u786e\u7684\u3002 \u95ee\u9898\uff1a\u8ba1\u7b97\\(\\log_21\\)\u3002\u89e3\u51b3\u65b9\u6848\uff1a</p> <p>\u886832 |\u6570\u5b66\u793a\u4f8b\u3002</p> <p>\u63d0\u793a \u4f60\u662f\u4e00\u540dPython\u7a0b\u5e8f\u5458\uff0c\u4f60\u7684\u4efb\u52a1\u662f\uff1a\u7f16\u5199\u4e00\u4e2a\u51fd\u6570\uff0c\u4ece\u7ed9\u5b9a\u7684\u4e24\u4e2a\u5143\u7ec4\u5217\u8868\u4e2d\u67e5\u627e\u76f8\u4f3c\u7684\u5143\u7d20\u3002\u4f60\u7684\u4ee3\u7801\u5e94\u8be5\u901a\u8fc7\u8fd9\u4e9b\u6d4b\u8bd5\uff1a</p> <p>\u65ad\u8a00\u76f8\u4f3c\u5143\u7d20\uff08\uff083,4,5,6\uff09\uff0c\uff085,7,4,10\uff09==\uff084,5\uff09 \u65ad\u8a00\u76f8\u4f3c\u5143\u7d20\uff08\uff081,2,3,4\uff09\uff0c\uff085,4,3,7\uff09==\uff083,4\uff09 \u65ad\u8a00\u76f8\u4f3c\u5143\u7d20\uff08\uff0811\uff0c12\uff0c14\uff0c13\uff09\uff0c\uff0817\uff0c15\uff0c14\uff0c3\uff09==\uff0813\uff0c14\uff09[BEGIN] \u5b9a\u4e49\u7c7b\u4f3c\u5143\u7d20\uff08test_tup1\u3001test_tup2\uff09\uff1a res=\u5143\u7ec4\uff08set\uff08test_tup1\uff09&amp;set\uff08test_tup 2\uff09\uff09\u8fd4\u56de\u503c\uff08res\uff09 [\u5b8c\u6210] \u4f60\u662f\u4e00\u540dPython\u7a0b\u5e8f\u5458\uff0c\u4f60\u7684\u4efb\u52a1\u662f\uff1a\u7f16\u5199\u4e00\u4e2aPython\u51fd\u6570\u6765\u8bc6\u522b\u975e\u7d20\u6570\u3002\u4f60\u7684\u4ee3\u7801\u5e94\u8be5\u901a\u8fc7\u8fd9\u4e9b\u6d4b\u8bd5\uff1a</p> <p>\u65ad\u8a00is_not_pime\uff082\uff09==\u5047\u65ad\u8a00is_nut_pime\uff0810\uff09==\u771f\u65ad\u8a00is_not _pime\uff0835\uff09==True[BEGIN] \u5bfc\u5165\u6570\u5b66 def is_not_pime\uff08n\uff09\uff1a \u7ed3\u679c=\u5047 \u5bf9\u4e8e\u8303\u56f4\uff082\uff0cint\uff08math.sqrt\uff08n\uff09\uff09+1\uff09\u4e2d\u7684i\uff1a \u5982\u679cn%i==0\uff1a result=\u8fd4\u56de\u771f\u7ed3\u679c[DONE] \u4f60\u662f\u4e00\u540dPython\u7a0b\u5e8f\u5458\uff0c\u4f60\u7684\u4efb\u52a1\u662f\uff1a\u7f16\u5199\u4e00\u4e2a\u51fd\u6570\uff0c\u4f7f\u7528\u5806\u961f\u5217\u7b97\u6cd5\u4ece\u7ed9\u5b9a\u7684\u6570\u5b57\u5217\u8868\u4e2d\u67e5\u627e\u6700\u5927\u7684\u6574\u6570\u3002\u4f60\u7684\u4ee3\u7801\u5e94\u8be5\u901a\u8fc7\u8fd9\u4e9b\u6d4b\u8bd5\uff1a</p> <p>\u65ad\u8a00heap_queue_largest\uff08[25,35,22,85,14,65,75,22,58]\uff0c3\uff09==[85,75,65] \u65ad\u8a00heap_queue_largest\uff08[25,35,22,85,14,65,75,22,58]\uff0c2\uff09==[85,75] \u65ad\u8a00heap_queue_largest\uff08[25,35,22,85,14,65,75,22,58]\uff0c5\uff09==[85,75,65,58\uff0c 35][\u5f00\u59cb] \u5c06heapq\u5bfc\u5165\u4e3ahq def heap_queue_largest\uff08num\uff0cn\uff09\uff1a largest_num=hq.nlargest\uff08n\uff0cnums\uff09\u8fd4\u56delargest_nums [\u5b8c\u6210] \u4f60\u662f\u4e00\u540dPython\u7a0b\u5e8f\u5458\uff0c\u4f60\u7684\u4efb\u52a1\u662f\uff1a\u7f16\u5199\u4e00\u4e2a\u51fd\u6570\u6765\u8fd4\u56de\u4e00\u4e2a\u6570\u5b57\u7684\u6240\u6709\u9664\u6570\u4e4b\u548c\u3002\u4f60\u7684\u4ee3\u7801\u5e94\u8be5\u901a\u8fc7\u8fd9\u4e9b\u6d4b\u8bd5\uff1a</p> <p>assert sum_div\uff088\uff09==7 assert sum-div\uff0812\uff09==16 assert sum_iv\uff087\uff09==1[BEGIN]</p> <p>\u886833|MBPP\u793a\u4f8b\u3002</p> <p>\u63d0\u793a \u4ee5\u4e0b\u662f\u5173\u4e8e\u6742\u9879\u7684\u591a\u9879\u9009\u62e9\u9898\uff08\u9644\u7b54\u6848\uff09\u00ac\u3002</p> <p>\u4e00\u8f86\u6807\u51c6\u6c7d\u8f66\u6709\u591a\u5c11\u4e2a\u8f66\u8f74\uff1f 1 \u4e00 2 \u4e8c 3 \u56db 4 8\u7b54\u6848\uff1aB</p> <p>\u6447\u6eda\u4f20\u5947\u4eba\u7269Cheap Trick 1979\u5e74\u73b0\u573a\u4e13\u8f91\u7684\u6807\u9898\u4e2d\u63d0\u5230\u4e86\u54ea\u4e2a\u5730\u65b9\uff1f 1 \u5e03\u8fbe\u4f69\u65af 2 \u65e5\u672c\u6b66\u9053\u9986 3 \u4e0d\u4e39 4 \u82f1\u56fd\u7b54\u6848\uff1aB</p> <p>\u8c01\u662fNBA\u704c\u7bee\u6bd4\u8d5b\u4e2d\u6700\u77ee\u7684\u4eba\uff1f 1 \u5b89\u4e1c\u5c3c\u00b7\u97e6\u4f2f 2 \u8fc8\u514b\u5c14\u00b7\u4e54\u4e39 3 \u6cf0\u9686\u201cMuggsy\u201d\u6cbc\u6cfd 4 \u6731\u5229\u53f6\u65af\u00b7\u6b27\u6587\u535a\u58eb\u56de\u7b54\uff1aA</p> <p>\u5149\u5408\u4f5c\u7528\u4ea7\u751f\u4ec0\u4e48\uff1f 1 \u6c22 2 \u5c3c\u9f99 3 \u6c27\u6c14 4 \u7b54\u6848\uff1aC</p> <p>\u8fd9\u4e9b\u6b4c\u66f2\u4e2d\uff0c\u54ea\u9996\u662f\u6447\u6eda\u4e50\u961f\u201c\u8b66\u5bdf\u201d\u7684\u5341\u5927\u70ed\u95e8\u6b4c\u66f2\uff1f 1 \u201c\u560e\u560e\u7535\u53f0\u201d 2 \u201cOb la di Ob la da\u201d 3 \u201cDe Do Do De Da Da\u201d 4 \u201cIn a Gadda-Da Vida\u201d\u7b54\u6848\uff1aC</p> <p>\u4e09\u4e2a\u5080\u5121\u4e2d\uff0c\u54ea\u4e00\u4e2a\u4e0e\u5176\u4ed6\u4eba\u6ca1\u6709\u5173\u7cfb\uff1f 1 \u83ab 2 \u62c9\u91cc 3 \u5377\u66f2\u7684 4 Shemp\u56de\u7b54\uff1a</p> <p>\u9009\u9879 - A. - B - C - D</p> <p>\u886834|MMLU\u793a\u4f8b\u3002</p> <p>\u63d0\u793a \u8bf7\u56de\u7b54\u4ee5\u4e0b\u95ee\u9898\uff1a Q\uff1a 2022\u5e74\u56fd\u9645\u8db3\u8054\u4e16\u754c\u676f\u7531\u8c01\u4e3b\u529e\uff1fA\uff1a \u5361\u5854\u5c14 Q\uff1a \u8c01\u8d62\u5f97\u4e86\u7b2c\u4e00\u5c4a\u5973\u5b50\u56fd\u9645\u8db3\u8054\u4e16\u754c\u676f\uff1fA\uff1a \u7f8e\u56fd Q\uff1a \u300a\u8fc8\u963f\u5bc6\u98ce\u4e91\u300b\u4ec0\u4e48\u65f6\u5019\u505c\u64ad\u7684\uff1fA\uff1a 1989\u5e74 Q\uff1a \u8c01\u5199\u4e86\u8fd9\u9996\u5411\u4e0a\u5e1d\u547c\u558a\u7684\u6b4c\uff1fA\uff1a Darlene Zschech Q\uff1a \u8c01\u88ab\u6254\u8fdb\u4e86\u72ee\u5b50\u7a9d\uff1fA\uff1a \u4e39\u5c3c\u5c14 Q\uff1a habib\u8fd9\u4e2a\u540d\u5b57\u662f\u4ec0\u4e48\u610f\u601d\uff1fA.</p> <p>\u886835|\u81ea\u7136\u95ee\u9898\u793a\u4f8b\u3002</p> <p>\u63d0\u793a \u6bcf\u5e74\u79cb\u5929\uff0c\u4e00\u4f4d\u5973\u58eb\u90fd\u4f1a\u6ce8\u610f\u5230\u81ea\u5df1\u5f88\u6cae\u4e27\uff0c\u5e76\u60f3\u77e5\u9053\u4e3a\u4ec0\u4e48\u3002\u4e00\u4f4d\u670b\u53cb\u5efa\u8bae\u5979\uff0c\u4e5f\u8bb8\u968f\u7740\u5b63\u8282\u4ece\u6e29\u6696\u53d8\u4e3a\u5bd2\u51b7\u800c\u53d1\u751f\u7684\u67d0\u4e9b\u53d8\u5316\u53ef\u80fd\u4f1a\u5bf9\u5979\u4ea7\u751f\u5f71\u54cd\u3002\u5f53\u88ab\u95ee\u53ca\u8fd9\u4e9b\u53d8\u5316\u7684\u4f8b\u5b50\u65f6\uff0c\u8fd9\u4f4d\u670b\u53cb\u5f15\u7528\u4e86 \u9009\u9879 - \u9c9c\u82b1\u76db\u5f00 - \u8349\u53d8\u9ec4\u4e86 - \u6811\u6728\u751f\u957f - \u82b1\u6735\u76db\u5f00 \u886836|OpenBookQA\u793a\u4f8b\u3002</p> <p>\u63d0\u793a \u4e3a\u4e86\u66f4\u5bb9\u6613\u6309\u4e0b\u4f4d\u4e8e\u673a\u5668\u4e0b\u65b9\u7684\u5783\u573e\u4e00\u6b21\u6027\u673a\u5668\u7684\u91cd\u7f6e\u6309\u94ae\uff0c \u9009\u9879 - \u5728\u6a71\u67dc\u7684\u5730\u677f\u4e0a\u653e\u4e00\u9762\u5899\u955c - \u5728\u5783\u573e\u5904\u7406\u673a\u4e0b\u62ff\u4e00\u4e2a\u624b\u955c \u886837|PIQA\u793a\u4f8b\u3002</p> <p>\u63d0\u793a \u6587\u7ae0\uff1a \u5f53\u4f60\u9605\u8bfb\u4e00\u7bc7\u6587\u7ae0\u65f6\uff0c\u5982\u679c\u4f60\u80fd\u5f04\u6e05\u695a\u4f5c\u8005\u662f\u5982\u4f55\u628a\u60f3\u6cd5\u653e\u5728\u4e00\u8d77\u7684\uff0c\u4f60\u4f1a\u66f4\u597d\u5730\u7406\u89e3\u548c\u8bb0\u4f4f\u5b83\u3002\u6709\u65f6\uff0c\u4f5c\u5bb6\u901a\u8fc7\u63d0\u51fa\u95ee\u9898\u7136\u540e\u56de\u7b54\u95ee\u9898\u6765\u628a\u60f3\u6cd5\u653e\u5728\u4e00\u8d77\u3002\u4f8b\u5982\uff0c\u5982\u679c\u8fd9\u7bc7\u6587\u7ae0\u662f\u5173\u4e8e\u571f\u62e8\u9f20\u7684\uff0c\u90a3\u4e48\u4f5c\u8005\u8111\u6d77\u4e2d\u7684\u95ee\u9898\u53ef\u80fd\u662f\uff1a \u571f\u62e8\u9f20\u957f\u4ec0\u4e48\u6837\uff1f\u571f\u62e8\u9f20\u4f4f\u5728\u54ea\u91cc\uff1f \u4ed6\u4eec\u5403\u4ec0\u4e48\uff1f\u3002\u3002\u3002 \u5728\u6587\u7ae0\u4e2d\uff0c\u4f5c\u8005\u53ef\u80fd\u4f1a\u56de\u7b54\u8fd9\u4e9b\u95ee\u9898\u3002 \u6709\u65f6\u4f5c\u8005\u4f1a\u5728\u6587\u7ae0\u4e2d\u5199\u4e0b\u5979\u7684\u95ee\u9898\u3002\u8fd9\u4e9b\u95ee\u9898\u7ed9\u4e86\u4f60\u4fe1\u53f7\u3002\u4ed6\u4eec\u544a\u8bc9\u4f60\u4f5c\u8005\u63a5\u4e0b\u6765\u8981\u5199\u4ec0\u4e48\u3002\u901a\u5e38\uff0c\u4e00\u4f4d\u4f5c\u8005\u8111\u5b50\u91cc\u4f1a\u6709\u4e00\u4e2a\u95ee\u9898\uff0c\u4f46\u5979\u4e0d\u4f1a\u4e3a\u4f60\u5199\u51fa\u6765\u3002\u4f60\u5fc5\u987b\u81ea\u5df1\u89e3\u51b3\u5979\u7684\u95ee\u9898\u3002\u8fd9\u91cc\u6709\u4e00\u4e2a\u793a\u4f8b\u9605\u8bfb\uff0c\u4f9b\u60a8\u7ec3\u4e60\u8fd9\u79cd\u65b9\u6cd5\u3002 \u86af\u8693 \u4f60\u77e5\u9053\u86af\u8693\u6709\u591a\u5c11\u79cd\u5417\uff1f\u4e16\u754c\u4e0a\u5927\u7ea6\u67091800\u79cd\uff01\u5b83\u4eec\u53ef\u4ee5\u662f\u68d5\u8272\u3001\u7d2b\u8272\u3001\u7eff\u8272\u3002\u5b83\u4eec\u53ef\u4ee5\u5c0f\u81f33\u5398\u7c73\u957f\uff0c\u5927\u81f33\u7c73\u957f\u3002 \u89c2\u8d4f\u86af\u8693\u7684\u6700\u4f73\u65f6\u95f4\u662f\u665a\u4e0a\uff0c\u5c24\u5176\u662f\u51c9\u723d\u6f6e\u6e7f\u7684\u591c\u665a\u3002\u90a3\u662f\u5b83\u4eec\u4ece\u6d1e\u7a74\u91cc\u51fa\u6765\u89c5\u98df\u7684\u65f6\u5019\u3002\u86af\u8693\u4e0d\u559c\u6b22\u5728\u9633\u5149\u4e0b\u3002\u8fd9\u662f\u56e0\u4e3a\u5b83\u4eec\u901a\u8fc7\u76ae\u80a4\u547c\u5438\uff0c\u5982\u679c\u76ae\u80a4\u592a\u5e72\u71e5\uff0c\u5b83\u4eec\u5c31\u65e0\u6cd5\u547c\u5438\u3002\u5982\u679c\u7ecf\u5e38\u4e0b\u96e8\uff0c\u86af\u8693\u5fc5\u987b\u4ece\u5730\u91cc\u51fa\u6765\uff0c\u56e0\u4e3a\u5b83\u4eec\u5728\u88ab\u6df9\u7684\u6d1e\u7a74\u91cc\u65e0\u6cd5\u547c\u5438\u3002\u591a\u4e48\u5371\u9669\u7684\u751f\u6d3b\u554a\uff01 \u86af\u8693\u6ca1\u6709\u773c\u775b\uff0c\u6240\u4ee5\u5b83\u4eec\u600e\u4e48\u77e5\u9053\u4ec0\u4e48\u65f6\u5019\u5929\u9ed1\u4e86\uff1f\u5b83\u4eec\u7684\u76ae\u80a4\u4e0a\u6709\u5bf9\u5149\u7ebf\u654f\u611f\u7684\u7279\u6b8a\u90e8\u4f4d\u3002\u8fd9\u4e9b\u6591\u70b9\u53ef\u4ee5\u5206\u8fa8\u51fa\u662f\u4eae\u662f\u6697\u3002\u5982\u679c\u4f60\u5728\u665a\u4e0a\u7528\u624b\u7535\u7b52\u7167\u86af\u8693\uff0c\u5b83\u4f1a\u5f88\u5feb\u6d88\u5931\u5728\u5730\u91cc\u3002 \u86af\u8693\u4e5f\u6ca1\u6709\u8033\u6735\uff0c\u4f46\u5b83\u4eec\u53ef\u4ee5\u901a\u8fc7\u611f\u89c9\u5730\u7403\u4e0a\u7684\u8fd0\u52a8\u6765\u542c\u5230\u58f0\u97f3\u3002\u5982\u679c\u4f60\u60f3\u50cf\u86af\u8693\u4e00\u6837\u542c\uff0c\u8eba\u5728\u5730\u4e0a\uff0c\u624b\u6307\u653e\u5728\u8033\u6735\u91cc\u3002\u7136\u540e\u8ba9\u4e00\u4e2a\u670b\u53cb\u5728\u4f60\u8eab\u8fb9\u8dfa\u811a\u3002\u86af\u8693\u5c31\u662f\u8fd9\u6837\u611f\u89c9\u7684\u2014\u2014\u9e1f\u548c\u4eba\u5728\u5b83\u4eec\u9644\u8fd1\u884c\u8d70\uff0c\u9f39\u9f20\u5728\u5b83\u4eec\u9644\u8fd1\u6316\u6d1e\u3002 \u86af\u8693\u662f\u6709\u7528\u7684\u3002\u519c\u6c11\u548c\u56ed\u4e01\u559c\u6b22\u5728\u4ed6\u4eec\u7684\u571f\u5730\u4e0a\u6709\u5f88\u591a\u86af\u8693\uff0c\u56e0\u4e3a\u86af\u8693\u5728\u6316\u6398\u65f6\u6709\u52a9\u4e8e\u5f62\u6210\u66f4\u597d\u7684\u571f\u58e4\u3002\u6316\u6398\u4f7f\u571f\u58e4\u4fdd\u6301\u677e\u8f6f\u548c\u901a\u98ce\u3002\u4e00\u5e74\u5185\uff0c\u86af\u8693\u53ef\u4ee5\u5728\u4e00\u4e2a\u8db3\u7403\u573a\u5927\u5c0f\u7684\u533a\u57df\u5806\u79ef\u591a\u8fbe23000\u516c\u65a4\u7684\u94f8\u4ef6\u3002 Q\uff1a \u9605\u8bfb\u300a\u86af\u8693\u300b\u7684\u76ee\u7684\u662f\u4ec0\u4e48\uff1fA\uff1a \u628a\u4f5c\u8005\u7684\u60f3\u6cd5\u4ed8\u8bf8\u5b9e\u8df5\u3002 Q\uff1a \u6587\u7ae0\u4e2d\u54ea\u4e9b\u95ee\u9898\u65e0\u6cd5\u56de\u7b54\uff1fA\uff1a \u4e3a\u4ec0\u4e48\u4eba\u7c7b\u80fd\u50cf\u86af\u8693\u4e00\u6837\u542c\uff1f Q\uff1a \u6839\u636e\u8fd9\u7bc7\u6587\u7ae0\uff0c\u4f60\u5982\u4f55\u66f4\u597d\u5730\u7406\u89e3\u86af\u8693\uff1fA\uff1a \u9605\u8bfb\u65f6\uff0c\u9605\u8bfb\u4ee5\u89e3\u51b3\u4f5c\u8005\u5934\u8111\u4e2d\u7684\u6240\u6709\u95ee\u9898\u3002Q\uff1a \u8fd9\u7bc7\u6587\u7ae0\u7684\u6700\u4f73\u6807\u9898\u662f\u4ec0\u4e48\uff1f A. \u9009\u9879 - \u4e00\u79cd\u5e2e\u52a9\u7406\u89e3\u7684\u65b9\u6cd5 - \u4e00\u79cd\u5b9e\u8df5\u65b0\u60f3\u6cd5\u7684\u65b9\u6cd5 - \u5b66\u4e60\u6210\u4e3a\u4e00\u540d\u660e\u667a\u4f5c\u5bb6\u7684\u4e00\u79cd\u65b9\u6cd5 - \u4e00\u79cd\u66f4\u6e05\u695a\u8815\u866b\u7684\u65b9\u6cd5 \u886838|RACE\u793a\u4f8b\u3002</p> <p>\u63d0\u793a \u8bf7\u56de\u7b54\u4ee5\u4e0b\u95ee\u9898\uff1a Q\uff1a Jayhawker\u662f\u6307\u6765\u81ea\u7f8e\u56fd\u67d0\u4e2a\u5dde\u7684\u53cd\u5974\u96b6\u5236\u6fc0\u8fdb\u7ec4\u7ec7\uff0c\u4e0e\u5bc6\u82cf\u91cc\u5dde\u7684\u652f\u6301\u5974\u96b6\u5236\u6d3e\u7cfb\u53d1\u751f\u51b2\u7a81\u3002\u8fd9\u662f\u54ea\u4e2a\u5dde\uff0c\u6709\u65f6\u88ab\u79f0\u4e3aJayhawk\u5dde\uff1f A\uff1a \u582a\u8428\u65af\u3002 Q\uff1a \u54ea\u4f4d\u745e\u5178DJ\u548c\u5531\u7247\u5236\u4f5c\u4eba\u57282013\u5e74\u51ed\u501f\u300aWake Me Up\u300b\u83b7\u5f97\u4e86\u82f1\u56fd\u51a0\u519b\u5355\u66f2\uff1f A\uff1a \u8482\u59c6\u00b7\u4f2f\u683c\u6797 Q\uff1a \u8c22\u83f2\u5c14\u5fb7\u54c8\u52d2\u59c6\u7684\u8bae\u5458\u662f\u8c01\uff1fA\uff1a \u5c3c\u514b\u00b7\u514b\u83b1\u683c Q\uff1a 1925\u5e747\u670821\u65e5\uff0c\u7530\u7eb3\u897f\u5dde\u8bc9\u7ea6\u7ff0\u00b7\u6258\u9a6c\u65af\u00b7\u65af\u79d1\u666e\u65af\u6848\uff08the State of Tennessee v.John Thomas Scopes\uff09\u5728\u5168\u56fd\u8303\u56f4\u5185\u5f15\u8d77\u4e86\u8f70\u52a8\uff0c\u966a\u5ba1\u56e2\u88c1\u5b9a\u65af\u79d1\u666e\u65af\u5148\u751f\u72af\u6709\u6559\u5b66\u7f6a\uff1f A\uff1a \u7269\u79cd\u7684\u751f\u5b58 Q\uff1a \u54ea\u4e2a\u5361\u901a\u7cfb\u5217\u4ee5\u4e00\u4e2a\u53eb\u201c\u5c0f\u6211\u201d\u7684\u89d2\u8272\u4e3a\u7279\u8272\uff1fA\uff1a Muumi Q\uff1a 1966\u5e74\uff0cNigel Davies\u53d1\u73b0\u4e86\u4e00\u4f4d\u82f1\u56fd\u6a21\u7279\uff0c\u5979\u7559\u7740\u77ed\u53d1\uff0c\u96cc\u96c4\u540c\u4f53\uff0c\u540d\u53ebLesley Hornby\uff0c\u5f53\u65f6\u597916\u5c81\uff0c\u4f53\u91cd6\u82f1\u77f3\uff0841\u516c\u65a4\uff0c91\u78c5\uff09\uff0c\u5e76\u51ed\u501fMary Quant\u521b\u9020\u7684\u9ad8\u7ea7\u65f6\u5c1a\u73b0\u4ee3\u9020\u578b\u6210\u4e3a\u4e86\u201c66\u5e74\u7684\u8138\u201d A.</p> <p>\u886839 | TriviaQA\u793a\u4f8b\u3002</p> <p>\u524d\u7f00 - \u6240\u4ee5\u83ab\u59ae\u5361 - \u6240\u4ee5\u6770\u897f\u5361 \u5b8c\u6210 \u4e3a\u4e86\u773c\u775b\u5065\u5eb7\u907f\u514d\u5403\u80e1\u841d\u535c\uff0c\u56e0\u4e3a\u827e\u7c73\u4e3d\u9700\u8981\u826f\u597d\u7684\u89c6\u529b\uff0c\u800c\u83ab\u59ae\u5361\u4e0d\u9700\u8981\u3002 \u886840|WinoGrande\u793a\u4f8b\u3002\u8bf7\u6ce8\u610f\uff0cWinoGrande\u6709\u591a\u4e2a\u524d\u7f00\uff0c\u53ea\u6709\u4e00\u4e2a\u8865\u5168\uff0c\u6211\u4eec\u9009\u62e9\u8865\u5168\u56f0\u60d1\u5ea6\u6700\u4f4e\u7684\u9884\u6d4b\u524d\u7f00\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/llama/LLaMA_Open_and_Efficient_Foundation_Language_Models/","title":"LLaMA: Open and Efficient Foundation Language Models","text":"<p>Hugo Touvron, Thibaut Lavril, Gautier Izacard, Xavier Martinet, Marie-Anne Lachaux, Timoth\u00e9e Lacroix, Baptiste Rozi\u00e8re, Naman Goyal, Eric Hambro, Faisal Azhar, Aurelien Rodriguez, Armand Joulin, Edouard Grave, Guillaume Lample\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/llama/LLaMA_Open_and_Efficient_Foundation_Language_Models/#_1","title":"\u6458\u8981","text":"<p>\u672c\u6587\u4ecb\u7ecd LLaMA\uff0c\u4e00\u4e2a\u5305\u542b 7B ~ 65B\uff0870~650 \u4ebf\uff09\u53c2\u6570\u7684\u57fa\u7840\u8bed\u8a00\u6a21\u578b\u96c6\u5408\uff08a collection of foundation language models\uff09\u3002\u6211\u4eec\u7528\u6570\u4e07\u4ebf\u4e2a\uff08trillions of\uff09token \u8bad\u7ec3\u8fd9\u4e9b\u6a21\u578b\uff0c\u8bc1\u660e\u4e86\u4f7f\u7528\u5f00\u6e90\u6570\u636e\u96c6\u5c31\u80fd\u8bad\u7ec3\u51fa\u6700\u5148\u8fdb\u7684\u6a21\u578b\uff0c\u800c\u5e76\u975e\u5fc5\u987b\u4f7f\u7528\u4e13\u6709\u548c\u79c1\u6709\u6570\u636e\u96c6\u3002\u7279\u522b\u662f\uff0cLLaMA-13B \u5728\u5927\u591a\u6570\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u4f18\u4e8e GPT-3\uff08175B\uff09\uff0c\u800c LLaMA-65B \u5219\u4e0e\u6700\u4f73\u6a21\u578b Chinchilla-70B \u548c PaLM-540B \u76f8\u5f53\u3002\u6211\u4eec\u5df2\u7ecf\u5c06\u6240\u6709\u6a21\u578b\u5f00\u6e90\uff0c\u4f9b\u793e\u533a\u7814\u7a76\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/llama/LLaMA_Open_and_Efficient_Foundation_Language_Models/#1","title":"1 \u5f15\u8a00","text":"<p>\u5728\u5927\u89c4\u6a21\u6587\u672c\u8bed\u6599\u5e93\uff08massive corpora of texts\uff09\u4e0a\u8bad\u7ec3\u7684\u5927\u578b\u8bed\u8a00\u6a21\u578b \uff08Large Languages Models, LLM\uff09\uff0c\u5df2\u7ecf\u6709\u80fd\u529b\u6839\u636e\u7ed9\u5b9a\u7684\u6587\u672c\u6307\u4ee4\uff08textual instructions\uff09 \u6216\u793a\u4f8b\uff08a few examples\uff09\u6267\u884c\u65b0\u4efb\u52a1\uff08Brown \u7b49\uff0c2020\uff09\u3002</p> <p>\u8fd9\u4e9b few-shot \u5c5e\u6027\u9996\u5148\u51fa\u73b0\u5728\u5c06\u6a21\u578b\u6269\u5c55\u5230\u8db3\u591f\u5927\u7684\u89c4\u6a21\u65f6\uff08Kaplan \u7b49\uff0c2020\uff09\uff0c\u5728\u6b64\u4e4b\u540e\uff0c\u51fa\u73b0\u4e86\u5f88\u591a\u8fdb\u4e00\u6b65\u6269\u5c55\u8fd9\u4e9b\u6a21\u578b\u7684\u5de5\u4f5c\uff08Chowdhery \u7b49\uff0c2022\uff1bRae \u7b49\uff0c2021\uff09\uff0c\u5b83\u4eec\u90fd\u9075\u5faa\u4e86\u8fd9\u6837\u4e00\u4e2a\u5047\u8bbe\uff1a\u66f4\u591a\u7684\u53c2\u6570\u5c06\u4ea7\u751f\u66f4\u597d\u7684\u6027\u80fd\u3002\u7136\u800c\uff0cHoffmann \u7b49\uff082022\uff09\u7684\u6700\u65b0\u5de5\u4f5c\u8868\u660e\uff0c\u5bf9\u4e8e\u7ed9\u5b9a\u7684\u8ba1\u7b97\u9884\u7b97\uff08compute budget\uff09\uff0c\u6700\u4f73\u6027\u80fd\u5e76\u975e\u6765\u81ea\u90a3\u4e9b\u6700\u5927\u7684\u6a21\u578b\uff0c\u800c\u662f\u6765\u81ea\u90a3\u4e9b\u5728\u66f4\u591a\u6570\u636e\u4e0a\u8bad\u7ec3\u51fa\u6765\u7684\u8f83\u5c0f\u6a21\u578b\u3002</p> <p>\u201cfew-shot\u201d \u6307\u4e00\u4e2a\u6a21\u578b\u6709\u80fd\u529b\u6839\u636e\u7ed9\u5b9a\u7684\u5c11\u91cf\u793a\u4f8b\u53bb\u6267\u884c\u5176\u4ed6\u7684\u7c7b\u4f3c\u4efb\u52a1\u7684\u80fd\u529b\u3002\u8bd1\u6ce8\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/llama/LLaMA_Open_and_Efficient_Foundation_Language_Models/#11-vs","title":"1.1 \u5927\u6a21\u578b\u8bad\u7ec3\uff1a\u66f4\u591a\u53c2\u6570 vs \u66f4\u5927\u7684\u6570\u636e\u96c6","text":"<p>Hoffmann \u7b49\uff082022\uff09\u63d0\u51fa\u7684 scaling laws\uff0c\u76ee\u6807\u662f\u9488\u5bf9\u7ed9\u5b9a\u7684\u8bad\u7ec3\uff08training\uff09\u8ba1\u7b97\u9884\u7b97\uff08compute budget\uff09\uff0c\u5982\u4f55\u6700\u597d\u5730\u6269\u5c55\uff08scale\uff09\u6570\u636e\u96c6\u548c\u6a21\u578b\u5927\u5c0f\u3002\u4f46\u662f\uff0c</p> <ul> <li>\u8fd9\u4e2a\u6a21\u578b\u6ca1\u6709\u8003\u8651\u63a8\u7406\uff08inference\uff09\u9884\u7b97\uff0c\u5728\u63d0\u4f9b\u5927\u89c4\u6a21\u6a21\u578b\u63a8\u7406\u670d\u52a1\u65f6\uff0c\u8fd9\u4e00\u70b9\u5c24\u5176\u91cd\u8981\uff1a\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u7ed9\u5b9a\u4e00\u4e2a\u6027\u80fd\u76ee\u6807\uff0c\u6211\u4eec\u66f4\u60f3\u8981\u7684\u662f\u4e00\u4e2a\u63a8\u7406\u901f\u5ea6\u6700\u5feb\u800c\u975e\u8bad\u7ec3\u901f\u5ea6\u6700\u5feb\u7684\u6a21\u578b\u3002</li> <li>\u5bf9\u4e8e\u4e00\u4e2a\u7ed9\u5b9a\u7684\u6027\u80fd\u8981\u6c42\uff0c\u8bad\u7ec3\u4e00\u4e2a\u5927\u6a21\u578b\uff08a large model\uff09\u53ef\u80fd\u662f\u4e00\u79cd\u66f4\u4fbf\u5b9c\u7684\u65b9\u5f0f\uff1b\u4f46\u5bf9\u4e8e\u6700\u7ec8\u7684\u63a8\u7406\u6765\u8bf4\uff0c\u8f83\u5c0f\u7684\u6a21\u578b+\u66f4\u957f\u7684\u8bad\u7ec3\u65f6\u95f4\uff08a smaller one trained longer\uff09\u53cd\u800c\u66f4\u5b9e\u60e0\u3002\u4f8b\u5982\uff0cHoffmann \u7b49\uff082022\uff09\u5efa\u8bae\u7528 200B tokens \u6765\u8bad\u7ec3 10B \u6a21\u578b\uff0c\u4f46\u6211\u4eec\u53d1\u73b0\u5373\u4f7f\u5728 1T \u4e2a token \u4e4b\u540e\uff0c7B \u6a21\u578b\u7684\u6027\u80fd\u4ecd\u5728\u968f\u7740 token \u7684\u589e\u591a\u800c\u63d0\u9ad8\u3002</li> </ul>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/llama/LLaMA_Open_and_Efficient_Foundation_Language_Models/#12-llama","title":"1.2 LLaMA\uff1a\u51cf\u5c11\u53c2\u6570\uff0c\u589e\u5927\u6570\u636e\u96c6","text":"<p>\u672c\u6587\u7684\u91cd\u70b9\u662f\uff1a\u5bf9\u4e8e\u7ed9\u5b9a\u7684\u4e0d\u540c\u63a8\u7406\u9884\u7b97\uff08inference budgets\uff09\uff0c\u901a\u8fc7\u4f7f\u7528\u66f4\u591a token \u8fdb\u884c\u8bad\u7ec3\u7684\u65b9\u5f0f\uff08\u8d85\u8fc7\u4e1a\u5185\u5e38\u7528\u7684 token \u89c4\u6a21\uff09\u6765\u83b7\u5f97\u6700\u4f73\u7684\u6027\u80fd\uff08the best possible performance\uff09\u3002\u7531\u6b64\u5f97\u5230\u7684\u6a21\u578b\u6211\u4eec\u79f0\u4e3a LLaMA\u3002LLaMA \u7684\u53c2\u6570\u8303\u56f4\u5728 7B ~ 65B\uff0c\u6027\u80fd\u5219\u4e0e\u76ee\u524d\u4e1a\u754c\u6700\u4f73\u7684\u4e00\u4e9b\u5927\u8bed\u8a00\u6a21\u578b\u76f8\u5f53\u3002 \u4f8b\u5982\uff0c</p> <ul> <li>LLaMA-13B \u5728\u5927\u591a\u6570\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u4f18\u4e8e GPT-3\uff0c\u5c3d\u7ba1\u53c2\u6570\u8fde\u540e\u8005\u7684 10% \u90fd\u4e0d\u5230\uff1b</li> <li>LLaMA \u53ef\u4ee5\u5728\u5355\u4e2a GPU \u4e0a\u8fd0\u884c\uff0c\u56e0\u6b64\u4f7f\u5927\u6a21\u578b\u7684\u83b7\u53d6\u548c\u7814\u7a76\u66f4\u5bb9\u6613\uff0c\u800c\u4e0d\u518d\u53ea\u662f\u5c11\u6570\u51e0\u4e2a\u5927\u5382\u7684\u4e13\u5229\uff1b</li> <li>\u5728\u9ad8\u7aef\u7cfb\u5217\u4e0a\uff0cLLaMA-65B \u4e5f\u4e0e\u6700\u4f73\u7684\u5927\u8bed\u8a00\u6a21\u578b\uff08\u5982 Chinchilla \u6216 PaLM-540B\uff09\u6027\u80fd\u76f8\u5f53\u3002</li> </ul> <p>\u4e0e Chinchilla\u3001PaLM\u3001GPT-3 \u4e0d\u540c\uff0c\u6211\u4eec\u53ea\u4f7f\u7528\u516c\u5f00\u7684\u6570\u636e\uff08publicly available data\uff09\uff0c\u56e0\u6b64\u6211\u4eec\u7684\u5de5\u4f5c\u662f\u5f00\u6e90\u517c\u5bb9\u7684\uff1b</p> <ul> <li>\u76f8\u6bd4\u4e4b\u4e0b\uff0c\u5927\u591a\u6570\u73b0\u6709\u6a21\u578b\u4f9d\u8d56\u4e8e\u4e0d\u516c\u5f00\u6216\u6ca1\u6709\u6587\u6863\u7684\u6570\u636e\uff08not publicly available or undocumented\uff09\uff0c\u4f8b\u5982 \u201cBooks\u20132TB\u201d \u548c \u201cSocial media conversations\u201d\uff1b</li> <li>\u4e5f\u5b58\u5728\u4e00\u4e9b\u4f8b\u5916\uff0c\u4f8b\u5982 OPT\uff08Zhang \u7b49\uff0c2022\uff09\u3001GPT-NeoX\uff08Black \u7b49\uff0c2022\uff09\u3001BLOOM\uff08Scao \u7b49\uff0c2022\uff09\u548c GLM\uff08Zeng \u7b49\uff0c2022\uff09\uff0c\u4f46\u5b83\u4eec\u7684\u6027\u80fd\u90fd\u65e0\u6cd5\u4e0e PaLM-62B \u6216 Chinchilla \u76f8\u6bd4\u3002</li> </ul>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/llama/LLaMA_Open_and_Efficient_Foundation_Language_Models/#13","title":"1.3 \u5185\u5bb9\u7ec4\u7ec7","text":"<p>\u672c\u6587\u63a5\u4e0b\u6765\u7684\u5185\u5bb9\u7ec4\u7ec7\u5982\u4e0b\uff1a</p> <ul> <li>\u63cf\u8ff0\u6211\u4eec\u5bf9 Transformer \u67b6\u6784\uff08Vaswani \u7b49\uff0c2017\uff09\u6240\u505a\u7684\u6539\u52a8\uff0c\u4ee5\u53ca\u6211\u4eec\u7684\u8bad\u7ec3\u65b9\u6cd5\uff1b</li> <li>\u7ed9\u51fa LLaMA \u7684\u6027\u80fd\uff0c\u57fa\u4e8e\u6807\u51c6\u57fa\u51c6\u6d4b\u8bd5\u4e0e\u5176\u4ed6 LLM \u8fdb\u884c\u6bd4\u8f83\uff1b</li> <li>\u4f7f\u7528 responsible AI \u793e\u533a\u7684\u6700\u65b0\u57fa\u51c6\u6d4b\u8bd5\uff0c\u63ed\u793a LLaMA \u6a21\u578b\u4e2d\u5b58\u5728\u7684\u4e00\u4e9b\u504f\u89c1\u548c\u6bd2\u6027\uff08biases and toxicity\uff09\u3002</li> </ul>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/llama/LLaMA_Open_and_Efficient_Foundation_Language_Models/#2-approach","title":"2 \u65b9\u6cd5\uff08Approach\uff09","text":"<p>\u6211\u4eec\u7684\u8bad\u7ec3\u65b9\u6cd5\u4e0e\u524d\u4eba\u7684\u4e00\u4e9b\u5de5\u4f5c\uff08Brown \u7b49\uff0c2020\uff1bChowdhery \u7b49\uff0c2022\uff09\u7c7b\u4f3c\uff0c\u5e76\u53d7\u5230 Chinchilla scaling laws\uff08Hoffmann \u7b49\uff0c2022\uff09\u7684\u542f\u53d1\u3002\u6211\u4eec\u4f7f\u7528\u4e00\u4e2a\u6807\u51c6\u7684 optimizer \u5728\u5927\u91cf\u6587\u672c\u6570\u636e\u4e0a\u8bad\u7ec3\u5927\u578b Transformers\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/llama/LLaMA_Open_and_Efficient_Foundation_Language_Models/#21-pre-training-data","title":"2.1 \u9884\u8bad\u7ec3\u6570\u636e\uff08Pre-training Data\uff09","text":"<p>\u8bad\u7ec3\u6570\u636e\u96c6\u6709\u51e0\u79cd\u4e0d\u540c\u6765\u6e90\uff0c\u6db5\u76d6\u4e86\u591a\u4e2a\u9886\u57df\uff0c\u5982\u8868 1 \u6240\u793a\u3002</p> <p></p> <p>\u8fd9\u91cc\u7684\u6570\u636e\u96c6\u5927\u90e8\u5206\u90fd\u662f\u5176\u4ed6 LLM \u8bad\u7ec3\u7528\u8fc7\u7684\uff0c\u4f46\u6211\u4eec\u53ea\u7528\u5176\u4e2d\u516c\u5f00\u53ef\u5f97\uff08publicly available\uff09\u7684\u90e8\u5206\uff0c\u5e76\u4e14\u8981\u4fdd\u6301\u5f00\u6e90\u517c\u5bb9\uff08compatible with open sourcing\uff09\u3002\u56e0\u6b64\u6700\u540e\u5f97\u5230\u7684\u5c31\u662f\u4e00\u4e2a\u6df7\u5408\u6570\u636e\u96c6\u3002</p> <ul> <li>English CommonCrawl [67%]\uff1a\u6211\u4eec\u4f7f\u7528 CCNet pipeline\uff08Wenzek \u7b49\uff0c2020\uff09\u5bf9 2017~2020 \u7684\u4e94\u4e2a CommonCrawl dumps \u8fdb\u884c\u9884\u5904\u7406\u3002</li> <li>\u5728\u884c\u7ea7\u522b\uff08line level\uff09\u4e0a\u5bf9\u6570\u636e\u8fdb\u884c\u53bb\u91cd\uff1b</li> <li>\u4f7f\u7528 fastText \u7ebf\u6027\u5206\u7c7b\u5668\u8fdb\u884c\u8bed\u8a00\u8bc6\u522b\uff0c\u53bb\u6389\u975e\u82f1\u6587\u7f51\u9875\uff1b</li> <li>\u4f7f\u7528 n-gram \u8bed\u8a00\u6a21\u578b\u8fc7\u6ee4\u6389\u4e00\u4e9b\u4f4e\u8d28\u91cf\u5185\u5bb9\uff1b</li> <li>\u6b64\u5916\uff0c\u6211\u4eec\u8fd8\u8bad\u7ec3\u4e86\u4e00\u4e2a\u7ebf\u6027\u6a21\u578b\uff0c\u5c06\u9875\u9762\u5206\u4e3a\u4e24\u7c7b\uff1a</li> <li>\u88ab Wikipedia \u5f15\u7528\u8fc7\u7684\u7f51\u9875\uff1b</li> <li>\u6ca1\u6709\u88ab Wikipedia \u5f15\u7528\u8fc7\u7684\uff08\u968f\u673a\u91c7\u6837\u7f51\u9875\uff09\uff1b </li> <li> <p>\u5e76\u5c06\u7b2c\u4e8c\u7c7b\u4e22\u5f03\u3002</p> </li> <li> <p>C4 [15%]\uff1a\u5728\u524d\u671f\u63a2\u7d22\u6027\u5b9e\u9a8c\u4e2d\uff0c\u6211\u4eec\u89c2\u5bdf\u5230\u4f7f\u7528\u591a\u6837\u5316\u7684\u9884\u5904\u7406 CommonCrawl \u6570\u636e\u96c6\u53ef\u4ee5\u63d0\u9ad8\u6027\u80fd\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u5c06\u516c\u5f00\u53ef\u7528\u7684 C4 \u6570\u636e\u96c6\uff08Raffel \u7b49\uff0c2020\uff09\u4e5f\u5305\u542b\u5230\u4e86\u8bad\u7ec3\u6570\u636e\u4e2d\u3002\u5bf9 C4 \u7684\u9884\u5904\u7406\u4e5f\u662f\u53bb\u91cd\u548c\u8bed\u79cd\u8bc6\u522b\uff1a\u4e0e CCNet \u7684\u4e3b\u8981\u533a\u522b\u5728\u4e8e\u8d28\u91cf\u8fc7\u6ee4\uff08quality filtering\uff09\uff0c \u4e3b\u8981\u4f9d\u8d56\u4e8e\u542f\u53d1\u5f0f\u65b9\u6cd5\uff08heuristics\uff09\uff0c\u4f8b\u5982\u662f\u5426\u5b58\u5728\u6807\u70b9\u7b26\u53f7\u6216\u7f51\u9875\u4e2d\u5355\u8bcd\u548c\u53e5\u5b50\u7684\u6570\u91cf\u3002</p> </li> <li> <p>Github [4.5%]\uff1a\u4f7f\u7528\u4e86 Google BigQuery \u4e0a\u516c\u5f00\u53ef\u7528\u7684 GitHub \u6570\u636e\u96c6\uff0c\u4f46\u4ec5\u4fdd\u7559\u5176\u4e2d\u7528 Apache\u3001BSD \u548c MIT license \u7684\u9879\u76ee\u3002\u6b64\u5916\uff0c</p> </li> <li>\u57fa\u4e8e\u884c\u957f\u5ea6\uff08line length\uff09\uff0c\u5b57\u6bcd\u6216\u6570\u5b57\u5b57\u7b26\uff08alphanumeric characters\uff09\u6bd4\u4f8b\u7b49\uff0c\u7528\u542f\u53d1\u5f0f\u65b9\u6cd5\u8fc7\u6ee4\u6389\u4f4e\u8d28\u91cf\u6587\u4ef6\uff1b</li> <li>\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u5220\u9664\u4e00\u4e9b\u6a21\u677f\u6bb5\u843d\uff08boilerplate\uff09\uff0c\u4f8b\u5982 headers\uff1b</li> <li> <p>\u5728\u6587\u4ef6\u7ea7\u522b\u4e0a\u4f7f\u7528\u7cbe\u786e\u5339\u914d\u5bf9\u5f97\u5230\u7684\u6570\u636e\u96c6\u8fdb\u884c\u53bb\u91cd\u3002</p> </li> <li> <p>Wikipedia [4.5%] \u4f7f\u7528\u4e86 2022 \u5e74 6 \u6708\u81f3 8 \u6708\u7684\u4e00\u90e8\u5206 Wikipedia dumps\uff0c \u8986\u76d6 20 \u79cd\u8bed\u8a00\uff08use either the Latin or Cyrillic scripts\uff09\uff1abg\u3001ca\u3001cs\u3001da\u3001de\u3001en\u3001es\u3001fr\u3001hr\u3001hu\u3001it\u3001nl\u3001pl\u3001pt\u3001ro\u3001ru\u3001sl\u3001sr\u3001sv\u3001uk\u3002\u5220\u6389\u4e86\u5176\u4e2d\u7684\u8d85\u94fe\u63a5\u3001\u6ce8\u91ca\u548c\u5176\u4ed6 formatting boilerplate\u3002</p> </li> <li> <p>Gutenberg and Books3 [4.5%]\uff1a \u8bad\u7ec3\u6570\u636e\u96c6\u4e2d\u5305\u542b\u4e24\u4e2a\u4e66\u7c4d\u8bed\u6599\u5e93\uff1a</p> <ul> <li>Gutenberg Project\uff1a\u516c\u7248\u4e66\uff08public domain books\uff09\uff1b</li> <li>Books3 section of ThePile\uff08Gao \u7b49\uff0c2020\uff09\uff1a\u4e00\u4e2a\u7528\u4e8e\u8bad\u7ec3\u5927\u8bed\u8a00\u6a21\u578b\u7684\u516c\u5f00\u53ef\u7528\u6570\u636e\u96c6\u3002\u5728\u4e66\u7ea7\u522b\uff08book level\uff09\u53bb\u91cd\uff0c\u5185\u5bb9\u8d85\u8fc7 90% \u91cd\u590d\u7684\u4e66\u4f1a\u88ab\u5254\u9664\u51fa\u53bb\u3002</li> </ul> </li> <li> <p>ArXiv [2.5%] \u4e3a\u4e86\u8ba9\u8bad\u7ec3\u6570\u636e\u96c6\u5305\u542b\u4e00\u5b9a\u7684\u79d1\u5b66\u6570\u636e\uff08scientific data\uff09\uff0c\u6211\u4eec\u5bf9\u4e00\u4e9b arXiv Latex \u6587\u4ef6\u505a\u5904\u7406\u4e4b\u540e\u52a0\u5230\u8bad\u7ec3\u6570\u636e\u96c6\u3002</p> </li> <li>\u6309\u7167 Lewkowycz \u7b49\uff082022\uff09\u7684\u65b9\u6cd5\uff0c\u5220\u9664\u4e86 the first section \u4e4b\u524d\u7684\u6240\u6709\u5185\u5bb9\u4ee5\u53ca\u53c2\u8003\u6587\u732e\uff1b</li> <li>\u4ece .tex \u6587\u4ef6\u4e2d\u5220\u9664\u4e86\u6ce8\u91ca\uff1b</li> <li> <p>\u5bf9\u4f5c\u8005\u7f16\u5199\u7684\u5b9a\u4e49\u548c\u5b8f\uff08definitions and macros written by users\uff09\u505a\u4e86\u5185\u8054\u5c55\u5f00\uff08inline-expand\uff09\uff0c\u4f7f\u5f97\u8bba\u6587\u66f4\u52a0\u4e00\u81f4\uff08increase consistency across papers\uff09\u3002</p> </li> <li> <p>Stack Exchange [2%] Stack Exchange \u662f\u4e00\u4e2a\u9ad8\u8d28\u91cf\u7684\u95ee\u7b54\u7f51\u7ad9\uff0c\u6db5\u76d6\u4e86\u4ece\u8ba1\u7b97\u673a\u79d1\u5b66\u5230\u5316\u5b66\u7b49\u5404\u79cd\u9886\u57df\u3002 \u6211\u4eec\u7684\u8bad\u7ec3\u6570\u636e\u96c6\u5305\u62ec\u4e86\u4e00\u4e2a Stack Exchange dump\uff0c\u4fdd\u7559\u5176\u4e2d\u6700\u5927\u7684 28 \u4e2a\u7f51\u7ad9\u7684\u6570\u636e\uff0c\u4ece\u6587\u672c\u4e2d\u5220\u9664\u4e86 HTML tags \uff0c\u6309\u5206\u6570\uff08\u4ece\u9ad8\u5230\u4f4e\uff09\u5bf9\u7b54\u6848\u8fdb\u884c\u4e86\u6392\u5e8f\u3002</p> </li> <li> <p>Tokenizer\uff08\u5206\u8bcd\u5668\uff09 \u6211\u4eec\u4f7f\u7528 bytepair encoding\uff08BPE\uff09\u7b97\u6cd5\uff08Sennrich \u7b49\uff0c2015\uff09\u5bf9\u6570\u636e\u8fdb\u884c tokenization\uff0c\u7b97\u6cd5\u5b9e\u73b0\u91c7\u7528\u7684\u662f Sentence-Piece\uff08Kudo \u548c Richardson\uff0c2018\uff09\u3002\u9700\u8981 \u8bf4\u660e\u7684\u662f\uff0c\u4e3a\u4e86 decompose unknown UTF-8 characters\uff0c\u6211\u4eec\u5c06\u6240\u6709 numbers \u62c6\u5206\u4e3a\u5355\u4e2a digits\uff0c\u518d fallback \u5230 bytes\u3002</p> </li> </ul> <p>\u6700\u7ec8\uff0c\u6211\u4eec\u7684\u6574\u4e2a\u8bad\u7ec3\u6570\u636e\u96c6\u5728 tokenization \u540e\u5305\u542b\u5927\u7ea6 1.4T \u4e2a token\u3002 * \u5bf9\u4e8e\u5927\u591a\u6570\u8bad\u7ec3\u6570\u636e\uff0c\u6bcf\u4e2a token \u5728\u8bad\u7ec3\u671f\u95f4\u4ec5\u4f7f\u7528\u4e00\u6b21\uff1b * \u7ef4\u57fa\u767e\u79d1\u548c\u4e66\u7c4d\u662f\u4e2a\u4f8b\u5916\uff0c\u4f1a\u88ab\u4f7f\u7528\u4e24\u6b21\uff08two epochs\uff09\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/llama/LLaMA_Open_and_Efficient_Foundation_Language_Models/#22-architecture","title":"2.2 \u67b6\u6784\uff08Architecture\uff09","text":"<p>\u4e0e\u6700\u8fd1\u5927\u8bed\u8a00\u6a21\u578b\u7684\u7814\u7a76\u8d8b\u52bf\u4e00\u81f4\uff0c\u6211\u4eec\u7684\u7f51\u7edc\u4e5f\u57fa\u4e8e Transformer \u67b6\u6784\uff08Vaswani \u7b49\uff0c2017\uff09\u3002\u4f46\u505a\u4e86\u5f88\u591a\u6539\u8fdb\uff0c\u4e5f\u501f\u9274\u4e86\u5176\u4ed6\u6a21\u578b\uff08\u4f8b\u5982 PaLM\uff09\u4e2d\u7684\u4e00\u4e9b\u6280\u5de7\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/llama/LLaMA_Open_and_Efficient_Foundation_Language_Models/#221","title":"2.2.1 \u6539\u8fdb","text":"<p>\u4ee5\u4e0b\u662f\u4e0e\u539f\u59cb\u67b6\u6784\u7684\u4e3b\u8981\u5dee\u5f02\uff1a</p> <ul> <li> <p>\u9884\u5f52\u4e00\u5316\uff08Pre-normalization\uff09\uff1a\u53d7 GPT3 \u542f\u53d1 \u4e3a\u4e86\u63d0\u9ad8\u8bad\u7ec3\u7a33\u5b9a\u6027\uff0c\u6211\u4eec\u5bf9\u6bcf\u4e2a Transformer sub-layer \u7684\u8f93\u5165\u8fdb\u884c\u5f52\u4e00\u5316\uff0c\u800c\u4e0d\u662f\u5bf9\u8f93\u51fa\u8fdb\u884c\u5f52\u4e00\u5316\u3002 \u8fd9\u91cc\u4f7f\u7528\u7531 Zhang \u548c Sennrich\uff082019\uff09\u63d0\u51fa\u7684 RMSNorm \u5f52\u4e00\u5316\u51fd\u6570\u3002</p> </li> <li> <p>SwiGLU \u6fc0\u6d3b\u51fd\u6570\uff1a\u53d7 PaLM \u542f\u53d1\u7528 SwiGLU \u6fc0\u6d3b\u51fd\u6570\u66ff\u6362 ReLU \u975e\u7ebf\u6027\uff0c\u8be5\u51fd\u6570\u7531 Shazeer\uff082020\uff09\u63d0\u51fa\uff0c\u76ee\u7684\u662f\u63d0\u5347\u6027\u80fd\u3002 \u4f46\u6211\u4eec\u4f7f\u7528\u7684\u7ef4\u5ea6\u662f 2/3 * 4d\uff0c\u800c\u4e0d\u662f PaLM \u4e2d\u7684 4d\u3002</p> </li> <li> <p>\u65cb\u8f6c\u5d4c\u5165\uff08Rotary Embeddings\uff09\uff1a\u53d7 GPTNeo \u542f\u53d1\u53bb\u6389\u4e86\u7edd\u5bf9\u4f4d\u7f6e\u5d4c\u5165\uff08absolute positional embeddings\uff09\uff0c\u5e76\u5728\u6bcf\u4e2a\u7f51\u7edc\u5c42\u4e2d\u6dfb\u52a0\u65cb\u8f6c\u4f4d\u7f6e\u5d4c\u5165\uff08rotary positional embeddings\uff0cRoPE\uff09\u3002 RoPE \u7531 Su \u7b49\uff082021\uff09\u63d0\u51fa\u3002</p> </li> </ul>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/llama/LLaMA_Open_and_Efficient_Foundation_Language_Models/#222-llama","title":"2.2.2 \u4e0d\u540c LLaMA \u6a21\u578b\u7684\u8d85\u53c2\u6570","text":"<p>\u4e0d\u540c\u6a21\u578b\u7684\u8d85\u53c2\u6570\u8be6\u7ec6\u4fe1\u606f\u89c1\u8868 2\u3002 </p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/llama/LLaMA_Open_and_Efficient_Foundation_Language_Models/#23-optimizer","title":"2.3 \u4f18\u5316\u5668\uff08Optimizer\uff09","text":"<ul> <li>\u4f7f\u7528 AdamW \u4f18\u5316\u5668\uff08Loshchilov \u548c Hutter\uff0c2017\uff09\u5bf9\u6a21\u578b\u8fdb\u884c\u8bad\u7ec3\uff0c\u5177\u4f53\u8d85\u53c2\u6570\uff1a\\(\\beta_1=0.9, \\beta_2 = 0.95\\)\uff1b</li> <li>\u4f7f\u7528\u4e00\u4e2a cosine learning rate schedule\uff0c\u6700\u7ec8\u7684\u5b66\u4e60\u7387\u8fbe\u5230\u4e86\u6700\u5927\u5b66\u4e60\u7387\u7684 10\uff05\uff1b</li> <li>\u4f7f\u7528 0.1 \u7684\u6743\u91cd\u8870\u51cf\uff08weight decay\uff09\u548c 1.0 \u7684\u68af\u5ea6\u88c1\u526a\uff08gradient clipping\uff09\uff1b</li> <li>\u4f7f\u7528 2,000 \u4e2a warmup steps\uff0c\u5e76\u6839\u636e\u6a21\u578b\u5927\u5c0f\u6765\u8c03\u6574 learning rate \u548c batch size\u3002</li> </ul>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/llama/LLaMA_Open_and_Efficient_Foundation_Language_Models/#24-efficient-implementation","title":"2.4 \u9ad8\u6548\u5b9e\u73b0\uff08Efficient implementation\uff09\uff1a\u63d0\u9ad8\u8bad\u7ec3\u901f\u5ea6","text":"<p>\u6211\u4eec\u8fdb\u884c\u4e86\u51e0\u9879\u4f18\u5316\u6765\u63d0\u9ad8\u6a21\u578b\u7684\u8bad\u7ec3\u901f\u5ea6\u3002</p> <p>\u9996\u5148\uff0c\u6211\u4eec\u4f7f\u7528 causal multi-head attention \u7684\u4e00\u4e2a\u9ad8\u6548\u5b9e\u73b0\u6765\u51cf\u5c11\u5185\u5b58\u5360\u7528\u548c\u8fd0\u884c\u65f6\u3002\u8fd9\u79cd\u5b9e\u73b0\u662f\u53d7 Rabe \u548c Staats\uff082021\uff09\u7684\u542f\u53d1\uff0c\u5e76\u4f7f\u7528 Dao \u7b49\uff082022\uff09\u7684\u53cd\u5411\u4f20\u64ad\uff0c\u73b0\u5728 xformers \u5e93\u4e2d\u5df2\u7ecf\u63d0\u4f9b\u4e86\u3002\u4f18\u5316\u539f\u7406\uff1a\u7531\u4e8e\u8bed\u8a00\u5efa\u6a21\u4efb\u52a1\u5b58\u5728\u56e0\u679c\u7279\u6027\uff0c\u56e0\u6b64\u53ef\u4ee5\u4e0d\u5b58\u50a8\u6ce8\u610f\u529b\u6743\u91cd\uff08attention weights\uff09\uff0c\u4e0d\u8ba1\u7b97\u90a3\u4e9b\u5df2\u7ecf\u88ab\u63a9\u7801\uff08masked\uff09\u7684 key/query scores\u3002</p> <p>\u4e3a\u8fdb\u4e00\u6b65\u63d0\u9ad8\u8bad\u7ec3\u6548\u7387\uff0c\u6211\u4eec\u901a\u8fc7 checkpoint \u6280\u672f\uff0c \u51cf\u5c11\u4e86\u5728\u53cd\u5411\u4f20\u64ad\u671f\u95f4\u9700\u8981\u91cd\u65b0\u8ba1\u7b97\u7684\u6fc0\u6d3b\u6570\u91cf\u3002\u66f4\u5177\u4f53\u5730\u8bf4\uff0c</p> <ul> <li>\u6211\u4eec\u4fdd\u5b58\u4e86\u8ba1\u7b97\u6210\u672c\u9ad8\u6602\u7684\u6fc0\u6d3b\uff0c\u4f8b\u5982\u7ebf\u6027\u5c42\u7684\u8f93\u51fa\u3002\u5b9e\u73b0\u65b9\u5f0f\u662f\u624b\u52a8\u5b9e\u73b0 Transformer \u5c42\u7684\u53cd\u5411\u51fd\u6570\uff0c\u800c\u4e0d\u7528 PyTorch autograd\u3002</li> <li>\u5982 Korthikanti \u7b49\uff082022\uff09\u4e2d\u63d0\u5230\u7684\uff0c \u4e3a\u4e86\u5145\u5206\u53d7\u76ca\u4e8e\u8fd9\u79cd\u4f18\u5316\uff0c\u6211\u4eec\u9700\u8981\u901a\u8fc7\u6a21\u578b\u548c\u5e8f\u5217\u5e76\u884c\uff08model and sequence parallelism\uff09\u6765\u51cf\u5c11\u6a21\u578b\u7684\u5185\u5b58\u4f7f\u7528\u3002</li> <li>\u6b64\u5916\uff0c\u6211\u4eec\u8fd8\u5c3d\u53ef\u80fd\u5730 overlap \u6fc0\u6d3b\u8ba1\u7b97\u548c GPU \u4e4b\u95f4\u7684\u7f51\u7edc\u901a\u4fe1\uff08\u7531\u4e8e all_reduce \u64cd\u4f5c\uff09\u3002</li> </ul> <p>\u8bad\u7ec3 65B \u53c2\u6570\u7684\u6a21\u578b\u65f6\uff0c\u6211\u4eec\u7684\u4ee3\u7801\u5728 2048 \u4e2a A100 80GB GPU \u4e0a\u80fd\u5904\u7406\u7ea6 380 tokens/second/GPU\u3002\u8fd9\u610f\u5473\u7740 1.4T token \u7684\u6570\u636e\u96c6\u4e0a\u8bad\u7ec3\u5927\u7ea6\u9700\u8981 21 \u5929\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/llama/LLaMA_Open_and_Efficient_Foundation_Language_Models/#3-main-results","title":"3 \u4e3b\u8981\u7ed3\u679c\uff08Main results\uff09","text":"<p>\u53c2\u8003\u524d\u4eba\u5de5\u4f5c\uff08Brown \u7b49\uff0c2020\uff09\uff0c\u6211\u4eec\u6d4b\u8bd5\u4e86\u96f6\u6837\u672c\uff08zero-shot\uff09\u548c\u5c11\u6837\u672c\uff08few-shot\uff09\u4e24\u79cd\u4efb\u52a1\uff0c \u8fdb\u884c\u603b\u5171 20 \u4e2a\u57fa\u51c6\u6d4b\u8bd5\uff1a</p> <ul> <li>\u96f6\u6837\u672c\uff1a\u63d0\u4f9b\u4efb\u52a1\u7684\u6587\u672c\u63cf\u8ff0\u548c\u4e00\u4e2a\u6d4b\u8bd5\u793a\u4f8b\u3002\u6a21\u578b\u53ef\u4ee5\u4f7f\u7528\u5f00\u653e\u5f0f\u751f\u6210\uff08open-ended generation\uff09\u63d0\u4f9b\u7b54\u6848\uff0c\u6216\u5bf9\u63d0\u8bae\u7684\u7b54\u6848\u8fdb\u884c\u6392\u540d\uff08ranks the proposed answers\uff09\u3002</li> <li>\u5c11\u6837\u672c\uff1a\u63d0\u4f9b\u4e00\u4e9b\uff081~64 \u4e2a\uff09\u4efb\u52a1\u793a\u4f8b\u548c\u4e00\u4e2a\u6d4b\u8bd5\u793a\u4f8b\u3002\u6a21\u578b\u5c06\u6b64\u6587\u672c\u4f5c\u4e3a\u8f93\u5165\u5e76\u751f\u6210\u7b54\u6848\uff0c\u6216\u5bf9\u4e0d\u540c\u9009\u9879\u8fdb\u884c\u6392\u540d\uff08ranks different options\uff09\u3002</li> </ul> <p>\u6211\u4eec\u5c06 LLaMA \u4e0e\u5176\u4ed6\u57fa\u7840\u6a21\u578b\u8fdb\u884c\u6bd4\u8f83\uff0c\u5305\u62ec</p> <ul> <li>\u672a\u5f00\u6e90\u6a21\u578b\uff08non-publicly available\uff09\uff1aGPT-3\uff08Brown \u7b49\uff0c2020\uff09\u3001Gopher\uff08Rae \u7b49\uff0c2021\uff09\u3001Chinchilla\uff08Hoffmann \u7b49\uff0c2022\uff09\u548c PaLM\uff08Chowdhery \u7b49\uff0c2022\uff09\uff0c</li> <li>\u5f00\u6e90\u6a21\u578b\uff1aOPT \u6a21\u578b\uff08Zhang \u7b49\uff0c2022\uff09\u3001GPT-J\uff08Wang \u548c Komatsuzaki\uff0c2021\uff09\u548c GPTNeo\uff08Black \u7b49\uff0c2022\uff09\u3002</li> <li>\u5728\u7b2c 4 \u8282\u4e2d\uff0c\u6211\u4eec\u8fd8\u5c06\u7b80\u8981\u6bd4\u8f83 LLaMA \u4e0e instruction-tuned \u6a21\u578b\uff0c\u5982 OPT-IML\uff08Iyer \u7b49\uff0c2022\uff09\u548c Flan-PaLM\uff08Chung \u7b49\uff0c2022\uff09\u3002</li> </ul> <p>\u6211\u4eec\u5728\u81ea\u7531\u5f62\u5f0f\u751f\u6210\u4efb\u52a1\uff08free-form generation\uff09\u548c\u591a\u9879\u9009\u62e9\uff08multiple choice\uff09\u4efb\u52a1\u4e0a\u8bc4\u4f30 LLaMA\u3002 \u591a\u9879\u9009\u62e9\u4efb\u52a1\u7684\u76ee\u6807\u662f\u5728\u63d0\u4f9b\u7684\u4e0a\u4e0b\u6587\u57fa\u7840\u4e0a\uff0c\u4ece\u4e00\u7ec4\u7ed9\u5b9a\u9009\u9879\u4e2d\u9009\u62e9\u6700\u5408\u9002\u7684\u3002\u6211\u4eec\u4f7f\u7528\u7684\u6700\u5408\u9002\u6807\u51c6\u5c31\u662f\u53ef\u6027\u80fd\u6700\u9ad8\uff08highest likelihood\uff09\u3002</p> <ul> <li>\u5bf9\u4e8e\u5927\u90e8\u5206\u6570\u636e\u96c6\uff0c\u6211\u4eec\u9075\u5faa Gao \u7b49\uff082021\uff09\u7684\u65b9\u6cd5\uff0c\u4f7f\u7528\u7531\u5b8c\u6210\u5b57\u7b26\u6570\u5f52\u4e00\u5316\u7684\u53ef\u80fd\u6027\uff08likelihood normalized by the number of characters\uff09\uff0c</li> <li>\u5bf9\u4e8e\u5c11\u91cf\u6570\u636e\u96c6\uff08OpenBookQA\uff0cBoolQ\uff09\uff0c\u6211\u4eec\u9075\u5faa Brown \u7b49\uff082020\uff09\u7684\u65b9\u6cd5\uff0c\u6839\u636e\u5728\u201cAnswer:\u201d\u4e0a\u4e0b\u6587\u4e2d\u7ed9\u5b9a\u7684\u5b8c\u6210\u53ef\u80fd\u6027\uff08likelihood of the completion given \u201cAnswer:\u201d as context\uff09\uff0c\u7528\u516c\u5f0f\u8868\u793a\u5c31\u662f P(completion|context) / P(completion|\"Answer:\").</li> </ul>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/llama/LLaMA_Open_and_Efficient_Foundation_Language_Models/#31-common-sense-reasoning","title":"3.1 \u5e38\u8bc6\u63a8\u7406\uff08Common Sense Reasoning\uff09","text":"<p>\u4f7f\u7528\u4e0b\u9762\u516b\u4e2a\u6807\u51c6\u7684\u5e38\u8bc6\u63a8\u7406\u57fa\u51c6\u6d4b\u8bd5\uff1a</p> <ol> <li>BoolQ\uff08Clark \u7b49\uff0c2019\uff09</li> <li>PIQA\uff08Bisk \u7b49\uff0c2020\uff09</li> <li>SIQA\uff08Sap \u7b49\uff0c2019\uff09</li> <li>HellaSwag\uff08Zellers \u7b49\uff0c2019\uff09</li> <li>WinoGrande\uff08Sakaguchi \u7b49\uff0c2021\uff09</li> <li>OpenBookQA\uff08Mihaylov \u7b49\uff0c2018\uff09</li> <li>&amp; 8. ARC easy \u548c challenge\uff08Clark \u7b49\uff0c2018\uff09</li> </ol> <p>\u8fd9\u4e9b\u6570\u636e\u96c6\u5305\u62ec Cloze \u548c Winograd \u98ce\u683c\u7684\u4efb\u52a1\uff0c\u4ee5\u53ca\u591a\u9879\u9009\u62e9\u9898\u3002 \u4e0e\u8bed\u8a00\u5efa\u6a21\u793e\u533a\u7c7b\u4f3c\uff0c\u6211\u4eec\u4f7f\u7528\u96f6\u6837\u672c\u8bbe\u7f6e\u8fdb\u884c\u8bc4\u4f30\u3002 \u5728\u8868 3 \u4e2d\uff0c\u6211\u4eec\u4e0e\u5404\u79cd\u89c4\u6a21\u7684\u73b0\u6709\u6a21\u578b\u8fdb\u884c\u6bd4\u8f83\u3002 </p> <p>\u51e0\u70b9\u8bf4\u660e\uff1a</p> <p>\u9664\u4e86 BoolQ\uff0cLLaMA-65B \u5728\u5176\u4ed6\u6240\u6709\u57fa\u51c6\u6d4b\u8bd5\u90fd\u4f18\u4e8e Chinchilla-70B\u3002 \u540c\u6837\uff0c\u8be5\u6a21\u578b\u5728\u9664\u4e86 BoolQ \u548c WinoGrande \u4e4b\u5916\u7684\u6240\u6709\u5730\u65b9\u90fd\u8d85\u8fc7\u4e86 PaLM-540B\u3002 LLaMA-13B \u6a21\u578b\u5c3d\u7ba1\u6bd4 GPT-3 \u5c0f 90\uff05 \u591a\uff0c\u4f46\u5728\u5927\u591a\u6570\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u8868\u73b0\u6bd4 GPT-3 \u8fd8\u597d\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/llama/LLaMA_Open_and_Efficient_Foundation_Language_Models/#32-closed-book-question-answering","title":"3.2 \u95ed\u5377\u95ee\u7b54\uff08Closed-book Question Answering\uff09","text":"<p>\u6211\u4eec\u5c06 LLaMA \u4e0e\u73b0\u6709\u7684\u5927\u8bed\u8a00\u6a21\u578b\u8fdb\u884c\u6bd4\u8f83\uff0c\u5728\u4e24\u4e2a\u95ed\u5377\u95ee\u7b54\u57fa\u51c6\u6d4b\u8bd5\uff1a</p> <p>\u81ea\u7136\u95ee\u9898\uff08Kwiatkowski \u7b49\uff0c2019\uff09 TriviaQA\uff08Joshi \u7b49\uff0c2017\uff09\u3002 \u5bf9\u4e8e\u8fd9\u4e24\u4e2a\u57fa\u51c6\u6d4b\u8bd5\uff0c\u5728\u76f8\u540c\u8bbe\u7f6e\uff08\u4f8b\u5982\uff0c\u6a21\u578b\u4e0d\u80fd\u8bbf\u95ee\u90a3\u4e9b\u6709\u52a9\u4e8e\u56de\u7b54\u95ee\u9898\u7684\u6587\u6863\uff09\u4e0b\uff0c \u53d6\u5f97\u4e86\u5b8c\u5168\u76f8\u540c\u7684\u6027\u80fd\uff08exact match performance\uff09\u3002 \u8868 4 \u548c\u8868 5 \u5206\u522b\u662f\u5728\u8fd9\u4e24\u4e2a benchmark \u4e0a\u7684\u7ed3\u679c\uff0c</p> <p></p> <p>\u5728\u8fd9\u4e24\u4e2a\u57fa\u51c6\u6d4b\u8bd5\u4e2d\uff0cLLaMA-65B \u5728\u96f6\u6837\u672c\u548c\u5c11\u6837\u672c\u8bbe\u7f6e\u4e2d\u90fd\u5b9e\u73b0\u4e86 state-of-the-arts \u7684\u6027\u80fd\u3002 \u66f4\u91cd\u8981\u7684\u662f\uff0cLLaMA-13B \u5728\u8fd9\u4e9b\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u4e0e GPT-3 \u548c Chinchilla \u76f8\u6bd4\u4e5f\u5177\u6709\u7ade\u4e89\u529b\uff0c\u5c3d\u7ba1\u53c2\u6570\u53ea\u6709\u540e\u8005\u7684 10%~20\uff05\uff085-10 smaller\uff09\u3002 \u5728\u63a8\u7406\u573a\u666f\uff0cLLaMA-13B \u80fd\u5728\u5355\u4e2a V100 GPU \u4e0a\u8fd0\u884c\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/llama/LLaMA_Open_and_Efficient_Foundation_Language_Models/#33-reading-comprehension","title":"3.3 \u9605\u8bfb\u7406\u89e3\uff08Reading Comprehension\uff09","text":"<p>\u9605\u8bfb\u7406\u89e3\u80fd\u529b\u6d4b\u8bd5\u57fa\u4e8e \u201cRACE \u9605\u8bfb\u7406\u89e3\u57fa\u51c6\u6d4b\u8bd5\u201d\uff08Lai \u7b49\uff0c2017\uff09\u3002 \u8fd9\u4e2a\u6570\u636e\u96c6\u662f\u4ece\u4e3a\u4e2d\u56fd\u521d\u4e2d\u548c\u9ad8\u4e2d\u751f\u8bbe\u8ba1\u7684\u82f1\u6587\u9605\u8bfb\u7406\u89e3\u8003\u8bd5\u4e2d\u6536\u96c6\u7684\u3002 \u4e00\u4e9b\u8bbe\u7f6e\u9075\u5faa Brown \u7b49\uff082020\uff09\uff0c\u6d4b\u8bd5\u7ed3\u679c\u89c1\u8868 6\uff0c </p> <p>\u5728\u8fd9\u4e9b\u57fa\u51c6\u6d4b\u8bd5\u4e2d\uff0cLLaMA-65B \u4e0e PaLM-540B \u76f8\u5f53\uff0c\u800c LLaMA-13B \u6bd4 GPT-3 \u597d\u51e0\u4e2a\u767e\u5206\u70b9\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/llama/LLaMA_Open_and_Efficient_Foundation_Language_Models/#34-mathematical-reasoning","title":"3.4 \u6570\u5b66\u63a8\u7406\uff08Mathematical reasoning\uff09","text":"<p>\u5728\u4e24\u4e2a\u6570\u5b66\u63a8\u7406\u57fa\u51c6\u6d4b\u8bd5\u4e0a\u8bc4\u4f30\u6a21\u578b\uff1a</p> <p>MATH\uff08Hendrycks \u7b49\uff0c2021\uff09\uff1a\u4e00\u4e2a\u5305\u542b 12K \u4e2a\u521d\u4e2d\u548c\u9ad8\u4e2d\u6570\u5b66\u95ee\u9898\u7684\u6570\u636e\u96c6\uff0cLaTeX \u683c\u5f0f\uff1b GSM8k\uff08Cobbe \u7b49\uff0c2021\uff09\uff1a\u4e00\u4e2a\u521d\u4e2d\u6570\u5b66\u95ee\u9898\u96c6\u3002 \u8868 7 \u6bd4\u8f83\u4e86 PaLM \u548c Minerva\uff08Lewkowycz \u7b49\uff0c2022\uff09\u8fdb\u884c\u6bd4\u8f83\u3002</p> <p></p> <p>\u8868 7\uff1a\u91cf\u5316\u63a8\u7406\u6570\u636e\u96c6\uff08quantitative reasoning datasets\uff09\u4e0a\u7684\u6a21\u578b\u6027\u80fd\u3002 For majority voting, we use the same setup as Minerva, with k = 256 samples for MATH and k = 100 for GSM8k (Minerva 540B uses k = 64 for MATH and and k = 40 for GSM8k). LLaMA-65B outperforms Minerva 62B on GSM8k, although it has not been fine-tuned on mathematical data.</p> <p>Minerva \u662f\u4e00\u7cfb\u5217\u5728 ArXiv \u548c Math Web Pages \u4e2d\u63d0\u53d6\u7684 38.5B token \u4e0a finetune \u800c\u6210\u7684 PaLM \u6a21\u578b\uff0c PaLM \u548c LLaMA \u90fd\u6ca1\u6709\u5728\u6570\u5b66\u6570\u636e\u4e0a\u8fdb\u884c finetune \u3002 PaLM \u548c Minerva \u7684\u6027\u80fd\u6570\u5b57\u53d6\u81ea Lewkowycz \u7b49\uff082022\uff09\uff0c\u6211\u4eec\u5206\u522b\u7528\u548c\u4e0d\u7528 maj1@k \u8fdb\u884c\u4e86\u6bd4\u8f83\u3002 maj1@k \u8868\u793a\u6211\u4eec\u4e3a\u6bcf\u4e2a\u95ee\u9898\u751f\u6210 k \u4e2a\u6837\u672c\uff0c\u5e76\u8fdb\u884c\u591a\u6570\u6295\u7968\uff08Wang \u7b49\uff0c2022\uff09\u3002</p> <p>\u5728 GSM8k \u4e0a\uff0c\u53ef\u4ee5\u770b\u5230 LLaMA-65B \u4f18\u4e8e Minerva-62B\uff0c\u5c3d\u7ba1\u5b83\u6ca1\u6709\u5728\u6570\u5b66\u6570\u636e\u4e0a\u8fdb\u884c\u5fae\u8c03\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/llama/LLaMA_Open_and_Efficient_Foundation_Language_Models/#35-code-generation","title":"3.5 \u4ee3\u7801\u751f\u6210\uff08Code generation\uff09","text":"<p>\u8bc4\u4f30\u6a21\u578b\u4ece\u7ed9\u51fa\u7684\u81ea\u7136\u8bed\u8a00\u63cf\u8ff0\u6765\u751f\u6210\u4ee3\u7801\u7684\u80fd\u529b\uff0c\u4f7f\u7528\u4e86\u4e24\u4e2a\u57fa\u51c6\u6d4b\u8bd5\uff1a</p> <p>HumanEval\uff08Chen \u7b49\uff0c2021\uff09 MBPP\uff08Austin \u7b49\uff0c2021\uff09 \u8fd9\u4e24\u4e2a\u6d4b\u8bd5\uff0c\u90fd\u662f\u7ed9\u6a21\u578b\u51e0\u53e5\u5173\u4e8e\u7a0b\u5e8f\u7684\u63cf\u8ff0\uff0c\u4ee5\u53ca\u4e00\u4e9b\u8f93\u5165\u8f93\u51fa\u793a\u4f8b\u3002</p> <p>In HumanEval, it also receives a function signature, and the prompt is formatted as natural code with the textual description and tests in a program that fits the description and satisfies the test cases.</p> <p>\u5728\u8868 8 \u4e2d\uff0c\u6211\u4eec\u5c06 LLaMA \u7684 pass@1 \u5f97\u5206\u4e0e\u672a\u5728\u4ee3\u7801\u4e0a\u8fdb\u884c\u5fae\u8c03\u7684\u73b0\u6709\u8bed\u8a00\u6a21\u578b\u8fdb\u884c\u4e86\u6bd4\u8f83\uff0c\u5373 PaLM \u548c LaMDA\uff08Thoppilan \u7b49\uff0c2022\uff09\u3002 PaLM \u548c LLaMA \u662f\u5728\u5305\u542b\u76f8\u4f3c\u6570\u91cf\u7684\u4ee3\u7801 token \u7684\u6570\u636e\u96c6\u4e0a\u8bad\u7ec3\u7684\u3002</p> <p>\u8868 8\uff1aModel performance for code generation. We report the pass@ score on HumanEval and MBPP. HumanEval generations are done in zero-shot and MBBP with 3-shot prompts similar to Austin et al. (2021). The values marked with are read from figures in Chowdhery et al. (2022).</p> <p>\u5982\u8868 8 \u6240\u793a\uff0c</p> <p>\u5bf9\u4e8e\u7c7b\u4f3c\u6570\u91cf\u7684\u53c2\u6570\uff0cLLaMA \u4f18\u4e8e\u5176\u4ed6\u4e00\u822c\u6a21\u578b\uff0c\u5982 LaMDA \u548c PaLM\uff0c\u5b83\u4eec\u6ca1\u6709\u4e13\u95e8\u9488\u5bf9\u4ee3\u7801\u8fdb\u884c\u8bad\u7ec3\u6216\u5fae\u8c03\u3002 LLaMA \u5177\u6709 13B \u53c2\u6570\u53ca\u4ee5\u4e0a\uff0c\u5728 HumanEval \u548c MBPP \u4e0a\u5747\u4f18\u4e8e LaMDA 137B\u3002 LLaMA 65B \u4e5f\u4f18\u4e8e PaLM 62B\uff0c\u5373\u4f7f\u5b83\u7684\u8bad\u7ec3\u65f6\u95f4\u66f4\u957f\u3002 \u672c\u8868\u4e2d pass@1 \u7ed3\u679c\u662f\u901a\u8fc7 temperature=0.1 \u91c7\u6837\u5f97\u5230\u7684\u3002 pass@100 \u548c pass@80 \u6307\u6807\u662f\u901a\u8fc7 temperature=0.8 \u83b7\u5f97\u7684\u3002 \u6211\u4eec\u4f7f\u7528\u4e0e Chen \u7b49\uff082021\uff09\u76f8\u540c\u7684\u65b9\u6cd5\u6765\u83b7\u5f97 pass@k \u7684\u65e0\u504f\u4f30\u8ba1\u3002</p> <p>\u901a\u8fc7\u5728\u4ee3\u7801\u7279\u5b9a token \u4e0a\u8fdb\u884c\u5fae\u8c03\uff0c\u53ef\u4ee5\u63d0\u9ad8\u751f\u6210\u4ee3\u7801\u7684\u6027\u80fd\u3002\u4f8b\u5982\uff0c</p> <p>PaLM-Coder\uff08Chowdhery \u7b49\uff0c2022\uff09\u5c06 PaLM \u5728 HumanEval \u4e0a\u7684 pass@1 \u5206\u6570\u4ece PaLM \u7684 26.2\uff05\u63d0\u9ad8\u5230 36\uff05\u3002 \u5176\u4ed6\u4e13\u95e8\u9488\u5bf9\u4ee3\u7801\u8fdb\u884c\u8bad\u7ec3\u7684\u6a21\u578b\u5728\u8fd9\u4e9b\u4efb\u52a1\u4e0a\u4e5f\u8868\u73b0\u6bd4\u901a\u7528\u6a21\u578b\u66f4\u597d\uff08Chen \u7b49\uff0c2021; Nijkamp \u7b49\uff0c2022; Fried \u7b49\uff0c2022\uff09\u3002 \u5728\u4ee3\u7801 token \u4e0a\u8fdb\u884c\u5fae\u8c03\u8d85\u51fa\u4e86\u672c\u6587\u7684\u8303\u56f4\u3002</p> <p>3.6 \u5927\u89c4\u6a21\u591a\u4efb\u52a1\u8bed\u8a00\u7406\u89e3\uff08Massive Multitask Language Understanding\uff09 \u5927\u89c4\u6a21\u591a\u4efb\u52a1\u8bed\u8a00\u7406\u89e3\u57fa\u51c6\u6d4b\u8bd5\uff08MMLU\uff09\u7531 Hendrycks \u7b49\uff082020\uff09\u63d0\u51fa\uff0c \u5305\u62ec\u6db5\u76d6\u4eba\u6587\u3001STEM \u548c\u793e\u4f1a\u79d1\u5b66\u7b49\u5404\u79cd\u77e5\u8bc6\u9886\u57df\u7684\u591a\u9879\u9009\u62e9\u9898\u3002 \u6211\u4eec\u5728 5-shot \u8bbe\u7f6e\u4e0b\u4f7f\u7528\u57fa\u51c6\u6d4b\u8bd5\u63d0\u4f9b\u7684\u793a\u4f8b\u6765\u8bc4\u4f30\u6211\u4eec\u7684\u6a21\u578b\uff0c\u7ed3\u679c\u5982\u8868 9 \u6240\u793a\uff0c</p> <p>\u8868 9\uff1aMassive Multitask Language Understanding (MMLU). Five-shot accuracy</p> <p>\u53ef\u4ee5\u770b\u5230\uff0cLLaMA-65B \u843d\u540e\u4e8e Chinchilla-70B \u548c PaLM-540B \u51e0\u4e2a\u767e\u5206\u70b9\uff0c\u5e76\u4e14\u5728\u5927\u90e8\u5206\u9886\u57df\u90fd\u662f\u5982\u6b64\u3002 \u4e00\u4e2a\u53ef\u80fd\u7684\u89e3\u91ca\u662f\u6211\u4eec\u5728\u9884\u8bad\u7ec3\u6570\u636e\u4e2d\u4f7f\u7528\u4e86\u6709\u9650\u6570\u91cf\u7684\u4e66\u7c4d\u548c\u5b66\u672f\u8bba\u6587\uff0c\u5373 ArXiv\u3001Gutenberg \u548c Books3\uff0c\u603b\u5171\u53ea\u6709 177GB\uff0c \u800c\u540e\u4e24\u4e2a\u6a21\u578b\u662f\u5728\u591a\u8fbe 2TB \u7684\u4e66\u7c4d\u4e0a\u8fdb\u884c\u8bad\u7ec3\u7684\u3002 Gopher\u3001Chinchilla \u548c PaLM \u4f7f\u7528\u7684\u5927\u91cf\u4e66\u7c4d\u53ef\u80fd\u4e5f\u89e3\u91ca\u4e86\u4e3a\u4ec0\u4e48 Gopher \u5728\u8fd9\u4e2a\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u8868\u73b0\u4f18\u4e8e GPT-3\uff0c\u800c\u5728\u5176\u4ed6\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u8868\u73b0\u53ea\u662f\u5dee\u4e0d\u591a\u3002</p> <p>3.7 \u8bad\u7ec3\u8fc7\u7a0b\u4e2d\u6027\u80fd\u7684\u53d8\u5316 \u5728\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u8ddf\u8e2a\u4e86 LLaMA \u5728\u4e00\u4e9b\u95ee\u9898\u56de\u7b54\u548c\u5e38\u8bc6\u57fa\u51c6\u6d4b\u8bd5\u4e0a\u7684\u6027\u80fd\uff0c\u5982\u56fe 2\uff0c</p> <p>\u56fe 2\uff1aEvolution of performance on question answering and common sense reasoning during training</p> <p>\u5728\u5927\u591a\u6570\u57fa\u51c6\u6d4b\u8bd5\u4e2d\uff0c\u6027\u80fd\u968f\u7740 token \u6570\u91cf\u7a33\u6b65\u63d0\u9ad8\uff0c\u5e76\u4e0e\u6a21\u578b\u7684 training perplexity \u76f8\u5173\uff08\u89c1\u56fe 1\uff09\u3002</p> <p>\u56fe 1\uff1aTraining loss over train tokens for the 7B, 13B, 33B, and 65 models. LLaMA-33B and LLaMA- 65B were trained on 1.4T tokens. The smaller models were trained on 1.0T tokens. All models are trained with a batch size of 4M tokens.</p> <p>SIQA \u548c WinoGrande \u662f\u4f8b\u5916\u3002</p> <p>\u7279\u522b\u662f\u5728 SIQA \u4e0a\uff0c\u6211\u4eec\u89c2\u5bdf\u5230\u6027\u80fd\u53d8\u5316\u5f88\u5927\uff0c\u8fd9\u53ef\u80fd\u8868\u660e\u8fd9\u4e2a\u57fa\u51c6\u6d4b\u8bd5\u4e0d\u53ef\u9760\uff1b \u5728 WinoGrande \u4e0a\uff0c\u6027\u80fd\u4e0etraining perplexity\u7684\u76f8\u5173\u6027\u4e0d\u592a\u597d\uff1aLLaMA-33B \u548c LLaMA-65B \u5728\u8bad\u7ec3\u671f\u95f4\u7684\u6027\u80fd\u76f8\u4f3c\u3002 4 \u6307\u4ee4\u5fae\u8c03\uff08Instruction Finetuning\uff09 \u5728\u672c\u8282\u4e2d\uff0c\u6211\u4eec\u5c06\u8bf4\u660e\u7b80\u5355\u5730\u5728\u6307\u4ee4\u6570\u636e\u4e0a\u8fdb\u884c\u5fae\u8c03\uff0c\u5c31\u4f1a\u8fc5\u901f\u63d0\u9ad8\u5728 MMLU \u4e0a\u7684\u6027\u80fd\u3002</p> <p>\u5c3d\u7ba1 LLaMA-65B \u7684\u672a\u5fae\u8c03\u7248\u672c\u5df2\u7ecf\u80fd\u591f follow \u57fa\u672c\u6307\u4ee4\uff0c\u4f46\u6211\u4eec\u89c2\u5bdf\u5230\u8fdb\u884c\u4e00\u70b9\u5fae\u8c03\u53ef\u4ee5\u63d0\u9ad8\u5728 MMLU \u4e0a\u7684\u6027\u80fd\uff0c \u5e76\u80fd\u8fdb\u4e00\u6b65\u63d0\u9ad8\u6a21\u578b follow \u6307\u4ee4\u7684\u80fd\u529b\u3002 \u7531\u4e8e\u8fd9\u4e0d\u662f\u672c\u6587\u7684\u91cd\u70b9\uff0c\u6211\u4eec\u53ea\u8fdb\u884c\u4e86\u4e00\u6b21\u5b9e\u9a8c\uff0c\u9075\u5faa Chung \u7b49\uff082022\uff09\u7684\u76f8\u540c\u534f\u8bae\u6765\u8bad\u7ec3\u4e00\u4e2a\u6307\u4ee4\u6a21\u578b LLaMA-I\u3002 LLaMA-I \u5728 MMLU \u4e0a\u7684\u7ed3\u679c\u89c1\u8868 10\uff0c\u4e0e\u5f53\u524d\u4e2d\u7b49\u89c4\u6a21\u7684\u6307\u4ee4\u5fae\u8c03\u6a21\u578b OPT-IML\uff08Iyer \u7b49\uff0c2022\uff09\u548c Flan-PaLM \u7cfb\u5217\uff08Chung \u7b49\uff0c2022\uff09\u8fdb\u884c\u4e86\u6bd4\u8f83\uff1a</p> <p>\u8868 10\uff1aInstruction finetuning \u2013 MMLU (5-shot). Comparison of models of moderate size with and without instruction finetuning on MMLU.</p> <p>\u5c3d\u7ba1\u8fd9\u91cc\u4f7f\u7528\u7684\u6307\u4ee4\u5fae\u8c03\u65b9\u6cd5\u5f88\u7b80\u5355\uff0c\u4f46\u6211\u4eec\u5728 MMLU \u4e0a\u8fbe\u5230\u4e86 68.9\uff05\u3002 LLaMA-I\uff0865B\uff09\u5728 MMLU \u4e0a\u4f18\u4e8e\u73b0\u6709\u7684\u4e2d\u7b49\u89c4\u6a21\u6307\u4ee4\u5fae\u8c03\u6a21\u578b\uff0c\u4f46\u4ecd\u8fdc\u8fdc\u843d\u540e\u4e8e\u6700\u5148\u8fdb\u7684 GPT code-davinci-002 \u5728 MMLU \u4e0a\u7684 77.4\uff08\u6570\u5b57\u6765\u81ea Iyer \u7b49\uff082022\uff09\uff09\u3002\u6709\u5173 57 \u4e2a\u4efb\u52a1\u7684 MMLU \u6027\u80fd\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u9644\u5f55\u7684\u8868 16\u3002</p> <p>5 Bias, Toxicity and Misinformation Large language models have been showed to reproduce and amplify biases that are existing in the training data (Sheng et al., 2019; Kurita et al., 2019), and to generate toxic or offensive content (Gehman et al., 2020). As our training dataset contains a large proportion of data from the Web, we believe that it is crucial to determine the potential for our models to generate such content. To understand the potential harm of LLaMA-65B, we evaluate on different benchmarks that measure toxic content production and stereotypes detection. While we have selected some of the standard benchmarks that are used by the language model community to indicate some of the issues with these models, these evaluations are not sufficient to fully understand the risks associated with these models.</p> <p>5.1 RealToxicityPrompts Language models can generate toxic language, e.g., insults, hate speech or threats. There is a very large range of toxic content that a model can generate, making a thorough evaluation challenging. Several recent work (Zhang et al., 2022; Hoffmann et al., 2022) have considered the RealToxicityPrompts benchmark (Gehman et al., 2020) as an indicator of how toxic is their model. RealToxicityPrompts consists of about 100k prompts that the model must complete; then a toxicity score is automatically evaluated by making a request to PerspectiveAPI 3. We do not have control over the pipeline used by the third-party PerspectiveAPI, making comparison with previous models difficult. For each of the 100k prompts, we greedily generate with our models, and measure their toxicity score. The score per prompt ranges from 0 (non-toxic) to 1 (toxic). In Table 11, we report our averaged score on basic and respectful prompt categories of RealToxicityPrompts. These scores are \u201ccomparable\u201d with what we observe in the literature (e.g., 0.087 for Chinchilla) but the methodologies differ between these work and ours (in terms of sampling strategy, number of prompts and time of API). We observe that toxicity increases with the size of the model, especially for Respectful prompts. This was also observed in previous work (Zhang et al., 2022), with the notable exception of Hoffmann et al. (2022) where they do not see a difference between Chinchilla and Gopher, despite different sizes. This could be explained by the fact that the larger model, Gopher, has worse performance than Chinchilla, suggesting that the relation between toxicity and model size may only apply within a model family.</p> <p>5.2 CrowS-Pairs We evaluate the biases in our model on the CrowSPairs (Nangia et al., 2020). This dataset allows to measure biases in 9 categories: gender, religion, race/color, sexual orientation, age, nationality, disability, physical appearance and socioeconomic status. Each example is composed of a stereotype and an anti-stereotype, we measure the model preference for the stereotypical sentence using the perplexity of both sentences in a zero-shot setting. Higher scores thus indicate higher bias. We compare with GPT-3 and OPT-175B in Table 12. LLaMA compares slightly favorably to both models on average. Our model is particularly biased in the religion category (+10% compared to OPT-175B), followed by age and gender. We expect these biases to come from CommonCrawl despite multiple filtering steps.</p> <p>5.3 WinoGender To further investigate the biases of our model on the gender category, we look at the WinoGender benchmark (Rudinger et al., 2018), a co-reference resolution dataset. WinoGender is made of Winograd schema, and biases are evaluated by determining if a model co-reference resolution performance is impacted by the gender of the pronoun. More precisely, each sentence has three mentions: an \u201coccupation\u201d, a \u201cparticipant\u201d, and a \u201cpronoun\u201d where the pronoun is co-referencing either the occupation or participant. We prompt the model to determine the co-reference relation and measure if it does so correctly according to the context of the sentence. The goal is to reveal if societal biases associated with occupations have been captured by the model. For example, a sentence in the WinoGender dataset is \u201cThe nurse notified the patient that his shift would be ending in an hour.\u201d, which is followed by \u2018His\u2019 refers to. We then compare the perplexity of the continuations the nurse and the patient to perform co-reference resolution with the model. We evaluate the performance when using 3 pronouns: \u201cher/her/she\u201d, \u201chis/him/he\u201d and \u201ctheir/them/someone\u201d (the different choices corresponding to the grammatical function of the pronoun. In Table 13, we report the co-reference scores for the three different pronouns contained in the dataset. We observe that our model is significantly better at performing co-reference resolution for the \u201ctheir/them/someone\u201d pronouns than for the \u201cher/her/she\u201d and \u201chis/him/he\u201d pronouns. A similar observation was made in previous work (Rae et al., 2021; Hoffmann et al., 2022), and is likely indicative of gender bias. Indeed, in the case of the \u201cher/her/she\u201d and \u201chis/him/he\u201d pronouns, the model is probably using the majority gender of the occupation to perform co-reference resolution, instead of using the evidence of the sentence. To further investigate this hypothesis, we look at the set of \u201cgotcha\u201d cases for the \u201cher/her/she\u201d and \u201chis/him/he\u201d pronouns in the WinoGender dataset. Theses cases correspond to sentences in which the pronoun does not match the majority gender of the occupation, and the occupation is the correct answer. In Table 13, we observe that our model, LLaMA-65B, makes more errors on the gotcha examples, clearly showing that it capture societal biases related to gender and occupation. The drop of performance exists for \u201cher/her/she\u201d and \u201chis/him/he\u201d pronouns, which is indicative of biases regardless of gender.</p> <p>In Table 14, we report the performance of our models on both questions to measure truthful models and the intersection of truthful and informative. Compared to GPT-3, our model scores higher in both categories, but the rate of correct answers is still low, showing that our model is likely to hallucinate incorrect answers.</p> <p>5.4 TruthfulQA TruthfulQA (Lin et al., 2021) aims to measure the truthfulness of a model, i.e., its ability to identify when a claim is true. Lin et al. (2021) consider the definition of \u201ctrue\u201d in the sense of \u201cliteral truth about the real world\u201d, and not claims that are only true in the context of a belief system or tradition. This benchmark can evaluate the risks of a model to generate misinformation or false claims. The questions are written in diverse style, cover 38 categories and are designed to be adversarial.</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/llama/LLaMA_Open_and_Efficient_Foundation_Language_Models/#6-carbon-footprint","title":"6 \u78b3\u8db3\u8ff9\uff08Carbon footprint\uff09","text":"<p>\u8bad\u7ec3 LLaMA \u6d88\u8017\u4e86\u5927\u91cf\u80fd\u6e90\uff0c\u6392\u653e\u4e86\u5f88\u591a\u4e8c\u6c27\u5316\u78b3\u3002\u6211\u4eec\u9075\u5faa\u6700\u8fd1\u7684\u6587\u732e\uff0c\u5c06\u603b\u80fd\u8017\u548c\u4ea7\u751f\u7684\u78b3\u8db3\u8ff9\u5206\u89e3\u5728\u8868 15 \u4e2d\uff0c</p> <p>\u8868 15\uff1a Carbon footprint of training different models in the same data center. We follow Wu et al. (2022) to compute carbon emission of training OPT, BLOOM and our models in the same data center. For the power consumption of a A100-80GB, we take the thermal design power for NVLink systems, that is 400W. We take a PUE of 1.1 and a carbon intensity factor set at the national US average of 0.385 kg CO2e per KWh.</p> <p>\u6211\u4eec\u91c7\u7528 Wu \u7b49(2022)\u7684\u516c\u5f0f\u6765\u4f30\u7b97\u8bad\u7ec3\u6a21\u578b\u6240\u9700\u7684\u74e6\u65f6\u6570\uff08Watt-hour, Wh\uff09\u548c\u78b3\u6392\u653e\u91cf\uff08carbon emissions\uff09\u3002 \u5bf9\u4e8e\u74e6\u65f6\u6570\uff0c\u6211\u4eec\u4f7f\u7528\u4ee5\u4e0b\u516c\u5f0f\uff1a</p> <p>Wh = GPU-h * (GPU power consumption) * PUE</p> <p>\u5176\u4e2d\uff0c\u6211\u4eec\u7684\u529f\u7387\u4f7f\u7528\u6548\u7387\uff08PUE\uff09\u4e3a 1.1\u3002 \u4ea7\u751f\u7684\u78b3\u6392\u653e\u91cf\u53d6\u51b3\u4e8e\u7528\u4e8e\u8bad\u7ec3\u6240\u5728\u7684\u6570\u636e\u4e2d\u5fc3\u7684\u4f4d\u7f6e\u3002\u4f8b\u5982\uff0c</p> <p>BLOOM \u4f7f\u7528\u6392\u653e 0.057kg CO2eq/KWh \u7684\u7535\u7f51\uff0c\u4ea7\u751f 27 tCO2eq \u7684\u6392\u653e\u91cf\uff0c OPT \u4f7f\u7528\u6392\u653e 0.231kg CO2eq/KWh \u7684\u7535\u7f51\uff0c\u5bfc\u81f4 82 tCO2eq \u7684\u6392\u653e\u91cf\u3002 \u5728\u672c\u7814\u7a76\u4e2d\uff0c\u6211\u4eec\u611f\u5174\u8da3\u7684\u662f\u5728\u540c\u4e00\u4e2a\u6570\u636e\u4e2d\u5fc3\u7684\u60c5\u51b5\u4e0b\uff0c\u4e0d\u540c\u6a21\u578b\u8bad\u7ec3\u7684\u78b3\u6392\u653e\u6210\u672c\u3002 \u56e0\u6b64\uff0c\u6211\u4eec\u4e0d\u8003\u8651\u6570\u636e\u4e2d\u5fc3\u7684\u4f4d\u7f6e\uff0c\u5e76\u4f7f\u7528\u7f8e\u56fd\u56fd\u5bb6\u5e73\u5747\u78b3\u5f3a\u5ea6\u7cfb\u6570\uff08carbon intensity factor\uff09 0.385kg CO2eq/KWh\u3002 \u90a3\u4e48\u6b64\u65f6\u5c31\u6709\uff0c</p> <p>tCO2eq = MWh * 0:385</p> <p>\u6211\u4eec\u5bf9 OPT \u548c BLOOM \u91c7\u7528\u76f8\u540c\u7684\u516c\u5f0f\u8fdb\u884c\u516c\u5e73\u6bd4\u8f83\u3002</p> <p>\u5bf9\u4e8e OPT\uff0c\u6211\u4eec\u5047\u8bbe\u8bad\u7ec3\u9700\u8981\u5728 992 \u4e2a A100-80GB \u4e0a\u8fdb\u884c 34 \u5929\uff08\u53c2\u89c1\u4ed6\u4eec\u7684\u65e5\u5fd7 4\uff09\u3002 \u6211\u4eec\u5728 2048 \u4e2a A100 80GB \u4e0a\uff0c\u7528\u4e86\u7ea6 5 \u4e2a\u6708\u65f6\u95f4\u6765\u5f00\u53d1 LLaMA\u3002 \u6839\u636e\u524d\u9762\u7684\u516c\u5f0f\uff0c\u8ba1\u7b97\u5f97\u5230 LLaMA \u7684\u8bad\u7ec3\u6210\u672c\u7ea6\u4e3a 2638 MWh\uff0c\u603b\u6392\u653e\u91cf\u4e3a 1015 tCO2eq\u3002 \u6211\u4eec\u5e0c\u671b LLaMA \u7684\u53d1\u5e03\u6709\u52a9\u4e8e\u51cf\u5c11\u672a\u6765\u7684\u78b3\u6392\u653e\uff0c\u56e0\u4e3a\u5b83\u8bad\u7ec3\u5df2\u7ecf\u5b8c\u6210\uff08\u5f88\u591a\u60c5\u51b5\u4e0b\u5927\u5bb6\u76f4\u63a5\u7528\u6216\u8005\u8fdb\u884c\u5fae\u8c03\u5c31\u884c\u4e86\uff09: \u800c\u4e14\u5176\u4e2d\u4e00\u4e9b\u5c0f\u53c2\u6570\u6a21\u578b\u53ef\u4ee5\u5728\u5355\u4e2a GPU \u4e0a\u8fd0\u884c\u3002</p> <p>7 \u76f8\u5173\u5de5\u4f5c\uff08Related work\uff09 \u8bed\u8a00\u6a21\u578b\u662f\u5355\u8bcd\u3001 token \u6216\u5b57\u7b26\u7ec4\u6210\u7684\u5e8f\u5217\u7684\u6982\u7387\u5206\u5e03 \uff08probability distributions over sequences of words, tokens or characters\uff09(Shannon, 1948, 1951)\u3002</p> <p>\u8fd9\u4e2a\u4efb\u52a1\u901a\u5e38\u88ab\u63cf\u8ff0\u4e3a\u5bf9\u4e0b\u4e00\u4e2a token \u7684\u9884\u6d4b\uff0c\u5728\u81ea\u7136\u8bed\u8a00\u5904\u7406\uff08Bahl \u7b49\uff0c1983\uff1bBrown \u7b49\uff0c1990\uff09\u4e2d\u5f88\u65e9\u5c31\u662f\u4e00\u4e2a\u6838\u5fc3\u95ee\u9898\u4e86\u3002 Turing\uff081950\uff09\u63d0\u51fa\u901a\u8fc7\u201c\u6a21\u4eff\u6e38\u620f\u201d\uff08imitation game\uff09\uff0c\u4f7f\u7528\u8bed\u8a00\u6765\u8861\u91cf\u673a\u5668\u667a\u80fd\uff0c \u56e0\u6b64\u8bed\u8a00\u5efa\u6a21\uff08language modeling\uff09\u6210\u4e3a\u4e86\u8861\u91cf\u4eba\u5de5\u667a\u80fd\u8fdb\u5c55\u7684\u57fa\u51c6\uff08Mahoney\uff0c1999\uff09\u3002</p> <p>7.1 Architecture Traditionally, language models were based on n-gram count statistics (Bahl et al., 1983), and various smoothing techniques were proposed to improve the estimation of rare events (Katz, 1987; Kneser and Ney, 1995). In the past two decades, neural networks have been successfully applied to the language modelling task, starting from feed forward models (Bengio et al., 2000), recurrent neural networks (Elman, 1990; Mikolov et al., 2010) and LSTMs (Hochreiter and Schmidhuber, 1997; Graves, 2013). More recently, transformer networks, based on self-attention, have led to important improvements, especially for capturing long range dependencies (Vaswani et al., 2017; Radford et al., 2018; Dai et al., 2019).</p> <p>7.2 Scaling There is a long history of scaling for language models, for both the model and dataset sizes. Brants et al. (2007) showed the benefits of using language models trained on 2 trillion tokens, resulting in 300 billion n-grams, on the quality of machine translation. While this work relied on a simple smoothing technique, called Stupid Backoff, Heafield et al. (2013) later showed how to scale Kneser-Ney smoothing to Web-scale data. This allowed to train a 5-gram model on 975 billions tokens from CommonCrawl, resulting in a model with 500 billions n-grams (Buck et al., 2014). Chelba et al. (2013) introduced the One Billion Word benchmark, a large scale training dataset to measure the progress of language models.</p> <p>In the context of neural language models, Jozefowicz et al. (2016) obtained state-of-the-art results on the Billion Word benchmark by scaling LSTMs to 1 billion parameters. Later, scaling transformers lead to improvement on many NLP tasks. Notable models include BERT (Devlin et al., 2018), GPT-2 (Radford et al., 2019), Megatron- LM (Shoeybi et al., 2019), and T5 (Raffel et al., 2020). A significant breakthrough was obtained with GPT-3 (Brown et al., 2020), a model with 175 billion parameters. This lead to a series of Large Language Models, such as Jurassic-1 (Lieber et al., 2021), Megatron-Turing NLG (Smith et al., 2022), Gopher (Rae et al., 2021), Chinchilla (Hoffmann et al., 2022), PaLM (Chowdhery et al., 2022), OPT (Zhang et al., 2022), and GLM (Zeng et al., 2022). Hestness et al. (2017) and Rosenfeld et al. (2019) studied the impact of scaling on the performance of deep learning models, showing the existence of power laws between the model and dataset sizes and the performance of the system. Kaplan et al. (2020) derived power laws specifically for transformer based language models, which were later refined by Hoffmann et al. (2022), by adapting the learning rate schedule when scaling datasets. Finally, Wei et al. (2022) studied the effect of scaling on the abilities of large language models.</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/llama/LLaMA_Open_and_Efficient_Foundation_Language_Models/#8","title":"8 \u603b\u7ed3","text":"<p>\u5728\u672c\u6587\u4e2d\uff0c\u6211\u4eec\u4ecb\u7ecd\u4e86\u4e00\u7cfb\u5217\u516c\u5f00\u53d1\u5e03\u7684\u8bed\u8a00\u6a21\u578b\uff0c\u8fd9\u4e9b\u6a21\u578b\u4e0e\u6700\u5148\u8fdb\u7684\u57fa\u7840\u6a21\u578b\u5177\u6709\u7ade\u4e89\u529b\u3002\u6700\u503c\u5f97\u4e00\u63d0\u7684\u662f\uff0cLLaMA-13B\u7684\u8868\u73b0\u4f18\u4e8eGPT-3\uff0c\u4f46\u5176\u4f53\u79ef\u5374\u5c0f\u4e8610\u500d\u4ee5\u4e0a\uff0c\u800cLLaMA-65B\u5219\u4e0eChinchilla-70B\u548cPaLM-540B\u5177\u6709\u7ade\u4e89\u529b\u3002\u4e0e\u4ee5\u5f80\u7814\u7a76\u4e0d\u540c\uff0c\u6211\u4eec\u8bc1\u660e\uff0c\u4ec5\u901a\u8fc7\u8bad\u7ec3\u516c\u5f00\u53ef\u7528\u7684\u6570\u636e\uff0c\u800c\u4e0d\u4f9d\u8d56\u4e13\u6709\u6570\u636e\u96c6\uff0c\u5c31\u53ef\u4ee5\u5b9e\u73b0\u6700\u5148\u8fdb\u7684\u6027\u80fd\u3002\u6211\u4eec\u5e0c\u671b\u5c06\u8fd9\u4e9b\u6a21\u578b\u53d1\u5e03\u7ed9\u7814\u7a76\u754c\uff0c\u4ee5\u52a0\u901f\u5927\u578b\u8bed\u8a00\u6a21\u578b\u7684\u5f00\u53d1\uff0c\u5e76\u52a9\u529b\u63d0\u5347\u5176\u9c81\u68d2\u6027\uff0c\u7f13\u89e3\u5df2\u77e5\u95ee\u9898\uff0c\u5982\u6bd2\u6027\u5185\u5bb9\u548c\u504f\u89c1\u3002\u6b64\u5916\uff0c\u6211\u4eec\u89c2\u5bdf\u5230\uff0c\u4e0eChung\u7b49\u4eba\uff082022\uff09\u7684\u53d1\u73b0\u7c7b\u4f3c\uff0c\u5bf9\u8fd9\u4e9b\u6a21\u578b\u8fdb\u884c\u6307\u4ee4\u5fae\u8c03\u53ef\u4ee5\u53d6\u5f97\u4ee4\u4eba\u9f13\u821e\u7684\u7ed3\u679c\uff0c\u6211\u4eec\u8ba1\u5212\u5728\u672a\u6765\u7684\u5de5\u4f5c\u4e2d\u8fdb\u4e00\u6b65\u63a2\u7d22\u8fd9\u4e00\u70b9\u3002\u6700\u540e\uff0c\u6211\u4eec\u8ba1\u5212\u5728\u672a\u6765\u53d1\u5e03\u5728\u66f4\u5927\u89c4\u6a21\u7684\u9884\u8bad\u7ec3\u8bed\u6599\u5e93\u4e0a\u8bad\u7ec3\u51fa\u7684\u66f4\u5927\u6a21\u578b\uff0c\u56e0\u4e3a\u6211\u4eec\u5728\u6269\u5927\u89c4\u6a21\u65f6\u5df2\u7ecf\u89c2\u5bdf\u5230\u4e86\u6027\u80fd\u7684\u6301\u7eed\u63d0\u5347\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/llama/LLaMA_Open_and_Efficient_Foundation_Language_Models/#_2","title":"\u81f4\u8c22","text":"<p>We thank Daniel Haziza, Francisco Massa, Jeremy Reizenstein, Artem Korenev, and Patrick Labatut from the xformers team. We thank Susan Zhang and Stephen Roller for their support on data deduplication. We thank Luca Wehrstedt, Vegard Mella, and Pierre-Emmanuel Mazar\u00e9 for their support on training stability. We thank Shubho Sengupta, Kalyan Saladi, and all the AI infra team for their support. We thank Jane Yu for her input on evaluation. We thank Yongyi Hu for his help on data collection.</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B/llama/LLaMA_Open_and_Efficient_Foundation_Language_Models/#_3","title":"\u53c2\u8003\u6587\u732e","text":"<ul> <li>Jacob Austin, Augustus Odena, Maxwell Nye, Maarten Bosma, Henryk Michalewski, David Dohan, Ellen Jiang, Carrie Cai, Michael Terry, Quoc Le, and Charles Sutton. 2021. Program synthesis with large language models.</li> <li>Lalit R Bahl, Frederick Jelinek, and Robert L Mercer. 1983. A maximum likelihood approach to continuous speech recognition. IEEE transactions on pattern analysis and machine intelligence, pages 179\u2013 190.</li> <li>Yoshua Bengio, R\u00e9jean Ducharme, and Pascal Vincent. 2000. A neural probabilistic language model. Advances in neural information processing systems, 13.</li> <li>Yonatan Bisk, Rowan Zellers, Jianfeng Gao, Yejin Choi, et al. 2020. Piqa: Reasoning about physical commonsense in natural language. In Proceedings of the AAAI conference on artificial intelligence, pages 7432\u20137439.</li> <li>Sid Black, Stella Biderman, Eric Hallahan, Quentin Anthony, Leo Gao, Laurence Golding, Horace He, Connor Leahy, Kyle McDonell, Jason Phang, et al. 2022. Gpt-neox-20b: An open-source autoregressive language model. arXiv preprint arXiv:2204.06745. Thorsten Brants, Ashok C. Popat, Peng Xu, Franz J. Och, and Jeffrey Dean. 2007. Large language models in machine translation. In Proceedings of the 2007 Joint Conference on Empirical Methods in Natural Language Processing and Computational Natural Language Learning (EMNLP-CoNLL), pages 858\u2013867, Prague, Czech Republic. Association for Computational Linguistics. Peter F Brown, John Cocke, Stephen A Della Pietra, Vincent J Della Pietra, Frederick Jelinek, John Lafferty, Robert L Mercer, and Paul S Roossin. 1990. A statistical approach to machine translation. Computational linguistics, 16(2):79\u201385. Tom B. Brown, Benjamin Mann, Nick Ryder, Melanie Subbiah, Jared Kaplan, Prafulla Dhariwal, Arvind Neelakantan, Pranav Shyam, Girish Sastry, Amanda Askell, Sandhini Agarwal, Ariel Herbert-Voss, Gretchen Krueger, Tom Henighan, Rewon Child, Aditya Ramesh, Daniel M. Ziegler, Jeffrey Wu, Clemens Winter, Christopher Hesse, Mark Chen, Eric Sigler, Mateusz Litwin, Scott Gray, Benjamin Chess, Jack Clark, Christopher Berner, Sam Mc- Candlish, Alec Radford, Ilya Sutskever, and Dario Amodei. 2020. Language models are few-shot learners. Christian Buck, Kenneth Heafield, and Bas Van Ooyen. 2014. N-gram counts and language models from the common crawl. In LREC, volume 2, page 4. Ciprian Chelba, Tomas Mikolov, Mike Schuster, Qi Ge, Thorsten Brants, Phillipp Koehn, and Tony Robinson. 2013. One billion word benchmark for measuring progress in statistical language modeling. arXiv preprint arXiv:1312.3005. Mark Chen, Jerry Tworek, Heewoo Jun, Qiming Yuan, Henrique Ponde de Oliveira Pinto, Jared Kaplan, Harri Edwards, Yuri Burda, Nicholas Joseph, Greg Brockman, Alex Ray, Raul Puri, Gretchen Krueger, Michael Petrov, Heidy Khlaaf, Girish Sastry, Pamela Mishkin, Brooke Chan, Scott Gray, Nick Ryder, Mikhail Pavlov, Alethea Power, Lukasz Kaiser, Mohammad Bavarian, Clemens Winter, Philippe Tillet, Felipe Petroski Such, Dave Cummings, Matthias Plappert, Fotios Chantzis, Elizabeth Barnes, Ariel Herbert-Voss, William Hebgen Guss, Alex Nichol, Alex Paino, Nikolas Tezak, Jie Tang, Igor Babuschkin, Suchir Balaji, Shantanu Jain, William Saunders, Christopher Hesse, Andrew N. Carr, Jan Leike, Josh Achiam, Vedant Misra, Evan Morikawa, Alec Radford, Matthew Knight, Miles Brundage, Mira Murati, Katie Mayer, Peter Welinder, Bob McGrew, Dario Amodei, Sam McCandlish, Ilya Sutskever, and Wojciech Zaremba. 2021. Evaluating large language models trained on code. Aakanksha Chowdhery, Sharan Narang, Jacob Devlin, Maarten Bosma, Gaurav Mishra, Adam Roberts, Paul Barham, Hyung Won Chung, Charles Sutton, Sebastian Gehrmann, Parker Schuh, Kensen Shi, Sasha Tsvyashchenko, Joshua Maynez, Abhishek Rao, Parker Barnes, Yi Tay, Noam Shazeer, Vinodkumar Prabhakaran, Emily Reif, Nan Du, Ben Hutchinson, Reiner Pope, James Bradbury, Jacob Austin, Michael Isard, Guy Gur-Ari, Pengcheng Yin, Toju Duke, Anselm Levskaya, Sanjay Ghemawat, Sunipa Dev, Henryk Michalewski, Xavier Garcia, Vedant Misra, Kevin Robinson, Liam Fedus, Denny Zhou, Daphne Ippolito, David Luan, Hyeontaek Lim, Barret Zoph, Alexander Spiridonov, Ryan Sepassi, David Dohan, Shivani Agrawal, Mark Omernick, Andrew M. Dai, Thanumalayan Sankaranarayana Pillai, Marie Pellat, Aitor Lewkowycz, Erica Moreira, Rewon Child, Oleksandr Polozov, Katherine Lee, Zongwei Zhou, Xuezhi Wang, Brennan Saeta, Mark Diaz, Orhan Firat, Michele Catasta, Jason Wei, Kathy Meier-Hellstern, Douglas Eck, Jeff Dean, Slav Petrov, and Noah Fiedel. 2022. Palm: Scaling language modeling with pathways. Hyung Won Chung, Le Hou, S. Longpre, Barret Zoph, Yi Tay, William Fedus, Eric Li, Xuezhi Wang, Mostafa Dehghani, Siddhartha Brahma, Albert Webson, Shixiang Shane Gu, Zhuyun Dai, Mirac Suzgun, Xinyun Chen, Aakanksha Chowdhery, Dasha Valter, Sharan Narang, Gaurav Mishra, Adams Wei Yu, Vincent Zhao, Yanping Huang, Andrew M. Dai, Hongkun Yu, Slav Petrov, Ed Huai hsin Chi, Jeff Dean, Jacob Devlin, Adam Roberts, Denny Zhou, Quoc Le, and Jason Wei. 2022. Scaling instruction-finetuned language models. arXiv preprint arXiv:2210.11416. Christopher Clark, Kenton Lee, Ming-Wei Chang, Tom Kwiatkowski, Michael Collins, and Kristina Toutanova. 2019. Boolq: Exploring the surprising difficulty of natural yes/no questions. arXiv preprint arXiv:1905.10044. Peter Clark, Isaac Cowhey, Oren Etzioni, Tushar Khot, Ashish Sabharwal, Carissa Schoenick, and Oyvind Tafjord. 2018. Think you have solved question answering? try arc, the ai2 reasoning challenge. arXiv preprint arXiv:1803.05457. Karl Cobbe, Vineet Kosaraju, Mohammad Bavarian, Mark Chen, Heewoo Jun, Lukasz Kaiser, Matthias Plappert, Jerry Tworek, Jacob Hilton, Reiichiro Nakano, et al. 2021. Training verifiers to solve math word problems. arXiv preprint arXiv:2110.14168. Zihang Dai, Zhilin Yang, Yiming Yang, Jaime Carbonell, Quoc V Le, and Ruslan Salakhutdinov. 2019. Transformer-xl: Attentive language models beyond a fixed-length context. arXiv preprint arXiv:1901.02860. Tri Dao, Daniel Y Fu, Stefano Ermon, Atri Rudra, and Christopher R\u00e9. 2022. Flashattention: Fast and memory-efficient exact attention with io-awareness. arXiv preprint arXiv:2205.14135. Jacob Devlin, Ming-Wei Chang, Kenton Lee, and Kristina Toutanova. 2018. Bert: Pre-training of deep bidirectional transformers for language understanding. arXiv preprint arXiv:1810.04805. Jeffrey L Elman. 1990. Finding structure in time. Cognitive science, 14(2):179\u2013211. Daniel Fried, Armen Aghajanyan, Jessy Lin, Sida Wang, Eric Wallace, Freda Shi, Ruiqi Zhong, Wentau Yih, Luke Zettlemoyer, and Mike Lewis. 2022. Incoder: A generative model for code infilling and synthesis. arXiv preprint arXiv:2204.05999. Leo Gao, Stella Biderman, Sid Black, Laurence Golding, Travis Hoppe, Charles Foster, Jason Phang, Horace He, Anish Thite, Noa Nabeshima, Shawn Presser, and Connor Leahy. 2020. The Pile: An 800gb dataset of diverse text for language modeling. arXiv preprint arXiv:2101.00027. Leo Gao, Jonathan Tow, Stella Biderman, Sid Black, Anthony DiPofi, Charles Foster, Laurence Golding, Jeffrey Hsu, Kyle McDonell, Niklas Muennighoff, Jason Phang, Laria Reynolds, Eric Tang, Anish Thite, BenWang, KevinWang, and Andy Zou. 2021. A framework for few-shot language model evaluation. Samuel Gehman, Suchin Gururangan, Maarten Sap, Yejin Choi, and Noah A Smith. 2020. Realtoxicityprompts: Evaluating neural toxic degeneration in language models. arXiv preprint arXiv:2009.11462. Alex Graves. 2013. Generating sequences with recurrent neural networks. arXiv preprint arXiv:1308.0850. Kenneth Heafield, Ivan Pouzyrevsky, Jonathan H Clark, and Philipp Koehn. 2013. Scalable modified kneserney language model estimation. In Proceedings of the 51st Annual Meeting of the Association for Computational Linguistics (Volume 2: Short Papers), pages 690\u2013696. Dan Hendrycks, Collin Burns, Steven Basart, Andy Zou, Mantas Mazeika, Dawn Song, and Jacob Steinhardt. 2020. Measuring massive multitask language understanding. arXiv preprint arXiv:2009.03300. Dan Hendrycks, Collin Burns, Saurav Kadavath, Akul Arora, Steven Basart, Eric Tang, Dawn Song, and Jacob Steinhardt. 2021. Measuring mathematical problem solving with the math dataset. arXiv preprint arXiv:2103.03874. Joel Hestness, Sharan Narang, Newsha Ardalani, Gregory Diamos, Heewoo Jun, Hassan Kianinejad, Md Patwary, Mostofa Ali, Yang Yang, and Yanqi Zhou. 2017. Deep learning scaling is predictable, empirically. arXiv preprint arXiv:1712.00409. Sepp Hochreiter and J\u00fcrgen Schmidhuber. 1997. Long short-term memory. Neural computation, 9(8):1735\u20131780. Jordan Hoffmann, Sebastian Borgeaud, Arthur Mensch, Elena Buchatskaya, Trevor Cai, Eliza Rutherford, Diego de Las Casas, Lisa Anne Hendricks, Johannes Welbl, Aidan Clark, Tom Hennigan, Eric Noland, Katie Millican, George van den Driessche, Bogdan Damoc, Aurelia Guy, Simon Osindero, Karen Simonyan, Erich Elsen, Jack W. Rae, Oriol Vinyals, and Laurent Sifre. 2022. Training compute-optimal large language models. Srinivasan Iyer, Xi Victoria Lin, Ramakanth Pasunuru, Todor Mihaylov, D\u00e1niel Simig, Ping Yu, Kurt Shuster, TianluWang, Qing Liu, Punit Singh Koura, et al. 2022. Opt-iml: Scaling language model instruction meta learning through the lens of generalization. arXiv preprint arXiv:2212.12017. Mandar Joshi, Eunsol Choi, Daniel S Weld, and Luke Zettlemoyer. 2017. Triviaqa: A large scale distantly supervised challenge dataset for reading comprehension. arXiv preprint arXiv:1705.03551. Rafal Jozefowicz, Oriol Vinyals, Mike Schuster, Noam Shazeer, and Yonghui Wu. 2016. Exploring the limits of language modeling. arXiv preprint arXiv:1602.02410. Jared Kaplan, Sam McCandlish, Tom Henighan, Tom B Brown, Benjamin Chess, Rewon Child, Scott Gray, Alec Radford, Jeffrey Wu, and Dario Amodei. 2020. Scaling laws for neural language models. arXiv preprint arXiv:2001.08361. Slava Katz. 1987. Estimation of probabilities from sparse data for the language model component of a speech recognizer. IEEE transactions on acoustics, speech, and signal processing, 35(3):400\u2013401. Reinhard Kneser and Hermann Ney. 1995. Improved backing-off for m-gram language modeling. In 1995 international conference on acoustics, speech, and signal processing, volume 1, pages 181\u2013184. IEEE. Vijay Korthikanti, Jared Casper, Sangkug Lym, Lawrence McAfee, Michael Andersch, Mohammad Shoeybi, and Bryan Catanzaro. 2022. Reducing activation recomputation in large transformer models. arXiv preprint arXiv:2205.05198. Taku Kudo and John Richardson. 2018. Sentencepiece: A simple and language independent subword tokenizer and detokenizer for neural text processing. arXiv preprint arXiv:1808.06226. Keita Kurita, Nidhi Vyas, Ayush Pareek, AlanWBlack, and Yulia Tsvetkov. 2019. Quantifying social biases in contextual word representations. In 1st ACL Workshop on Gender Bias for Natural Language Processing. Tom Kwiatkowski, Jennimaria Palomaki, Olivia Redfield, Michael Collins, Ankur Parikh, Chris Alberti, Danielle Epstein, Illia Polosukhin, Jacob Devlin, Kenton Lee, et al. 2019. Natural questions: a benchmark for question answering research. Transactions of the Association for Computational Linguistics, 7:453\u2013466. Guokun Lai, Qizhe Xie, Hanxiao Liu, Yiming Yang, and Eduard Hovy. 2017. Race: Large-scale reading comprehension dataset from examinations. arXiv preprint arXiv:1704.04683. Aitor Lewkowycz, Anders Johan Andreassen, David Dohan, Ethan Dyer, Henryk Michalewski, Vinay Venkatesh Ramasesh, Ambrose Slone, Cem Anil, Imanol Schlag, Theo Gutman-Solo, Yuhuai Wu, Behnam Neyshabur, Guy Gur-Ari, and Vedant Misra. 2022. Solving quantitative reasoning problems with language models. In Advances in Neural Information Processing Systems. Opher Lieber, Or Sharir, Barak Lenz, and Yoav Shoham. 2021. Jurassic-1: Technical details and evaluation. White Paper. AI21 Labs, 1. Stephanie Lin, Jacob Hilton, and Owain Evans. 2021. Truthfulqa: Measuring how models mimic human falsehoods. arXiv preprint arXiv:2109.07958. Ilya Loshchilov and Frank Hutter. 2017. Decoupled weight decay regularization. arXiv preprint arXiv:1711.05101. Matthew V Mahoney. 1999. Text compression as a test for artificial intelligence. AAAI/IAAI, 970. Todor Mihaylov, Peter Clark, Tushar Khot, and Ashish Sabharwal. 2018. Can a suit of armor conduct electricity? a new dataset for open book question answering. arXiv preprint arXiv:1809.02789. Tomas Mikolov, Martin Karafi\u00e1t, Lukas Burget, Jan Cernocky, and Sanjeev Khudanpur. 2010. Recurrent neural network based language model. In Interspeech, pages 1045\u20131048. Makuhari. Nikita Nangia, Clara Vania, Rasika Bhalerao, and Samuel R. Bowman. 2020. CrowS-pairs: A challenge dataset for measuring social biases in masked language models. In EMNLP 2020. Erik Nijkamp, Bo Pang, Hiroaki Hayashi, Lifu Tu, Huan Wang, Yingbo Zhou, Silvio Savarese, and Caiming Xiong. 2022. Codegen: An open large language model for code with multi-turn program synthesis. arXiv preprint arXiv:2203.13474. Long Ouyang, Jeffrey Wu, Xu Jiang, Diogo Almeida, CarrollWainwright, Pamela Mishkin, Chong Zhang, Sandhini Agarwal, Katarina Slama, Alex Gray, John Schulman, Jacob Hilton, Fraser Kelton, Luke Miller, Maddie Simens, Amanda Askell, Peter Welinder, Paul Christiano, Jan Leike, and Ryan Lowe. 2022. Training language models to follow instructions with human feedback. In Advances in Neural Information Processing Systems. Markus N Rabe and Charles Staats. 2021. Selfattention does not need o(n2) memory. arXiv preprint arXiv:2112.05682. Alec Radford, Karthik Narasimhan, Tim Salimans, Ilya Sutskever, et al. 2018. Improving language understanding by generative pre-training. Alec Radford, Jeffrey Wu, Rewon Child, David Luan, Dario Amodei, Ilya Sutskever, et al. 2019. Language models are unsupervised multitask learners. OpenAI blog, 1(8):9. Jack W. Rae, Sebastian Borgeaud, Trevor Cai, Katie Millican, Jordan Hoffmann, Francis Song, John Aslanides, Sarah Henderson, Roman Ring, Susannah Young, Eliza Rutherford, Tom Hennigan, Jacob Menick, Albin Cassirer, Richard Powell, George van den Driessche, Lisa Anne Hendricks, Maribeth Rauh, Po-Sen Huang, Amelia Glaese, Johannes Welbl, Sumanth Dathathri, Saffron Huang, Jonathan Uesato, John Mellor, Irina Higgins, Antonia Creswell, Nat McAleese, Amy Wu, Erich Elsen, Siddhant Jayakumar, Elena Buchatskaya, David Budden, Esme Sutherland, Karen Simonyan, Michela Paganini, Laurent Sifre, Lena Martens, Xiang Lorraine Li, Adhiguna Kuncoro, Aida Nematzadeh, Elena Gribovskaya, Domenic Donato, Angeliki Lazaridou, Arthur Mensch, Jean-Baptiste Lespiau, Maria Tsimpoukelli, Nikolai Grigorev, Doug Fritz, Thibault Sottiaux, Mantas Pajarskas, Toby Pohlen, Zhitao Gong, Daniel Toyama, Cyprien de Masson d\u2019Autume, Yujia Li, Tayfun Terzi, Vladimir Mikulik, Igor Babuschkin, Aidan Clark, Diego de Las Casas, Aurelia Guy, Chris Jones, James Bradbury, Matthew Johnson, Blake Hechtman, LauraWeidinger, Iason Gabriel,William Isaac, Ed Lockhart, Simon Osindero, Laura Rimell, Chris Dyer, Oriol Vinyals, Kareem Ayoub, Jeff Stanway, Lorrayne Bennett, Demis Hassabis, Koray Kavukcuoglu, and Geoffrey Irving. 2021. Scaling language models: Methods, analysis &amp; insights from training gopher. Colin Raffel, Noam Shazeer, Adam Roberts, Katherine Lee, Sharan Narang, Michael Matena, Yanqi Zhou, Wei Li, and Peter J Liu. 2020. Exploring the limits of transfer learning with a unified text-to-text transformer. The Journal of Machine Learning Research, 21(1):5485\u20135551. Jonathan S Rosenfeld, Amir Rosenfeld, Yonatan Belinkov, and Nir Shavit. 2019. A constructive prediction of the generalization error across scales. arXiv preprint arXiv:1909.12673. Rachel Rudinger, Jason Naradowsky, Brian Leonard, and Benjamin Van Durme. 2018. Gender bias in coreference resolution. In NAACL-HLT 2018. Keisuke Sakaguchi, Ronan Le Bras, Chandra Bhagavatula, and Yejin Choi. 2021. Winogrande: An adversarial winograd schema challenge at scale. Communications of the ACM, 64(9):99\u2013106. Maarten Sap, Hannah Rashkin, Derek Chen, Ronan LeBras, and Yejin Choi. 2019. Socialiqa: Commonsense reasoning about social interactions. arXiv preprint arXiv:1904.09728. Teven Le Scao, Angela Fan, Christopher Akiki, Ellie Pavlick, Suzana Ili\u00b4c, Daniel Hesslow, Roman Castagn\u00e9, Alexandra Sasha Luccioni, Fran\u00e7ois Yvon, Matthias Gall\u00e9, et al. 2022. Bloom: A 176bparameter open-access multilingual language model. arXiv preprint arXiv:2211.05100. Rico Sennrich, Barry Haddow, and Alexandra Birch. 2015. Neural machine translation of rare words with subword units. arXiv preprint arXiv:1508.07909. Claude E Shannon. 1948. A mathematical theory of communication. The Bell system technical journal, 27(3):379\u2013423. Claude E Shannon. 1951. Prediction and entropy of printed english. Bell system technical journal, 30(1):50\u201364. Noam Shazeer. 2020. Glu variants improve transformer. arXiv preprint arXiv:2002.05202. Emily Sheng, Kai-Wei Chang, Premkumar Natarajan, and Nanyun Peng. 2019. The woman worked as a babysitter: On biases in language generation. arXiv preprint arXiv:1909.01326. Mohammad Shoeybi, Mostofa Patwary, Raul Puri, Patrick LeGresley, Jared Casper, and Bryan Catanzaro. 2019. Megatron-lm: Training multi-billion parameter language models using model parallelism. arXiv preprint arXiv:1909.08053. Shaden Smith, Mostofa Patwary, Brandon Norick, Patrick LeGresley, Samyam Rajbhandari, Jared Casper, Zhun Liu, Shrimai Prabhumoye, George Zerveas, Vijay Korthikanti, Elton Zhang, Rewon Child, Reza Yazdani Aminabadi, Julie Bernauer, Xia Song, Mohammad Shoeybi, Yuxiong He, Michael Houston, Saurabh Tiwary, and Bryan Catanzaro. 2022. Using deepspeed and megatron to train megatron-turing nlg 530b, a large-scale generative language model. Jianlin Su, Yu Lu, Shengfeng Pan, Ahmed Murtadha, Bo Wen, and Yunfeng Liu. 2021. Roformer: Enhanced transformer with rotary position embedding. arXiv preprint arXiv:2104.09864. Romal Thoppilan, Daniel De Freitas, Jamie Hall, Noam Shazeer, Apoorv Kulshreshtha, Heng-Tze Cheng, Alicia Jin, Taylor Bos, Leslie Baker, Yu Du, YaGuang Li, Hongrae Lee, Huaixiu Steven Zheng, Amin Ghafouri, Marcelo Menegali, Yanping Huang, Maxim Krikun, Dmitry Lepikhin, James Qin, Dehao Chen, Yuanzhong Xu, Zhifeng Chen, Adam Roberts, Maarten Bosma, Vincent Zhao, Yanqi Zhou, Chung-Ching Chang, Igor Krivokon, Will Rusch, Marc Pickett, Pranesh Srinivasan, Laichee Man, Kathleen Meier-Hellstern, Meredith Ringel Morris, Tulsee Doshi, Renelito Delos Santos, Toju Duke, Johnny Soraker, Ben Zevenbergen, Vinodkumar Prabhakaran, Mark Diaz, Ben Hutchinson, Kristen Olson, Alejandra Molina, Erin Hoffman-John, Josh Lee, Lora Aroyo, Ravi Rajakumar, Alena Butryna, Matthew Lamm, Viktoriya Kuzmina, Joe Fenton, Aaron Cohen, Rachel Bernstein, Ray Kurzweil, Blaise Aguera-Arcas, Claire Cui, Marian Croak, Ed Chi, and Quoc Le. 2022. Lamda: Language models for dialog applications. A. M. Turing. 1950. Computing Machinery and Intelligence. [Oxford University Press, Mind Association]. Ashish Vaswani, Noam Shazeer, Niki Parmar, Jakob Uszkoreit, Llion Jones, Aidan N Gomez, \u0141 ukasz Kaiser, and Illia Polosukhin. 2017. Attention is all you need. In Advances in Neural Information Processing Systems 30, pages 5998\u20136008. Ben Wang and Aran Komatsuzaki. 2021. GPT-J-6B: A 6 Billion Parameter Autoregressive Language Model. https://github.com/kingoflolz/mesh-transformer-jax. Xuezhi Wang, Jason Wei, Dale Schuurmans, Quoc Le, Ed Chi, Sharan Narang, Aakanksha Chowdhery, and Denny Zhou. 2022. Self-consistency improves chain of thought reasoning in language models. Jason Wei, Yi Tay, Rishi Bommasani, Colin Raffel, Barret Zoph, Sebastian Borgeaud, Dani Yogatama, Maarten Bosma, Denny Zhou, Donald Metzler, et al. 2022. Emergent abilities of large language models. arXiv preprint arXiv:2206.07682. Guillaume Wenzek, Marie-Anne Lachaux, Alexis Conneau, Vishrav Chaudhary, Francisco Guzm\u00e1n, Armand Joulin, and Edouard Grave. 2020. CCNet: Extracting high quality monolingual datasets from web crawl data. In Language Resources and Evaluation Conference. Carole-Jean Wu, Ramya Raghavendra, Udit Gupta, Bilge Acun, Newsha Ardalani, Kiwan Maeng, Gloria Chang, Fiona Aga, Jinshi Huang, Charles Bai, et al. 2022. Sustainable ai: Environmental implications, challenges and opportunities. Proceedings of Machine Learning and Systems, 4:795\u2013813. Rowan Zellers, Ari Holtzman, Yonatan Bisk, Ali Farhadi, and Yejin Choi. 2019. Hellaswag: Can a machine really finish your sentence? arXiv preprint arXiv:1905.07830. Aohan Zeng, Xiao Liu, Zhengxiao Du, Zihan Wang, Hanyu Lai, Ming Ding, Zhuoyi Yang, Yifan Xu, Wendi Zheng, Xiao Xia, Weng Lam Tam, Zixuan Ma, Yufei Xue, Jidong Zhai, Wenguang Chen, Peng Zhang, Yuxiao Dong, and Jie Tang. 2022. Glm-130b: An open bilingual pre-trained model. Biao Zhang and Rico Sennrich. 2019. Root mean square layer normalization. Advances in Neural Information Processing Systems, 32. Susan Zhang, Stephen Roller, Naman Goyal, Mikel Artetxe, Moya Chen, Shuohui Chen, Christopher Dewan, Mona Diab, Xian Li, Xi Victoria Lin, et al. 2022. Opt: Open pre-trained transformer language models. arXiv preprint arXiv:2205.01068.</li> </ul> <p>https://arthurchiao.art/blog/llama-paper-zh/</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/gsm8k/training_veriers_to_solve_math_word_problems/","title":"Training Veri\u2000ers to Solve Math Word Problems","text":""},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/gsm8k/training_veriers_to_solve_math_word_problems/#_1","title":"\u6458\u8981","text":"<p>\u6700\u5148\u8fdb\u7684\u8bed\u8a00\u6a21\u578b\u53ef\u4ee5\u5728\u8bb8\u591a\u4efb\u52a1\u4e0a\u4e0e\u4eba\u7c7b\u7684\u8868\u73b0\u76f8\u5339\u914d\uff0c\u4f46\u5b83\u4eec\u4ecd\u7136\u96be\u4ee5\u7a33\u5065\u5730\u6267\u884c\u591a\u6b65\u6570\u5b66\u63a8\u7406\u3002\u4e3a\u4e86\u627e\u51fa\u5f53\u524d\u6a21\u578b\u7684\u95ee\u9898\u5e76\u652f\u6301\u7814\u7a76\uff0c\u6211\u4eec\u5f15\u5165\u4e86GSM8K\uff0c\u8fd9\u662f\u4e00\u4e2a\u5305\u542b8.5K\u4e2a\u9ad8\u8d28\u91cf\u591a\u8bed\u8a00\u7684\u5c0f\u5b66\u6570\u5b66\u95ee\u9898\u7684\u6570\u636e\u96c6\u3002\u6211\u4eec\u53d1\u73b0\uff0c\u5c3d\u7ba1\u8fd9\u4e2a\u95ee\u9898\u5206\u5e03\u5728\u6982\u5ff5\u4e0a\u5f88\u7b80\u5355\uff0c\u4f46\u5373\u4f7f\u662f\u6700\u5927\u7684\u53d8\u538b\u5668\u6a21\u578b\u4e5f\u65e0\u6cd5\u5b9e\u73b0\u9ad8\u6d4b\u8bd5\u6027\u80fd\u3002\u4e3a\u4e86\u63d0\u9ad8\u6027\u80fd\uff0c\u6211\u4eec\u5efa\u8bae\u8bad\u7ec3\u9a8c\u8bc1\u5668\u6765\u5224\u65ad\u6a21\u578b\u5b8c\u6210\u7684\u6b63\u786e\u6027\u3002\u5728\u6d4b\u8bd5\u65f6\uff0c\u6211\u4eec\u751f\u6210\u8bb8\u591a\u5019\u9009\u89e3\u51b3\u65b9\u6848\uff0c\u5e76\u9009\u62e9\u9a8c\u8bc1\u5668\u6392\u540d\u6700\u9ad8\u7684\u4e00\u4e2a\u3002\u6211\u4eec\u8bc1\u660e\uff0c\u9a8c\u8bc1\u663e\u8457\u63d0\u9ad8\u4e86GSM8K\u7684\u6027\u80fd\uff0c\u6211\u4eec\u63d0\u4f9b\u4e86\u5f3a\u6709\u529b\u7684\u7ecf\u9a8c\u8bc1\u636e\uff0c\u8868\u660e\u9a8c\u8bc1\u5728\u6570\u636e\u589e\u52a0\u7684\u60c5\u51b5\u4e0b\u6bd4\u5fae\u8c03\u57fa\u7ebf\u66f4\u6709\u6548\u5730\u6269\u5c55\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/gsm8k/training_veriers_to_solve_math_word_problems/#1","title":"1 \u4ecb\u7ecd","text":"<p>\u8fd1\u5e74\u6765\uff0c\u5927\u578b\u8bed\u8a00\u6a21\u578b\u5728\u8bb8\u591a\u4e0d\u540c\u7684\u4efb\u52a1\u4e2d\u8868\u73b0\u51fa\u4e86\u4ee4\u4eba\u5370\u8c61\u6df1\u523b\u7684\u6280\u80fd\uff08Wang\u7b49\u4eba\uff0c2019\uff1bBrown\u7b49\u4eba\uff0c2020\uff09\u3002Kaplan\u7b49\u4eba\uff082020\uff09\u63cf\u8ff0\u4e86\u589e\u52a0\u6a21\u578b\u5927\u5c0f\u7684\u4e00\u81f4\u597d\u5904\uff0c\u63cf\u8ff0\u4e86\u8de8\u8d8a\u8bb8\u591a\u6570\u91cf\u7ea7\u7684\u7f29\u653e\u8d8b\u52bf\u3002\u7136\u800c\uff0c\u5373\u4f7f\u662f\u6700\u5927\u7684\u6a21\u578b\u5728\u9700\u8981\u6267\u884c\u591a\u6b65\u6570\u5b66\u63a8\u7406\u65f6\u4e5f\u4f1a\u52a8\u6447\uff08Hendrycks\u7b49\u4eba\uff0c2021\uff09\u3002\u5373\u4f7f\u5728\u6a21\u578b\u7ecf\u8fc7\u9002\u5f53\u7684\u5fae\u8c03\u540e\uff0c\u6a21\u578b\u6837\u672c\u4e5f\u7ecf\u5e38\u5305\u542b\u707e\u96be\u6027\u7684\u9519\u8bef\u3002\u56e0\u6b64\uff0c\u6570\u5b66\u63a8\u7406\u63ed\u793a\u4e86\u73b0\u4ee3\u8bed\u8a00\u6a21\u578b\u7684\u4e00\u4e2a\u5173\u952e\u5f31\u70b9\u3002 \u6570\u5b66\u63a8\u7406\u4e2d\u7684\u4e00\u4e2a\u91cd\u5927\u6311\u6218\u662f\u5bf9\u4e2a\u4f53\u9519\u8bef\u7684\u9ad8\u5ea6\u654f\u611f\u6027\uff08Shen\u7b49\u4eba\uff0c2021a\uff09\u3002\u5728\u751f\u6210\u89e3\u65f6\uff0c\u9012\u5f52\u6a21\u578b\u6ca1\u6709\u7ea0\u6b63\u81ea\u8eab\u9519\u8bef\u7684\u673a\u5236\u3002\u8fc5\u901f\u504f\u79bb\u8f68\u9053\u7684\u89e3\u51b3\u65b9\u6848\u53d8\u5f97\u65e0\u6cd5\u6062\u590d\u3002\u5982\u679c\u6211\u4eec\u7eaf\u7cb9\u4f9d\u8d56\u751f\u6210\u00ac\u65b9\u6cd5\u5e76\u4ece\u5f53\u524d\u8d8b\u52bf\u4e2d\u63a8\u65ad\uff0c\u6211\u4eec\u5c06\u9700\u8981\u4e00\u4e2a\u8fc7\u9ad8\u7684 \u56fe1:GSM8K\u7684\u4e09\u4e2a\u793a\u4f8b\u95ee\u9898\u3002\u8ba1\u7b97\u6ce8\u91ca\u4ee5\u7ea2\u8272\u7a81\u51fa\u663e\u793a\u3002</p> <p>\u53c2\u6570\u8ba1\u6570\uff0c\u4ee5\u5728\u4e0eMATH\u6570\u636e\u96c6\u4e00\u6837\u5177\u6709\u6311\u6218\u6027\u7684\u5206\u5e03\u4e0a\u5b9e\u73b0\u4e2d\u7b49\u6027\u80fd\uff08Hendrycks\u7b49\u4eba\uff0c2021\uff09\u3002\u8fd9\u4e00\u8bc1\u636e\u6709\u529b\u5730\u63a8\u52a8\u4e86\u5bfb\u627e\u5177\u6709\u66f4\u6709\u5229\u6807\u5ea6\u5f8b\u7684\u65b9\u6cd5\u3002 \u6211\u4eec\u5efa\u8bae\u4f7f\u7528\u8bad\u7ec3\u9a8c\u8bc1\u5668\u6765\u8bc4\u4f30\u6a21\u578b\u751f\u6210\u89e3\u51b3\u65b9\u6848\u7684\u6b63\u786e\u6027\uff0c\u7c7b\u4f3c\u4e8eShen\u7b49\u4eba\uff082021a\uff09\u7684\u5e76\u53d1\u5de5\u4f5c\u3002\u5728\u6d4b\u8bd5\u65f6\uff0c\u6211\u4eec\u5bf9\u56fa\u5b9a\u6570\u91cf\u7684\u5019\u9009\u89e3\u51b3\u65b9\u6848\u8fdb\u884c\u91c7\u6837\uff0c\u5e76\u9009\u62e9\u9a8c\u8bc1\u5668\u6392\u540d\u6700\u9ad8\u7684\u89e3\u51b3\u65b9\u6848\u3002\u9a8c\u8bc1\u5668\u65e2\u53d7\u76ca\u4e8e\u5176\u56fa\u6709\u7684\u53ef\u9009\u6027\uff0c\u4e5f\u53d7\u76ca\u4e8e\u9a8c\u8bc1\u662f\u4e00\u9879\u6bd4\u4e00\u822c\u751f\u6210\u66f4\u7b80\u5355\u7684\u4efb\u52a1\u3002</p> <p>\u4e3a\u4e86\u4fc3\u8fdb\u7814\u7a76\uff0c\u6211\u4eec\u53d1\u5e03\u4e86GSM8K\uff0c\u8fd9\u662f\u4e00\u4e2a\u5305\u542b8.5K\u9ad8\u8d28\u91cf\u5c0f\u5b66\u6570\u5b66\u95ee\u9898\u6570\u636e\u96c6\u3002\u6211\u4eec\u8bbe\u8ba1\u4e86\u8fd9\u4e2a\u6570\u636e\u96c6\uff0c\u4f7f\u5176\u5177\u6709\u6781\u5927\u7684\u8bed\u8a00\u591a\u6837\u6027\uff0c\u540c\u65f6\u4f9d\u8d56\u4e8e\u76f8\u5bf9\u7b80\u5355\u7684\u5c0f\u5b66\u6570\u5b66\u6982\u5ff5\u3002\u6700\u597d\u7684\u8bed\u8a00\u6a21\u578b\u5f88\u96be\u5728\u8fd9\u4e2a\u6570\u636e\u96c6\u4e0a\u5177\u6709\u6781\u597d\u7684\u6027\u80fd\uff0c\u4e3b\u8981\u662f\u7531\u4e8e\u95ee\u9898\u5177\u6709\u6781\u5927\u7684\u591a\u6837\u6027\u3002\u540c\u65f6\uff0cGSM8K\u89e3\u51b3\u65b9\u6848\u4ec5\u4f9d\u8d56\u4e8e\u57fa\u672c\u6982\u5ff5\uff0c\u56e0\u6b64\u5b9e\u73b0\u9ad8\u6d4b\u8bd5\u6027\u80fd\u662f\u4e00\u4e2a\u6613\u4e8e\u5b9e\u73b0\u7684\u76ee\u6807\u3002 \u6211\u4eec\u7684\u4e3b\u8981\u8d21\u732e\u5982\u4e0b\uff1a</p> <ol> <li>\u6211\u4eec\u5c55\u793a\u4e86\u4e00\u4e2a\u7ecf\u8fc7\u7cbe\u5fc3\u7b56\u5212\u76848.5K\u5c0f\u5b66\u6570\u5b66\u95ee\u9898\u548c\u81ea\u7136\u8bed\u8a00\u89e3\u51b3\u65b9\u6848\u7684\u6570\u636e\u96c6\uff0c\u53ef\u7528\u4e8e\u63a2\u7d22\u5927\u578b\u8bed\u8a00\u6a21\u578b\u7684\u975e\u6b63\u5f0f\u63a8\u7406\u80fd\u529b\u3002</li> <li>\u6211\u4eec\u53d1\u73b0\uff0c\u4e0e\u5fae\u8c03\u57fa\u7ebf\u76f8\u6bd4\uff0c\u4f7f\u7528\u9a8c\u8bc1\u5668\u53ef\u4ee5\u83b7\u5f97\u4e0e\u6a21\u578b\u5927\u5c0f\u589e\u52a030\u500d\u5927\u81f4\u76f8\u540c\u7684\u6027\u80fd\u63d0\u5347\uff0c\u5e76\u4e14\u9a8c\u8bc1\u5668\u7684\u6548\u679c\u968f\u7740\u6570\u636e\u7684\u589e\u52a0\u800c\u63d0\u5347\u5f97\u66f4\u597d\u3002</li> <li>\u6211\u4eec\u8bc1\u660edropout\u662f\u4e00\u4e2a\u5f3a\u6b63\u5219\u5316\u5668\uff0c\u663e\u8457\u63d0\u9ad8\u4e86\u5fae\u8c03\u548c\u9a8c\u8bc1\u7684\u6027\u80fd\u3002</li> </ol>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/gsm8k/training_veriers_to_solve_math_word_problems/#2","title":"2 \u6570\u636e\u96c6","text":"<p>GSM8K\u7531\u4eba\u7c7b\u95ee\u9898\u7f16\u5199\u8005\u521b\u5efa\u76848.5K\u4e2a\u9ad8\u8d28\u91cf\u7684\u5c0f\u5b66\u6570\u5b66\u95ee\u9898\u7ec4\u6210\u3002\u6211\u4eec\u5c06\u8fd9\u4e9b\u95ee\u9898\u5206\u4e3a7.5K\u8bad\u7ec3\u95ee\u9898\u548c1K\u6d4b\u8bd5\u95ee\u9898\u3002\u8fd9\u4e9b\u95ee\u9898\u9700\u89812\u52308\u4e2a\u6b65\u9aa4\u6765\u89e3\u51b3\uff0c\u89e3\u51b3\u65b9\u6848\u4e3b\u8981\u6d89\u53ca\u4f7f\u7528\u57fa\u672c\u7b97\u672f\u8fd0\u7b97\uff08+\u2212\u00d7\u00f7\uff09\u6267\u884c\u4e00\u7cfb\u5217\u57fa\u672c\u8ba1\u7b97\uff0c\u4ee5\u83b7\u5f97\u6700\u7ec8\u7b54\u6848\u3002\u4e00\u4e2a\u806a\u660e\u7684\u4e2d\u5b66\u751f\u5e94\u8be5\u80fd\u591f\u89e3\u51b3\u6bcf\u4e00\u4e2a\u95ee\u9898\u3002</p> <p>\u6211\u4eec\u57fa\u4e8e\u4ee5\u4e0b\u8bbe\u8ba1\u539f\u5219\u521b\u5efa\u4e86GSM8K\u3002</p> <ul> <li>\u9ad8\u8d28\u91cf\u6211\u4eec\u907f\u514d\u4e86\u5bb9\u6613\u51fa\u9519\u7684\u522e\u64e6\u7a0b\u5e8f\uff0c\u800c\u662f\u4f9d\u9760\u4eba\u5de5\u5236\u9020\u95ee\u9898\u3002\u5728\u6839\u636e\u5de5\u4eba\u7684\u56de\u7b54\u534f\u8bae\u8fdb\u884c\u5e7f\u6cdb\u7684\u8d28\u91cf\u63a7\u5236\u540e\uff0c\u6211\u4eec\u4f30\u8ba1\u4e0d\u52302%\u7684\u95ee\u9898\u5305\u542b\u65ad\u88c2\u9519\u8bef\u3002</li> <li>\u9ad8\u591a\u6837\u6027\u6211\u4eec\u52aa\u529b\u5728\u95ee\u9898\u4e4b\u95f4\u5b9e\u73b0\u9ad8\u591a\u6837\u6027\u3002\u6211\u4eec\u79ef\u6781\u907f\u514d\u8bbe\u8ba1\u6765\u81ea\u540c\u4e00\u8bed\u8a00\u6a21\u677f\u6216\u4ec5\u5728\u8868\u9762\u7ec6\u8282\u4e0a\u6709\u6240\u4e0d\u540c\u7684\u95ee\u9898\uff0c\u8fd9\u662f\u8bb8\u591a\u5176\u4ed6\u6570\u636e\u96c6\u4e2d\u666e\u904d\u5b58\u5728\u7684\u95ee\u9898\u3002\u901a\u8fc7\u4f7f\u6bcf\u4e2a\u95ee\u9898\u76f8\u5bf9\u72ec\u7279\uff0c\u4fdd\u6301\u6d4b\u8bd5\u6027\u80fd\u6210\u4e3a\u4e00\u4e2a\u66f4\u76f8\u5173\u7684\u6307\u6807\u3002</li> <li>\u4e2d\u7b49\u96be\u5ea6\u6211\u4eec\u9009\u62e9\u4e00\u4e2a\u5bf9\u5927\u578b\u6700\u5148\u8fdb\u7684\u8bed\u8a00\u6a21\u578b\u5177\u6709\u6311\u6218\u6027\u7684\u95ee\u9898\u5206\u5e03\uff0c\u800c\u4e0d\u662f\u5b8c\u5168\u68d8\u624b\u7684\u3002GSM8K\u5c06\u5e2e\u52a9\u6211\u4eec\u66f4\u597d\u5730\u4e86\u89e3\u4e0d\u540c\u6a21\u578b\u548c\u65b9\u6cd5\u5728\u8fd9\u4e00\u56f0\u96be\u70b9\u4e0a\u7684\u6570\u636e\u7f29\u653e\u8d8b\u52bf\u3002\u95ee\u9898\u4e0d\u9700\u8981\u8d85\u8d8a\u65e9\u671f\u4ee3\u6570\u6c34\u5e73\u7684\u6982\u5ff5\uff0c\u7edd\u5927\u591a\u6570\u95ee\u9898\u90fd\u53ef\u4ee5\u5728\u4e0d\u663e\u5f0f\u5b9a\u4e49\u53d8\u91cf\u7684\u60c5\u51b5\u4e0b\u89e3\u51b3\u3002</li> <li>\u81ea\u7136\u8bed\u8a00\u89e3\u51b3\u65b9\u6848\u6211\u4eec\u6536\u96c6\u81ea\u7136\u8bed\u8a00\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u800c\u4e0d\u662f\u7eaf\u7cb9\u7684\u6570\u5b66\u8868\u8fbe\u5f0f\u3002\u6211\u4eec\u8ba4\u4e3a\u8fd9\u662f\u6700\u5e38\u7528\u7684\u6570\u636e\u683c\u5f0f\uff0c\u6211\u4eec\u5e0c\u671b\u5b83\u80fd\u63ed\u793a\u5927\u578b\u8bed\u8a00\u6a21\u578b\u5185\u90e8\u72ec\u767d\u7684\u7279\u6027\u3002\u6211\u4eec\u6307\u793a\u95ee\u9898\u7f16\u5199\u8005\u5c3d\u53ef\u80fd\u591a\u5730\u89e3\u91ca\u4ed6\u4eec\u7684\u5de5\u4f5c\uff0c\u4f46\u6211\u4eec\u5141\u8bb8\u4ed6\u4eec\u7528\u81ea\u5df1\u4e0d\u540c\u7684\u8bed\u8a00\u98ce\u683c\u7f16\u5199\u89e3\u51b3\u65b9\u6848\u3002</li> </ul> <p>\u5b8c\u6574\u7684GSM8K\u6570\u636e\u96c6\u53ef\u4ee5\u5728https://github.com/openai/grade-school-math\u3002\u793a\u4f8b\u95ee\u9898\u5982\u56fe1\u6240\u793a\uff0c\u6211\u4eec\u5728\u9644\u5f55A\u4e2d\u8ba8\u8bba\u4e86\u5176\u4ed6\u6570\u636e\u96c6\u7ec6\u8282\u3002</p> <p></p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/gsm8k/training_veriers_to_solve_math_word_problems/#3","title":"3 \u76f8\u5173\u5de5\u4f5c","text":""},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/gsm8k/training_veriers_to_solve_math_word_problems/#31","title":"3.1 \u76f8\u5173\u6570\u636e\u96c6","text":"<p>\u65e9\u671f\u7684\u6570\u5b66\u95ee\u9898\u6570\u636e\u96c6\uff08Kushman\u7b49\u4eba\uff0c2014\uff1bRoy\u548cRoth\uff0c2015\uff09\u76f8\u5bf9\u8f83\u5c0f\uff0c\u4e0d\u9002\u5408\u6d4b\u8bd5\u73b0\u4ee3\u8bed\u8a00\u6a21\u578b\u7684\u5c40\u9650\u6027\u3002Dolphin18K\uff08Huang\u7b49\u4eba\uff0c2016\uff09\u662f\u4e00\u4e2a\u66f4\u5927\u7684\u6570\u636e\u96c6\uff0c\u5305\u542b18K\u95ee\u9898\uff0c\u4f46\u89e3\u51b3\u65b9\u6848\u4ec5\u4ee5\u65b9\u7a0b\u6216\u6700\u7ec8\u7b54\u6848\u7684\u5f62\u5f0f\u63d0\u4f9b\u3002AQuA RAT\uff08Ling\u7b49\u4eba\uff0c2017\uff09\u5305\u542b10\u4e07\u4e2a\u95ee\u9898\uff0c\u4f46\u4e0d\u5e78\u7684\u662f\uff0c\u8be5\u6570\u636e\u96c6\u5b58\u5728\u9ad8\u5ea6\u7684\u95ee\u9898\u6a21\u677f\u5316\u548c\u81ea\u7136\u8bed\u8a00\u89e3\u51b3\u65b9\u6848\u8d28\u91cf\u63a7\u5236\u4e0d\u4f73\u7684\u95ee\u9898\u3002MathQA\u662fAQuA RAT\u6700\u8fd1\u53d1\u5e03\u7684\u4e00\u4e2a\u5b50\u96c6\uff0c\u4e13\u6ce8\u4e8e\u7ea0\u6b63\u8fd9\u4e9b\u9519\u8bef\uff08Amini\u7b49\u4eba\uff0c2019\uff09\uff0c\u4f46\u5373\u4f7f\u662f\u7ea0\u6b63\u540e\u7684\u6570\u636e\u96c6\u4e5f\u5b58\u5728\u6570\u636e\u8d28\u91cf\u95ee\u9898\uff0c\u7ea630%\u7684\u6570\u636e\u5b58\u5728\u4e0d\u4e00\u81f4\uff08Miao\u7b49\u4eba\uff0c2021\uff09\u3002Ape210K\uff08\u8d75\u7b49\u4eba\uff0c2020\uff09\u662f\u6700\u5927\u7684\u516c\u5f00\u6570\u636e\u96c6\uff0c\u7531210K\u4e2a\u4e2d\u56fd\u5c0f\u5b66\u6570\u5b66\u95ee\u9898\u7ec4\u6210\u3002\u7136\u800c\uff0c\u7531\u4e8e\u8bed\u8a00\u969c\u788d\u548c\u7f3a\u4e4f\u81ea\u7136\u8bed\u8a00\u89e3\u51b3\u65b9\u6848\uff0c\u6211\u4eec\u65e0\u6cd5\u5728\u6b64\u6570\u636e\u96c6\u4e0a\u8bc4\u4f30\u6211\u4eec\u7684\u65b9\u6cd5\u3002</p> <p>\u6700\u8fd1\u5f00\u53d1\u7684ASDiv\u6570\u636e\u96c6\uff08Miao\u7b49\u4eba\uff0c2021\uff09\u5305\u542b2.3K\u4e2a\u6570\u5b66\u5355\u8bcd\u95ee\u9898\uff0c\u901a\u8fc7\u786e\u4fdd\u95ee\u9898\u5177\u6709\u9ad8\u591a\u6837\u6027\u548c\u9ad8\u8d28\u91cf\uff0c\u89e3\u51b3\u4e86\u5148\u524d\u6570\u636e\u96c6\u4e2d\u7684\u5e38\u89c1\u7f3a\u9677\u3002\u6211\u4eec\u5728GSM8K\u7684\u521b\u5efa\u8fc7\u7a0b\u4e2d\u5206\u4eab\u4e86\u8fd9\u4e9b\u8bbe\u8ba1\u539f\u5219\u3002\u7136\u800c\uff0c\u6211\u4eec\u6ce8\u610f\u5230GSM8K\u66f4\u5927\uff0c\u63d0\u4f9b\u81ea\u7136\u8bed\u8a00\u89e3\u51b3\u65b9\u6848\uff0c\u5e76\u4e14\u5e73\u5747\u5305\u542b\u9700\u8981\u66f4\u591a\u6b65\u9aa4\u6765\u89e3\u51b3\u7684\u95ee\u9898\u3002MATH\u6570\u636e\u96c6\uff08Hendrycks\u7b49\u4eba\uff0c2021\uff09\u6bd4GSM8K\u66f4\u5927\u3001\u66f4\u590d\u6742\uff0c\u4f46\u9274\u4e8e\u76ee\u524d\u6700\u5148\u8fdb\u7684\u8bed\u8a00\u6a21\u578b\u7684\u80fd\u529b\uff0c\u5176\u9ad8\u96be\u5ea6\u4f7f\u5f97\u51c6\u786e\u8861\u91cf\u8fdb\u5c55\u53d8\u5f97\u5177\u6709\u6311\u6218\u6027\u3002</p> <p>\u5176\u4ed6\u6700\u8fd1\u4e0e\u63a8\u7406\u76f8\u5173\u7684\u6570\u636e\u96c6\u4fa7\u91cd\u4e8e\u7b26\u53f7\u6570\u5b66\u7684\u6570\u5b66\u63a8\u7406\uff08Lample\u548cCharton\uff0c2019\uff09\u3001\u9605\u8bfb\u7406\u89e3\uff08LogiQA\uff09\uff08Liu\u7b49\u4eba\uff0c2020\uff09\u548c\u5e38\u8bc6\u95ee\u7b54\uff08Common senseQA\uff09\uff08Talmor\u7b49\u4eba\uff0c2018\uff09\u3002\u4e0eCommonsenseQA\u7c7b\u4f3c\uff0cGSM8K\u5305\u62ec\u9700\u8981\u57fa\u672c\u80cc\u666f\u77e5\u8bc6\u7684\u95ee\u9898\uff0c\u5982\u4e00\u5468\u7684\u5929\u6570\u3002\u4e0e\u8981\u6c42\u9605\u8bfb\u7406\u89e3\u548c\u903b\u8f91\u63a8\u7406\u76f8\u7ed3\u5408\u7684LogiQA\u7c7b\u4f3c\uff0cGSM8K\u7684\u4e3b\u8981\u56f0\u96be\u5728\u4e8e\u6b63\u786e\u89e3\u91ca\u95ee\u9898\u548c\u901a\u8fc7\u89e3\u51b3\u95ee\u9898\u7684\u6b65\u9aa4\u8fdb\u884c\u63a8\u7406\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/gsm8k/training_veriers_to_solve_math_word_problems/#32","title":"3.2 \u76f8\u5173\u65b9\u6cd5","text":"<p>\u4e4b\u524d\u7684\u5de5\u4f5c\u8bd5\u56fe\u7528\u57fa\u4e8e\u5faa\u73af\u795e\u7ecf\u7f51\u7edc\u7684seq2seq\u6a21\u578b\uff08Sutskever\u7b49\u4eba\uff0c2014\uff09\u548c\u5bc6\u5207\u76f8\u5173\u7684\u53d8\u4f53\uff08Wang\u7b49\u4eba\uff0c2017\uff1bHuang\u7b49\u4eba\uff0c2018\uff09\u6765\u89e3\u51b3\u7ecf\u5178\u7684\u6570\u5b66\u95ee\u9898\u57fa\u51c6\u3002\u6700\u8fd1\u7684\u5de5\u4f5c\u901a\u8fc7\u8bbe\u8ba1\u4e13\u95e8\u7684\u7f16\u7801\u5668-\u89e3\u7801\u5668\u67b6\u6784\u63d0\u9ad8\u4e86\u6027\u80fd\uff08Amini\u7b49\u4eba\uff0c2019\uff1bChiang\u548cChen\uff0c2018\uff1bXie\u548cSun\uff0c2019\uff1bChen\u7b49\u4eba\uff0c2020\uff1bLi\u7b49\u4eba\uff0c2020\uff09\uff0c\u5176\u4e2d\u6700\u5f3a\u7684\u7ed3\u679c\u901a\u5e38\u4f9d\u8d56\u4e8eBERT\u5bb6\u65cf\u7684\u5927\u578b\u9884\u8bad\u7ec3\u7f16\u7801\u5668\uff08Chen\u7b49\u4eba\uff0c2019\u5e74\uff1bKim\u7b49\u4eba\uff0c2020\u5e74\uff1bLiang\u7b49\u4eba\uff0c2021\u5e74\uff09\u3002</p> <p>\u6700\u8fd1\u7684\u5176\u4ed6\u5de5\u4f5c\u5efa\u8bae\u8fdb\u884c\u989d\u5916\u7684\u9884\u8bad\u7ec3\u4efb\u52a1\uff0c\u4ee5\u8fdb\u4e00\u6b65\u63d0\u9ad8\u57fa\u4e8e\u5927\u578btransformer\u6a21\u578b\u7684\u6570\u5b66\u63a8\u7406\u80fd\u529b\u3002Hendrycks\u7b49\u4eba\uff082021\uff09\u5728\u65b0\u7684AMPS\u8bed\u6599\u5e93\u4e0a\u63d0\u51fa\u4e86\u9884\u8bad\u7ec3\u6a21\u578b\uff0c\u8be5\u8bed\u6599\u5e93\u6765\u6e90\u4e8eKhan Academy\u95ee\u9898\u548cMathematica\u811a\u672c\u3002\u540c\u6837\uff0cShen\u7b49\u4eba\uff082021b\uff09\u63d0\u51fa\u4e86\u4e00\u79cd\u4ece\u4e92\u8054\u7f51\u4e0a\u63d0\u53d6\u7684\u5b66\u524d\u81f3\u5927\u5b66\u8bfe\u7a0b\u8bed\u6599\u5e93\u7684\u9884\u8bad\u7ec3\u65b9\u6cd5\uff0cPeng\u7b49\u4eba\uff082021\uff09\u63d0\u51fa\u4e86\u901a\u8fc7\u9884\u6d4b\u8868\u8fbe\u5f0f\u6811\u4e2d\u7684\u63a9\u7801\u5b50\u8868\u8fbe\u5f0f\u8fdb\u884c\u9884\u8bad\u7ec3\u7684\u65b9\u6cd5\u3002</p> <p>\u4e0e\u9a8c\u8bc1\u7c7b\u4f3c\uff0c\u5176\u4ed6\u65b9\u6cd5\u4e5f\u5bf9\u8bed\u8a00\u6a21\u578b\u8fdb\u884c\u4e86\u5fae\u8c03\uff0c\u4ee5\u5728\u4f17\u591a\u6a21\u578b\u5b8c\u6210\u4e2d\u8fdb\u884c\u9009\u62e9\u3002Nichols\u7b49\u4eba\uff082020\uff09\u63d0\u51fa\u4e86\u4e00\u79cd\u6837\u672c\u548c\u6392\u540d\u65b9\u6cd5\uff0c\u4ee5\u63d0\u9ad8\u5927\u578b\u8bed\u8a00\u6a21\u578b\u7684\u534f\u4f5c\u8bb2\u6545\u4e8b\u80fd\u529b\uff0c\u8bad\u7ec3\u6570\u636e\u6765\u81ea\u4eba\u7c7b\u5de5\u4f5c\u8005\u7684\u504f\u597d\u3002\u5728\u4e0e\u6211\u4eec\u81ea\u5df1\u5bc6\u5207\u76f8\u5173\u7684\u5e76\u884c\u5de5\u4f5c\u4e2d\uff0cShen\u7b49\u4eba\uff082021a\uff09\u5e94\u7528\u4e86\u7c7b\u4f3c\u7684\u65b9\u6cd5\u6765\u89e3\u51b3\u6570\u5b66\u5355\u8bcd\u95ee\u9898\uff0c\u8054\u5408\u8bad\u7ec3\u4e00\u4e2a\u6a21\u578b\u6765\u751f\u6210\u548c\u6392\u5e8f\u89e3\u3002\u6211\u4eec\u7684\u5de5\u4f5c\u4e0e\u4ed6\u4eec\u7684\u65b9\u6cd5\u6709\u8bb8\u591a\u57fa\u672c\u76f8\u4f3c\u4e4b\u5904\uff0c\u5c3d\u7ba1\u6211\u4eec\u5728\u51e0\u4e2a\u5173\u952e\u65b9\u9762\u6709\u6240\u4e0d\u540c\u3002\u9996\u5148\uff0c\u6211\u4eec\u5173\u6ce8\u81ea\u7136\u8bed\u8a00\u89e3\u7684\u7a7a\u95f4\uff0c\u56e0\u4e3a\u8fd9\u662f\u4e00\u79cd\u6bd4\u7eaf\u6570\u5b66\u8868\u8fbe\u5f0f\u66f4\u4e30\u5bcc\u3001\u66f4\u901a\u7528\u7684\u89e3\u683c\u5f0f\u3002\u6b64\u5916\uff0c\u8fd9\u4e00\u9009\u62e9\u4f7f\u6211\u4eec\u7684\u6a21\u578b\u80fd\u591f\u53d1\u5c55\u8bed\u8a00\u5206\u6790\u6280\u80fd\uff0c\u5e76\u4ea7\u751f\u66f4\u5bb9\u6613\u88ab\u4eba\u7c7b\u89e3\u91ca\u7684\u89e3\u51b3\u65b9\u6848\u3002\u5176\u6b21\uff0c\u6211\u4eec\u63d0\u4f9b\u7684\u8bc1\u636e\u8868\u660e\uff0c\u9a8c\u8bc1\u8005\u4f7f\u7528\u989d\u5916\u6570\u636e\u6bd4\u57fa\u7ebf\u65b9\u6cd5\u66f4\u6709\u5229\u3002\u6700\u540e\uff0c\u6211\u4eec\u4f7f\u7528\u5355\u72ec\u7684\u751f\u6210\u5668\u548c\u9a8c\u8bc1\u5668\u7f51\u7edc\uff0c\u4ee5\u9632\u6b62\u751f\u6210\u5668\u8fc7\u62df\u5408\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/gsm8k/training_veriers_to_solve_math_word_problems/#4","title":"4 \u65b9\u6cd5","text":"<p>\u6211\u4eec\u7814\u7a76\u4e86\u89e3\u51b3GSM8K\u4e2d\u95ee\u9898\u7684\u4e24\u79cd\u65b9\u6cd5\uff1a\u5fae\u8c03\u548c\u9a8c\u8bc1\u3002\u5fae\u8c03\u662f\u6211\u4eec\u7684\u57fa\u7ebf\u65b9\u6cd5\uff0c\u5b83\u4f7f\u7528\u4e0eGPT-3\u4e2d\u7684\u751f\u6210\u6027\u9884\u8bad\u7ec3\u76f8\u540c\u7684\u8bed\u8a00\u5efa\u6a21\u76ee\u6807\uff08Brown\u7b49\u4eba\uff0c2020\uff09\u3002\u5728\u6d4b\u8bd5\u65f6\uff0c\u6211\u4eec\u901a\u8fc7\u81ea\u56de\u5f52\u91c7\u6837\u5355\u4e2a\u4f4e\u6e29\u89e3\u5e76\u68c0\u67e5\u6700\u7ec8\u7b54\u6848\u662f\u5426\u6b63\u786e\u6765\u5224\u65ad\u6027\u80fd\u3002\u76f8\u6bd4\u4e4b\u4e0b\uff0c\u9a8c\u8bc1\u5305\u62ec\u5bf9\u591a\u4e2a\u9ad8\u6e29\u89e3\u51b3\u65b9\u6848\u8fdb\u884c\u91c7\u6837\uff0c\u4e3a\u6bcf\u4e2a\u89e3\u51b3\u65b9\u6848\u5206\u914d\u4e00\u4e2a\u5206\u6570\uff0c\u5e76\u8f93\u51fa\u6392\u540d\u6700\u9ad8\u7684\u89e3\u51b3\u65b9\u6848\u3002\u9a8c\u8bc1\u8005\u88ab\u8bad\u7ec3\u6765\u5224\u65ad\u89e3\u7684\u6b63\u786e\u6027\uff0c\u8bad\u7ec3\u6570\u636e\u4ec5\u53d6\u51b3\u4e8e\u89e3\u662f\u5426\u8fbe\u5230\u6b63\u786e\u7684\u6700\u7ec8\u7b54\u6848\u3002</p> <p>\u5bf9\u4e8e\u8fd9\u4e24\u79cd\u65b9\u6cd5\uff0c\u6211\u4eec\u4f7f\u7528GPT-3\u7cfb\u5217\u7684\u6a21\u578b\u4f5c\u4e3a\u521d\u59cb\u5316\uff0c\u4e3b\u8981\u5173\u6ce8175B\u548c6B\u7684\u6a21\u578b\u5c3a\u5bf8\u3002175B\u6a21\u578b\u662f\u6700\u5927\u7684\uff0c\u5e76\u4ea7\u751f\u4e86\u6700\u4ee4\u4eba\u5370\u8c61\u6df1\u523b\u7684\u7ed3\u679c\uff0c\u800c6B\u6a21\u578b\u5728\u7814\u7a76\u76ee\u7684\u4e0a\u660e\u663e\u66f4\u65b9\u4fbf\u3002\u6211\u4eec\u5728\u9644\u5f55B\u4e2d\u8ba8\u8bba\u4e86\u8d85\u53c2\u6570\u7684\u9009\u62e9\u3002 \u6211\u4eec\u7684\u6a21\u578b\u7ecf\u5e38\u4e0d\u80fd\u51c6\u786e\u5730\u8fdb\u884c\u8ba1\u7b97\u3002\u5c3d\u7ba1\u8f83\u5927\u7684\u6a21\u578b\u6bd4\u8f83\u5c0f\u7684\u6a21\u578b\u72af\u7684\u7b97\u672f\u9519\u8bef\u66f4\u5c11\uff0c\u4f46\u8fd9\u4ecd\u7136\u662f\u5e38\u89c1\u7684\u9519\u8bef\u6765\u6e90\u3002\u4e3a\u4e86\u7f13\u89e3\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u901a\u8fc7\u5411\u8bad\u7ec3\u96c6\u4e2d\u6ce8\u5165\u8ba1\u7b97\u6ce8\u91ca\u6765\u8bad\u7ec3\u6240\u6709\u6a21\u578b\u4f7f\u7528\u8ba1\u7b97\u5668\u3002\u5728\u6d4b\u8bd5\u65f6\uff0c\u5f53\u6a21\u578b\u9009\u62e9\u4f7f\u7528\u8fd9\u4e9b\u6ce8\u91ca\u65f6\uff0c\u8ba1\u7b97\u5668\u5c06\u8986\u76d6\u91c7\u6837\u3002\u8be6\u60c5\u89c1\u9644\u5f55C\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/gsm8k/training_veriers_to_solve_math_word_problems/#41","title":"4.1 \u5fae\u8c03","text":"<p>\u6211\u4eec\u901a\u8fc7\u66f4\u65b0\u6a21\u578b\u53c2\u6570\u6765\u6267\u884c\u5fae\u8c03\uff0c\u4ee5\u6700\u5c0f\u5316\u6240\u6709\u8bad\u7ec3token\u7684\u4ea4\u53c9\u71b5\u635f\u5931\u3002\u56fe2\u663e\u793a\u4e86\u572820\u4e2a\u8fed\u4ee3\u5468\u671f\u5185\u5bf9\u4e0d\u540c\u5927\u5c0f\u7684\u8bad\u7ec3\u96c6\u8fdb\u884c\u5fae\u8c03\u540e\u7684\u6d4b\u8bd5\u6027\u80fd\u3002\u6211\u4eec\u5c06\u76f8\u540c\u7684\u6570\u636e\u53ef\u89c6\u5316\u4e3a\u8bad\u7ec3\u96c6\u5927\u5c0f\u7684\u51fd\u6570\u548c\u6a21\u578b\u5927\u5c0f\u7684\u51fd\u6570\u3002\u6d4b\u8bd5\u6027\u80fd\u7531\u6bcf\u4e2a\u6d4b\u8bd5\u95ee\u9898\u7684\u5355\u4e2a\u4f4e\u6e29\uff08T=0\uff09\u6837\u672c\u51b3\u5b9a\u3002\u4e0d\u51fa\u6240\u6599\uff0c\u6211\u4eec\u770b\u5230175B\u578b\u53f7\u7684\u8868\u73b0\u660e\u663e\u4f18\u4e8e\u8f83\u5c0f\u7684\u578b\u53f7\u3002\u5047\u8bbe\u5448\u5bf9\u6570\u7ebf\u6027\u8d8b\u52bf\uff0c\u6211\u4eec\u53ef\u4ee5\u5929\u771f\u5730\u63a8\u65ad\u8fd9\u4e9b\u7ed3\u679c\uff0c\u4ee5\u4f30\u8ba1\u5728\u4f7f\u7528\u5b8c\u6574\u7684GSM8K\u8bad\u7ec3\u96c6\u65f6\uff0c\u9700\u8981\u5177\u67091016\u4e2a\u53c2\u6570\u7684\u6a21\u578b\u624d\u80fd\u8fbe\u523080%\u7684\u6c42\u89e3\u7387\u3002\u66f4\u96be\u6cbf\u6570\u636e\u7ef4\u5ea6\u8fdb\u884c\u63a8\u65ad\uff0c\u56e0\u4e3a\u6027\u80fd\u4f3c\u4e4e\u5e76\u4e0d\u9075\u5faa\u5bf9\u6570\u7ebf\u6027\u8d8b\u52bf\u3002\u7136\u800c\uff0c175B\u6a21\u578b\u4f3c\u4e4e\u9700\u8981\u81f3\u5c11\u4e24\u4e2a\u6570\u91cf\u7ea7\u7684\u989d\u5916\u8bad\u7ec3\u6570\u636e\u624d\u80fd\u8fbe\u523080%\u7684\u89e3\u51b3\u7387\u3002 </p> <p>\u5728\u56fe3\u4e2d\uff0c\u6211\u4eec\u5c55\u793a\u4e866B\u6d4b\u8bd5\u6027\u80fd\u5728100\u8bad\u7ec3\u65f6\u671f\u3002\u6211\u4eec\u4f7f\u7528test@N\u5f53\u5141\u8bb8\u6a21\u578b\u5bf9\u6bcf\u4e2a\u95ee\u9898\u8fdb\u884cN\u6b21\u5355\u72ec\u731c\u6d4b\u65f6\uff0c\u8868\u793a\u81f3\u5c11\u4e00\u6b21\u6b63\u786e\u89e3\u51b3\u7684\u95ee\u9898\u7684\u767e\u5206\u6bd4\u3002\u6211\u4eec\u4f7f\u7528\u4f4e\u6e29\uff08T=0\uff09\u6765\u4ea7\u751ftest@1\u6211\u4eec\u4f7f\u7528\u66f4\u9ad8\u7684\u6e29\u5ea6\uff08T=0.7\uff09\u6765\u751f\u6210test@100\u6837\u672c\u3002\u8fd9\u4e24\u4e2a\u6e29\u5ea6\u503c\u90fd\u662f\u6839\u636e\u7ecf\u9a8c\u9009\u62e9\u7684\uff0c\u4ee5\u4ea7\u751f\u6700\u4f73\u7ed3\u679c\u3002Test@1\u6027\u80fd\u51e0\u4e4e\u5355\u8c03\u5730\u63d0\u9ad8\uff0c\u5373\u4f7f\u6211\u4eec\u5f88\u5feb\u5f00\u59cb\u5bf9\u6d4b\u8bd5\u635f\u5931\u8fdb\u884c\u8fc7\u62df\u5408\u3002\u4e0d\u5e78\u7684\u662f\uff0ctest@100\u6027\u80fd\u4e0b\u964d\u7684\u5e45\u5ea6\u6bd4test@1\u968f\u7740\u6211\u4eec\u589e\u52a0\u7eaa\u5143\u7684\u6570\u91cf\u3002\u8fd9\u662f\u610f\u6599\u4e4b\u4e2d\u7684\uff1a\u968f\u7740\u6a21\u578b\u53cd\u590d\u9047\u5230\u76f8\u540c\u7684\u6570\u636e\uff0c\u5b83\u5bf9\u9884\u6d4b\u53d8\u5f97\u8d8a\u6765\u8d8a\u4e0d\u6821\u51c6\u548c\u8fc7\u4e8e\u81ea\u4fe1\u3002\u5728\u6d4b\u8bd5\u65f6\uff0c\u8fd9\u79cd\u8fc7\u5ea6\u81ea\u4fe1\u4f1a\u5bfc\u81f4\u89e3\u51b3\u65b9\u6848\u7a7a\u95f4\u7684\u8986\u76d6\u7387\u4f4e\uff0c\u8fd9\u79cd\u5f71\u54cd\u53ea\u6709\u5728\u6211\u4eec\u5728\u6d4b\u8bd5\u65f6\u8003\u8651\u591a\u4e2a\u6837\u672c\u65f6\u624d\u4f1a\u53d8\u5f97\u660e\u663e\u3002 \u9009\u62e9\u4e00\u4e2a\u5177\u6709\u826f\u597d\u8986\u76d6\u7387\u7684\u6a21\u578b\u5bf9\u4e8e\u6210\u529f\u8bad\u7ec3\u9a8c\u8bc1\u8005\u81f3\u5173\u91cd\u8981\u3002\u6839\u636e\u7ecf\u9a8c\uff0c\u6211\u4eec\u770b\u5230test@100\u6027\u80fd\u5728\u6700\u521d\u7684\u51e0\u4e2a\u65f6\u671f\u8fbe\u5230\u5cf0\u503c\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u4f7f\u7528\u7ecf\u8fc72\u4e2aepoch\u8bad\u7ec3\u7684\u6a21\u578b\u6765\u751f\u6210\u8bad\u7ec3\u9a8c\u8bc1\u5668\u7684\u6837\u672c\u3002\u6211\u4eec\u5728\u9644\u5f55D\u4e2d\u63d0\u4f9b\u4e866B\u548c175B\u6a21\u578b\u7684\u51e0\u4e2a\u793a\u4f8b\u89e3\u51b3\u65b9\u6848\u3002\u6211\u4eec\u8fd8\u6ce8\u610f\u5230\uff0c\u5728\u8f93\u51fa\u6700\u7ec8\u7b54\u6848\u4e4b\u524d\uff0c\u8ba9\u6a21\u578b\u751f\u6210\u5b8c\u6574\u7684\u81ea\u7136\u8bed\u8a00\u89e3\u51b3\u65b9\u6848\u975e\u5e38\u91cd\u8981\u3002\u5982\u679c\u6211\u4eec\u6539\u4e3a\u5fae\u8c036B\u6a21\u578b\uff0c\u76f4\u63a5\u8f93\u51fa\u6700\u7ec8\u7b54\u6848\uff0c\u800c\u4e0d\u8fdb\u884c\u4efb\u4f55\u4e2d\u95f4\u6b65\u9aa4\uff0c\u6027\u80fd\u5c06\u4ece20.6%\u6025\u5267\u4e0b\u964d\u52305.2%\u3002</p> <p></p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/gsm8k/training_veriers_to_solve_math_word_problems/#42","title":"4.2 \u9a8c\u8bc1","text":"<p>\u4e3a\u4e86\u6539\u8fdb\u5fae\u8c03\u57fa\u7ebf\uff0c\u6211\u4eec\u8bad\u7ec3\u9a8c\u8bc1\u5668\u6765\u5224\u65ad\u6a21\u578b\u751f\u6210\u89e3\u51b3\u65b9\u6848\u7684\u6b63\u786e\u6027\uff0c\u5e76\u5728\u6d4b\u8bd5\u65f6\u6839\u636e\u8fd9\u4e9b\u9a8c\u8bc1\u5668\u8fdb\u884c\u641c\u7d22\u3002\u5728\u95ee\u9898\u548c\u5019\u9009\u89e3\u51b3\u65b9\u6848\u7684\u6761\u4ef6\u4e0b\uff0c\u9a8c\u8bc1\u5668\u8f93\u51fa\u89e3\u51b3\u65b9\u6848\u6b63\u786e\u7684\u6982\u7387\u3002\u8bad\u7ec3\u89e3\u51b3\u65b9\u6848\u4ec5\u6839\u636e\u5176\u662f\u5426\u8fbe\u5230\u6b63\u786e\u7684\u6700\u7ec8\u7b54\u6848\u6765\u6807\u8bb0\u4e3a\u6b63\u786e\u6216\u4e0d\u6b63\u786e\u3002\u5728\u5b9e\u8df5\u4e2d\uff0c\u4e00\u4e9b\u89e3\u51b3\u65b9\u6848\u4f1a\u4f7f\u7528\u6709\u7f3a\u9677\u7684\u63a8\u7406\u5f97\u51fa\u6b63\u786e\u7684\u6700\u7ec8\u7b54\u6848\uff0c\u4ece\u800c\u5bfc\u81f4\u8bef\u62a5\u3002  \u5982\u56fe4\u6240\u793a\uff0c\u6211\u4eec\u6309\u5982\u4e0b\u65b9\u5f0f\u8bad\u7ec3\u9a8c\u8bc1\u5668\uff1a</p> <ol> <li>\u5728\u8bad\u7ec3\u96c6\u4e0a\u5bf9\u6a21\u578b\uff08\u201c\u751f\u6210\u5668\u201d\uff09\u8fdb\u884c2\u4e2a\u8fed\u4ee3\u5468\u671f\u7684\u5fae\u8c03\u3002</li> <li>\u4ece\u751f\u6210\u5668\u4e2d\u4e3a\u6bcf\u4e2a\u8bad\u7ec3\u95ee\u9898\u62bd\u53d6100\u4e2a\u5b8c\u6210\u6837\u672c\uff0c\u5e76\u5c06\u6bcf\u4e2a\u89e3\u51b3\u65b9\u6848\u6807\u8bb0\u4e3a\u6b63\u786e\u6216\u4e0d\u6b63\u786e\u3002</li> <li>\u5728\u6b64\u6570\u636e\u96c6\u4e0a\u8bad\u7ec3\u5355\u4e2a\u5386\u5143\u7684\u9a8c\u8bc1\u5668\u3002</li> </ol> <p>\u8bad\u7ec32\u4e2aepoch\u5c31\u8db3\u4ee5\u8ba9\u751f\u6210\u5668\u5b66\u4e60\u8be5\u9886\u57df\u7684\u57fa\u672c\u6280\u80fd\u3002\u6211\u4eec\u9009\u62e9\u4e0d\u8fdb\u884c\u66f4\u957f\u65f6\u95f4\u7684\u8bad\u7ec3\uff0c\u56e0\u4e3a\u5728\u6b64\u4e4b\u540e\u751f\u6210\u7684\u89e3\u51b3\u65b9\u6848\u7684\u591a\u6837\u6027\u5f00\u59cb\u5d29\u6e83\uff0c\u5982\u56fe3\u6240\u793a\u3002\u6211\u4eec\u8bad\u7ec3\u5355\u72ec\u7684\u751f\u6210\u5668\u548c\u9a8c\u8bc1\u5668\u6a21\u578b\u6765\u9650\u5236\u751f\u6210\u5668\u7684\u8bad\u7ec3\u5e76\u9632\u6b62\u8fc7\u62df\u5408\uff0c\u4f46\u539f\u5219\u4e0a\uff0c\u5e94\u8be5\u53ef\u4ee5\u7ec4\u5408\u8fd9\u4e9b\u6a21\u578b\u3002\u9664\u975e\u53e6\u6709\u8bf4\u660e\uff0c\u5426\u5219\u6211\u4eec\u5bf9\u751f\u6210\u5668\u548c\u9a8c\u8bc1\u5668\u4f7f\u7528\u76f8\u540c\u7684\u6a21\u578b\u5927\u5c0f\u3002\u9664\u4e86\u9884\u6d4b\u89e3\u51b3\u65b9\u6848\u7684\u6b63\u786e\u6027\u5916\uff0c\u6211\u4eec\u8fd8\u4f7f\u7528\u4e0e\u751f\u6210\u5668\u76f8\u540c\u7684\u8bed\u8a00\u5efa\u6a21\u76ee\u6807\u6765\u8bad\u7ec3\u9a8c\u8bc1\u5668\u3002\u8fd9\u5bf9\u9a8c\u8bc1\u8005\u6765\u8bf4\u662f\u4e00\u4e2a\u6709\u4ef7\u503c\u7684\u8f85\u52a9\u76ee\u6807\u3002\u6211\u4eec\u5728\u9644\u5f55E\u4e2d\u8ba8\u8bba\u4e86\u5176\u4ed6\u9a8c\u8bc1\u8005\u57f9\u8bad\u7ec6\u8282\u3002</p> <p>\u5728\u6d4b\u8bd5\u65f6\uff0c\u6211\u4eec\u5bf9\u6bcf\u4e2a\u6d4b\u8bd5\u95ee\u9898\u7684100\u4e2a\u5b8c\u6210\u60c5\u51b5\u8fdb\u884c\u62bd\u6837\uff0c\u7528\u9a8c\u8bc1\u5668\u5bf9\u5176\u8fdb\u884c\u6392\u540d\uff0c\u7136\u540e\u8fd4\u56de\u9a8c\u8bc1\u5668\u5f97\u5206\u6700\u9ad8\u7684\u4e00\u4e2a\u3002\u56fe5\u663e\u793a\u4e866B\u548c175B\u6a21\u578b\u5c3a\u5bf8\u7684\u9a8c\u8bc1\u548c\u5fae\u8c03\u4e4b\u95f4\u7684\u6bd4\u8f83\u3002\u6211\u4eec\u53d1\u73b0\uff0c\u5728\u4f4e\u6570\u636e\u96c6\u5927\u5c0f\u4e0b\u4f7f\u7528\u9a8c\u8bc1\u662f\u4e0d\u5229\u7684\u3002\u6211\u4eec\u8ba4\u4e3a\u8fd9\u662f\u7531\u4e8e\u5bf9\u6b63\u786e\u7b54\u6848\u8fdb\u884c\u8fc7\u62df\u5408\u7684\u538b\u529b\u9020\u6210\u7684\uff1a\u5bf9\u4e8e\u5c0f\u6570\u636e\u96c6\uff0c\u5bf9\u6b63\u786e\u7b54\u6848\u7684\u8fc7\u62df\u5408\u6bd4\u5b66\u4e60\u6b63\u786e\u63a8\u7406\u7684\u66f4\u5177\u666e\u904d\u6027\u7684\u5c5e\u6027\u66f4\u5feb\u3002\u7136\u800c\uff0c\u4e00\u65e6\u6211\u4eec\u4f7f\u7528\u4e86\u8db3\u591f\u5927\u7684\u6570\u636e\u96c6\uff0c\u6211\u4eec\u5c31\u4f1a\u770b\u5230\u9a8c\u8bc1\u5668\u7684\u5f3a\u5927\u63a8\u52a8\u529b\u3002 </p> <p>\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c175B\u9a8c\u8bc1\u5668\u6bd46B\u9a8c\u8bc1\u5668\u201c\u8d77\u98de\u201d\u5f97\u65e9\uff0c\u9700\u8981\u66f4\u5c11\u7684\u8bad\u7ec3\u95ee\u9898\u624d\u80fd\u8d85\u8fc7\u5fae\u8c03\u57fa\u7ebf\u3002\u9a8c\u8bc1\u8005\u627e\u5230\u7684\u793a\u4f8b\u89e3\u51b3\u65b9\u6848\u89c1\u9644\u5f55D\uff0c\u9a8c\u8bc1\u8005\u7f6e\u4fe1\u5ea6\u53ef\u89c6\u5316\u89c1\u9644\u5f55F\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/gsm8k/training_veriers_to_solve_math_word_problems/#43","title":"4.3 \u9a8c\u8bc1\u6d88\u878d\u5b9e\u9a8c","text":"<p>\u6211\u4eec\u53ef\u4ee5\u8bad\u7ec3\u9a8c\u8bc1\u5668\uff0c\u4ee5\u6574\u4e2a\u751f\u6210\u7684\u89e3\u4e3a\u6761\u4ef6\u8fdb\u884c\u5355\u4e2a\u6807\u91cf\u9884\u6d4b\uff0c\u4e5f\u53ef\u4ee5\u5728\u89e3\u4e2d\u7684\u6bcf\u4e2a\u4ee4\u724c\u4e4b\u540e\u8fdb\u884c\u6807\u91cf\u9884\u6d4b\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u9009\u62e9\u540e\u8005\uff0c\u8bad\u7ec3\u9a8c\u8bc1\u5668\u5728\u6bcf\u4e2a\u4ee4\u724c\u540e\u8fdb\u884c\u9884\u6d4b\u3002\u8fd9\u53ef\u4ee5\u88ab\u89c6\u4e3a\u4e00\u4e2a\u4ee4\u724c\u7ea7\u522b\u7684\u503c\u51fd\u6570\u3002\u6211\u4eec\u5728\u56fe6a\u4e2d\u6bd4\u8f83\u4e86\u8fd9\u4e24\u79cd\u65b9\u6cd5\uff0c\u5206\u522b\u6807\u8bb0\u4e3a\u201c\u89e3\u51b3\u65b9\u6848\u7ea7\u522b\u201d\u548c\u201c\u4ee4\u724c\u7ea7\u522b\u201d\u3002</p> <p>\u9884\u6d4b\u6bcf\u4e2a\u4ee4\u724c\u7684\u503c\u51fd\u6570\u662f\u4e00\u9879\u6bd4\u4ec5\u5224\u65ad\u5b8c\u5168\u5b8c\u6210\u66f4\u5177\u6311\u6218\u6027\u548c\u66f4\u5608\u6742\u7684\u4efb\u52a1\u3002\u7136\u800c\uff0c\u5c3d\u7ba1\u6700\u521d\u7684\u8bad\u7ec3\u901f\u5ea6\u8f83\u6162\uff0c\u4f46\u4ee4\u724c\u7ea7\u9a8c\u8bc1\u5668\u6700\u7ec8\u4ecd\u4f18\u4e8e\u89e3\u51b3\u65b9\u6848\u7ea7\u9a8c\u8bc1\u5668\u3002\u6b64\u5916\uff0c\u4ee4\u724c\u7ea7\u9a8c\u8bc1\u5668\u5728\u8bad\u7ec3\u540e\u671f\u4ecd\u5728\u6539\u8fdb\uff0c\u800c\u89e3\u51b3\u65b9\u6848\u7ea7\u9a8c\u8bc1\u5668\u5219\u5f88\u5feb\u663e\u793a\u51fa\u8fc7\u62df\u5408\u7684\u8ff9\u8c61\u3002\u6211\u4eec\u5047\u8bbe\u5168\u503c\u51fd\u6570\u63d0\u4f9b\u4e86\u4e00\u4e2a\u6709\u7528\u7684\u8f85\u52a9\u4fe1\u53f7\uff0c\u9f13\u52b1\u6a21\u578b\u5728\u6574\u4e2a\u89e3\u51b3\u65b9\u6848\u4e2d\u5224\u65ad\u63a8\u7406\uff0c\u800c\u4e0d\u4ec5\u4ec5\u662f\u8bb0\u5fc6\u6b63\u786e\u7684\u6700\u7ec8\u7b54\u6848\u3002 \u5728\u56fe6b\u4e2d\uff0c\u6211\u4eec\u6d88\u9664\u4e86\u8bad\u7ec3\u9a8c\u8bc1\u8005\u65f6\u4f7f\u7528\u7684\u76ee\u6807\u3002\u5982\u7b2c4.2\u8282\u6240\u8ff0\uff0c\u6211\u4eec\u53ef\u4ee5\u9009\u62e9\u5728\u9a8c\u8bc1\u76ee\u6807\u65c1\u8fb9\u5305\u542b\u8bed\u8a00\u5efa\u6a21\u76ee\u6807\u3002\u6211\u4eec\u5c06\u4f7f\u7528\u8fd9\u4e24\u4e2a\u76ee\u6807\u4e0e\u4ec5\u4f7f\u7528\u9a8c\u8bc1\u76ee\u6807\u8fdb\u884c\u6bd4\u8f83\u3002\u867d\u7136\u4e24\u8005\u90fd\u662f\u5408\u7406\u7684\u9009\u62e9\uff0c\u4f46\u5305\u62ec\u8bed\u8a00\u5efa\u6a21\u76ee\u6807\u5728\u5185\u7684\u4e25\u683c\u6539\u8fdb\u3002\u8fd9\u4f7f\u5f97\u76f4\u89c2\u610f\u4e49\uff1a\u66f4\u597d\u5730\u7406\u89e3\u8fd9\u79cd\u8bed\u8a00\u5206\u5e03\u53ea\u4f1a\u5e2e\u52a9\u9a8c\u8bc1\u8005\u533a\u5206\u6837\u672c\u3002 </p> <p>\u5728\u56fe6c\u4e2d\uff0c\u6211\u4eec\u5206\u522b\u6d88\u878d\u751f\u6210\u5668\u548c\u9a8c\u8bc1\u5668\u7684\u6a21\u578b\u5927\u5c0f\u3002\u6211\u4eec\u53d1\u73b0\uff0c\u4f7f\u7528\u5927\u578b\u751f\u6210\u5668\u548c\u5c0f\u578b\u9a8c\u8bc1\u5668\u7684\u6027\u80fd\u660e\u663e\u4f18\u4e8e\u4f7f\u7528\u5c0f\u578b\u751f\u6210\u5668\u548c\u5927\u578b\u9a8c\u8bc1\u5668\u7684\u6027\u80fd\u3002\u5373\u4f7f\u9a8c\u8bc1\u5668\u6bd4\u751f\u6210\u5668\u5c0f\u5f97\u591a\uff0c\u9a8c\u8bc1\u4ecd\u7136\u975e\u5e38\u6709\u6548\u3002\u8fd9\u8868\u660e\u9a8c\u8bc1\u8005\u53ef\u80fd\u7ecf\u5e38\u4f9d\u8d56\u76f8\u5bf9\u7c97\u7565\u7684\u542f\u53d1\u5f0f\u65b9\u6cd5\u6765\u533a\u5206\u6765\u81ea\u7ed9\u5b9a\u751f\u6210\u5668\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u800c\u4e0d\u662f\u5c1d\u8bd5\u66f4\u5f7b\u5e95\u7684\u9a8c\u8bc1\u5f62\u5f0f\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/gsm8k/training_veriers_to_solve_math_word_problems/#5","title":"5 \u9644\u52a0\u5b9e\u9a8c","text":""},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/gsm8k/training_veriers_to_solve_math_word_problems/#51","title":"5.1 \u6d4b\u8bd5\u65f6\u95f4\u8ba1\u7b97","text":"<p>\u5728\u6d4b\u8bd5\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u9009\u62e9\u751f\u6210\u4efb\u610f\u591a\u4e2a\u89e3\u51b3\u65b9\u6848\uff0c\u7531\u9a8c\u8bc1\u8005\u5728\u9009\u62e9\u6392\u540d\u6700\u9ad8\u7684\u5b8c\u6210\u4e4b\u524d\u8fdb\u884c\u5224\u65ad\u3002\u56fe7a\u663e\u793a\u4e866B\u9a8c\u8bc1\u5668\u7684\u6027\u80fd\u5982\u4f55\u968f\u6bcf\u4e2a\u6d4b\u8bd5\u95ee\u9898\u7684\u5b8c\u6210\u6b21\u6570\u800c\u53d8\u5316\u3002\u5728\u8fd9\u79cd\u89c4\u6a21\u4e0b\uff0c\u968f\u7740\u6211\u4eec\u5c06\u5b8c\u5de5\u6570\u91cf\u589e\u52a0\u5230400\u4e2a\uff0c\u6027\u80fd\u4e5f\u4f1a\u63d0\u9ad8\u3002\u8d85\u8fc7\u8fd9\u4e00\u70b9\uff0c\u6027\u80fd\u5f00\u59cb\u4e0b\u964d\u3002\u8fd9\u8868\u660e\uff0c\u641c\u7d22\u7684\u597d\u5904\u6700\u7ec8\u88ab\u627e\u5230\u6b3a\u9a97\u9a8c\u8bc1\u8005\u7684\u5bf9\u6297\u6027\u89e3\u51b3\u65b9\u6848\u7684\u98ce\u9669\u6240\u62b5\u6d88\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u6211\u4eec\u4f7f\u7528100\u4e2a\u8865\u5168\u6765\u8bc4\u4f30\u9a8c\u8bc1\u5668\u6d4b\u8bd5\u6027\u80fd\uff0c\u56e0\u4e3a\u8fd9\u4ee5\u76f8\u5bf9\u9002\u4e2d\u7684\u8ba1\u7b97\u6210\u672c\u83b7\u5f97\u4e86\u9a8c\u8bc1\u7684\u5927\u90e8\u5206\u597d\u5904\u3002  \u4e3a\u4e86\u8fdb\u4e00\u6b65\u63d0\u9ad8\u6027\u80fd\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u6392\u540d\u9760\u524d\u7684\u9a8c\u8bc1\u8005\u89e3\u51b3\u65b9\u6848\u4e2d\u8fdb\u884c\u591a\u6570\u6295\u7968\uff0c\u800c\u4e0d\u662f\u53ea\u9009\u62e9\u4e00\u4e2a\u9876\u7ea7\u89e3\u51b3\u65b9\u6848\u3002 \u6b64\u6295\u7968\u8fc7\u7a0b\u53ea\u8003\u8651\u5404\u4e2a\u89e3\u51b3\u65b9\u6848\u5f97\u51fa\u7684\u6700\u7ec8\u7b54\u6848\uff1a\u6700\u7ec8\u9009\u62e9\u7684\u7b54\u6848\u662f\u5f97\u7968\u6700\u591a\u7684\u7b54\u6848\u3002\u56fe7b\u663e\u793a\u4e86\u5f53\u6211\u4eec\u5141\u8bb8\u66f4\u591a\u7684\u9876\u7ea7\u6837\u672c\u6295\u7968\u65f6\uff0c\u6027\u80fd\u662f\u5982\u4f55\u53d8\u5316\u7684\u3002\u4e0d\u51fa\u6240\u6599\uff0c\u5f53\u4ece\u66f4\u591a\u7684\u6837\u672c\u5f00\u59cb\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u5141\u8bb8\u66f4\u591a\u7684\u6837\u672c\u8fdb\u884c\u6295\u7968\u3002\u5f53\u6211\u4eec\u53ea\u6709100\u4e2a\u6837\u672c\u65f6\uff0c\u6700\u597d\u53ea\u5141\u8bb8\u524d3-5\u4e2a\u6837\u672c\u6295\u7968\u3002\u5f53\u6211\u4eec\u67093200\u4e2a\u6837\u672c\u65f6\uff0c\u8ba9\u524d30\u540d\u6295\u7968\u5927\u7ea6\u662f\u6700\u4f73\u9009\u62e9\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/gsm8k/training_veriers_to_solve_math_word_problems/#52","title":"5.2 \u89c4\u8303\u5316","text":"<p>\u6211\u4eec\u53d1\u73b0\uff0c\u4f7f\u7528dropout\u4f5c\u4e3a\u6b63\u5219\u5316\u5668\u5bf9\u5fae\u8c03\u548c\u9a8c\u8bc1\u90fd\u6709\u5f88\u5927\u7684\u597d\u5904\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u6211\u4eec\u6cbf\u7740\u7f51\u7edc\u4e2d\u6bcf\u4e00\u5c42\u7684\u6b8b\u5dee\u8def\u5f84\u5e94\u7528\u6b8b\u5deedropout\uff08Vaswani\u7b49\u4eba\uff0c2017\uff09\u3002\u6211\u4eec\u6839\u636e\u8d85\u53c2\u6570\u626b\u63cf\u7684\u7ed3\u679c\u9009\u62e920%\u7684dropout\u7528\u4e8e\u6240\u6709dropout\u5b9e\u9a8c\u3002\u6211\u4eec\u6ce8\u610f\u5230GPT-3\u6a21\u578b\u6ca1\u6709\u9884\u5148\u8bad\u7ec3dropout\u3002\u56e0\u6b64\uff0c\u5bf9\u4e8e\u6d89\u53cadropout\u7684\u5b9e\u9a8c\uff0c\u6211\u4eec\u5728\u968f\u540e\u5fae\u8c03\u6a21\u578b\u4e4b\u524d\uff0c\u4f7f\u7528dropout\u8fdb\u884c\u989d\u5916\u7684\u9884\u8bad\u7ec3\u3002\u8fd9\u51cf\u8f7b\u4e86\u6a21\u578b\u5728\u5fae\u8c03\u8fc7\u7a0b\u4e2d\u7ecf\u5386\u7684\u5206\u5e03\u53d8\u5316\u3002</p> <p>\u6211\u4eec\u9996\u5148\u7814\u7a76\u4e86 dropout \u5bf9\u4e0d\u540c\u8bad\u7ec3\u96c6\u5927\u5c0f\u7684\u5fae\u8c03\u7684\u5f71\u54cd\u3002\u56fe8a\u663e\u793a\uff0cdropout \u5bfc\u81f4\u6bd4\u57fa\u7ebf\u6709\u663e\u8457\u6539\u5584\u3002\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5c06\u7814\u7a76dropout\u5bf9\u9a8c\u8bc1\u5668\u7684\u5f71\u54cd\uff0c\u540c\u65f6\u8003\u8651\u89e3\u51b3\u65b9\u6848\u7ea7\u522b\u548c\u4ee4\u724c\u7ea7\u522b\u7684\u53d8\u91cf\u3002\u5728\u56fe8b\u4e2d\uff0c\u6211\u4eec\u770b\u5230dropout\u663e\u8457\u63d0\u9ad8\u4e86\u89e3\u51b3\u65b9\u6848\u7ea7\u9a8c\u8bc1\u5668\uff0c\u51cf\u8f7b\u4e86\u975e\u6b63\u5219\u5316\u57fa\u7ebf\u4e2d\u53d1\u751f\u7684\u8fc7\u62df\u5408\u3002\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u4f7f\u7528dropout\u548c\u89e3\u51b3\u65b9\u6848\u7ea7\u9a8c\u8bc1\u5668\u53ef\u4ee5\u8fbe\u5230\u4e0e\u4ee4\u724c\u7ea7\u9a8c\u8bc1\u5668\u7c7b\u4f3c\u7684\u6027\u80fd\u6c34\u5e73\u3002\u5728\u56fe8c\u4e2d\uff0c\u6211\u4eec\u5c06dropout\u5e94\u7528\u4e8e\u4ee4\u724c\u7ea7\u9a8c\u8bc1\u5668\u3002\u7531\u4e8e\u4ee4\u724c\u7ea7\u9a8c\u8bc1\u5668\u5df2\u7ecf\u4e0d\u592a\u5bb9\u6613\u8fc7\u62df\u5408\uff0c\u56e0\u6b64dropout\u7684\u5f71\u54cd\u8f83\u5c0f\u4e5f\u5c31\u4e0d\u8db3\u4e3a\u5947\u4e86\u3002\u5c3d\u7ba1\u5982\u6b64\uff0c\u6211\u4eec\u4ecd\u7136\u770b\u5230\uff0c\u901a\u8fc7\u4f7f\u7528dropout\u8bad\u7ec3\u4ee4\u724c\u7ea7\u9a8c\u8bc1\u5668\u7565\u6709\u6536\u83b7\u3002\u8bf7\u6ce8\u610f\uff0c\u6211\u4eec\u5c06\u4ee4\u724c\u7ea7\u9a8c\u8bc1\u5668\u7684\u6279\u5927\u5c0f\u589e\u52a0\u4e864\u500d\uff0c\u4ee5\u66f4\u597d\u5730\u5904\u7406\u66f4\u56f0\u96be\u7684\u76ee\u6807\u548c\u8f8d\u5b66\u5e26\u6765\u7684\u566a\u97f3\u3002 </p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/gsm8k/training_veriers_to_solve_math_word_problems/#6","title":"6 \u7ed3\u8bba","text":"<p>\u6211\u4eec\u5df2\u7ecf\u770b\u5230\uff0c\u76f8\u5bf9\u4e8e\u5fae\u8c03\u57fa\u7ebf\uff0c\u9a8c\u8bc1\u63d0\u4f9b\u4e86\u663e\u8457\u7684\u6027\u80fd\u63d0\u5347\u3002\u5728\u5b8c\u6574\u6570\u636e\u96c6\u4e0a\uff0c6B\u9a8c\u8bc1\u7565\u4f18\u4e8e\u5fae\u8c03\u7684175B\u6a21\u578b\uff0c\u4ece\u800c\u63d0\u4f9b\u4e86\u5927\u7ea6\u76f8\u5f53\u4e8e\u6a21\u578b\u5927\u5c0f\u589e\u52a030\u500d\u7684\u63d0\u5347\u3002\u6211\u4eec\u8fd8\u770b\u5230\uff0c\u4ee4\u724c\u7ea7\u9a8c\u8bc1\u5668\u6bd4\u89e3\u51b3\u65b9\u6848\u7ea7\u9a8c\u8bc1\u5668\u66f4\u4e0d\u5bb9\u6613\u8fc7\u62df\u5408\uff0c\u5e76\u4e14\u6240\u6709\u65b9\u6cd5\u90fd\u53d7\u76ca\u4e8e\u5e26\u6709\u6b8b\u5dee\u4e22\u5f03\u7684\u6b63\u5219\u5316\u3002\u6211\u4eec\u5e0c\u671b\u9a8c\u8bc1\u80fd\u591f\u5f88\u597d\u5730\u6269\u5c55\u5230\u9700\u8981\u66f4\u590d\u6742\u6570\u5b66\u63a8\u7406\u7684\u95ee\u9898\u5206\u5e03\uff0c\u6211\u4eec\u5e0c\u671bGSM8K\u652f\u6301\u5f00\u53d1\u6269\u5c55\u6027\u66f4\u597d\u7684\u65b0\u65b9\u6cd5\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/gsm8k/training_veriers_to_solve_math_word_problems/#_2","title":"\u6570\u636e\u96c6\u8be6\u7ec6\u4fe1\u606f","text":"<p>\u6211\u4eec\u6700\u521d\u901a\u8fc7\u5728Upwork\uff08\u00acUpwork.com\uff09\u4e0a\u96c7\u4f63\u81ea\u7531\u627f\u5305\u5546\u6536\u96c6\u4e861000\u4e2a\u95ee\u9898\u548c\u81ea\u7136\u8bed\u8a00\u89e3\u51b3\u65b9\u6848\u3002\u7136\u540e\uff0c\u6211\u4eec\u4e0e\u81ea\u7136\u8bed\u8a00\u5904\u7406\u6570\u636e\u6807\u7b7e\u5e73\u53f0Surge AI\uff08surgehq.AI\uff09\u5408\u4f5c\uff0c\u6269\u5927\u4e86\u6211\u4eec\u7684\u6570\u636e\u6536\u96c6\u89c4\u6a21\u3002\u5728\u6536\u96c6\u4e86\u5b8c\u6574\u7684\u6570\u636e\u96c6\u540e\uff0c\u6211\u4eec\u8981\u6c42\u5de5\u4eba\u91cd\u65b0\u89e3\u51b3\u6240\u6709\u95ee\u9898\uff0c\u6ca1\u6709\u5de5\u4eba\u91cd\u65b0\u89e3\u51b3\u4ed6\u4eec\u6700\u521d\u5199\u7684\u95ee\u9898\u3002\u6211\u4eec\u68c0\u67e5\u4e86\u4ed6\u4eec\u7684\u6700\u7ec8\u7b54\u6848\u662f\u5426\u4e0e\u6700\u521d\u7684\u89e3\u51b3\u65b9\u6848\u4e00\u81f4\uff0c\u4efb\u4f55\u4ea7\u751f\u5206\u6b67\u7684\u95ee\u9898\u8981\u4e48\u88ab\u4fee\u590d\uff0c\u8981\u4e48\u88ab\u4e22\u5f03\u3002\u7136\u540e\uff0c\u6211\u4eec\u5bf9\u4e00\u5c0f\u90e8\u5206\u95ee\u9898\u8fdb\u884c\u4e86\u53e6\u4e00\u8f6e\u534f\u8bae\u68c0\u67e5\uff0c\u53d1\u73b01.7%\u7684\u95ee\u9898\u4ecd\u7136\u4f1a\u5728\u627f\u5305\u5546\u4e4b\u95f4\u4ea7\u751f\u5206\u6b67\u3002\u6211\u4eec\u4f30\u8ba1\u8fd9\u662f\u5305\u542b\u65ad\u88c2\u9519\u8bef\u6216\u6b67\u4e49\u7684\u95ee\u9898\u7684\u4e00\u90e8\u5206\u3002\u53ef\u80fd\u6709\u66f4\u5927\u6bd4\u4f8b\u7684\u95ee\u9898\u5305\u542b\u5fae\u5999\u7684\u9519\u8bef\u3002 \u4e3a\u4e86\u5e2e\u52a9\u627f\u5305\u5546\u7f16\u5199\u95ee\u9898\uff0c\u6211\u4eec\u63d0\u4f9b\u4e86\u4ece\u51e0\u4e2a\u955c\u5934\u63d0\u793a\u7684175B GPT-3\u6a21\u578b\u81ea\u52a8\u751f\u6210\u7684\u79cd\u5b50\u95ee\u9898\u3002\u627f\u5305\u5546\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u8fd9\u4e9b\u79cd\u5b50\u95ee\u9898\uff0c\u5c06\u5176\u4f5c\u4e3a\u7075\u611f\u5e76\u8fdb\u884c\u4fee\u6539\uff0c\u6216\u8005\u5b8c\u5168\u63d0\u51fa\u81ea\u5df1\u7684\u95ee\u9898\u3002\u6211\u4eec\u6307\u793a\u627f\u5305\u5546\u5728\u89e3\u51b3\u65b9\u6848\u4e2d\u5c3d\u53ef\u80fd\u5177\u6709\u63cf\u8ff0\u6027\uff0c\u5e76\u4e14\u4e0d\u8981\u5728\u4e0d\u540c\u95ee\u9898\u4e4b\u95f4\u91cd\u590d\u4f7f\u7528\u95ee\u9898\u8bbe\u7f6e\u6216\u6a21\u677f\u3002\u4e3a\u4e86\u786e\u4fdd\u627f\u5305\u5546\u4e0d\u4f1a\u91cd\u590d\u4f7f\u7528\u95ee\u9898\u6a21\u677f\uff0c\u6211\u4eec\u8ba1\u7b97\u4e86\u95ee\u9898\u4e4b\u95f4\u7684\u6210\u5bf9\u76f8\u4f3c\u6027\u5f97\u5206\uff0c\u5e76\u4ee5\u6b64\u5411\u627f\u5305\u5546\u63d0\u4f9b\u53cd\u9988\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/gsm8k/training_veriers_to_solve_math_word_problems/#_3","title":"\u8d85\u53c2\u6570","text":"<p>\u6211\u4eec\u5728\u4e0b\u9762\u5217\u51fa\u4e86\u4e00\u4e2a\u91cd\u8981\u7684\u8d85\u53c2\u6570\u8868\u3002\u6211\u4eec\u6839\u636e\u8868\u4e2d\u7684\u503c\u5728\u4e24\u4e2a\u65b9\u5411\u4e0a\u5bf9\u5b66\u4e60\u7387\u548c\u6279\u91cf\u5927\u5c0f\u8fdb\u884c\u4e86\u4e00\u4e2a\u6570\u91cf\u7ea7\u7684\u626b\u63cf\uff0c\u4f46\u6ca1\u6709\u53d1\u73b0\u4efb\u4f55\u663e\u8457\u7684\u6539\u8fdb\u3002\u9a8c\u8bc1\u5668\u6e29\u5ea6\uff08\u4f8b\u5982\uff1a1.0\u800c\u4e0d\u662f0.7\uff09\u548c\u76ee\u6807\uff08\u4ea4\u53c9\u71b5\u800c\u4e0d\u662f\u5747\u65b9\u8bef\u5dee\uff09\u7684\u5176\u4ed6\u5408\u7406\u9009\u62e9\u5bf9\u6211\u4eec\u7684\u6d88\u878d\u5f71\u54cd\u4e5f\u53ef\u4ee5\u5ffd\u7565\u4e0d\u8ba1\u3002 </p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/gsm8k/training_veriers_to_solve_math_word_problems/#_4","title":"\u8ba1\u7b97\u5668\u6ce8\u91ca","text":"<p>\u8ba1\u7b97\u5668\u6ce8\u91ca\u4e0d\u662f\u7531\u4eba\u5de5\u627f\u5305\u5546\u63d0\u4f9b\u7684\uff1a\u5b83\u4eec\u662f\u7531\u786c\u7f16\u7801\u903b\u8f91\u548c\u5fae\u8c03\u7684\u8bed\u8a00\u6a21\u578b\u7ec4\u5408\u751f\u6210\u7684\u3002\u81ea\u52a8\u751f\u6210\u8ba1\u7b97\u5668\u6ce8\u91ca\u7684\u903b\u8f91\u5e76\u4e0d\u5b8c\u7f8e\u3002\u5b83\u4e0d\u592a\u53ef\u80fd\u751f\u6210\u4efb\u4f55\u4e0d\u6b63\u786e\u7684\u6ce8\u91ca\uff0c\u4f46\u5ffd\u7565\u4e00\u4e9b\u53ef\u4ee5\u6ce8\u91ca\u7684\u884c\u5e76\u4e0d\u7f55\u89c1\u3002</p> <p>\u5728\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\uff0c\u5e26\u6ce8\u91ca\u7684\u4ee4\u724c\u548c\u89e3\u51b3\u65b9\u6848\u7684\u5176\u4f59\u90e8\u5206\u4e4b\u95f4\u6ca1\u6709\u7279\u6b8a\u7684\u533a\u522b\uff1a\u5b83\u4eec\u90fd\u53ea\u662f\u4ee4\u724c\u3002\u5728\u6d4b\u8bd5\u8fc7\u7a0b\u4e2d\uff0c\u5f53\u5b58\u5728\u683c\u5f0f\u826f\u597d\u7684\u6ce8\u91ca\u65f6\uff0c\u6211\u4eec\u4f1a\u8986\u76d6\u6a21\u578b\u91c7\u6837\uff0c\u7279\u522b\u662f\u8986\u76d6\u76f4\u63a5\u5728\u201c=\u201d\u540e\u9762\u548c\u00ac&lt;&lt;\u2026&gt;&gt;\u5185\u7684\u6807\u8bb0\u3002 \u4e3a\u4e86\u6a21\u62df\u8ba1\u7b97\u5668\uff0c\u6211\u4eec\u53ea\u9700\u4f7f\u7528python eval\u51fd\u6570\u6765\u8ba1\u7b97\u8868\u8fbe\u5f0f\u4e2d\u7684\u6807\u8bb0\uff08\u56fe9\uff09\u3002\u8d85\u65f6\u6216\u629b\u51fa\u9519\u8bef\u7684\u8bc4\u4f30\u4f1a\u5bfc\u81f4\u8df3\u8fc7\u6ce8\u91ca\uff0c\u5e76\u50cf\u5f80\u5e38\u4e00\u6837\u5bf9\u6a21\u578b\u8fdb\u884c\u91c7\u6837\u3002\u00ac</p> <p>\u6211\u4eec\u6ce8\u610f\u5230\uff0c\u7528\u4e8e\u672c\u6587\u6240\u6709\u7ed3\u679c\u7684\u8ba1\u7b97\u5668\u7684\u539f\u59cb\u7248\u672c\u5b58\u5728\u4e00\u4e9b\u5c0f\u7684\u5b9e\u73b0\u9519\u8bef\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u62a5\u544a\u7684\u6d4b\u8bd5\u6027\u80fd\u7565\u6709\u4f4e\u4f30\uff0c\u5c3d\u7ba1\u5728\u5927\u591a\u6570\u5b9e\u9a8c\u4e2d\uff0c\u8fd9\u79cd\u5dee\u5f02\u7684\u5e45\u5ea6\u4e0d\u52301%\u3002\u4f7f\u7528\u5b8c\u6574\u7684GSM8K\u8bad\u7ec3\u96c6\u65f6\uff0c\u4fee\u590d\u8ba1\u7b97\u5668\u53ef\u5c06\u9a8c\u8bc1\u6d4b\u8bd5\u6027\u80fd\u63d0\u9ad8\u7ea61%\u3002 </p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/gsm8k/training_veriers_to_solve_math_word_problems/#_5","title":"\u793a\u4f8b\u6a21\u578b\u89e3\u51b3\u65b9\u6848","text":"<p>\u6211\u4eec\u5c55\u793a\u4e86\u4e00\u4e9b\u6837\u672c\uff0c\u6bd4\u8f83\u4e866B\u548c175B\u5c3a\u5ea6\u4e0b\u7684\u5fae\u8c03\u548c\u9a8c\u8bc1\u3002\u4e3a\u4e86\u591a\u6837\u6027\uff0c\u5bf9\u6837\u672c\u8fdb\u884c\u4e86\u8f7b\u5fae\u7684\u6311\u9009\u3002  </p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/gsm8k/training_veriers_to_solve_math_word_problems/#_6","title":"\u9a8c\u8bc1\u5668\u8be6\u7ec6\u4fe1\u606f","text":"<p>\u5982\u7b2c4.2\u8282\u6240\u8ff0\uff0c\u9664\u4e86\u539f\u59cb\u8bed\u8a00\u5efa\u6a21\u76ee\u6807\u5916\uff0c\u6211\u4eec\u8fd8\u8bad\u7ec3\u5177\u6709\u8054\u5408\u76ee\u6807\u7684\u9a8c\u8bc1\u5668\uff0c\u5176\u4e2d\u6a21\u578b\u5b66\u4f1a\u5c06\u6a21\u578b\u5b8c\u6210\u6807\u8bb0\u4e3a\u6b63\u786e\u6216\u4e0d\u6b63\u786e\u3002\u4ece\u67b6\u6784\u4e0a\u8bb2\uff0c\u8fd9\u610f\u5473\u7740\u6211\u4eec\u7684\u9a8c\u8bc1\u5668\u662f\u8bed\u8a00\u6a21\u578b\uff0c\u5177\u6709\u4e00\u4e2a\u5c0f\u7684\u6807\u91cf\u5934\uff0c\u53ef\u4ee5\u5728\u6bcf\u4e2a\u4ee4\u724c\u7684\u57fa\u7840\u4e0a\u8f93\u51fa\u9884\u6d4b\u3002</p> <p>\u6211\u4eec\u5c06\u8fd9\u4e2a\u6807\u91cf\u5934\u5b9e\u73b0\u4e3a\u5355\u4e2a\u504f\u7f6e\u53c2\u6570\u548c\u5355\u4e2a\u589e\u76ca\u53c2\u6570\uff0c\u5b83\u4eec\u5bf9\u8bed\u8a00\u6a21\u578b\u6700\u7ec8\u672a\u5d4c\u5165\u5c42\u8f93\u51fa\u7684logits\u8fdb\u884c\u64cd\u4f5c\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u504f\u7f6e\u548c\u589e\u76ca\u4f1a\u79fb\u52a8\u5e76\u7f29\u653e\u4e0e\u8bcd\u6c47\u8868\u4e2d\u7684\u7279\u6b8a\u6807\u8bb0\u76f8\u5bf9\u5e94\u7684logit\u3002\u56e0\u6b64\uff0c\u5176\u4ed6\u4ee4\u724c\u7684logits\u53ef\u4ee5\u7ee7\u7eed\u8868\u793a\u8bed\u8a00\u5efa\u6a21\u76ee\u6807\uff0c\u800c\u8fd9\u4e2a\u7279\u6b8a\u7684\u4ee4\u724c\u662f\u4e3a\u9a8c\u8bc1\u5668\u7684\u9884\u6d4b\u4fdd\u7559\u7684\u3002</p> <p>\u6211\u4eec\u53ef\u4ee5\u9009\u62e9\u4ece\u751f\u6210\u5668\u5fae\u8c03\u7684\u540c\u4e00\u9884\u8bad\u7ec3\u8bed\u8a00\u6a21\u578b\u6216\u751f\u6210\u5668\u672c\u8eab\u521d\u59cb\u5316\u9a8c\u8bc1\u5668\u3002\u5728\u6211\u4eec\u7684\u6d88\u878d\u4e2d\uff0c\u540e\u8005\u7684\u8868\u73b0\u7565\u597d\uff1b\u6211\u4eec\u6000\u7591\u8fd9\u662f\u56e0\u4e3a\u66f4\u597d\u5730\u7406\u89e3\u751f\u6210\u5668\u5b66\u4e60\u7684\u8bed\u8a00\u5206\u5e03\u53ea\u4f1a\u5e2e\u52a9\u9a8c\u8bc1\u5668\u5bf9\u8be5\u5206\u5e03\u4e2d\u7684\u6837\u672c\u8fdb\u884c\u8bc4\u5206\u3002\u9664\u975e\u53e6\u6709\u660e\u786e\u8bf4\u660e\uff0c\u5426\u5219\u5728\u6240\u6709\u5b9e\u9a8c\u4e2d\uff0c\u6211\u4eec\u90fd\u4f1a\u4ece\u76f8\u5e94\u7684\u751f\u6210\u5668\u521d\u59cb\u5316\u9a8c\u8bc1\u5668\u3002</p> <p>\u5f53\u8bad\u7ec3\u5177\u6709\u5171\u540c\u76ee\u6807\u7684\u9a8c\u8bc1\u8005\u65f6\uff0c\u6211\u4eec\u4f7f\u7528\u8bed\u8a00\u6570\u636e\u548c\u9a8c\u8bc1\u8005\u6570\u636e\u7684\u76f8\u7b49\u7ec4\u5408\u3002\u56e0\u4e3a\u6211\u4eec\u5bf9\u6bcf\u4e2a\u539f\u59cb\u8bad\u7ec3\u793a\u4f8b\u7684100\u4e2a\u5b8c\u6210\u8fdb\u884c\u91c7\u6837\u4ee5\u751f\u6210\u9a8c\u8bc1\u5668\u6570\u636e\uff0c\u6240\u4ee5\u4f7f\u7528\u76f8\u7b49\u7684\u6df7\u5408\u610f\u5473\u7740\u6211\u4eec\u6709\u6548\u5730\u5c06\u539f\u59cb\u8bed\u8a00\u6570\u636e\u4e0a\u91c7\u6837\u4e86100\u500d\u3002\u4e3a\u4e86\u5f62\u6210\u8054\u5408\u76ee\u6807\uff0c\u6211\u4eec\u53ea\u9700\u6dfb\u52a0\u9a8c\u8bc1\u8005\u635f\u5931\u548c\u672a\u52a0\u6743\u7684\u8bed\u8a00\u5efa\u6a21\u635f\u5931\uff0c\u5e76\u5c06\u8be5\u8054\u5408\u76ee\u6807\u7684\u4e00\u4e2a\u7eaa\u5143\u5b9a\u4e49\u4e3a\u6bcf\u4e2a\u9a8c\u8bc1\u8005\u793a\u4f8b\u89c1\u8fc7\u4e00\u6b21\u3002\u6709\u4e86\u8fd9\u4e24\u4e2a\u76ee\u6807\uff0c\u6211\u4eec\u5c4f\u853d\u4e86\u95ee\u9898\u4e2d\u7684\u4ee4\u724c\uff0c\u53ea\u5728\u89e3\u51b3\u65b9\u6848\u4e2d\u7684\u4ee4\u724c\u4e0a\u8fdb\u884c\u8bad\u7ec3\uff0c\u5982\u56fe12\u6240\u793a\u3002 </p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/gsm8k/training_veriers_to_solve_math_word_problems/#_7","title":"\u9a8c\u8bc1\u5668\u53ef\u89c6\u5316","text":"<p> \u4ee4\u724c\u7ea7\u9a8c\u8bc1\u5668\u7684\u4e00\u4e2a\u597d\u5904\u662f\uff0c\u8fd9\u4e9b\u6a21\u578b\u53ef\u4ee5\u7acb\u5373\u89e3\u91ca\uff1a\u6211\u4eec\u53ef\u4ee5\u53ef\u89c6\u5316\u6bcf\u4e2a\u4ee4\u724c\u7684\u9884\u6d4b\u503c\uff0c\u66f4\u597d\u5730\u7406\u89e3\u9a8c\u8bc1\u5668\u5982\u4f55\u5224\u65ad\u6837\u672c\u3002\u4e0a\u9762\u6211\u4eec\u5c55\u793a\u4e86\u4e94\u4e2a\u4e0d\u540c\u7cbe\u5fc3\u6311\u9009\u7684\u95ee\u9898\u548c\u6a21\u578b\u5b8c\u6210\u7684\u9884\u6d4b\u503c\u7684\u53ef\u89c6\u5316\uff0c\u7531\u5728\u5b8c\u6574\u8bad\u7ec3\u96c6\u4e0a\u8bad\u7ec3\u7684175B\u4ee4\u724c\u7ea7\u522b\u9a8c\u8bc1\u5668\u9a8c\u8bc1\u3002 \u5728\u53ef\u89c6\u5316\u4e2d\uff0c\u6587\u672c\u7684\u80cc\u666f\u989c\u8272\u5bf9\u5e94\u4e8e\u8be5\u4ee4\u724c\u7684\u9a8c\u8bc1\u5668\u5206\u6570\uff0c\u5176\u4e2d\u7ea2\u8272\u662f\u4f4e\u503c\uff08\u9884\u6d4b\u4e0d\u6b63\u786e\uff09\uff0c\u7eff\u8272\u662f\u4f4e\u503c\u662f\u9ad8\u503c\uff08\u9884\u6d4b\u6b63\u786e\uff09\u3002\u8868\u683c\u7684\u7b2c\u4e8c\u5217\u603b\u7ed3\u4e86\u9a8c\u8bc1\u8005\u7684\u9884\u6d4b\uff0c\u7b2c\u4e09\u5217\u8868\u660e\u751f\u6210\u7684\u6a21\u578b\u5b8c\u6210\u5b9e\u9645\u4e0a\u662f\u6b63\u786e\u7684\u8fd8\u662f\u4e0d\u6b63\u786e\u7684\u3002\u7b2c\u4e8c\u5217\u548c\u7b2c\u4e09\u5217\u4e4b\u95f4\u7684\u4efb\u4f55\u4e0d\u4e00\u81f4\u90fd\u8868\u660e\u9a8c\u8bc1\u8005\u72af\u4e86\u9519\u8bef\u3002 \u7b2c\u4e00\u884c\u5305\u62ec\u4e00\u4e2a\u771f\u6b63\u7684\u6b63\u793a\u4f8b\uff0c\u5176\u4e2d\u9a8c\u8bc1\u5668\u6b63\u786e\u5730\u5c06\u5b8c\u6210\u5206\u7c7b\u4e3a\u6b63\u786e\u3002\u8bf7\u6ce8\u610f\uff0c\u6a21\u578b\u6700\u521d\u4e0d\u786e\u5b9a\u89e3\u662f\u5426\u6b63\u786e\uff0c\u5e76\u968f\u7740\u89e3\u7684\u8fdb\u5c55\u9010\u6e10\u83b7\u5f97\u786e\u5b9a\u6027\uff1a\u8fd9\u53ef\u80fd\u662f\u9a8c\u8bc1\u5668\u8bad\u7ec3\u8fc7\u7a0b\u7684\u4e00\u4e2a\u7279\u6027\uff0c\u5b83\u5728\u5f88\u5927\u4e00\u90e8\u5206\u4e0d\u6b63\u786e\u7684\u6a21\u578b\u751f\u6210\u6837\u672c\u4e0a\u8fdb\u884c\u8bad\u7ec3\u3002 \u7b2c\u4e8c\u884c\u5305\u542b\u4e00\u4e2a\u95ee\u9898\uff0c\u5176\u4e2d\u89e3\u51b3\u65b9\u6848\u662f\u6b63\u786e\u7684\uff0c\u4f46\u9a8c\u8bc1\u8005\u5c06\u5176\u8bc4\u4e3a\u4e0d\u6b63\u786e\u3002\u8fd9\u53ef\u80fd\u662f\u7531\u4e8e\u95ee\u9898\u63cf\u8ff0\u4e2d\u7684\u201c4\u6b21\u201d\u548c\u201c4\u4e2a\u571f\u8c46\u201d\u4e4b\u95f4\u5b58\u5728\u6b67\u4e49\u3002 \u7b2c\u4e09\u884c\u5305\u542b\u53e6\u4e00\u4e2a\u5047\u9634\u6027\u793a\u4f8b\u3002\u7136\u800c\uff0c\u4e0e\u524d\u9762\u7684\u4f8b\u5b50\u4e0d\u540c\uff0c\u8fd9\u91cc\u7684\u6a21\u578b\u5b8c\u6210\u5305\u542b\u4e00\u4e9b\u9519\u8bef\u7684\u63a8\u7406\u3002\u56e0\u6b64\uff0c\u5c3d\u7ba1\u6a21\u578b\u5b8c\u6210\u4e2d\u7684\u6700\u7ec8\u7b54\u6848\u662f\u6b63\u786e\u7684\uff0c\u4f46\u81ea\u7136\u8bed\u8a00\u89e3\u91ca\u662f\u4e0d\u6b63\u786e\u7684\uff0c\u56e0\u6b64\u9a8c\u8bc1\u8005\u6b63\u786e\u5730\u7ed9\u51fa\u4e86\u8f83\u4f4e\u7684\u5206\u6570\u3002 \u5728\u7b2c\u56db\u884c\u4e2d\uff0c\u6211\u4eec\u770b\u5230\u9a8c\u8bc1\u8005\u5bf9\u6a21\u578b\u5b8c\u6210\u5ea6\u8fdb\u884c\u8bc4\u5206\uff0c\u8be5\u6a21\u578b\u5b8c\u6210\u5ea6\u4e00\u5f00\u59cb\u662f\u6b63\u786e\u7684\uff0c\u4f46\u968f\u7740\u89e3\u51b3\u65b9\u6848\u7684\u8fdb\u5c55\uff0c\u9a8c\u8bc1\u8005\u9010\u6e10\u5bf9\u89e3\u51b3\u65b9\u6848\u5931\u53bb\u4fe1\u5fc3\u3002\u5728\u89e3\u51b3\u65b9\u6848\u51fa\u73b0\u660e\u663e\u9519\u8bef\uff08\u8bf4\u82b1\u8d39\u4e8664\u7f8e\u5143\uff0c\u800c\u4e0d\u662f64+16+8=88\u7f8e\u5143\uff09\u540e\uff0c\u9a8c\u8bc1\u8005\u4ee5\u9ad8\u5ea6\u7684\u7f6e\u4fe1\u5ea6\u5224\u65ad\u89e3\u51b3\u65b9\u6848\u4e0d\u6b63\u786e\u3002 \u6700\u540e\u4e00\u884c\u5305\u542b\u4e00\u4e2a\u8bef\u62a5\uff0c\u5373\u6a21\u578b\u5728\u7b2c\u4e8c\u6b65\u51fa\u9519\uff0c\u5373\u4ece\u94bb\u77f3\u73e0\u5b9d\u800c\u4e0d\u662f\u9ec4\u91d1\u73e0\u5b9d\u7684\u4ef7\u683c\u4e2d\u51cf\u53bb400\u3002\u9a8c\u8bc1\u8005\u5076\u5c14\u4f1a\u5728\u5c06\u6570\u91cf\u4e0e\u5176\u5173\u7cfb\u8fdb\u884c\u53d8\u91cf\u7ed1\u5b9a\u65f6\u51fa\u9519\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/math_01/learning_to_automatically_solve_algebra_word_problems/","title":"Learning to Automatically Solve AlgebraWord Problems","text":""},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/math_01/learning_to_automatically_solve_algebra_word_problems/#_1","title":"\u6458\u8981","text":"<p>\u6211\u4eec\u63d0\u51fa\u4e86\u4e00\u79cd\u81ea\u52a8\u5b66\u4e60\u89e3\u51b3\u4ee3\u6570\u5355\u8bcd\u95ee\u9898\u7684\u65b9\u6cd5\u3002\u6211\u4eec\u7684\u7b97\u6cd5\u8de8\u8d8a\u53e5\u5b50\u8fb9\u754c\u8fdb\u884c\u63a8\u7406\uff0c\u4ee5\u6784\u5efa\u548c\u6c42\u89e3\u7ebf\u6027\u65b9\u7a0b\u7ec4\uff0c\u540c\u65f6\u6062\u590d\u8fd9\u4e9b\u65b9\u7a0b\u4e2d\u7684\u53d8\u91cf\u548c\u6570\u5b57\u4e0e\u95ee\u9898\u6587\u672c\u7684\u5bf9\u9f50\u3002\u5b66\u4e60\u7b97\u6cd5\u4f7f\u7528\u4e0d\u540c\u7684\u76d1\u7763\uff0c\u5305\u62ec\u5b8c\u6574\u7684\u65b9\u7a0b\u6216\u53ea\u662f\u6700\u7ec8\u7684\u7b54\u6848\u3002\u6211\u4eec\u8bc4\u4f30\u4e86\u65b0\u6536\u96c6\u7684\u4ee3\u6570\u5355\u8bcd\u95ee\u9898\u8bed\u6599\u5e93\u7684\u6027\u80fd\uff0c\u8bc1\u660e\u8be5\u7cfb\u7edf\u53ef\u4ee5\u6b63\u786e\u56de\u7b54\u6570\u636e\u96c6\u4e2d\u8fd170%\u7684\u95ee\u9898\u3002\u636e\u6211\u4eec\u6240\u77e5\uff0c\u8fd9\u662f\u8fd9\u9879\u4efb\u52a1\u7684\u7b2c\u4e00\u4e2a\u5b66\u4e60\u7ed3\u679c\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/math_01/learning_to_automatically_solve_algebra_word_problems/#1","title":"1 \u4ecb\u7ecd","text":"<p>\u4ee3\u6570\u5355\u8bcd\u95ee\u9898\u7b80\u6d01\u5730\u63cf\u8ff0\u4e86\u4e00\u4e2a\u4e16\u754c\u72b6\u6001\uff0c\u5e76\u63d0\u51fa\u4e86\u5173\u4e8e\u5b83\u7684\u95ee\u9898\u3002\u6240\u63cf\u8ff0\u7684\u72b6\u6001\u53ef\u4ee5\u7528\u4e00\u4e2a\u65b9\u7a0b\u7ec4\u6765\u5efa\u6a21\uff0c\u65b9\u7a0b\u7ec4\u7684\u89e3\u6307\u5b9a\u4e86\u95ee\u9898\u7684\u7b54\u6848\u3002\u4f8b\u5982\uff0c\u56fe1\u663e\u793a\u4e86\u4e00\u4e2a\u8fd9\u6837\u7684\u95ee\u9898\u3002\u8bfb\u8005\u88ab\u8981\u6c42\u6839\u636e\u95e8\u7968\u4ef7\u683c\u548c\u6574\u4f53\u9500\u552e\u989d\u7684\u9650\u5236\u6765\u63a8\u65ad\u6709\u591a\u5c11\u513f\u7ae5\u548c\u6210\u4eba\u8fdb\u5165\u6e38\u4e50\u56ed\u3002\u672c\u6587\u7814\u7a76\u4e86\u4ec5\u4f7f\u7528\u81ea\u7136\u8bed\u8a00\u81ea\u52a8\u89e3\u51b3\u6b64\u7c7b\u95ee\u9898\u7684\u5b66\u4e60\u4efb\u52a1\u3002 </p> <p>\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\u9700\u8981\u8de8\u8d8a\u53e5\u5b50\u8fb9\u754c\u8fdb\u884c\u63a8\u7406\uff0c\u4ee5\u627e\u5230\u4e00\u4e2a\u7b80\u6d01\u5730\u6a21\u62df\u6240\u63cf\u8ff0\u8bed\u4e49\u5173\u7cfb\u7684\u65b9\u7a0b\u7ec4\u3002\u4f8b\u5982\uff0c\u5728\u56fe1\u4e2d\uff0c\u7b2c\u4e8c\u4e2a\u65b9\u7a0b\u5f0f\u4e2d\u7684\u603b\u95e8\u7968\u6536\u5165\u8ba1\u7b97\u603b\u7ed3\u4e86\u7b2c\u4e8c\u3001\u7b2c\u4e09\u548c\u7b2c\u4e94\u4e2a\u65b9\u7a0b\u5f0f\u4e2d\u63cf\u8ff0\u7684\u95e8\u7968\u4ef7\u683c\u548c\u603b\u9500\u552e\u989d\u7684\u4e8b\u5b9e\u53e5\u5b50\u3002\u6b64\u5916\uff0c\u7b2c\u4e00\u4e2a\u65b9\u7a0b\u6a21\u62df\u4e86\u4e00\u79cd\u9690\u542b\u7684\u8bed\u4e49\u5173\u7cfb\uff0c\u5373\u88ab\u63a5\u7eb3\u7684\u513f\u7ae5\u548c\u6210\u5e74\u4eba\u662f\u8fdb\u5165\u516c\u56ed\u7684\u4eba\u7fa4\u4e2d\u4e0d\u76f8\u4ea4\u7684\u5b50\u96c6\u3002</p> <p>\u6211\u4eec\u7684\u6a21\u578b\u5b9a\u4e49\u4e86\u6574\u4e2a\u65b9\u7a0b\u7ec4\u4e0a\u7684\u8054\u5408\u5bf9\u6570\u7ebf\u6027\u5206\u5e03\uff0c\u4ee5\u53ca\u8fd9\u4e9b\u65b9\u7a0b\u4e0e\u6587\u672c\u4e4b\u95f4\u7684\u5bf9\u9f50\u3002\u53ef\u80fd\u65b9\u7a0b\u7684\u7a7a\u95f4\u7531\u4e00\u7ec4\u65b9\u7a0b\u6a21\u677f\u5b9a\u4e49\uff0c\u6211\u4eec\u4ece\u8bad\u7ec3\u793a\u4f8b\u4e2d\u5f52\u7eb3\u51fa\u6765\uff0c\u5176\u4e2d\u6bcf\u4e2a\u6a21\u677f\u90fd\u6709\u4e00\u7ec4\u69fd\u3002\u6570\u5b57\u69fd\u7531\u6587\u672c\u4e2d\u7684\u6570\u5b57\u586b\u5145\uff0c\u672a\u77e5\u69fd\u4e0e\u540d\u8bcd\u5bf9\u9f50\u3002\u4f8b\u5982\uff0c\u56fe1\u4e2d\u7684\u7cfb\u7edf\u662f\u901a\u8fc7\u7528\u56db\u4e2a\u7279\u5b9a\u6570\u5b57 \uff081.5\u30014\u3001278\u548c792\uff09 \u586b\u5145\u4e00\u4e2a\u8fd9\u6837\u7684\u6a21\u677f\u5e76\u5bf9\u9f50\u4e24\u4e2a\u540d\u8bcd \uff08\u201c\u513f\u7ae5\u7968\u201d\u4e2d\u7684\u201c\u7968\u201d\u548c\u201c\u6210\u4eba\u7968\u201d\u4e2d\u201c\u7968\u201d\uff09 \u800c\u751f\u6210\u7684\u3002\u8fd9\u4e9b\u63a8\u65ad\u7684\u5bf9\u5e94\u5173\u7cfb\u7528\u4e8e\u5b9a\u4e49\u8de8\u53e5\u7279\u5f81\uff0c\u4e3a\u6a21\u578b\u63d0\u4f9b\u5168\u5c40\u7ebf\u7d22\u3002\u4f8b\u5982\uff0c\u5728\u6211\u4eec\u7684\u8fd0\u884c\u793a\u4f8b\u4e2d\uff0c\u5b57\u7b26\u4e32\u6210\u5bf9\uff08\u201c1.50\u7f8e\u5143\u201d\uff0c\u201c\u513f\u7ae5\u201d\uff09\u548c\uff08\u201c4\u7f8e\u5143\u201d\uff0c\u201d\u6210\u4eba\u201d\uff09\u90fd\u56f4\u7ed5\u7740\u201c\u6210\u672c\u201d\u4e00\u8bcd\uff0c\u8fd9\u8868\u660e\u4e00\u4e2a\u8f93\u51fa\u65b9\u7a0b\u5305\u542b\u4e24\u4e2a\u5e38\u6570\u53d8\u91cf\u4e58\u79ef\u4e4b\u548c\u3002</p> <p>\u6211\u4eec\u8003\u8651\u5728\u4e24\u4e2a\u4e0d\u540c\u5c42\u6b21\u7684\u76d1\u7763\u4e0b\u5b66\u4e60\u3002\u5728\u7b2c\u4e00\u79cd\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u5047\u8bbe\u53ef\u4ee5\u8bbf\u95ee\u5927\u591a\u6570\u6570\u636e\u7684\u6bcf\u4e2a\u95ee\u9898\u7684\u6570\u503c\u89e3\uff08\u89c1\u56fe1\uff09\uff0c\u4ee5\u53ca\u4e00\u5c0f\u90e8\u5206\u6807\u6709\u5b8c\u6574\u65b9\u7a0b\u7684\u79cd\u5b50\u793a\u4f8b\u3002\u5728\u5b66\u4e60\u8fc7\u7a0b\u4e2d\uff0c\u6c42\u89e3\u8005\u8bc4\u4f30\u76f8\u4e92\u7ade\u4e89\u7684\u5047\u8bbe\u4ee5\u63a8\u52a8\u5b66\u4e60\u8fc7\u7a0b\u3002\u5728\u7b2c\u4e8c\u79cd\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u4e3a\u6bcf\u4e2a\u95ee\u9898\u63d0\u4f9b\u4e86\u4e00\u4e2a\u5b8c\u6574\u7684\u65b9\u7a0b\u7ec4\u3002\u5728\u8fd9\u4e24\u79cd\u60c5\u51b5\u4e0b\uff0c\u53ef\u7528\u7684\u6807\u8bb0\u65b9\u7a0b\uff08\u79cd\u5b50\u96c6\u6216\u5168\u96c6\uff09\u90fd\u88ab\u62bd\u8c61\u51fa\u6765\uff0c\u4ee5\u63d0\u4f9b\u6a21\u578b\u7684\u65b9\u7a0b\u6a21\u677f\uff0c\u800c\u69fd\u586b\u5145\u548c\u5bf9\u9f50\u51b3\u7b56\u662f\u6f5c\u5728\u53d8\u91cf\uff0c\u5176\u8bbe\u7f6e\u662f\u901a\u8fc7\u76f4\u63a5\u4f18\u5316\u8fb9\u9645\u6570\u636e\u5bf9\u6570\u4f3c\u7136\u6027\u6765\u4f30\u8ba1\u7684\u3002</p> <p>\u8be5\u65b9\u6cd5\u5728algebra.com\u4e0a\u6536\u96c6\u7684514\u4e2a\u4ee3\u6570\u5355\u8bcd\u95ee\u9898\u548c\u76f8\u5173\u65b9\u7a0b\u7cfb\u7edf\u7684\u65b0\u8bed\u6599\u5e93\u4e0a\u8fdb\u884c\u4e86\u8bc4\u4f30\u3002\u5728\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\u63d0\u4f9b\u4e86\u5b8c\u6574\u7684\u65b9\u7a0b\uff0c\u6211\u4eec\u7684\u7b97\u6cd5\u6210\u529f\u5730\u89e3\u51b3\u4e86\u6d4b\u8bd5\u96c6\u4e2d69%\u4ee5\u4e0a\u7684\u5355\u8bcd\u95ee\u9898\u3002\u6b64\u5916\uff0c\u6211\u4eec\u53d1\u73b0\u8be5\u7b97\u6cd5\u53ef\u4ee5\u7a33\u5065\u5730\u5904\u7406\u5f31\u76d1\u7763\uff0c\u5f53\u4ec5\u5bf9\u7b54\u6848\u8fdb\u884c\u8bad\u7ec3\u65f6\uff0c\u53ef\u4ee5\u8fbe\u5230\u4e0a\u8ff0\u6027\u80fd\u768470%\u4ee5\u4e0a\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/math_01/learning_to_automatically_solve_algebra_word_problems/#2","title":"2 \u76f8\u5173\u5de5\u4f5c","text":"<p>\u6211\u4eec\u7684\u5de5\u4f5c\u6d89\u53ca\u4e09\u4e2a\u4e3b\u8981\u7814\u7a76\u9886\u57df\uff1a\u60c5\u5883\u8bed\u4e49\u89e3\u91ca\u3001\u4fe1\u606f\u63d0\u53d6\u548c\u81ea\u52a8\u5355\u8bcd\u95ee\u9898\u6c42\u89e3\u5668\u3002</p> <ul> <li>\u60c5\u5883\u8bed\u4e49\u89e3\u91ca\u5728\u5404\u79cd\u5f62\u5f0f\u7684\u76d1\u7763\u4e0b: \u6709\u5927\u91cf\u5173\u4e8e\u5b66\u4e60\u5c06\u81ea\u7136\u8bed\u8a00\u6620\u5c04\u5230\u5f62\u5f0f\u610f\u4e49\u8868\u5f81\u7684\u7814\u7a76\u3002\u5f3a\u5316\u5b66\u4e60\u53ef\u7528\u4e8e\u5b66\u4e60\u5728\u5916\u90e8\u4e16\u754c\u4e2d\u9605\u8bfb\u6307\u4ee4\u548c\u6267\u884c\u52a8\u4f5c\uff08Branavan\u7b49\u4eba\uff0c2009\uff1bBranavan\u7b49\uff0c2010\uff1bVogel\u548cJurafsky\uff0c2010\uff09\u3002\u5176\u4ed6\u65b9\u6cd5\u4f9d\u8d56\u4e8e\u5bf9\u66f4\u6602\u8d35\u7684\u5e26\u6ce8\u91ca\u903b\u8f91\u5f62\u5f0f\u7684\u8bbf\u95ee\uff08Zelle\u548cMooney\uff0c1996\uff1bThompson\u548c\u7a46\u5c3c\uff0c2003\uff1bWong\u548cMooney\uff1bZettlemoyer\u548cCollins\uff0c2005\uff1bKwiatkowski\u7b49\u4eba\uff0c2010\uff09\u3002\u8fd9\u4e9b\u6280\u672f\u6700\u8fd1\u88ab\u63a8\u5e7f\u5230\u4ece\u4e0e\u53d7\u63a7\u5e94\u7528\u7a0b\u5e8f\u7684\u95f4\u63a5\u53cd\u9988\u914d\u5bf9\u7684\u53e5\u5b50\u4e2d\u5b66\u4e60\u3002\u793a\u4f8b\u5305\u62ec\u95ee\u7b54\uff08Clarke\u7b49\u4eba\uff0c2010\uff1bCai\u548cYates\uff0c2013a\uff1bCai\u4e0eYates\uff0c2013.b\uff1bBerant\u7b49\u4eba\uff0c2013\uff1bKwiatkowski\u7b49\u4eba\uff0c2013\uff09\u3001\u5bf9\u8bdd\u7cfb\u7edf\uff08Artzi\u548cZettlemoyer\uff0c2011\uff09\u3001\u673a\u5668\u4eba\u6307\u4ee4\uff08Chen\u548cMooney\uff0c2011\uff1bChen\uff0c2012\uff1bKim\u548cMooney\u7684\uff0c2012\uff1bMatuszek\u7b49\u4eba\uff0c\u00ac\u00ac\u00ac\u00ac2012\uff1bArtzi\u548cZettlemoyer\u7684\uff0c2013\uff09\u548c\u7a0b\u5e8f\u6267\u884c\uff08Kushman\u548cBarzilay\u7684\uff0c2013\uff1bLei\u7b49\uff0c2013\uff09\u3002\u6211\u4eec\u4e13\u6ce8\u4e8e\u4ece\u5404\u79cd\u76d1\u7763\u4e2d\u5b66\u4e60\uff0c\u5305\u62ec\u95ee\u7b54\u548c\u65b9\u7a0b\u7cfb\u7edf\uff0c\u8fd9\u4e24\u8005\u90fd\u53ef\u4ee5\u4ece\u6ce8\u91ca\u8005\u90a3\u91cc\u53ef\u9760\u5730\u83b7\u5f97\uff0c\u65e0\u9700\u8bed\u8a00\u8bad\u7ec3\uff0c\u53ea\u9700\u57fa\u672c\u7684\u6570\u5b66\u77e5\u8bc6\u3002 \u51e0\u4e4e\u6240\u6709\u4e0a\u8ff0\u5de5\u4f5c\u90fd\u662f\u5355\u72ec\u5904\u7406\u5355\u53e5\u3002\u8003\u8651\u591a\u4e2a\u53e5\u5b50\u7684\u6280\u672f\u901a\u5e38\u4ee5\u8fde\u7eed\u7684\u65b9\u5f0f\u8fdb\u884c\uff0c\u7528\u6709\u9650\u7684\u8de8\u53e5\u63a8\u7406\u4f9d\u6b21\u5904\u7406\u6bcf\u4e2a\u53e5\u5b50\uff08Branavan\u7b49\u4eba\uff0c2009\uff1bZettlemoyer\u548cCollins\uff0c2009\uff1bChen\u548cMooney\uff0c2011\uff1bArtzi\u548cZettlemoye\uff0c2013\uff09\u3002\u6211\u4eec\u4e13\u6ce8\u4e8e\u540c\u65f6\u5206\u6790\u591a\u4e2a\u53e5\u5b50\uff0c\u8fd9\u5bf9\u4e8e\u751f\u6210\u4ee3\u6570\u5355\u8bcd\u95ee\u9898\u7b49\u9886\u57df\u4e2d\u5e38\u89c1\u7684\u5168\u5c40\u8bed\u4e49\u8868\u793a\u662f\u5fc5\u8981\u7684\u3002</li> <li>\u4fe1\u606f\u63d0\u53d6: \u6211\u4eec\u7684\u65b9\u6cd5\u4e0e\u57fa\u4e8e\u6a21\u677f\u7684\u4fe1\u606f\u63d0\u53d6\u5de5\u4f5c\u6709\u5173\uff0c\u5176\u76ee\u6807\u662f\u8bc6\u522b\u6587\u672c\u4e2d\u4e8b\u4ef6\u6a21\u677f\u7684\u5b9e\u4f8b\u5e76\u63d0\u53d6\u5176\u586b\u5145\u7b26\u3002\u5927\u591a\u6570\u5de5\u4f5c\u90fd\u96c6\u4e2d\u5728\u76d1\u7763\u60c5\u51b5\u4e0b\uff0c\u5176\u4e2d\u6a21\u677f\u662f\u624b\u52a8\u5b9a\u4e49\u7684\uff0c\u6570\u636e\u7528\u5bf9\u9f50\u4fe1\u606f\u6807\u8bb0\uff0c\u4f8b\u5982\uff08Grishman\u7b49\u4eba\uff0c2005\uff1bMaslennikov\u548cChua\uff0c2007\uff1bJi\u548cGrishman\uff0c2008\uff1bReichart\u548cBarzilay\uff0c2012\uff09\u3002\u7136\u800c\uff0c\u6700\u8fd1\u7684\u4e00\u4e9b\u5de5\u4f5c\u7814\u7a76\u4e86\u4ece\u6570\u636e\u4e2d\u81ea\u52a8\u5f52\u7eb3\u51fa\u4e00\u7ec4\u53ef\u80fd\u7684\u6a21\u677f\uff08Chambers\u548cJurafsky\uff0c2011\uff1bRitter\u7b49\u4eba\uff0c2012\uff09\u3002\u5728\u6211\u4eec\u7684\u65b9\u6cd5\u4e2d\uff0c\u65b9\u7a0b\u7ec4\u76f8\u5bf9\u5bb9\u6613\u6307\u5b9a\uff0c\u63d0\u4f9b\u4e86\u4e00\u79cd\u6a21\u677f\u7ed3\u6784\uff0c\u8fd9\u4e9b\u6a21\u677f\u4e2d\u7684\u69fd\u4e0e\u6587\u672c\u7684\u5bf9\u9f50\u4e3b\u8981\u662f\u5728\u5b66\u4e60\u8fc7\u7a0b\u4e2d\u7528\u6f5c\u5728\u53d8\u91cf\u5efa\u6a21\u7684\u3002\u6b64\u5916\uff0c\u6620\u5c04\u5230\u53ef\u4ee5\u6267\u884c\u7684\u8bed\u4e49\u8868\u793a\u5141\u8bb8\u6211\u4eec\u5728\u5b66\u4e60\u8fc7\u7a0b\u4e2d\u5229\u7528\u8f83\u5f31\u7684\u76d1\u7763\u3002</li> <li>\u81ea\u52a8\u5355\u8bcd\u95ee\u9898\u89e3\u51b3\u5668: \u6700\u540e\uff0c\u5bf9\u81ea\u52a8\u89e3\u51b3\u5404\u79cd\u7c7b\u578b\u7684\u6570\u5b66\u5355\u8bcd\u95ee\u9898\u8fdb\u884c\u4e86\u7814\u7a76\u3002\u73b0\u6709\u7684\u4e3b\u8981\u65b9\u6cd5\u662f\u624b\u5de5\u8bbe\u8ba1\u57fa\u4e8e\u89c4\u5219\u7684\u7cfb\u7edf\u6765\u89e3\u51b3\u7279\u5b9a\u9886\u57df\u7684\u6570\u5b66\u95ee\u9898\uff08Mukherjee\u548cGarain\uff0c2008\uff1bLev\u7b49\u4eba\uff0c2004\uff09\u3002\u6211\u4eec\u7684\u91cd\u70b9\u662f\u5b66\u4e60\u4e00\u4e2a\u6a21\u578b\uff0c\u7528\u4e8e\u89e3\u51b3\u4ec5\u7ed9\u5b9a\u4e0e\u65b9\u7a0b\u6216\u7b54\u6848\u914d\u5bf9\u7684\u95ee\u9898\u8bad\u7ec3\u8bed\u6599\u5e93\u7684\u7aef\u5230\u7aef\u4efb\u52a1\u3002</li> </ul>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/math_01/learning_to_automatically_solve_algebra_word_problems/#3","title":"3 \u5c06\u5355\u8bcd\u95ee\u9898\u6620\u5c04\u5230\u65b9\u7a0b\u5f0f","text":"<p>\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a\u4e24\u6b65\u8fc7\u7a0b\uff0c\u5c06\u5355\u8bcd\u95ee\u9898\u6620\u5c04\u5230\u65b9\u7a0b\u3002\u9996\u5148\uff0c\u9009\u62e9\u4e00\u4e2a\u6a21\u677f\u6765\u5b9a\u4e49\u65b9\u7a0b\u7cfb\u7edf\u7684\u6574\u4f53\u7ed3\u6784\u3002\u63a5\u4e0b\u6765\uff0c\u4f7f\u7528\u6587\u672c\u4e2d\u7684\u6570\u5b57\u548c\u540d\u8bcd\u5b9e\u4f8b\u5316\u6a21\u677f\u3002\u5728\u63a8\u7406\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u5171\u540c\u8003\u8651\u8fd9\u4e24\u4e2a\u6b65\u9aa4\u3002 </p> <p>\u56fe2\u663e\u793a\u4e86\u4e24\u4e2a\u63a8\u5bfc\u7684\u4e24\u4e2a\u6b65\u9aa4\u3002\u6a21\u677f\u89c4\u5b9a\u4e86\u7cfb\u7edf\u4e2d\u65b9\u7a0b\u7684\u5f62\u5f0f\u4ee5\u53ca\u6bcf\u4e2a\u65b9\u7a0b\u4e2d\u7684\u69fd\u7c7b\u578b\uff1a\\(u\\) \u69fd\u8868\u793a\u672a\u77e5\u6570\uff0c\\(n\\) \u69fd\u8868\u793a\u5fc5\u987b\u4ece\u6587\u672c\u4e2d\u586b\u5199\u7684\u6570\u5b57\u3002\u5728\u63a8\u5bfc1\u4e2d\uff0c\u6240\u9009\u6a21\u677f\u6709\u4e24\u4e2a\u672a\u77e5\u69fd \\(u1\\) \u548c \\(u2\\)\uff0c\u4ee5\u53ca\u56db\u4e2a\u6570\u5b57\u69fd \\(n1\\) \u5230 \\(n4\\)\u3002\u69fd\u53ef\u4ee5\u5728\u65b9\u7a0b\u4e4b\u95f4\u5171\u4eab\uff0c\u4f8b\u5982\uff0c\u793a\u4f8b\u4e2d\u7684\u672a\u77e5\u69fd \\(u1\\) \u548c \\(u2\\) \u51fa\u73b0\u5728\u4e24\u4e2a\u65b9\u7a0b\u4e2d\u3002\u4e00\u4e2a\u63d2\u69fd\u5728\u95ee\u9898\u4e2d\u53ef\u80fd\u6709\u4e0d\u540c\u7684\u5355\u8bcd\uff08\u5355\u8bcd\u201c\u901f\u5ea6\u201d\u7684\u4e0d\u540c\u51fa\u73b0\u6b21\u6570\uff09\u3002\u8fd9\u5141\u8bb8\u5728\u81ea\u7136\u8bed\u8a00\u548c\u7cfb\u7edf\u6a21\u677f\u4e4b\u95f4\u8fdb\u884c\u66f4\u7d27\u5bc6\u7684\u6620\u5c04\uff0c\u5176\u4e2d\u4e0e\u6a21\u677f\u4e2d\u7684\u7b2c\u4e00\u4e2a\u65b9\u7a0b\u5bf9\u9f50\u7684\u5355\u8bcd\u6765\u81ea\u524d\u4e24\u53e5\u8bdd\uff0c\u4e0e\u7b2c\u4e8c\u4e2a\u65b9\u7a0b\u5f0f\u5bf9\u9f50\u7684\u5355\u8bcd\u6765\u6e90\u4e8e\u7b2c\u4e09\u4e2a\u53e5\u5b50\u3002 \u6211\u4eec\u6bcf\u4e2a\u69fd\u4f4d\u5b9e\u4f8b\u6620\u5c04\u5230\u95ee\u9898\u4e2d\u7684\u6bcf\u4e00\u4e2a\u5355\u8bcd\u3002\u6bcf\u4e2a\u6570\u5b57\u69fd \\(n\\) \u4e0e\u4e00\u4e2a\u6570\u5b57\u5bf9\u9f50\uff0c\u6bcf\u4e2a\u672a\u77e5\u69fd \\(u\\) \u4e0e\u4e00\u4e2a\u540d\u8bcd\u5bf9\u9f50\u3002\u4f8b\u5982\uff0c\u5bfc\u65701\u5c06\u6570\u5b57278\u4e0e \\(n1\\) \u30011.50\u4e0e \\(n2\\)\u30014\u4e0e\\(n3\\)\u548c792\u4e0e\\(n4\\)\u5bf9\u9f50\u3002\u5b83\u8fd8\u5c06\\(u1\\)\u7684\u4e24\u4e2a\u5b9e\u4f8b\uff08\u4f8b\u5982\\(u1\\)\u548c\\(u2\\)\uff09\u4e0e\u201c\u7968\u201d\u5bf9\u9f50\uff0c\u5c06\\(u2\\)\u7684\u4e24\u4e2a\u4f8b\u5b50\u4e0e\u201c\u7968\u201c\u5bf9\u9f50\u3002\u76f8\u6bd4\u4e4b\u4e0b\uff0c\u5728\u63a8\u5bfc2\u4e2d\uff0c\u76f8\u540c\u672a\u77e5\u69fd\u7684\u5b9e\u4f8b\uff08\u4f8b\u5982\\(u1\\)\u548c\\(u2\\)\uff09\u88ab\u5bf9\u9f50\u4e3a\u4e24\u4e2a\u5728\u81ea\u7136\u8bed\u8a00\u548c\u7cfb\u7edf\u6a21\u677f\u4e4b\u95f4\u8fdb\u884c\u66f4\u7d27\u5bc6\u7684\u6620\u5c04\uff0c\u5176\u4e2d\u4e0e\u6a21\u677f\u4e2d\u7684\u7b2c\u4e00\u4e2a\u65b9\u7a0b\u5bf9\u9f50\u7684\u5355\u8bcd\u6765\u81ea\u524d\u4e24\u53e5\u8bdd\uff0c\u4e0e\u7b2c\u4e8c\u4e2a\u65b9\u7a0b\u5f0f\u5bf9\u9f50\u7684\u5355\u8bcd\u6765\u6e90\u4e8e\u7b2c\u4e09\u4e2a\u53e5\u5b50\u3002 \u7ed9\u5b9a\u5bf9\u9f50\u65b9\u5f0f\uff0c\u7136\u540e\u53ef\u4ee5\u5b9e\u4f8b\u5316\u6a21\u677f\uff1a\u6bcf\u4e2a\u6570\u5b57\u69fd\\(n\\)\u90fd\u66ff\u6362\u4e3a\u793a\u4f8b\u4e2d\\(u1\\)\u7684\u4f4d\u7f6e\u3002\u6211\u4eec\u5c06\u6bcf\u4e2a\u69fd\u5b9e\u4f8b\u4e0e\u53d8\u91cfa\u4e2d\u7684\u4e00\u4e2a\u5355\u8bcd\u5bf9\u9f50\u3002\u7136\u540e\u81ea\u52a8\u6c42\u89e3\u8be5\u8f93\u51fa\u65b9\u7a0b\u7ec4\u4ee5\u751f\u6210\u6700\u7ec8\u7b54\u6848\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/math_01/learning_to_automatically_solve_algebra_word_problems/#31","title":"3.1 \u5bfc\u6570","text":"<ul> <li>\u5b9a\u4e49\uff1a\u8bbeX\u4e3a\u6240\u6709\u5355\u8bcd\u95ee\u9898\u7684\u96c6\u5408\u3002\u4e00\u4e2a\u5355\u8bcd\u95ee\u9898 \\(x \\in X\\) \u662fk\u4e2a\u5355\u8bcd\u7684\u5e8f\u5217 \\(&lt;w_1,\\cdots, w_k&gt;\\)\u3002\u6b64\u5916\uff0c\u5c06\u65b9\u7a0b\u6a21\u677f  \\(t\\) \u5b9a\u4e49\u4e3a\u516c\u5f0f \\(A=B\\)\uff0c\u5176\u4e2d \\(A\\) \u548c \\(B\\) \u662f\u8868\u8fbe\u5f0f\u3002\u8868\u8fbe\u5f0f \\(A\\) \u662f\u4ee5\u4e0b\u4e4b\u4e00\uff1a</li> <li>\u4e00\u4e2a\u6570\u5b57\u5e38\u6570 \\(f\\)\u3002</li> <li>\u6570\u5b57\u69fd \\(n\\)\u3002</li> <li>\u4e00\u4e2a\u672a\u77e5\u7684\u63d2\u69fdu\u3002</li> <li>\u6570\u5b66\u5173\u7cfb\u5f0fR\u7684\u5e94\u7528\u4e24\u4e2a\u8868\u8fbe\u5f0f\uff08\u4f8b\u5982 \\(n_1 \\times n_2\\)\uff09\u3002</li> </ul> <p>\u6211\u4eec\u5c06\u7cfb\u7edf\u6a21\u677f \\(T\\) \u5b9a\u4e49\u4e3a\u4e00\u7ec4l\u4e2a\u65b9\u7a0b\u6a21\u677f \\(\\{t_0, \\cdots, t_1\\}\\)\u3002\\(T\\) \u662f\u4e00\u7ec4\u6e38\u4e50\u56ed\u51fa\u552e\u4e24\u79cd\u95e8\u7968\u3002\u513f\u7ae5\u79681.5\u7f8e\u5143\u3002\u6210\u4eba\u79684\u7f8e\u5143\u3002\u67d0\u4e00\u5929\uff0c278\u4eba\u8fdb\u5165\u516c\u56ed\u3002\u540c\u4e00\u5929\uff0c\u6536\u53d6\u7684\u5165\u573a\u8d39\u603b\u8ba1792\u7f8e\u5143\u3002\u90a3\u5929\u6709\u591a\u5c11\u5b69\u5b50\u5165\u9662\uff1f\u6709\u591a\u5c11\u6210\u5e74\u4eba\u88ab\u5f55\u53d6\uff1f</p> <p>\u4e00\u4e2a\u69fd\u53ef\u4ee5\u5728\u7cfb\u7edf\u6a21\u677f\u4e2d\u51fa\u73b0\u591a\u6b21\uff0c\u4ee5\u5141\u8bb8\u5728\u4e0d\u540c\u7684\u65b9\u7a0b\u4e2d\u91cd\u7528\u53d8\u91cf\u3002\u6211\u4eec\u5c06\u63d2\u69fd\u7684\u7279\u5b9a\u5b9e\u4f8b \\(i\\)\uff08\u4f8b\u5982\\(u\\)\uff09\u8868\u793a\u4e3a \\(u_i\\)\u3002\u4e3a\u4e86\u7b80\u6d01\u8d77\u89c1\uff0c\u5f53\u4e00\u4e2a\u63d2\u69fd\u00ac\u53ea\u51fa\u73b0\u4e00\u6b21\u65f6\uff0c\u6211\u4eec\u7701\u7565\u4e86\u5b9e\u4f8b\u7d22\u5f15\u3002\u4e3a\u4e86\u6355\u6349x\u7684\u6587\u672c\u548c\u6a21\u677fT\u4e4b\u95f4\u7684\u5bf9\u5e94\u5173\u7cfb\uff0c\u6211\u4eec\u5c06\u5bf9\u9f50p\u5b9a\u4e49\u4e3a\u4e00\u7ec4\u5bf9\uff08w\uff0cs\uff09\uff0c\u5176\u4e2dw\u662fx\u4e2d\u7684\u6807\u8bb0\uff0cs\u662fT\u4e2d\u7684\u69fd\u5b9e\u4f8b\u3002</p> <p>\u6839\u636e\u4e0a\u8ff0\u5b9a\u4e49\uff0c\u53ef\u4ee5\u4ece\u6a21\u677ft\u6784\u5efa\u65b9\u7a0be\uff0c\u5176\u4e2d\u6bcf\u4e2a\u6570\u5b57\u69fdn\u88ab\u66ff\u6362\u4e3a\u5b9e\u6570\uff0c\u6bcf\u4e2a\u672a\u77e5\u69fd\u00acu\u88ab\u66ff\u6362\u4e3a\u53d8\u91cf\uff0c\u6bcf\u4e2a\u6570\u5b57\u5e38\u6570f\u4fdd\u6301\u4e0d\u53d8\u3002\u6211\u4eec\u79f0\u4e4b\u4e3a\u5c06\u6a21\u677f\u8f6c\u6362\u4e3a\u65b9\u7a0b\u6a21\u677f\u5b9e\u4f8b\u5316\u7684\u8fc7\u7a0b\u3002\u7c7b\u4f3c\u5730\uff0c\u65b9\u7a0b\u7cfb\u7edfE\u662f\u4e00\u7ec4l\u4e2a\u65b9\u7a0b{e0\uff0c\u2026\uff0cEL}\uff0c\u53ef\u4ee5\u901a\u8fc7\u5728\u7cfb\u7edf\u6a21\u677fT\u4e2d\u5b9e\u4f8b\u5316\u6bcf\u4e2a\u65b9\u7a0b\u6a21\u677f\u6765\u6784\u9020\u3002\u6700\u540e\uff0c\u7b54\u6848a\u662f\u5b9e\u6570\u7684\u5143\u7ec4\u3002 \u6211\u4eec\u5c06\u4ece\u5355\u8bcd\u95ee\u9898\u5230\u7b54\u6848\u7684\u5bfc\u6570y\u5b9a\u4e49\u4e3a\u5143\u7ec4 \\(T,p,a\\)\uff0c\u5176\u4e2dT\u662f\u6240\u9009\u7684\u7cfb\u7edf\u6a21\u677f\uff0cp\u662fT\u548cx\u4e4b\u95f4\u7684\u5bf9\u9f50\uff0ca\u662f\u901a\u8fc7\u4f7f\u7528x\u5230p\u5b9e\u4f8b\u5316T\u5e76\u6c42\u89e3\u751f\u6210\u7684\u65b9\u7a0b\u800c\u751f\u6210\u7684\u7b54\u6848\u3002\u8bbeY\u4e3a\u6240\u6709\u5bfc\u6570\u7684\u96c6\u5408\u3002 * \u53ef\u80fd\u63a8\u5bfc\u7684\u7a7a\u95f4: \u6211\u4eec\u7684\u76ee\u6807\u662f\u5c06\u6bcf\u4e2a\u5355\u8bcd\u95ee\u9898x\u6620\u5c04\u5230\u4e00\u4e2a\u65b9\u7a0b\u7ec4E.\u6240\u8003\u8651\u7684\u65b9\u7a0b\u7ec4\u7684\u7a7a\u95f4\u7531\u4e00\u7ec4\u53ef\u80fd\u7684\u7cfb\u7edf\u6a21\u677fT\u5b9a\u4e49\u5b57\uff08\u7a81\u51fa\u663e\u793a\uff09\u53ef\u4ee5\u4e0e\u6570\u5b57\u69fdni\u5bf9\u9f50\u3002\u6bcf\u4e2a\u6570\u5b57\u69fdn\u2208T\u53ef\u4ee5\u4e0e\u6587\u672c\u4e2d\u7684\u4efb\u4f55\u6570\u5b57\u5bf9\u9f50\uff0c\u6570\u5b57\u8bcd\u53ea\u80fd\u4e0e\u5355\u4e2a\u69fdn\u5bf9\u9f50\uff0c\u5e76\u4e14\u5fc5\u987b\u4e0e\u8be5\u69fd\u7684\u6240\u6709\u5b9e\u4f8b\u5bf9\u9f50\u3002\u6b64\u5916\uff0c\u672a\u77e5\u7684\u69fd\u5b9e\u4f8bu\u2208T\u53ea\u80fd\u4e0e\u540d\u8bcd\u8bcd\u5bf9\u9f50\u3002\u4e00\u4e2a\u5b8c\u6574\u7684\u63a8\u5bfc\u5c06T\u4e2d\u7684\u6240\u6709\u69fd\u4e0ex\u4e2d\u7684\u5355\u8bcd\u914d\u5bf9\u3002</p> <p>\u56fe3\u663e\u793a\u4e86\u56fe2\u4e2d\u7b2c\u4e00\u4e2a\u95ee\u9898\u548c\u7cfb\u7edf\u6a21\u677f\u7684\u53ef\u80fd\u5bf9\u9f50\u7a7a\u95f4\u3002\u540d\u8bcd\uff08\u4ee5\u9ed1\u4f53\u663e\u793a\uff09\u53ef\u4ee5\u4e0e\u6240\u9009\u6a21\u677f\u4e2d\u7684\u4efb\u4f55\u672a\u77e5\u69fd\u5b9e\u4f8b\u5bf9\u9f50\uff08\u6240\u9009\u6a21\u677f\u7684u1\u3001u2\u3001u1\u548cu2\uff09\u3002\u6570\u5b57\uff08\u7a81\u51fa\u663e\u793a\uff09\u53ef\u4ee5\u4e0e\u4efb\u4f55\u6570\u5b57\u69fd\uff08\u6a21\u677f\u4e2d\u7684n1\u3001n2\u3001n3\u548cn4\uff09\u5bf9\u9f50\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/math_01/learning_to_automatically_solve_algebra_word_problems/#32","title":"3.2 \u6982\u7387\u6a21\u578b","text":"<p>\u7531\u4e8e\u5728\u9009\u62e9\u7cfb\u7edf\u00ac\u6a21\u677f\u548c\u5bf9\u9f50\u65f6\u5b58\u5728\u6b67\u4e49\uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u5355\u8bcd\u95ee\u9898x\u2208x\uff0c\u90fd\u4f1a\u6709\u8bb8\u591a\u53ef\u80fd\u7684\u5bfc\u6570y\u2208y\u3002\u6211\u4eec\u00ac\u4f7f\u7528\u5177\u6709\u7279\u5f81\u00ac\u51fd\u6570\u03c6\uff1ax\u00d7y\u7684\u5bf9\u6570\u7ebf\u6027\u6a21\u578b\u6765\u533a\u5206\u7ade\u4e89\u5206\u6790\u2192 Rd\u548c\u53c2\u6570\u5411\u91cf\u03b8\u2208Rd\u3002\u7ed9\u5b9a\u95ee\u9898x\u7684\u5bfc\u6570y\u7684\u6982\u7387\u5b9a\u4e49\u4e3a\uff1a e\u03b8\u00b7\u03c6\uff08x\uff0cy\uff09</p> <p>\u4ee5\u53ca\u539f\u59cb\u95ee\u9898x\u4e2d\u53ef\u7528\u4e8e\u586b\u5145\u69fd\u7684\u5355\u8bcd\u3002\u5728\u5b9e\u8df5\u4e2d\uff0c\u6211\u4eec\u6839\u636e\u8bad\u7ec3\u6570\u636e\u751f\u6210T\uff0c\u5982\u7b2c-\u00ac</p> <p>p\uff08y|x\uff1b\u03b8\uff09=</p> <p>\u03a3 y\u2208y</p> <p>e\u03b8\u00b7\u03c6\uff08x\uff0cy\uff09</p> <p>\u7b2c4.1\u6761\u3002\u7ed9\u5b9a\u4e00\u4e2a\u7cfb\u7edf\u6a21\u677fT\u2208T\uff0c\u6211\u4eec\u5728T\u548cx\u4e4b\u95f4\u521b\u5efa\u4e00\u4e2a\u5bf9\u9f50p\u3002\u53ef\u80fd\u7684\u5bf9\u9f50\u5bf9\u7684\u96c6\u5408\u88ab\u7ea6\u675f\u5982\u4e0b-\u7b2c6\u8282\u5b9a\u4e49\u4e86\u6240\u4f7f\u7528\u7684\u5168\u5957\u529f\u80fd\u3002 \u6d4b\u8bd5\u65f6\u7684\u63a8\u7406\u95ee\u9898\u8981\u6c42\u6211\u4eec\u627e\u5230\u7ed9\u5b9a\u95ee\u9898\u6700\u53ef\u80fd\u7684\u7b54\u6848</p> <p>x\u3001 \u5047\u8bbe\u53c2\u6570\u03b8\u5df2\u77e5\uff1a f\uff08x\uff09=arg\u6700\u5927\u503cp\uff08a|x\uff1b\u03b8\uff09 \u4e00 \u5728   \u8fd9\u91cc\uff0c\u7b54\u6848\u7684\u6982\u7387     \u5728\u6a21\u677f\u9009\u62e9\u548c\u5bf9\u9f50\u65b9\u9762\u88ab\u8fb9\u7f18\u5316 \u4e86   \uff1a</p> <p>p\uff08a|x\uff1b\u03b8\uff09=   \u2211 y\u2208y s.t.AN\uff08y\uff09=a</p> <p>p\uff08y|x\uff1b\u03b8\uff09    \uff081\uff09</p> <p>\u5176\u4e2dAN\uff08y\uff09\u4ece\u5bfc\u6570\u00acy\u4e2d\u63d0\u53d6\u7b54\u6848a\u3002\u8fd9\u6837\uff0c\u5bfc\u6570\u00acy\u4e0a\u7684\u5206\u5e03\u88ab\u5efa\u6a21\u4e3a\u6f5c\u5728\u53d8\u91cf\u3002\u6211\u4eec\u4f7f\u7528\u6ce2\u675f\u641c\u7d22\u63a8\u7406\u7a0b\u5e8f\u6765\u8fd1\u4f3c\u8ba1\u7b97\u65b9\u7a0b1\uff0c\u5982\u7b2c5\u8282\u6240\u8ff0\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/math_01/learning_to_automatically_solve_algebra_word_problems/#4","title":"4 \u5b66\u4e60","text":"<p>\u4e3a\u4e86\u5b66\u4e60\u6211\u4eec\u7684\u6a21\u578b\uff0c\u6211\u4eec\u9700\u8981\u5728T\u4e2d\u5f52\u7eb3\u7cfb\u7edf\u6a21\u677f\u7684\u7ed3\u6784\uff0c\u5e76\u4f30\u8ba1\u6a21\u578b\u53c2\u6570\u03b8\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/math_01/learning_to_automatically_solve_algebra_word_problems/#41","title":"4.1 \u6a21\u677f\u5f52\u7eb3","text":"<p>\u5f53\u63d0\u4f9b\u5bf9\u4e00\u7ec4n\u4e2a\u8bad\u7ec3\u793a\u4f8b\u7684\u8bbf\u95ee\u65f6\uff0c\u53ef\u4ee5\u751f\u6210\u7cfb\u7edf\u6a21\u677fT {\uff08xi\uff0cEi\uff09\uff1ai=1\uff0c\u2026\uff0cn}\uff0c\u5176\u4e2dxi\u662f\u4e00\u4e2a\u8bcd\u3002\u6211\u4eec\u901a\u8fc7\u6700\u5927\u5316\u6570\u636e\u7684\u6761\u4ef6\u5bf9\u6570\u4f3c\u7136\u6765\u4f30\u8ba1\u03b8\uff0c\u5e76\u5bf9\u6240\u6709\u6709\u6548\u5bfc\u6570\u8fdb\u884c\u8fb9\u7f18\u5316\uff1a</p> <p>Ei\u662f\u4e00\u7ec4\u65b9\u7a0b\u3002\u6211\u4eec\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u5c06\u00ac\u6bcf\u4e2aE\u63a8\u5e7f\u5230\u7cfb\u7edf\u6a21\u677fT\uff1a\uff08a\uff09\u7528\u672a\u77e5\u69fd\u66ff\u6362\u6bcf\u4e2a\u53d8\u91cf\uff0c\u4ee5\u53ca\uff08b\uff09\u00ac\u7528a\u66ff\u6362\u6587\u672c\u4e2d\u63d0\u5230\u7684\u6bcf\u4e2a\u6570\u5b57</p> <p>O=\u2211 \u6211</p> <p>\u03a3 y\u2208y s.t.Vi\uff08y\uff09=1</p> <p>\u5bf9\u6570p\uff08y|neneneba xi\uff1b\u03b8\uff09</p> <p>\u53f7\u7801\u69fd\u3002\u95ee\u9898\u6587\u672c\u4e2d\u672a\u63d0\u53ca\u7684\u6570\u5b57\u5c06\u4f5c\u4e3a\u5e38\u91cf\u4fdd\u7559\u5728\u6a21\u677f\u4e2d\u3002\u8fd9\u4f7f\u6211\u4eec\u80fd\u591f\u89e3\u51b3\u9700\u8981\u95ee\u9898\u8bed\u4e49\u6240\u9690\u542b\u7684\u6570\u5b57\u7684\u95ee\u9898\uff0c\u800c\u4e0d\u662f\u00ac\u6211\u4eec\u4f7f\u7528L-BFGS\uff08Nocedal\u548cWright\uff0c2006\uff09\u6765\u4f18\u5316\u53c2\u6570\u3002\u5355\u4e2a\u53c2\u6570\u00ac\u03b8j\u7684\u68af\u5ea6\u7531\u4e0b\u5f0f\u7ed9\u51fa\uff1a</p> <p>\u800c\u4e0d\u662f\u76f4\u63a5\u51fa\u73b0\u5728\u6587\u672c\u4e2d\uff0c\u5982\u56fe4\u4e2d\u7684\u767e\u5206\u6bd4\u95ee\u9898\u3002\u00ac</p> <p>\u2202O=\u2211 \u2202\u03b8j i</p> <p>Ep\uff08y|neneneba xi\uff0cVi\uff08y\uff09\uff1d1\uff1b\u03b8)</p> <p>[\u03c6j</p> <p>\uff08xi\uff0cy\uff09]\u2212</p> <p>2.</p> <p>4.2 \u53c2\u6570\u4f30\u8ba1 \u5bf9\u4e8e\u53c2\u6570\u4f30\u8ba1\uff0c\u6211\u4eec\u5047\u8bbe\u8bbf\u95een\u4e2a\u8bad\u7ec3\u793a\u4f8b{\uff08xi\uff0cVi\uff09\uff1ai\uff1d1\uff0c\u2026\uff0cn}\uff0c\u6bcf\u4e2a\u8bad\u7ec3\u793a\u4f8b\u90fd\u5305\u542b\u5355\u8bcd\u95ee\u9898xi\u548c\u9a8c\u8bc1\u51fd\u6570Vi\u3002\u9a8c\u8bc1\u51fd\u6570V:Y\u2192 {0,1}\u5982\u679c\u5bfc\u6570y\u2208y\u6b63\u786e\uff0c\u5219\u5c06\u5176\u6620\u5c04\u4e3a1\uff0c\u5426\u5219\u6620\u5c04\u4e3a0\u3002 \u6211\u4eec\u53ef\u4ee5\u6539\u53d8\u9a8c\u8bc1\u529f\u80fd\uff0c\u4ece\u4e0d\u540c\u7c7b\u578b\u7684\u76d1\u7763\u4e2d\u5b66\u4e60\u3002\u5728\u7b2c8\u8282\u4e2d\uff0c\u6211\u4eec\u5c06\u4f7f\u7528\u9a8c\u8bc1\u51fd\u6570\u6765\u68c0\u67e5\u5bfc\u6570\u00acy\u662f\u5426\u5177\u6709\uff081\uff09\u6b63\u786e\u7684\u65b9\u7a0b\u7ec4\u00acE\uff0c\u6216\uff082\uff09\u6b63\u786e\u7684\u7b54\u6848\u00aca\u3002\u6b64\u5916\uff0c\u5728\u6570\u636e\u7684\u4e0d\u540c\u5b50\u96c6\u4e0a\u4f7f\u7528\u4e0d\u540c\u7c7b\u578b\u7684\u9a8c\u8bc1\u51fd\u6570\u53ef\u4ee5\u5b9e\u73b0\u534a\u76d1\u7763\u5b66\u4e60\u3002\u8fd9\u79cd\u65b9\u6cd5\u4e0eArtzi\u548cZettlemoyer \uff082013\uff09\u6709\u5173\u3002</p> <p>Ep\uff08y|neneneba xi\uff1b\u03b8\uff09[\u03c6j\uff08xi\uff0cy\uff09] \u7b2c5\u8282\u63cf\u8ff0\u4e86\u6211\u4eec\u5982\u4f55\u4f7f\u7528\u6ce2\u675f\u641c\u7d22\u6765\u8fd1\u4f3c\u68af\u5ea6\u7684\u4e24\u4e2a\u9879\u3002 5 \u63a8\u8bba \u8ba1\u7b97\u65b9\u7a0b1\u7684\u5f52\u4e00\u5316\u5e38\u6570\u9700\u8981\u5bf9\u6240\u6709\u6a21\u677f\u548c\u6240\u6709\u53ef\u80fd\u7684\u5b9e\u4f8b\u5316\u65b9\u6cd5\u6c42\u548c\u3002\u8fd9\u5bfc\u81f4\u641c\u7d22\u7a7a\u95f4\u4e2dT\uff08\u53ef\u7528\u7cfb\u7edf\u6a21\u677f\u96c6\uff09\u4e2d\u6700\u5927\u6a21\u677f\u7684\u69fd\u6570\u5448\u6307\u6570\u589e\u957f\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u4f7f\u7528\u6ce2\u675f\u641c\u7d22\u6765\u8fd1\u4f3c\u8ba1\u7b97\u3002\u6211\u4eec\u4f7f\u7528T\u4e2d\u7684\u6240\u6709\u6a21\u677f\u521d\u59cb\u5316\u6881\uff0c\u5e76\u8fed\u4ee3\u5730\u5c06\u6881\u4e2d\u6a21\u677f\u7684\u69fd\u4e0e\u95ee\u9898\u6587\u672c\u4e2d\u7684\u5355\u8bcd\u5bf9\u9f50\u3002\u5bf9\u4e8e\u6bcf\u4e2a\u6a21\u677f\uff0c\u4e0b\u4e00\u4e2a\u63d2\u69fd\u00ac \u6839\u636e\u8be5\u6a21\u677f\u7684\u9884\u5b9a\u4e49\u89c4\u8303\u5316\u987a\u5e8f\u9009\u62e9\u8981\u8003\u8651\u7684\u6a21\u677f\u3002\u6bcf\u6b21\u8fed\u4ee3\u540e\uff0c\u6211\u4eec\u6839\u636e\u6a21\u578b\u5f97\u5206\u4fee\u526a\u5149\u675f\uff0c\u4ee5\u4fdd\u6301\u00ac\u524dk\u4e2a\u504f\u5bfc\u6570\u3002\u5728\u4fee\u526a\u6881\u65f6\uff0c\u6211\u4eec\u6700\u591a\u5141\u8bb8\u5bf9\u6bcf\u4e2a\u6a21\u677f\u8fdb\u884cl\u6b21\u90e8\u5206\u63a8\u5bfc\uff0c\u4ee5\u786e\u4fdd\u5c11\u6570\u6a21\u677f\u4e0d\u4f1a\u5784\u65ad\u6881\u3002\u6211\u4eec\u7ee7\u7eed\u8fd9\u4e2a\u8fc7\u7a0b\uff0c\u76f4\u5230\u6881\u4e2d\u7684\u6240\u6709\u6a21\u677f\u90fd\u5b8c\u5168\u5b9e\u4f8b\u5316\u3002 \u5728\u5b66\u4e60\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528\u6ce2\u675f\u641c\u7d22\u8fd1\u4f3c\u8ba1\u7b97\u68af\u5ea6\uff08\u65b9\u7a0b2\uff09\u4e2d\u7684\u7b2c\u4e8c\u9879\u3002\u6839\u636e\u53ef\u7528\u7684\u9a8c\u8bc1\u51fd\u6570V\uff08\u5982\u7b2c4.2\u8282\u6240\u5b9a\u4e49\uff09\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u7cbe\u786e\u5730\u4fee\u526a\u6881\uff0c\u4ee5\u8ba1\u7b97\u68af\u5ea6\u7684\u524d\u534a\u90e8\u5206\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u5f53\u5047\u8bbe\u53ef\u4ee5\u8bbf\u95ee\u6807\u8bb0\u7684\u65b9\u7a0b\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u9650\u5236\u641c\u7d22\uff0c\u53ea\u8003\u8651\u53ef\u80fd\u5b8c\u6210\u4ee5\u751f\u6210\u6807\u8bb0\u65b9\u7a0b\u7684\u90e8\u5206\u5047\u8bbe\u3002\u00ac\u00ac\u00ac\u00ac</p> <p>6 \u578b\u53f7\u8be6\u7ec6\u4fe1\u606f</p> <p>\u6a21\u677f\u89c4\u8303\u5316\u6709\u8bb8\u591a\u8bed\u6cd5\u4e0a\u4e0d\u540c\u4f46\u8bed\u4e49\u4e0a\u7b49\u4ef7\u7684\u65b9\u6cd5\u6765\u8868\u8fbe\u7ed9\u5b9a\u7684\u65b9\u7a0b\u7ec4\u3002\u4f8b\u5982\uff0c\u77ed\u8bed\u201cJohn\u6bd4Bill\u59273\u5c81\u201d\u53ef\u4ee5\u5199\u6210\u00acj=b+3\u6216j-3=b\u3002\u4e3a\u4e86\u907f\u514d\u8fd9\u79cd\u6b67\u4e49\uff0c\u6211\u4eec\u5c06\u6a21\u677f\u89c4\u8303\u5316\u4e3a\u6807\u51c6\u5f62\u5f0f\u8868\u793a\u3002\u6211\u4eec\u901a\u8fc7\u4f7f\u7528\u6570\u5b66\u6c42\u89e3\u5668Maxima\uff08Maxima\uff0c2014\uff09\u6839\u636e\u6570\u5b57\u69fd\u548c\u5e38\u6570\u83b7\u5f97\u672a\u77e5\u69fd\u7684\u7b26\u53f7\u89e3\u6765\u6267\u884c\u8fd9\u79cd\u89c4\u8303\u5316\u3002\u00ac\u00ac\u00ac\u00ac \u63d2\u69fd\u7b7e\u540d\u5728s1+s2=s3\u8fd9\u6837\u7684\u6a21\u677f\u4e2d\uff0c\u63d2\u69fds1\u4e0e\u63d2\u69fds2\u4e0d\u540c\uff0c\u4f46\u6211\u4eec\u5e0c\u671b\u5b83\u4eec\u5171\u4eab\u8bb8\u591a\u7528\u4e8e-\u51b3\u5b9a\u5bf9\u9f50\u7684\u7279\u5f81\u3002\u4e3a\u4e86\u4fbf\u4e8e\u5b9e\u73b0\u8fd9\u4e00\u70b9\uff0c\u6211\u4eec\u00ac\u4e3a\u6bcf\u4e2a\u63d2\u69fd\u548c\u63d2\u69fd\u5bf9\u751f\u6210\u7b7e\u540d\u3002\u69fd\u7684\u7b7e\u540d\u8868\u793a\u5b83\u51fa\u73b0\u7684\u65b9\u7a0b\u7ec4\u3001\u5b83\u6240\u5728\u7684\u7279\u5b9a\u65b9\u7a0b\u4ee5\u53ca\u5b83\u6240\u5c5e\u7684\u65b9\u7a0b\u9879\u3002\u6210\u5bf9\u69fd\u7b7e\u540d\u5c06\u4e24\u4e2a\u69fd\u7684\u7b7e\u540d\u8fde\u63a5\u8d77\u6765\uff0c\u5e76\u6307\u793a\u5171\u4eab\u54ea\u4e9b\u672f\u8bed\u3002\u4f8b\u5982\uff0c\u8fd9\u5141\u8bb8\u56fe2\u4e2d\u63a8\u5bfc1\u4e2d\u7684\u00acn2\u548cn3\u5177\u6709\u76f8\u540c\u7684\u7b7e\u540d\uff0c\u800c\u5bf9n2\u3001u1\u548cn3\u3001u1\u5177\u6709\u4e0d\u540c\u7684\u7b7e\u540d\u3002\u4e3a\u4e86\u5728\u6a21\u677f\u4e4b\u95f4\u5171\u4eab\u7279\u5f81\uff0c\u4e3a\u6574\u4e2a\u6a21\u677f\u4ee5\u53ca\u6bcf\u4e2a\u7ec4\u6210\u65b9\u7a0b\u751f\u6210\u69fd\u548c\u69fd\u5bf9\u7b7e\u540d\u3002 \u7279\u5f81\u7279\u5f81\u03c6\uff08x\uff0cy\uff09\u662f\u9488\u5bf9\u5bfc\u6570y\u548c\u95ee\u9898x\u8ba1\u7b97\u7684\uff0c\u6db5\u76d6\u4e86\u6240\u6709\u5bfc\u6570-</p> <p>\u53ef\u80fd\u8868\u793a\u5982\u56fe4\u6240\u793a\u7684\u6a21\u677f\u3002\u6211\u4eec\u5305\u62ec\u5c06\u6bcf\u4e2a\u6a21\u677f\u4e0e\u5355\u8bcd\u95ee\u9898\u4e2d\u7684\u5355\u5b57\u548c\u53cc\u5b57\u8fde\u63a5\u8d77\u6765\u7684\u529f\u80fd\u3002\u6211\u4eec\u8fd8\u4e3a\u6bcf\u4e2a\u7cfb\u7edf\u6a21\u677f\u63d0\u4f9b\u4e86\u4e00\u4e2a\u6307\u6807\u529f\u80fd\uff0c\u4e3a\u5176\u4f7f\u7528\u63d0\u4f9b\u4e86\u504f\u5dee\u3002\u00ac\u00ac \u5355\u69fd\u529f\u80fd\u81ea\u7136\u8bed\u8a00x\u603b\u662f\u00ac\u5305\u542b\u4e00\u4e2a\u6216\u591a\u4e2a\u95ee\u9898\u6216\u547d\u4ee4\uff0c\u6307\u793a\u67e5\u8be2\u7684\u6570\u91cf\u3002\u4f8b\u5982\uff0c\u56fe2\u4e2d\u7684\u7b2c\u4e00\u4e2a\u95ee\u9898\u662f\u201c\u90a3\u5929\u6709\u591a\u5c11\u5b69\u5b50\u5165\u9662\uff1f\u201d\u6240\u67e5\u8be2\u7684\u6570\u91cf\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\u662f\u5b69\u5b50\u7684\u6570\u91cf\uff0c\u5fc5\u987b\u7528\u65b9\u7a0b\u7ec4\u4e2d\u7684\u4e00\u4e2a\u672a\u77e5\u6570\u6765\u8868\u793a\u3002\u6211\u4eec\u751f\u6210\u4e86\u4e00\u7ec4\u7279\u5f81\uff0c\u8fd9\u4e9b\u7279\u5f81\u7740\u773c\u4e8e\u69fd\u8bcd\u548c\u7591\u95ee\u53e5\u6216\u547d\u4ee4\u53e5\u7684\u5bf9\u8c61\u4e4b\u95f4\u7684\u5355\u8bcd\u91cd\u53e0\u548c\u540d\u8bcd\u77ed\u8bed\u91cd\u53e0\u3002\u6211\u4eec\u8fd8\u8ba1\u7b97\u4e86\u4e00\u4e2a\u7279\u5f81\uff0c\u8be5\u7279\u5f81\u6307\u793a\u4e00\u4e2a\u7a7a\u4f4d\u662f\u5426\u7531\u7591\u95ee\u53e5\u4e2d\u7684\u5355\u8bcd\u586b\u5145\u3002\u6b64\u5916\uff0c\u4ee3\u6570\u95ee\u9898\u7ecf\u5e38\u4f7f\u7528\u201c\u4e24\u79cd\u7968\u201d\u7b49\u77ed\u8bed\uff08\u5982\u56fe2\uff09\u3002\u8fd9\u4e9b\u6570\u5b57\u901a\u5e38\u4e0d\u4f1a\u51fa\u73b0\u5728\u65b9\u7a0b\u5f0f\u4e2d\u3002\u4e3a\u4e86\u89e3\u91ca\u8fd9\u4e00\u70b9\uff0c\u6211\u4eec\u6dfb\u52a0\u4e86\u4e00\u4e2a\u7279\u5f81\uff0c\u6307\u793a\u4e00\u4e2a\u6570\u5b57\u662f1\u8fd8\u662f2\u3002\u6700\u540e\uff0c\u8bb8\u591a\u6a21\u677f\u90fd\u5305\u542bcon-\u00ac\u00ac\u00ac</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/math_01/learning_to_automatically_solve_algebra_word_problems/#514","title":"\u95ee\u9898 514","text":""},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/math_01/learning_to_automatically_solve_algebra_word_problems/#1616","title":"\u53e5\u5b50 1616","text":""},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/math_01/learning_to_automatically_solve_algebra_word_problems/#19357","title":"\u5355\u8bcd 19357","text":"<p>\u8bcd\u6c47\u91cf 2352 \u6bcf\u4e2a\u95ee\u9898\u7684\u5e73\u5747\u5355\u8bcd\u6570  37 \u6bcf\u4e2a\u95ee\u9898\u7684\u5e73\u5747\u53e5\u6570   3.1 \u6bcf\u4e2a\u95ee\u9898\u7684\u5e73\u5747\u540d\u8bcd   13.4</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/math_01/learning_to_automatically_solve_algebra_word_problems/#28","title":"\u552f\u4e00\u65b9\u7a0b\u7ec4  28","text":"<p>\u6bcf\u4e2a\u7cfb\u7edf\u7684\u5e73\u5747\u63d2\u69fd\u6570  7. \u6bcf\u4e2a\u95ee\u9898\u7684\u5e73\u5747\u5bfc\u6570   4\u7c73 \u88682\uff1a\u6570\u636e\u96c6\u7edf\u8ba1\u3002</p> <p>\u4e2d\u4ecb\u52a8\u8bcd\u76f8\u7b49\u7684\u5bbe\u8bed\u5173\u7cfb\uff0c\u4ee5\u53ca\u4e2d\u4ecb\u4ecb\u8bcd\u76f8\u7b49\u7684\u540d\u8bcd\u5230\u4ecb\u8bcd\u5bbe\u8bed\u5173\u7cfb\u3002\u00ac \u89e3\u51b3\u65b9\u6848\u7279\u5f81\u901a\u8fc7\u5c06\u8bed\u4e49\u5efa\u7acb\u5728\u6570\u5b66\u57fa\u7840\u4e0a\uff0c\u6211\u4eec\u80fd\u591f\u5305\u542b\u67e5\u770b\u6700\u7ec8\u7b54\u6848a\u7684\u7279\u5f81\uff0c\u4ee5\u4e86\u89e3\u54ea\u4e9b\u7b54\u6848\u5bf9\u4e8e\u6211\u4eec\u901a\u5e38\u770b\u5230\u7684\u4ee3\u6570\u95ee\u9898\u662f\u5408\u7406\u7684\u3002\u4f8b\u5982\uff0c\u8bb8\u591a\uff08\u4f46\u4e0d\u662f\u5168\u90e8\uff09\u95ee\u9898\u7684\u89e3\u51b3\u65b9\u6848\u6d89\u53ca\u4e00\u7ec4\u5bf9\u8c61\u7684\u5927\u5c0f\uff0c\u8fd9\u4e9b\u5bf9\u8c61\u5fc5\u987b\u662f\u6b63\u6570\u548c\u6574\u6570\u3002</p> <p>\u53ef\u4ee5\u4ece\u9644\u8fd1\u63d2\u69fd\u4e2d\u4f7f\u7528\u7684\u5355\u8bcd\u4e2d\u8bc6\u522b\u7684\u5e38\u91cf\u3002\u4f8b\u5982\uff0c\u5728\u56fe4\u4e2d\uff0c\u5e38\u65700.01\u4e0e\u6587\u672c\u4e2d\u201c%\u201d\u7684\u4f7f\u7528\u6709\u5173\u3002\u4e3a\u4e86\u6355\u6349\u8fd9\u79cd\u7528\u6cd5\uff0c\u6211\u4eec\u5305\u542b\u4e86\u4e00\u7ec4\u8bcd\u6c47\u5316\u7279\u5f81\uff0c\u8fd9\u4e9b\u7279\u5f81\u5c06\u5355\u8bcd\u5f15\u7406\u4e0e\u65b9\u7a0b\u4e2d\u9644\u8fd1\u7684\u5e38\u6570\u8fde\u63a5\u8d77\u6765\u3002\u8fd9\u4e9b\u529f\u80fd\u4e0d\u5305\u62ec\u63d2\u69fd\u7b7e\u540d\u3002\u00ac\u00ac\u00ac \u69fd\u5bf9\u7279\u5f81\u6211\u4eec\u8ba1\u7b97\u7684\u5927\u591a\u6570\u7279\u5f81\u90fd\u89e3\u91ca\u4e86\u69fd\u8bcd\u4e4b\u95f4\u7684\u5173\u7cfb\u3002\u8fd9\u5305\u62ec\u89e6\u53d1\u5355\u8bcd\u672c\u8eab\u4e4b\u95f4\u5404\u79cd\u7b49\u4ef7\u5173\u7cfb\u7684\u7279\u5f81\uff0c\u4ee5\u53ca\u5b83\u4eec\u4e4b\u95f4\u4f9d\u8d56\u8def\u5f84\u7684\u7279\u5f81\u3002\u6211\u4eec\u8fd8\u5305\u62ec\u67e5\u770b\u4e24\u4e2a\u6570\u5b57\u7684\u6570\u503c\u5173\u7cfb\u7684\u529f\u80fd\uff0c\u5176\u4e2d\u672a\u77e5\u6570\u7684\u6570\u503c\u662f\u901a\u8fc7\u6c42\u89e3\u65b9\u7a0b\u7ec4\u751f\u6210\u7684\u3002\u8fd9\u6709\u52a9\u4e8e\u8ba4\u8bc6\u5230\uff0c\u4f8b\u5982\uff0c\u603b\u548c\u7684\u603b\u548c\u901a\u5e38\u5927\u4e8e\u6bcf\u4e2a\uff08\u901a\u5e38\u4e3a\u6b63\uff09\u603b\u548c\u3002\u00ac \u6b64\u5916\uff0c\u6211\u4eec\u8fd8\u6709\u4e00\u4e2a\u529f\u80fd\uff0c\u7528\u4e8e\u00ac\u67e5\u770b\u6210\u5bf9\u63d2\u69fd\u4e4b\u95f4\u7684\u5171\u4eab\u5173\u7cfb\u3002\u4f8b\u5982\uff0c\u5728\u56fe2\u4e2d\uff0c\u201c\u513f\u7ae5\u7968\u201d\u548c\u201c1.50\u7f8e\u5143\u201d\u4e4b\u95f4\u7684\u5173\u7cfb\u662f\u201c\u6210\u672c\u201d\u3002\u540c\u6837\uff0c\u201c\u6210\u4eba\u7968\u201d\u548c\u201c4\u7f8e\u5143\u201d\u4e4b\u95f4\u7684\u5173\u7cfb\u4e5f\u662f\u201c\u6210\u672c\u201d\u3002\u7531\u4e8e\u8fd9\u79cd\u5173\u7cfb\u7684\u5b9e\u9645\u6027\u8d28\u5e76\u4e0d\u91cd\u8981\uff0c\u56e0\u6b64\u8fd9\u4e00\u7279\u5f81\u4e0d\u662f\u8bcd\u6c47\u5316\u7684\uff0c\u800c\u662f\u4ec5\u5728\u00ac\u00ac\u5e73\u7b49\u5b58\u5728\u65f6\u89e6\u53d1\u7684\u3002\u6211\u4eec\u8003\u8651\u4e24\u79cd\u60c5\u51b5\uff1a-</p> <p>7 \u5b9e\u9a8c\u88c5\u7f6e \u6570\u636e\u96c6\u6211\u4eec\u4ece\u4f17\u5305\u8f85\u5bfc\u7f51\u7ad9algebra.com\u6536\u96c6\u4e86\u4e00\u4e2a\u65b0\u7684\u4ee3\u6570\u5355\u8bcd\u95ee\u9898\u6570\u636e\u96c6\u3002\u5b66\u751f\u4eec\u53d1\u5e03\u4e86\u8fd9\u4e9b\u95ee\u9898\uff0c\u4f9b\u793e\u533a\u6210\u5458\u56de\u7b54\u3002\u56e0\u6b64\uff0c\u8fd9\u4e9b\u95ee\u9898\u591a\u79cd\u591a\u6837\uff0c\u90fd\u662f\u4ece\u7ed9\u5b66\u751f\u7684\u5b9e\u9645\u95ee\u9898\u4e2d\u63d0\u53d6\u51fa\u6765\u7684\u3002\u6211\u4eec\u542f\u53d1\u5f0f\u5730\u8fc7\u6ee4\u6570\u636e\uff0c\u53ea\u5f97\u5230\u4e0d\u9700\u8981\u4efb\u4f55\u660e\u786e\u80cc\u666f\u77e5\u8bc6\u7684\u7ebf\u6027\u4ee3\u6570\u95ee\u9898\u3002\u4ece\u8fd9\u4e9b\u95ee\u9898\u4e2d\uff0c\u6211\u4eec\u968f\u673a\u9009\u62e9\u4e861024\u4e2a\u95ee\u9898\u3002\u5f53\u8fd9\u4e9b\u95ee\u9898\u88ab\u53d1\u5e03\u5230\u7f51\u7edc\u8bba\u575b\u65f6\uff0c\u8fd9\u4e9b\u5e16\u5b50\u901a\u5e38\u5305\u542b\u4e0d\u5c5e\u4e8e\u6587\u5b57\u95ee\u9898\u7684\u989d\u5916\u8bc4\u8bba\uff0c\u89e3\u51b3\u65b9\u6848\u5d4c\u5165\u4e86\u957f\u800c\u81ea\u7531\u7684\u81ea\u7136\u8bed\u8a00\u63cf\u8ff0\u4e2d\u3002\u4e3a\u4e86\u6e05\u7406\u6570\u636e\uff0c\u6211\u4eec\u8981\u6c42\u4e9a\u9a6c\u900aMechanical Turk\u7684\u5de5\u4f5c\u4eba\u5458\u4ece\u6587\u672c\u4e2d\u63d0\u53d6\uff1a\u4ee3\u6570\u5355\u8bcd\u95ee\u9898\u672c\u8eab\u3001\u89e3\u65b9\u7a0b\u548c\u6570\u503c\u7b54\u6848\u3002\u6211\u4eec\u624b\u52a8\u9a8c\u8bc1\u4e86\u65b9\u7a0b\u5f0f\u548c\u6570\u5b57\uff0c\u4ee5\u786e\u4fdd\u5b83\u4eec\u662f\u6b63\u786e\u7684\u3002\u4e3a\u4e86\u786e\u4fdd\u6bcf\u79cd\u95ee\u9898\u7c7b\u578b\u5728\u8bad\u7ec3\u6570\u636e\u4e2d\u81f3\u5c11\u51fa\u73b0\u51e0\u6b21\uff0c\u6211\u4eec\u5220\u9664\u4e86\u4e0d\u5e38\u89c1\u7684\u95ee\u9898\u7c7b\u578b\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u6211\u4eec\u4ece\u6bcf\u4e2a\u65b9\u7a0b\u7cfb\u7edf\u4e2d\u5f52\u7eb3\u51fa\u7cfb\u7edf\u6a21\u677f\uff0c\u5982\u00ac\u00ac\u00ac\u00ac\u00ac\u00ac\u00ac\u7b2c4.1\u8282\u6240\u8ff0\uff0c\u5e76\u6d88\u9664\u4e86\u76f8\u5173\u7cfb\u7edf\u6a21\u677f\u51fa\u73b0\u7684\u6240\u6709\u95ee\u9898</p> <p>\u5728\u6570\u636e\u96c6\u4e2d\u5c11\u4e8e6\u6b21\u3002\u8fd9\u7ed9\u6211\u4eec\u7559\u4e0b\u4e86514\u4e2a\u95ee\u9898\u3002\u88682\u63d0\u4f9b\u4e86\u6570\u636e\u7edf\u8ba1\u3002 \u76d1\u7763\u5f62\u5f0f\u6211\u4eec\u8003\u8651\u534a\u76d1\u7763\u5b66\u4e60\u548c\u76d1\u7763\u5b66\u4e60\u3002\u5728\u534a\u76d1\u7763\u573a\u666f\u4e2d\uff0c\u6211\u4eec\u5047\u8bbe\u53ef\u4ee5\u8bbf\u95ee\u00ac\u8bad\u7ec3\u00ac\u8bed\u6599\u5e93\u4e2d\u6240\u6709\u95ee\u9898\u7684\u6570\u503c\u7b54\u6848\uff0c\u4ee5\u53ca\u4e0e\u5168\u65b9\u7a0b\u7ec4\u914d\u5bf9\u7684\u5c11\u6570\u95ee\u9898\u3002\u4e3a\u4e86\u9009\u62e9\u7528\u65b9\u7a0b\u6ce8\u91ca\u54ea\u4e9b\u95ee\u9898\uff0c\u6211\u4eec\u786e\u5b9a\u4e86\u6570\u636e\u4e2d\u4e94\u79cd\u6700\u5e38\u89c1\u7684\u95ee\u9898\u7c7b\u578b\uff0c\u5e76\u5bf9\u6bcf\u79cd\u7c7b\u578b\u7684\u968f\u673a\u62bd\u6837\u95ee\u9898\u8fdb\u884c\u4e86\u6ce8\u91ca\u30025EQ+ANS\u4f7f\u7528\u8fd9\u79cd\u5f62\u5f0f\u7684\u5f31\u76d1\u7763\u3002\u4e3a\u4e86\u5c55\u793a\u4f7f\u7528\u5f31\u76d1\u7763\u6570\u636e\u7684\u597d\u5904\uff0c\u6211\u4eec\u8fd8\u63d0\u4f9b\u4e86\u57fa\u7ebf\u573a\u666f\u00ac\u00ac\u00ac5EQ\u7684\u7ed3\u679c\uff0c\u5176\u4e2d\u8bad\u7ec3\u6570\u636e\u4ec5\u5305\u62ec\u7528\u65b9\u7a0b\u7cfb\u7edf\u6ce8\u91ca\u7684\u4e94\u4e2a\u79cd\u5b50\u95ee\u9898\u3002\u5728\u5b8c\u5168\u76d1\u7763\u7684\u00acALLEQ\u573a\u666f\u4e2d\uff0c\u6211\u4eec\u5047\u8bbe\u53ef\u4ee5\u8bbf\u95ee\u6574\u4e2a\u8bad\u7ec3\u96c6\u7684\u5b8c\u6574\u65b9\u7a0b\u7cfb\u7edf\u3002\u00ac \u8bc4\u4f30\u65b9\u6848\u6211\u4eec\u4f7f\u75285\u500d\u4ea4\u53c9\u9a8c\u8bc1\u8fdb\u884c\u6240\u6709\u5b9e\u9a8c\u3002\u7531\u4e8e\u6211\u4eec\u7684\u6a21\u578b\u4e3a\u6bcf\u4e2a\u95ee\u9898\u751f\u6210\u4e86\u4e00\u4e2a\u89e3\u51b3\u65b9\u6848\uff0c\u56e0\u6b64\u6211\u4eec\u53ea\u62a5\u544a\u51c6\u786e\u6027\u3002\u6211\u4eec\u62a5\u544a\u4e86\u4e24\u4e2a\u6307\u6807\uff1a\u65b9\u7a0b\u7cbe\u5ea6\u7528\u4e8e\u8861\u91cf\u7cfb\u7edf\u751f\u6210\u6b63\u786e\u65b9\u7a0b\u7cfb\u7edf\u7684\u9891\u7387\uff0c\u7b54\u6848\u00ac\u00ac\u7cbe\u5ea6\u7528\u4e8e\u8bc4\u4f30\u751f\u6210\u7684\u6570\u503c\u7b54\u6848\u7684\u6b63\u786e\u9891\u7387\u3002\u5728\u6bd4\u8f83\u65b9\u7a0b\u65f6\uff0c\u6211\u4eec\u901a\u8fc7\u89c4\u8303\u5316\u65b9\u7a0b\u7ec4\u6765\u907f\u514d\u865a\u5047\u5dee\u5f02\uff0c\u5982\u7b2c6\u8282\u6240\u8ff0\u3002\u4e3a\u4e86\u6bd4\u8f83\u7b54\u6848\u5143\u7ec4\uff0c\u6211\u4eec\u5ffd\u7565\u4e86\u987a\u5e8f\uff0c\u5e76\u8981\u6c42\u53c2\u8003\u7b54\u6848\u4e2d\u51fa\u73b0\u7684\u6bcf\u4e2a\u6570\u5b57\u90fd\u51fa\u73b0\u5728\u751f\u6210\u7684\u7b54\u6848\u4e2d\u3002\u00ac \u53c2\u6570\u548c\u6c42\u89e3\u5668\u5728\u6211\u4eec\u7684\u5b9e\u9a8c\u4e2d\uff0c\u6211\u4eec\u5c06\u6ce2\u675f\u641c\u7d22\u7b97\u6cd5\uff08\u7b2c5\u8282\uff09\u4e2d\u7684k\u8bbe\u7f6e\u4e3a200\uff0cl\u8bbe\u7f6e\u4e3a20\u3002\u6211\u4eec\u8fd0\u884cL-BFGS\u8ba1\u7b9750\u6b21\u8fed\u4ee3\u3002\u6211\u4eec\u4f7f\u7528\u00acL2\u8303\u6570\u548c\u03bb\u503c0.1\u6765\u89c4\u8303\u6211\u4eec\u7684\u5b66\u4e60\u76ee\u6807\u3002\u6211\u4eec\u7684\u5b9e\u73b0\u652f\u6301\u7684\u6570\u5b66\u5173\u7cfb\u96c6\u662f{+\u00ac\uff0c\u2212\uff0c\u00d7\uff0c/}\u3002\u6211\u4eec\u7684\u5b9e\u73b0\u4f7f\u7528\u00ac\u9ad8\u6548Java\u77e9\u9635\u5e93\uff08EJML\uff09\u4e2d\u7684\u9ad8\u65af\u6d88\u5143\u51fd\u6570\uff08Abeles\uff0c2014\uff09\u6765\u751f\u6210\u7ed9\u5b9a\u4e00\u7ec4\u65b9\u7a0b\u7684\u7b54\u6848\u3002</p> <p>8 \u7ed3\u679c 8.1 \u76d1\u7763\u7684\u5f71\u54cd \u88683\u603b\u7ed3\u4e86\u7ed3\u679c\u3002\u6b63\u5982\u9884\u671f\u7684\u90a3\u6837\uff0c\u5728\u8bad\u7ec3\u65f6\u8bbf\u95ee\u5b8c\u6574\u7684\u65b9\u7a0b\u7ec4\uff08\u00acALLEQ\uff09\u53ef\u4ee5\u83b7\u5f97\u6700\u4f73\u7684\u5b66\u4e60\u6a21\u578b\uff0c\u51c6\u786e\u7387\u63a5\u8fd169%\u3002\u7136\u800c\uff0c\u4e3b\u8981\u4ece\u7b54\u6848\u6ce8\u91ca\uff085EQ+ANS\uff09\u8fdb\u884c\u8bad\u7ec3</p> Text Only<pre><code>\u65b9\u7a0b\u5f0f\n</code></pre> <p>\u7cbe\u786e  \u7b54\u6848 \u7cbe\u786e 5EQ 20.4    20.8 5EQ+\u7b54\u6848  45.7    46.1 ALLEQ   66.1    68.7 \u88683\uff1a\u5404\u79cd\u5f62\u5f0f\u76d1\u7763\u7684\u4ea4\u53c9\u9a8c\u8bc1\u51c6\u786e\u6027\u7ed3\u679c\u3002\u00ac</p> Text Only<pre><code>\u65b9\u7a0b\u5f0f\n</code></pre> <p>\u7cbe\u786e  \u7b54\u6848 \u7cbe\u786e  %of \u6570\u636e \u2264 10    43.6    50.8    25.5 11 \u2212 15 46.6    45.1    10.5 16 \u2212 20 44.2    52.0    11.3</p> <p>20    85.7    86.1    52.7 \u88684:\u00acALLEQ\u5728\u4e0d\u540c\u6a21\u677f\u9891\u7387\u4e0b\u7684\u6027\u80fd\u3002</p> <p>\u7ed3\u679c\u6027\u80fd\u51e0\u4e4e\u8fbe\u5230ALLEQ\u768470%\uff0c\u8bc1\u660e\u4e86\u5f31\u76d1\u7763\u6570\u636e\u7684\u4ef7\u503c\u3002\u76f8\u6bd4\u4e4b\u4e0b\uff0c\u4e0d\u80fd\u4f7f\u7528\u8fd9\u79cd\u5f31\u76d1\u7763\u7684\u00ac5EQ\u7684\u8868\u73b0\u8981\u5dee\u5f97\u591a\u3002 8.2 \u6027\u80fd\u548c\u6a21\u677f\u9891\u7387 \u4e3a\u4e86\u66f4\u597d\u5730\u7406\u89e3\u7ed3\u679c\uff0c\u6211\u4eec\u8fd8\u6d4b\u91cf\u4e86\u65b9\u7a0b\u7cbe\u5ea6\u4e0e\u6570\u636e\u96c6\u4e2d\u6bcf\u4e2a\u65b9\u7a0b\u6a21\u677f\u9891\u7387\u7684\u5173\u7cfb\u3002\u88684\u62a5\u544a\u4e86\u5c06\u95ee\u9898\u5206\u4e3a\u56db\u4e2a\u4e0d\u540c\u9891\u7387\u533a\u95f4\u540e\u7684ALLEQ\u7ed3\u679c\u3002\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c\u8be5\u7cfb\u7edf\u6b63\u786e\u56de\u7b54\u4e8685%\u4ee5\u4e0a\u7684\u5e38\u89c1\u95ee\u9898\u7c7b\u578b\uff0c\u540c\u65f6\u5bf9\u76f8\u5bf9\u4e0d\u5e38\u89c1\u7684\u95ee\u9898\u7c7b\u578b\u4ecd\u8fbe\u5230\u4e8650%\u4ee5\u4e0a\u7684\u51c6\u786e\u7387\u3002\u6211\u4eec\u4e0d\u5305\u62ec\u00ac5EQ+ANS\u7684\u6a21\u677f\u9891\u7387\u7ed3\u679c\uff0c\u56e0\u4e3a\u5728\u8fd9\u79cd\u8bbe\u7f6e\u4e2d\uff0c\u6211\u4eec\u7684\u7cfb\u7edf\u53ea\u7ed9\u51fa\u4e86\u524d\u4e94\u4e2a\u6700\u5e38\u89c1\u7684\u6a21\u677f\u3002\u8fd9\u5957\u6709\u9650\u7684\u6a21\u677f\u4ec5\u6db5\u76d6&gt;20\u4e2abin\u4e2d\u7684\u95ee\u9898\uff0c\u7ea6\u5360\u6570\u636e\u768452%\u3002\u7136\u800c\uff0c\u5728\u8fd9\u4e2a\u5b50\u96c6\u4e0a\uff0c5EQ+ANS\u7684\u8868\u73b0\u975e\u5e38\u597d\uff0c\u6b63\u786e\u56de\u7b54\u4e8688%\u7684\u95ee\u9898\uff0c\u8fd9\u4e0eALLEQ\u8fbe\u5230\u768486%\u5927\u81f4\u76f8\u540c\u3002\u56e0\u6b64\uff0c\u867d\u7136\u5f31\u76d1\u7763\u5bf9\u751f\u6210\u53ef\u80fd\u65b9\u7a0b\u7684\u7a7a\u95f4\u6ca1\u6709\u5e2e\u52a9\uff0c\u4f46\u5728\u7ed9\u5b9a\u9002\u5f53\u7684\u65b9\u7a0b\u7a7a\u95f4\u65f6\uff0c\u5b83\u5bf9\u5b66\u4e60\u751f\u6210\u6b63\u786e\u7b54\u6848\u975e\u5e38\u6709\u5e2e\u52a9\u3002 8.3 \u6d88\u878d\u5206\u6790 \u88685\u663e\u793a\u4e86\u6bcf\u7ec4\u7279\u5f81\u7684\u6d88\u878d\u7ed3\u679c\u3002\u6cbf\u5bf9\u89d2\u7ebf\u7684\u7ed3\u679c\u663e\u793a\u4e86\u5f53\u4e00\u7ec4\u7279\u5f81\u88ab\u6d88\u878d\u65f6\u7684\u6027\u80fd\uff0c\u800c\u975e\u5bf9\u89d2\u7ebf\u7684\u6570\u5b57\u663e\u793a\u4e86</p> <p>\u5f53\u4e24\u7ec4\u7279\u5f81\u4e00\u8d77\u6d88\u878d\u65f6\u7684\u6027\u80fd\u3002\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c\u6240\u6709\u529f\u80fd\u90fd\u5bf9\u6574\u4f53\u6027\u80fd\u6709\u8d21\u732e\uff0c\u5176\u4e2d\u6210\u5bf9\u529f\u80fd\u662f\u6700\u91cd\u8981\u7684\uff0c\u5176\u6b21\u662f\u6587\u6863\u548c\u89e3\u51b3\u65b9\u6848\u529f\u80fd\u3002\u6211\u4eec\u8fd8\u770b\u5230\uff0c\u6210\u5bf9\u7279\u5f81\u53ef\u4ee5\u5f25\u8865\u5176\u4ed6\u7279\u5f81\u7684\u7f3a\u5931\u3002\u4f8b\u5982\uff0c\u5f53\u5355\u72ec\u5220\u9664\u6587\u6863\u6216\u89e3\u51b3\u65b9\u6848\u529f\u80fd\u65f6\uff0c\u6027\u80fd\u53ea\u4f1a\u7565\u6709\u4e0b\u964d\u3002\u7136\u800c\uff0c\u5f53\u5b83\u4eec\u4e0e\u914d\u5bf9\u7279\u5f81\u4e00\u8d77\u88ab\u79fb\u9664\u65f6\uff0c\u4e0b\u964d\u5e45\u5ea6\u8981\u5927\u5f97\u591a\u3002\u00ac\u00ac\u00ac\u00ac 8.4 \u5b9a\u6027\u8bef\u5dee\u5206\u6790 \u6211\u4eec\u68c0\u67e5\u4e86ALLEQ\u7684\u4e00\u4e2a\u65b9\u9762\u7684\u7cfb\u7edf\u8f93\u51fa\uff0c\u5e76\u786e\u5b9a\u4e86\u4e24\u7c7b\u4e3b\u8981\u7684\u9519\u8bef\u3002\u7b2c\u4e00\u79cd\uff0c\u7ea6\u5360\u6848\u4ef6\u7684\u56db\u5206\u4e4b\u4e00\uff0c\u5305\u62ec\u66f4\u591a\u80cc\u666f\u6216\u4e16\u754c\u77e5\u8bc6\u53ef\u80fd\u6709\u6240\u5e2e\u52a9\u7684\u9519\u8bef\u3002\u4f8b\u5982\uff0c\u56fe5\u4e2d\u7684\u95ee\u98981\u8981\u6c42\u7406\u89e3\u7ed8\u753b\u5c3a\u5bf8\u4e4b\u95f4\u7684\u5173\u7cfb\uff0c\u4ee5\u53ca\u5728\u7ed8\u753b\u5370\u5237\u65f6\u5982\u4f55\u4fdd\u6301\u8fd9\u79cd\u5173\u7cfb\uff0c\u95ee\u9898\u00ac\u00ac\u00ac2\u4f9d\u8d56\u4e8e\u7406\u89e3\u5546\u4e1a\u6982\u5ff5\uff0c\u5305\u62ec\u6210\u672c\u3001\u9500\u552e\u4ef7\u683c\u548c\u5229\u6da6\u3002\u867d\u7136\u8fd9\u4e9b\u5173\u7cfb\u53ef\u4ee5\u5728\u6211\u4eec\u7684\u6a21\u578b\u4e2d\u7528\u8db3\u591f\u7684\u6570\u636e\u5b66\u4e60\uff0c\u5c31\u50cf\u767e\u5206\u6bd4\u95ee\u9898\u4e00\u6837\uff08\u5982\u56fe4\uff09\uff0c\u4f46\u5404\u79cd\u5916\u90e8\u8d44\u6e90\uff0c\u5982\u77e5\u8bc6\u5e93\uff08\u5982Freebase\uff09\u6216\u6765\u81ea\u5927\u578b\u6587\u672c\u8bed\u6599\u5e93\u7684\u5206\u5e03\u7edf\u8ba1\u6570\u636e\uff0c\u53ef\u80fd\u4f1a\u00ac\u00ac\u00ac\u5e2e\u52a9\u6211\u4eec\u7528\u8f83\u5c11\u7684\u8bad\u7ec3\u6570\u636e\u5b66\u4e60\u5b83\u4eec\u3002 \u7b2c\u4e8c\u7c7b\u9519\u8bef\u7ea6\u5360\u4e00\u534a\uff0c\u5305\u62ec\u6e90\u4e8e\u7ec4\u5408\u8bed\u8a00\u7684\u9519\u8bef\u3002\u4f8b\u5982\uff0c\u56fe5\u4e2d\u95ee\u98983\u7684\u7b2c\u4e8c\u53e5\u8bdd\u53ef\u4ee5\u751f\u6210\u65b9\u7a0b2x\u2212y=5\uff0c\u5176\u4e2d\u77ed\u8bed\u201c\u5176\u4e2d\u4e00\u4e2a\u7684\u4e24\u6b21\u201d\u751f\u6210\u8868\u8fbe\u5f0f2x\u3002\u8003\u8651\u5230\u5178\u578b\u7684\u6d45\u5d4c\u5957\uff0c\u5728\u6709\u8db3\u591f\u6570\u636e\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u5b66\u4e60\u8fd9\u4e9b\u60c5\u51b5\u7684\u6a21\u677f\uff0c\u5c06\u6765\u8fd8\u53ef\u4ee5\u5f00\u53d1\u65b0\u7684\u8de8\u53e5\u8bed\u4e49\u89e3\u6790\u5668\uff0c\u4ee5\u4fbf\u4ece\u8f83\u5c0f\u7684\u6570\u636e\u96c6\u4e2d\u66f4\u597d\u5730\u8fdb\u884c\u6cdb\u5316\u3002</p> <p>\u56fe5\uff1a\u6211\u4eec\u7684\u7cfb\u7edf\u65e0\u6cd5\u6b63\u786e\u89e3\u51b3\u7684\u95ee\u9898\u793a\u4f8b\u3002</p> <p>9 \u7ed3\u8bba \u6211\u4eec\u63d0\u51fa\u4e86\u4e00\u79cd\u81ea\u52a8\u5b66\u4e60\u89e3\u51b3\u4ee3\u6570\u5355\u8bcd\u95ee\u9898\u7684\u65b9\u6cd5\u3002\u6211\u4eec\u7684\u7b97\u6cd5\u6784\u5efa\u65b9\u7a0b\u7ec4\uff0c\u540c\u65f6\u5c06\u5b83\u4eec\u7684\u53d8\u91cf\u548c\u6570\u5b57\u4e0e\u95ee\u9898\u6587\u672c\u5bf9\u9f50\u3002\u4f7f\u7528\u65b0\u6536\u96c6\u7684\u8bed\u6599\u5e93\uff0c\u6211\u4eec\u6d4b\u91cf\u4e86\u5404\u79cd\u5f62\u5f0f\u7684\u5f31\u76d1\u7763\u5bf9\u7ee9\u6548\u7684\u5f71\u54cd\u3002\u636e\u6211\u4eec\u6240\u77e5\uff0c\u6211\u4eec\u5c55\u793a\u4e86\u8fd9\u9879\u4efb\u52a1\u7684\u7b2c\u4e00\u4e2a\u5b66\u4e60\u7ed3\u679c\u3002\u00ac \u4ecd\u6709\u8bb8\u591a\u673a\u4f1a\u53ef\u4ee5\u6539\u8fdb\u62a5\u544a\u7684\u7ed3\u679c\uff0c\u5e76\u5c06\u65b9\u6cd5\u6269\u5c55\u5230\u76f8\u5173\u9886\u57df\u3002\u6211\u4eec\u60f3\u5f00\u53d1\u6280\u672f\u6765\u5b66\u4e60\u751f\u6210\u65b0\u65b9\u7a0b\u7684\u610f\u4e49\u7ec4\u5408\u6a21\u578b\u3002\u6b64\u5916\uff0c\u6570\u5b66\u7684\u4e00\u822c\u8868\u793a\u9002\u7528\u00ac\u00ac\u00ac\u4e8e\u8bb8\u591a\u4e0d\u540c\u7684\u9886\u57df\uff0c\u5305\u62ec\u51e0\u4f55\u3001\u7269\u7406\u548c\u5316\u5b66\u3002\u6700\u7ec8\uff0c\u6211\u4eec\u5e0c\u671b\u5c06\u8fd9\u4e9b\u6280\u672f\u6269\u5c55\u5230\u4ece\u81ea\u7136\u8bed\u8a00\u5408\u6210\u66f4\u590d\u6742\u7684\u7ed3\u6784\uff0c\u5982\u8ba1\u7b97\u673a\u7a0b\u5e8f\u3002\u00ac</p> <p>\u81f4\u8c22 \u4f5c\u8005\u611f\u8c22\u5df4\u7279\u5c14\u7eaa\u5ff5\u7814\u7a76\u6240\uff08PO\uff03300662\uff09\u548c\u7f8e\u56fd\u56fd\u5bb6\u79d1\u5b66\u57fa\u91d1\u4f1a\uff08\u62e8\u6b3eIIS-0835652\uff09\u7684\u652f\u6301\u3002\u6211\u4eec\u611f\u8c22Nicholas FitzGerald\u3001\u9ebb\u7701\u7406\u5de5\u5b66\u9662NLP\u5c0f\u7ec4\u3001\u534e\u76db\u987f\u5927\u5b66NLP\u5c0f\u7ec4\u548cACL\u5ba1\u7a3f\u4eba\u7684\u5efa\u8bae\u548c\u610f\u89c1\u3002\u672c\u6587\u4e2d\u8868\u8fbe\u7684\u4efb\u4f55\u89c2\u70b9\u3001\u53d1\u73b0\u3001\u7ed3\u8bba\u6216\u5efa\u8bae\u90fd\u662f\u4f5c\u8005\u7684\u89c2\u70b9\uff0c\u4e0d\u4e00\u5b9a\u53cd\u6620\u8d44\u52a9\u7ec4\u7ec7\u7684\u89c2\u70b9\u3002\u00ac</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/","title":"RedPajama\uff1a\u7528\u4e8e\u8bad\u7ec3\u5927\u578b\u8bed\u8a00\u6a21\u578b\u7684\u5f00\u653e\u6570\u636e\u96c6","text":"<p>Maurice Weber, Daniel Y. Fu, Quentin Anthony Yonatan Oren Shane Adams, Anton Alexandrov, Xiaozhong Lyu, Huu Nguyen, Xiaozhe Yao, Virginia Adams, Ben Athiwaratkun1, Rahul Chalamala, Kezhen Chen, Max Ryabinin, Tri Dao, Percy Liang, Christopher R\u00e9, Irina Rish, Ce Zhang</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#_1","title":"\u6458\u8981","text":"<p>\u5927\u578b\u8bed\u8a00\u6a21\u578b\u6b63\u65e5\u76ca\u6210\u4e3a\u4eba\u5de5\u667a\u80fd\u3001\u79d1\u5b66\u548c\u6574\u4e2a\u793e\u4f1a\u4e2d\u4e00\u9879\u57fa\u77f3\u6280\u672f\uff0c\u7136\u800c\uff0c\u6570\u636e\u96c6\u6784\u6210\u548c\u8fc7\u6ee4\u7684\u6700\u4f18\u7b56\u7565\u5728\u5f88\u5927\u7a0b\u5ea6\u4e0a\u4ecd\u7136\u96be\u4ee5\u6349\u6478\u3002\u8bb8\u591a\u9876\u7ea7\u6027\u80fd\u7684\u6a21\u578b\uff0c\u5176\u6570\u636e\u96c6\u7ba1\u7406\u548c\u6a21\u578b\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u4ecd\u7136\u7f3a\u4e4f\u900f\u660e\u5ea6\uff0c\u8fd9\u963b\u788d\u4e86\u5b8c\u5168\u5f00\u6e90\u8bed\u8a00\u6a21\u578b\u7684\u53d1\u5c55\u3002 \u5728\u672c\u6587\u4e2d\uff0c\u6211\u4eec\u786e\u5b9a\u4e86\u5fc5\u987b\u89e3\u51b3\u7684\u4e0e\u6570\u636e\u76f8\u5173\u4e09\u4e2a\u6838\u5fc3\u6311\u6218\uff0c\u4ee5\u63a8\u52a8\u5b8c\u5168\u5f00\u6e90\u8bed\u8a00\u6a21\u578b\u7684\u53d1\u5c55\u3002 \u8fd9\u4e9b\u5305\u62ec\uff1a\uff081\uff09\u6a21\u578b\u5f00\u53d1\u7684\u900f\u660e\u5ea6\uff0c\u5305\u62ec\u6570\u636e\u7ba1\u7406\u8fc7\u7a0b\uff1b\uff082\uff09\u83b7\u53d6\u5927\u91cf\u9ad8\u8d28\u91cf\u6570\u636e\uff1b\u4ee5\u53ca\uff083\uff09\u6570\u636e\u96c6\u83b7\u53d6\u6240\u9700\u8981\u7684\u7ba1\u7406\u548c\u5206\u6790\u7ec4\u4ef6\u548c\u5143\u6570\u636e\u3002 \u4e3a\u4e86\u5e94\u5bf9\u8fd9\u4e9b\u6311\u6218\uff0c\u6211\u4eec\u53d1\u5e03\u4e86 RedPajama-V1\uff0c\u8fd9\u662f LLaMA \u8bad\u7ec3\u6570\u636e\u96c6\u7684\u5f00\u6e90\u590d\u5236\u7248\u672c\u3002\u6b64\u5916\uff0c\u6211\u4eec\u8fd8\u53d1\u5e03\u4e86 RedPajama-V2\uff0c\u8fd9\u662f\u4e00\u4e2a\u5e9e\u5927\u7684\u53ea\u6709\u7f51\u7edc\u6570\u636e\u7684\u6570\u636e\u96c6\uff0c\u5305\u542b\u539f\u59cb\u7684\u3001\u672a\u7ecf\u8fc7\u6ee4\u7684\u6587\u672c\u6570\u636e\u4ee5\u53ca\u8d28\u91cf\u4fe1\u53f7\u548c\u5143\u6570\u636e\u3002RedPajama \u6570\u636e\u96c6\u603b\u5171\u5305\u542b\u8d85\u8fc7 100 \u4e07\u4ebf\u4e2a\u7b26\u5143\uff0c\u6db5\u76d6\u591a\u4e2a\u9886\u57df\uff0c\u5176\u8d28\u91cf\u4fe1\u53f7\u6709\u52a9\u4e8e\u6570\u636e\u8fc7\u6ee4\uff0c\u65e8\u5728\u6fc0\u53d1\u4f17\u591a\u65b0\u6570\u636e\u96c6\u7684\u5f00\u53d1\u3002\u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u8fd9\u4e9b\u6570\u636e\u96c6\u5df2\u88ab\u7528\u4e8e\u8bad\u7ec3\u751f\u4ea7\u4e0a\u4f7f\u7528\u7684\u5f3a\u5927\u8bed\u8a00\u6a21\u578b\uff0c\u4f8b\u5982 Snowflake Arctic\u3001Salesforce \u7684 XGen \u548c AI2 \u7684 OLMo\u3002\u4e3a\u4e86\u6df1\u5165\u4e86\u89e3 RedPajama \u7684\u8d28\u91cf\uff0c\u6211\u4eec\u4f7f\u7528\u53c2\u6570\u6700\u591a\u4e3a 16 \u4ebf\u7684\u4ec5\u89e3\u7801\u5668\u8bed\u8a00\u6a21\u578b\u8fdb\u884c\u4e86\u4e00\u7cfb\u5217\u5206\u6790\u548c\u6d88\u878d\u7814\u7a76\u3002\u6211\u4eec\u7684\u7814\u7a76\u7ed3\u679c\u8868\u660e\uff0c\u5982\u4f55\u6709\u6548\u5730\u5229\u7528\u7f51\u7edc\u6570\u636e\u7684\u8d28\u91cf\u4fe1\u53f7\u6765\u6574\u7406\u6570\u636e\u96c6\u7684\u9ad8\u8d28\u91cf\u5b50\u96c6\uff0c\u7a81\u51fa\u4e86 RedPajama \u5728\u5927\u89c4\u6a21\u63a8\u8fdb\u900f\u660e\u548c\u9ad8\u6027\u80fd\u8bed\u8a00\u6a21\u578b\u53d1\u5c55\u7684\u6f5c\u529b\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#1","title":"1.\u5f15\u8a00","text":"<p>\u9884\u8bad\u7ec3\u6570\u636e\u662f\u73b0\u4ee3\u5927\u578b\u8bed\u8a00\u6a21\u578b (LLM) \u5f00\u53d1\u4e2d\u6700\u6838\u5fc3\u7684\u7ec4\u6210\u90e8\u5206\u4e4b\u4e00\u3002\u7136\u800c\uff0c\u8be5\u9886\u57df\u9762\u4e34\u7684\u6838\u5fc3\u6311\u6218\u4e4b\u4e00\u662f\u9884\u8bad\u7ec3\u6570\u636e\u6784\u6210\u548c\u7ba1\u7406\u7b56\u7565\u666e\u904d\u7f3a\u4e4f\u900f\u660e\u5ea6[8]\u3002\u4e8b\u5b9e\u4e0a\uff0c\u9664\u4e86\u4e00\u4e9b\u503c\u5f97\u6ce8\u610f\u7684\u4f8b\u5916\u60c5\u51b5[19, 4, 2, 65]\uff0c\u5927\u591a\u6570\u6700\u5148\u8fdb LLM \u7684\u62a5\u544a\u6587\u6863[1]\u63d0\u4f9b\u7684\u9884\u8bad\u7ec3\u6570\u636e\u96c6\u7ec6\u8282\u5f88\u5c11\uff0c\u751a\u81f3\u6ca1\u6709\u3002\u5373\u4f7f\u662f\u50cfLLaMA[57, 58]\u8fd9\u6837\u7684\u5f00\u6e90\u6743\u91cd\u6a21\u578b\uff0c\u4e5f\u51e0\u4e4e\u6ca1\u6709\u63d0\u4f9b\u5173\u4e8e\u5176\u8bad\u7ec3\u6570\u636e\u7684\u7ec6\u8282\uff0c\u66f4\u4e0d\u7528\u8bf4\u53d1\u5e03\u5176\u6570\u636e\u96c6\u4e86\u3002\u6b64\u5916\uff0c\u7814\u7a76\u548c\u6784\u5efa\u6700\u4f73\u6570\u636e\u7ec4\u5408\uff0c\u4ee5\u53ca\u5f00\u53d1\u8fc7\u6ee4\u89c4\u5219\u548c\u542f\u53d1\u5f0f\u65b9\u6cd5\u7684\u8fc7\u7a0b\u975e\u5e38\u8017\u65f6\uff0c\u56e0\u4e3a\u5b83\u9700\u8981\u5bf9\u8bad\u7ec3\u6570\u636e\u7684\u4e0d\u540c\u7ec4\u5408\u8fdb\u884c\u591a\u6b21\u6d88\u878d\u5b9e\u9a8c\u3002\u4e3a\u4e86\u5e94\u5bf9\u8fd9\u4e9b\u6311\u6218\uff0c\u5e76\u4ee5\u5b9e\u73b0\u5f00\u6e90\u5927\u8bed\u8a00\u6a21\u578b\u8bbf\u95ee\u548c\u5f00\u53d1\u6c11\u4e3b\u5316\u7684\u603b\u4f53\u76ee\u6807\uff0c\u6211\u4eec\u53d1\u5e03\u4e86RedPajama\u6570\u636e\u96c6\uff0c\u8be5\u6570\u636e\u96c6\u603b\u5171\u5305\u542b\u8d85\u8fc7100\u4e07\u4ebf\u4e2a\u6587\u672c\u6570\u636e\u7b26\u5143\u3002 \u672c\u7740\u8fd9\u4e00\u76ee\u6807\uff0c\u6211\u4eec\u4f7f\u7528\u4ee5\u4e0b\u8bbe\u8ba1\u539f\u5219\u6765\u6307\u5bfc\u6211\u4eec\u521b\u5efa\u5f00\u653e\u6570\u636e\u96c6\u7684\u65b9\u6cd5\uff1a</p> <ul> <li> <p>\u900f\u660e\u6027\u3002\u6211\u4eec\u81f3\u5c11\u4ece\u4e24\u4e2a\u89d2\u5ea6\u529b\u6c42\u6700\u5927\u9650\u5ea6\u7684\u900f\u660e\u6027\u3002 \u4e00\u65b9\u9762\uff0c\u8fd9\u610f\u5473\u7740\u8981\u8bb0\u5f55\u5e76\u516c\u5f00\u6240\u6709\u6570\u636e\u6574\u7406\u65b9\u9762\u7684\u4fe1\u606f\u3002\u53e6\u4e00\u65b9\u9762\uff0c\u6211\u4eec\u52aa\u529b\u6784\u5efa\u5f00\u6e90\u900f\u660e\u7684\u6570\u636e\u96c6\uff0c\u8fd9\u4f7f\u5f97\u5e94\u7528\u7a0b\u5e8f\u5f00\u53d1\u8005\u548c\u7814\u7a76\u4eba\u5458\u80fd\u591f\u66f4\u597d\u5730\u7406\u89e3\u548c\u8bbe\u8ba1\u8bed\u8a00\u6a21\u578b\u3002</p> </li> <li> <p>\u89c4\u6a21\u3002\u5e9e\u5927\u7684\u53ef\u8bbf\u95ee\u6570\u636e\u6c60\u662f\u529f\u80fd\u6700\u5f3a\u5927\u7684\u5927\u578b\u8bed\u8a00\u6a21\u578b[52, 11, 58, 1]\u7684\u6838\u5fc3\u7ec4\u6210\u90e8\u5206\u4e4b\u4e00\uff0c\u4f46\u7531\u4e8e\u6784\u5efa\u3001\u6574\u7406\u548c\u5b58\u50a8\u5b83\u4eec\u9700\u8981\u5927\u91cf\u7684\u8d44\u6e90\u548c\u4e13\u4e1a\u77e5\u8bc6\uff0c\u56e0\u6b64\u96be\u4ee5\u83b7\u5f97\u3002\u56e0\u6b64\uff0c\u9664\u4e86\u900f\u660e\u6027\u4e4b\u5916\uff0c\u6211\u4eec\u8fd8\u529b\u6c42\u89c4\u6a21\u5316\u3002</p> </li> <li> <p>\u901a\u7528\u6027\u3002\u6211\u4eec\u7684\u76ee\u6807\u662f\u901a\u8fc7\u63d0\u4f9b\u901a\u7528\u7684\u8d44\u6e90\uff0c\u4e3a\u793e\u533a\u63d0\u4f9b\u6784\u5efa\u6700\u5148\u8fdb\u7684\u5f00\u6e90\u8bed\u8a00\u6a21\u578b\u6240\u9700\u7684\u6570\u636e\u96c6\u548c\u7ec4\u4ef6\u3002\u6211\u4eec\u4e0d\u89c4\u5b9a\u9ad8\u8d28\u91cf\u6570\u636e\u96c6\u7684\u6784\u6210\uff0c\u800c\u662f\u63d0\u4f9b\u4e00\u4e2a\u5e7f\u6cdb\u7684\u3001\u901a\u7528\u7684\u7f51\u7edc\u6587\u6863\u8bed\u6599\u5e93\u3002\u6bcf\u4e2a\u6587\u6863\u90fd\u5e26\u6709\u8d28\u91cf\u4fe1\u53f7\u6807\u7b7e\uff0c\u4f7f\u7528\u6237\u80fd\u591f\u6839\u636e\u5176\u7279\u5b9a\u9700\u6c42\u548c\u6807\u51c6\u505a\u51fa\u660e\u667a\u7684\u51b3\u7b56\u3002</p> </li> </ul> <p></p> <p>\u9075\u5faa\u8fd9\u4e9b\u539f\u5219\uff0c\u6211\u4eec\u5f00\u53d1\u5e76\u516c\u5f00\u53d1\u5e03\u4e86\u7528\u4e8eLLM\u9884\u8bad\u7ec3\u7684 RedPajama \u6570\u636e\u96c6\u3002RedPajama-V1\u662f\u4e00\u4e2a\u516c\u5f00\u53ef\u7528\u3001\u5b8c\u5168\u5f00\u6e90\u7684\u3001\u5c3d\u529b\u800c\u4e3a\u7684\u590d\u73b0[57]\u4e2d\u63cf\u8ff0\u7684\u6570\u636e\u96c6\uff0c\u7528\u4e8e\u8bad\u7ec3\u7b2c\u4e00\u7248\u672c\u8fed\u4ee3 LLaMA \u7cfb\u5217\u6a21\u578b\u3002\u4e0e\u8be5\u6570\u636e\u96c6\u4e00\u8d77\uff0c\u6211\u4eec\u5f00\u53d1\u4e86 RedPajama-INCITE \u6a21\u578b\uff0c\u5176\u4e2d\u5305\u62ec3B\u548c7B\u89c4\u6a21\u7684\u57fa\u7840\u6a21\u578b\u3001\u6307\u4ee4\u5fae\u8c03\u6a21\u578b\u548c\u5bf9\u8bdd\u6a21\u578b\u3002\u57fa\u4e8e\u8fd9\u4e9b\u52aa\u529b\u7684\u7b2c\u4e00\u7248\u7ecf\u9a8c\u6559\u8bad\uff0c\u6211\u4eec\u6784\u5efa\u4e86 RedPajama-V2 \u6570\u636e\u96c6\u3002 \u8fd9\u4e2a\u6700\u65b0\u7684\u6570\u636e\u96c6\u91c7\u7528\u4e86\u5b8c\u5168\u4e0d\u540c\u7684\u65b9\u6cd5\uff0c\u5e76\u4e13\u95e8\u5173\u6ce8\u7f51\u7edc\u6570\u636e\u3002\u5b83\u5305\u542b\u4e94\u79cd\u8bed\u8a00\uff0c\u6765\u6e90\u662f84\u4e2aCommon Crawl\u5feb\u7167\uff0c\u65f6\u95f4\u8303\u56f4\u4ece2014\u5e74\u52302023\u5e74\u3002\u9664\u4e86\u539f\u59cb\u6587\u672c\u6570\u636e\u5916\uff0c\u6211\u4eec\u8fd8\u5728\u8bed\u6599\u5e93\u768450T\u7b26\u5143\u5b50\u96c6\u4e2d\u53d1\u5e03\u4e86\u4f34\u968f\u6bcf\u4e2a\u6587\u6863\u7684\u8d28\u91cf\u4fe1\u53f7\uff0c\u76ee\u6807\u662f\u4fc3\u8fdb\u5bf9\u8fc7\u6ee4\u7f51\u7edc\u6570\u636e\u65b9\u6cd5\u7684\u539f\u5219\u6027\u7406\u89e3\u7684\u7814\u7a76\u3002\u6b64\u5916\uff0c\u5728\u8fd9\u9879\u5de5\u4f5c\u4e2d\uff0c\u6211\u4eec\u8fd8\u63d0\u51fa\u4e86\u4e00\u7cfb\u5217\u6d88\u878d\u7814\u7a76\uff0c\u5c55\u793a\u4e86\u8d28\u91cf\u4fe1\u53f7\u5bf9\u4e8e\u521b\u5efa\u4e0d\u540c\u8d28\u91cf\u7684\u539f\u59cb\u8bed\u6599\u5e93\u5b50\u96c6\u4ee5\u53ca\u540e\u7eed\u6a21\u578b\u6027\u80fd\u7684\u4ef7\u503c\u3002</p> <p>\u603b\u800c\u8a00\u4e4b\uff0c\u5728\u8fd9\u9879\u5de5\u4f5c\u4e2d\uff0c\u6211\u4eec\u505a\u51fa\u4e86\u4ee5\u4e0b\u8d21\u732e\uff1a</p> <ul> <li>C1 \u6211\u4eec\u53d1\u5e03\u4e86 RedPajama-V1 \u6570\u636e\u96c6\uff0c\u8fd9\u662f\u7528\u4e8e\u8bad\u7ec3LLaMA-1[57]\u7684\u5f00\u6e90\u590d\u73b0\u6570\u636e\u96c6\u3002\u6211\u4eec\u8fd8\u5305\u62ec\u4e00\u4efd\u5173\u4e8e\u521b\u5efa\u8bed\u6599\u5e93\u7684\u8003\u8651\u56e0\u7d20\u7684\u8be6\u7ec6\u62a5\u544a\u3002</li> <li>C2 \u6211\u4eec\u62a5\u544a\u4e86 RedPajama-INCITE \u6a21\u578b\u8bad\u7ec3\u7684\u8fc7\u7a0b\u548c\u8bc4\u4f30\u65b9\u6cd5\uff0c\u5305\u62ec\u6211\u4eec\u5982\u4f55\u4f7f\u7528Summit\u8d85\u7ea7\u8ba1\u7b97\u673a\u4ee5\u53ca\u6211\u4eec\u5fc5\u987b\u5e94\u5bf9\u7684\u6311\u6218\u7684\u7ec6\u8282\u3002</li> <li>C3 \u6211\u4eec\u53d1\u5e03\u4e86 RedPajama-V2 \u6570\u636e\u96c6\uff0c\u8fd9\u662f\u6700\u5927\u7684\u5f00\u6e90\u9884\u8bad\u7ec3\u6570\u636e\u96c6\uff0c\u5b83\u5305\u542b\u4ece\u7f51\u7edc\u4e0a\u6293\u53d6\u7684\u539f\u59cb\u3001\u672a\u8fc7\u6ee4\u7684\u6570\u636e\uff0c\u4ee5\u53ca\u4e3a\u6bcf\u4e2a\u6587\u6863\u8ba1\u7b97\u7684 46 \u9879\u8d28\u91cf\u6307\u6807\uff0c\u4ee5\u4fc3\u8fdb\u6570\u636e\u6574\u7406\u65b9\u9762\u7684\u8fdb\u4e00\u6b65\u7814\u7a76\u3002</li> <li>C4 \u57fa\u4e8e RedPajama-V2 \u6570\u636e\u96c6\uff0c\u6211\u4eec\u5bf9\u5177\u6709 4.68 \u4ebf\u53c2\u6570\u7684\u4ec5\u89e3\u7801\u5668 Transformer \u6a21\u578b\u8fdb\u884c\u4e86\u4e00\u7cfb\u5217\u6d88\u878d\u7814\u7a76\uff0c\u5c55\u793a\u4e86\u5982\u4f55\u5229\u7528\u8d28\u91cf\u4fe1\u53f7\u521b\u5efa\u5728\u5e38\u89c1 NLP \u57fa\u51c6\u6d4b\u8bd5\u4e2d\u6027\u80fd\u4e0d\u540c\u7684\u6a21\u578b\u3002</li> </ul> <p>\u672c\u6587\u7684\u5176\u4f59\u90e8\u5206\u7ec4\u7ec7\u5982\u4e0b\u3002\u5728\u7b2c 2 \u8282\u4e2d\uff0c\u6211\u4eec\u5c06 RedPajama \u6570\u636e\u96c6\u7f6e\u4e8e\u5f53\u524d\u5f00\u6e90\u9884\u8bad\u7ec3\u6570\u636e\u96c6\u7684\u683c\u5c40\u4e2d\u3002\u7b2c 3 \u8282\u63cf\u8ff0\u4e86 RedPajama-V1 \u80cc\u540e\u7684\u6570\u636e\u96c6\u521b\u5efa\u8fc7\u7a0b\u7684\u7ec6\u8282\uff0c\u4ee5\u53ca\u6784\u5efa RedPajama-INCITE \u6a21\u578b\u7cfb\u5217\u7684\u8fc7\u7a0b\u3002\u7b2c 4 \u8282\u7ee7\u7eed\u4ecb\u7ecd\u6211\u4eec\u7684\u4ec5\u9650\u7f51\u7edc\u7684\u6570\u636e\u96c6 RedPajama-V2\u3002\u9664\u4e86\u63cf\u8ff0\u6570\u636e\u5904\u7406\u6b65\u9aa4\u5916\uff0c\u6211\u4eec\u8fd8\u4ecb\u7ecd\u4e86\u6570\u636e\u96c6\u7edf\u8ba1\u6570\u636e\u548c\u6d88\u878d\u7814\u7a76\u3002\u6700\u540e\uff0c\u6211\u4eec\u5728\u7b2c 5 \u8282\u4e2d\u603b\u7ed3\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#2","title":"2.\u76f8\u5173\u5de5\u4f5c","text":"<p>\u8bb8\u591a\u5de5\u4f5c\u90fd\u96c6\u4e2d\u5728\u6784\u5efa\u5927\u578b\u8bed\u8a00\u6a21\u578b\u7684\u9884\u8bad\u7ec3\u6570\u636e\u96c6\u4e0a\u3002\u4e00\u4e9b\u6570\u636e\u96c6\u662f\u4ece\u5404\u79cd\u6765\u6e90\u6df7\u5408\u6574\u7406\u7684\uff0c\u800c\u53e6\u4e00\u4e9b\u6570\u636e\u96c6\u5219\u5b8c\u5168\u6765\u81ea\u7f51\u7edc\u6570\u636e\u3002\u5728\u4ec5\u9650\u7f51\u7edc\u7684\u6570\u636e\u96c6\u4e2d\uff0cC4 \u6570\u636e\u96c6 [46] \u662f\u9996\u6279\u5927\u578b\u7f51\u7edc\u6570\u636e\u96c6\u4e4b\u4e00\uff0c\u5b83\u5305\u542b\u4e00\u4e2a\u4ece CommonCrawl \u8fc7\u6ee4\u51fa\u7684 1750 \u4ebf\u4e2a\u7b26\u5143\u7684\u7f51\u7edc\u8bed\u6599\u5e93\u3002C4 \u4ecd\u7136\u662f\u7f51\u7edc\u6570\u636e\u96c6\u8d28\u91cf\u7684\u57fa\u51c6\u3002\u6700\u8fd1\uff0cRefinedWeb [44] \u548c FineWeb [43] \u5df2\u7ecf\u8bc1\u660e\uff0c\u4ec5\u9650\u7f51\u7edc\u7684\u6570\u636e\u53ef\u4ee5\u5728\u65e0\u9700\u7ec4\u5408\u591a\u4e2a\u9886\u57df\u7684\u60c5\u51b5\u4e0b\u4ea7\u751f\u5f3a\u5927\u7684\u6a21\u578b\uff0c\u5e76\u4e14\u4e0e\u6211\u4eec\u7684\u5de5\u4f5c\u7c7b\u4f3c\uff0c\u4e5f\u63d0\u4f9b\u4e86\u5173\u4e8e\u5176\u6570\u636e\u6574\u7406\u6280\u672f\u7684\u5145\u8db3\u7ec6\u8282\u3002\u4e0e\u8fd9\u4e9b\u6570\u636e\u96c6\u5f62\u6210\u5bf9\u6bd4\u7684\u662f\uff0cRedPajama-V2\u7531100\u4e07\u4ebf\u4e2a\u539f\u59cb\u7684\u3001\u5927\u90e8\u5206\u672a\u7ecf\u8fc7\u6ee4\u7684\u6587\u672c\u7b26\u5143\u7ec4\u6210\u3002RedPajama-V2\u62e5\u670940\u591a\u4e2a\u7528\u4e8e\u6f5c\u5728\u8fc7\u6ee4\u7684\u8d28\u91cf\u4fe1\u53f7\uff0c\u5b83\u63a8\u5e7f\u4e86\u4e00\u79cd\u5b8c\u5168\u4e0d\u540c\u7684\u65b9\u6cd5\uff0c\u65e8\u5728\u4e3a\u672a\u6765\u7684\u9ad8\u8d28\u91cf\u7f51\u7edc\u6570\u636e\u96c6\u8bbe\u5b9a\u65b0\u7684\u6807\u51c6\uff0c\u4e3a\u4e0b\u4e00\u4ee3\u9ad8\u8d28\u91cf\u7f51\u7edc\u6570\u636e\u96c6\u63d0\u4f9b\u5f3a\u5927\u7684\u57fa\u7840\u3002\u6b64\u5916\uff0c[45]\u4e2d\u63d0\u51fa\u7684Gopher\u89c4\u5219\u4e5f\u5177\u6709\u91cd\u8981\u610f\u4e49\uff0c\u8fd9\u4e9b\u89c4\u5219\u4e00\u76f4\u662f\u8bb8\u591a\u524d\u9762\u63d0\u5230\u7684\u5f00\u6e90\u9884\u8bad\u7ec3\u6570\u636e\u96c6\u7684\u6838\u5fc3\u3002</p> <p>\u4f5c\u4e3a\u5bf9\u4ec5\u9650\u7f51\u7edc\u6570\u636e\u96c6\u7684\u8865\u5145\uff0c\u590d\u5408\u6570\u636e\u96c6\u5f15\u5165\u4e86\u989d\u5916\u7684\u9886\u57df\u5e76\u5b9e\u73b0\u4e86\u66f4\u5e7f\u6cdb\u7684\u8986\u76d6\u8303\u56f4\u3002\u6700\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0cThe Pile [17]\u662f\u6700\u65e9\u7684\u5b8c\u5168\u5f00\u6e90\u6570\u636e\u96c6\u4e4b\u4e00\u3002\u5728LLaMA [57]\u53d1\u5e03\u4e4b\u540e\uff08LLaMA\u4f7f\u7528\u4e86\u4e03\u4e2a\u5355\u72ec\u7684\u5b50\u96c6\u548c\u591a\u4e2a\u9886\u57df\uff09\uff0c\u6211\u4eec\u53d1\u5e03\u4e86RedPajama-V1\uff0c\u8fd9\u662f\u4e00\u4e2aLLaMA\u65b9\u6848\u7684\u5f00\u6e90\u590d\u73b0\u7248\u672c\uff0c\u5e76\u5f97\u5230\u4e86\u5e7f\u6cdb\u91c7\u7528\u3002\u5728\u6b64\u57fa\u7840\u4e0a\uff0cSlimPajama\u6570\u636e\u96c6[51]\u901a\u8fc7\u8fdb\u4e00\u6b65\u6e05\u7406\u548c\u53bb\u91cd\u4eceRedPajama-V1\u4e2d\u884d\u751f\u51fa\u6765\u3002\u540c\u6837\uff0cDolma [52]\u6570\u636e\u96c6\u5305\u62ec\u5176\u4ed6\u4e13\u95e8\u7684\u9886\u57df\uff0c\u4f8b\u5982\u4ee3\u7801\u6570\u636e\u96c6\u7684\u6e05\u7406\u7248\u672c\uff0c\u5305\u62ecThe Stack [25]\u3001StarcoderData [31]\u4ee5\u53caRedPajama-V1\u7684ArXiv\u548cStackExchange\u90e8\u5206\u3002Zyda [56]\u6570\u636e\u96c6\u91c7\u7528\u4e86\u7c7b\u4f3c\u7684\u65b9\u6cd5\uff0c\u5e76\u8fdb\u4e00\u6b65\u7ec6\u5316\u4e86\u5f00\u6e90\u6570\u636e\u96c6\uff0c\u5305\u62ec\u4eceRedPajama-V1\u884d\u751f\u7684SlimPajama\u6570\u636e\u96c6\u3002 \u6700\u540e\uff0cROOTS\u8bed\u6599\u5e93[26, 27]\u4e5f\u5c5e\u4e8e\u6838\u5fc3\u5f00\u6e90\u6570\u636e\u96c6\uff0c\u6db5\u76d6\u591a\u4e2a\u9886\u57df\u548c\u8bed\u8a00\u3002\u8868\u683c1\u6982\u8ff0\u4e86\u8fd9\u4e9b\u5f00\u653e\u6570\u636e\u96c6\uff0c\u5e76\u5bf9\u6bcf\u4e2a\u6570\u636e\u96c6\u5728\u900f\u660e\u5ea6\u3001\u591a\u529f\u80fd\u6027\u548c\u89c4\u6a21\u65b9\u9762\u7684\u8868\u73b0\u8fdb\u884c\u4e86\u6bd4\u8f83\u3002</p> <p></p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#3redpajama-v1llama","title":"3.RedPajama-V1\uff1aLLaMA\u8bad\u7ec3\u6570\u636e\u7684\u5f00\u653e\u5f0f\u590d\u73b0","text":"<p>\u5728\u6211\u4eec RedPajama \u6570\u636e\u96c6\u7684\u7b2c\u4e00\u6b21\u8fed\u4ee3\u4e2d\uff0c\u6211\u4eec\u7684\u4e3b\u8981\u76ee\u6807\u662f\u590d\u73b0 LLaMA \u6280\u672f\u62a5\u544a[57]\u4e2d\u8bb0\u5f55\u7684\u8bad\u7ec3\u6570\u636e\u3002\u4e3a\u6b64\uff0c\u6211\u4eec\u4e25\u683c\u9075\u5faa\u539f\u59cb\u65b9\u6848\u7684\u63cf\u8ff0\u3002\u672c\u8282\u9996\u5148\u8bb0\u5f55\u6211\u4eec\u91cd\u5efa\u539f\u59cb LLaMA \u8bad\u7ec3\u8bed\u6599\u5e93\u7684\u8fc7\u7a0b\uff08\u7b2c3.1\u8282\uff09\u3002\u6211\u4eec\u91cd\u70b9\u6307\u51fa\u4e86\u539f\u59cb\u6570\u636e\u96c6\u6536\u96c6\u63cf\u8ff0\u4e2d\u7684\u4e0d\u8db3\u4e4b\u5904\uff0c\u5e76\u63cf\u8ff0\u4e86\u6211\u4eec\u5982\u4f55\u89e3\u51b3\u8fd9\u4e9b\u6b67\u4e49\u3002\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u62a5\u544a\u4e86 RedPajama-INCITE\uff0c\u8fd9\u662f\u4e00\u4e2a\u4e0e\u6a61\u6811\u5cad\u56fd\u5bb6\u5b9e\u9a8c\u5ba4\uff08ORNL\uff09\u5408\u4f5c\uff0c\u57fa\u4e8e\u6b64\u8bed\u6599\u5e93\u8bad\u7ec3\u7684\u4e00\u7cfb\u5217\u6a21\u578b\uff08\u7b2c3.2\u8282\uff09\u3002\u6211\u4eec\u53d1\u73b0\uff0c\u5c3d\u7ba1\u751f\u6210\u76843B\u89c4\u6a21\u6a21\u578b\u6027\u80fd\u826f\u597d\uff0c\u4f46\u57287B\u89c4\u6a21\u4e0a\u4ecd\u7136\u4e0e\u539f\u59cbLLaMA-7B\u6a21\u578b\u5b58\u5728\u5dee\u8ddd\u3002\u6211\u4eec\u5047\u8bbe\u8fd9\u90e8\u5206\u662f\u7531\u4e8e\u9700\u8981\u4f7f\u7528FP16\u7cbe\u5ea6\u8fdb\u884c\u8bad\u7ec3\u9020\u6210\u7684\u3002\u6b64\u5916\uff0c\u8fd9\u4e5f\u8868\u660e\u539f\u59cbLLaMA\u8bad\u7ec3\u8bed\u6599\u5e93\u6784\u5efa\u4e2d\u7684\u4e00\u4e9b\u91cd\u8981\u7ec6\u8282\u53ef\u80fd\u7f3a\u5931\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#31","title":"3.1\u6570\u636e\u5904\u7406\u6b65\u9aa4","text":"<p>\u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u63cf\u8ff0\u4e86\u6211\u4eec\u5c1d\u8bd5\u91cd\u5efa LLaMa \u6280\u672f\u62a5\u544a[57]\u4e2d\u63cf\u8ff0\u7684\u8bad\u7ec3\u8bed\u6599\u5e93\u3002LLaMA \u8bad\u7ec3\u8bed\u6599\u5e93\u7684\u9884\u8bad\u7ec3\u6570\u636e\u6765\u81ea\u4e03\u4e2a\u6570\u636e\u96c6\uff1a\u82f1\u6587CommonCrawl\u3001C4\u3001GitHub\u3001\u7ef4\u57fa\u767e\u79d1\u3001\u4e66\u7c4d\uff08\u53e4\u817e\u5821\u8ba1\u5212\u548cBooks3\uff09\u3001ArXiv\u548cStack Exchange\u3002LLaMA \u6280\u672f\u62a5\u544a\u4e2d\u5bf9\u6bcf\u4e2a\u6570\u636e\u96c6\u90fd\u8fdb\u884c\u4e86\u7b80\u77ed\u7684\uff08\u5927\u7ea6\u4e00\u6bb5\uff09\u63cf\u8ff0\uff0c\u4f46\u6570\u636e\u96c6\u63cf\u8ff0\u4e2d\u5b58\u5728\u4e00\u4e9b\u4e0d\u8db3\u4e4b\u5904\u3002\u5728\u672c\u8282\u4e2d\uff0c\u6211\u4eec\u8be6\u7ec6\u4ecb\u7ecd\u4e86\u590d\u73b0\u6bcf\u4e2a\u6570\u636e\u96c6\u7684\u8fc7\u7a0b\uff0c\u91cd\u70b9\u6307\u51fa\u4e86LLaMA\u6280\u672f\u62a5\u544a\u4e2d\u63cf\u8ff0\u7684\u4e0d\u8db3\u4e4b\u5904\uff0c\u5e76\u63cf\u8ff0\u4e86\u6211\u4eec\u89e3\u51b3\u8fd9\u4e9b\u6b67\u4e49\u7684\u9009\u62e9\u3002\u8fd9\u4e9b\u6b65\u9aa4\u5171\u540c\u4ea7\u751f\u4e86\u4e00\u4e2a\u5927\u7ea61.2\u4e07\u4ebf\u4e2a\u7b26\u5143\u7684\u6570\u636e\u96c6\u3002\u88682\u603b\u7ed3\u4e86\u8fd9\u4e9b\u6570\u636e\u96c6\u548c\u7b26\u5143\u8ba1\u6570\u3002\u5728\u9644\u5f55\u4e2d\u7684\u886810\u4e2d\uff0c\u6211\u4eec\u8fdb\u4e00\u6b65\u5217\u51fa\u4e86\u5728\u6570\u636e\u96c6\u6784\u5efa\u8fc7\u7a0b\u4e2d\u9047\u5230\u7684\u6240\u6709\u4e0d\u786e\u5b9a\u6027\u3002</p> <p></p> <ul> <li>\u666e\u901a\u6293\u53d6 LLaMA\u8bed\u6599\u5e93\u5305\u542b 2017 \u5e74\u81f3 2020 \u5e74\u7684\u4e94\u4e2aCommonCrawl\u5feb\u7167\uff0c\u8fd9\u4e9b\u5feb\u7167\u4f7f\u7528CCNet\u7ba1\u9053[61]\u8fdb\u884c\u5904\u7406\u3002 CCNet\u5bf9\u5206\u7247\u4e2d\u7684\u6bcf\u4e2a\u5feb\u7167\u8fdb\u884c\u53bb\u91cd\uff0c\u5e76\u4e3a\u6bcf\u4e2a\u5feb\u7167\u4e2d\u7684\u6570\u636e\u5206\u914d\u8d28\u91cf\u7b49\u7ea7\u3002\u5b83\u57fa\u4e8e\u5728\u7ef4\u57fa\u767e\u79d1\u4e0a\u8bad\u7ec3\u76845-gram Kneser-Ney\u6a21\u578b\u5206\u914d\u7684\u56f0\u60d1\u5ea6\u5206\u5e03\uff0c\u4e3a\u6bcf\u4e2a\u6587\u6863\u5206\u914d\u201c\u5934\u90e8\u201d\u3001\u201c\u4e2d\u95f4\u201d\u548c\u201c\u5c3e\u90e8\u201d\u5206\u7c7b\u3002\u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u53ea\u4fdd\u7559\u201c\u5934\u90e8\u201d\u548c\u201c\u4e2d\u95f4\u201d\u90e8\u5206\uff0c\u5e76\u4e22\u5f03\u201c\u5c3e\u90e8\u201d\u3002\u6b64\u5916\uff0cTouvron\u7b49\u4eba\u3002[57]\u4f7f\u7528\u5728\u7ef4\u57fa\u767e\u79d1\u53c2\u8003\u6587\u7ae0\u4e0a\u8bad\u7ec3\u7684\u7ebf\u6027\u5206\u7c7b\u5668\u6765\u8fc7\u6ee4\u6389\u4f4e\u8d28\u91cf\u6587\u6863\u3002 LLaMA\u8bba\u6587\u6ca1\u6709\u6307\u5b9a\u6570\u636e\u96c6\u4e2d\u4f7f\u7528\u4e86\u54ea\u4e9b\u5feb\u7167\uff0c\u4e5f\u6ca1\u6709\u7ed9\u51fa\u5173\u4e8e\u5206\u7c7b\u5668\u7684\u8be6\u7ec6\u4fe1\u606f\u3002</li> </ul> <p>\u6211\u4eec\u9009\u62e9\u4e86\u4e94\u4e2a\u82f1\u6587CommonCrawl\u5feb\u71672019-30, 2020-05, 2021-04, 2022-5\u548c2023-06\uff0c\u4ee3\u8868\u9879\u76ee\u5f00\u59cb\u524d\u4e94\u5e74\u4e2d\u7684\u7b2c\u4e00\u4e2a\u5feb\u7167\u3002\u4e3a\u4e86\u8bad\u7ec3\u7ef4\u57fa\u767e\u79d1\u53c2\u8003\u5206\u7c7b\u5668\uff0c\u6211\u4eec\u57282023\u5e744\u67081\u65e5\u524d\u4e0b\u8f7d\u4e86\u6700\u65b0\u7684\u53ef\u7528\u82f1\u6587\u7ef4\u57fa\u767e\u79d1\u5feb\u7167\u3002\u6211\u4eec\u4ece\u7ef4\u57fa\u767e\u79d1\u5feb\u7167\u4e2d\u63d0\u53d6\u4e863800\u4e07\u4e2aURL\uff0c\u5e76\u722c\u53d6\u4e8630\u4e07\u4e2a\u9875\u9762\u3002\u7136\u540e\uff0c\u6211\u4eec\u4f7f\u7528CCNet\u7ba1\u9053\u5bf9\u7ef4\u57fa\u767e\u79d1\u53c2\u8003\u6587\u732e\u8fdb\u884c\u9002\u5ea6\u7684\u6e05\u6d17\u6b65\u9aa4\uff0c\u5e76\u4f7f\u7528fastText\u8bad\u7ec3\u4e00\u4e2aunigram\u5206\u7c7b\u5668\u3002\u6700\u540e\uff0c\u6211\u4eec\u5c06\u6240\u6709\u5f97\u5206\u4f4e\u4e8e0.25\u7684\u6587\u6863\u8fc7\u6ee4\u6389\uff0c\u8fd9\u5c06\u6211\u4eec\u7684CommonCrawl\u6570\u636e\u96c6\u7f29\u51cf\u5230\u4e0eLLaMA CommonCrawl\u6570\u636e\u96c6\u5927\u81f4\u76f8\u540c\u7684\u5927\u5c0f\u3002</p> <ul> <li> <p>C4 LLaMA\u8bed\u6599\u5e93\u5305\u542bC4\u6570\u636e\u96c6[46]\uff0c\u4ee5\u5305\u542bCommonCrawl\u7684\u4e0d\u540c\u7248\u672c\u3002 \u6211\u4eec\u4f7f\u7528C4\u7684c4_en\u7248\u672c\uff0c\u8be5\u7248\u672c\u7531Allen AI\u5728Hugging Face Hub\u4e0a\u63d0\u4f9b\u3002</p> </li> <li> <p>Github LLaMA\u8bed\u6599\u5e93\u4f7f\u7528\u5728Google BigQuery\u4e0a\u53ef\u7528\u7684\u516c\u5171GitHub\u6570\u636e\u96c6\uff0c\u5e76\u4fdd\u7559\u5728Apache\u3001BSD\u548cMIT\u8bb8\u53ef\u8bc1\u4e0b\u5206\u53d1\u7684\u9879\u76ee\u3002LLaMA\u8bed\u6599\u5e93\u8fd8\u4f7f\u7528\u4e00\u4e9b\u542f\u53d1\u5f0f\u65b9\u6cd5\u8fc7\u6ee4\u4f4e\u8d28\u91cf\u6587\u4ef6\uff0c\u5e76\u5728\u6587\u4ef6\u7ea7\u522b\u8fdb\u884c\u53bb\u91cd\u3002\u5bf9\u4e8eRedPajama-V1\uff0c\u6211\u4eec\u4f7f\u7528\u4e00\u7ec4\u57fa\u4e8e\u6587\u4ef6\u957f\u5ea6\u3001\u5b57\u6bcd\u6570\u5b57\u5b57\u7b26\u6bd4\u4f8b\u548c\u6587\u4ef6\u6269\u5c55\u540d\u7684\u8fc7\u6ee4\u5668\u6765\u5220\u9664\u4f4e\u8d28\u91cf\u6587\u4ef6\u3002\u6211\u4eec\u5728\u9644\u5f55C\u4e2d\u63d0\u4f9b\u4e86\u5b8c\u6574\u7684\u542f\u53d1\u5f0f\u7b97\u6cd5\u5217\u8868\u3002</p> </li> <li> <p>\u7ef4\u57fa\u767e\u79d1 LLaMA\u8bed\u6599\u5e93\u4f7f\u75282022\u5e746\u6708\u81f38\u6708\u671f\u95f420\u79cd\u8bed\u8a00\u7684\u7ef4\u57fa\u767e\u79d1\u8f6c\u50a8\uff0c\u5e76\u5bf9\u6570\u636e\u8fdb\u884c\u5904\u7406\u4ee5\u5220\u9664\u8d85\u94fe\u63a5\u3001\u6ce8\u91ca\u548c\u5176\u4ed6\u683c\u5f0f\u6837\u677f\u3002\u5bf9\u4e8eRedPajama-V1\uff0c\u6211\u4eec\u4f7f\u7528Hugging Face Hub\u4e0a\u63d0\u4f9b\u7684\u7ef4\u57fa\u767e\u79d1\u6570\u636e\u96c6\uff0c\u8be5\u6570\u636e\u96c6\u4f7f\u75282023\u5e743\u670820\u65e5\u7684\u8f6c\u50a8\u3002 \u8fd9\u4e5f\u9884\u5904\u7406\u6570\u636e\u4ee5\u5220\u9664\u8d85\u94fe\u63a5\u3001\u6ce8\u91ca\u548c\u5176\u4ed6\u6837\u677f\u3002</p> </li> <li> <p>Gutenberg and Books3 LLaMA\u8bed\u6599\u5e93\u4f7f\u7528\u6765\u81ea\u53e4\u817e\u5821\u8ba1\u5212\u7684\u56fe\u4e66\u8bed\u6599\u5e93\u548c\u6765\u81eaPile\u7684Books3\u3002\u6211\u4eec\u53ea\u4f7f\u7528\u53e4\u817e\u5821\u8ba1\u5212\u7684PG19\u5b50\u96c6\uff0c\u5e76\u4f7f\u7528SimHash\u53bb\u9664\u8fd1\u4f3c\u91cd\u590d\u9879\u3002 \u6211\u4eec\u6700\u521d\u4e5f\u5305\u542bBooks3\uff0c\u4f46\u7531\u4e8e\u7248\u6743\u95ee\u9898\u5c06\u5176\u5220\u9664\u3002</p> </li> <li> <p>arXiv LLaMA\u8bed\u6599\u5e93\u5904\u7406arXiv LaTeX\u6587\u4ef6\uff0c\u5e76\u5220\u9664\u7b2c\u4e00\u8282\u4e4b\u524d\u7684\u6240\u6709\u5185\u5bb9\u3001\u6ce8\u91ca\u3001\u5185\u8054\u5c55\u5f00\u7684\u5b9a\u4e49\u548c\u5b8f\u4ee5\u53ca\u53c2\u8003\u6587\u732e\uff0c\u9075\u5faa[29]\u3002\u6211\u4eec\u4eceAmazon S3\u4e0b\u8f7d\u4e86\u201carXiv\u201d\u8bf7\u6c42\u8005\u4ed8\u8d39\u5b58\u50a8\u6876\u4e2d\u7684arXiv\u6570\u636e\uff0c\u5e76\u5b9e\u73b0\u4e86\u7c7b\u4f3c\u7684\u540e\u5904\u7406\uff0c\u53ea\u4fdd\u7559LaTeX\u6e90\u6587\u4ef6\u5e76\u5220\u9664\u5e8f\u8a00\u3001\u6ce8\u91ca\u3001\u53c2\u8003\u6587\u732e\uff0c\u5e76\u5c55\u5f00\u5b8f\u3002</p> </li> <li> <p>Stack Exchange LLaMa\u8bed\u6599\u5e93\u5305\u542bStack Exchange\u7684\u8f6c\u50a8\u3002 \u6570\u636e\u4fdd\u7559\u6765\u81ea28\u4e2a\u6700\u5927\u7684\u7f51\u7ad9\uff0c\u6587\u672c\u4e2d\u5220\u9664HTML\u6807\u7b7e\uff0c\u7b54\u6848\u6309\u5f97\u5206\u4ece\u9ad8\u5230\u4f4e\u6392\u5e8f\u3002 \u540c\u6837\uff0c\u6211\u4eec\u4ece\u4e92\u8054\u7f51\u6863\u6848\u4e0b\u8f7dStack Exchange\uff0c\u53ea\u4fdd\u7559\u6765\u81ea28\u4e2a\u6700\u5927\u7f51\u7ad9\u7684\u5e16\u5b50\uff0c\u5e76\u5220\u9664HTML\u6807\u7b7e\u3002\u6b64\u5916\uff0c\u6211\u4eec\u5c06\u5e16\u5b50\u5206\u7ec4\u4e3a\u95ee\u7b54\u5bf9\uff0c\u5e76\u6309\u5176\u5f97\u5206\u5bf9\u7b54\u6848\u8fdb\u884c\u6392\u5e8f\u3002</p> </li> </ul>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#32redpajama-incite","title":"3.2RedPajama-INCITE \u7cfb\u5217\u5927\u8bed\u8a00\u6a21\u578b","text":"<p>\u4e3a\u4e86\u8bc4\u4f30 RedPajama-V1 \u4e0e\u539f\u59cb LLaMA \u8bed\u6599\u5e93\u7684\u5339\u914d\u7a0b\u5ea6\uff0c\u6211\u4eec\u4e0e Incite \u9879\u76ee\u5408\u4f5c\uff0c\u5728\u6a61\u6811\u5cad\u56fd\u5bb6\u5b9e\u9a8c\u5ba4\u7684 Summit \u8d85\u7ea7\u8ba1\u7b97\u673a\u4e0a\u8bad\u7ec3\u4e86\u4e00\u7cfb\u5217\u4e0d\u540c\u89c4\u6a21\u7684\u5927\u8bed\u8a00\u6a21\u578b\u3002 RedPajama-Incite \u7cfb\u5217\u5927\u8bed\u8a00\u6a21\u578b\u5305\u62ec\u4e00\u5957 3B \u548c 7B \u6a21\u578b\u89c4\u6a21\u7684\u9884\u8bad\u7ec3\u548c\u6307\u4ee4\u8c03\u4f18\u6a21\u578b\u3002\u5728\u672c\u8282\u4e2d\uff0c\u6211\u4eec\u9996\u5148\u63cf\u8ff0 Summit \u8d85\u7ea7\u8ba1\u7b97\u673a\u7684\u8ba1\u7b97\u8bbe\u7f6e\u4ee5\u53ca\u5bf9\u9884\u8bad\u7ec3\u8fd0\u884c\u7684\u5f71\u54cd\uff08\u7b2c 3.2.1 \u8282\uff09\u3002\u7136\u540e\uff0c\u6211\u4eec\u5c06\u63cf\u8ff0\u5982\u4f55\u8bc4\u4f30\u6a21\u578b\uff0c\u5e76\u63a8\u6d4b\u8fd9\u4e9b\u6a21\u578b\u4e0e LLaMA \u7cfb\u5217\u6a21\u578b\u4e4b\u95f4\u8d28\u91cf\u5dee\u5f02\uff08\u7b2c 3.2.2 \u8282\uff09\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#321-summit","title":"3.2.1 Summit \u8bad\u7ec3\u8bbe\u7f6e","text":"<p>\u5728\u672c\u8282\u4e2d\uff0c\u6211\u4eec\u5c06\u63cf\u8ff0 Summit \u8d85\u7ea7\u8ba1\u7b97\u673a\u4ee5\u53ca\u8bad\u7ec3 RedPajama-Incite \u7cfb\u5217\u5927\u8bed\u8a00\u6a21\u578b\u7684\u5de5\u7a0b\u548c\u9884\u8bad\u7ec3\u6311\u6218\u3002\u6211\u4eec\u7684\u8bed\u8a00\u6a21\u578b\u4f7f\u7528\u6a61\u6811\u5cad\u56fd\u5bb6\u5b9e\u9a8c\u5ba4\u7684 Summit \u8d85\u7ea7\u8ba1\u7b97\u673a\u8fdb\u884c\u8bad\u7ec3\uff0c\u8fd9\u662f\u4e00\u4e2a\u5305\u542b 4608 \u4e2a 6xV100 \u8282\u70b9\u7684\u96c6\u7fa4\uff0c\u8fd0\u884c IBM Power9 \u67b6\u6784\u3002\u8fd9\u79cd\u8bbe\u7f6e\u5728\u8bad\u7ec3\u73b0\u4ee3\u5927\u8bed\u8a00\u6a21\u578b\u65f6\u5e26\u6765\u4e86\u4e00\u4e9b\u6311\u6218\u3002 \u5728\u4e0b\u6587\u4e2d\uff0c\u6211\u4eec\u5c06\u8ba8\u8bba\u8fd9\u4e9b\u6311\u6218\u5e76\u63cf\u8ff0\u6211\u4eec\u5982\u4f55\u514b\u670d\u5b83\u4eec\u3002</p> <p>IBM Power9 \u67b6\u6784 \u4f7f\u7528\u7684\u6307\u4ee4\u96c6\u4e0e\u5927\u591a\u6570\u73b0\u4ee3\u82af\u7247\u7ec4\uff08\u5373\u82f1\u7279\u5c14\u3001ARM \u6216\u82f9\u679c\u7684\u82af\u7247\uff09\u4e0d\u540c\u3002\u73b0\u4ee3\u7248\u672c\u7684 PyTorch \u4ee5\u53ca\u5b83\u4eec\u4f9d\u8d56\u7684\u5927\u90e8\u5206 Python \u6808\u90fd\u6ca1\u6709\u9884\u7f16\u8bd1\u4ee5\u652f\u6301 Power9 \u67b6\u6784\uff08\u5b98\u65b9\u652f\u6301\u7684\u6700\u65b0\u7248\u672c\u662f PyTorch 1.9\uff09\u3002 \u4e3a\u4e86\u652f\u6301\u4f7f\u7528\u73b0\u4ee3\u5e93\u8fdb\u884c\u9884\u8bad\u7ec3\uff0c\u6211\u4eec\u56e2\u961f\u7684\u6210\u5458\u9700\u8981\u4ece\u5934\u91cd\u65b0\u7f16\u8bd1 PyTorch \u5e76\u4e3a Summit \u6784\u5efa\u4e00\u4e2a\u81ea\u5b9a\u4e49\u8bad\u7ec3\u6808\u3002 \u5176\u4e2d\u4e00\u4e9b\u5de5\u4f5c\u5728 GPT-NeoX \u6280\u672f\u62a5\u544a [6] \u4e2d\u6709\u66f4\u8be6\u7ec6\u7684\u8bb0\u5f55\u3002</p> <p>\u5728\u64b0\u5199\u672c\u6587\u65f6\uff0cSummit \u8d85\u7ea7\u8ba1\u7b97\u673a\u8fd0\u884c\u5728 V100 GPU \u4e0a\uff0c\u8fd9\u6bd4\u901a\u5e38\u7528\u4e8e\u8bad\u7ec3\u5927\u8bed\u8a00\u6a21\u578b\u7684 A100 \u6216 H100 GPU \u66f4\u65e7\u3002\u81f3\u5173\u91cd\u8981\u7684\u662f\uff0cV100s \u4e0d\u652f\u6301 bf16 \u6570\u636e\u7c7b\u578b\uff0c\u800c\u8fd9\u5bf9\u4e8e\u73b0\u4ee3\u7a33\u5b9a\u7684 LLM \u8bad\u7ec3\u65b9\u6848\u662f\u5fc5\u8981\u7684\u3002\u76f8\u53cd\uff0c\u6211\u4eec\u4e0d\u5f97\u4e0d\u4f7f\u7528 fp16 \u8fdb\u884c\u8bad\u7ec3\uff0c\u5e76\u4f7f\u7528\u635f\u5931\u7f29\u653e[37]\u4ee5\u5b9e\u73b0\u7a33\u5b9a\u7684\u8bad\u7ec3\u8fd0\u884c\u3002\u6211\u4eec\u8fd8\u5fc5\u987b\u964d\u4f4e\u5b66\u4e60\u7387\uff0c\u8fd9\u4e0e LLaMA \u8bad\u7ec3\u4e2d\u62a5\u544a\u7684\u5b66\u4e60\u7387\u76f8\u6bd4\u6709\u6240\u964d\u4f4e\uff0c\u8fd9\u53ef\u80fd\u5bf9\u6536\u655b\u4ea7\u751f\u4e86\u5f71\u54cd\uff083B \u6a21\u578b\u4e3a $1.6 \\cdot 10 ^ {-4} $ \uff0c7B \u6a21\u578b\u4e3a \\(1.2 \\cdot 10 ^{-4}\\)\uff09\u3002</p> <p>IBM Power9 \u67b6\u6784\u5177\u6709\u7f13\u6162\u7684\u4e92\u8fde\uff0c\u9650\u5236\u4e86\u6211\u4eec\u6bcf\u6b21\u8fd0\u884c\u53ef\u4ee5\u4f7f\u7528\u7684\u8282\u70b9\u6570\u91cf\u3002 \u6211\u4eec\u4e5f\u65e0\u6cd5\u4f7f\u7528\u6574\u4e2a\u96c6\u7fa4\uff0c\u56e0\u4e3a\u5176\u4ed6\u9879\u76ee\u6b63\u5728\u540c\u65f6\u8fd0\u884c\u3002 \u6211\u4eec\u4f7f\u7528 512 \u4e2a\u8282\u70b9\u5e76\u884c\uff083072 \u4e2a GPU\uff09\u8bad\u7ec3 7B \u6a21\u578b\uff0c\u4f7f\u7528 256 \u4e2a\u8282\u70b9\u5e76\u884c\uff081536 \u4e2a GPU\uff09\u8bad\u7ec3 3B \u6a21\u578b\uff0c\u6bcf\u4e2a\u6a21\u578b\u7684\u5168\u5c40\u6279\u91cf\u5927\u5c0f\u4e3a 4M \u4e2a\u7b26\u5143\u3002 \u5728\u6269\u5c55\u5b9e\u9a8c\u4e2d\uff0c\u6211\u4eec\u53d1\u73b0\u5982\u679c\u4e0d\u589e\u52a0\u5168\u5c40\u6279\u91cf\u5927\u5c0f\uff0c\u6211\u4eec\u5c31\u65e0\u6cd5\u8fdb\u4e00\u6b65\u589e\u52a0\u5e76\u884c\u5ea6\uff0c\u8fd9\u4f1a\u635f\u5bb3\u6536\u655b\u6027\u3002</p> <p>6xV100 \u8282\u70b9 \u4e3a\u4f7f\u7528\u5f20\u91cf\u548c\u6d41\u6c34\u7ebf\u5e76\u884c\u8fdb\u884c\u8bad\u7ec3\u5e26\u6765\u4e86\u6311\u6218\u3002 \u6211\u4eec\u5bf9 7B \u6a21\u578b\u4f7f\u7528\u4e86 12 \u8def\u6d41\u6c34\u7ebf\u5e76\u884c\uff0c\u5bf9 3B \u6a21\u578b\u4f7f\u7528\u4e86 6 \u8def\u6d41\u6c34\u7ebf\u5e76\u884c\uff0c\u5e76\u4e14\u5bf9\u8fd9\u4e24\u4e2a\u6a21\u578b\u90fd\u4f7f\u7528\u4e86 2 \u8def\u5f20\u91cf\u5e76\u884c\u3002</p> <p>\u5728\u89e3\u51b3\u8fd9\u4e9b\u6311\u6218\u4e4b\u540e\uff0c\u6211\u4eec\u80fd\u591f\u5728 Summit \u4e0a\u603b\u5171\u8bad\u7ec3 3B \u6a21\u578b 8000 \u4ebf\u4e2a\u7b26\u5143\uff0c\u603b\u5171\u8bad\u7ec3 7B \u6a21\u578b 1.001 \u4e07\u4ebf\u4e2a\u7b26\u5143\u3002 \u6211\u4eec\u5728\u9884\u70ed\u671f\u4e4b\u540e\u7ebf\u6027\u8870\u51cf\u5b66\u4e60\u7387\uff0c\u8fd9\u4e0e\u539f\u59cb LLaMA \u8bba\u6587\u4e2d\u63cf\u8ff0\u7684\u5b66\u4e60\u7387\u4e00\u81f4\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#322","title":"3.2.2 \u8bc4\u4f30","text":"<p>\u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u8ba8\u8bba\u4e86 RedPajama-INCITE-3B \u548c 7B \u6a21\u578b\u5728\u5e38\u7528\u57fa\u51c6\u6d4b\u8bd5\u4e0a\u7684\u8bc4\u4f30\u3002\u5b8c\u6574\u7684\u6210\u679c\u548c\u57fa\u51c6\u5206\u6570\u5728\u9644\u5f55C.2\u4e2d\u63d0\u4f9b\u3002\u5728\u8bad\u7ec3 RedPajama-Base-INCITE-3B \u8fbe 8000 \u4ebf\u4e2a\u7b26\u5143\u540e\uff0c\u5b83\u5177\u6709\u66f4\u597d\u7684\u5c11\u6837\u672c\u6027\u80fd\uff08\u5728 HELM classic[9]\u4e2d\u8861\u91cf\uff0c\u4e3a 16 \u4e2a\u6838\u5fc3\u573a\u666f\u7684\u5e73\u5747\u5206\u6570\uff09\u548c\u66f4\u597d\u7684\u96f6\u6837\u672c\u6027\u80fd\uff08\u4f7f\u7528 Eleuther AI \u7684 LM \u8bc4\u4f30\u5de5\u5177[18]\u8861\u91cf\uff09\uff0c\u4e0e\u5176\u4ed6\u7c7b\u4f3c\u89c4\u6a21\u7684\u5f00\u653e\u6a21\u578b\u76f8\u6bd4\uff0c\u5305\u62ec\u5e7f\u53d7\u597d\u8bc4\u7684 GPT-Neo \u548c Pythia-2.8B\uff08\u5206\u522b\u4f7f\u7528 4200 \u4ebf\u548c 3000 \u4ebf\u4e2a\u7b26\u5143\u5728 Pile \u4e0a\u8bad\u7ec3\uff09\u3002 \u5728 HELM \u4e0a\uff0c\u5b83\u6bd4\u8fd9\u4e9b\u6a21\u578b\u9ad8\u51fa 3-5 \u5206\u3002 \u5728LMevaluation\u6d4b\u8bd5\u5957\u4ef6\u7684\u4e00\u4e2a\u5b50\u96c6\u4efb\u52a1\u4e0a\uff0c\u5b83\u6bd4\u8fd9\u4e9b\u5f00\u653e\u6a21\u578b\u7684\u6027\u80fd\u9ad8\u51fa2-7\u4e2a\u767e\u5206\u70b9\u3002</p> <p>\u5728HELM-classic\u6d4b\u8bd5\u4e2d\uff0cRedPajama-INCITE-7B-Base\u6a21\u578b\u6bd4 Falcon-7B \u843d\u540e1.0\u4e2a\u767e\u5206\u70b9\uff0c\u6bd4Llama-7B\u843d\u540e4.1\u4e2a\u767e\u5206\u70b9\u3002 \u6211\u4eec\u8fdb\u4e00\u6b65\u7ec6\u5206\u4e86\u8fd9\u4e9b\u4efb\u52a1\uff0c\u53d1\u73b0\u5b83\u53ea\u5728\u9700\u8981\u4f7f\u7528logprobs\u7684\u4efb\u52a1\u4e0a\u843d\u540e\uff0c\u800clogprobs\u8ba1\u7b97\u7684\u662f\u6b63\u786e\u7b54\u6848\u548c\u9519\u8bef\u7b54\u6848\u6982\u7387\u4e4b\u95f4\u7684\u5dee\u5f02\u3002 \u7136\u800c\uff0c\u8be5\u6a21\u578b\u5728\u76f4\u63a5\u751f\u6210\u7b54\u6848\u5e76\u8861\u91cf\u8d28\u91cf\u7684\u4efb\u52a1\u4e0a\u53d6\u5f97\u4e86\u76f8\u5f53\u7684\u5e73\u5747HELM\u5206\u6570\u3002 \u7531\u4e8eLM\u6d4b\u8bd5\u5957\u4ef6\u4e2d\u7684\u6240\u6709\u57fa\u51c6\u90fd\u4f7f\u7528logprobs\uff0c\u56e0\u6b64\u6211\u4eec\u5728\u8fd9\u4e2a\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u4e5f\u770b\u5230\u4e86\u7c7b\u4f3c\u7684\u8f83\u4f4e\u7ed3\u679c\u3002 \u6211\u4eec\u5047\u8bbe\u8fd9\u90e8\u5206\u662f\u7531\u4e8e\u4f7f\u7528FP16\u8fdb\u884c\u8bad\u7ec3\u9020\u6210\u7684\uff0c\u8fd9\u4f7f\u5f97\u6211\u4eec\u65e0\u6cd5\u4f7f\u7528\u66f4\u5927\u7684\u5b66\u4e60\u7387\u3002 \u6b64\u5916\uff0c\u5982\u4e0a\u4e00\u8282\u6240\u793a\uff0c\u8bad\u7ec3\u6570\u636e\u96c6\u7684\u6784\u5efa\u5b58\u5728\u4e0d\u786e\u5b9a\u6027\u6765\u6e90\uff0c\u8fd9\u53ef\u80fd\u5bfc\u81f4\u6570\u636e\u96c6\u4e0e\u7528\u4e8e\u8bad\u7ec3Llama-1\u6a21\u578b\u7684\u6570\u636e\u96c6\u7565\u6709\u4e0d\u540c\u3002 \u6211\u4eec\u8ba4\u4e3a\u8fd9\u4e24\u4e2a\u56e0\u7d20\u5bfc\u81f4\u4e86\u4e0eLlama\u6a21\u578b\u76f8\u6bd4\u6027\u80fd\u7565\u4f4e\u3002</p> <p>RedPajama-INCITE-7B-Instruct \u662f\u57fa\u7840\u6a21\u578b\u7684\u6307\u4ee4\u8c03\u4f18\u7248\u672c\uff0c\u901a\u8fc7\u5728\u6765\u81eaP3 (BigScience) [49]\u548cNatural Instructions (AI2) [39]\u7684\u5404\u79cdNLP\u4efb\u52a1\u4e0a\u8fdb\u884c\u8bad\u7ec3\uff0c\u4ece\u800c\u4f18\u5316\u4e86\u5c11\u6837\u672c\u6027\u80fd\u3002 Instruct\u7248\u672c\u5728\u5c11\u6837\u672c\u4efb\u52a1\u4e0a\u8868\u73b0\u51fa\u8272\uff0c\u5728HELM\u4e0a\u6bd4\u540c\u7b49\u89c4\u6a21\u7684\u9886\u5148\u5f00\u653e\u6a21\u578b\uff08\u5305\u62ecLlama-7B\u3001Falcon-7B\uff08\u57fa\u7840\u7248\u548c\u6307\u4ee4\u8c03\u4f18\u7248\uff09\u4ee5\u53caMPT-7B\uff08\u57fa\u7840\u7248\u548c\u6307\u4ee4\u8c03\u4f18\u7248\uff09\uff09\u9ad8\u51fa2-8\u4e2a\u767e\u5206\u70b9\u3002 \u6211\u4eec\u5728\u8865\u5145\u6750\u6599\u4e2d\u63d0\u4f9b\u4e86\u8be6\u7ec6\u7684\u8bc4\u4f30\u5206\u6570\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#4-redpajama-v2","title":"4. RedPajama-V2","text":"<p>\u4e0e RedPajama \u6570\u636e\u96c6\u7684\u7b2c\u4e00\u4e2a\u8fed\u4ee3\u7248\u672c\u76f8\u6bd4\uff0c\u7b2c\u4e8c\u4e2a\u8fed\u4ee3\u7248\u672c\u5b8c\u5168\u4e13\u6ce8\u4e8e\u7f51\u7edc\u6570\u636e\uff0c\u5e76\u4e14\u9664\u4e86\u900f\u660e\u5ea6\u548c\u89c4\u6a21\u7684\u8bbe\u8ba1\u539f\u5219\u5916\uff0c\u6211\u4eec\u8fd8\u66f4\u52a0\u91cd\u89c6\u901a\u7528\u6027\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u9664\u4e86\u63d0\u4f9b\u5b8c\u5168\u900f\u660e\u548c\u5f00\u6e90\u7684\u6570\u636e\u96c6\u7684\u76ee\u6807\u5916\uff0c\u8bed\u6599\u5e93\u7684\u76ee\u7684\u662f\u4f5c\u4e3a\u521b\u5efa\u9ad8\u8d28\u91cf\u5b50\u96c6\u7684\u57fa\u7840\u3002\u901a\u8fc7\u5f00\u6e90\u6570\u636e\u96c6\u53ca\u5176\u5236\u54c1\uff0c\u5b9e\u73b0\u4e86\u900f\u660e\u5ea6\u7684\u76ee\u6807\uff1b\u901a\u8fc7\u5904\u7406Common Crawl\u8bed\u6599\u5e93\u7684\u5927\u90e8\u5206\u5185\u5bb9\uff0c\u5b9e\u73b0\u4e86\u89c4\u6a21\u7684\u76ee\u6807\uff1b\u4e3a\u4e86\u9075\u5faa\u591a\u529f\u80fd\u6027\u7684\u8bbe\u8ba1\u539f\u5219\uff0c\u6211\u4eec\u5c06RedPajama V2\u53d1\u5e03\u4e3a\u4e00\u4e2a\u6570\u636e\u96c6\uff0c\u8be5\u6570\u636e\u96c6\u5bcc\u542b\u4e00\u7ec4\u5143\u6570\u636e\uff0c\u80fd\u591f\u5feb\u901f\u3001\u4f4e\u6210\u672c\u5730\u8fed\u4ee3\u521b\u5efa\u9ad8\u8d28\u91cf\u3001\u591a\u6837\u5316\u548c\u5927\u578b\u6570\u636e\u96c6\u3002\u5728\u672c\u8282\u4e2d\uff0c\u6211\u4eec\u9996\u5148\u4ecb\u7ecd\u7528\u4e8e\u521b\u5efa\u539f\u59cb\u6587\u672c\u6570\u636e\u7684\u6570\u636e\u5904\u7406\u6b65\u9aa4\uff0c\u6982\u8ff0\u6bcf\u4e2a\u6587\u6863\u53ef\u7528\u7684\u8d28\u91cf\u4fe1\u53f7\uff0c\u5e76\u4ecb\u7ecd\u6570\u636e\u96c6\u7ec4\u6210\u65b9\u9762\u7684\u7edf\u8ba1\u6570\u636e\u3002\u6700\u540e\uff0c\u6211\u4eec\u4ecb\u7ecd\u4e86\u5173\u4e8e\u5982\u4f55\u5229\u7528\u8d28\u91cf\u4fe1\u53f7\u6765\u521b\u5efa\u66f4\u597d\u6570\u636e\u96c6\u7684\u6d88\u878d\u7814\u7a76\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#41","title":"4.1\u6570\u636e\u5904\u7406\u6b65\u9aa4","text":"<p>RedPajama-V2 \u662f\u4e00\u4e2a\u6570\u636e\u96c6\uff0c\u5b83\u901a\u8fc7\u5904\u7406CommonCrawl\u57fa\u91d1\u4f1a\u63d0\u4f9b\u7684\u7f51\u7edc\u6587\u6863\u521b\u5efa\u3002 \u7531\u4e8e\u7f51\u7edc\u6570\u636e\u672c\u8d28\u4e0a\u662f\u5608\u6742\u7684\uff0c\u5e76\u4e14\u53ea\u80fd\u4f5c\u4e3a\u5d4c\u5165\u5728HTML\u4ee3\u7801\u4e2d\u7684\u6587\u672c\u83b7\u5f97\uff0c\u56e0\u6b64\u9700\u8981\u5bf9\u5176\u8fdb\u884c\u5904\u7406\u4ee5\u4f7f\u5176\u9002\u5408\u8bad\u7ec3\u5927\u8bed\u8a00\u6a21\u578b\uff08LLM\uff09\u3002 \u4e3a\u6b64\uff0c\u7528\u4e8eRedPajama-V2\u7684\u539f\u59cb\u6570\u636e\u7ecf\u8fc7\u4e00\u7cfb\u5217\u57fa\u672c\u7684\u5904\u7406\u6b65\u9aa4\uff0c\u6211\u4eec\u5c06\u5bf9\u5176\u8fdb\u884c\u66f4\u8be6\u7ec6\u7684\u89e3\u91ca\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#411","title":"4.1.1\u6570\u636e\u83b7\u53d6","text":"<p>Common Crawl Archive\u662f\u4e00\u4e2a\u5e9e\u5927\u7684\u7f51\u7edc\u722c\u53d6\u6570\u636e\u5b58\u50a8\u5e93\uff0c\u53ef\u4f9b\u516c\u4f17\u514d\u8d39\u4f7f\u7528\u3002\u8be5\u8bed\u6599\u5e93\u5305\u542b\u81ea2013\u5e74\u4ee5\u6765\u7684\u722c\u53d6\u7ed3\u679c\uff0c\u5e76\u5b9a\u671f\uff08\u53cc\uff09\u6bcf\u6708\u66f4\u65b0\u3002\u9664\u4e86HTML\u683c\u5f0f\u7684\u539f\u59cb\u7f51\u7edc\u6570\u636e\uff08warc\uff09\u5916\uff0c\u8be5\u5b58\u6863\u8fd8\u63d0\u4f9b\u5143\u6570\u636e\uff08wat\uff09\u548cwet\u683c\u5f0f\u7684\u7eaf\u6587\u672c\u6570\u636e\u3002\u5b83\u5df2\u6210\u4e3a\u8bb8\u591a\u6570\u636e\u96c6\u7684\u57fa\u7840\uff0c\u5305\u62ecC4 [46]\u3001RefinedWeb [44]\u3001Dolma [52]\u548cFineWeb [43]\u7b49\u3002</p> <p>\u4e3a\u4e86\u521b\u5efaRedPajama-V2\u6570\u636e\u96c6\uff0c\u6211\u4eec\u4f7f\u7528\u4e862014\u5e744\u6708\u81f32023\u5e744\u6708\u4e4b\u95f4\u6240\u670984\u4e2a\u6bcf\u6708\u5feb\u7167\u4e2d\u63d0\u53d6\u7684\u7f51\u7edc\u6587\u672c\uff08\u5373.wet\u6587\u4ef6\uff09\uff0c\u5e76\u5c06\u5176\u901a\u8fc7CCNet\u7ba1\u9053[61]\u5904\u7406\u3002\u4e0eRPv1\u76f8\u6bd4\uff0c\u8fd9\u91cc\u6211\u4eec\u4fdd\u7559\u6240\u6709\u56f0\u60d1\u5ea6\u533a\u95f4\uff0c\u9664\u4e86\u82f1\u8bed\u6570\u636e\u5916\uff0c\u6211\u4eec\u8fd8\u4fdd\u7559\u6cd5\u8bed\u3001\u5fb7\u8bed\u3001\u610f\u5927\u5229\u8bed\u548c\u897f\u73ed\u7259\u8bed\u6570\u636e\u3002\u6211\u4eec\u9009\u62e9\u8fd9\u4e2a\u7ba1\u9053\u662f\u56e0\u4e3a\u5b83\u7684\u5904\u7406\u8f83\u4e3a\u8f7b\u91cf\u7ea7\uff0c\u8fd9\u7b26\u5408\u6211\u4eec\u5c3d\u53ef\u80fd\u4fdd\u7559\u539f\u59cb\u6570\u636e\u96c6\u4e2d\u5c3d\u53ef\u80fd\u591a\u7684\u4fe1\u606f\u7684\u6307\u5bfc\u539f\u5219\uff0c\u5e76\u5141\u8bb8\u4e0b\u6e38\u6a21\u578b\u5f00\u53d1\u8005\u8fc7\u6ee4\u6570\u636e\u96c6\u3002\u6b64\u5904\u7406\u6b65\u9aa4\u4ea7\u751f\u8d85\u8fc71000\u4ebf\u4e2a\u5355\u72ec\u7684\u6587\u672c\u6587\u6863\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#412","title":"4.1.2\u8d28\u91cf\u4fe1\u53f7","text":"<p>\u50cfLlama [57, 58]\u3001Mistral [22]\u3001Falcon [2]\u3001MPT [53]\u6216Qwen [3]\u6a21\u578b\u8fd9\u6837\u6700\u5148\u8fdb\u7684\u5f00\u6e90\u5927\u578b\u8bed\u8a00\u6a21\u578b\uff08LLM\uff09\uff0c\u8fd9\u4e9b\u6a21\u578b\u7684\u4e00\u4e2a\u6838\u5fc3\u8981\u7d20\u662f\u8fd9\u4e9b\u6a21\u578b\u6240\u8bad\u7ec3\u7684\u5927\u91cf\u9ad8\u8d28\u91cf\u6570\u636e\u3002\u4f8b\u5982\uff0cLlama 3 \u8bad\u7ec3\u4f7f\u7528\u4e86 15 \u4e07\u4ebf\u4e2a\u7ecf\u8fc7\u7cbe\u5fc3\u6311\u9009\u7684\u7b26\u5143\u3002\u63d0\u4f9b\u5fc5\u8981\u89c4\u6a21\u7684\u6700\u7a81\u51fa\u6570\u636e\u6765\u6e90\u662f CommonCrawl \u516c\u5f00\u63d0\u4f9b\u7684\u722c\u53d6\u6570\u636e\u3002\u7136\u800c\uff0c\u8fd9\u4e9b\u539f\u59cb\u6587\u672c\uff08\u5728\u672c\u4f8b\u4e2d\uff0c\u6211\u4eec\u8fd8\u901a\u8fc7 CCNet \u7ba1\u9053\u5bf9\u5176\u8fdb\u884c\u4e86\u5904\u7406\uff09\u7531\u4e8e\u4ece HTML \u8f6c\u6362\u4e3a\u7eaf\u6587\u672c\u8fc7\u7a0b\u4e2d\u4ea7\u751f\u7684\u4f2a\u5f71\uff08\u4f8b\u5982\uff0c\u89e3\u6790\u9519\u8bef\u548c\u83dc\u5355\uff09\u3001\u603b\u4f53\u8d28\u91cf\u8f83\u4f4e\u7684\u6570\u636e\u6765\u6e90\u4ee5\u53ca\u7f51\u7edc\u5185\u5bb9\u5206\u5e03\u56fa\u6709\u7684\u504f\u5dee\uff0c\u4ecd\u7136\u4e0d\u9002\u5408\u76f4\u63a5\u7528\u4f5c\u5927\u8bed\u8a00\u6a21\u578b (LLM) \u7684\u8bad\u7ec3\u6570\u636e\u3002\u4e3a\u4e86\u6e05\u7406\u6b64\u7c7b\u6570\u636e\u96c6\uff0c\u6587\u732e\u4e2d\u63d0\u51fa\u4e86\u591a\u79cd\u542f\u53d1\u5f0f\u65b9\u6cd5\uff0c\u4ee5\u4ece\u5927\u578b\u5f02\u6784\u7f51\u7edc\u6570\u636e\u96c6\u4e2d\u63d0\u53d6\u9ad8\u8d28\u91cf\u6570\u636e\u96c6\u3002\u7136\u800c\uff0c\u4e0e\u4e4b\u524d\u8fc7\u6ee4\u6389\u4f4e\u8d28\u91cf\u5185\u5bb9\u7684\u6570\u636e\u96c6\u4e0d\u540c\uff0c\u6211\u4eec\u7684\u65b9\u6cd5\u4fdd\u7559\u4e86\u6574\u4e2a\u539f\u59cb\u6587\u672c\u8bed\u6599\u5e93\uff0c\u5e76\u5c06\u8d28\u91cf\u4fe1\u53f7\u4f5c\u4e3a\u9644\u52a0\u5143\u6570\u636e\u7eb3\u5165\u5176\u4e2d\u3002\u6b64\u7b56\u7565\u4f7f\u6211\u4eec\u80fd\u591f\u4f7f\u7528\u5168\u8c31\u6570\u636e\uff0c\u5c06\u901a\u5e38\u88ab\u4e22\u5f03\u7684\u90e8\u5206\u8f6c\u6362\u4e3a\u4fe1\u606f\u5c5e\u6027\uff0c\u4ece\u800c\u589e\u5f3a\u6211\u4eec\u6570\u636e\u96c6\u7684\u6548\u7528\u3002\u8fd9\u4f7f\u5f97\u80fd\u591f\u521b\u5efa\u5176\u4ed6\u6570\u636e\u96c6\uff0c\u4f8b\u5982 C4\uff0c\u4f5c\u4e3a RedPajama-V2 \u6570\u636e\u96c6\u7684\u7279\u4f8b\u3002 \u5bf9\u4e8e\u6bcf\u4e2a\u6587\u6863\uff0c\u6211\u4eec\u90fd\u63d0\u4f9b\u4e86\u5728 C4 [46]\u3001Gopher [45]\u3001RefinedWeb [44]\u3001\u201c\u9884\u8bad\u7ec3\u8005\u6307\u5357\u201d [34] \u548c DSIR [62] \u4e2d\u4f7f\u7528\u7684\u8d28\u91cf\u4fe1\u53f7\u3002\u8fd9\u4e9b\u5927\u81f4\u53ef\u4ee5\u5206\u4e3a\u8861\u91cf \u81ea\u7136\u8bed\u8a00\u3001\u6587\u672c\u7684 \u91cd\u590d\u6027\u3001\u57fa\u4e8e\u6587\u672c \u5185\u5bb9\u3001\u57fa\u4e8e\u673a\u5668\u5b66\u4e60 (ML) \u7684\u542f\u53d1\u5f0f\u65b9\u6cd5\u548c \u53bb\u91cd \u7684\u8d28\u91cf\u4fe1\u53f7\u3002 \u4e0b\u9762\uff0c\u6211\u4eec\u5c06\u8be6\u7ec6\u89e3\u91ca\u8fd9\u4e9b\u7c7b\u522b\u4e2d\u7684\u6bcf\u4e00\u4e2a\u3002 \u9644\u5f55 D.2 \u63d0\u4f9b\u4e86\u4e00\u4e2a\u5305\u542b\u6240\u6709\u8d28\u91cf\u4fe1\u53f7\u7684\u8be6\u7ec6\u63cf\u8ff0\u4ee5\u53ca\u76f4\u65b9\u56fe\u7684\u5b8c\u6574\u5217\u8868\u3002</p> <ul> <li> <p>\u81ea\u7136\u8bed\u8a00 \u4ece\u7f51\u7ad9\u63d0\u53d6\u7684\u6587\u672c\u6587\u6863\u901a\u5e38\u5305\u542b\u4e0e\u81ea\u7136\u8bed\u8a00\u4e0d\u7b26\u7684\u5185\u5bb9\uff0c\u4f8b\u5982 JavaScript \u4ee3\u7801\u3001\u83dc\u5355\u548c\u5176\u4ed6\u6837\u677f\u6587\u672c\u3002\u4e3a\u4e86\u8861\u91cf\u7ed9\u5b9a\u6587\u672c\u6587\u6863\u7684\u81ea\u7136\u7a0b\u5ea6\uff0c\u6211\u4eec\u63d0\u4f9b\u4e86\u4e00\u4e9b\u7b80\u5355\u7684\u542f\u53d1\u5f0f\u5ea6\u91cf\uff0c\u4f8b\u5982\u6240\u6709\u5927\u5199\u5355\u8bcd\u6216\u5b57\u6bcd\u7684\u6bd4\u4f8b\u3001\u4ee5\u7701\u7565\u53f7\u7ed3\u5c3e\u7684\u884c\u6570\u6bd4\u4f8b\u3001\u552f\u4e00\u8bcd\u7684\u6bd4\u4f8b\u3001\u4e00\u884c\u662f\u5426\u4ee5\u7ec8\u7aef\u6807\u70b9\u7b26\u53f7\u7ed3\u5c3e\u7b49\u7b49\u3002</p> </li> <li> <p>\u91cd\u590d\u6027 \u7f51\u7edc\u6570\u636e\u4e2d\u7ecf\u5e38\u89c2\u5bdf\u5230\u7684\u4e00\u79cd\u4f2a\u5f71\u662f\u91cd\u590d\u6587\u672c\uff0c\u8fd9\u4e0e\u65e0\u4fe1\u606f\u5185\u5bb9\u6709\u5173 [45]\u3002 \u91cd\u590d\u751f\u6210\u4e5f\u662f\u8bed\u8a00\u6a21\u578b\u5df2\u77e5\u7684\u5931\u6548\u6a21\u5f0f[21]\uff0c\u53bb\u9664\u8fc7\u5ea6\u91cd\u590d\u7684\u5185\u5bb9\u53ef\u80fd\u6709\u52a9\u4e8e\u7f13\u89e3\u8fd9\u79cd\u884c\u4e3a[45]\u3002 \u5bf9\u4e8e\u6bcf\u4e2a\u6587\u6863\uff0c\u6211\u4eec\u8ba1\u7b97\u51fa\u73b0\u5728\u6700\u9891\u7e41\uff08\u8bcd\uff09n \u5143\u4e2d\u5b57\u7b26\u7684\u6bd4\u4f8b \\(n \\in \\{2, 3, 4\\}\\)\u3002 \u5176\u6b21\uff0c\u6211\u4eec\u8ba1\u7b97\u5bf9\u4e8e \\(n \\in \\{5, \\cdots, 10\\}\\) \u7684\u503c\uff0c\u51fa\u73b0\u5728\u4efb\u4f55\u91cd\u590d n \u5143\u4e2d\u7684\u5b57\u7b26\u6bd4\u4f8b\u3002 \u6211\u4eec\u786e\u4fdd\u4e0d\u4f1a\u591a\u6b21\u8ba1\u7b97\u51fa\u73b0\u5728\u91cd\u53e0 n \u5143\u4e2d\u7684\u5b57\u7b26\u3002</p> </li> <li> <p>\u57fa\u4e8e\u5185\u5bb9\u7684 \u7f51\u7edc\u6587\u6863\u53ef\u80fd\u5305\u542b\u6709\u5bb3\u548c\u4ee4\u4eba\u53cd\u611f\u7684\u5185\u5bb9\uff0c\u9700\u8981\u89e3\u51b3\u3002 \u4e3a\u6b64\uff0c\u6211\u4eec\u63d0\u4f9b\u4e86C4\u548cRefinedWeb\u4e2d\u4f7f\u7528\u7684\u4fe1\u53f7\uff0c\u5373\uff1a\uff081\uff09\u5305\u542b\u5728LDNOOBW\u9ed1\u540d\u5355\u4e2d\u7684\u8bcd\u5e8f\u5217\u6570\u91cf4\u3002 \u6b64\u5916\uff0c\u6211\u4eec\u8fd8\u5305\u542b\u4e00\u4e2a\u6807\u5fd7\uff0c\u6307\u793a\u6587\u6863\u7684\u57df\u540d\u662f\u5426\u51fa\u73b0\u5728UT1\u963b\u6b62\u7684URL\u5217\u8868\u4e2d5\u3002 \u867d\u7136\u8fd9\u4e9b\u8d28\u91cf\u4fe1\u53f7\u4fa7\u91cd\u4e8eNSFW\u5185\u5bb9\uff0c\u4f46\u6211\u4eec\u8ba4\u4e3a\u5176\u4ed6\u57fa\u4e8e\u5185\u5bb9\u7684\u8fc7\u6ee4\u5668\uff0c\u4f8b\u5982\u57df\u540d\u6216\u5d4c\u5165\u96c6\u7fa4[55]\uff0c\u4e5f\u662f\u5f88\u6709\u524d\u666f\u7684\u65b9\u5411\u3002 \u5728\u9644\u5f55\u4e2d\u7684\u56fe8\u4e2d\uff0c\u6211\u4eec\u5c55\u793a\u4e86\u901a\u8fc7\u5d4c\u5165\u805a\u7c7b\u627e\u5230\u7684\u4e3b\u9898\u5206\u5e03\u3002</p> </li> <li> <p>\u673a\u5668\u5b66\u4e60\u542f\u53d1\u5f0f\u65b9\u6cd5 \u57fa\u4e8e\u673a\u5668\u5b66\u4e60\u7684\u8d28\u91cf\u4fe1\u53f7\u56f4\u7ed5\u7740\u8861\u91cf\u4e0e\u9ad8\u8d28\u91cf\u9886\u57df\u76f8\u4f3c\u6027\u7684\u60f3\u6cd5\u3002 \u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u4f7f\u7528fastText\u5206\u7c7b\u5668[24]\uff0c\u4ee5\u53ca[62]\u4e2d\u63d0\u51fa\u7684\u91cd\u8981\u6027\u6743\u91cd\u3002 \u867d\u7136\u673a\u5668\u5b66\u4e60\u8fc7\u6ee4\u5668\u5df2\u88ab\u8bc1\u660e\u53ef\u4ee5\u63d0\u9ad8\u6570\u636e\u96c6\u7684\u8d28\u91cf\uff08\u4f8b\u5982\uff0c[12, 57, 11]\uff09\uff0c\u4f46\u4e5f\u6709\u62a5\u9053\u79f0\u5b83\u4eec\u4f1a\u5bfc\u81f4\u504f\u5dee\u6216\u4f4e\u4f30\u5c11\u6570\u7fa4\u4f53[15]\u3002 RPv2\u4e2d\u63d0\u4f9b\u7684fastText\u5206\u7c7b\u5668\u4fe1\u53f7\u662f\u8bad\u7ec3\u7528\u4e8e\u533a\u5206\u672a\u8fc7\u6ee4\u7684RPv2\u6570\u636e\u548c\u9ad8\u8d28\u91cf\u9886\u57df\u7684unigram\u8bcd\u888b\u6a21\u578b\u3002 \u5bf9\u4e8e\u82f1\u8bed\u6570\u636e\uff0c\u6211\u4eec\u4f7f\u7528\u7ef4\u57fa\u767e\u79d1\u3001\u7ef4\u57fa\u767e\u79d1\u5f15\u7528\u7684\u7f51\u7ad9\u3001\u4e66\u7c4d\u548cOpenWebText\u6570\u636e\u96c6\u3002 \u5bf9\u4e8e\u975e\u82f1\u8bed\u6570\u636e\uff0c\u6211\u4eec\u53ea\u4f7f\u7528\u7ef4\u57fa\u767e\u79d1\u3002 \u5728[62]\u4e2d\u63d0\u51fa\u7684DSIR\u6743\u91cd\u4f30\u8ba1\u4e86\u5355\u4e2a\u6837\u672c\u5bf9\u7ed9\u5b9a\u76ee\u6807\u57df\u5728\u964d\u7ef4\u7279\u5f81\u7a7a\u95f4\u4e2d\u7684\u91cd\u8981\u6027\uff0c\u5e76\u4e14\u57fa\u4e8e\u8bcd\u8bed\u4e00\u5143\u6a21\u578b\u548c\u4e8c\u5143\u6a21\u578b\u3002 \u8fd9\u4e9b\u6743\u91cd\u5b9a\u4e49\u4e3a\u76ee\u6807\u57df\u4e0e\u6e90\u57df\u8bed\u8a00\u6a21\u578b\u4e4b\u95f4\u7684\u5bf9\u6570\u4f3c\u7136\u6bd4\uff0c\u5176\u4e2d\u6211\u4eec\u4f7f\u7528\u4e0efasttext\u5206\u7c7b\u5668\u76f8\u540c\u7684\u57df\u3002</p> </li> <li> <p>\u91cd\u590d\u6570\u636e\u5220\u9664 \u4eba\u4eec\u53d1\u73b0\uff0c\u5220\u9664\u91cd\u590d\u7684\u8bad\u7ec3\u6570\u636e\u53ef\u4ee5\u63d0\u9ad8\u6a21\u578b\u7684\u56f0\u60d1\u5ea6\uff0c\u51cf\u5c11\u8bb0\u5fc6\u91cf\uff0c\u540c\u65f6\u51cf\u5c11\u8bad\u7ec3\u6570\u636e\u91cf\u548c\u6240\u9700\u7684\u8ba1\u7b97\u91cf[28]\u3002 \u91cd\u590d\u6570\u636e\u5220\u9664\u4e5f\u662f\u6700\u6d41\u884c\u7684\u6570\u636e\u96c6\u7684\u6838\u5fc3\u7ec4\u6210\u90e8\u5206\u4e4b\u4e00[46, 52, 44]\u3002 \u5728RPv2\u4e2d\uff0c\u6211\u4eec\u5305\u542b\u4e86\u7528\u4e8e\u6a21\u7cca\u91cd\u590d\u6570\u636e\u5220\u9664\u7684MinHash\u7b7e\u540d[10]\uff08\u5728\u4e0d\u540c\u7684\u76f8\u4f3c\u5ea6\u7ea7\u522b\uff09\uff0c\u4ee5\u53ca\u901a\u8fc7\u5e03\u9686\u8fc7\u6ee4\u5668[7]\uff08\u9519\u8bef\u7387\u8bbe\u7f6e\u4e3a 1%\uff09\u53d1\u73b0\u7684\u5b8c\u5168\u91cd\u590d\u6587\u6863\u7684ID\u3002 6. \u5bf9\u4e8e\u8fd9\u4e2a\u6587\u6863\u7ea7\u522b\u7684\u91cd\u590d\u6570\u636e\u5220\u9664\uff0c\u6211\u4eec\u6309\u987a\u5e8f\u8fdb\u884c\uff0c\u4ece\u6700\u65b0\u7684\u8f6c\u50a8\uff082023-14\uff09\u5f00\u59cb\uff0c\u4f9d\u6b21\u8fed\u4ee3\u540e\u7eed\u7684\u8f6c\u50a8\uff0c\u76f4\u5230\u5230\u8fbe\u6700\u65e7\u7684\u8f6c\u50a8\uff082014-15\uff09\u3002 \u9644\u5f55\u4e2d\u7684\u56fe3\u663e\u793a\u4e86\u4ee5\u8fd9\u79cd\u65b9\u5f0f\u6807\u8bb0\u4e3a\u91cd\u590d\u6587\u6863\u7684\u6570\u91cf\u6982\u8ff0\u3002</p> </li> </ul>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#42","title":"4.2\u6570\u636e\u96c6\u7edf\u8ba1","text":"<p>RPv2\u5305\u542b\u4e94\u79cd\u4e0d\u540c\u8bed\u8a00\u76841130\u4ebf\u4e2a\u6587\u6863\uff1a\u82f1\u8bed\u3001\u5fb7\u8bed\u3001\u6cd5\u8bed\u3001\u897f\u73ed\u7259\u8bed\u548c\u610f\u5927\u5229\u8bed\u3002\u5982\u524d\u6240\u8ff0\uff0cCCNet\u7ba1\u9053\u5c06\u6570\u636e\u96c6\u5212\u5206\u4e3a\u4e09\u4e2a\u6876\u201c\u5934\u90e8\u201d\u3001\u201c\u4e2d\u95f4\u201d\u548c\u201c\u5c3e\u90e8\u201d\uff0c\u5206\u522b\u5bf9\u5e94\u4e8e\u5177\u6709\u4f4e\u3001\u4e2d\u548c\u9ad8\u7ef4\u57fa\u767e\u79d1\u56f0\u60d1\u5ea6\u7684\u6587\u6863\u3002 \u5934\u90e8+\u4e2d\u95f4\u5206\u533a\u4e2d\u6709328\u4ebf\u4e2a\u6587\u6863\uff0c\u5c3e\u90e8\u5206\u533a\u4e2d\u6709800\u4ebf\u4e2a\u6587\u6863\u3002\u5c3e\u90e8\u6587\u6863\u901a\u5e38\u6bd4\u5934\u90e8\u548c\u4e2d\u90e8\u533a\u5757\u7684\u6587\u6863\u77ed\uff08850\u4e2a\u7b26\u5143\uff09\uff0c\u223c1500\u4e2a\u7b26\u5143\uff09\u3002\u7b26\u5143\u8ba1\u6570\u662f\u57fa\u4e8e\u4f7f\u7528Mistral [22] BPE\u5206\u8bcd\u5668\u5bf91\u4ebf\u4efd\u6587\u6863\u7684\u72ec\u7acb\u540c\u5206\u5e03\u6837\u672c\u8fdb\u884c\u4f30\u8ba1\u7684\u3002\u8868\u683c3\u8be6\u7ec6\u6982\u8ff0\u4e86\u6bcf\u79cd\u8bed\u8a00\u548c\u6bcf\u4e2a\u5206\u533a\u7b26\u5143\u7684\u6570\u91cf\u3002 \u6211\u4eec\u5728\u8865\u5145\u6750\u6599\u4e2d\u63d0\u4f9b\u4e86\u5173\u4e8e\u91cd\u590d\u6570\u636e\u5220\u9664\u524d\u540e\u6587\u6863\u6570\u91cf\u4ee5\u53ca\u8d28\u91cf\u4fe1\u53f7\u5206\u5e03\u7684\u66f4\u591a\u7edf\u8ba1\u6570\u636e\u3002</p> <p></p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#43","title":"4.3\u6570\u636e\u96c6\u6d88\u878d\u5b9e\u9a8c","text":"<p>\u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u63d0\u51fa\u4e86\u4e00\u7cfb\u5217\u6570\u636e\u96c6\u6d88\u878d\u5b9e\u9a8c\uff0c\u76ee\u7684\u662f\u4e3a\u4e86\u66f4\u597d\u5730\u7406\u89e3\u7b2c4.1.2\u8282\u4e2d\u4ecb\u7ecd\u7684\u8d28\u91cf\u4fe1\u53f7\u5982\u4f55\u5f71\u54cd\u4f7f\u7528\u4e0d\u540c\u542f\u53d1\u5f0f\u7b97\u6cd5\u8fc7\u6ee4\u7684\u6570\u636e\u8bad\u7ec3\u65f6\uff0c\u8bed\u8a00\u6a21\u578b\u7684\u6027\u80fd\u3002\u66f4\u5177\u4f53\u5730\u8bf4\uff0c\u6211\u4eec\u5728\u8fd9\u91cc\u63d0\u51fa\u4ee5\u4e0b\u95ee\u9898\uff1a\u4e0d\u540c\u7684\u8d28\u91cf\u8fc7\u6ee4\u89c4\u5219\u5982\u4f55\u5f71\u54cd\u4e0b\u6e38\u6027\u80fd\uff1f \u6211\u4eec\u529b\u6c42\u8fdb\u884c\u5e7f\u6cdb\u7684\u8bc4\u4f30\uff0c\u5e76\u8861\u91cf\u5728\u4e0d\u540c\u4e0b\u6e38\u57fa\u51c6\u6d4b\u8bd5\u4e0a\u7684\u6027\u80fd\u4ee5\u53ca\u591a\u4e2a\u9886\u57df\u4e0a\u7684\u8bed\u8a00\u5efa\u6a21\u76ee\u6807\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#431","title":"4.3.1\u8bbe\u7f6e","text":"<ul> <li> <p>\u6a21\u578b \u6211\u4eec\u91c7\u7528\u5177\u67094.68\u4ebf\u53c2\u6570\u548c16\u4ebf\u53c2\u6570\u4ee5\u53ca2048\u4e2a\u5e8f\u5217\u957f\u5ea6\u7684\u4ec5\u89e3\u7801\u5668Llama-2\u67b6\u6784[58]\u3002\u4e24\u4e2a\u6a21\u578b\u90fd\u5177\u670924\u5c42\u300116\u4e2a\u6ce8\u610f\u529b\u5934\uff0c\u5e76\u4e14MLP\u6269\u5c55\u6bd4\u7387\u8bbe\u7f6e\u4e3a4.0\u30024.68\u4ebf\u53c2\u6570\u6a21\u578b\u7684\u9690\u85cf\u7ef4\u5ea6\u4e3a1024\uff0c\u800c16\u4ebf\u53c2\u6570\u6a21\u578b\u7684\u9690\u85cf\u7ef4\u5ea6\u4e3a2048\u3002\u5bf9\u4e8e\u6bcf\u4e2a\u6570\u636e\u96c6\uff0c\u6211\u4eec\u57284.68\u4ebf\u4e2a\u7b26\u5143\u4e0a\u8bad\u7ec34.68\u4ebf\u53c2\u6570\u6a21\u578b\uff0c\u57283500\u4ebf\u4e2a\u7b26\u5143\u4e0a\u8bad\u7ec316\u4ebf\u53c2\u6570\u6a21\u578b\u3002 \u6211\u4eec\u4f7f\u7528\u5e26\u67090.1\u6743\u91cd\u8870\u51cf\u7684AdamW [14] \u4f18\u5316\u5668\uff0c\u6700\u5927\u5b66\u4e60\u7387\u5206\u522b\u8bbe\u7f6e\u4e3a \\(5e^{-3}\\) \u548c\\(5e^{-4}\\)\uff0c\u4ee5\u53ca\u5728\u6700\u521d1%\u7684\u6b65\u9aa4\u4e2d\u5177\u6709\u7ebf\u6027\u9884\u70ed\u7684\u4f59\u5f26\u8870\u51cf\u8c03\u5ea6\u3002\u6211\u4eec\u4f7f\u7528\u76f8\u5bf9\u8f83\u5c0f\u7684\u89c4\u6a21\uff0c\u56e0\u4e3a\u8fd9\u4f7f\u6211\u4eec\u80fd\u591f\u63a2\u7d22\u66f4\u5e7f\u6cdb\u7684\u8fc7\u6ee4\u5668\uff0c\u5c55\u793aRedPajama\u4e2d\u53ef\u7528\u8d28\u91cf\u8fc7\u6ee4\u5668\u7684\u5e7f\u5ea6\u3002</p> </li> <li> <p>\u786c\u4ef6\u548c\u8bad\u7ec3\u6808 \u7531\u4e8e\u5176\u6613\u4e8e\u8bbe\u7f6e\u3001\u4f7f\u7528\u4ee5\u53ca\u9ad8\u6a21\u578b\u6d6e\u70b9\u8fd0\u7b97\u5229\u7528\u7387\uff0c\u6211\u4eec\u4f7f\u7528OLMo\u6846\u67b67\u8fdb\u884c\u5206\u5e03\u5f0f\u8bad\u7ec3\uff0c\u5e76\u4f7f\u7528FSDP [66]\u5728\u591a\u4e2aGPU\u548c\u8282\u70b9\u4e4b\u95f4\u8fdb\u884c\u5e76\u884c\u5316\u3002 \u5bf9\u4e8e\u8bc4\u4f30\uff0c\u6211\u4eec\u4f7f\u7528lm-evaluation-harness\u3002 \u6211\u4eec\u6700\u591a\u4f7f\u75285\u4e2a\u5177\u6709Infiniband\u4e92\u8fde\u7684H100\u8282\u70b9\u6765\u8bad\u7ec3\u6211\u4eec\u7684\u6a21\u578b\u3002</p> </li> <li> <p>\u8bc4\u4f30\u6307\u6807 \u6211\u4eec\u529b\u6c42\u5bf9\u57fa\u51c6\u548c\u9886\u57df\u8fdb\u884c\u5e7f\u6cdb\u7684\u8986\u76d6\u3002 \u540c\u65f6\uff0c\u6211\u4eec\u7684\u8fd0\u4f5c\u89c4\u6a21\u76f8\u5bf9\u8f83\u5c0f\uff0c\u5176\u4e2d\u8bb8\u591a\u4efb\u52a1\u90fd\u8fc7\u4e8e\u56f0\u96be\uff0c\u96be\u4ee5\u63d0\u4f9b\u8db3\u591f\u5f3a\u7684\u4fe1\u53f7\u6765\u533a\u5206\u6570\u636e\u96c6\u3002</p> </li> </ul> <p>\u4e0eFineWeb[43]\u6570\u636e\u96c6\u7c7b\u4f3c\uff0c\u6211\u4eec\u5bfb\u627e\u5373\u4f7f\u5728\u8fd9\u4e2a\u5c0f\u578b\u6a21\u578b\u89c4\u6a21\u4e0b\u4e5f\u80fd\u63d0\u4f9b\u8db3\u591f\u9ad8\u4fe1\u566a\u6bd4\u7684\u57fa\u51c6\u3002\u5728\u4ed4\u7ec6\u8003\u8651\u4e4b\u540e\uff0c\u6211\u4eec\u6700\u7ec8\u9009\u62e9\u4e86\u88684\u4e2d\u7684\u57fa\u51c6\u3002\u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u5448\u73b0\u805a\u5408\u5206\u6570\uff1a</p> <ul> <li>\uff081\uff09\u8ba1\u7b97\u57fa\u51c6\u7684\u5e73\u5747\u503c\uff1b</li> <li>\uff082\uff09\u5f52\u4e00\u5316\u5e73\u5747\u503c\uff1b\u4ee5\u53ca</li> <li>\uff083\uff09\u6bcf\u4e2a\u6570\u636e\u914d\u65b9\u7684\u79e9\u7684\u5f52\u4e00\u5316\u548c\u3002 </li> </ul> <p>\u6211\u4eec\u9009\u62e9\u5305\u542b\u540e\u8005\u4ee5\u907f\u514d\u5bf9\u4e0d\u540c\u89c4\u6a21\u7684\u5206\u6570\u8fdb\u884c\u5e73\u5747\u3002\u8865\u5145\u6750\u6599\u4e2d\u63d0\u4f9b\u4e86\u66f4\u8be6\u7ec6\u7684\u8bc4\u5206\u3002\u4e3a\u4e86\u57fa\u4e8e\u76ee\u6807\u9886\u57df\u7684\u56f0\u60d1\u5ea6\u5bf9\u6570\u636e\u96c6\u8fdb\u884c\u6392\u5e8f\uff0c\u6211\u4eec\u9075\u5faa Dolma [52] \u4e2d\u91c7\u7528\u7684\u65b9\u6cd5\uff0c\u5e76\u91c7\u7528 Paloma [35] \u548c Pile [17] \u9a8c\u8bc1\u96c6\u3002</p> <p></p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#432","title":"4.3.2\u7ed3\u679c","text":"<p>\u6211\u4eec\u9996\u5148\u4f7f\u7528\u8d28\u91cf\u4fe1\u53f7\u6765\u5b9e\u73b0\u6587\u732e\u4e2d\u6700\u5e7f\u6cdb\u4f7f\u7528\u7684\u8fc7\u6ee4\u5668\u4e2d\u7684\u4e00\u4e9b\u3002\u6b64\u5916\uff0c\u6211\u4eec\u8fd8\u7814\u7a76\u4e86 RPv2 \u4e2d\u53ef\u7528\u7684 ML \u542f\u53d1\u5f0f\u65b9\u6cd5\uff0c\u8fd9\u4e9b\u65b9\u6cd5\u57fa\u4e8e fastText \u8bcd\u888b n-gram \u5206\u7c7b\u5668 [24] \u548c DSIR \u91cd\u8981\u6027\u6743\u91cd [62]\u3002\u6211\u4eec\u5bf9 RPv2 \u7684\u4e24\u4e2a\u5b50\u96c6\u8fdb\u884c\u4e86\u6d88\u878d\u7814\u7a76\uff0c\u5373 2023-14 \u722c\u53d6\u7684\u6570\u636e\u548c 2021-49 \u5230 2023-14 \u7684 9 \u6b21\u722c\u53d6\u7684\u6570\u636e\uff0c\u8fd9\u4e9b\u6570\u636e\u4f7f\u7528 MinHash LSH \u5bf9\u5355\u8bcd 13-gram \u8fdb\u884c\u53bb\u91cd\uff0c\u4f7f\u7528 128 \u4e2a\u54c8\u5e0c\u51fd\u6570\u30019 \u4e2a\u6ce2\u6bb5\u548c 13 \u884c\u3002 \u5bf9\u4e8e 1.6B \u6d88\u878d\u7814\u7a76\uff0c\u6211\u4eec\u8fc7\u6ee4\u5b8c\u6574\u7684 RPv2 \u6570\u636e\u96c6\uff0c\u7136\u540e\u5927\u7ea6\u91c7\u6837 1T \u4e2a\u7b26\u5143\u5e76\u4f7f\u7528\u76f8\u540c\u7684 Minhash \u8d85\u53c2\u6570\u5bf9\u5176\u8fdb\u884c\u53bb\u91cd\u3002</p> <p>\u8fc7\u6ee4\u5668\u3002  \u6211\u4eec\u529b\u6c42\u6db5\u76d6\u5e7f\u6cdb\u7684\u8d28\u91cf\u8fc7\u6ee4\u914d\u7f6e\u3002\u76ee\u6807\u5e76\u975e\u5728\u7279\u5b9a\u57fa\u51c6\u6d4b\u8bd5\u4e0a\u4f18\u5316\u6027\u80fd\uff0c\u800c\u662f\u5c55\u793a\u4ee5\u4e0d\u540c\u65b9\u5f0f\u8fc7\u6ee4RPv2\u6570\u636e\u96c6\u4f1a\u5bfc\u81f4\u6a21\u578b\u6027\u80fd\u7684\u5de8\u5927\u5dee\u5f02\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u5c1d\u8bd5\u4e86C4\u548cGopher\u89c4\u5219\u7684\u53d8\u4f53\uff0c\u5e76\u4f7f\u7528\u4e86RPv2\u4e2d\u57fa\u4e8e\u673a\u5668\u5b66\u4e60\u7684\u8d28\u91cf\u4fe1\u53f7\u3002\u6211\u4eec\u8fd8\u4f7f\u7528\u4e86\u4e00\u4e2a\u57fa\u4e8e\u8bcd\u6570\u3001\u5e73\u5747\u884c\u957f\u3001\u7ef4\u57fa\u767e\u79d1\u56f0\u60d1\u5ea6\u548c\u7ef4\u57fa\u767e\u79d1\u53c2\u8003\u6587\u732e\u5206\u7c7b\u5668\u7684\u81ea\u5b9a\u4e49\u914d\u7f6ecustom-rules\u3002</p> <p>\u7ed3\u679c\u3002 \u4ece\u88685\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u5f97\u51fa\u5173\u4e8e\u8fc7\u6ee4RedPajama-V2\u6570\u636e\u96c6\u7684\u4e00\u7cfb\u5217\u7ed3\u8bba\u3002\u9996\u5148\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230Gopher\u89c4\u5219\u901a\u5e38\u4f1a\u63d0\u9ad8\u6027\u80fd\u3002\u7279\u522b\u5730\uff0c\u6211\u4eec\u770b\u5230\u6a21\u7cca\u53bb\u91cd\u548c\u4f7f\u7528Gopher\u8fdb\u884c\u8fc7\u6ee4\u5728\u6240\u6709RPv2\u6570\u636e\u96c6\u4e0a\u5177\u6709\u6700\u9ad8\u7684\u805a\u5408\u5206\u6570\u3002\u6b64\u5916\uff0c\u5e73\u5747\u57fa\u51c6\u5206\u6570\u548c\u5f52\u4e00\u5316\u5e73\u5747\u57fa\u51c6\u5206\u6570\u4ec5\u6b21\u4e8eRefinedWeb\uff0c\u800c\u6392\u540d\u5206\u6570\u9ad8\u4e8eRefinedWeb\u3002\u9644\u5f55\u4e2d\u7684\u6bcf\u4e2a\u57fa\u51c6\u6d4b\u8bd5\u886818\u300119\u548c20\u663e\u793a\uff0c\u4f7f\u7528\u6a21\u7cca\u53bb\u91cd\u548cGopher\u8fc7\u6ee4\u7684RPv2\u6570\u636e\u96c6\u59cb\u7ec8\u5904\u4e8e\u4e2d\u4e0a\u6c34\u5e73\uff08\u6700\u4f4e\u6392\u540d\u5206\u6570\u4e3a19\u4e2d\u76849\uff09\uff0c\u800cRefinedWeb\u5728Hellaswag\u3001LAMBADA\u3001Winogrande\u3001MMLU\u548cOpenBookQA\u4e0a\u7684\u8868\u73b0\u66f4\u5dee\u3002\u8fd9\u8868\u660e\uff0c\u4f7f\u7528\u5b8c\u6574\u7684Gopher\u89c4\u5219\u548c\u6a21\u7cca\u53bb\u91cd\uff08Minhash LSH\uff09\u8fc7\u6ee4RPv2\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u5728\u66f4\u5e7f\u6cdb\u7684\u4efb\u52a1\u4e2d\u8868\u73b0\u826f\u597d\u7684\u6570\u636e\u96c6\uff0c\u4f18\u4e8e\u6240\u6709\u5176\u4ed6\u6570\u636e\u96c6\u3002\u5176\u6b21\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230Gopher-natlang\u8fc7\u6ee4\u5668\u6bd4Gopher-repetition\u8fc7\u6ee4\u5668\u6027\u80fd\u66f4\u597d\u3002 \u7b2c\u4e09\uff0c\u5728\u57fa\u4e8e\u6a21\u578b\u7684\u8fc7\u6ee4\u7684\u80cc\u666f\u4e0b\uff0c\u6211\u4eec\u53d1\u73b0\u4f7f\u7528fasttext\u5206\u7c7b\u5668\u548cDSIR\u4e4b\u95f4\u6ca1\u6709\u663e\u8457\u5dee\u5f02\u3002 \u7b2c\u56db\uff0c\u4ec5\u4f7f\u7528\u884c\u7ea7C4\u8fc7\u6ee4\u5668\u4f3c\u4e4e\u53ef\u4ee5\u964d\u4f4e\u56f0\u60d1\u5ea6\uff0c\u4f46\u5bf9\u805a\u5408\u57fa\u51c6\u5206\u6570\u7684\u5f71\u54cd\u53ef\u4ee5\u5ffd\u7565\u4e0d\u8ba1\u3002 \u6700\u540e\uff0c\u6211\u4eec\u6ce8\u610f\u5230\u672a\u7ecf\u8fc7\u6ee4\u7684RPv2 2023-14\u6570\u636e\u96c6\u5728Paloma\u6570\u636e\u96c6\u4e0a\u7684\u56f0\u60d1\u5ea6\u4f3c\u4e4e\u6700\u4f4e\uff0c\u800c\u5176\u4ed6\u8fc7\u6ee4\u65b9\u6cd5\u4f1a\u5bfc\u81f4\u6a21\u578b\u5177\u6709\u66f4\u9ad8\u7684\u56f0\u60d1\u5ea6\u3002 \u6211\u4eec\u8ba4\u4e3a\u8fd9\uff08\u81f3\u5c11\u90e8\u5206\uff09\u53ef\u4ee5\u5f52\u56e0\u4e8ePaloma\u6db5\u76d6\u7684\u5e7f\u6cdb\u9886\u57df\u3002 \u6b64\u5916\uff0cPaloma\u8fd8\u5305\u542bRPv1\u6570\u636e\u96c6\uff0c\u8fd9\u53ef\u4ee5\u89e3\u91ca\u5728RPv1-CC\u4e0a\u8bad\u7ec3\u7684\u6a21\u578b\u83b7\u5f97\u7684\u4f4e\u56f0\u60d1\u5ea6\u5f97\u5206\u3002 \u88686\u8fdb\u4e00\u6b65\u8868\u660e\uff0c\u4f7f\u7528\u5b8c\u6574\u7684Gopher\u89c4\u5219\u8fc7\u6ee4\u7684RPv2\u8bad\u7ec3\u7684\u6a21\u578b\u4f18\u4e8e\u4ec5\u4f7f\u7528Gopher-natlang\u89c4\u5219\u8fc7\u6ee4\u7684RPv2\u8bad\u7ec3\u7684\u6a21\u578b\uff0c\u5e76\u4e14\u5176\u8d28\u91cf\u63a5\u8fd1\u4e8e\u5728RefinedWeb\u6570\u636e\u96c6\u4e0a\u8bad\u7ec3\u7684\u6a21\u578b\u3002 \u603b\u4e4b\uff0c\u8fd9\u4e00\u7cfb\u5217\u6d88\u878d\u7814\u7a76\u8868\u660e\u4e86\u5982\u4f55\u5229\u7528RPv2\u6570\u636e\u96c6\u4e2d\u7684\u8d28\u91cf\u4fe1\u53f7\u6765\u9010\u6b65\u8fc7\u6ee4\u51fa\u66f4\u597d\u7684\u6570\u636e\u96c6\u3002 \u7ed3\u5408\u5176\u8d85\u8fc7100\u4e07\u4ebf\u4e2a\u7b26\u5143\u7684\u5de8\u5927\u89c4\u6a21\uff0c\u6211\u4eec\u770b\u5230\u8fd9\u4e2a\u6570\u636e\u96c6\u4e3a\u521b\u5efa\u7528\u4e8e\u5927\u8bed\u8a00\u6a21\u578b\u9884\u8bad\u7ec3\u7684\u9ad8\u8d28\u91cf\u7f51\u7edc\u6570\u636e\u96c6\u63d0\u4f9b\u4e86\u5f3a\u5927\u7684\u8d44\u6e90\u3002</p> <p></p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#5","title":"5.\u7ed3\u8bba","text":"<p>\u5728\u672c\u6587\u4e2d\uff0c\u6211\u4eec\u4ecb\u7ecd\u4e86RedPajama\u6570\u636e\u96c6\u3002 \u62e5\u6709\u8d85\u8fc7100\u4e07\u4ebf\u4e2a\u7b26\u5143\uff0c\u8fd9\u4e9b\u662f\u7528\u4e8e\u9884\u8bad\u7ec3\u8bed\u8a00\u6a21\u578b\u7684\u6700\u5927\u3001\u5b8c\u5168\u5f00\u6e90\u548c\u900f\u660e\u7684\u6570\u636e\u96c6\uff0c\u5e76\u4e14\u4e00\u76f4\u662f\u8bb8\u591a\u6700\u5f3a\u5927\u7684\u5f00\u6e90\u5927\u8bed\u8a00\u6a21\u578b\u7684\u6838\u5fc3\u7ec4\u6210\u90e8\u5206\u3002\u9664\u4e86\u4f34\u968f\u6570\u636e\u96c6\u7684\u6587\u6863\u5916\uff0c\u6211\u4eec\u8fd8\u5c55\u793a\u4e86\u5982\u4f55\u5c06RedPajama-V2\u8fc7\u6ee4\u5230\u8d28\u91cf\u8d8a\u6765\u8d8a\u9ad8\u7684\u5b50\u96c6\u7684\u793a\u4f8b\uff0c\u4ece\u800c\u5728\u5404\u79cd\u57fa\u51c6\u4efb\u52a1\u4e0a\u4ea7\u751f\u4e0d\u540c\u8d28\u91cf\u6c34\u5e73\u7684\u8bed\u8a00\u6a21\u578b\uff0c\u5e76\u4f18\u4e8e\u5728\u5176\u4ed6\u5927\u578b\u9884\u8bad\u7ec3\u8bed\u6599\u5e93\u4e0a\u8bad\u7ec3\u7684\u6a21\u578b\u3002\u867d\u7136\u8fd9\u4e9b\u6a21\u578b\u76f8\u5bf9\u8f83\u5c0f\uff0c\u4f7f\u6211\u4eec\u80fd\u591f\u63a2\u7d22\u66f4\u591a\u79cd\u7c7b\u7684\u8fc7\u6ee4\u5668\uff0c\u4f46\u8fd9\u4e5f\u662f\u4e00\u4e2a\u5c40\u9650\u6027\uff0c\u9700\u8981\u8fdb\u4e00\u6b65\u8fdb\u884c\u66f4\u5927\u89c4\u6a21\u7684\u63a2\u7d22\u3002 \u6211\u4eec\u6ca1\u6709\u9488\u5bf9\u5e38\u89c1\u57fa\u51c6\u8fdb\u884c\u5f7b\u5e95\u7684\u53bb\u6c61\u67d3\u5206\u6790\uff0c\u4e5f\u6ca1\u6709\u5206\u6790\u6570\u636e\u96c6\u4e2d\u5b58\u5728\u7684\u4e2a\u4eba\u8eab\u4efd\u4fe1\u606f\uff0c\u8fd9\u6784\u6210\u4e86\u8fd9\u9879\u5de5\u4f5c\u7684\u53e6\u4e00\u4e2a\u5c40\u9650\u6027\u3002 \u901a\u8fc7\u53d1\u5e03\u539f\u59cb\u7684\u3001\u672a\u8fc7\u6ee4\u7684RedPajama-V2\u6570\u636e\u96c6\uff0c\u4f46\u540c\u65f6\u63d0\u4f9b\u4e00\u7ec4\u8d28\u91cf\u4fe1\u53f7\uff0c\u6211\u4eec\u5e0c\u671b\u672a\u6765\u7684\u5de5\u4f5c\u5c06\u7ee7\u7eed\u57fa\u4e8eRedPajama\uff0c\u5e76\u63d0\u4f9b\u8fc7\u6ee4\u3001\u6574\u7406\u548c\u6df7\u5408\u591a\u4e2a\u9884\u8bad\u7ec3\u8bed\u6599\u5e93\u7684\u65b0\u7684\u521b\u65b0\u65b9\u6cd5\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#_2","title":"\u81f4\u8c22\u4e0e\u8d44\u91d1\u62ab\u9732","text":"<p>\u6211\u4eec\u611f\u8c22\u52a0\u62ff\u5927CIFAR\u4eba\u5de5\u667a\u80fd\u4e3b\u5e2d\u9879\u76ee[I.R.]\u7684\u652f\u6301\u3002\u4ee5\u53ca\u52a0\u62ff\u5927\u5353\u8d8a\u7814\u7a76\u4e3b\u5e2d\u9879\u76ee[I.R.]\u7684\u652f\u6301\u3002\u8fd9\u9879\u7814\u7a76\u5f97\u4ee5\u5b9e\u73b0\uff0c\u8981\u611f\u8c22Summit\u8d85\u7ea7\u8ba1\u7b97\u673a\u4e0a\u7684\u8ba1\u7b97\u8d44\u6e90\uff0c\u8fd9\u4e9b\u8d44\u6e90\u662f\u4f5c\u4e3aINCITE 2023\u9879\u76ee\u5956\u201c\u7528\u4e8e\u53ef\u8fc1\u79fb\u901a\u624d\u4eba\u5de5\u667a\u80fd\u7684\u53ef\u6269\u5c55\u57fa\u7840\u6a21\u578b\u201d\u7684\u4e00\u90e8\u5206\u63d0\u4f9b\u7684\u3002\u8fd9\u4e9b\u8d44\u6e90\u7531\u6a61\u6811\u5cad\u56fd\u5bb6\u5b9e\u9a8c\u5ba4\u7684\u6a61\u6811\u5cad\u9886\u5bfc\u8ba1\u7b97\u8bbe\u65bd\u63d0\u4f9b\uff0c\u8be5\u8bbe\u65bd\u7531\u7f8e\u56fd\u80fd\u6e90\u90e8\u79d1\u5b66\u529e\u516c\u5ba4\u6839\u636e\u5408\u540c\u53f7\u63d0\u4f9b\u652f\u6301\u3002 DE-AC05-00OR22725\u3002  \u6211\u4eec\u8877\u5fc3\u611f\u8c22\u7f8e\u56fd\u56fd\u7acb\u536b\u751f\u7814\u7a76\u9662\uff08NIH\uff09\u5728\u7f16\u53f7\u4e3a U54EB020405\uff08Mobilize\uff09\u4e0b\u7684\u652f\u6301\uff0c\u4ee5\u53ca\u7f8e\u56fd\u56fd\u5bb6\u79d1\u5b66\u57fa\u91d1\u4f1a\uff08NSF\uff09\u5728\u7f16\u53f7\u4e3a CCF2247015\uff08\u786c\u4ef6\u611f\u77e5\uff09\u3001 CCF1763315\uff08\u8d85\u8d8a\u7a00\u758f\u6027\uff09\u3001 CCF1563078\uff08\u4ece\u4f53\u79ef\u5230\u901f\u5ea6\uff09\u548c 1937301\uff08RTML\uff09\u4e0b\u7684\u652f\u6301\uff1b\u4ee5\u53ca\u7f8e\u56fd\u9646\u519b\u4f5c\u6218\u80fd\u529b\u53d1\u5c55\u53f8\u4ee4\u90e8\u9646\u519b\u7814\u7a76\u5b9e\u9a8c\u5ba4\uff08DEVCOM ARL\uff09\u5728\u7f16\u53f7\u4e3a W911NF-23-2-0184\uff08\u957f\u4e0a\u4e0b\u6587\uff09\u548c W911NF-21-2-0251\uff08\u4eba\u673a\u4ea4\u4e92\u5f0f\u56e2\u961f\uff09\u4e0b\u7684\u652f\u6301\uff1b\u4ee5\u53ca\u7f8e\u56fd\u6d77\u519b\u7814\u7a76\u529e\u516c\u5ba4\uff08ONR\uff09\u5728\u7f16\u53f7\u4e3a N000142312633\uff08\u6df1\u5ea6\u4fe1\u53f7\u5904\u7406\uff09\u4e0b\u7684\u652f\u6301\uff1b\u4ee5\u53ca\u65af\u5766\u798f\u5927\u5b66\u4eba\u5de5\u667a\u80fd\u7814\u7a76\u6240\uff08HAI\uff09\u5728\u7f16\u53f7\u4e3a 247183\u4e0b\u7684\u652f\u6301\uff1b\u4ee5\u53ca\u6069\u667a\u6d66\uff08NXP\uff09\u3001\u8d5b\u7075\u601d\uff08Xilinx\uff09\u3001\u6cd5\u56fd\u539f\u5b50\u80fd\u59d4\u5458\u4f1a\u7535\u5b50\u4e0e\u4fe1\u606f\u6280\u672f\u5b9e\u9a8c\u5ba4\uff08LETI-CEA\uff09\u3001\u82f1\u7279\u5c14\uff08Intel\uff09\u3001IBM\u3001\u5fae\u8f6f\uff08Microsoft\uff09\u3001NEC\u3001\u4e1c\u829d\uff08Toshiba\uff09\u3001\u53f0\u79ef\u7535\uff08TSMC\uff09\u3001ARM\u3001\u65e5\u7acb\uff08Hitachi\uff09\u3001\u5df4\u65af\u592b\uff08BASF\uff09\u3001\u57c3\u68ee\u54f2\uff08Accenture\uff09\u3001\u7231\u7acb\u4fe1\uff08Ericsson\uff09\u3001\u9ad8\u901a\uff08Qualcomm\uff09\u3001ADI\u516c\u53f8\uff08Analog Devices\uff09\u3001\u8c37\u6b4c\u4e91\uff08Google Cloud\uff09\u3001Salesforce\u3001\u9053\u8fbe\u5c14\uff08Total\uff09\u3001HAI-GCP\u4e91\u8ba1\u7b97\u7814\u7a76\u9879\u76ee\u3001\u65af\u5766\u798f\u6570\u636e\u79d1\u5b66\u5021\u8bae\uff08SDSI\uff09\u4ee5\u53ca\u65af\u5766\u798fDAWN\u9879\u76ee\u7684\u6210\u5458\uff1aMeta\u3001\u8c37\u6b4c\u548c VMware \u7684\u652f\u6301\u3002 \u7f8e\u56fd\u653f\u5e9c\u6709\u6743\u51fa\u4e8e\u653f\u5e9c\u76ee\u7684\u590d\u5236\u548c\u5206\u53d1\u8f6c\u8f7d\u672c\uff0c\u5373\u4f7f\u4e0a\u9762\u6709\u4efb\u4f55\u7248\u6743\u58f0\u660e\u3002 \u672c\u6750\u6599\u4e2d\u8868\u8fbe\u7684\u4efb\u4f55\u89c2\u70b9\u3001\u53d1\u73b0\u3001\u7ed3\u8bba\u6216\u5efa\u8bae\u5747\u4e3a\u4f5c\u8005\u7684\u89c2\u70b9\uff0c\u4e0d\u4e00\u5b9a\u53cd\u6620NIH\u3001ONR\u6216\u7f8e\u56fd\u653f\u5e9c\u7684\u89c2\u70b9\u3001\u653f\u7b56\u6216\u8ba4\u53ef\uff0c\u65e0\u8bba\u662f\u660e\u793a\u7684\u8fd8\u662f\u6697\u793a\u7684\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#_3","title":"\u53c2\u8003\u6587\u732e","text":"<ul> <li>[1] Josh Achiam, Steven Adler, Sandhini Agarwal, Lama Ahmad, Ilge Akkaya, Florencia Leoni Aleman, Diogo Almeida, Janko Altenschmidt, Sam Altman, Shyamal Anadkat, et al.Gpt-4 technical report.arXiv preprint arXiv:2303.08774, 2023.</li> <li>[2] Ebtesam Almazrouei, Hamza Alobeidli, Abdulaziz Alshamsi, Alessandro Cappelli, Ruxandra Cojocaru, M\u00e9rouane Debbah, \u00c9tienne Goffinet, Daniel Hesslow, Julien Launay, Quentin Malartic, et al.The falcon series of open language models.arXiv preprint arXiv:2311.16867, 2023.</li> <li>[3] Jinze Bai, Shuai Bai, Yunfei Chu, Zeyu Cui, Kai Dang, Xiaodong Deng, Yang Fan, Wenbin Ge, Yu Han, Fei Huang, et al.Qwen technical report.arXiv preprint arXiv:2309.16609, 2023.</li> <li>[4] Stella Biderman, Hailey Schoelkopf, Quentin Gregory Anthony, Herbie Bradley, Kyle O\u2019Brien, Eric Hallahan, Mohammad Aflah Khan, Shivanshu Purohit, USVSN Sai Prashanth, Edward Raff, et al.Pythia: A suite for analyzing large language models across training and scaling.In International Conference on Machine Learning, pages 2397\u20132430. PMLR, 2023.</li> <li>[5] Yonatan Bisk, Rowan Zellers, Ronan Le Bras, Jianfeng Gao, and Yejin Choi.Piqa: Reasoning about physical commonsense in natural language.In Thirty-Fourth AAAI Conference on Artificial Intelligence, 2020.</li> <li>[6] Sid Black, Stella Biderman, Eric Hallahan, Quentin Anthony, Leo Gao, Laurence Golding, Horace He, Connor Leahy, Kyle McDonell, Jason Phang, et al.Gpt-neox-20b: An open-source autoregressive language model.arXiv preprint arXiv:2204.06745, 2022.</li> <li>[7] Burton H Bloom.Space/time trade-offs in hash coding with allowable errors.Communications of the ACM, 13(7):422\u2013426, 1970.</li> <li>[8] Rishi Bommasani, Kevin Klyman, Shayne Longpre, Sayash Kapoor, Nestor Maslej, Betty Xiong, Daniel Zhang, and Percy Liang.The foundation model transparency index.arXiv preprint arXiv:2310.12941, 2023.</li> <li>[9] Rishi Bommasani, Percy Liang, and Tony Lee.Holistic evaluation of language models.Annals of the New York Academy of Sciences, 1525(1):140\u2013146, 2023.</li> <li>[10] Andrei Z Broder.On the resemblance and containment of documents.In Proceedings. Compression and Complexity of SEQUENCES 1997 (Cat. No. 97TB100171), pages 21\u201329. IEEE, 1997.</li> <li>[11] Tom Brown, Benjamin Mann, Nick Ryder, Melanie Subbiah, Jared D Kaplan, Prafulla Dhariwal, Arvind Neelakantan, Pranav Shyam, Girish Sastry, Amanda Askell, et al.Language models are few-shot learners.Advances in neural information processing systems, 33:1877\u20131901, 2020.</li> <li>[12] Aakanksha Chowdhery, Sharan Narang, Jacob Devlin, Maarten Bosma, Gaurav Mishra, Adam Roberts, Paul Barham, Hyung Won Chung, Charles Sutton, Sebastian Gehrmann, et al.Palm: Scaling language modeling with pathways.Journal of Machine Learning Research, 24(240):1\u2013113, 2023.</li> <li>[13] Peter Clark, Isaac Cowhey, Oren Etzioni, Tushar Khot, Ashish Sabharwal, Carissa Schoenick, and Oyvind Tafjord.Think you have solved question answering? try arc, the ai2 reasoning challenge.ArXiv, abs/1803.05457, 2018.</li> <li>[14] P Kingma Diederik.Adam: A method for stochastic optimization.2014.</li> <li>[15] Jesse Dodge, Maarten Sap, Ana Marasovi\u0107, William Agnew, Gabriel Ilharco, Dirk Groeneveld, Margaret Mitchell, and Matt Gardner.Documenting large webtext corpora: A case study on the colossal clean crawled corpus.arXiv preprint arXiv:2104.08758, 2021.</li> <li>[16] Nan Du, Yanping Huang, Andrew M Dai, Simon Tong, Dmitry Lepikhin, Yuanzhong Xu, Maxim Krikun, Yanqi Zhou, Adams Wei Yu, Orhan Firat, et al.Glam: Efficient scaling of language models with mixture-of-experts.In International Conference on Machine Learning, pages 5547\u20135569. PMLR, 2022.</li> <li>[17] Leo Gao, Stella Biderman, Sid Black, Laurence Golding, Travis Hoppe, Charles Foster, Jason Phang, Horace He, Anish Thite, Noa Nabeshima, et al.The pile: An 800gb dataset of diverse text for language modeling.arXiv preprint arXiv:2101.00027, 2020.</li> <li>[18] Leo Gao, Jonathan Tow, Baber Abbasi, Stella Biderman, Sid Black, Anthony DiPofi, Charles Foster, Laurence Golding, Jeffrey Hsu, Alain Le Noac\u2019h, Haonan Li, Kyle McDonell, Niklas Muennighoff, Chris Ociepa, Jason Phang, Laria Reynolds, Hailey Schoelkopf, Aviya Skowron, Lintang Sutawika, Eric Tang, Anish Thite, Ben Wang, Kevin Wang, and Andy Zou.A framework for few-shot language model evaluation, 07 2024.</li> <li>[19] Dirk Groeneveld, Iz Beltagy, Pete Walsh, Akshita Bhagia, Rodney Kinney, Oyvind Tafjord, Ananya Harsh Jha, Hamish Ivison, Ian Magnusson, Yizhong Wang, et al.Olmo: Accelerating the science of language models.arXiv preprint arXiv:2402.00838, 2024.</li> <li>[20] Dan Hendrycks, Collin Burns, Steven Basart, Andy Zou, Mantas Mazeika, Dawn Song, and Jacob Steinhardt.Measuring massive multitask language understanding.Proceedings of the International Conference on Learning Representations (ICLR), 2021.</li> <li>[21] Ari Holtzman, Jan Buys, Li Du, Maxwell Forbes, and Yejin Choi.The curious case of neural text degeneration.arXiv preprint arXiv:1904.09751, 2019.</li> <li>[22] Albert Q Jiang, Alexandre Sablayrolles, Arthur Mensch, Chris Bamford, Devendra Singh Chaplot, Diego de las Casas, Florian Bressand, Gianna Lengyel, Guillaume Lample, Lucile Saulnier, et al.Mistral 7b.arXiv preprint arXiv:2310.06825, 2023.</li> <li>[23] Qiao Jin, Bhuwan Dhingra, Zhengping Liu, William Cohen, and Xinghua Lu.Pubmedqa: A dataset for biomedical research question answering.In Proceedings of the 2019 Conference on Empirical Methods in Natural Language Processing and the 9th International Joint Conference on Natural Language Processing (EMNLP-IJCNLP), pages 2567\u20132577, 2019.</li> <li>[24] Armand Joulin, Edouard Grave, Piotr Bojanowski, and Tomas Mikolov.Bag of tricks for efficient text classification.In Proceedings of the 15th Conference of the European Chapter of the Association for Computational Linguistics: Volume 2, Short Papers, pages 427\u2013431. Association for Computational Linguistics, April 2017.</li> <li>[25] Denis Kocetkov, Raymond Li, Loubna Ben Allal, Jia Li, Chenghao Mou, Carlos Mu\u00f1oz Ferrandis, Yacine Jernite, Margaret Mitchell, Sean Hughes, Thomas Wolf, Dzmitry Bahdanau, Leandro von Werra, and Harm de Vries.The stack: 3 tb of permissively licensed source code.Preprint, 2022.</li> <li>[26] Hugo Lauren\u00e7on, Lucile Saulnier, Thomas Wang, Christopher Akiki, Albert Villanova del Moral, Teven Le Scao, Leandro Von Werra, Chenghao Mou, Eduardo Gonz\u00e1lez Ponferrada, Huu Nguyen, et al.The bigscience roots corpus: A 1.6 tb composite multilingual dataset.Advances in Neural Information Processing Systems, 35:31809\u201331826, 2022.</li> <li>[27] Teven Le Scao, Angela Fan, Christopher Akiki, Ellie Pavlick, Suzana Ili\u0107, Daniel Hesslow, Roman Castagn\u00e9, Alexandra Sasha Luccioni, Fran\u00e7ois Yvon, Matthias Gall\u00e9, et al.Bloom: A 176b-parameter open-access multilingual language model.2023.</li> <li>[28] Katherine Lee, Daphne Ippolito, Andrew Nystrom, Chiyuan Zhang, Douglas Eck, Chris Callison-Burch, and Nicholas Carlini.Deduplicating training data makes language models better.arXiv preprint arXiv:2107.06499, 2021.</li> <li>[29] Aitor Lewkowycz, Anders Andreassen, David Dohan, Ethan Dyer, Henryk Michalewski, Vinay Ramasesh, Ambrose Slone, Cem Anil, Imanol Schlag, Theo Gutman-Solo, et al.Solving quantitative reasoning problems with language models.Advances in Neural Information Processing Systems, 35:3843\u20133857, 2022.</li> <li>[30] Jeffrey Li, Alex Fang, Georgios Smyrnis, Maor Ivgi, Matt Jordan, Samir Gadre, Hritik Bansal, Etash Guha, Sedrick Keh, Kushal Arora, et al.Datacomp-lm: In search of the next generation of training sets for language models.arXiv preprint arXiv:2406.11794, 2024.</li> <li>[31] Raymond Li, Loubna Ben Allal, Yangtian Zi, Niklas Muennighoff, Denis Kocetkov, Chenghao Mou, Marc Marone, Christopher Akiki, Jia Li, Jenny Chim, et al.Starcoder: may the source be with you!arXiv preprint arXiv:2305.06161, 2023.</li> <li>[32] Zehan Li, Xin Zhang, Yanzhao Zhang, Dingkun Long, Pengjun Xie, and Meishan Zhang.Towards general text embeddings with multi-stage contrastive learning.arXiv preprint arXiv:2308.03281, 2023.</li> <li>[33] Stephanie Lin, Jacob Hilton, and Owain Evans.Truthfulqa: Measuring how models mimic human falsehoods, 2021.</li> <li>[34] Shayne Longpre, Gregory Yauney, Emily Reif, Katherine Lee, Adam Roberts, Barret Zoph, Denny Zhou, Jason Wei, Kevin Robinson, David Mimno, et al.A pretrainer\u2019s guide to training data: Measuring the effects of data age, domain coverage, quality, &amp; toxicity.arXiv preprint arXiv:2305.13169, 2023.</li> <li>[35] Ian Magnusson, Akshita Bhagia, Valentin Hofmann, Luca Soldaini, Ananya Harsh Jha, Oyvind Tafjord, Dustin Schwenk, Evan Pete Walsh, Yanai Elazar, Kyle Lo, et al.Paloma: A benchmark for evaluating language model fit.arXiv preprint arXiv:2312.10523, 2023.</li> <li>[36] Sachin Mehta, Mohammad Hossein Sekhavat, Qingqing Cao, Maxwell Horton, Yanzi Jin, Chenfan Sun, Iman Mirzadeh, Mahyar Najibi, Dmitry Belenko, Peter Zatloukal, et al.Openelm: An efficient language model family with open-source training and inference framework.arXiv preprint arXiv:2404.14619, 2024.</li> <li>[37] Paulius Micikevicius, Sharan Narang, Jonah Alben, Gregory Diamos, Erich Elsen, David Garcia, Boris Ginsburg, Michael Houston, Oleksii Kuchaiev, Ganesh Venkatesh, et al.Mixed precision training.arXiv preprint arXiv:1710.03740, 2017.</li> <li>[38] Todor Mihaylov, Peter Clark, Tushar Khot, and Ashish Sabharwal.Can a suit of armor conduct electricity? a new dataset for open book question answering.In EMNLP, 2018.</li> <li>[39] Swaroop Mishra, Daniel Khashabi, Chitta Baral, and Hannaneh Hajishirzi.Cross-task generalization via natural language crowdsourcing instructions.In ACL, 2022. [40] Yixin Nie, Adina Williams, Emily Dinan, Mohit Bansal, Jason Weston, and Douwe Kiela.Adversarial nli: A new benchmark for natural language understanding.In Proceedings of the 58th Annual Meeting of the Association for Computational Linguistics. Association for Computational Linguistics, 2020. [41] Nomic.Structure unstructured data: Interact, discover insights and build with unstructured text, image and audio data., 2024.Accessed: 2024-06-12. [42] Denis Paperno, Germ\u00e1n Kruszewski, Angeliki Lazaridou, Ngoc Quan Pham, Raffaella Bernardi, Sandro Pezzelle, Marco Baroni, Gemma Boleda, and Raquel Fernandez.The LAMBADA dataset: Word prediction requiring a broad discourse context.In Proceedings of the 54th Annual Meeting of the Association for Computational Linguistics (Volume 1: Long Papers), pages 1525\u20131534, Berlin, Germany, August 2016. Association for Computational Linguistics. [43] Guilherme Penedo, Hynek Kydl\u00ed\u010dek, Anton Lozhkov, Margaret Mitchell, Colin Raffel, Leandro Von Werra, Thomas Wolf, et al.The fineweb datasets: Decanting the web for the finest text data at scale.arXiv preprint arXiv:2406.17557, 2024. [44] Guilherme Penedo, Quentin Malartic, Daniel Hesslow, Ruxandra Cojocaru, Hamza Alobeidli, Alessandro Cappelli, Baptiste Pannier, Ebtesam Almazrouei, and Julien Launay.The refinedweb dataset for falcon llm: Outperforming curated corpora with web data only.Advances in Neural Information Processing Systems, 36, 2024. [45] Jack W Rae, Sebastian Borgeaud, Trevor Cai, Katie Millican, Jordan Hoffmann, Francis Song, John Aslanides, Sarah Henderson, Roman Ring, Susannah Young, et al.Scaling language models: Methods, analysis &amp; insights from training gopher.arXiv preprint arXiv:2112.11446, 2021. [46] Colin Raffel, Noam Shazeer, Adam Roberts, Katherine Lee, Sharan Narang, Michael Matena, Yanqi Zhou, Wei Li, and Peter J Liu.Exploring the limits of transfer learning with a unified text-to-text transformer.Journal of machine learning research, 21(140):1\u201367, 2020. [47] Siva Reddy, Danqi Chen, and Christopher D Manning.Coqa: A conversational question answering challenge.Transactions of the Association for Computational Linguistics, 7:249\u2013266, 2019. [48] Keisuke Sakaguchi, Ronan Le Bras, Chandra Bhagavatula, and Yejin Choi.Winogrande: an adversarial winograd schema challenge at scale.Commun. ACM, 64(9):99\u2013106, aug 2021. [49] Victor Sanh, Albert Webson, Colin Raffel, Stephen H. Bach, Lintang Sutawika, Zaid Alyafeai, Antoine Chaffin, Arnaud Stiegler, Teven Le Scao, Arun Raja, Manan Dey, M Saiful Bari, Canwen Xu, Urmish Thakker, Shanya Sharma Sharma, Eliza Szczechla, Taewoon Kim, Gunjan Chhablani, Nihal Nayak, Debajyoti Datta, Jonathan Chang, Mike Tian-Jian Jiang, Han Wang, Matteo Manica, Sheng Shen, Zheng Xin Yong, Harshit Pandey, Rachel Bawden, Thomas Wang, Trishala Neeraj, Jos Rozen, Abheesht Sharma, Andrea Santilli, Thibault Fevry, Jason Alan Fries, Ryan Teehan, Stella Biderman, Leo Gao, Tali Bers, Thomas Wolf, and Alexander M. Rush.Multitask prompted training enables zero-shot task generalization, 2021. [50] Maarten Sap, Hannah Rashkin, Derek Chen, Ronan LeBras, and Yejin Choi.Socialiqa: Commonsense reasoning about social interactions.arXiv preprint arXiv:1904.09728, 2019. [51] Zhiqiang Shen, Tianhua Tao, Liqun Ma, Willie Neiswanger, Joel Hestness, Natalia Vassilieva, Daria Soboleva, and Eric Xing.Slimpajama-dc: Understanding data combinations for llm training.arXiv preprint arXiv:2309.10818, 2023. [52] Luca Soldaini, Rodney Kinney, Akshita Bhagia, Dustin Schwenk, David Atkinson, Russell Authur, Ben Bogin, Khyathi Chandu, Jennifer Dumas, Yanai Elazar, et al.Dolma: An open corpus of three trillion tokens for language model pretraining research.arXiv preprint arXiv:2402.00159, 2024. [53] MosaicML NLP Team.Introducing mpt-7b: A new standard for open-source, commercially usable llms, 2023.Accessed: 2023-05-05. [54] Snowflake AI Research Team.Snowflake arctic: The best llm for enterprise ai \u2014 efficiently intelligent, truly open, 2023.Accessed: 2024-05-27. [55] Kushal Tirumala, Daniel Simig, Armen Aghajanyan, and Ari Morcos.D4: Improving llm pretraining via document de-duplication and diversification.Advances in Neural Information Processing Systems, 36, 2024. [56] Yury Tokpanov, Beren Millidge, Paolo Glorioso, Jonathan Pilault, Adam Ibrahim, James Whittington, and Quentin Anthony.Zyda: A 1.3t dataset for open language modeling, 2024.</li> <li>[57] Hugo Touvron, Thibaut Lavril, Gautier Izacard, Xavier Martinet, Marie-Anne Lachaux, Timoth\u00e9e Lacroix, Baptiste Rozi\u00e8re, Naman Goyal, Eric Hambro, Faisal Azhar, et al.Llama: Open and efficient foundation language models.arXiv preprint arXiv:2302.13971, 2023.</li> <li>[58] Hugo Touvron, Louis Martin, Kevin Stone, Peter Albert, Amjad Almahairi, Yasmine Babaei, Nikolay Bashlykov, Soumya Batra, Prajjwal Bhargava, Shruti Bhosale, et al.Llama 2: Open foundation and fine-tuned chat models.arXiv preprint arXiv:2307.09288, 2023.</li> <li>[59] Ben Wang and Aran Komatsuzaki.GPT-J-6B: A 6 Billion Parameter Autoregressive Language Model.https://github.com/kingoflolz/mesh-transformer-jax, May 2021. [60] Johannes Welbl, Nelson F Liu, and Matt Gardner.Crowdsourcing multiple choice science questions.arXiv preprint arXiv:1707.06209, 2017. [61] Guillaume Wenzek, Marie-Anne Lachaux, Alexis Conneau, Vishrav Chaudhary, Francisco Guzm\u00e1n, Armand Joulin, and Edouard Grave.Ccnet: Extracting high quality monolingual datasets from web crawl data.arXiv preprint arXiv:1911.00359, 2019. [62] Sang Michael Xie, Shibani Santurkar, Tengyu Ma, and Percy S Liang.Data selection for language models via importance resampling.Advances in Neural Information Processing Systems, 36:34201\u201334227, 2023. [63] Linting Xue, Noah Constant, Adam Roberts, Mihir Kale, Rami Al-Rfou, Aditya Siddhant, Aditya Barua, and Colin Raffel.mT5: A massively multilingual pre-trained text-to-text transformer.In Proceedings of the 2021 Conference of the North American Chapter of the Association for Computational Linguistics: Human Language Technologies, pages 483\u2013498, Online, June 2021. Association for Computational Linguistics. [64] Rowan Zellers, Ari Holtzman, Yonatan Bisk, Ali Farhadi, and Yejin Choi.Hellaswag: Can a machine really finish your sentence?In Proceedings of the 57th Annual Meeting of the Association for Computational Linguistics, 2019. [65] Ge Zhang, Scott Qu, Jiaheng Liu, Chenchen Zhang, Chenghua Lin, Chou Leuang Yu, Danny Pan, Esther Cheng, Jie Liu, Qunshu Lin, et al.Map-neo: Highly capable and transparent bilingual large language model series.arXiv preprint arXiv:2405.19327, 2024. [66] Yanli Zhao, Andrew Gu, Rohan Varma, Liang Luo, Chien-Chin Huang, Min Xu, Less Wright, Hamid Shojanazeri, Myle Ott, Sam Shleifer, et al.Pytorch fsdp: experiences on scaling fully sharded data parallel.arXiv preprint arXiv:2304.11277, 2023.</li> </ul>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#a","title":"\u9644\u5f55 A \u9884\u671f\u7528\u9014","text":"<p>RedPajama \u6570\u636e\u96c6\u521b\u5efa\u7684\u4e3b\u8981\u76ee\u662f\u4e3a\u5927\u578b\u8bed\u8a00\u6a21\u578b\u63d0\u4f9b\u8bad\u7ec3\u6570\u636e\u3002RedPajama \u5305\u542b\u6765\u81ea\u4e0d\u540c\u6765\u6e90\u548c\u9886\u57df\u7684\u6570\u636e\u3002RedPajama-V1 \u5305\u542b\u4ece\u7f51\u7edc\u6293\u53d6\u83b7\u5f97\u7684\u6570\u636e\u3001\u7ef4\u57fa\u767e\u79d1\u6587\u7ae0\u3001\u4ece arXiv \u4e0a\u7684\u6587\u7ae0\u4e2d\u63d0\u53d6\u7684\u79d1\u5b66\u5185\u5bb9\uff0c\u4ee5\u53ca\u5404\u79cd\u7f16\u7a0b\u8bed\u8a00\u7684\u4ee3\u7801\u3002RedPajama-V2 \u5305\u542b\u7684\u6570\u636e\u5b8c\u5168\u57fa\u4e8e\u7f51\u7edc\u6293\u53d6\uff0c\u5e76\u9644\u5e26\u4e00\u7cfb\u5217\u65e8\u5728\u7528\u4e8e\u8fc7\u6ee4\u539f\u59cb\u6570\u636e\u96c6\u7684\u8d28\u91cf\u4fe1\u53f7\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#b","title":"\u9644\u5f55 B\u6570\u636e\u96c6\u53ef\u8bbf\u95ee\u6027","text":"<p>RedPajama-V1 \u548c RedPajama-V2 \u90fd\u53ef\u4ee5\u901a\u8fc7 Huggingface Hub \u4e0b\u8f7d\uff0c\u94fe\u63a5\u5206\u522b\u4e3a https://huggingface.co/datasets/togethercomputer/RedPajama-Data-1T \u548c https://huggingface.co/datasets/togethercomputer/RedPajama-Data-V2\u3002</p> <p>\u53ef\u901a\u8fc7\u516c\u5171 HTTP \u7aef\u70b9\u8bbf\u95ee\u3002 \u6211\u4eec\u4e5f\u901a\u8fc7\u516c\u5171 HTTPS \u7aef\u70b9\u63d0\u4f9b\u5bf9\u6570\u636e\u96c6\u7684\u8bbf\u95ee\u3002 RedPajama-V1 \u6570\u636e\u96c6\u7ec4\u4ef6\u7684\u7f51\u5740\u5217\u8868\u53ef\u4ece https://data.together.xyz/redpajama-data-1T/v1.0.0/urls.txt \u83b7\u53d6\u3002 RedPajama-V2 \u4e0d\u540c\u7ec4\u4ef6\u7684\u7f51\u5740\u5217\u8868\u53ef\u4ece\u4ee5\u4e0b\u7f51\u5740\u83b7\u53d6\uff1a</p> <ul> <li>\u539f\u59cb\u6587\u672c\u6587\u6863\u53ef\u4ece https://data.together.xyz/redpajama-data-v2/v1.0.0/urls/document-urls.txt \u83b7\u53d6\u3002</li> <li>\u5934\u90e8\u548c\u4e2d\u95f4\u5206\u533a\u7684\u8d28\u91cf\u4fe1\u53f7\u53ef\u4ece https://data.together.xyz/redpajama-data-v2/v1.0.0/urls/quality_signals-urls.txt \u83b7\u53d6\u3002</li> <li>\u5b8c\u5168\u91cd\u590d\u7684\u6587\u6863 ID \u5217\u8868\u53ef\u4ece https://data.together.xyz/redpajama-data-v2/v1.0.0/urls/duplicates-urls.txt \u83b7\u53d6\u3002</li> <li>\u6700\u5c0f\u54c8\u5e0c\u7b7e\u540d\u53ef\u4ece https://data.together.xyz/redpajama-data-v2/v1.0.0/urls/minhash-urls.txt \u83b7\u53d6\u3002</li> </ul>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#b1","title":"B.1\u6570\u636e\u96c6\u7ed3\u6784","text":"<p>RedPajama-V1 \u548c RedPajama-V2 \u90fd\u4ee5 JSON Lines \u683c\u5f0f\u5206\u53d1\uff0c\u5e76\u88ab\u5206\u5272\u6210\u591a\u4e2a\u5206\u7247\u3002 \u7531\u4e8e\u4e24\u8005\u6027\u8d28\u4e0d\u540c\uff0c\u8fd9\u4e24\u4e2a\u6570\u636e\u96c6\u7684\u7ed3\u6784\u4e5f\u4e0d\u540c\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#b11-redpajama-v1","title":"B.1.1 RedPajama-V1","text":"<p>RedPajama-V1 \u5305\u542b\u4e03\u4e2a\u9886\u57df\uff0c\u5176\u7ed3\u6784\u4e5f\u76f8\u5e94\u5730\u8fdb\u884c\u4e86\u5212\u5206\u3002 \u9664\u4e86 Common Crawl \u5b50\u96c6\u4e4b\u5916\uff0c\u6bcf\u4e2a\u7ec4\u4ef6\u90fd\u9075\u5faa\u4ee5\u4e0b\u7ed3\u6784\uff1a</p> JSON<pre><code>{\n \"\u6587\u672c\": \"...\", \"meta\" {... }\n}\n</code></pre> <p>\u4e0d\u540c\u6765\u6e90\u7684\u5143\u6570\u636e\u5b57\u6bb5\u5404\u4e0d\u76f8\u540c\uff1a</p> <ul> <li>Arxiv\u5b50\u96c6\u7684\u5143\u6570\u636e\u5b57\u6bb5\u5305\u62ec\u65f6\u95f4\u6233\u3001\u5e74\u6708\u4efd\u3001arxiv_id\u3001\u8bed\u8a00\u548c\u7f51\u5740\u3002</li> <li>C4\u5b50\u96c6\u7684\u5143\u6570\u636e\u5b57\u6bb5\u5305\u62ec\u65f6\u95f4\u6233\u3001\u6765\u6e90\u3001\u8bed\u8a00\u548c\u7f51\u5740\u3002</li> <li>Github\u5b50\u96c6\u7684\u5143\u6570\u636e\u5b57\u6bb5\u5305\u62ec\u5185\u5bb9\u54c8\u5e0c\u503c\u3001\u65f6\u95f4\u6233\u3001\u6765\u6e90\u3001\u884c\u6570\u3001\u6700\u5927\u884c\u957f\u3001\u5e73\u5747\u884c\u957f\u3001\u5b57\u6bcd\u6570\u5b57\u6bd4\u4f8b\u3001\u4ed3\u5e93\u540d\u79f0\u3001ID\u3001\u5927\u5c0f\u3001\u4e8c\u8fdb\u5236\u3001\u526f\u672c\u3001\u5f15\u7528\u3001\u8def\u5f84\u3001\u6a21\u5f0f\u3001\u8bb8\u53ef\u8bc1\u3001\u8bed\u8a00\u3002</li> <li>Stack Exchange\u5b50\u96c6\u7684\u5143\u6570\u636e\u5b57\u6bb5\u5305\u62ec\u65f6\u95f4\u6233\u3001\u6765\u6e90\u3001\u8bed\u8a00\u3001\u95ee\u9898\u5f97\u5206\u548c\u7f51\u5740\u3002</li> <li>\u7ef4\u57fa\u767e\u79d1\u5b50\u96c6\u7684\u5143\u6570\u636e\u5b57\u6bb5\u5305\u62ec\u65f6\u95f4\u6233\u3001\u6807\u9898\u3001\u8bed\u8a00\u548c\u7f51\u5740\u3002</li> </ul> <p>Common Crawl\u5b50\u96c6\u9075\u5faa\u4ee5\u4e0b\u7ed3\u6784\uff1a</p> JSON<pre><code>{\n \"\u6587\u672c\": \"...\",\n \"pred_label\":...,\n \"pred_label_prob\":...,\n \"wiki_prob\":...,\n \"\u6765\u6e90\":\"...\"\n}\n</code></pre>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#b12-redpajama-v2","title":"B.1.2 RedPajama-v2","text":"<p>\u8be5\u6570\u636e\u96c6\u7684\u6838\u5fc3\u7531\u6587\u672c\u6587\u6863\u3001\u8d28\u91cf\u6807\u6ce8\u3001\u91cd\u590dID\u548cMinHash\u7b7e\u540d\u7ec4\u6210\u3002\u5bf9\u4e8e\u6587\u672c\u6587\u6863\uff0c\u5176\u7ed3\u6784\u5728\u5f88\u5927\u7a0b\u5ea6\u4e0a\u9075\u5faaCCNet\u5b9a\u4e49\u7684\u7ed3\u6784\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u7ed9\u5b9aCommonCrawl\u5feb\u7167\u7684\u6587\u6863\u88ab\u5206\u62105000\u4e2a\u5206\u7247\uff0c\u5176\u4e2d\u6587\u4ef6\u540d\u6307\u793a\u5206\u7247\u3001\u6587\u6863\u8bed\u8a00\u548c\u56f0\u60d1\u5ea6\u533a\u95f4\uff08\u5206\u533a\uff09\u3002\u9ad8\u8d28\u91cf\u6807\u6ce8\u3001\u91cd\u590d\u9879\u548c MinHash \u9075\u5faa\u76f8\u540c\u7684\u903b\u8f91\uff0c\u5e76\u53cd\u6620\u539f\u59cb\u6587\u6863\u7684\u6587\u4ef6\u540d\u3002</p> <ul> <li>\u6587\u4ef6\u7ed3\u6784\u3002 \u5305\u542b\u539f\u59cb\u6587\u672c\u6587\u6863\u7684\u6587\u4ef6\u6309\u7167\u4ee5\u4e0b\u6a21\u5f0f\u7ec4\u7ec7\uff1a</li> </ul> Text Only<pre><code>documents/&lt;snapshot_id&gt;/&lt;shard_id&gt;/&lt;lang&gt;_&lt;ppl_bucket&gt;.json.gz\n</code></pre> <p>\u5176\u4e2dsnapshot_id\u5bf9\u5e94\u4e8e RPv2 \u4e2d\u5305\u542b\u7684\u4efb\u4f55\u6293\u53d6\u6570\u636e\uff0cshard_id\u8303\u56f4\u4ece0000\u52304999\uff0clang\u53ef\u4ee5\u662fen, de, fr, es\u6216it\u3002\u6700\u540e\uff0cppl_bucket\u8868\u793a\u6839\u636e\u7ef4\u57fa\u767e\u79d1\u56f0\u60d1\u5ea6\u8fdb\u884c\u7684\u5212\u5206\uff0c\u53ef\u4ee5\u662fhead\u3001middle\u6216tail\u3002\u7c7b\u4f3c\u5730\uff0c\u8d28\u91cf\u4fe1\u53f7\u3001\u91cd\u590d ID \u548c MinHash \u9075\u5faa\u4ee5\u4e0b\u6a21\u5f0f</p> Text Only<pre><code>quality_signals/&lt;snapshot_id&gt;/&lt;shard_id&gt;/&lt;lang&gt;_&lt;ppl_bucket&gt;.signals.json.gz,\nduplicates/&lt;snapshot_id&gt;/&lt;shard_id&gt;/&lt;lang&gt;_&lt;ppl_bucket&gt;.duplicates.parquet,\n</code></pre> <p>\u548c Text Only<pre><code>minhashes/&lt;snapshot_id&gt;/&lt;shard_id&gt;/&lt;lang&gt;_&lt;ppl_bucket&gt;.minhash.parquet.\n</code></pre></p> <p>\u6587\u6863\u7ed3\u6784\u3002 \u8fd9\u4e9bdocuments\u5b58\u50a8\u4e3a Gzip \u538b\u7f29\u7684 JSONL \u6587\u4ef6\uff0c\u5e76\u9075\u5faa\u4ee5\u4e0b\u6a21\u5f0f</p> Text Only<pre><code>{\n\"url\": \"...\" ,\n\" date_download \": \"...\" ,\n\" digest \": \"...\" ,\n\" length \": ...,\n\" nlines \": ...,\n\" source_domain \": \"...\" ,\n\" title \": \"...\" ,\n\" raw_content \": \"...\" ,\n\" cc_segment \": \"...\" ,\n\" original_nlines \": ...,\n\" original_length \": ..,\n\" line_ids \": [ ...],\n\" language \": \"...\" ,\n\" language_score \": ...,\n\" perplexity \": ...,\n\" bucket \": \"...\"\n}\n</code></pre> <p>\u8d28\u91cf\u4fe1\u53f7\u7ed3\u6784\u3002 \u8fd9\u4e9b\u8d28\u91cf\u4fe1\u53f7\u662f\u7ecf\u8fc7Gzip\u538b\u7f29\u7684JSONL\u6587\u4ef6\uff0c\u5e76\u9075\u5faa\u4ee5\u4e0b\u6a21\u5f0f</p> Text Only<pre><code>{\n\"id\": \"...\" ,\n\" id_int \": ...,\n\" metadata \": {\n\" cc_segment \": \"...\" ,\n\" cc_net_source \": \"...\" ,\n\"url\": \"...\" ,\n\" source_domain \": \"...\" ,\n\" language \": \"...\" ,\n\" snapshot_id \": \"...\"\n},\n\"quality_signals \": {\n    \"key\": [[ start , end, score ]]\n    }\n}\n</code></pre> <p>quality_signals\u5b57\u6bb5\u662f\u4e00\u4e2a\u5b57\u5178\uff0c\u5176\u4e2d\u8d28\u91cf\u4fe1\u53f7\u7684\u540d\u79f0\u4f5c\u4e3a\u952e\uff0c\u5143\u7ec4\u5217\u8868\u4f5c\u4e3a\u503c\u3002 \u6bcf\u4e2a\u5143\u7ec4\u5305\u542b\u4e09\u4e2a\u6d6e\u70b9\u6570start\u3001end\u548cscore\uff0c\u6307\u793araw_content\u5b57\u7b26\u4e32\u4e2dscore \u7684\u4f4d\u7f6e\u3002 \u6b64\u8868\u793a\u6cd5\u9075\u5faaDolma [52] \u4e2d\u4f7f\u7528\u7684\u8868\u793a\u6cd5\uff0c\u5e76\u5141\u8bb8\u5355\u4e2a\u8868\u793a\u6cd5\u5bf9\u5e94\u7528\u4e8e\u4e0d\u540c\u6587\u672c\u7c92\u5ea6\u7ea7\u522b\uff08\u4f8b\u5982\uff0c\u884c\u7ea7\u548c\u6587\u6863\u7ea7\uff09\u7684\u8d28\u91cf\u4fe1\u53f7\u8fdb\u884c\u7f16\u7801\u3002</p> <ul> <li> <p>\u91cd\u590dID \u91cd\u590d\u6587\u6863\u7684ID\u5b58\u50a8\u4e3aparquet\u6587\u4ef6\u3002 parquet\u6587\u4ef6\u4e2d\u7684\u6bcf\u4e00\u884c\u5bf9\u5e94\u4e8e\u81f3\u5c11\u5728\u6574\u4e2a\u8bed\u6599\u5e93\u4e2d\u91cd\u590d\u4e00\u6b21\u7684\u6587\u6863\u3002 \u6211\u4eec\u5f3a\u8c03\uff0c\u8fd9\u5e76\u4e0d\u5305\u62ec\u5177\u6709\u540e\u7eed\u91cd\u590d\u9879\u7684\u6587\u6863\u7684\u7b2c\u4e00\u6b21\u51fa\u73b0\u3002 \u6362\u53e5\u8bdd\u8bf4\uff0c\u5982\u679c\u5220\u9664\u91cd\u590d\u5217\u8868\u4e2d\u51fa\u73b0\u7684\u6bcf\u4e2a\u6587\u6863\uff0c\u5219\u6bcf\u4e2a\u6587\u6863\u96c6\u7fa4\u7684\u4e00\u4e2a\u6210\u5458\u4fdd\u7559\u5728\u6570\u636e\u96c6\u4e2d\u3002</p> </li> <li> <p>\u6700\u5c0f\u54c8\u5e0c \u6700\u5c0f\u54c8\u5e0c\u7b7e\u540d\u5b58\u50a8\u5728parquet\u6587\u4ef6\u4e2d\uff0c\u5e76\u88ab\u5212\u5206\u6210\u591a\u4e2aband\u548crows\uff0c\u5bf9\u5e94\u4e8e \\(\\{.7, 0.8, 0.9, 1.0\\}\\) \u8303\u56f4\u5185\u7684\u4e0d\u540c\u7ea7\u522b\u7684Jaccard\u76f8\u4f3c\u5ea6\u3002</p> </li> </ul>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#credpajama-v1","title":"\u9644\u5f55 CRedPajama-V1","text":"<p>\u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u63d0\u4f9b\u4e86RedPajama-V1\u6570\u636e\u96c6\u7684\u66f4\u591a\u7ec6\u8282\u548c\u7ed3\u679c\u3002</p>"},{"location":"%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86/redpajama/RedPajama_an_Open_Dataset_for_Training_Large_Language_Models/#c1github","title":"C.1\u4eceGitHub\u83b7\u53d6\u7684\u4ee3\u7801\u7684\u8fc7\u6ee4\u542f\u53d1\u5f0f\u65b9\u6cd5","text":"<p>\u6b63\u5982\u672c\u6587\u4e3b\u8981\u90e8\u5206\u6240\u8ff0\uff0c\u6211\u4eec\u901a\u8fc7\u4ec5\u4fdd\u7559Apache\u3001BSD\u548cMIT\u8bb8\u53ef\u8bc1\u4e0b\u7684\u9879\u76ee\u6765\u8fc7\u6ee4\u539f\u59cbGitHub\u6570\u636e\u96c6\uff0c\u5e76\u989d\u5916\u5e94\u7528\u7c7b\u4f3c\u4e8eThe Stack\u6570\u636e\u96c6[25]\u4e2d\u4f7f\u7528\u7684\u8fc7\u6ee4\u542f\u53d1\u5f0f\u65b9\u6cd5\u3002 \u5177\u4f53\u6765\u8bf4\uff0c\u6211\u4eec\u5e94\u7528\u4ee5\u4e0b\u542f\u53d1\u5f0f\u65b9\u6cd5\u96c6\uff0c\u5220\u9664\u4efb\u4f55\u5177\u6709\u4ee5\u4e0b\u5c5e\u6027\u7684\u6587\u4ef6\uff1a</p> <p>\u2022 \u6700\u5927\u884c\u957f\u8d85\u8fc71000\u4e2a\u5b57\u7b26\u3002 \u2022 \u5e73\u5747\u884c\u957f\u8d85\u8fc7100\u4e2a\u5b57\u7b26\u3002 \u2022 \u5b57\u6bcd\u6570\u5b57\u5b57\u7b26\u7684\u6bd4\u4f8b\u5c0f\u4e8e0.25\u3002 \u2022 \u5b57\u6bcd\u5b57\u7b26\u6570\u91cf\u4e0e\u7b26\u5143\u6570\u91cf\u4e4b\u6bd4\u5c0f\u4e8e1.5\u3002 \u2022 \u6269\u5c55\u540d\u4e0d\u5728\u4ee5\u4e0b\u767d\u540d\u5355\u6269\u5c55\u540d\u96c6\u5408\u4e2d\uff1a .asm, .bat, .cmd, .c, .h, .cs, .cpp, .hpp, .c++, .h++, .cc, .hh, .C, .H, .cmake, .css, .dockerfile, .f90, .f, .f03, .f08, .f77, .f95, .for, .fpp, .go, .hs, .html, .java, .js, .jl, .lua, .md, .markdown, .php, .php3, .php4, .php5, .phps, .phpt, .pl, .pm, .pod, .perl, .ps1, .psd1, .psm1, .py, .rb, .rs, .sql, .scala, .sh, .bash, .command, .zsh, .ts, .tsx, .tex, .vb, Dockerfile, Makefile, .xml, .rst, .m, .smali C.2RedPajama-INCITE \u5927\u8bed\u8a00\u6a21\u578b\u7684\u8be6\u7ec6\u8bc4\u4f30 \u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u63d0\u4f9b\u4e86\u5728RedPajama-V1\u6570\u636e\u96c6\u4e0a\u8bad\u7ec3\u7684RedPajama-INCITE 3B\u548c7B\u5927\u8bed\u8a00\u6a21\u578b\u7684\u8be6\u7ec6\u57fa\u51c6\u5206\u6570\u3002</p> <p>Refer to caption \u56fe2\uff1a RedPajama-INCITE-Base 3B \u6a21\u578b\u5728 lm-evaluation-harness \u5b50\u96c6\u4e0a\u7684\u7ed3\u679c\u3002 \u8fd9\u4e9b\u4efb\u52a1\u7684\u9009\u62e9\u662f\u6839\u636e\u8bc4\u4f30 Pythia [4] \u548c GPT-J [59] \u6240\u505a\u7684\u9009\u62e9\u8fdb\u884c\u7684\u3002 \u8868 7\uff1a RedPajama-INCITE-Base-3B-v1 \u6a21\u578b\u5728 lm-evaluation-harness \u5b50\u96c6\uff08\u96f6\u6837\u672c\uff09\u548c HELM \u4e0a\u7684\u7ed3\u679c\uff0c\u4e0e\u53c2\u6570\u6570\u91cf\u76f8\u4f3c\u7684\u6a21\u578b\u8fdb\u884c\u4e86\u6bd4\u8f83\u3002 \u6bcf\u4e2a\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u5f97\u5206\u6700\u9ad8\u7684\u6a21\u578b\u4ee5\u7c97\u4f53\u663e\u793a\u3002 Lambada OpenAi (acc)</p> <p>Hellaswag (acc_norm)</p> <p>Winogrande (acc)</p> <p>Piqa (acc)     Avg.    HELM avg. GPT-Neo 0.6223  0.5579  0.5769  0.7219  0.6197  0.3570 Pythia-2.8B 0.6466  0.5933  0.6006  0.7399  0.6451  0.3770 Pythia-2.8B-dedup   0.6524  0.5941  0.5848  0.7404  0.6429  - RedPajama-INCITE-Base-3B-v1 0.6541  0.6317  0.6322  0.7470  0.6662  0.4060</p> <p>\u8868 8\uff1a RedPajama-INCITE-Base-7B-v1 \u6a21\u578b\u4ee5\u53ca\u6307\u4ee4\u5fae\u8c03\u540e\u7684\u6a21\u578b\u5728 HELM \u57fa\u51c6\u6d4b\u8bd5\u4e0a\u7684\u7ed3\u679c\u3002 \u6bcf\u4e2a\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u5f97\u5206\u6700\u9ad8\u7684\u6a21\u578b\u4ee5\u7c97\u4f53\u663e\u793a\u3002 Model   RedPajama 7B Instruct     Llama 7B    MPT 7B  Falcon 7B   RedPajama 7B Base     GPT J   Falcon 7B Instruct     Pythia 7B   Dolly v2    MPT 7B Instruct</p> <p>Stablelm Alpha 7B</p> <p>HELM-AVG    0.492   0.472   0.444   0.441   0.431   0.417   0.407   0.400   0.396   0.393   0.288 MMLU - EM   0.366   0.345   0.294   0.285   0.323   0.249   0.271   0.266   0.238   0.349   0.293 BoolQ - EM  0.697   0.751   0.731   0.770   0.694   0.649   0.708   0.656   0.602   0.442   0.537 NarrativeQA - F1    0.623   0.524   0.541   0.549   0.512   0.545   0.381   0.427   0.441   0.220   0.218 NaturalQuestions (closed-book) - F1 0.229   0.297   0.284   0.289   0.258   0.156   0.192   0.141   0.133   0.247   0.077 NaturalQuestions (open-book) - F1   0.654   0.580   0.603   0.574   0.600   0.559   0.453   0.549   0.535   0.627   0.317 QuAC - F1   0.252   0.332   0.343   0.322   0.323   0.330   0.300   0.306   0.299   0.352   0.218 HellaSwag - EM  0.698   0.747   0.754   0.732   0.702   0.663   0.690   0.653   0.692   0.763   0.421 OpenbookQA - EM 0.488   0.574   0.540   0.546   0.504   0.514   0.498   0.496   0.516   0.532   0.394 TruthfulQA - EM 0.226   0.297   0.186   0.206   0.205   0.199   0.203   0.225   0.250   0.188   0.209 MS MARCO (regular) - RR@10  0.391   0.252   0.161   0.169   0.135   0.152   0.225   0.159   0.160   0.161   0.110 MS MARCO (TREC) - NDCG@10   0.709   0.482   0.369   0.362   0.322   0.345   0.481   0.342   0.359   0.387   0.253 CNN/DailyMail - ROUGE-2 0.143   0.149   0.137   0.147   0.137   0.131   0.114   0.101   0.140   0.148   0.045 XSUM - ROUGE-2  0.101   0.127   0.107   0.116   0.114   0.096   0.071   0.079   0.074   0.101   0.037 IMDB - EM   0.941   0.933   0.903   0.893   0.916   0.939   0.906   0.930   0.907   0.891   0.627 CivilComments - EM  0.667   0.578   0.525   0.511   0.536   0.520   0.516   0.527   0.520   0.270   0.490 RAFT - EM   0.682   0.583   0.618   0.586   0.611   0.619   0.498   0.542   0.466   0.616   0.368</p> <p>\u8868 9\uff1a RedPajama-INCITE-Base-7B-v1 \u6a21\u578b\u4ee5\u53ca\u6307\u4ee4\u5fae\u8c03\u6a21\u578b\u5728 LM \u8bc4\u4f30\u5de5\u5177\u7bb1\u4e0a\u7684\u7ed3\u679c\u3002 \u6bcf\u4e2a\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u5f97\u5206\u6700\u9ad8\u7684\u6a21\u578b\u4ee5\u7c97\u4f53\u663e\u793a\u3002 MPT 7B Instruct     Falcon 7B   MPT 7B  RedPajama 7B Base     Llama 7B    RedPajama 7B Instruct</p> <p>Falcon 7B Instruct     Dolly v2    GPT-J   Pythia 7B   StableLM Alpha 7B</p> <p>LM-eval-harness-AVG 0.7195  0.7161  0.7100  0.6882  0.6881  0.6858  0.6813  0.6557  0.6526  0.6392  0.5260 arc_challenge (acc_norm)    0.4462  0.4326  0.4215  0.3925  0.4147  0.4078  0.4283  0.4027  0.3660  0.3532  0.2705 arc_easy (acc)  0.7218  0.7096  0.7008  0.6923  0.5253  0.7159  0.6789  0.6423  0.6225  0.6338  0.4487 boolq (acc) 0.7425  0.7361  0.7486  0.707   0.7315  0.6865  0.7089  0.6502  0.6544  0.6446  0.6006 copa (acc)  0.9000  0.8600  0.8500  0.880   0.8500  0.850   0.8400  0.8600  0.8300  0.7400  0.7500 hellaswag (acc_norm)    0.7717  0.7634  0.7626  0.7037  0.7620  0.7103  0.6978  0.6896  0.6625  0.6588  0.4122 lambada_openai (acc)    0.6918  0.7467  0.7056  0.7143  0.7360  0.6895  0.6831  0.6893  0.6831  0.6441  0.6379 piqa (acc_norm) 0.8041  0.8069  0.8052  0.7737  0.7810  0.7699  0.7856  0.7486  0.7617  0.7671  0.6736 winogrande (acc)    0.6780  0.6732  0.6859  0.6417  0.7040  0.6567  0.6669  0.6140  0.6409  0.6267  0.5012</p> <p>C.3RedPajama-V1 \u6570\u636e\u96c6\u6784\u5efa\u4e2d\u4e0d\u786e\u5b9a\u6027\u7684\u8be6\u7ec6\u6765\u6e90 \u886810\u8be6\u7ec6\u6982\u8ff0\u4e86 RedPajama-V1 \u6570\u636e\u96c6\u6784\u5efa\u8fc7\u7a0b\u4e2d\u51fa\u73b0\u7684\u5404\u79cd\u4e0d\u786e\u5b9a\u6027\u6765\u6e90\u3002 \u8fd9\u4e9b\u4e0d\u786e\u5b9a\u6027\u4e3b\u8981\u6e90\u4e8e[57]\u4e2d\u5173\u4e8e\u6570\u636e\u96c6\u7684\u7ec6\u8282\u7f3a\u4e4f\u3002 \u4ece\u6b64\u5217\u8868\u53ef\u4ee5\u770b\u51fa\uff0cRedPajama-V1 \u548c\u7528\u4e8e\u8bad\u7ec3 Llama-1 \u6a21\u578b\u7684\u6570\u636e\u96c6\u4e4b\u95f4\u53ef\u80fd\u5b58\u5728\u4e0d\u5339\u914d\u3002 \u6211\u4eec\u8ba4\u4e3a\u8fd9\u662f\u5bfc\u81f4 RedPajama-INCITE \u548c LLaMA-1 \u6027\u80fd\u4e0d\u5339\u914d\u7684\u91cd\u8981\u56e0\u7d20\u3002</p> <p>\u8868 10\uff1a RedPajama-V1 \u6570\u636e\u96c6\u6784\u5efa\u8fc7\u7a0b\u4e2d\u4e0d\u540c\u4e0d\u786e\u5b9a\u6027\u548c\u51b3\u7b56\u7684\u6982\u8ff0\u3002 Subset</p> <p>Uncertainty Decision CommonCrawl</p> <p>Which snapshots were used? We use the first snapshot from 2019 to 2023. What classifier was used, and how was it constructed?</p> <p>We use a fasttext classifier with unigram features and use 300k training samples. What threshold was used to classify a sample as high quality?</p> <p>We set the threshold to match the token count reported in LLama. GitHub</p> <p>Quality filtering heuristics We remove any file   \u2022  with a maximum line length of more than 1000 characters.   \u2022  with an average line length of more than 100 characters.   \u2022  with a proportion of alphanumeric characters of less than 0.25.   \u2022  with a ratio between the number of alphabetical characters and the number of tokens of less than 1.5.   \u2022  whose extension is not in the following set of whitelisted extensions: .asm, .bat, .cmd, .c, .h, .cs, .cpp, .hpp, .c++, .h++, .cc, .hh, .C, .H, .cmake, .css, .dockerfile, .f90, .f, .f03, .f08, .f77, .f95, .for, .fpp, .go, .hs, .html, .java, .js, .jl, .lua, .md, .markdown, .php, .php3, .php4, .php5, .phps, .phpt, .pl, .pm, .pod, .perl, .ps1, .psd1, .psm1, .py, .rb, .rs, .sql, .scala, .sh, .bash, .command, .zsh, .ts, .tsx, .tex, .vb, Dockerfile, Makefile, .xml, .rst, .m, .smali Wikipedia</p> <p>Which Wikipedia dump was used? We used the most recent at the time of data curation (2023-03-20). Books</p> <p>How were the books deduplicated? We use SimHash to perform near deduplication.</p> <p>\u9644\u5f55 DRedPajama-V2 \u672c\u8282\u63d0\u4f9b RedPajama-V2 \u7f51\u7edc\u6570\u636e\u96c6\u7684\u989d\u5916\u5206\u6790\u548c\u7edf\u8ba1\u6570\u636e\uff0c\u5e76\u9488\u5bf9\u5728\u4e0d\u540c\u8fc7\u6ee4\u5b50\u96c6\u4e0a\u8bad\u7ec3\u7684\u6d88\u878d\u6a21\u578b\u5448\u73b0\u8be6\u7ec6\u7ed3\u679c\u3002</p> <p>D.1\u53bb\u91cd\u65b9\u6cd5\u7684\u6c47\u603b\u7edf\u8ba1\u6570\u636e \u5728\u56fe 3 \u4e2d\uff0c\u6211\u4eec\u770b\u5230 head+middle \u5206\u533a\u4e2d\u7684\u6587\u6863\u6570\u91cf\u5982\u4f55\u968f\u7740\u6bcf\u6b21\u722c\u53d6\u65f6\u95f4\u7684\u53d8\u5316\u800c\u53d8\u5316\u3002 \u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u76f4\u5230 2018 \u5e74\uff0c\u6587\u6863\u6570\u91cf\u76f8\u5bf9\u7a33\u5b9a\uff0c\u800c\u5728 2014 \u5e74\u5230 2016 \u5e74\u4e4b\u95f4\uff0c\u6587\u6863\u6570\u91cf\u660e\u663e\u51cf\u5c11\uff08\u4f8b\u5982\uff0c\u5fb7\u8bed\u6587\u6863\u51cf\u5c11\u4e86 10 \u500d\uff09\u3002 \u540c\u6837\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u552f\u4e00\u6587\u6863\u6570\u91cf\u968f\u65f6\u95f4\u7684\u53d8\u5316\u60c5\u51b5\uff08\u865a\u7ebf\uff09\u3002 \u5177\u4f53\u6765\u8bf4\uff0c\u7531\u4e8e\u6211\u4eec\u4ece\u6700\u65b0\u7684\u5feb\u7167\u5230\u6700\u65e7\u7684\u5feb\u7167\u8fd0\u884c\u53bb\u91cd\uff0c\u9884\u671f\u8bed\u6599\u5e93\u4e2d\u552f\u4e00\u6587\u6863\u7684\u6570\u91cf\u4f1a\u8d8a\u6765\u8d8a\u5c11\uff0c\u8fd9\u53ef\u4ee5\u4ece\u56fe 3 \u4e2d\u89c2\u5bdf\u5230\uff08\u6ce8\u610f\u5bf9\u6570\u523b\u5ea6\uff09\u3002 \u7136\u800c\uff0c\u503c\u5f97\u6307\u51fa\u7684\u662f\uff0c\u5728 2014 \u5e74\u5230 2017 \u5e74\u4e4b\u95f4\u7684\u722c\u53d6\u4e2d\uff0c\u552f\u4e00\u6587\u6863\u6570\u91cf\u7a81\u7136\u4e0b\u964d\u3002 \u6211\u4eec\u8ba4\u4e3a\uff0c\u8fd9\u53ef\u4ee5\u7528 CommonCrawl \u7f51\u7edc\u722c\u866b\u5728\u8be5\u671f\u95f4\u4f7f\u7528\u7684\u79cd\u5b50\u5217\u8868\u4e0d\u540c\u6765\u89e3\u91ca\u3002</p> <p>Refer to caption \u56fe 3\uff1a \u53bb\u91cd\u524d\u540e\u6bcf\u4e2a CommonCrawl \u5feb\u7167\u7684\u6587\u6863\u65f6\u95f4\u987a\u5e8f\u8ba1\u6570\u3002 \u53bb\u91cd\u662f\u987a\u5e8f\u6267\u884c\u7684\uff0c\u4ece\u6700\u65b0\u7684\u5feb\u7167\u5f00\u59cb\uff0c\u8fed\u4ee3\u5230\u6700\u65e7\u7684\u5feb\u7167\u3002 D.2\u8d28\u91cf\u4fe1\u53f7 \u672c\u8282\u63d0\u4f9b\u5173\u4e8e RedPajama-V2 \u6570\u636e\u96c6\u4e00\u90e8\u5206\u7684\u8d28\u91cf\u4fe1\u53f7\u7684\u66f4\u591a\u7ec6\u8282\u548c\u7edf\u8ba1\u6570\u636e\u3002</p> <p>D.2.1\u53ef\u7528\u8d28\u91cf\u4fe1\u53f7\u6982\u8ff0 \u8d28\u91cf\u4fe1\u53f7\u96c6\u53ef\u4ee5\u5206\u4e3a\u4ee5\u4e0b\u51e0\u7c7b\uff1a\u6d4b\u91cf\u81ea\u7136\u8bed\u8a00\uff08\u886812\uff09\u3001\u6587\u672c\u7684\u91cd\u590d\u6027\uff08\u886814\uff09\u3001\u57fa\u4e8e\u6587\u672c\u5185\u5bb9\uff08\u886815\uff09\uff0c\u6216\u57fa\u4e8e\u57fa\u4e8e\u673a\u5668\u5b66\u4e60\u7684\u542f\u53d1\u5f0f\u65b9\u6cd5\uff08\u886813\uff09\u3002 \u6b64\u5916\uff0c\u6211\u4eec\u8fd8\u5728\u886811\u4e2d\u603b\u7ed3\u4e86\u7531CCNet\u7ba1\u9053\u8ba1\u7b97\u7684\u8d28\u91cf\u4fe1\u53f7\u3002</p> <p>\u886811\uff1a \u6765\u81eaCCNet\u7ba1\u9053\u7684\u8d28\u91cf\u4fe1\u53f7[61]\u3002 Annotation Tag  Description ccnet_bucket    head, middle or tail bucket of the perplexity score ccnet_language_score    score of the language identification model ccnet_length    number of characters ccnet_nlines    number of lines ccnet_original_length   number of characters before line-level deduplication ccnet_original_nlines   number of lines before line-level deduplication ccnet_perplexity    perplexity of an LM trained on Wikipedia \u886812\uff1a \u8861\u91cf\u6587\u6863\u4e0e\u81ea\u7136\u8bed\u8a00\u5bf9\u5e94\u7a0b\u5ea6\u7684\u8d28\u91cf\u4fe1\u53f7\u6458\u8981\u3002 Annotation Tag  Description Reference(s) rps_doc_curly_bracket   The ratio between the number of occurrences of \u2019{\u2019 or \u2019}\u2019 and the number of characters in the raw text.     [46] rps_doc_frac_all_caps_words The fraction of words in the content that only consist of uppercase letters. This is based on the raw content.     [34] rps_doc_frac_lines_end_with_ellipsis    The fraction of lines that end with an ellipsis, where an ellipsis is defined as either \"\u2026\" or \"U+2026\".     [44, 45] rps_doc_frac_no_alph_words  The fraction of words that contain no alphabetical character.     [44, 45] rps_doc_lorem_ipsum The ratio between the number of occurrences of \u2019lorem ipsum\u2019 and the number of characters in the content after normalisation.     [46] rps_doc_mean_word_length    The mean length of words in the content after normalisation.     [44, 45] rps_doc_stop_word_fraction  The ratio between the number of stop words and the number of words in the document. Stop words are obtained from https://github.com/6/stopwords-json.     [44, 45] rps_doc_symbol_to_word_ratio    The ratio of symbols to words in the content. Symbols are defined as U+0023 (#), \"\u2026\", and U+2026.     [44, 45] rps_doc_frac_unique_words   The fraction of unique words in the content. This is also known as the degeneracy of a text sample. Calculated based on the normalised content.     [34] rps_doc_unigram_entropy The entropy of the unigram distribution of the content. This measures the diversity of the content and is computed using \u2211 x \u2212 x n \u22c5 log \u2061 ( 1 n ) where the sum is taken over counts of unique words in the normalised content.     - rps_doc_word_count  The number of words in the content after normalisation.     [44, 45] rps_lines_ending_with_terminal_punctution_mark  Indicates whether a line ends with a terminal punctuation mark. A terminal punctuation mark is defined as one of: \".\", \"!\", \"?\", \"\u201d\".     [46] rps_lines_javascript_counts The number of occurrences of the word \"javascript\" in each line.     [46] rps_lines_num_words The number of words in each line. This is computed based on the normalised text.     [46, 44] rps_lines_numerical_chars_fraction  The ratio between the number of numerical characters and total number of characters in each line. This is based on the normalised content.     [44] rps_lines_start_with_bulletpoint    Whether the lines that start with a bullet point symbol. The following set of unicodes are considered a bullet point: U+2022 (bullet point), U+2023 (triangular bullet point), U+25B6 (black right pointing triangle), U+25C0 (black left pointing triangle), U+25E6 (white bullet point), U+2013 (en dash) U+25A0 (black square), U+25A1 (white square), U+25AA (black small square), U+25AB (white small square).     [43, 45] rps_lines_uppercase_letter_fraction The ratio between the number of uppercase letters and total number of characters in each line. This is based on the raw text.     [44] rps_doc_num_sentences   The number of sentences in the content.     [46]</p> <p>\u886813\uff1a \u57fa\u4e8e\u673a\u5668\u5b66\u4e60\u542f\u53d1\u5f0f\u7684\u8d28\u91cf\u4fe1\u53f7\u3002 Annotation Tag  Description Reference(s) rps_doc_books_importance    Given a bag of 1,2-wordgram model trained on Books  p , and a model trained on the source domain  q , This is the logarithm of the ratio  p / q .     [62] rps_doc_openwebtext_importance  Given a bag of 1,2-wordgram model trained on OpenWebText  p , and a model trained on the source domain  q , this is the logarithm of the ratio  p / q .     [62] rps_doc_wikipedia_importance    Given a bag of 1,2-wordgram model trained on Wikipedia articles  p , and a model trained on the source domain  q , this is the logarithm of the ratio  p / q .     [62] rps_doc_ml_wikiref_score    Fasttext classifier prediction for the document being a Wikipedia reference. This is the same fasttext model used in the RedPajama-1T dataset. Only applies to English data.     [57] rps_doc_ml_palm_score   Fasttext classifier prediction for the document being a Wikipedia article, OpenWebText sample or a RedPajama-V1 book. Only for English data.     [12], [16] rps_doc_ml_wikipedia_score  Fasttext classifier prediction for the document being a Wikipedia article. This is used for non-English data     -</p> <p>\u886814\uff1a \u8861\u91cf\u6587\u672c\u91cd\u590d\u7a0b\u5ea6\u7684\u8d28\u91cf\u4fe1\u53f7\u6458\u8981\u3002 Annotation Tag  Description Reference(s) rps_doc_frac_chars_dupe_10grams The fraction of characters in duplicate word 10grams.   [43, 45] rps_doc_frac_chars_dupe_5grams  The fraction of characters in duplicate word 5grams.    [43, 45] rps_doc_frac_chars_dupe_6grams  The fraction of characters in duplicate word 6grams.    [43, 45] rps_doc_frac_chars_dupe_7grams  The fraction of characters in duplicate word 7grams.    [43, 45] rps_doc_frac_chars_dupe_8grams  The fraction of characters in duplicate word 8grams.    [43, 45] rps_doc_frac_chars_dupe_9grams  The fraction of characters in duplicate word 9grams.    [43, 45] rps_doc_frac_chars_top_2gram    The fraction of characters in the top word 2gram.   [43, 45] rps_doc_frac_chars_top_3gram    The fraction of characters in the top word 3gram.   [43, 45] rps_doc_frac_chars_top_4gram    The fraction of characters in the top word 4gram.   [43, 45]</p> <p>\u886815\uff1a \u57fa\u4e8e\u6587\u672c\u5185\u5bb9\uff0c\u6d4b\u91cf\u6bd2\u6027\u7684\u8d28\u91cf\u4fe1\u53f7\u6458\u8981\u3002 Annotation Tag  Description Reference(s) rps_doc_ldnoobw_words   The number of sequences of words that are contained in the List-of-Dirty-Naughty-Obscene-and-Otherwise-Bad-Words blocklist. The blocklist is obtained from https://github.com/LDNOOBW/List-of-Dirty-Naughty-Obscene-and-Otherwise-Bad-Words.     [46] rps_doc_ut1_blacklist   A categorical id corresponding to the list of categories of the domain of the document. Categories are obtained from https://dsi.ut-capitole.fr/blacklists/     [44]</p> <p>D.2.2\u76f4\u65b9\u56fe \u8d28\u91cf\u4fe1\u53f7\u5206\u5e03\u7684\u76f4\u65b9\u56fe\u5982\u56fe4\u30015\u30016\u548c7\u6240\u793a\u3002 \u8fd9\u4e9b\u7edf\u8ba1\u6570\u636e\u6765\u81ea2023\u5e746\u6708\u7684\u5feb\u7167\uff0c\u4ec5\u9488\u5bf9\u82f1\u6587\u6570\u636e\u8ba1\u7b97\u3002</p> <p>Refer to caption Refer to caption Refer to caption Refer to caption Refer to caption Refer to caption \u56fe4\uff1a CCNet [61] \u7ba1\u9053\u8ba1\u7b97\u7684\u8d28\u91cf\u4fe1\u53f7\u76f4\u65b9\u56fe\u3002 Refer to caption Refer to caption Refer to caption Refer to caption Refer to caption \u56fe5\uff1a \u57fa\u4e8e\u673a\u5668\u5b66\u4e60\u7684\u8d28\u91cf\u4fe1\u53f7\u76f4\u65b9\u56fe\u3002 Refer to caption Refer to caption Refer to caption Refer to caption Refer to caption Refer to caption Refer to caption Refer to caption Refer to caption Refer to caption Refer to caption Refer to caption Refer to caption Refer to caption Refer to caption Refer to caption Refer to caption \u56fe6\uff1a \u57fa\u4e8e\u81ea\u7136\u8bed\u8a00\u7684\u8d28\u91cf\u4fe1\u53f7\u76f4\u65b9\u56fe\u3002 Refer to caption Refer to caption Refer to caption Refer to caption Refer to caption Refer to caption Refer to caption Refer to caption Refer to caption \u56fe7\uff1a \u7528\u4e8e\u8861\u91cf\u6587\u672c\u91cd\u590d\u6027\u7684\u8d28\u91cf\u4fe1\u53f7\u76f4\u65b9\u56fe\u3002 D.3\u57fa\u4e8e\u5d4c\u5165\u7684\u805a\u7c7b \u4e3a\u4e86\u57fa\u4e8e\u6587\u672c\u6587\u6863\u7684\u8bed\u4e49\u8ba1\u7b97\u805a\u7c7b\uff0c\u6211\u4eec\u4eceRedPajama-V2\u6570\u636e\u96c62021\u5e744\u6708\u672a\u8fc7\u6ee4\u5feb\u7167\u4e2d\u968f\u673a\u62bd\u53d6\u4e862,000,000\u4e2a\u6587\u6863\uff0c\u5e76\u4f7f\u7528Alibaba-NLP gte-large-en-v1.5\u6a21\u578b[32]\u8ba1\u7b97\u6bcf\u4e2a\u6587\u6863\u4e2d\u95f48,192\u4e2a\u7b26\u5143\u7684\u5d4c\u5165\u3002 \u6211\u4eec\u4f7f\u7528Nomic Atlas [41]\u8fdb\u884c\u805a\u7c7b\u548c\u4e3b\u9898\u5efa\u6a21\u5206\u6790\u3002 \u805a\u7c7b\u548c\u76f8\u5173\u4e3b\u9898\u7684\u6982\u8ff0\u5982\u56fe8\u6240\u793a\u3002 6\u4e2a\u968f\u673a\u62bd\u53d6\u7684\u6587\u6863\uff0c\u4ee5\u53ca\u5b83\u4eec\u5bf9\u5e94\u7684\u805a\u7c7b\u4e3b\u9898\u548c\u6bcf\u4e2a\u6587\u6863\u4e2d1000\u4e2a\u5b57\u7b26\u7684\u5b50\u4e32\uff08\u4ece\u968f\u673a\u7a7a\u683c\u5b57\u7b26\u4e4b\u540e\u5f00\u59cb\uff09\uff0c\u5982\u886816\u548c\u886817\u6240\u793a\u3002</p> <p>Refer to caption \u56fe8\uff1a RedPajama-V2\u6570\u636e\u96c6\u4e2d\u51fa\u73b0\u7684\u4e3b\u9898\u805a\u7c7b\u7684\u53ef\u89c6\u5316\u3002 \u8fd9\u4e9b\u805a\u7c7b\u662f\u57fa\u4e8e200\u4e07\u4e2a\u672a\u8fc7\u6ee4\u76842021\u5e744\u6708\u5feb\u7167\u6587\u6863\u7684gte-large-en-v1.5\u5d4c\u5165\u5728Nomic Atlas [41]\u4e2d\u8ba1\u7b97\u7684\u3002 \u8868 16\uff1a Nomic Atlas [41] \u4e2d\u7684\u6587\u6863\u793a\u4f8b\u53ca\u5176\u5bf9\u5e94\u7684\u805a\u7c7b\u4e3b\u9898\u3002 Cluster Topics</p> <p>Document (broad - medium - specific)</p> <p>Election - Health (2) - COVID Testing</p> <p>immediately moving to the Purple Tier. This is the most restrictive level in the State\u2019s effort to control the spread of COVID-19. Businesses and residents must comply with the Purple Tier restrictions by Tuesday, Nov. 17. To determine restrictions by industry, business and activity, visit: https://covid19.ca.gov/safer-economy/ Read the full news release here: www.gov.ca.gov/2020/11/16/governor-newsom-announces-new-immediate-actions-to-curb-covid-19-transmission/ Watch the Governor\u2019s press conference during which he made the announcement today here: www.facebook.com/CAgovernor/videos/376746553637721 According to County of Orange officials, schools that have not already opened must continue with remote classes and cannot reopen in-person. Read the County\u2019s release here: https://cms.ocgov.com/civicax/filebank/blobdload.aspx?BlobID=118441 The California Department of Public Health has also issued a travel advisory encouraging Californians to stay home or in their region and avoid non-esse Religion/Spirituality - Gaming - Gaming (3)</p> <p>Top 100 Employers, and one of Canada\u2019s Top Employers for Young People multiple years running! At Ubisoft Toronto, we look for people who are excited to create the future of games in one of the most diverse cities in the world. We believe that embracing our differences helps us build stronger creative teams and develop better games for all players. We are an equal-opportunity employer and welcome applications from all interested candidates. We strongly encourage applications from Indigenous people, racialized people, neurodivergent people, people with disabilities, people from gender and sexually diverse communities and/or people with intersectional identities. We are committed to providing reasonable accommodation for people with disability upon request. If this sounds like your kind of studio, what are you waiting for? Apply to join us now! We thank you for your interest, however, only those candidates selected for an interview will be contacted. No agencies please. Senior Game Design Education - Golf - Rotary Meetings</p> <p>what\u2019s happening. Conversely, some people rely on the newsletter. Thus, the more avenues to inform people, the better. attendance at many social functions is poor, possibly due to the limited advertising reach. In practical terms, it means that social functions may be advertised in the OOC newsletter (current practice) the schedule, as is done for outdoor activities such as hikes the OOC\u2019s Facebook group As when social functions are advertised in the newsletter, the person organizing the social function can choose how much location information to provide, especially if it is to be held at someone\u2019s residence. OOC bylaw Article 3, Section 9 (f) states (highlighting added) (f) Social Coordinator: Shall be responsible for coordinating all social events for Club members only, and for preparing a schedule of these outings, not to be advertised to non-members. The executive voted to amend this statement by removing the limitation per Paragraph 3 of \"Article 5 - Amending Formula\" of the Const</p> <p>\u8868 17\uff1a Nomic Atlas [41] \u4e2d\u7684\u6587\u6863\u793a\u4f8b\u53ca\u5176\u5bf9\u5e94\u7684\u805a\u7c7b\u4e3b\u9898\u3002 Cluster Topics</p> <p>Document (broad - medium - specific)</p> <p>Online Privacy - Privacy Policy - Contracts</p> <p>shall be governed by the laws of the Federal Republic of Germany under exclusion of the UN Convention on the International Sale of Goods (CISG), without prejudice to any mandatory conflict of laws and consumer protection provisions. 11.2 If the Customer is an entrepreneur according to Sec. 14 German Civil Code (\u201cBGB\u201d), a legal person under public law or a special fund under public law the courts at the place of business of the vendor shall have exclusive jurisdiction in respect of all disputes arising out of or in connection with the relevant contract. 11.3 In the event that one or more provisions of the contract should be or become invalid or unenforceable, the validity of the remaining provisions shall not be affected thereby. The invalid or unenforceable provision shall be deemed to be replaced - as existent - with statutory provisions. In case of an unacceptable rigor to one of the parties, the contract shall be deemed invalid as a whole. 11.4 In case of deviations of these General Religion/Spirituality - Film/Movie - Movie</p> <p>Movie of Nelson Mandela\u2019s life premieres in South Africa Nov. 04 - Stars Idris Elba and Naomie Harris attend the premiere of \"Mandela: Long Walk to Freedom,\" based on the autobiography of anti-apartheid icon Nelson Mandela. Matthew Stock reports. Election - Election (2) - Healthcare (4)</p> <p>McAuliffe revived that language as an amendment to the budget. He also called on the General Assembly to immediately convene a special joint committee that had been created to assess the impact that repealing the ACA would have had on Virginia. The legislature will gather April 5 to consider the governor\u2019s amendments and vetoes, but leaders said Monday that McAuliffe\u2019s new budget language stands no better chance this time. In a joint statement, the Republican leadership of the House of Delegates said expanding Medicaid would lead to increased costs and eventually blow a hole in the state budget. \u201cThe lack of action in Washington has not changed that and in fact, the uncertainty of federal health policy underscores the need to be cautious over the long term,\u201d the leaders, including House Speaker William J. Howell (R-Stafford) and the man selected to replace him as speaker when he retires next year, Del. Kirk Cox (R-Colonial Heights), said via email. \u201cVirginians can barely afford our cu</p> <p>D.4\u6570\u636e\u6d88\u878d\uff1a\u8be6\u7ec6\u8bc4\u4f30 \u6211\u4eec\u5df2\u7ecf\u5728\u672c\u6587\u7684\u4e3b\u8981\u90e8\u5206\u5c55\u793a\u4e86\u6c47\u603b\u7684\u57fa\u51c6\u5206\u6570\u3002 \u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u63d0\u4f9b\u66f4\u591a\u7ec6\u8282\uff0c\u5e76\u5206\u522b\u62a5\u544a\u6bcf\u4e2a\u4efb\u52a1\u7684\u5206\u6570\u3002 \u7ed3\u679c\u5982\u8868 18\u300119 \u548c 20 \u6240\u793a\u3002</p> <p>\u8868 18\uff1a \u9488\u5bf9\u4e0d\u540c\u6570\u636e\u96c6\u8fc7\u6ee4\u5668\u548c\u5176\u4ed6\u5f3a\u5927\u7684\u7f51\u7edc\u6570\u636e\u96c6\uff0c\u5bf9 468M \u53c2\u6570\u8bed\u8a00\u6a21\u578b\u8fdb\u884c\u7684\u8bc4\u4f30\u3002 \u6bcf\u4e2a\u6307\u6807\u4e2d\u5f97\u5206\u6700\u9ad8\u7684\u6570\u636e\u96c6\u4ee5 bolded underlined\u8868\u793a\uff0c\u5f97\u5206\u7b2c\u4e8c\u9ad8\u7684\u6570\u636e\u96c6\u4ee5\u7c97\u4f53\u8868\u793a\uff0c\u5f97\u5206\u7b2c\u4e09\u9ad8\u7684\u6570\u636e\u96c6\u4ee5 \u659c\u4f53\u4e0b\u5212\u7ebf \u8868\u793a\u3002 Dataset Deduplication   Rule-based  ML Heuristics   Natural Language Inference  Coref. Res. Sentence Completion Exact   Fuzzy   C4  Gopher  Classif.    DSIR    PPL ANLI    ARC-c   ARC-e   Winogrande  Hellaswag   LAMBADA C4                              33.8    22.0    37.0    51.9    32.9    15.5 Dolma-v1.7 CC                               33.5    24.0    38.3    49.6    32.3    17.3 FineWeb                             34.0    23.4    37.7    51.8    32.8    18.1 RefinedWeb                              32.8    22.6    38.3    51.9    31.6    17.8 RPv1-CC                 \u2714 (Wiki-Ref.)           33.9    22.4    37.5    52.6    29.7    19.0 RPv2 (2023-14)                              33.3    22.2    38.5    52.4    31.5    18.2 RPv2 (2023-14)  \u2714                           33.9    22.1    38.1    50.6    31.3    18.0 RPv2 (2023-14)      \u2714       \u2714 (full)                34.1    22.3    38.3    52.2    32.1    18.7 RPv2 (2023-14)      \u2714   \u2714                   33.4    22.7    38.9    51.1    32.4    17.5 RPv2 (2023-14)      \u2714       \u2714 (natlang)         Wiki-middle 33.4    24.2    37.7    49.8    33.1    19.2 RPv2 (2023-14)      \u2714       \u2714 (Rep.)            Wiki-middle 34.2    23.1    37.4    50.8    32.5    18.5 RPv2 (9 Dumps)      \u2714   \u2714                   34.3    23.5    38.6    51.5    32.0    17.2 RPv2 (9 Dumps)      \u2714   \u2714   \u2714 (full)                33.5    23.3    38.4    50.2    32.8    16.8 RPv2 (9 Dumps)      \u2714   \u2714   \u2714 (Rep.)        \u2714 (Palm-mix)        33.8    21.9    38.0    52.5    32.0    17.3 RPv2 (9 Dumps)      \u2714   \u2714   \u2714 (Rep.)    \u2714 (Palm-mix)            34.6    23.3    38.6    52.2    32.7    16.4 RPv2 (9 Dumps)      \u2714   \u2714   \u2714 (natlang) \u2714 (Palm-mix)            34.8    23.0    39.2    53.0    32.3    16.9 RPv2 (9 Dumps)      \u2714   \u2714 (line-filter) \u2714 (natlang) \u2714 (Palm-mix)            33.7    22.9    38.5    50.9    32.3    19.9 RPv2 (9 Dumps)      \u2714   custom-rules    \u2714 (Wiki-Ref.)      P wiki</p> <p>30 33.2    23.0    37.9    49.6    30.1    18.7 RPv2 (9 Dumps)      \u2714   custom-rules + Gopher-Rep   \u2714 (Wiki-Ref.)      P wiki</p> <p>30 33.0    23.8    38.9    50.5    30.0    18.9</p> <p>\u8868 19\uff1a \u5bf9 468M \u53c2\u6570\u8bed\u8a00\u6a21\u578b\u5728 MMLU \u53ca\u5176\u5b50\u4efb\u52a1\u4e0a\u8fdb\u884c\u7684 5-shot \u8bbe\u7f6e\u8bc4\u4f30\u3002 \u6bcf\u4e2a\u6307\u6807\u4e2d\u5f97\u5206\u6700\u9ad8\u7684\u6570\u636e\u96c6\u4ee5 \u7c97\u4f53\u4e0b\u5212\u7ebf\u8868\u793a\uff0c\u5f97\u5206\u7b2c\u4e8c\u9ad8\u7684\u6570\u636e\u96c6\u4ee5\u7c97\u4f53\u8868\u793a\uff0c\u5f97\u5206\u7b2c\u4e09\u9ad8\u7684\u6570\u636e\u96c6\u4ee5 \u659c\u4f53\u4e0b\u5212\u7ebf \u8868\u793a\u3002 Dataset Deduplication   Rule-based  ML Heuristics   MMLU    Stem    Humanities  Other   Social Sciences Exact   Fuzzy   C4  Gopher  Classif.    DSIR    PPL C4                              24.9    26.4    24.1    25.8    23.4 Dolma-v1.7 CC                               26.0    27.8    24.5    26.2    26.1 FineWeb                             26.2    25.4    25.1    25.8    29.3 RefinedWeb                              24.8    23.9    23.7    26.5    25.6 RPv1-CC                 \u2714 (Wiki-Ref.)           25.1    25.1    23.7    24.0    28.5 RPv2 (2023-14)                              26.3    26.7    25.3    24.1    29.6 RPv2 (2023-14)  \u2714                           26.4    26.8    25.3    25.2    28.8 RPv2 (2023-14)      \u2714       \u2714 (full)                27.0    28.8    24.8    25.6    30.0 RPv2 (2023-14)      \u2714   \u2714                   25.4    27.8    24.1    26.1    24.1 RPv2 (2023-14)      \u2714       \u2714 (natlang)         Wiki-middle 26.1    27.4    25.2    24.6    27.7 RPv2 (2023-14)      \u2714       \u2714 (Rep.)            Wiki-middle 25.5    24.3    25.2    27.8    24.8 RPv2 (9 Dumps)      \u2714   \u2714                   26.3    28.3    25.3    25.8    26.6 RPv2 (9 Dumps)      \u2714   \u2714   \u2714 (full)                25.6    28.0    25.1    24.9    24.4 RPv2 (9 Dumps)      \u2714   \u2714   \u2714 (Rep.)        \u2714 (Palm-mix)        24.4    26.9    23.7    24.8    22.7 RPv2 (9 Dumps)      \u2714   \u2714   \u2714 (Rep.)    \u2714 (Palm-mix)            24.9    26.1    24.0    26.3    23.8 RPv2 (9 Dumps)      \u2714   \u2714   \u2714 (natlang) \u2714 (Palm-mix)            25.3    27.8    24.2    25.4    24.5 RPv2 (9 Dumps)      \u2714   \u2714 (line-filter) \u2714 (natlang) \u2714 (Palm-mix)            25.1    27.5    24.0    25.0    24.4 RPv2 (9 Dumps)      \u2714   custom-rules    \u2714 (Wiki-Ref.)      P wiki</p> <p>30 27.0    27.9    25.1    26.0    30.0 RPv2 (9 Dumps)      \u2714   custom-rules + Gopher-Rep   \u2714 (Wiki-Ref.)      P wiki</p> <p>30 25.9    25.8    24.3    27.1    27.2</p> <p>\u8868 20\uff1a \u5bf9 468M \u53c2\u6570\u8bed\u8a00\u6a21\u578b\u5728\u591a\u9879\u9009\u62e9\u4efb\u52a1\u4e0a\u7684\u8bc4\u4f30\u3002 \u6bcf\u4e2a\u6307\u6807\u4e2d\u5f97\u5206\u6700\u9ad8\u7684\u7684\u6570\u636e\u96c6\u4ee5\u7c97\u4f53\u4e0b\u5212\u7ebf\u663e\u793a\uff0c\u5f97\u5206\u7b2c\u4e8c\u9ad8\u7684\u6570\u636e\u96c6\u4ee5\u7c97\u4f53\u663e\u793a\uff0c\u5f97\u5206\u7b2c\u4e09\u9ad8\u7684\u6570\u636e\u96c6\u4ee5\u659c\u4f53\u4e0b\u5212\u7ebf\u663e\u793a\u3002 Dataset Deduplication   Rule-based  ML Heuristics   CoQA    OpenbookQA  PIQA    PubMedQA    SciQ    SocialIQA   TruthfulQA Exact   Fuzzy   C4  Gopher  Classif.    DSIR    PPL C4                              3.8 30.2    64.4    46.0    51.7    33.4    33.3 Dolma-v1.7 CC                               5.2 28.2    65.3    42.6    55.2    31.6    33.2 FineWeb                             9.0 29.4    64.5    41.4    54.3    32.4    33.5 RefinedWeb                              13.2    28.6    64.4    52.2    56.4    32.8    33.3 RPv1-CC                 \u2714 (Wiki-Ref.)           11.6    25.4    57.3    40.6    56.7    33.1    33.9 RPv2 (2023-14)                              12.5    29.2    61.6    40.8    53.0    32.9    31.4 RPv2 (2023-14)  \u2714                           11.8    27.6    61.1    43.6    53.7    32.5    33.4 RPv2 (2023-14)      \u2714       \u2714 (full)                11.3    28.8    62.8    51.0    53.9    32.6    32.6 RPv2 (2023-14)      \u2714   \u2714                   5.8 28.8    63.4    49.6    54.7    36.6    33.8 RPv2 (2023-14)      \u2714       \u2714 (natlang)         Wiki-middle 11.3    28.4    63.5    49.6    53.6    32.8    33.4 RPv2 (2023-14)      \u2714       \u2714 (Rep.)            Wiki-middle 11.9    29.4    63.1    52.6    53.4    32.5    31.6 RPv2 (9 Dumps)      \u2714   \u2714                   6.6 29.0    62.0    36.2    53.7    33.2    34.3 RPv2 (9 Dumps)      \u2714   \u2714   \u2714 (full)                5.8 28.6    62.8    51.2    54.8    34.4    31.2 RPv2 (9 Dumps)      \u2714   \u2714   \u2714 (Rep.)        \u2714 (Palm-mix)        6.0 29.4    61.6    45.4    52.2    33.4    33.1 RPv2 (9 Dumps)      \u2714   \u2714   \u2714 (Rep.)    \u2714 (Palm-mix)            5.4 29.4    62.5    45.0    51.7    34.0    33.7 RPv2 (9 Dumps)      \u2714   \u2714   \u2714 (natlang) \u2714 (Palm-mix)            4.9 28.0    62.9    52.8    52.0    33.0    33.6 RPv2 (9 Dumps)      \u2714   \u2714 (line-filter) \u2714 (natlang) \u2714 (Palm-mix)            6.4 27.0    63.2    47.8    52.9    32.8    32.0 RPv2 (9 Dumps)      \u2714   custom-rules    \u2714 (Wiki-Ref.)      P wiki</p> <p>30 10.0    27.8    59.6    41.2    55.8    33.3    32.0 RPv2 (9 Dumps)      \u2714   custom-rules + Gopher-Rep   \u2714 (Wiki-Ref.)      P wiki</p> <p>30 9.3 28.0    59.2    43.4    54.9    33.0    33.3</p> <p>D.516\u4ebf\u53c2\u6570\u6a21\u578b\u7684\u8bc4\u4f30 \u8868\u683c21\u300122\u548c23\u663e\u793a\u4e86\u4f7f\u752816\u4ebf\u53c2\u6570\u6a21\u578b\u7684\u6d88\u878d\u5b9e\u9a8c\u7ed3\u679c\u3002 \u6bcf\u4e2a\u6a21\u578b\u90fd\u4f7f\u75283500\u4ebf\u4e2a\u7b26\u5143\u8fdb\u884c\u8bad\u7ec3\u3002</p> <p>\u8868\u683c 21\uff1a \u4f7f\u75283500\u4ebf\u4e2a\u7b26\u5143\u5728\u4e0d\u540c\u6570\u636e\u96c6\u4e0a\u8bad\u7ec3\u768416\u4ebf\u53c2\u6570\u8bed\u8a00\u6a21\u578b\u7684\u4e0b\u6e38\u4efb\u52a1\u51c6\u786e\u7387\u3002 Dataset Fuzzy Deduplication     Rule-based  ML Heuristics   Natural Language Inference  Coref. Res. Sentence Completion C4  Gopher  ANLI    ARC-c   ARC-e   Winogrande  Hellaswag   LAMBADA RefinedWeb                  33.6    26.9    51.7    54.4    55.8    47.9 RPv2 (full) \u2714       \u2714   WikiRef 32.4    27.9    51.3    56.4    47.4    47.4 RPv2 (full) \u2714   \u2714   \u2714(natlang)  Palm-Mix    33.6    28.7    52.4    54.5    53.1    42.9</p> <p>\u8868\u683c 22\uff1a \u5728MMLU\u53ca\u5176\u5b50\u4efb\u52a1\u4e0a\uff0c\u9488\u5bf916\u4ebf\u53c2\u6570\u8bed\u8a00\u6a21\u578b\u76845-shot\u8bbe\u7f6e\u4e0b\u7684\u8bc4\u4f30\u7ed3\u679c\u3002 Dataset Fuzzy Deduplication     Rule-based  ML Heuristics   MMLU C4  Gopher  MMLU    Stem    Humanities  Other   Social Sciences RefinedWeb                  25.3    24.9    24.9    27.0    24.7 RPv2 (full) \u2714       \u2714   WikiRef 25.2    26.0    26.7    23.9    23.3 RPv2 (full) \u2714   \u2714   \u2714(natlang)  Palm-Mix    24.7    25.7    25.4    23.8    23.4</p> <p>\u8868\u683c 23\uff1a \u9488\u5bf916\u4ebf\u53c2\u6570\u8bed\u8a00\u6a21\u578b\u5728\u591a\u9879\u9009\u62e9\u4efb\u52a1\u4e0a\u7684\u8bc4\u4f30\u7ed3\u679c\u3002 Dataset Fuzzy Deduplication     Rule-based  ML Heuristics   CoQA    OpenbookQA  PIQA    PubMedQA    SciQ    SocialIQA   TruthfulQA C4  Gopher RefinedWeb                  47.4    31.6    73.8    57.0    75.3    41.0    36.6 RPv2 (full) \u2714       \u2714   WikiRef 43.7    32.6    67.4    55.6    72.7    40.4    36.9 RPv2 (full) \u2714   \u2714   \u2714(natlang)  Palm-Mix    22.1    32.2    71.3    55.2    71.0    42.2    35.7</p> <p>\u9644\u5f55 E\u4f5c\u8005\u8d23\u4efb\u58f0\u660e \u6b64\u805a\u5408\u6570\u636e\u96c6\u6839\u636eODC-By-1.0\u7684\u6761\u6b3e\u4ee5\u53ca\u53ef\u80fd\u9002\u7528\u4e8e\u5176\u7ec4\u6210\u90e8\u5206\u7684\u4efb\u4f55\u8bb8\u53ef\u6388\u4e88\u60a8\u8bb8\u53ef\u3002</p> <p>\u867d\u7136\u6211\u4eec\u5df2\u5c3d\u4e00\u5207\u52aa\u529b\u786e\u4fdd\u6b64\u6570\u636e\u96c6\u4e2d\u5305\u542b\u7684\u6570\u636e\u7684\u51c6\u786e\u6027\u548c\u5408\u6cd5\u6027\uff0c\u4f46\u7531\u4e8e\u5176\u89c4\u6a21\uff0c\u6211\u4eec\u65e0\u6cd5\u4fdd\u8bc1\u5176\u7edd\u5bf9\u5b8c\u6574\u6027\u6216\u6b63\u786e\u6027\u3002 \u56e0\u6b64\uff0c\u5982\u679c\u4f7f\u7528\u6b64\u6570\u636e\u96c6\u8fdd\u53cd\u4e86\u4efb\u4f55\u6743\u5229\uff08\u6cd5\u5f8b\u6216\u5176\u4ed6\u6743\u5229\uff09\uff0c\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\u7248\u6743\u4fb5\u72af\u3001\u9690\u79c1\u4fb5\u72af\u6216\u654f\u611f\u4fe1\u606f\u6ee5\u7528\uff0c\u6211\u4eec\u4f5c\u8005\u5bf9\u8fd9\u4e9b\u8fdd\u89c4\u884c\u4e3a\u6982\u4e0d\u8d1f\u8d23\u3002 \u6b64\u6570\u636e\u96c6\u6309\u201c\u73b0\u72b6\u201d\u63d0\u4f9b\uff0c\u4e0d\u9644\u5e26\u4efb\u4f55\u660e\u793a\u6216\u6697\u793a\u7684\u4fdd\u8bc1\u3002</p> <p>\u4f7f\u7528\u6b64\u6570\u636e\u96c6\u5373\u8868\u793a\u60a8\u540c\u610f\uff0c\u56e0\u4f7f\u7528\u6b64\u6570\u636e\u96c6\u800c\u4ea7\u751f\u7684\u4efb\u4f55\u540e\u679c\uff08\u6cd5\u5f8b\u6216\u5176\u4ed6\u540e\u679c\uff09\u5747\u7531\u60a8\u81ea\u884c\u627f\u62c5\u8d23\u4efb\u3002 \u60a8\u627f\u8ba4\u60a8\u5c06\u5728\u4f7f\u7528\u6570\u636e\u96c6\u65f6\u5c3d\u804c\u5c3d\u8d23\uff0c\u5e76\u9075\u5b88\u6240\u6709\u9002\u7528\u7684\u6cd5\u5f8b\u3001\u6cd5\u89c4\u548c\u9053\u5fb7\u51c6\u5219\u3002 \u901a\u8fc7\u8bbf\u95ee\u3001\u4e0b\u8f7d\u6216\u4f7f\u7528\u6b64\u6570\u636e\u96c6\uff0c\u60a8\u8868\u793a\u63a5\u53d7\u672c\u58f0\u660e\uff0c\u5e76\u627f\u8bfa\u9075\u5b88\u8bb8\u53ef\u6761\u6b3e\u548c\u6761\u4ef6\u3002</p> <p>\u9644\u5f55 F\u8bb8\u53ef GitHub \u4ee3\u7801\u5e93\u4e2d\u63d0\u4f9b\u7684\u4ee3\u7801 8 \u91c7\u7528 Apache 2.0 \u8bb8\u53ef\u8bc1\u5206\u53d1\u3002 \u5bf9\u4e8e\u6570\u636e\u96c6\u672c\u8eab\uff0c\u6211\u4eec\u53c2\u8003 Common Crawl \u57fa\u91d1\u4f1a\u4f7f\u7528\u6761\u6b3e 9 \uff08\u5bf9\u4e8e\u4ece Common Crawl \u5b58\u6863\u6d3e\u751f\u7684\u6570\u636e\u96c6\uff09\u3002 \u5bf9\u4e8e\u5176\u4ed6\u6570\u636e\u96c6\uff0c\u6211\u4eec\u53c2\u8003\u6570\u636e\u96c6\u6700\u521d\u5206\u53d1\u7684\u8bb8\u53ef\u8bc1\u3002 \u5177\u4f53\u6765\u8bf4\uff0c</p> <p>\u2022 C4 \u6570\u636e\u96c6\u4f4d\u4e8e https://huggingface.co/datasets/allenai/c4#license\uff0c \u2022 GitHub \u5b50\u96c6\u4ec5\u9650\u4e8e MIT\u3001BSD \u6216 Apache \u8bb8\u53ef\u8bc1\uff0c \u2022 arxiv \u5b50\u96c6\u7684\u4f7f\u7528\u6761\u6b3e\u4f4d\u4e8e https://info.arxiv.org/help/api/tou.html\uff0c \u2022 \u4efb\u4f55\u7ef4\u57fa\u767e\u79d1\u6d3e\u751f\u6570\u636e\u7684\u7ef4\u57fa\u767e\u79d1\u8bb8\u53ef\u8bc1 https://huggingface.co/datasets/legacy-datasets/wikipedia#licensing-information\uff0c \u2022 StackExchange \u6570\u636e\u5728\u4e92\u8054\u7f51\u6863\u6848\u9986\u4e0a\u7684 StackExchange \u8bb8\u53ef\u8bc1 https://archive.org/details/stackexchange\u3002 \u6211\u4eec\u8fdb\u4e00\u6b65\u8981\u6c42\u7528\u6237\u9075\u5b88\u4ed6\u4eec\u4f7f\u7528\u7684\u5b50\u96c6\u7684\u6bcf\u4e2a\u5355\u72ec\u8bb8\u53ef\u8bc1\u3002</p>"},{"location":"%E8%BF%90%E7%BB%B4/%E8%BF%90%E7%BB%B4/","title":"\u8fd0\u7ef4\u6570\u636e","text":"Bash<pre><code># \u66f4\u65b0\u8f6f\u4ef6\u5305\u5217\u8868\napt-get update\n\n# \u5b89\u88c5\u5fc5\u8981\u7684\u57fa\u7840\u8f6f\u4ef6\napt-get install git screen\n</code></pre> Bash<pre><code>[filter \"lfs\"]\n        process = git-lfs filter-process\n        required = true\n        clean = git-lfs clean -- %f\n        smudge = git-lfs smudge -- %f\n[alias]\n    br = branch\n    st = status\n    d = difftool\n    co = checkout\n    lg = log --all --decorate --graph --oneline\n[color]\n    ui = true\n[tool]\n    difftool = vimdiff\n[user]\n        email = xiongxinlei@shizhuang-inc.com\n        name = xiongxinlei\n[difftool]\n    prompt = false\n[i18n]\n        commitencoding = utf-8\n        logoutputencoding = utf-8\n[gui]\n    encoding = utf-8\n[url \"git@pkg.poizon.com:\"]\n        insteadof = https://pkg.poizon.com/\n[difftool \"vimdiff\"]\n        cmd = vimdiff \\\"$LOCAL\\\" \\\"$REMOTE\\\"\n        trustExitCode = false\n[merge]\n        tool = vimdiff\n[diff]\n        tool = vimdiff\n[filter \"lfs\"]\n        clean = git-lfs clean -- %f\n        smudge = git-lfs smudge -- %f\n        process = git-lfs filter-process\n        required = true\n[core]\n        quotepath = false\n        editor = vim\n[http]\n        postBuffer = 524288000\n[credential]\n        helper = store\n</code></pre> Bash<pre><code>#allow bold colors - necessary for some reason\nattrcolor b \".I\"\n\n# Tell screen how to set colors. AB = background, AF=foreground\ntermcapinfo xterm 'Co#256:AB=\\E[48;5;%dm:AF=\\E[38;5;%dm'\n#\n# # Enables use of shift-PgUp and shift-PgDn\ntermcapinfo xterm|xterms|xs|rxvt ti@:te@\n#\n# # Erase background with current bg color\ndefbce \"on\"\n#\n# # Enable 256 color term\nterm xterm-256color\n\n# # Cache 30000 lines for scroll back\ndefscrollback 30000\n#\n# # New mail notification\n #backtick 101 30 15 $HOME/bin/mailstatus.sh\n\nhardstatus alwayslastline\n # Very nice tabbed colored hardstatus line\nhardstatus string '%{= Kd} %{= Kd}%-w%{= Kr}[%{= KW}%n %t%{= Kr}]%{= Kd}%+w %-= %{KG} %H%{KW}|%{KY}%101`%{KW}|%D %M %d %Y%{= Kc} %C%A%{-}'\n#\n# # change command character from ctrl-a to ctrl-b (emacs users may want this)\nescape ^Jj\n#\n# # Hide hardstatus: ctrl-a f\nbind f eval \"hardstatus ignore\"\n# Show hardstatus: ctrl-a F\nbind F eval \"hardstatus alwayslastline\"\ndefutf8 on\ndefencoding utf8\nencoding UTF-8 UTF-8\n</code></pre> <ul> <li>\u8fdc\u7a0b\u8fde\u63a5 Bash<pre><code>apt-get update &amp;&amp; \\\napt-get install -y openssh-server &amp;&amp; \\\necho \"PermitRootLogin yes\" &gt;&gt; /etc/ssh/sshd_config \n# \u8bbe\u7f6e\u7aef\u53e3\u4e3a8822\nvim /etc/ssh/sshd_config \n\n/etc/init.d/ssh  start\n\nvim ~/.ssh/authorized_keys\n</code></pre></li> </ul> Bash<pre><code>apt install language-pack-zh-hans\n# \u5728~/.bashrc\u4e2d\u8bbe\u7f6e\nexport LANG=zh_CN.UTF-8\n</code></pre> Bash<pre><code>apt-get install tzdata\nexport TZ='Asia/Shanghai'\ndpkg-reconfigure tzdata\n</code></pre> Bash<pre><code>\"\u5173\u95edvi\u517c\u5bb9,\u5426\u5219\u9000\u683c\u952e\u65e0\u6cd5\u5220\u9664\u6587\u672c\nset nocompatible\n\nset nu\nsyntax enable\nsyntax on\nset hlsearch\nset ignorecase\nset incsearch\nset fileencodings=utf-8,ucs-bom,gb18030,gbk,gb2312,cp936\nset termencoding=utf-8\nset encoding=utf-8\nset cursorline\nif has('mouse')\n    set mouse=a\nendif\n\" \u8df3\u8f6c\u81f3\u53f3\u65b9\u7684\u7a97\u53e3\nnnoremap wl &lt;C-W&gt;l\n\" \u8df3\u8f6c\u81f3\u5de6\u65b9\u7684\u7a97\u53e3\nnnoremap wh &lt;C-W&gt;h\n\" \u8df3\u8f6c\u81f3\u4e0a\u65b9\u7684\u5b50\u7a97\u53e3\nnnoremap wk &lt;C-W&gt;k\n\" \u8df3\u8f6c\u81f3\u4e0b\u65b9\u7684\u5b50\u7a97\u53e3\nnnoremap wj &lt;C-W&gt;j\n\n\" \u65b0\u5206\u5272\u7a97\u53e3\u4f4d\u4e8e\u4e0b\u65b9\nset splitbelow\n\" \u65b0\u5206\u5272\u7a97\u53e3\u4f4d\u4e8e\u53f3\u65b9\nset splitright\n\n\" \u65b0\u5206\u5272\u7a97\u53e3\u4f4d\u4e8e\u4e0b\u65b9\nset splitbelow\n\" \u65b0\u5206\u5272\u7a97\u53e3\u4f4d\u4e8e\u53f3\u65b9\nset splitright\n\n\nset showmode\nset showcmd\n\n\" \u5c06\u5236\u8868\u7b26\u6269\u5c55\u4e3a\u7a7a\u683c\nset expandtab\n\" \u8bbe\u7f6e\u7f16\u8f91\u65f6\u5236\u8868\u7b26\u5360\u7528\u7a7a\u683c\u6570\nset tabstop=4\n\" \u8bbe\u7f6e\u683c\u5f0f\u5316\u65f6\u5236\u8868\u7b26\u5360\u7528\u7a7a\u683c\u6570\nset shiftwidth=4\n\" \u8ba9 vim \u628a\u8fde\u7eed\u6570\u91cf\u7684\u7a7a\u683c\u89c6\u4e3a\u4e00\u4e2a\u5236\u8868\u7b26\nset softtabstop=4\n\n:map &lt;F3&gt; :vertical wincmd f&lt;CR&gt;\n:map &lt;F4&gt; :set wrap&lt;CR&gt;\n:map &lt;F5&gt; :set nowrap&lt;CR&gt;\n:map &lt;F6&gt; :set paste&lt;CR&gt;\n:map &lt;F7&gt; :set nopaste&lt;CR&gt;\n:map tn :tabNext&lt;CR&gt;\n:map tp :tabprevious&lt;CR&gt;\n\nset foldmethod=syntax \"\u57fa\u4e8e\u8bed\u6cd5\u7684\u4ee3\u7801\u6298\u53e0\nset nofoldenable \" \u542f\u52a8 vim \u65f6\u4e0d\u6298\u53e0\u4ee3\u7801\nnnoremap &lt;space&gt; za \" \u7a7a\u683c\u8fdb\u884c\u6298\u53e0\u4e0e\u5c55\u5f00\n</code></pre>"}]}